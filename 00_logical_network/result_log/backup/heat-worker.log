2018-02-15 06:51:42,503 [1;37mINFO[0m heat_worker - Registered gohan 2-step delete flag: marked_for_deletion (resources.py - 62)
2018-02-15 06:51:42,504 [1;37mINFO[0m heat_worker - Gohan config path: /config (resources.py - 274)
2018-02-15 06:51:42,505 [1;37mINFO[0m heat_worker - Gohan state path: /state (resources.py - 298)
2018-02-15 06:51:42,567 [1;33mWARNING[0m heat_worker - Could not reach gohan. Retrying in 1s. (gohan.py - 28)
2018-02-15 06:51:43,574 [1;33mWARNING[0m heat_worker - Could not reach gohan. Retrying in 2s. (gohan.py - 28)
2018-02-15 06:51:45,579 [1;33mWARNING[0m heat_worker - Could not reach gohan. Retrying in 4s. (gohan.py - 28)
2018-02-15 06:51:49,587 [1;33mWARNING[0m heat_worker - Could not reach gohan. Retrying in 8s. (gohan.py - 28)
================================================
2018-02-15 06:51:57,707 [1;34mDEBUG[0m heat_worker - Starting worker. (etcd_worker.py - 231)
2018-02-15 06:51:57,708 [1;37mINFO[0m heat_worker - Worker started. (etcd_worker.py - 234)
2018-02-15 06:51:57,708 [1;34mDEBUG[0m heat_worker - Waiting for a job. (etcd_worker.py - 218)
2018-02-15 06:51:57,709 [1;34mDEBUG[0m heat_worker - 8 job slots available (etcd_worker.py - 213)
2018-02-15 06:52:27,721 [1;34mDEBUG[0m heat_worker - GetJob timeout. (etcd_worker.py - 227)
2018-02-15 06:52:27,726 [1;34mDEBUG[0m heat_worker - Waiting for a job. (etcd_worker.py - 218)
2018-02-15 06:52:27,727 [1;34mDEBUG[0m heat_worker - 8 job slots available (etcd_worker.py - 213)
2018-02-15 06:52:48,048 [1;37mINFO[0m heat_worker - Reserved job: create:heat_worker:ese_device:718148aa-4483-47d5-bbd1-a0e0738dc018:1:91uyh using id: e2e41d73-a7ce-42c0-9669-b9329b0d465a (job_queue.py - 245)
2018-02-15 06:52:48,050 [1;34mDEBUG[0m heat_worker - Waiting for a job. (etcd_worker.py - 218)
2018-02-15 06:52:48,051 [1;34mDEBUG[0m heat_worker - 7 job slots available (etcd_worker.py - 213)
2018-02-15 06:52:48,056 [1;34mDEBUG[0m heat_worker - ese_device:718148aa-4483-47d5-bbd1-a0e0738dc018 - Starting work on new ready job create:heat_worker:ese_device:718148aa-4483-47d5-bbd1-a0e0738dc018:1:91uyh (etcd_worker.py - 108)
2018-02-15 06:52:48,057 [1;34mDEBUG[0m heat_worker - ese_device:718148aa-4483-47d5-bbd1-a0e0738dc018 - Checking job status for ese_device:718148aa-4483-47d5-bbd1-a0e0738dc018 (heat_stacks_worker.py - 44)
2018-02-15 06:52:48,453 [1;37mINFO[0m heat_worker - ese_device:718148aa-4483-47d5-bbd1-a0e0738dc018 - CREATE STARTED (heat_messenger.py - 92)
2018-02-15 06:52:48,513 [1;37mINFO[0m heat_worker - ese_device:718148aa-4483-47d5-bbd1-a0e0738dc018 - Template id ese_device_existing resolved from mapping: ACese_device_&Pexisting (resources.py - 835)
2018-02-15 06:52:48,518 [1;34mDEBUG[0m heat_worker - ese_device:718148aa-4483-47d5-bbd1-a0e0738dc018 - Heat template prepared: 
heat_template_version: 2013-05-23

description: >
  ESE Device (existing) template

parameters:
  name:
    type: string
    label: Physical Router Name
    description: Name of the physical router that will be created.
  hostname:
    type: string
    label: Hostname
    description: Name of host (vrouter) to create router on
  gohan_id:
    type: string
    label: Gohan resource ID
    description: UUID of the ESE Device
  device_ip:
    type: string
    label: Device IP Address
    description: Device IP Address.
  tenant_id:
    type: string
    label: Tenant ID
  version:
    type: number
    label: Config version

resources:
  physical_router:
    type: OS::Contrail::ExistingResource
    properties:
      fq_name:
        - "default-global-system-config"
        - { get_param: hostname }
      resource_type: "physical_router"

  device_monitor:
    type: ESI::Monitoring::MonitoringTarget
    properties:
      type: snmp_device
      resource_type: ese_devices
      resource_id: { get_param: gohan_id }
      tenant_id: { get_param: tenant_id }
      version: { get_param: version }
      field_name: switch
      properties:
        device_ip: { get_param: device_ip }
        community_name: ESE_NODE_COMMUNITY
      syncer_properties:
        etcd:
          status:
            key: switch
    depends_on: physical_router

outputs:
  id:
    description: A unique id for the physical router.
    value: { get_resource: physical_router }
  name:
    description: The name of the physical router.
    value: { get_attr: [physical_router, name] }
  fq_name:
    description: The FQ name of the physical router.
    value: { get_attr: [physical_router, fq_name] }
  monitoring_target_id:
    description: Monitoring Target ID
    value: { get_resource: device_monitor }
  monitoring_link:
    description: Monitoring Process Link
    value: { get_attr: [device_monitor, link] }
 with parameters:
{"device_ip": "10.161.0.33", "name": "QFX-NW01", "tenant_id": "ae69b52f46ba480bb9636f62736436f4", "hostname": "QFX-NW01", "version": 1, "gohan_id": "718148aa-4483-47d5-bbd1-a0e0738dc018"}, 
 and heat timeout = 6, rollback = False, 
using this jinja parameters: 
{} (heat.py - 145)
2018-02-15 06:52:48,519 [1;37mINFO[0m heat_worker - ese_device:718148aa-4483-47d5-bbd1-a0e0738dc018 - Creating a stack ese_device_718148aa-4483-47d5-bbd1-a0e0738dc018 with parameters: {u'device_ip': u'10.161.0.33', u'name': u'QFX-NW01', u'tenant_id': u'ae69b52f46ba480bb9636f62736436f4', u'hostname': u'QFX-NW01', u'version': 1, u'gohan_id': u'718148aa-4483-47d5-bbd1-a0e0738dc018'}, timeout_mins: 6, and template: 
heat_template_version: 2013-05-23

description: >
  ESE Device (existing) template

parameters:
  name:
    type: string
    label: Physical Router Name
    description: Name of the physical router that will be created.
  hostname:
    type: string
    label: Hostname
    description: Name of host (vrouter) to create router on
  gohan_id:
    type: string
    label: Gohan resource ID
    description: UUID of the ESE Device
  device_ip:
    type: string
    label: Device IP Address
    description: Device IP Address.
  tenant_id:
    type: string
    label: Tenant ID
  version:
    type: number
    label: Config version

resources:
  physical_router:
    type: OS::Contrail::ExistingResource
    properties:
      fq_name:
        - "default-global-system-config"
        - { get_param: hostname }
      resource_type: "physical_router"

  device_monitor:
    type: ESI::Monitoring::MonitoringTarget
    properties:
      type: snmp_device
      resource_type: ese_devices
      resource_id: { get_param: gohan_id }
      tenant_id: { get_param: tenant_id }
      version: { get_param: version }
      field_name: switch
      properties:
        device_ip: { get_param: device_ip }
        community_name: ESE_NODE_COMMUNITY
      syncer_properties:
        etcd:
          status:
            key: switch
    depends_on: physical_router

outputs:
  id:
    description: A unique id for the physical router.
    value: { get_resource: physical_router }
  name:
    description: The name of the physical router.
    value: { get_attr: [physical_router, name] }
  fq_name:
    description: The FQ name of the physical router.
    value: { get_attr: [physical_router, fq_name] }
  monitoring_target_id:
    description: Monitoring Target ID
    value: { get_resource: device_monitor }
  monitoring_link:
    description: Monitoring Process Link
    value: { get_attr: [device_monitor, link] } (heat.py - 162)
2018-02-15 06:52:48,849 [1;37mINFO[0m heat_worker - ese_device:718148aa-4483-47d5-bbd1-a0e0738dc018 - Stack "ese_device_718148aa-4483-47d5-bbd1-a0e0738dc018" in status "CREATE_IN_PROGRESS" (heat.py - 221)
2018-02-15 06:52:49,958 [1;37mINFO[0m heat_worker - ese_device:718148aa-4483-47d5-bbd1-a0e0738dc018 - Stack "ese_device_718148aa-4483-47d5-bbd1-a0e0738dc018" in status "CREATE_IN_PROGRESS" (heat.py - 221)
2018-02-15 06:52:51,177 [1;37mINFO[0m heat_worker - ese_device:718148aa-4483-47d5-bbd1-a0e0738dc018 - Stack "ese_device_718148aa-4483-47d5-bbd1-a0e0738dc018" in status "CREATE_COMPLETE" (heat.py - 221)
2018-02-15 06:52:51,178 [1;37mINFO[0m heat_worker - ese_device:718148aa-4483-47d5-bbd1-a0e0738dc018 - CREATED ese_device_718148aa-4483-47d5-bbd1-a0e0738dc018 (heat.py - 280)
2018-02-15 06:52:51,496 [1;37mINFO[0m heat_worker - ese_device:718148aa-4483-47d5-bbd1-a0e0738dc018 - Job create finished with results {'heat_outputs': [{u'output_value': u'edd4b769-1665-429f-aef4-f428aca34a0b', u'description': u'Monitoring Target ID', u'output_key': u'monitoring_target_id'}, {u'output_value': [u'default-global-system-config', u'NWSDP-JNPR-02'], u'description': u'The FQ name of the physical router.', u'output_key': u'fq_name'}, {u'output_value': u'7e5c78fa-71c0-427e-947f-586b1fc3c470', u'description': u'A unique id for the physical router.', u'output_key': u'id'}, {u'output_value': u'http://collector-agents-se:7070/targets/edd4b769-1665-429f-aef4-f428aca34a0b', u'description': u'Monitoring Process Link', u'output_key': u'monitoring_link'}, {u'output_value': u'NWSDP-JNPR-02', u'description': u'The name of the physical router.', u'output_key': u'name'}], 'orchestration_state': u'CREATE_COMPLETE', 'error': None} (heat_stacks_worker.py - 103)
2018-02-15 06:52:51,511 [1;37mINFO[0m heat_worker - ese_device:718148aa-4483-47d5-bbd1-a0e0738dc018 - Job create:heat_worker:ese_device:718148aa-4483-47d5-bbd1-a0e0738dc018:1:91uyh finished. (job_queue.py - 266)
2018-02-15 06:52:51,512 [1;37mINFO[0m heat_worker - ese_device:718148aa-4483-47d5-bbd1-a0e0738dc018 - Trying to delete internal process state for resource ese_device:718148aa-4483-47d5-bbd1-a0e0738dc018 (resources.py - 701)
2018-02-15 06:53:18,058 [1;34mDEBUG[0m heat_worker - GetJob timeout. (etcd_worker.py - 227)
2018-02-15 06:53:18,060 [1;34mDEBUG[0m heat_worker - Waiting for a job. (etcd_worker.py - 218)
2018-02-15 06:53:18,062 [1;34mDEBUG[0m heat_worker - 8 job slots available (etcd_worker.py - 213)
2018-02-15 06:53:48,072 [1;34mDEBUG[0m heat_worker - GetJob timeout. (etcd_worker.py - 227)
2018-02-15 06:53:48,076 [1;34mDEBUG[0m heat_worker - Waiting for a job. (etcd_worker.py - 218)
2018-02-15 06:53:48,078 [1;34mDEBUG[0m heat_worker - 8 job slots available (etcd_worker.py - 213)
2018-02-15 06:53:59,371 [1;37mINFO[0m heat_worker - Reserved job: create:heat_worker:ese_physical_port:24dd42cf-b343-47a9-966a-8f7486378c46:1:paaak using id: 3dd11869-61a6-4a1d-bfe1-3ee3c43a2be3 (job_queue.py - 245)
2018-02-15 06:53:59,375 [1;34mDEBUG[0m heat_worker - Waiting for a job. (etcd_worker.py - 218)
2018-02-15 06:53:59,377 [1;34mDEBUG[0m heat_worker - 7 job slots available (etcd_worker.py - 213)
2018-02-15 06:53:59,384 [1;34mDEBUG[0m heat_worker - ese_physical_port:24dd42cf-b343-47a9-966a-8f7486378c46 - Starting work on new ready job create:heat_worker:ese_physical_port:24dd42cf-b343-47a9-966a-8f7486378c46:1:paaak (etcd_worker.py - 108)
2018-02-15 06:53:59,385 [1;34mDEBUG[0m heat_worker - ese_physical_port:24dd42cf-b343-47a9-966a-8f7486378c46 - Checking job status for ese_physical_port:24dd42cf-b343-47a9-966a-8f7486378c46 (heat_stacks_worker.py - 44)
2018-02-15 06:53:59,603 [1;37mINFO[0m heat_worker - ese_physical_port:24dd42cf-b343-47a9-966a-8f7486378c46 - CREATE STARTED (heat_messenger.py - 92)
2018-02-15 06:53:59,661 [1;37mINFO[0m heat_worker - ese_physical_port:24dd42cf-b343-47a9-966a-8f7486378c46 - Template id ese_physical_port_existing resolved from mapping: ACese_physical_port_&Pexisting (resources.py - 835)
2018-02-15 06:53:59,665 [1;34mDEBUG[0m heat_worker - ese_physical_port:24dd42cf-b343-47a9-966a-8f7486378c46 - Heat template prepared: 
heat_template_version: 2013-05-23

description: >
  Physical port template

parameters:
  physical_device_hostname:
    type: string
    label: Physical Device Hostname
    description: Hostname of the physical device on which physical port will be created.
  physical_port_name:
    type: string
    label: Physical Interface Name
    description: Name of the physical port.
  gohan_id:
    type: string
    label: Gohan resource ID
    description: UUID of the ESE Physical Port
  device_ip:
    type: string
    label: Device IP Address
    description: Device IP Address.
  tenant_id:
    type: string
    label: Tenant ID
  version:
    type: number
    label: Config version

resources:
  physical_interface:
    type: OS::Contrail::ExistingResource
    properties:
      fq_name:
        - "default-global-system-config"
        - { get_param: physical_device_hostname }
        - { get_param: physical_port_name }
      resource_type: "physical_interface"

  interface_monitor:
    type: ESI::Monitoring::MonitoringTarget
    properties:
      type: snmp_ports_status
      resource_type: ese_physical_ports
      resource_id: { get_param: gohan_id }
      tenant_id: { get_param: tenant_id }
      version: { get_param: version }
      field_name: port
      properties:
        device_ip: { get_param: device_ip }
        if_name: { get_param: physical_port_name }
        community_name: ESE_NODE_COMMUNITY
      syncer_properties:
        etcd:
          status:
            key: port
    depends_on: physical_interface

outputs:
  id:
    description: A unique id for the physical interface
    value: { get_resource: physical_interface }
  name:
    description: The name of the physical interface.
    value: { get_attr: [physical_interface, name] }
  monitoring_target_id:
    description: Monitoring Target ID
    value: { get_resource: interface_monitor }
  monitoring_link:
    description: Monitoring Process Link
    value: { get_attr: [interface_monitor, link] }
 with parameters:
{"physical_port_name": "xe-0/0/1", "physical_device_hostname": "QFX-NW01", "tenant_id": "ae69b52f46ba480bb9636f62736436f4", "device_ip": "10.161.0.33", "version": 1, "gohan_id": "24dd42cf-b343-47a9-966a-8f7486378c46"}, 
 and heat timeout = 6, rollback = False, 
using this jinja parameters: 
{} (heat.py - 145)
2018-02-15 06:53:59,667 [1;37mINFO[0m heat_worker - ese_physical_port:24dd42cf-b343-47a9-966a-8f7486378c46 - Creating a stack ese_physical_port_24dd42cf-b343-47a9-966a-8f7486378c46 with parameters: {u'physical_port_name': u'xe-0/0/1', u'physical_device_hostname': u'QFX-NW01', u'tenant_id': u'ae69b52f46ba480bb9636f62736436f4', u'device_ip': u'10.161.0.33', u'version': 1, u'gohan_id': u'24dd42cf-b343-47a9-966a-8f7486378c46'}, timeout_mins: 6, and template: 
heat_template_version: 2013-05-23

description: >
  Physical port template

parameters:
  physical_device_hostname:
    type: string
    label: Physical Device Hostname
    description: Hostname of the physical device on which physical port will be created.
  physical_port_name:
    type: string
    label: Physical Interface Name
    description: Name of the physical port.
  gohan_id:
    type: string
    label: Gohan resource ID
    description: UUID of the ESE Physical Port
  device_ip:
    type: string
    label: Device IP Address
    description: Device IP Address.
  tenant_id:
    type: string
    label: Tenant ID
  version:
    type: number
    label: Config version

resources:
  physical_interface:
    type: OS::Contrail::ExistingResource
    properties:
      fq_name:
        - "default-global-system-config"
        - { get_param: physical_device_hostname }
        - { get_param: physical_port_name }
      resource_type: "physical_interface"

  interface_monitor:
    type: ESI::Monitoring::MonitoringTarget
    properties:
      type: snmp_ports_status
      resource_type: ese_physical_ports
      resource_id: { get_param: gohan_id }
      tenant_id: { get_param: tenant_id }
      version: { get_param: version }
      field_name: port
      properties:
        device_ip: { get_param: device_ip }
        if_name: { get_param: physical_port_name }
        community_name: ESE_NODE_COMMUNITY
      syncer_properties:
        etcd:
          status:
            key: port
    depends_on: physical_interface

outputs:
  id:
    description: A unique id for the physical interface
    value: { get_resource: physical_interface }
  name:
    description: The name of the physical interface.
    value: { get_attr: [physical_interface, name] }
  monitoring_target_id:
    description: Monitoring Target ID
    value: { get_resource: interface_monitor }
  monitoring_link:
    description: Monitoring Process Link
    value: { get_attr: [interface_monitor, link] } (heat.py - 162)
2018-02-15 06:53:59,953 [1;37mINFO[0m heat_worker - ese_physical_port:24dd42cf-b343-47a9-966a-8f7486378c46 - Stack "ese_physical_port_24dd42cf-b343-47a9-966a-8f7486378c46" in status "CREATE_IN_PROGRESS" (heat.py - 221)
2018-02-15 06:54:01,047 [1;37mINFO[0m heat_worker - ese_physical_port:24dd42cf-b343-47a9-966a-8f7486378c46 - Stack "ese_physical_port_24dd42cf-b343-47a9-966a-8f7486378c46" in status "CREATE_IN_PROGRESS" (heat.py - 221)
2018-02-15 06:54:02,143 [1;37mINFO[0m heat_worker - ese_physical_port:24dd42cf-b343-47a9-966a-8f7486378c46 - Stack "ese_physical_port_24dd42cf-b343-47a9-966a-8f7486378c46" in status "CREATE_IN_PROGRESS" (heat.py - 221)
2018-02-15 06:54:03,325 [1;37mINFO[0m heat_worker - ese_physical_port:24dd42cf-b343-47a9-966a-8f7486378c46 - Stack "ese_physical_port_24dd42cf-b343-47a9-966a-8f7486378c46" in status "CREATE_COMPLETE" (heat.py - 221)
2018-02-15 06:54:03,326 [1;37mINFO[0m heat_worker - ese_physical_port:24dd42cf-b343-47a9-966a-8f7486378c46 - CREATED ese_physical_port_24dd42cf-b343-47a9-966a-8f7486378c46 (heat.py - 280)
2018-02-15 06:54:03,616 [1;37mINFO[0m heat_worker - ese_physical_port:24dd42cf-b343-47a9-966a-8f7486378c46 - Job create finished with results {'heat_outputs': [{u'output_value': u'a481c2c4-e9cd-41f3-8e27-3a4184119abf', u'description': u'Monitoring Target ID', u'output_key': u'monitoring_target_id'}, {u'output_value': u'5a79909b-2bf3-4e26-8a9c-0bf6bb175457', u'description': u'A unique id for the physical interface', u'output_key': u'id'}, {u'output_value': u'http://collector-agents-se:7070/targets/a481c2c4-e9cd-41f3-8e27-3a4184119abf', u'description': u'Monitoring Process Link', u'output_key': u'monitoring_link'}, {u'output_value': u'xe-0/0/38', u'description': u'The name of the physical interface.', u'output_key': u'name'}], 'orchestration_state': u'CREATE_COMPLETE', 'error': None} (heat_stacks_worker.py - 103)
2018-02-15 06:54:03,640 [1;37mINFO[0m heat_worker - ese_physical_port:24dd42cf-b343-47a9-966a-8f7486378c46 - Job create:heat_worker:ese_physical_port:24dd42cf-b343-47a9-966a-8f7486378c46:1:paaak finished. (job_queue.py - 266)
2018-02-15 06:54:03,641 [1;37mINFO[0m heat_worker - ese_physical_port:24dd42cf-b343-47a9-966a-8f7486378c46 - Trying to delete internal process state for resource ese_physical_port:24dd42cf-b343-47a9-966a-8f7486378c46 (resources.py - 701)
2018-02-15 06:54:29,386 [1;34mDEBUG[0m heat_worker - GetJob timeout. (etcd_worker.py - 227)
2018-02-15 06:54:29,388 [1;34mDEBUG[0m heat_worker - Waiting for a job. (etcd_worker.py - 218)
2018-02-15 06:54:29,389 [1;34mDEBUG[0m heat_worker - 8 job slots available (etcd_worker.py - 213)
2018-02-15 06:54:59,404 [1;34mDEBUG[0m heat_worker - GetJob timeout. (etcd_worker.py - 227)
2018-02-15 06:54:59,408 [1;34mDEBUG[0m heat_worker - Waiting for a job. (etcd_worker.py - 218)
2018-02-15 06:54:59,410 [1;34mDEBUG[0m heat_worker - 8 job slots available (etcd_worker.py - 213)
2018-02-15 06:55:04,429 [1;37mINFO[0m heat_worker - Reserved job: create:heat_worker:network:35bc496f-3c0e-46b4-a5c0-33810e8e7263:1:pp459 using id: 635b122d-1182-4723-b547-71e674632741 (job_queue.py - 245)
2018-02-15 06:55:04,431 [1;34mDEBUG[0m heat_worker - Waiting for a job. (etcd_worker.py - 218)
2018-02-15 06:55:04,432 [1;34mDEBUG[0m heat_worker - 7 job slots available (etcd_worker.py - 213)
2018-02-15 06:55:04,436 [1;34mDEBUG[0m heat_worker - network:35bc496f-3c0e-46b4-a5c0-33810e8e7263 - Starting work on new ready job create:heat_worker:network:35bc496f-3c0e-46b4-a5c0-33810e8e7263:1:pp459 (etcd_worker.py - 108)
2018-02-15 06:55:04,437 [1;34mDEBUG[0m heat_worker - network:35bc496f-3c0e-46b4-a5c0-33810e8e7263 - Checking job status for network:35bc496f-3c0e-46b4-a5c0-33810e8e7263 (heat_stacks_worker.py - 44)
2018-02-15 06:55:04,639 [1;37mINFO[0m heat_worker - network:35bc496f-3c0e-46b4-a5c0-33810e8e7263 - CREATE STARTED (heat_messenger.py - 92)
2018-02-15 06:55:04,696 [1;37mINFO[0m heat_worker - network:35bc496f-3c0e-46b4-a5c0-33810e8e7263 - Template id network resolved from mapping: Cnetwork (resources.py - 835)
2018-02-15 06:55:04,699 [1;34mDEBUG[0m heat_worker - network:35bc496f-3c0e-46b4-a5c0-33810e8e7263 - Heat template prepared: 
heat_template_version: 2013-05-23

description: >
  Network template

parameters:
  uuid:
    type: string
    label: Virtual Network UUID
    description: UUID of the virtual network that will be created.
    default: ""
  name:
    type: string
    label: Virtual Network Name
    description: Name of the virtual network that will be created.
  forwarding_mode:
    type: string
    label: Forwarding Mode
    description: Forwarding Mode.
    default: 'l2_l3'
  route_targets:
    type: comma_delimited_list
    label: Route Targets list
    default: []
  shared:
    type: boolean
    label: Shared Network
    default: false
  external:
    type: boolean
    label: External Network
    default: true
  allow_transit:
    type: boolean
    label: Allow Transit
    default: false
  admin_state_up:
    type: boolean
    label: Admin state up
    default: true

resources:
  network:
    type: OS::Contrail::VirtualNetwork
    properties:
      uuid: { get_param: uuid }
      name: { get_param: name }
      forwarding_mode: { get_param: forwarding_mode }
      route_targets: { get_param: route_targets }
      shared: { get_param: shared }
      admin_state_up: { get_param: admin_state_up }

outputs:
  id:
    description: A unique id for the virtual network.
    value: { get_resource: network }
  name:
    description: The name of the virtual network.
    value: { get_attr: [network, name] }
  fq_name:
    description: The FQ name of the virtual network.
    value: { get_attr: [network, fq_name] }
  route_targets:
    description: The name of the virtual network.
    value: { get_attr: [network, route_targets] }
 with parameters:
{"admin_state_up": true, "uuid": "35bc496f-3c0e-46b4-a5c0-33810e8e7263", "name": "35bc496f-3c0e-46b4-a5c0-33810e8e7263"}, 
 and heat timeout = 3, rollback = False, 
using this jinja parameters: 
{} (heat.py - 145)
2018-02-15 06:55:04,700 [1;37mINFO[0m heat_worker - network:35bc496f-3c0e-46b4-a5c0-33810e8e7263 - Creating a stack network_35bc496f-3c0e-46b4-a5c0-33810e8e7263 with parameters: {u'admin_state_up': True, u'uuid': u'35bc496f-3c0e-46b4-a5c0-33810e8e7263', u'name': u'35bc496f-3c0e-46b4-a5c0-33810e8e7263'}, timeout_mins: 3, and template: 
heat_template_version: 2013-05-23

description: >
  Network template

parameters:
  uuid:
    type: string
    label: Virtual Network UUID
    description: UUID of the virtual network that will be created.
    default: ""
  name:
    type: string
    label: Virtual Network Name
    description: Name of the virtual network that will be created.
  forwarding_mode:
    type: string
    label: Forwarding Mode
    description: Forwarding Mode.
    default: 'l2_l3'
  route_targets:
    type: comma_delimited_list
    label: Route Targets list
    default: []
  shared:
    type: boolean
    label: Shared Network
    default: false
  external:
    type: boolean
    label: External Network
    default: true
  allow_transit:
    type: boolean
    label: Allow Transit
    default: false
  admin_state_up:
    type: boolean
    label: Admin state up
    default: true

resources:
  network:
    type: OS::Contrail::VirtualNetwork
    properties:
      uuid: { get_param: uuid }
      name: { get_param: name }
      forwarding_mode: { get_param: forwarding_mode }
      route_targets: { get_param: route_targets }
      shared: { get_param: shared }
      admin_state_up: { get_param: admin_state_up }

outputs:
  id:
    description: A unique id for the virtual network.
    value: { get_resource: network }
  name:
    description: The name of the virtual network.
    value: { get_attr: [network, name] }
  fq_name:
    description: The FQ name of the virtual network.
    value: { get_attr: [network, fq_name] }
  route_targets:
    description: The name of the virtual network.
    value: { get_attr: [network, route_targets] } (heat.py - 162)
2018-02-15 06:55:04,999 [1;37mINFO[0m heat_worker - network:35bc496f-3c0e-46b4-a5c0-33810e8e7263 - Stack "network_35bc496f-3c0e-46b4-a5c0-33810e8e7263" in status "CREATE_IN_PROGRESS" (heat.py - 221)
2018-02-15 06:55:06,209 [1;37mINFO[0m heat_worker - network:35bc496f-3c0e-46b4-a5c0-33810e8e7263 - Stack "network_35bc496f-3c0e-46b4-a5c0-33810e8e7263" in status "CREATE_COMPLETE" (heat.py - 221)
2018-02-15 06:55:06,210 [1;37mINFO[0m heat_worker - network:35bc496f-3c0e-46b4-a5c0-33810e8e7263 - CREATED network_35bc496f-3c0e-46b4-a5c0-33810e8e7263 (heat.py - 280)
2018-02-15 06:55:06,482 [1;37mINFO[0m heat_worker - network:35bc496f-3c0e-46b4-a5c0-33810e8e7263 - Job create finished with results {'heat_outputs': [{u'output_value': [], u'description': u'The name of the virtual network.', u'output_key': u'route_targets'}, {u'output_value': u'default-domain:usertenant:35bc496f-3c0e-46b4-a5c0-33810e8e7263', u'description': u'The FQ name of the virtual network.', u'output_key': u'fq_name'}, {u'output_value': u'35bc496f-3c0e-46b4-a5c0-33810e8e7263', u'description': u'A unique id for the virtual network.', u'output_key': u'id'}, {u'output_value': u'35bc496f-3c0e-46b4-a5c0-33810e8e7263', u'description': u'The name of the virtual network.', u'output_key': u'name'}], 'orchestration_state': u'CREATE_COMPLETE', 'error': None} (heat_stacks_worker.py - 103)
2018-02-15 06:55:06,495 [1;37mINFO[0m heat_worker - network:35bc496f-3c0e-46b4-a5c0-33810e8e7263 - Job create:heat_worker:network:35bc496f-3c0e-46b4-a5c0-33810e8e7263:1:pp459 finished. (job_queue.py - 266)
2018-02-15 06:55:06,497 [1;37mINFO[0m heat_worker - network:35bc496f-3c0e-46b4-a5c0-33810e8e7263 - Trying to delete internal process state for resource network:35bc496f-3c0e-46b4-a5c0-33810e8e7263 (resources.py - 701)
2018-02-15 06:55:10,309 [1;37mINFO[0m heat_worker - Reserved job: create:heat_worker:subnet:3cfa93ac-251a-4a60-9434-ff4c88bf3655:1:igwm1 using id: 6b106ee7-e635-4aab-9806-0fe0c26fc0b7 (job_queue.py - 245)
2018-02-15 06:55:10,311 [1;34mDEBUG[0m heat_worker - Waiting for a job. (etcd_worker.py - 218)
2018-02-15 06:55:10,312 [1;34mDEBUG[0m heat_worker - 7 job slots available (etcd_worker.py - 213)
2018-02-15 06:55:10,315 [1;34mDEBUG[0m heat_worker - subnet:3cfa93ac-251a-4a60-9434-ff4c88bf3655 - Starting work on new ready job create:heat_worker:subnet:3cfa93ac-251a-4a60-9434-ff4c88bf3655:1:igwm1 (etcd_worker.py - 108)
2018-02-15 06:55:10,316 [1;34mDEBUG[0m heat_worker - subnet:3cfa93ac-251a-4a60-9434-ff4c88bf3655 - Checking job status for subnet:3cfa93ac-251a-4a60-9434-ff4c88bf3655 (heat_stacks_worker.py - 44)
2018-02-15 06:55:10,576 [1;37mINFO[0m heat_worker - subnet:3cfa93ac-251a-4a60-9434-ff4c88bf3655 - CREATE STARTED (heat_messenger.py - 92)
2018-02-15 06:55:10,636 [1;37mINFO[0m heat_worker - subnet:3cfa93ac-251a-4a60-9434-ff4c88bf3655 - Template id subnet resolved from mapping: Csubnet (resources.py - 835)
2018-02-15 06:55:10,641 [1;34mDEBUG[0m heat_worker - subnet:3cfa93ac-251a-4a60-9434-ff4c88bf3655 - Heat template prepared: 
heat_template_version: 2013-05-23

description: >
  Subnet template

parameters:
  name:
    type: string
    label: Local Subnet Name
    description: Name of the local subnet that will be created.
  network_id:
    type: string
    label: Network ID
    description: ID of the network for which subnet will be created.
  cidr:
    type: string
    label: Local Subnet IP prefix
    description: IP prefix of the local subnet that will be created.
  gateway_ip:
    default: "0.0.0.0"
    type: string
    label: Default Gateway
    description: Default gateway for the local subnet that will be created.
  ipam:
    type: string
    label: IP Address Management
    description: IPAM for the local subnet that will be created.
    default: ''
  enable_dhcp:
    type: boolean
    label: Enable DHCP
    description: Enable DHCP
    default: true
  dhcp_server_address:
    type: string
    label: DHCP Server address
    description: DHCP Server address
    default: "0.0.0.0"
  allocation_pools:
    type: string
    label: Allocation Pools
    description: Allocation Pools
    default: []
  dns_nameservers:
    type: comma_delimited_list
    label: DNS Nameservers List
    description: DNS Nameservers List
    default: []
  ntp_servers:
    type: comma_delimited_list
    label: NTP Nameservers List
    description: NTP Nameservers List
    default: []
  host_routes:
    type: json
    label: Host Routes
    description: Host Routes
    default: []

resources:
  subnet:
    type: OS::Contrail::VnSubnet
    properties:
      name: { get_param: name }
      network_id: { get_param: network_id }
      ip_prefix: { get_param: cidr }
      default_gateway: { get_param: gateway_ip }
      ipam: { get_param: ipam }
      enable_dhcp: { get_param: enable_dhcp }
      dns_server_address: { get_param: dhcp_server_address }
      dns_nameservers: { get_param: dns_nameservers }
      ntp_servers: { get_param: ntp_servers }
      host_routes: { get_param: host_routes }
      allocation_pools: { get_param: allocation_pools }
      gateway_is_vrouter: false

outputs:
  id:
    description: A unique id for the local subnet.
    value: { get_resource: subnet }
  name:
    description: The name of the local subnet.
    value: { get_attr: [subnet, name] }
  network_id:
    description: A unique id for the network.
    value: { get_attr: [subnet, network_id] }
  ip_prefix:
    description: IP prefix of local subnet.
    value: { get_attr: [subnet, ip_prefix] }
  default_gateway:
    description: Default gateway of local subnet.
    value: { get_attr: [subnet, default_gateway] }
  ipam:
    description: IPAM this local subnet uses.
    value: { get_attr: [subnet, ipam] }
 with parameters:
{"name": "3cfa93ac-251a-4a60-9434-ff4c88bf3655", "enable_dhcp": true, "network_id": "35bc496f-3c0e-46b4-a5c0-33810e8e7263", "ipam": "default-domain:default-project:default-network-ipam", "dns_nameservers": [], "allocation_pools": [{"start": "192.168.200.2", "end": "192.168.200.254"}], "dhcp_server_address": "192.168.200.2", "ntp_servers": [], "gateway_ip": "192.168.200.1", "host_routes": [], "cidr": "192.168.200.0/24"}, 
 and heat timeout = 3, rollback = False, 
using this jinja parameters: 
{} (heat.py - 145)
2018-02-15 06:55:10,642 [1;37mINFO[0m heat_worker - subnet:3cfa93ac-251a-4a60-9434-ff4c88bf3655 - Creating a stack subnet_3cfa93ac-251a-4a60-9434-ff4c88bf3655 with parameters: {u'name': u'3cfa93ac-251a-4a60-9434-ff4c88bf3655', u'enable_dhcp': True, u'network_id': u'35bc496f-3c0e-46b4-a5c0-33810e8e7263', u'ipam': u'default-domain:default-project:default-network-ipam', u'dns_nameservers': [], u'allocation_pools': [{u'start': u'192.168.200.2', u'end': u'192.168.200.254'}], u'dhcp_server_address': u'192.168.200.2', u'ntp_servers': [], u'gateway_ip': u'192.168.200.1', u'host_routes': [], u'cidr': u'192.168.200.0/24'}, timeout_mins: 3, and template: 
heat_template_version: 2013-05-23

description: >
  Subnet template

parameters:
  name:
    type: string
    label: Local Subnet Name
    description: Name of the local subnet that will be created.
  network_id:
    type: string
    label: Network ID
    description: ID of the network for which subnet will be created.
  cidr:
    type: string
    label: Local Subnet IP prefix
    description: IP prefix of the local subnet that will be created.
  gateway_ip:
    default: "0.0.0.0"
    type: string
    label: Default Gateway
    description: Default gateway for the local subnet that will be created.
  ipam:
    type: string
    label: IP Address Management
    description: IPAM for the local subnet that will be created.
    default: ''
  enable_dhcp:
    type: boolean
    label: Enable DHCP
    description: Enable DHCP
    default: true
  dhcp_server_address:
    type: string
    label: DHCP Server address
    description: DHCP Server address
    default: "0.0.0.0"
  allocation_pools:
    type: string
    label: Allocation Pools
    description: Allocation Pools
    default: []
  dns_nameservers:
    type: comma_delimited_list
    label: DNS Nameservers List
    description: DNS Nameservers List
    default: []
  ntp_servers:
    type: comma_delimited_list
    label: NTP Nameservers List
    description: NTP Nameservers List
    default: []
  host_routes:
    type: json
    label: Host Routes
    description: Host Routes
    default: []

resources:
  subnet:
    type: OS::Contrail::VnSubnet
    properties:
      name: { get_param: name }
      network_id: { get_param: network_id }
      ip_prefix: { get_param: cidr }
      default_gateway: { get_param: gateway_ip }
      ipam: { get_param: ipam }
      enable_dhcp: { get_param: enable_dhcp }
      dns_server_address: { get_param: dhcp_server_address }
      dns_nameservers: { get_param: dns_nameservers }
      ntp_servers: { get_param: ntp_servers }
      host_routes: { get_param: host_routes }
      allocation_pools: { get_param: allocation_pools }
      gateway_is_vrouter: false

outputs:
  id:
    description: A unique id for the local subnet.
    value: { get_resource: subnet }
  name:
    description: The name of the local subnet.
    value: { get_attr: [subnet, name] }
  network_id:
    description: A unique id for the network.
    value: { get_attr: [subnet, network_id] }
  ip_prefix:
    description: IP prefix of local subnet.
    value: { get_attr: [subnet, ip_prefix] }
  default_gateway:
    description: Default gateway of local subnet.
    value: { get_attr: [subnet, default_gateway] }
  ipam:
    description: IPAM this local subnet uses.
    value: { get_attr: [subnet, ipam] } (heat.py - 162)
2018-02-15 06:55:10,926 [1;37mINFO[0m heat_worker - subnet:3cfa93ac-251a-4a60-9434-ff4c88bf3655 - Stack "subnet_3cfa93ac-251a-4a60-9434-ff4c88bf3655" in status "CREATE_IN_PROGRESS" (heat.py - 221)
2018-02-15 06:55:12,191 [1;37mINFO[0m heat_worker - subnet:3cfa93ac-251a-4a60-9434-ff4c88bf3655 - Stack "subnet_3cfa93ac-251a-4a60-9434-ff4c88bf3655" in status "CREATE_COMPLETE" (heat.py - 221)
2018-02-15 06:55:12,192 [1;37mINFO[0m heat_worker - subnet:3cfa93ac-251a-4a60-9434-ff4c88bf3655 - CREATED subnet_3cfa93ac-251a-4a60-9434-ff4c88bf3655 (heat.py - 280)
2018-02-15 06:55:12,560 [1;37mINFO[0m heat_worker - subnet:3cfa93ac-251a-4a60-9434-ff4c88bf3655 - Job create finished with results {'heat_outputs': [{u'output_value': u'192.168.200.0/24', u'description': u'IP prefix of local subnet.', u'output_key': u'ip_prefix'}, {u'output_value': u'3cfa93ac-251a-4a60-9434-ff4c88bf3655', u'description': u'The name of the local subnet.', u'output_key': u'name'}, {u'output_value': u'192.168.200.1', u'description': u'Default gateway of local subnet.', u'output_key': u'default_gateway'}, {u'output_value': u'35bc496f-3c0e-46b4-a5c0-33810e8e7263', u'description': u'A unique id for the network.', u'output_key': u'network_id'}, {u'output_value': u'5a79909b-2bf3-4e26-8a9c-0bf6bb175457', u'description': u'IPAM this local subnet uses.', u'output_key': u'ipam'}, {u'output_value': u'15711909-5d0a-46c8-83f5-c739380ebbb9', u'description': u'A unique id for the local subnet.', u'output_key': u'id'}], 'orchestration_state': u'CREATE_COMPLETE', 'error': None} (heat_stacks_worker.py - 103)
2018-02-15 06:55:12,575 [1;37mINFO[0m heat_worker - subnet:3cfa93ac-251a-4a60-9434-ff4c88bf3655 - Job create:heat_worker:subnet:3cfa93ac-251a-4a60-9434-ff4c88bf3655:1:igwm1 finished. (job_queue.py - 266)
2018-02-15 06:55:12,576 [1;37mINFO[0m heat_worker - subnet:3cfa93ac-251a-4a60-9434-ff4c88bf3655 - Trying to delete internal process state for resource subnet:3cfa93ac-251a-4a60-9434-ff4c88bf3655 (resources.py - 701)
2018-02-15 06:55:17,475 [1;37mINFO[0m heat_worker - Reserved job: create:heat_worker:port:fde61b02-9615-4e75-aac0-30a333657c1b:1:s23ew using id: 2b801bcc-8671-4540-8942-d6b8938f9a18 (job_queue.py - 245)
2018-02-15 06:55:17,479 [1;34mDEBUG[0m heat_worker - Waiting for a job. (etcd_worker.py - 218)
2018-02-15 06:55:17,480 [1;34mDEBUG[0m heat_worker - 7 job slots available (etcd_worker.py - 213)
2018-02-15 06:55:17,487 [1;34mDEBUG[0m heat_worker - port:fde61b02-9615-4e75-aac0-30a333657c1b - Starting work on new ready job create:heat_worker:port:fde61b02-9615-4e75-aac0-30a333657c1b:1:s23ew (etcd_worker.py - 108)
2018-02-15 06:55:17,488 [1;34mDEBUG[0m heat_worker - port:fde61b02-9615-4e75-aac0-30a333657c1b - Checking job status for port:fde61b02-9615-4e75-aac0-30a333657c1b (heat_stacks_worker.py - 44)
2018-02-15 06:55:17,745 [1;37mINFO[0m heat_worker - port:fde61b02-9615-4e75-aac0-30a333657c1b - CREATE STARTED (heat_messenger.py - 92)
2018-02-15 06:55:17,806 [1;37mINFO[0m heat_worker - port:fde61b02-9615-4e75-aac0-30a333657c1b - Template id port resolved from mapping: {u'else_mapping': {u'constant': u'port'}, u'if_mapping': {u'regexp': [{u'field': u'device_owner'}, {u'constant': u'network:dhcp|network:empty'}]}, u'then_mapping': {u'constant': None}} (resources.py - 835)
2018-02-15 06:55:17,814 [1;34mDEBUG[0m heat_worker - port:fde61b02-9615-4e75-aac0-30a333657c1b - Heat template prepared: 
heat_template_version: 2013-05-23

description: >
  Virtual Machine Interface Template

parameters:
  uuid:
    type: string
    label: Backend Virtual Machine Interface UUID
    description: A unique id for the Virtual Machine Interface.
  name:
    type: string
    label: Physical Interface ID
    description: A unique id for the Physical Interface.
  security_groups:
    type: json
    default: []
    label: Security Groups List
    description: The IDs of security groups applied to the port.
  virtual_machine_interface_allowed_address_pairs:
    type: json
    label: Virtual machine interface allowed address pairs.
  virtual_machine_interface_mac_address:
    type: string
    default: "fe:ff:ff:ff:ff:ff"
    label: Virtual machine interface mac address.
  virtual_network:
    type: string
    label: Virtual Network.
  virtual_machine:
    type: string
    label: Virtual Machine.
    default: ""
  device_owner:
    type: string
    label: Device Owner
    default: ""
  admin_state_up:
    type: boolean
    label: Admin state up
    default: true
  tenant_id:
    type: string
    label: Tenant ID
  version:
    type: number
    label: Config version

resources:
  virtual_machine_interface:
    type: OS::Contrail::VirtualMachineInterface
    properties:
      uuid: { get_param: uuid }
      name: { get_param: name }
      virtual_machine_interface_allowed_address_pairs: { get_param: virtual_machine_interface_allowed_address_pairs }
      virtual_machine_interface_mac_addresses: [ { get_param: virtual_machine_interface_mac_address } ]
      virtual_networks: [ { get_param: virtual_network } ]
      virtual_machine: { get_param: virtual_machine }
      device_owner: { get_param: device_owner }
      admin_state_up: { get_param: admin_state_up }
      security_groups: { get_param: security_groups }



  instance_ip_0:
    type: OS::Contrail::InstanceIp
    properties:
      name:
        str_replace:
          template: '%name%_%zone%_%ip%'
          params:
            "%name%": { get_param: name }
            "%zone%": 3cfa93ac-251a-4a60-9434-ff4c88bf3655
            "%ip%": 192.168.200.101
      ip_address: 192.168.200.101
      subnet_id: 15711909-5d0a-46c8-83f5-c739380ebbb9
      network_id: { get_param: virtual_network }
      virtual_machine_interfaces: [ { get_resource: virtual_machine_interface } ]




outputs:
  id:
    description: A unique id for the virtual machine interface.
    value: { get_resource: virtual_machine_interface }
  mac_address:
    description: Virtual machine interface mac address.
    value: { get_attr: [virtual_machine_interface, virtual_machine_interface_mac_addresses] }
  allowed_address_pairs:
    description: Virtual machine allowed address pairs.
    value: { get_attr: [virtual_machine_interface, virtual_machine_interface_allowed_address_pairs] }
  virtual_network:
    description: Virtual network.
    value: { get_attr: [virtual_machine_interface, virtual_networks] }
  fq_name:
    description: Fully Qualified Name of the VMI
    value: { get_attr: [virtual_machine_interface, fq_name] }

 with parameters:
{"virtual_machine": "7ff183de-0188-46bf-b7d0-68d08ad2b54f", "name": "fde61b02-9615-4e75-aac0-30a333657c1b", "admin_state_up": true, "tenant_id": "ae69b52f46ba480bb9636f62736436f4", "device_owner": "physical_port", "virtual_machine_interface_allowed_address_pairs": [], "virtual_machine_interface_mac_address": "fa:16:3e:67:26:46", "version": 1, "virtual_network": "35bc496f-3c0e-46b4-a5c0-33810e8e7263", "security_groups": [], "uuid": "fde61b02-9615-4e75-aac0-30a333657c1b"}, 
 and heat timeout = 13, rollback = False, 
using this jinja parameters: 
{u'jinja_attached': False, u'jinja_force_dependency_gw_interface': None, u'jinja_fixed_ips': [{u'subnet_id': u'3cfa93ac-251a-4a60-9434-ff4c88bf3655', u'ip_address': u'192.168.200.101'}], u'jinja_force_dependency_cfg': None, u'jinja_device_owner': u'physical_port', u'jinja_subnets': [u'15711909-5d0a-46c8-83f5-c739380ebbb9']} (heat.py - 145)
2018-02-15 06:55:17,815 [1;37mINFO[0m heat_worker - port:fde61b02-9615-4e75-aac0-30a333657c1b - Creating a stack port_fde61b02-9615-4e75-aac0-30a333657c1b with parameters: {u'virtual_machine': u'7ff183de-0188-46bf-b7d0-68d08ad2b54f', u'name': u'fde61b02-9615-4e75-aac0-30a333657c1b', u'admin_state_up': True, u'tenant_id': u'ae69b52f46ba480bb9636f62736436f4', u'device_owner': u'physical_port', u'virtual_machine_interface_allowed_address_pairs': [], u'virtual_machine_interface_mac_address': u'fa:16:3e:67:26:46', u'version': 1, u'virtual_network': u'35bc496f-3c0e-46b4-a5c0-33810e8e7263', u'security_groups': [], u'uuid': u'fde61b02-9615-4e75-aac0-30a333657c1b'}, timeout_mins: 13, and template: 
heat_template_version: 2013-05-23

description: >
  Virtual Machine Interface Template

parameters:
  uuid:
    type: string
    label: Backend Virtual Machine Interface UUID
    description: A unique id for the Virtual Machine Interface.
  name:
    type: string
    label: Physical Interface ID
    description: A unique id for the Physical Interface.
  security_groups:
    type: json
    default: []
    label: Security Groups List
    description: The IDs of security groups applied to the port.
  virtual_machine_interface_allowed_address_pairs:
    type: json
    label: Virtual machine interface allowed address pairs.
  virtual_machine_interface_mac_address:
    type: string
    default: "fe:ff:ff:ff:ff:ff"
    label: Virtual machine interface mac address.
  virtual_network:
    type: string
    label: Virtual Network.
  virtual_machine:
    type: string
    label: Virtual Machine.
    default: ""
  device_owner:
    type: string
    label: Device Owner
    default: ""
  admin_state_up:
    type: boolean
    label: Admin state up
    default: true
  tenant_id:
    type: string
    label: Tenant ID
  version:
    type: number
    label: Config version

resources:
  virtual_machine_interface:
    type: OS::Contrail::VirtualMachineInterface
    properties:
      uuid: { get_param: uuid }
      name: { get_param: name }
      virtual_machine_interface_allowed_address_pairs: { get_param: virtual_machine_interface_allowed_address_pairs }
      virtual_machine_interface_mac_addresses: [ { get_param: virtual_machine_interface_mac_address } ]
      virtual_networks: [ { get_param: virtual_network } ]
      virtual_machine: { get_param: virtual_machine }
      device_owner: { get_param: device_owner }
      admin_state_up: { get_param: admin_state_up }
      security_groups: { get_param: security_groups }



  instance_ip_0:
    type: OS::Contrail::InstanceIp
    properties:
      name:
        str_replace:
          template: '%name%_%zone%_%ip%'
          params:
            "%name%": { get_param: name }
            "%zone%": 3cfa93ac-251a-4a60-9434-ff4c88bf3655
            "%ip%": 192.168.200.101
      ip_address: 192.168.200.101
      subnet_id: 15711909-5d0a-46c8-83f5-c739380ebbb9
      network_id: { get_param: virtual_network }
      virtual_machine_interfaces: [ { get_resource: virtual_machine_interface } ]




outputs:
  id:
    description: A unique id for the virtual machine interface.
    value: { get_resource: virtual_machine_interface }
  mac_address:
    description: Virtual machine interface mac address.
    value: { get_attr: [virtual_machine_interface, virtual_machine_interface_mac_addresses] }
  allowed_address_pairs:
    description: Virtual machine allowed address pairs.
    value: { get_attr: [virtual_machine_interface, virtual_machine_interface_allowed_address_pairs] }
  virtual_network:
    description: Virtual network.
    value: { get_attr: [virtual_machine_interface, virtual_networks] }
  fq_name:
    description: Fully Qualified Name of the VMI
    value: { get_attr: [virtual_machine_interface, fq_name] }
 (heat.py - 162)
2018-02-15 06:55:18,108 [1;37mINFO[0m heat_worker - port:fde61b02-9615-4e75-aac0-30a333657c1b - Stack "port_fde61b02-9615-4e75-aac0-30a333657c1b" in status "CREATE_IN_PROGRESS" (heat.py - 221)
2018-02-15 06:55:19,229 [1;37mINFO[0m heat_worker - port:fde61b02-9615-4e75-aac0-30a333657c1b - Stack "port_fde61b02-9615-4e75-aac0-30a333657c1b" in status "CREATE_IN_PROGRESS" (heat.py - 221)
2018-02-15 06:55:20,442 [1;37mINFO[0m heat_worker - port:fde61b02-9615-4e75-aac0-30a333657c1b - Stack "port_fde61b02-9615-4e75-aac0-30a333657c1b" in status "CREATE_COMPLETE" (heat.py - 221)
2018-02-15 06:55:20,443 [1;37mINFO[0m heat_worker - port:fde61b02-9615-4e75-aac0-30a333657c1b - CREATED port_fde61b02-9615-4e75-aac0-30a333657c1b (heat.py - 280)
2018-02-15 06:55:20,746 [1;37mINFO[0m heat_worker - port:fde61b02-9615-4e75-aac0-30a333657c1b - Job create finished with results {'heat_outputs': [{u'output_value': [[u'default-domain', u'admin', u'b62eefe0-0872-478d-adfe-1a606320f0e7']], u'description': u'Virtual network.', u'output_key': u'virtual_network'}, {u'output_value': u'default-domain:admin:f68d0924-ef20-4c1b-ac45-0e6b879af5e7', u'description': u'Fully Qualified Name of the VMI', u'output_key': u'fq_name'}, {u'output_value': u'f68d0924-ef20-4c1b-ac45-0e6b879af5e7', u'description': u'A unique id for the virtual machine interface.', u'output_key': u'id'}, {u'output_value': {u'allowed_address_pair': []}, u'description': u'Virtual machine allowed address pairs.', u'output_key': u'allowed_address_pairs'}, {u'output_value': [u'fa:16:3e:f7:60:7f'], u'description': u'Virtual machine interface mac address.', u'output_key': u'mac_address'}], 'orchestration_state': u'CREATE_COMPLETE', 'error': None} (heat_stacks_worker.py - 103)
2018-02-15 06:55:20,763 [1;37mINFO[0m heat_worker - port:fde61b02-9615-4e75-aac0-30a333657c1b - Job create:heat_worker:port:fde61b02-9615-4e75-aac0-30a333657c1b:1:s23ew finished. (job_queue.py - 266)
2018-02-15 06:55:20,776 [1;37mINFO[0m heat_worker - port:fde61b02-9615-4e75-aac0-30a333657c1b - Trying to delete internal process state for resource port:fde61b02-9615-4e75-aac0-30a333657c1b (resources.py - 701)
2018-02-15 06:55:20,797 [1;37mINFO[0m heat_worker - Reserved job: create:heat_worker:ese_logical_port:ced1435d-6dfa-4dab-bb7c-19da4d8e48b7:1:vcoy8 using id: 02d68e07-275b-4493-8348-a5b09d45c004 (job_queue.py - 245)
2018-02-15 06:55:20,799 [1;34mDEBUG[0m heat_worker - Waiting for a job. (etcd_worker.py - 218)
2018-02-15 06:55:20,800 [1;34mDEBUG[0m heat_worker - 7 job slots available (etcd_worker.py - 213)
2018-02-15 06:55:20,803 [1;34mDEBUG[0m heat_worker - ese_logical_port:ced1435d-6dfa-4dab-bb7c-19da4d8e48b7 - Starting work on new ready job create:heat_worker:ese_logical_port:ced1435d-6dfa-4dab-bb7c-19da4d8e48b7:1:vcoy8 (etcd_worker.py - 108)
2018-02-15 06:55:20,804 [1;34mDEBUG[0m heat_worker - ese_logical_port:ced1435d-6dfa-4dab-bb7c-19da4d8e48b7 - Checking job status for ese_logical_port:ced1435d-6dfa-4dab-bb7c-19da4d8e48b7 (heat_stacks_worker.py - 44)
2018-02-15 06:55:21,010 [1;37mINFO[0m heat_worker - ese_logical_port:ced1435d-6dfa-4dab-bb7c-19da4d8e48b7 - CREATE STARTED (heat_messenger.py - 92)
2018-02-15 06:55:21,070 [1;37mINFO[0m heat_worker - ese_logical_port:ced1435d-6dfa-4dab-bb7c-19da4d8e48b7 - Template id ese_logical_port resolved from mapping: Cese_logical_port (resources.py - 835)
2018-02-15 06:55:21,076 [1;34mDEBUG[0m heat_worker - ese_logical_port:ced1435d-6dfa-4dab-bb7c-19da4d8e48b7 - Heat template prepared: 
heat_template_version: 2013-05-23

description: >
  Logical port template

parameters:
  physical_port_id:
    type: string
    label: Physical Interface ID
    description: A unique id for the Physical Interface.
  logical_port_name:
    type: string
    label: Logical Port Name
    description: Name of the logical port.
  logical_port_type:
    type: string
    label: Logical Port Type
    description: Type of the logical port.
  logical_port_vlan_id:
    type: number
    label: VLAN id for Logical Port
    description: VLAN id to use for logical port creation.
    default: 0
  virtual_machine_interface_ids:
    type: comma_delimited_list
    label: Virtual Machine Interface ID
    description: Virtual Machine Interface ID.
  gohan_id:
    type: string
    label: Gohan resource ID
    description: UUID of the ESE Physical Port
  device_ip:
    type: string
    label: Device IP Address
    description: Device IP Address.
  tenant_id:
    type: string
    label: Tenant ID
  version:
    type: number
    label: Config version

resources:
  logical_interface:
    type: OS::Contrail::LogicalInterface
    properties:
      name: { get_param: logical_port_name }
      physical_interface: { get_param: physical_port_id }
      virtual_machine_interfaces: { get_param: virtual_machine_interface_ids }
      type: { get_param: logical_port_type }
      vlan: { get_param: logical_port_vlan_id }

  interface_monitor:
    type: ESI::Monitoring::MonitoringTarget
    properties:
      type: snmp_ports
      resource_type: ese_logical_ports
      resource_id: { get_param: gohan_id }
      tenant_id: { get_param: tenant_id }
      version: { get_param: version }
      field_name: logical_port
      properties:
        device_ip: { get_param: device_ip }
        if_name: { get_param: logical_port_name }
        community_name: ESE_NODE_COMMUNITY
      syncer_properties:
        etcd:
          status:
            key: logical_port
        tsdb:
          traffic.in:
            metric: traffic.bytes
            tags:
              
              -  resource_id: { get_param: gohan_id }
                 port_id: fde61b02-9615-4e75-aac0-30a333657c1b
                 direction: in
              
          traffic.out:
            metric: traffic.bytes
            tags:
              
              -  resource_id: { get_param: gohan_id }
                 port_id: fde61b02-9615-4e75-aac0-30a333657c1b
                 direction: out
              
    depends_on: logical_interface

outputs:
  id:
    description: A unique id for the logical interface
    value: { get_resource: logical_interface }
  name:
    description: The name of the logical interface.
    value: { get_attr: [logical_interface, name] }
  monitoring_target_id:
    description: Monitoring Target ID
    value: { get_resource: interface_monitor }
  monitoring_link:
    description: Monitoring Process Link
    value: { get_attr: [interface_monitor, link] }
 with parameters:
{"logical_port_type": "L2", "logical_port_vlan_id": 1003, "tenant_id": "ae69b52f46ba480bb9636f62736436f4", "device_ip": "10.161.0.33", "version": 1, "virtual_machine_interface_ids": ["f68d0924-ef20-4c1b-ac45-0e6b879af5e7"], "logical_port_name": "xe-0/0/1.1003", "gohan_id": "ced1435d-6dfa-4dab-bb7c-19da4d8e48b7", "physical_port_id": "5a79909b-2bf3-4e26-8a9c-0bf6bb175457"}, 
 and heat timeout = 6, rollback = False, 
using this jinja parameters: 
{u'jinja_port_ids': [u'fde61b02-9615-4e75-aac0-30a333657c1b']} (heat.py - 145)
2018-02-15 06:55:21,077 [1;37mINFO[0m heat_worker - ese_logical_port:ced1435d-6dfa-4dab-bb7c-19da4d8e48b7 - Creating a stack ese_logical_port_ced1435d-6dfa-4dab-bb7c-19da4d8e48b7 with parameters: {u'logical_port_type': u'L2', u'logical_port_vlan_id': 1003, u'tenant_id': u'ae69b52f46ba480bb9636f62736436f4', u'device_ip': u'10.161.0.33', u'version': 1, u'virtual_machine_interface_ids': [u'f68d0924-ef20-4c1b-ac45-0e6b879af5e7'], u'logical_port_name': u'xe-0/0/1.1003', u'gohan_id': u'ced1435d-6dfa-4dab-bb7c-19da4d8e48b7', u'physical_port_id': u'5a79909b-2bf3-4e26-8a9c-0bf6bb175457'}, timeout_mins: 6, and template: 
heat_template_version: 2013-05-23

description: >
  Logical port template

parameters:
  physical_port_id:
    type: string
    label: Physical Interface ID
    description: A unique id for the Physical Interface.
  logical_port_name:
    type: string
    label: Logical Port Name
    description: Name of the logical port.
  logical_port_type:
    type: string
    label: Logical Port Type
    description: Type of the logical port.
  logical_port_vlan_id:
    type: number
    label: VLAN id for Logical Port
    description: VLAN id to use for logical port creation.
    default: 0
  virtual_machine_interface_ids:
    type: comma_delimited_list
    label: Virtual Machine Interface ID
    description: Virtual Machine Interface ID.
  gohan_id:
    type: string
    label: Gohan resource ID
    description: UUID of the ESE Physical Port
  device_ip:
    type: string
    label: Device IP Address
    description: Device IP Address.
  tenant_id:
    type: string
    label: Tenant ID
  version:
    type: number
    label: Config version

resources:
  logical_interface:
    type: OS::Contrail::LogicalInterface
    properties:
      name: { get_param: logical_port_name }
      physical_interface: { get_param: physical_port_id }
      virtual_machine_interfaces: { get_param: virtual_machine_interface_ids }
      type: { get_param: logical_port_type }
      vlan: { get_param: logical_port_vlan_id }

  interface_monitor:
    type: ESI::Monitoring::MonitoringTarget
    properties:
      type: snmp_ports
      resource_type: ese_logical_ports
      resource_id: { get_param: gohan_id }
      tenant_id: { get_param: tenant_id }
      version: { get_param: version }
      field_name: logical_port
      properties:
        device_ip: { get_param: device_ip }
        if_name: { get_param: logical_port_name }
        community_name: ESE_NODE_COMMUNITY
      syncer_properties:
        etcd:
          status:
            key: logical_port
        tsdb:
          traffic.in:
            metric: traffic.bytes
            tags:
              
              -  resource_id: { get_param: gohan_id }
                 port_id: fde61b02-9615-4e75-aac0-30a333657c1b
                 direction: in
              
          traffic.out:
            metric: traffic.bytes
            tags:
              
              -  resource_id: { get_param: gohan_id }
                 port_id: fde61b02-9615-4e75-aac0-30a333657c1b
                 direction: out
              
    depends_on: logical_interface

outputs:
  id:
    description: A unique id for the logical interface
    value: { get_resource: logical_interface }
  name:
    description: The name of the logical interface.
    value: { get_attr: [logical_interface, name] }
  monitoring_target_id:
    description: Monitoring Target ID
    value: { get_resource: interface_monitor }
  monitoring_link:
    description: Monitoring Process Link
    value: { get_attr: [interface_monitor, link] } (heat.py - 162)
2018-02-15 06:55:21,378 [1;37mINFO[0m heat_worker - ese_logical_port:ced1435d-6dfa-4dab-bb7c-19da4d8e48b7 - Stack "ese_logical_port_ced1435d-6dfa-4dab-bb7c-19da4d8e48b7" in status "CREATE_IN_PROGRESS" (heat.py - 221)
2018-02-15 06:55:22,502 [1;37mINFO[0m heat_worker - ese_logical_port:ced1435d-6dfa-4dab-bb7c-19da4d8e48b7 - Stack "ese_logical_port_ced1435d-6dfa-4dab-bb7c-19da4d8e48b7" in status "CREATE_IN_PROGRESS" (heat.py - 221)
2018-02-15 06:55:23,689 [1;37mINFO[0m heat_worker - ese_logical_port:ced1435d-6dfa-4dab-bb7c-19da4d8e48b7 - Stack "ese_logical_port_ced1435d-6dfa-4dab-bb7c-19da4d8e48b7" in status "CREATE_COMPLETE" (heat.py - 221)
2018-02-15 06:55:23,690 [1;37mINFO[0m heat_worker - ese_logical_port:ced1435d-6dfa-4dab-bb7c-19da4d8e48b7 - CREATED ese_logical_port_ced1435d-6dfa-4dab-bb7c-19da4d8e48b7 (heat.py - 280)
2018-02-15 06:55:23,995 [1;37mINFO[0m heat_worker - ese_logical_port:ced1435d-6dfa-4dab-bb7c-19da4d8e48b7 - Job create finished with results {'heat_outputs': [{u'output_value': u'9dcbbbbc-e9ea-4276-ba65-68ce8737e568', u'description': u'Monitoring Target ID', u'output_key': u'monitoring_target_id'}, {u'output_value': u'46b0cd68-d0fb-4d72-9def-830164f9e215', u'description': u'A unique id for the logical interface', u'output_key': u'id'}, {u'output_value': u'http://collector-agents-se:7070/targets/9dcbbbbc-e9ea-4276-ba65-68ce8737e568', u'description': u'Monitoring Process Link', u'output_key': u'monitoring_link'}, {u'output_value': u'xe-0/0/38.0', u'description': u'The name of the logical interface.', u'output_key': u'name'}], 'orchestration_state': u'CREATE_COMPLETE', 'error': None} (heat_stacks_worker.py - 103)
2018-02-15 06:55:24,007 [1;37mINFO[0m heat_worker - ese_logical_port:ced1435d-6dfa-4dab-bb7c-19da4d8e48b7 - Job create:heat_worker:ese_logical_port:ced1435d-6dfa-4dab-bb7c-19da4d8e48b7:1:vcoy8 finished. (job_queue.py - 266)
2018-02-15 06:55:24,008 [1;37mINFO[0m heat_worker - ese_logical_port:ced1435d-6dfa-4dab-bb7c-19da4d8e48b7 - Trying to delete internal process state for resource ese_logical_port:ced1435d-6dfa-4dab-bb7c-19da4d8e48b7 (resources.py - 701)
2018-02-15 06:55:24,098 [1;37mINFO[0m heat_worker - Reserved job: modify:heat_worker:port:fde61b02-9615-4e75-aac0-30a333657c1b:2:frkcu using id: 0d10244b-7cd8-4779-83e1-7fddba31aed3 (job_queue.py - 245)
2018-02-15 06:55:24,100 [1;34mDEBUG[0m heat_worker - Waiting for a job. (etcd_worker.py - 218)
2018-02-15 06:55:24,101 [1;34mDEBUG[0m heat_worker - 7 job slots available (etcd_worker.py - 213)
2018-02-15 06:55:24,105 [1;34mDEBUG[0m heat_worker - port:fde61b02-9615-4e75-aac0-30a333657c1b - Starting work on new ready job modify:heat_worker:port:fde61b02-9615-4e75-aac0-30a333657c1b:2:frkcu (etcd_worker.py - 108)
2018-02-15 06:55:24,107 [1;34mDEBUG[0m heat_worker - port:fde61b02-9615-4e75-aac0-30a333657c1b - Checking job status for port:fde61b02-9615-4e75-aac0-30a333657c1b (heat_stacks_worker.py - 44)
2018-02-15 06:55:24,470 [1;37mINFO[0m heat_worker - port:fde61b02-9615-4e75-aac0-30a333657c1b - Found stack with status CREATE_COMPLETE for port:fde61b02-9615-4e75-aac0-30a333657c1b (heat_stacks_worker.py - 55)
2018-02-15 06:55:24,471 [1;37mINFO[0m heat_worker - port:fde61b02-9615-4e75-aac0-30a333657c1b - MODIFY STARTED (heat_messenger.py - 123)
2018-02-15 06:55:25,040 [1;37mINFO[0m heat_worker - port:fde61b02-9615-4e75-aac0-30a333657c1b - Template id port resolved from mapping: {u'else_mapping': {u'constant': u'port'}, u'if_mapping': {u'regexp': [{u'field': u'device_owner'}, {u'constant': u'network:dhcp|network:empty'}]}, u'then_mapping': {u'constant': None}} (resources.py - 835)
2018-02-15 06:55:25,046 [1;34mDEBUG[0m heat_worker - port:fde61b02-9615-4e75-aac0-30a333657c1b - Heat template prepared: 
heat_template_version: 2013-05-23

description: >
  Virtual Machine Interface Template

parameters:
  uuid:
    type: string
    label: Backend Virtual Machine Interface UUID
    description: A unique id for the Virtual Machine Interface.
  name:
    type: string
    label: Physical Interface ID
    description: A unique id for the Physical Interface.
  security_groups:
    type: json
    default: []
    label: Security Groups List
    description: The IDs of security groups applied to the port.
  virtual_machine_interface_allowed_address_pairs:
    type: json
    label: Virtual machine interface allowed address pairs.
  virtual_machine_interface_mac_address:
    type: string
    default: "fe:ff:ff:ff:ff:ff"
    label: Virtual machine interface mac address.
  virtual_network:
    type: string
    label: Virtual Network.
  virtual_machine:
    type: string
    label: Virtual Machine.
    default: ""
  device_owner:
    type: string
    label: Device Owner
    default: ""
  admin_state_up:
    type: boolean
    label: Admin state up
    default: true
  tenant_id:
    type: string
    label: Tenant ID
  version:
    type: number
    label: Config version

resources:
  virtual_machine_interface:
    type: OS::Contrail::VirtualMachineInterface
    properties:
      uuid: { get_param: uuid }
      name: { get_param: name }
      virtual_machine_interface_allowed_address_pairs: { get_param: virtual_machine_interface_allowed_address_pairs }
      virtual_machine_interface_mac_addresses: [ { get_param: virtual_machine_interface_mac_address } ]
      virtual_networks: [ { get_param: virtual_network } ]
      virtual_machine: { get_param: virtual_machine }
      device_owner: { get_param: device_owner }
      admin_state_up: { get_param: admin_state_up }
      security_groups: { get_param: security_groups }



  instance_ip_0:
    type: OS::Contrail::InstanceIp
    properties:
      name:
        str_replace:
          template: '%name%_%zone%_%ip%'
          params:
            "%name%": { get_param: name }
            "%zone%": 3cfa93ac-251a-4a60-9434-ff4c88bf3655
            "%ip%": 192.168.200.101
      ip_address: 192.168.200.101
      subnet_id: 15711909-5d0a-46c8-83f5-c739380ebbb9
      network_id: { get_param: virtual_network }
      virtual_machine_interfaces: [ { get_resource: virtual_machine_interface } ]



  vmi_monitor:
    type: ESI::Monitoring::MonitoringTarget
    properties:
      type: virtual_machine_interface
      resource_type: ports
      resource_id: { get_param: uuid }
      field_name: vmi
      tenant_id: { get_param: tenant_id }
      version: { get_param: version }
      properties:
        fq_name: { get_attr: [virtual_machine_interface, fq_name] }
      syncer_properties:
        etcd:
          status:
            key: vmi
        tsdb:
          traffic.in:
            metric: traffic.contrail_bytes
            tags:
              resource_id: { get_param: uuid }
              direction: in
          traffic.out:
            metric: traffic.contrail_bytes
            tags:
              resource_id: { get_param: uuid }
              direction: out
    depends_on: virtual_machine_interface


outputs:
  id:
    description: A unique id for the virtual machine interface.
    value: { get_resource: virtual_machine_interface }
  mac_address:
    description: Virtual machine interface mac address.
    value: { get_attr: [virtual_machine_interface, virtual_machine_interface_mac_addresses] }
  allowed_address_pairs:
    description: Virtual machine allowed address pairs.
    value: { get_attr: [virtual_machine_interface, virtual_machine_interface_allowed_address_pairs] }
  virtual_network:
    description: Virtual network.
    value: { get_attr: [virtual_machine_interface, virtual_networks] }
  fq_name:
    description: Fully Qualified Name of the VMI
    value: { get_attr: [virtual_machine_interface, fq_name] }

  monitoring_target_id:
    description: Monitoring Target ID
    value: { get_resource: vmi_monitor }
  monitoring_link:
    description: Monitoring Process Link
    value: { get_attr: [vmi_monitor, link] }

 with parameters:
{"virtual_machine": "7ff183de-0188-46bf-b7d0-68d08ad2b54f", "name": "fde61b02-9615-4e75-aac0-30a333657c1b", "admin_state_up": true, "tenant_id": "ae69b52f46ba480bb9636f62736436f4", "device_owner": "physical_port", "virtual_machine_interface_allowed_address_pairs": [], "virtual_machine_interface_mac_address": "fa:16:3e:67:26:46", "version": 2, "virtual_network": "35bc496f-3c0e-46b4-a5c0-33810e8e7263", "security_groups": [], "uuid": "fde61b02-9615-4e75-aac0-30a333657c1b"}, 
 and heat timeout = 13, rollback = False, 
using this jinja parameters: 
{u'jinja_attached': True, u'jinja_force_dependency_gw_interface': None, u'jinja_fixed_ips': [{u'subnet_id': u'3cfa93ac-251a-4a60-9434-ff4c88bf3655', u'ip_address': u'192.168.200.101'}], u'jinja_force_dependency_cfg': None, u'jinja_device_owner': u'physical_port', u'jinja_subnets': [u'15711909-5d0a-46c8-83f5-c739380ebbb9']} (heat.py - 145)
2018-02-15 06:55:25,048 [1;37mINFO[0m heat_worker - port:fde61b02-9615-4e75-aac0-30a333657c1b - Updating a stack port_fde61b02-9615-4e75-aac0-30a333657c1b with parameters: {u'virtual_machine': u'7ff183de-0188-46bf-b7d0-68d08ad2b54f', u'name': u'fde61b02-9615-4e75-aac0-30a333657c1b', u'admin_state_up': True, u'tenant_id': u'ae69b52f46ba480bb9636f62736436f4', u'device_owner': u'physical_port', u'virtual_machine_interface_allowed_address_pairs': [], u'virtual_machine_interface_mac_address': u'fa:16:3e:67:26:46', u'version': 2, u'virtual_network': u'35bc496f-3c0e-46b4-a5c0-33810e8e7263', u'security_groups': [], u'uuid': u'fde61b02-9615-4e75-aac0-30a333657c1b'}, timeout_mins: 13, and template: 
heat_template_version: 2013-05-23

description: >
  Virtual Machine Interface Template

parameters:
  uuid:
    type: string
    label: Backend Virtual Machine Interface UUID
    description: A unique id for the Virtual Machine Interface.
  name:
    type: string
    label: Physical Interface ID
    description: A unique id for the Physical Interface.
  security_groups:
    type: json
    default: []
    label: Security Groups List
    description: The IDs of security groups applied to the port.
  virtual_machine_interface_allowed_address_pairs:
    type: json
    label: Virtual machine interface allowed address pairs.
  virtual_machine_interface_mac_address:
    type: string
    default: "fe:ff:ff:ff:ff:ff"
    label: Virtual machine interface mac address.
  virtual_network:
    type: string
    label: Virtual Network.
  virtual_machine:
    type: string
    label: Virtual Machine.
    default: ""
  device_owner:
    type: string
    label: Device Owner
    default: ""
  admin_state_up:
    type: boolean
    label: Admin state up
    default: true
  tenant_id:
    type: string
    label: Tenant ID
  version:
    type: number
    label: Config version

resources:
  virtual_machine_interface:
    type: OS::Contrail::VirtualMachineInterface
    properties:
      uuid: { get_param: uuid }
      name: { get_param: name }
      virtual_machine_interface_allowed_address_pairs: { get_param: virtual_machine_interface_allowed_address_pairs }
      virtual_machine_interface_mac_addresses: [ { get_param: virtual_machine_interface_mac_address } ]
      virtual_networks: [ { get_param: virtual_network } ]
      virtual_machine: { get_param: virtual_machine }
      device_owner: { get_param: device_owner }
      admin_state_up: { get_param: admin_state_up }
      security_groups: { get_param: security_groups }



  instance_ip_0:
    type: OS::Contrail::InstanceIp
    properties:
      name:
        str_replace:
          template: '%name%_%zone%_%ip%'
          params:
            "%name%": { get_param: name }
            "%zone%": 3cfa93ac-251a-4a60-9434-ff4c88bf3655
            "%ip%": 192.168.200.101
      ip_address: 192.168.200.101
      subnet_id: 15711909-5d0a-46c8-83f5-c739380ebbb9
      network_id: { get_param: virtual_network }
      virtual_machine_interfaces: [ { get_resource: virtual_machine_interface } ]



  vmi_monitor:
    type: ESI::Monitoring::MonitoringTarget
    properties:
      type: virtual_machine_interface
      resource_type: ports
      resource_id: { get_param: uuid }
      field_name: vmi
      tenant_id: { get_param: tenant_id }
      version: { get_param: version }
      properties:
        fq_name: { get_attr: [virtual_machine_interface, fq_name] }
      syncer_properties:
        etcd:
          status:
            key: vmi
        tsdb:
          traffic.in:
            metric: traffic.contrail_bytes
            tags:
              resource_id: { get_param: uuid }
              direction: in
          traffic.out:
            metric: traffic.contrail_bytes
            tags:
              resource_id: { get_param: uuid }
              direction: out
    depends_on: virtual_machine_interface


outputs:
  id:
    description: A unique id for the virtual machine interface.
    value: { get_resource: virtual_machine_interface }
  mac_address:
    description: Virtual machine interface mac address.
    value: { get_attr: [virtual_machine_interface, virtual_machine_interface_mac_addresses] }
  allowed_address_pairs:
    description: Virtual machine allowed address pairs.
    value: { get_attr: [virtual_machine_interface, virtual_machine_interface_allowed_address_pairs] }
  virtual_network:
    description: Virtual network.
    value: { get_attr: [virtual_machine_interface, virtual_networks] }
  fq_name:
    description: Fully Qualified Name of the VMI
    value: { get_attr: [virtual_machine_interface, fq_name] }

  monitoring_target_id:
    description: Monitoring Target ID
    value: { get_resource: vmi_monitor }
  monitoring_link:
    description: Monitoring Process Link
    value: { get_attr: [vmi_monitor, link] }
 (heat.py - 186)
2018-02-15 06:55:25,275 [1;37mINFO[0m heat_worker - port:fde61b02-9615-4e75-aac0-30a333657c1b - Stack "port_fde61b02-9615-4e75-aac0-30a333657c1b" in status "UPDATE_IN_PROGRESS" (heat.py - 221)
2018-02-15 06:55:26,361 [1;37mINFO[0m heat_worker - port:fde61b02-9615-4e75-aac0-30a333657c1b - Stack "port_fde61b02-9615-4e75-aac0-30a333657c1b" in status "UPDATE_IN_PROGRESS" (heat.py - 221)
2018-02-15 06:55:27,459 [1;37mINFO[0m heat_worker - port:fde61b02-9615-4e75-aac0-30a333657c1b - Stack "port_fde61b02-9615-4e75-aac0-30a333657c1b" in status "UPDATE_IN_PROGRESS" (heat.py - 221)
2018-02-15 06:55:28,546 [1;37mINFO[0m heat_worker - port:fde61b02-9615-4e75-aac0-30a333657c1b - Stack "port_fde61b02-9615-4e75-aac0-30a333657c1b" in status "UPDATE_IN_PROGRESS" (heat.py - 221)
2018-02-15 06:55:29,639 [1;37mINFO[0m heat_worker - port:fde61b02-9615-4e75-aac0-30a333657c1b - Stack "port_fde61b02-9615-4e75-aac0-30a333657c1b" in status "UPDATE_IN_PROGRESS" (heat.py - 221)
2018-02-15 06:55:30,735 [1;37mINFO[0m heat_worker - port:fde61b02-9615-4e75-aac0-30a333657c1b - Stack "port_fde61b02-9615-4e75-aac0-30a333657c1b" in status "UPDATE_IN_PROGRESS" (heat.py - 221)
2018-02-15 06:55:31,857 [1;37mINFO[0m heat_worker - port:fde61b02-9615-4e75-aac0-30a333657c1b - Stack "port_fde61b02-9615-4e75-aac0-30a333657c1b" in status "UPDATE_IN_PROGRESS" (heat.py - 221)
2018-02-15 06:55:32,951 [1;37mINFO[0m heat_worker - port:fde61b02-9615-4e75-aac0-30a333657c1b - Stack "port_fde61b02-9615-4e75-aac0-30a333657c1b" in status "UPDATE_IN_PROGRESS" (heat.py - 221)
2018-02-15 06:55:34,151 [1;37mINFO[0m heat_worker - port:fde61b02-9615-4e75-aac0-30a333657c1b - Stack "port_fde61b02-9615-4e75-aac0-30a333657c1b" in status "UPDATE_COMPLETE" (heat.py - 221)
2018-02-15 06:55:34,152 [1;37mINFO[0m heat_worker - port:fde61b02-9615-4e75-aac0-30a333657c1b - MODIFIED port_fde61b02-9615-4e75-aac0-30a333657c1b (heat.py - 329)
2018-02-15 06:55:34,466 [1;37mINFO[0m heat_worker - port:fde61b02-9615-4e75-aac0-30a333657c1b - Job modify finished with results {'heat_outputs': [{u'output_value': u'default-domain:admin:f68d0924-ef20-4c1b-ac45-0e6b879af5e7', u'description': u'Fully Qualified Name of the VMI', u'output_key': u'fq_name'}, {u'output_value': {u'allowed_address_pair': []}, u'description': u'Virtual machine allowed address pairs.', u'output_key': u'allowed_address_pairs'}, {u'output_value': u'31ac332f-d172-4a39-8fa5-976ada238eff', u'description': u'Monitoring Target ID', u'output_key': u'monitoring_target_id'}, {u'output_value': [u'fa:16:3e:f7:60:7f'], u'description': u'Virtual machine interface mac address.', u'output_key': u'mac_address'}, {u'output_value': [[u'default-domain', u'admin', u'b62eefe0-0872-478d-adfe-1a606320f0e7']], u'description': u'Virtual network.', u'output_key': u'virtual_network'}, {u'output_value': u'f68d0924-ef20-4c1b-ac45-0e6b879af5e7', u'description': u'A unique id for the virtual machine interface.', u'output_key': u'id'}, {u'output_value': u'http://collector-agents-se:7070/targets/31ac332f-d172-4a39-8fa5-976ada238eff', u'description': u'Monitoring Process Link', u'output_key': u'monitoring_link'}], 'orchestration_state': u'UPDATE_COMPLETE', 'error': None} (heat_stacks_worker.py - 103)
2018-02-15 06:55:34,480 [1;37mINFO[0m heat_worker - port:fde61b02-9615-4e75-aac0-30a333657c1b - Job modify:heat_worker:port:fde61b02-9615-4e75-aac0-30a333657c1b:2:frkcu finished. (job_queue.py - 266)
2018-02-15 06:55:34,481 [1;37mINFO[0m heat_worker - port:fde61b02-9615-4e75-aac0-30a333657c1b - Trying to delete internal process state for resource port:fde61b02-9615-4e75-aac0-30a333657c1b (resources.py - 701)
2018-02-15 06:55:54,106 [1;34mDEBUG[0m heat_worker - GetJob timeout. (etcd_worker.py - 227)
2018-02-15 06:55:54,110 [1;34mDEBUG[0m heat_worker - Waiting for a job. (etcd_worker.py - 218)
2018-02-15 06:55:54,112 [1;34mDEBUG[0m heat_worker - 8 job slots available (etcd_worker.py - 213)
2018-02-15 06:56:24,123 [1;34mDEBUG[0m heat_worker - GetJob timeout. (etcd_worker.py - 227)
2018-02-15 06:56:24,125 [1;34mDEBUG[0m heat_worker - Waiting for a job. (etcd_worker.py - 218)
2018-02-15 06:56:24,127 [1;34mDEBUG[0m heat_worker - 8 job slots available (etcd_worker.py - 213)
2018-02-15 06:56:54,139 [1;34mDEBUG[0m heat_worker - GetJob timeout. (etcd_worker.py - 227)
2018-02-15 06:56:54,143 [1;34mDEBUG[0m heat_worker - Waiting for a job. (etcd_worker.py - 218)
2018-02-15 06:56:54,144 [1;34mDEBUG[0m heat_worker - 8 job slots available (etcd_worker.py - 213)
2018-02-15 06:57:24,155 [1;34mDEBUG[0m heat_worker - GetJob timeout. (etcd_worker.py - 227)
2018-02-15 06:57:24,156 [1;34mDEBUG[0m heat_worker - Waiting for a job. (etcd_worker.py - 218)
2018-02-15 06:57:24,158 [1;34mDEBUG[0m heat_worker - 8 job slots available (etcd_worker.py - 213)
2018-02-15 06:57:54,170 [1;34mDEBUG[0m heat_worker - GetJob timeout. (etcd_worker.py - 227)
2018-02-15 06:57:54,173 [1;34mDEBUG[0m heat_worker - Waiting for a job. (etcd_worker.py - 218)
2018-02-15 06:57:54,175 [1;34mDEBUG[0m heat_worker - 8 job slots available (etcd_worker.py - 213)
2018-02-15 06:58:24,183 [1;34mDEBUG[0m heat_worker - GetJob timeout. (etcd_worker.py - 227)
2018-02-15 06:58:24,185 [1;34mDEBUG[0m heat_worker - Waiting for a job. (etcd_worker.py - 218)
2018-02-15 06:58:24,187 [1;34mDEBUG[0m heat_worker - 8 job slots available (etcd_worker.py - 213)
2018-02-15 06:58:54,198 [1;34mDEBUG[0m heat_worker - GetJob timeout. (etcd_worker.py - 227)
2018-02-15 06:58:54,200 [1;34mDEBUG[0m heat_worker - Waiting for a job. (etcd_worker.py - 218)
2018-02-15 06:58:54,201 [1;34mDEBUG[0m heat_worker - 8 job slots available (etcd_worker.py - 213)
2018-02-15 06:59:24,214 [1;34mDEBUG[0m heat_worker - GetJob timeout. (etcd_worker.py - 227)
2018-02-15 06:59:24,216 [1;34mDEBUG[0m heat_worker - Waiting for a job. (etcd_worker.py - 218)
2018-02-15 06:59:24,218 [1;34mDEBUG[0m heat_worker - 8 job slots available (etcd_worker.py - 213)
