root@client:/tools/rest-api-for-esi# python gohan-api-vpn-gateways.py 
### Create Ese Device ###
name:[QFX-NW02], id:[4d8371c0-1b91-4818-a6e7-26425178e5d4]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
23:59:27.170110  23:59:27.344233  0.174123        POST     201    PENDING_CREATE
23:59:27.344677  23:59:27.465062  0.120385         GET     200    PENDING_CREATE
23:59:28.466284  23:59:28.566808  0.100524         GET     200    PENDING_CREATE
23:59:29.568042  23:59:29.647949  0.079907         GET     200    PENDING_CREATE
23:59:30.648527  23:59:30.729587  0.081060         GET     200    PENDING_CREATE
23:59:31.730847  23:59:31.842580  0.111733         GET     200    PENDING_CREATE
23:59:32.843102  23:59:32.928493  0.085391         GET     200    PENDING_CREATE
23:59:33.929223  23:59:34.005402  0.076179         GET     200    PENDING_CREATE
23:59:35.006728  23:59:35.091299  0.084571         GET     200    PENDING_CREATE
23:59:36.092564  23:59:36.175614  0.083050         GET     200    PENDING_CREATE
23:59:37.176524  23:59:37.257017  0.080493         GET     200    PENDING_CREATE
23:59:38.258363  23:59:38.359752  0.101389         GET     200    PENDING_CREATE
23:59:39.361624  23:59:39.449744  0.088120         GET     200    PENDING_CREATE
23:59:40.451070  23:59:40.530407  0.079337         GET     200    PENDING_CREATE
23:59:41.531778  23:59:41.615099  0.083321         GET     200    PENDING_CREATE
23:59:42.616853  23:59:42.708320  0.091467         GET     200    PENDING_CREATE
23:59:43.709691  23:59:43.790351  0.080660         GET     200    PENDING_CREATE
23:59:44.791004  23:59:44.979142  0.188138         GET     200    PENDING_CREATE
23:59:45.980511  23:59:46.051525  0.071014         GET     200    PENDING_CREATE
23:59:47.052555  23:59:47.124783  0.072228         GET     200    PENDING_CREATE
23:59:48.126133  23:59:48.203867  0.077734         GET     200    PENDING_CREATE
23:59:49.205218  23:59:49.278093  0.072875         GET     200    PENDING_CREATE
23:59:50.278773  23:59:50.350884  0.072111         GET     200    PENDING_CREATE
23:59:51.352471  23:59:51.424723  0.072252         GET     200    PENDING_CREATE
23:59:52.425766  23:59:52.493652  0.067886         GET     200    PENDING_CREATE
23:59:53.494979  23:59:53.564802  0.069823         GET     200    PENDING_CREATE
23:59:54.566056  23:59:54.642966  0.076910         GET     200    PENDING_CREATE
23:59:55.643359  23:59:55.711924  0.068565         GET     200    PENDING_CREATE
23:59:56.713207  23:59:56.784745  0.071538         GET     200    PENDING_CREATE
23:59:57.785995  23:59:57.855400  0.069405         GET     200    PENDING_CREATE
23:59:58.856674  23:59:58.924688  0.068014         GET     200    PENDING_CREATE
23:59:59.925386  23:59:59.999271  0.073885         GET     200    PENDING_CREATE
00:00:00.999996  00:00:01.074721  0.074725         GET     200    PENDING_CREATE
00:00:02.075718  00:00:02.142042  0.066324         GET     200    PENDING_CREATE
00:00:03.143288  00:00:03.210460  0.067172         GET     200    PENDING_CREATE
00:00:04.211714  00:00:04.278829  0.067115         GET     200    PENDING_CREATE
00:00:05.279897  00:00:05.347384  0.067487         GET     200    PENDING_CREATE
00:00:06.348760  00:00:06.420087  0.071327         GET     200    PENDING_CREATE
00:00:07.420538  00:00:07.488239  0.067701         GET     200    PENDING_CREATE
00:00:08.489616  00:00:08.563429  0.073813         GET     200    PENDING_CREATE
00:00:09.564817  00:00:09.632828  0.068011         GET     200    PENDING_CREATE
00:00:10.634137  00:00:10.712670  0.078533         GET     200    PENDING_CREATE
00:00:11.714129  00:00:11.792812  0.078683         GET     200    PENDING_CREATE
00:00:12.794144  00:00:12.870608  0.076464         GET     200    PENDING_CREATE
00:00:13.871988  00:00:13.946316  0.074328         GET     200    PENDING_CREATE
00:00:14.947762  00:00:15.028615  0.080853         GET     200    PENDING_CREATE
00:00:16.030065  00:00:16.100314  0.070249         GET     200    PENDING_CREATE
00:00:17.101591  00:00:17.170742  0.069151         GET     200    PENDING_CREATE
00:00:18.171984  00:00:18.242001  0.070017         GET     200    PENDING_CREATE
00:00:19.243154  00:00:19.311571  0.068417         GET     200    PENDING_CREATE
00:00:20.312421  00:00:20.397229  0.084808         GET     200    PENDING_CREATE
00:00:21.398564  00:00:21.516694  0.118130         GET     200    PENDING_CREATE
00:00:22.518014  00:00:22.604787  0.086773         GET     200    PENDING_CREATE
00:00:23.606033  00:00:23.700778  0.094745         GET     200    PENDING_CREATE
00:00:24.701563  00:00:24.789889  0.088326         GET     200    PENDING_CREATE
00:00:25.791307  00:00:25.920975  0.129668         GET     200    PENDING_CREATE
00:00:26.922329  00:00:26.992793  0.070464         GET     200    PENDING_CREATE
00:00:27.993748  00:00:28.065533  0.071785         GET     200    PENDING_CREATE
00:00:29.066778  00:00:29.133880  0.067102         GET     200    PENDING_CREATE
00:00:30.135127  00:00:30.202835  0.067708         GET     200    PENDING_CREATE
00:00:31.204073  00:00:31.271445  0.067372         GET     200    PENDING_CREATE
00:00:32.272529  00:00:32.343522  0.070993         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 65.173412

[localhost] local: gohan client ese_device show --output-format json 4d8371c0-1b91-4818-a6e7-26425178e5d4
{
    "ese_device": {
        "description": "",
        "existing": "existing",
        "flavor": null,
        "hostname": "QFX-NW02",
        "id": "4d8371c0-1b91-4818-a6e7-26425178e5d4",
        "location": null,
        "management_ip_address": "10.161.0.34",
        "name": "QFX-NW02",
        "operational_state": "UP",
        "orchestration_state": "CREATE_COMPLETE",
        "password": "password",
        "public_ip_address": "10.161.0.34",
        "status": "ACTIVE",
        "tags": {},
        "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef",
        "tor_agent_names": null,
        "tsn_names": null,
        "type": "tor",
        "username": "esi"
    }
}

##########################################
### checking heat-stack (ese_devices) ####
##########################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/ese_devices/4d8371c0-1b91-4818-a6e7-26425178e5d4
[localhost] local: heat stack-show ese_device_4d8371c0-1b91-4818-a6e7-26425178e5d4
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                    |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                       |
| creation_time         | 2018-04-15T23:59:28Z                                                                                                                                                                     |
| description           | ESE Device (existing) template                                                                                                                                                           |
| disable_rollback      | True                                                                                                                                                                                     |
| id                    | f7d42791-e73b-4ac4-b2ed-127a9b95dad5                                                                                                                                                     |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/b3e3095c0a5b4383805efe9cf2a6b5ef/stacks/ese_device_4d8371c0-1b91-4818-a6e7-26425178e5d4/f7d42791-e73b-4ac4-b2ed-127a9b95dad5 |
| notification_topics   | []                                                                                                                                                                                       |
| outputs               | [                                                                                                                                                                                        |
|                       |   {                                                                                                                                                                                      |
|                       |     "output_value": "aeaad149-357c-41b9-b408-6304c5d3396c",                                                                                                                              |
|                       |     "description": "Monitoring Target ID",                                                                                                                                               |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                                 |
|                       |   },                                                                                                                                                                                     |
|                       |   {                                                                                                                                                                                      |
|                       |     "output_value": [                                                                                                                                                                    |
|                       |       "default-global-system-config",                                                                                                                                                    |
|                       |       "NWSDP-JNPR-02"                                                                                                                                                                    |
|                       |     ],                                                                                                                                                                                   |
|                       |     "description": "The FQ name of the physical router.",                                                                                                                                |
|                       |     "output_key": "fq_name"                                                                                                                                                              |
|                       |   },                                                                                                                                                                                     |
|                       |   {                                                                                                                                                                                      |
|                       |     "output_value": "7e5c78fa-71c0-427e-947f-586b1fc3c470",                                                                                                                              |
|                       |     "description": "A unique id for the physical router.",                                                                                                                               |
|                       |     "output_key": "id"                                                                                                                                                                   |
|                       |   },                                                                                                                                                                                     |
|                       |   {                                                                                                                                                                                      |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/aeaad149-357c-41b9-b408-6304c5d3396c",                                                     |
|                       |     "description": "Monitoring Process Link",                                                                                                                                            |
|                       |     "output_key": "monitoring_link"                                                                                                                                                      |
|                       |   },                                                                                                                                                                                     |
|                       |   {                                                                                                                                                                                      |
|                       |     "output_value": "NWSDP-JNPR-02",                                                                                                                                                     |
|                       |     "description": "The name of the physical router.",                                                                                                                                   |
|                       |     "output_key": "name"                                                                                                                                                                 |
|                       |   }                                                                                                                                                                                      |
|                       | ]                                                                                                                                                                                        |
| parameters            | {                                                                                                                                                                                        |
|                       |   "device_ip": "10.161.0.34",                                                                                                                                                            |
|                       |   "OS::stack_id": "f7d42791-e73b-4ac4-b2ed-127a9b95dad5",                                                                                                                                |
|                       |   "OS::stack_name": "ese_device_4d8371c0-1b91-4818-a6e7-26425178e5d4",                                                                                                                   |
|                       |   "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef",                                                                                                                                       |
|                       |   "hostname": "QFX-NW02",                                                                                                                                                                |
|                       |   "version": "1",                                                                                                                                                                        |
|                       |   "gohan_id": "4d8371c0-1b91-4818-a6e7-26425178e5d4",                                                                                                                                    |
|                       |   "name": "QFX-NW02"                                                                                                                                                                     |
|                       | }                                                                                                                                                                                        |
| parent                | None                                                                                                                                                                                     |
| stack_name            | ese_device_4d8371c0-1b91-4818-a6e7-26425178e5d4                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                    |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                          |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                      |
| stack_user_project_id | b3e3095c0a5b4383805efe9cf2a6b5ef                                                                                                                                                         |
| template_description  | ESE Device (existing) template                                                                                                                                                           |
| timeout_mins          | 6                                                                                                                                                                                        |
| updated_time          | None                                                                                                                                                                                     |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show ese_device_4d8371c0-1b91-4818-a6e7-26425178e5d4
description: 'ESE Device (existing) template

  '
heat_template_version: '2013-05-23'
outputs:
  fq_name:
    description: The FQ name of the physical router.
    value:
      get_attr: [physical_router, fq_name]
  id:
    description: A unique id for the physical router.
    value: {get_resource: physical_router}
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [device_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: device_monitor}
  name:
    description: The name of the physical router.
    value:
      get_attr: [physical_router, name]
parameters:
  device_ip: {description: Device IP Address., label: Device IP Address, type: string}
  gohan_id: {description: UUID of the ESE Device, label: Gohan resource ID, type: string}
  hostname: {description: Name of host (vrouter) to create router on, label: Hostname,
    type: string}
  name: {description: Name of the physical router that will be created., label: Physical
      Router Name, type: string}
  tenant_id: {label: Tenant ID, type: string}
  version: {label: Config version, type: number}
resources:
  device_monitor:
    depends_on: physical_router
    properties:
      field_name: switch
      properties:
        community_name: ESE_NODE_COMMUNITY
        device_ip: {get_param: device_ip}
      resource_id: {get_param: gohan_id}
      resource_type: ese_devices
      syncer_properties:
        etcd:
          status: {key: switch}
      tenant_id: {get_param: tenant_id}
      type: snmp_device
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget
  physical_router:
    properties:
      fq_name:
      - default-global-system-config
      - {get_param: hostname}
      resource_type: physical_router
    type: OS::Contrail::ExistingResource

### Create Ese Physical Port ###
name:[xe-0/0/3], id:[0078808a-c28e-46e1-887d-8ec65f90c446]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
00:00:35.330893  00:00:35.508861  0.177968        POST     201    PENDING_CREATE
00:00:35.509179  00:00:35.600050  0.090871         GET     200    PENDING_CREATE
00:00:36.601288  00:00:36.669839  0.068551         GET     200    PENDING_CREATE
00:00:37.671619  00:00:37.738228  0.066609         GET     200    PENDING_CREATE
00:00:38.739924  00:00:38.814071  0.074147         GET     200    PENDING_CREATE
00:00:39.815913  00:00:39.883220  0.067307         GET     200    PENDING_CREATE
00:00:40.884528  00:00:40.952632  0.068104         GET     200    PENDING_CREATE
00:00:41.953988  00:00:42.027712  0.073724         GET     200    PENDING_CREATE
00:00:43.028977  00:00:43.098983  0.070006         GET     200    PENDING_CREATE
00:00:44.100260  00:00:44.184051  0.083791         GET     200    PENDING_CREATE
00:00:45.185595  00:00:45.256491  0.070896         GET     200    PENDING_CREATE
00:00:46.257754  00:00:46.325923  0.068169         GET     200    PENDING_CREATE
00:00:47.326838  00:00:47.403420  0.076582         GET     200    PENDING_CREATE
00:00:48.404709  00:00:48.475595  0.070886         GET     200    PENDING_CREATE
00:00:49.476857  00:00:49.543116  0.066259         GET     200    PENDING_CREATE
00:00:50.544381  00:00:50.613911  0.069530         GET     200    PENDING_CREATE
00:00:51.615168  00:00:51.686725  0.071557         GET     200    PENDING_CREATE
00:00:52.687934  00:00:52.757751  0.069817         GET     200    PENDING_CREATE
00:00:53.759006  00:00:53.829669  0.070663         GET     200    PENDING_CREATE
00:00:54.830911  00:00:54.900355  0.069444         GET     200    PENDING_CREATE
00:00:55.901056  00:00:55.970808  0.069752         GET     200    PENDING_CREATE
00:00:56.972058  00:00:57.041414  0.069356         GET     200    PENDING_CREATE
00:00:58.042571  00:00:58.113156  0.070585         GET     200    PENDING_CREATE
00:00:59.113467  00:00:59.188126  0.074659         GET     200    PENDING_CREATE
00:01:00.188495  00:01:00.457655  0.269160         GET     200    PENDING_CREATE
00:01:01.458934  00:01:01.532279  0.073345         GET     200    PENDING_CREATE
00:01:02.532667  00:01:02.600997  0.068330         GET     200    PENDING_CREATE
00:01:03.602235  00:01:03.680320  0.078085         GET     200    PENDING_CREATE
00:01:04.681718  00:01:04.752788  0.071070         GET     200    PENDING_CREATE
00:01:05.754100  00:01:05.834107  0.080007         GET     200    PENDING_CREATE
00:01:06.835448  00:01:06.916070  0.080622         GET     200    PENDING_CREATE
00:01:07.917379  00:01:07.985591  0.068212         GET     200    PENDING_CREATE
00:01:08.986971  00:01:09.054427  0.067456         GET     200    PENDING_CREATE
00:01:10.055683  00:01:10.121549  0.065866         GET     200    PENDING_CREATE
00:01:11.122358  00:01:11.190994  0.068636         GET     200    PENDING_CREATE
00:01:12.192402  00:01:12.259017  0.066615         GET     200    PENDING_CREATE
00:01:13.260265  00:01:13.329016  0.068751         GET     200    PENDING_CREATE
00:01:14.329648  00:01:14.398854  0.069206         GET     200    PENDING_CREATE
00:01:15.400103  00:01:15.476563  0.076460         GET     200    PENDING_CREATE
00:01:16.477828  00:01:16.546384  0.068556         GET     200    PENDING_CREATE
00:01:17.547632  00:01:17.615957  0.068325         GET     200    PENDING_CREATE
00:01:18.617020  00:01:18.685963  0.068943         GET     200    PENDING_CREATE
00:01:19.687200  00:01:19.754716  0.067516         GET     200    PENDING_CREATE
00:01:20.755977  00:01:20.837472  0.081495         GET     200    PENDING_CREATE
00:01:21.838809  00:01:21.918840  0.080031         GET     200    PENDING_CREATE
00:01:22.920334  00:01:23.008205  0.087871         GET     200    PENDING_CREATE
00:01:24.008510  00:01:24.075385  0.066875         GET     200    PENDING_CREATE
00:01:25.076667  00:01:25.150619  0.073952         GET     200    PENDING_CREATE
00:01:26.151121  00:01:26.223684  0.072563         GET     200    PENDING_CREATE
00:01:27.224528  00:01:27.313382  0.088854         GET     200    PENDING_CREATE
00:01:28.314740  00:01:28.398530  0.083790         GET     200    PENDING_CREATE
00:01:29.399879  00:01:29.483666  0.083787         GET     200    PENDING_CREATE
00:01:30.484852  00:01:30.555521  0.070669         GET     200    PENDING_CREATE
00:01:31.556540  00:01:31.624528  0.067988         GET     200    PENDING_CREATE
00:01:32.625795  00:01:32.703307  0.077512         GET     200    PENDING_CREATE
00:01:33.704912  00:01:33.776506  0.071594         GET     200    PENDING_CREATE
00:01:34.777743  00:01:34.847609  0.069866         GET     200    PENDING_CREATE
00:01:35.848859  00:01:35.917517  0.068658         GET     200    PENDING_CREATE
00:01:36.918009  00:01:36.985143  0.067134         GET     200    PENDING_CREATE
00:01:37.986372  00:01:38.117568  0.131196         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 62.786675

[localhost] local: gohan client ese_physical_port show --output-format json 0078808a-c28e-46e1-887d-8ec65f90c446
{
    "ese_physical_port": {
        "connected_port_id": "",
        "connected_port_owner": "mx_downlink",
        "description": "",
        "ese_device_id": "4d8371c0-1b91-4818-a6e7-26425178e5d4",
        "existing": "new",
        "id": "0078808a-c28e-46e1-887d-8ec65f90c446",
        "name": "xe-0/0/3",
        "operational_state": "UP",
        "orchestration_state": "CREATE_COMPLETE",
        "status": "ACTIVE",
        "tags": {},
        "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef"
    }
}

#################################################
### checking heat-stack (ese_physical_ports) ####
#################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/ese_physical_ports/0078808a-c28e-46e1-887d-8ec65f90c446
[localhost] local: heat stack-show ese_physical_port_0078808a-c28e-46e1-887d-8ec65f90c446
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                           |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                              |
| creation_time         | 2018-04-16T00:00:36Z                                                                                                                                                                            |
| description           | Physical port template                                                                                                                                                                          |
| disable_rollback      | True                                                                                                                                                                                            |
| id                    | f3349678-70d5-4450-b0c3-14122332861c                                                                                                                                                            |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/b3e3095c0a5b4383805efe9cf2a6b5ef/stacks/ese_physical_port_0078808a-c28e-46e1-887d-8ec65f90c446/f3349678-70d5-4450-b0c3-14122332861c |
| notification_topics   | []                                                                                                                                                                                              |
| outputs               | [                                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                             |
|                       |     "output_value": "28c45b87-a1c0-41f0-8f69-85c60d47713f",                                                                                                                                     |
|                       |     "description": "Monitoring Target ID",                                                                                                                                                      |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                                        |
|                       |   },                                                                                                                                                                                            |
|                       |   {                                                                                                                                                                                             |
|                       |     "output_value": "06bfe521-07f0-4931-9f8c-318c3ad8114e",                                                                                                                                     |
|                       |     "description": "A unique id for the physical interface",                                                                                                                                    |
|                       |     "output_key": "id"                                                                                                                                                                          |
|                       |   },                                                                                                                                                                                            |
|                       |   {                                                                                                                                                                                             |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/28c45b87-a1c0-41f0-8f69-85c60d47713f",                                                            |
|                       |     "description": "Monitoring Process Link",                                                                                                                                                   |
|                       |     "output_key": "monitoring_link"                                                                                                                                                             |
|                       |   },                                                                                                                                                                                            |
|                       |   {                                                                                                                                                                                             |
|                       |     "output_value": "xe-0/0/38",                                                                                                                                                                |
|                       |     "description": "The name of the physical interface.",                                                                                                                                       |
|                       |     "output_key": "name"                                                                                                                                                                        |
|                       |   }                                                                                                                                                                                             |
|                       | ]                                                                                                                                                                                               |
| parameters            | {                                                                                                                                                                                               |
|                       |   "physical_port_name": "xe-0/0/3",                                                                                                                                                             |
|                       |   "OS::stack_id": "f3349678-70d5-4450-b0c3-14122332861c",                                                                                                                                       |
|                       |   "OS::stack_name": "ese_physical_port_0078808a-c28e-46e1-887d-8ec65f90c446",                                                                                                                   |
|                       |   "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef",                                                                                                                                              |
|                       |   "device_ip": "10.161.0.34",                                                                                                                                                                   |
|                       |   "physical_device": "7e5c78fa-71c0-427e-947f-586b1fc3c470",                                                                                                                                    |
|                       |   "version": "1",                                                                                                                                                                               |
|                       |   "gohan_id": "0078808a-c28e-46e1-887d-8ec65f90c446"                                                                                                                                            |
|                       | }                                                                                                                                                                                               |
| parent                | None                                                                                                                                                                                            |
| stack_name            | ese_physical_port_0078808a-c28e-46e1-887d-8ec65f90c446                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                           |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                                 |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                             |
| stack_user_project_id | b3e3095c0a5b4383805efe9cf2a6b5ef                                                                                                                                                                |
| template_description  | Physical port template                                                                                                                                                                          |
| timeout_mins          | 6                                                                                                                                                                                               |
| updated_time          | None                                                                                                                                                                                            |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show ese_physical_port_0078808a-c28e-46e1-887d-8ec65f90c446
description: 'Physical port template

  '
heat_template_version: '2013-05-23'
outputs:
  id:
    description: A unique id for the physical interface
    value: {get_resource: physical_interface}
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [interface_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: interface_monitor}
  name:
    description: The name of the physical interface.
    value:
      get_attr: [physical_interface, name]
parameters:
  device_ip: {description: Device IP Address., label: Device IP Address, type: string}
  gohan_id: {description: UUID of the ESE Physical Port, label: Gohan resource ID,
    type: string}
  physical_device: {description: Id of the physical device on which physical port
      will be created., label: Physical Device Id, type: string}
  physical_port_name: {description: Name of the physical port., label: Physical Interface
      Name, type: string}
  tenant_id: {label: Tenant ID, type: string}
  version: {label: Config version, type: number}
resources:
  interface_monitor:
    depends_on: physical_interface
    properties:
      field_name: port
      properties:
        community_name: ESE_NODE_COMMUNITY
        device_ip: {get_param: device_ip}
        if_name: {get_param: physical_port_name}
      resource_id: {get_param: gohan_id}
      resource_type: ese_physical_ports
      syncer_properties:
        etcd:
          status: {key: port}
      tenant_id: {get_param: tenant_id}
      type: snmp_ports_status
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget
  physical_interface:
    properties:
      name: {get_param: physical_port_name}
      physical_router: {get_param: physical_device}
    type: OS::Contrail::PhysicalInterface

### Create Ese Physical Port ###
name:[xe-0/0/4], id:[a6e70af1-386b-4d79-943f-6f44e87f95b3]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
00:01:41.092604  00:01:41.254900  0.162296        POST     201    PENDING_CREATE
00:01:41.255501  00:01:41.337519  0.082018         GET     200    PENDING_CREATE
00:01:42.338752  00:01:42.406958  0.068206         GET     200    PENDING_CREATE
00:01:43.407735  00:01:43.492586  0.084851         GET     200    PENDING_CREATE
00:01:44.493953  00:01:44.579195  0.085242         GET     200    PENDING_CREATE
00:01:45.580457  00:01:45.653037  0.072580         GET     200    PENDING_CREATE
00:01:46.653412  00:01:46.724829  0.071417         GET     200    PENDING_CREATE
00:01:47.726097  00:01:47.798885  0.072788         GET     200    PENDING_CREATE
00:01:48.800156  00:01:48.868801  0.068645         GET     200    PENDING_CREATE
00:01:49.870095  00:01:49.944044  0.073949         GET     200    PENDING_CREATE
00:01:50.945333  00:01:51.012305  0.066972         GET     200    PENDING_CREATE
00:01:52.013593  00:01:52.083415  0.069822         GET     200    PENDING_CREATE
00:01:53.084657  00:01:53.154366  0.069709         GET     200    PENDING_CREATE
00:01:54.155592  00:01:54.222840  0.067248         GET     200    PENDING_CREATE
00:01:55.224829  00:01:55.312266  0.087437         GET     200    PENDING_CREATE
00:01:56.312681  00:01:56.379318  0.066637         GET     200    PENDING_CREATE
00:01:57.380647  00:01:57.451977  0.071330         GET     200    PENDING_CREATE
00:01:58.453311  00:01:58.520058  0.066747         GET     200    PENDING_CREATE
00:01:59.520770  00:01:59.588172  0.067402         GET     200    PENDING_CREATE
00:02:00.589513  00:02:00.657656  0.068143         GET     200    PENDING_CREATE
00:02:01.658925  00:02:01.748004  0.089079         GET     200    PENDING_CREATE
00:02:02.749416  00:02:02.818187  0.068771         GET     200    PENDING_CREATE
00:02:03.819424  00:02:03.900412  0.080988         GET     200    PENDING_CREATE
00:02:04.901717  00:02:04.977996  0.076279         GET     200    PENDING_CREATE
00:02:05.979319  00:02:06.052603  0.073284         GET     200    PENDING_CREATE
00:02:07.054020  00:02:07.148173  0.094153         GET     200    PENDING_CREATE
00:02:08.149527  00:02:08.230905  0.081378         GET     200    PENDING_CREATE
00:02:09.232503  00:02:09.312657  0.080154         GET     200    PENDING_CREATE
00:02:10.313684  00:02:10.382550  0.068866         GET     200    PENDING_CREATE
00:02:11.384029  00:02:11.464114  0.080085         GET     200    PENDING_CREATE
00:02:12.465486  00:02:12.532657  0.067171         GET     200    PENDING_CREATE
00:02:13.534038  00:02:13.604031  0.069993         GET     200    PENDING_CREATE
00:02:14.605405  00:02:14.679857  0.074452         GET     200    PENDING_CREATE
00:02:15.681199  00:02:15.747486  0.066287         GET     200    PENDING_CREATE
00:02:16.748500  00:02:17.074510  0.326010         GET     200    PENDING_CREATE
00:02:18.075065  00:02:18.165534  0.090469         GET     200    PENDING_CREATE
00:02:19.166922  00:02:19.239431  0.072509         GET     200    PENDING_CREATE
00:02:20.240671  00:02:20.309156  0.068485         GET     200    PENDING_CREATE
00:02:21.310369  00:02:21.379202  0.068833         GET     200    PENDING_CREATE
00:02:22.379985  00:02:22.464636  0.084651         GET     200    PENDING_CREATE
00:02:23.465266  00:02:23.559081  0.093815         GET     200    PENDING_CREATE
00:02:24.560317  00:02:24.628080  0.067763         GET     200    PENDING_CREATE
00:02:25.629408  00:02:25.707929  0.078521         GET     200    PENDING_CREATE
00:02:26.709320  00:02:26.777892  0.068572         GET     200    PENDING_CREATE
00:02:27.779209  00:02:27.851758  0.072549         GET     200    PENDING_CREATE
00:02:28.853110  00:02:28.926063  0.072953         GET     200    PENDING_CREATE
00:02:29.927266  00:02:29.997520  0.070254         GET     200    PENDING_CREATE
00:02:30.998032  00:02:31.068339  0.070307         GET     200    PENDING_CREATE
00:02:32.069650  00:02:32.137967  0.068317         GET     200    PENDING_CREATE
00:02:33.139205  00:02:33.208396  0.069191         GET     200    PENDING_CREATE
00:02:34.209690  00:02:34.285114  0.075424         GET     200    PENDING_CREATE
00:02:35.286366  00:02:35.355744  0.069378         GET     200    PENDING_CREATE
00:02:36.357025  00:02:36.429211  0.072186         GET     200    PENDING_CREATE
00:02:37.430453  00:02:37.503944  0.073491         GET     200    PENDING_CREATE
00:02:38.504509  00:02:38.572829  0.068320         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 57.480225

[localhost] local: gohan client ese_physical_port show --output-format json a6e70af1-386b-4d79-943f-6f44e87f95b3
{
    "ese_physical_port": {
        "connected_port_id": "",
        "connected_port_owner": "mx_downlink",
        "description": "",
        "ese_device_id": "4d8371c0-1b91-4818-a6e7-26425178e5d4",
        "existing": "new",
        "id": "a6e70af1-386b-4d79-943f-6f44e87f95b3",
        "name": "xe-0/0/4",
        "operational_state": "UP",
        "orchestration_state": "CREATE_COMPLETE",
        "status": "ACTIVE",
        "tags": {},
        "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef"
    }
}

#################################################
### checking heat-stack (ese_physical_ports) ####
#################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/ese_physical_ports/a6e70af1-386b-4d79-943f-6f44e87f95b3
[localhost] local: heat stack-show ese_physical_port_a6e70af1-386b-4d79-943f-6f44e87f95b3
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                           |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                              |
| creation_time         | 2018-04-16T00:01:42Z                                                                                                                                                                            |
| description           | Physical port template                                                                                                                                                                          |
| disable_rollback      | True                                                                                                                                                                                            |
| id                    | 20418531-0948-445f-95c6-f211f8b1dea7                                                                                                                                                            |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/b3e3095c0a5b4383805efe9cf2a6b5ef/stacks/ese_physical_port_a6e70af1-386b-4d79-943f-6f44e87f95b3/20418531-0948-445f-95c6-f211f8b1dea7 |
| notification_topics   | []                                                                                                                                                                                              |
| outputs               | [                                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                             |
|                       |     "output_value": "07d5e8ed-4695-49b4-8560-897b586b1b71",                                                                                                                                     |
|                       |     "description": "Monitoring Target ID",                                                                                                                                                      |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                                        |
|                       |   },                                                                                                                                                                                            |
|                       |   {                                                                                                                                                                                             |
|                       |     "output_value": "06bfe521-07f0-4931-9f8c-318c3ad8114e",                                                                                                                                     |
|                       |     "description": "A unique id for the physical interface",                                                                                                                                    |
|                       |     "output_key": "id"                                                                                                                                                                          |
|                       |   },                                                                                                                                                                                            |
|                       |   {                                                                                                                                                                                             |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/07d5e8ed-4695-49b4-8560-897b586b1b71",                                                            |
|                       |     "description": "Monitoring Process Link",                                                                                                                                                   |
|                       |     "output_key": "monitoring_link"                                                                                                                                                             |
|                       |   },                                                                                                                                                                                            |
|                       |   {                                                                                                                                                                                             |
|                       |     "output_value": "xe-0/0/38",                                                                                                                                                                |
|                       |     "description": "The name of the physical interface.",                                                                                                                                       |
|                       |     "output_key": "name"                                                                                                                                                                        |
|                       |   }                                                                                                                                                                                             |
|                       | ]                                                                                                                                                                                               |
| parameters            | {                                                                                                                                                                                               |
|                       |   "physical_port_name": "xe-0/0/4",                                                                                                                                                             |
|                       |   "OS::stack_id": "20418531-0948-445f-95c6-f211f8b1dea7",                                                                                                                                       |
|                       |   "OS::stack_name": "ese_physical_port_a6e70af1-386b-4d79-943f-6f44e87f95b3",                                                                                                                   |
|                       |   "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef",                                                                                                                                              |
|                       |   "device_ip": "10.161.0.34",                                                                                                                                                                   |
|                       |   "physical_device": "7e5c78fa-71c0-427e-947f-586b1fc3c470",                                                                                                                                    |
|                       |   "version": "1",                                                                                                                                                                               |
|                       |   "gohan_id": "a6e70af1-386b-4d79-943f-6f44e87f95b3"                                                                                                                                            |
|                       | }                                                                                                                                                                                               |
| parent                | None                                                                                                                                                                                            |
| stack_name            | ese_physical_port_a6e70af1-386b-4d79-943f-6f44e87f95b3                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                           |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                                 |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                             |
| stack_user_project_id | b3e3095c0a5b4383805efe9cf2a6b5ef                                                                                                                                                                |
| template_description  | Physical port template                                                                                                                                                                          |
| timeout_mins          | 6                                                                                                                                                                                               |
| updated_time          | None                                                                                                                                                                                            |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show ese_physical_port_a6e70af1-386b-4d79-943f-6f44e87f95b3
description: 'Physical port template

  '
heat_template_version: '2013-05-23'
outputs:
  id:
    description: A unique id for the physical interface
    value: {get_resource: physical_interface}
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [interface_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: interface_monitor}
  name:
    description: The name of the physical interface.
    value:
      get_attr: [physical_interface, name]
parameters:
  device_ip: {description: Device IP Address., label: Device IP Address, type: string}
  gohan_id: {description: UUID of the ESE Physical Port, label: Gohan resource ID,
    type: string}
  physical_device: {description: Id of the physical device on which physical port
      will be created., label: Physical Device Id, type: string}
  physical_port_name: {description: Name of the physical port., label: Physical Interface
      Name, type: string}
  tenant_id: {label: Tenant ID, type: string}
  version: {label: Config version, type: number}
resources:
  interface_monitor:
    depends_on: physical_interface
    properties:
      field_name: port
      properties:
        community_name: ESE_NODE_COMMUNITY
        device_ip: {get_param: device_ip}
        if_name: {get_param: physical_port_name}
      resource_id: {get_param: gohan_id}
      resource_type: ese_physical_ports
      syncer_properties:
        etcd:
          status: {key: port}
      tenant_id: {get_param: tenant_id}
      type: snmp_ports_status
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget
  physical_interface:
    properties:
      name: {get_param: physical_port_name}
      physical_router: {get_param: physical_device}
    type: OS::Contrail::PhysicalInterface

### Create Edge Router ###
name:[vMX-router-02], id:[7a35974a-a19f-49e2-b907-ad7fd8692975]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
00:02:41.546815  00:02:41.653825  0.107010        POST     201    PENDING_CREATE
00:02:41.654476  00:02:41.742158  0.087682         GET     200    PENDING_CREATE
00:02:42.742558  00:02:42.807187  0.064629         GET     200    PENDING_CREATE
00:02:43.808400  00:02:43.882851  0.074451         GET     200    PENDING_CREATE
00:02:44.884087  00:02:44.969670  0.085583         GET     200    PENDING_CREATE
00:02:45.971035  00:02:46.039736  0.068701         GET     200    PENDING_CREATE
00:02:47.040839  00:02:47.106171  0.065332         GET     200    PENDING_CREATE
00:02:48.108083  00:02:48.175741  0.067658         GET     200    PENDING_CREATE
00:02:49.177025  00:02:49.241750  0.064725         GET     200    PENDING_CREATE
00:02:50.243027  00:02:50.315308  0.072281         GET     200    PENDING_CREATE
00:02:51.316548  00:02:51.403377  0.086829         GET     200    PENDING_CREATE
00:02:52.404557  00:02:52.487365  0.082808         GET     200    PENDING_CREATE
00:02:53.488531  00:02:53.555030  0.066499         GET     200    PENDING_CREATE
00:02:54.556277  00:02:54.623716  0.067439         GET     200    PENDING_CREATE
00:02:55.624936  00:02:55.693609  0.068673         GET     200    PENDING_CREATE
00:02:56.694955  00:02:56.990806  0.295851         GET     200    PENDING_CREATE
00:02:57.992669  00:02:58.061636  0.068967         GET     200    PENDING_CREATE
00:02:59.062736  00:02:59.130902  0.068166         GET     200    PENDING_CREATE
00:03:00.132231  00:03:00.200345  0.068114         GET     200    PENDING_CREATE
00:03:01.201706  00:03:01.270193  0.068487         GET     200    PENDING_CREATE
00:03:02.270724  00:03:02.338270  0.067546         GET     200    PENDING_CREATE
00:03:03.339561  00:03:03.406317  0.066756         GET     200    PENDING_CREATE
00:03:04.407649  00:03:04.474171  0.066522         GET     200    PENDING_CREATE
00:03:05.475532  00:03:05.554111  0.078579         GET     200    PENDING_CREATE
00:03:06.555052  00:03:06.624130  0.069078         GET     200    PENDING_CREATE
00:03:07.624557  00:03:07.693482  0.068925         GET     200    PENDING_CREATE
00:03:08.694743  00:03:08.776029  0.081286         GET     200    PENDING_CREATE
00:03:09.777292  00:03:09.844902  0.067610         GET     200    PENDING_CREATE
00:03:10.846181  00:03:10.916216  0.070035         GET     200    PENDING_CREATE
00:03:11.916853  00:03:11.982836  0.065983         GET     200    PENDING_CREATE
00:03:12.983310  00:03:13.064657  0.081347         GET     200    PENDING_CREATE
00:03:14.065955  00:03:14.150705  0.084750         GET     200    PENDING_CREATE
00:03:15.150977  00:03:15.218031  0.067054         GET     200    PENDING_CREATE
00:03:16.219275  00:03:16.291028  0.071753         GET     200    PENDING_CREATE
00:03:17.292268  00:03:17.359468  0.067200         GET     200    PENDING_CREATE
00:03:18.360721  00:03:18.438903  0.078182         GET     200    PENDING_CREATE
00:03:19.440237  00:03:19.507802  0.067565         GET     200    PENDING_CREATE
00:03:20.509136  00:03:20.573182  0.064046         GET     200    PENDING_CREATE
00:03:21.574166  00:03:21.641792  0.067626         GET     200    PENDING_CREATE
00:03:22.643101  00:03:22.712916  0.069815         GET     200    PENDING_CREATE
00:03:23.714238  00:03:23.782972  0.068734         GET     200    PENDING_CREATE
00:03:24.783624  00:03:24.849091  0.065467         GET     200    PENDING_CREATE
00:03:25.850324  00:03:25.915958  0.065634         GET     200    PENDING_CREATE
00:03:26.916466  00:03:26.981546  0.065080         GET     200    PENDING_CREATE
00:03:27.982338  00:03:28.049049  0.066711         GET     200    PENDING_CREATE
00:03:29.050284  00:03:29.116814  0.066530         GET     200    PENDING_CREATE
00:03:30.118083  00:03:30.203566  0.085483         GET     200    PENDING_CREATE
00:03:31.204871  00:03:31.269676  0.064805         GET     200    PENDING_CREATE
00:03:32.270919  00:03:32.338400  0.067481         GET     200    PENDING_CREATE
00:03:33.339265  00:03:33.423916  0.084651         GET     200    PENDING_CREATE
00:03:34.424554  00:03:34.509616  0.085062         GET     200    PENDING_CREATE
00:03:35.510604  00:03:35.734192  0.223588         GET     200    PENDING_CREATE
00:03:36.735445  00:03:36.802621  0.067176         GET     200    PENDING_CREATE
00:03:37.803872  00:03:37.869856  0.065984         GET     200    PENDING_CREATE
00:03:38.871098  00:03:38.936407  0.065309         GET     200    PENDING_CREATE
00:03:39.937674  00:03:40.005237  0.067563         GET     200    PENDING_CREATE
00:03:41.006515  00:03:41.072972  0.066457         GET     200    PENDING_CREATE
00:03:42.073554  00:03:42.139880  0.066326         GET     200    PENDING_CREATE
00:03:43.140603  00:03:43.205337  0.064734         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 61.658522

[localhost] local: gohan client edge_router show --output-format json 7a35974a-a19f-49e2-b907-ad7fd8692975
{
    "edge_router": {
        "autonomous_system": "65101",
        "description": "MX80 #2",
        "id": "7a35974a-a19f-49e2-b907-ad7fd8692975",
        "ip": "10.79.5.185",
        "login": "esi",
        "name": "vMX-router-02",
        "operational_state": "UP",
        "orchestration_state": "CREATE_COMPLETE",
        "password": "esiesi0000",
        "ssh_port": 830,
        "status": "ACTIVE",
        "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef"
    }
}

###########################################
### checking heat-stack (edge_routers) ####
###########################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/edge_routers/7a35974a-a19f-49e2-b907-ad7fd8692975
[localhost] local: heat stack-show edge_router_7a35974a-a19f-49e2-b907-ad7fd8692975
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                     |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                        |
| creation_time         | 2018-04-16T00:02:42Z                                                                                                                                                                      |
| description           | Physical port template                                                                                                                                                                    |
| disable_rollback      | True                                                                                                                                                                                      |
| id                    | d1412d29-2acb-4105-95e4-9b55346b58ec                                                                                                                                                      |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/b3e3095c0a5b4383805efe9cf2a6b5ef/stacks/edge_router_7a35974a-a19f-49e2-b907-ad7fd8692975/d1412d29-2acb-4105-95e4-9b55346b58ec |
| notification_topics   | []                                                                                                                                                                                        |
| outputs               | [                                                                                                                                                                                         |
|                       |   {                                                                                                                                                                                       |
|                       |     "output_value": "cc896303-29e2-47d6-a409-a84c23b5722b",                                                                                                                               |
|                       |     "description": "Monitoring Target ID",                                                                                                                                                |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                                  |
|                       |   },                                                                                                                                                                                      |
|                       |   {                                                                                                                                                                                       |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/cc896303-29e2-47d6-a409-a84c23b5722b",                                                      |
|                       |     "description": "Monitoring Process Link",                                                                                                                                             |
|                       |     "output_key": "monitoring_link"                                                                                                                                                       |
|                       |   }                                                                                                                                                                                       |
|                       | ]                                                                                                                                                                                         |
| parameters            | {                                                                                                                                                                                         |
|                       |   "OS::stack_id": "d1412d29-2acb-4105-95e4-9b55346b58ec",                                                                                                                                 |
|                       |   "OS::stack_name": "edge_router_7a35974a-a19f-49e2-b907-ad7fd8692975",                                                                                                                   |
|                       |   "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef",                                                                                                                                        |
|                       |   "device_ip": "10.79.5.185",                                                                                                                                                             |
|                       |   "version": "1",                                                                                                                                                                         |
|                       |   "gohan_id": "7a35974a-a19f-49e2-b907-ad7fd8692975"                                                                                                                                      |
|                       | }                                                                                                                                                                                         |
| parent                | None                                                                                                                                                                                      |
| stack_name            | edge_router_7a35974a-a19f-49e2-b907-ad7fd8692975                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                     |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                           |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                       |
| stack_user_project_id | b3e3095c0a5b4383805efe9cf2a6b5ef                                                                                                                                                          |
| template_description  | Physical port template                                                                                                                                                                    |
| timeout_mins          | 3                                                                                                                                                                                         |
| updated_time          | None                                                                                                                                                                                      |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show edge_router_7a35974a-a19f-49e2-b907-ad7fd8692975
description: 'Physical port template

  '
heat_template_version: '2013-05-23'
outputs:
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [device_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: device_monitor}
parameters:
  device_ip: {description: Device IP Address, label: Device IP Address, type: string}
  gohan_id: {description: UUID of the Edge Router, label: Gohan resource ID, type: string}
  tenant_id: {label: Tenant ID, type: string}
  version: {label: Config version, type: number}
resources:
  device_monitor:
    properties:
      field_name: router
      properties:
        community_name: EDGE_ROUTER_COMMUNITY
        device_ip: {get_param: device_ip}
      resource_id: {get_param: gohan_id}
      resource_type: edge_routers
      syncer_properties:
        etcd:
          status: {key: router}
      tenant_id: {get_param: tenant_id}
      type: snmp_device
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget

### Create Edge Router ###
name:[vMX-router-01], id:[b7e6d8ad-5377-4380-bbb4-1a62566cbd6d]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
00:03:45.861186  00:03:45.976594  0.115408        POST     201    PENDING_CREATE
00:03:45.977661  00:03:46.070924  0.093263         GET     200    PENDING_CREATE
00:03:47.072140  00:03:47.138649  0.066509         GET     200    PENDING_CREATE
00:03:48.139278  00:03:48.227586  0.088308         GET     200    PENDING_CREATE
00:03:49.228554  00:03:49.299716  0.071162         GET     200    PENDING_CREATE
00:03:50.300988  00:03:50.388572  0.087584         GET     200    PENDING_CREATE
00:03:51.389858  00:03:51.458651  0.068793         GET     200    PENDING_CREATE
00:03:52.459759  00:03:52.527572  0.067813         GET     200    PENDING_CREATE
00:03:53.528924  00:03:53.609012  0.080088         GET     200    PENDING_CREATE
00:03:54.610387  00:03:54.680345  0.069958         GET     200    PENDING_CREATE
00:03:55.682210  00:03:55.765903  0.083693         GET     200    PENDING_CREATE
00:03:56.767288  00:03:56.835490  0.068202         GET     200    PENDING_CREATE
00:03:57.836528  00:03:57.906163  0.069635         GET     200    PENDING_CREATE
00:03:58.906739  00:03:58.992997  0.086258         GET     200    PENDING_CREATE
00:03:59.994664  00:04:00.116345  0.121681         GET     200    PENDING_CREATE
00:04:01.117670  00:04:01.183917  0.066247         GET     200    PENDING_CREATE
00:04:02.185167  00:04:02.262835  0.077668         GET     200    PENDING_CREATE
00:04:03.263340  00:04:03.332909  0.069569         GET     200    PENDING_CREATE
00:04:04.334346  00:04:04.414301  0.079955         GET     200    PENDING_CREATE
00:04:05.415980  00:04:05.484693  0.068713         GET     200    PENDING_CREATE
00:04:06.486019  00:04:06.551243  0.065224         GET     200    PENDING_CREATE
00:04:07.552473  00:04:07.620157  0.067684         GET     200    PENDING_CREATE
00:04:08.621408  00:04:08.705590  0.084182         GET     200    PENDING_CREATE
00:04:09.706316  00:04:09.923741  0.217425         GET     200    PENDING_CREATE
00:04:10.925019  00:04:11.008533  0.083514         GET     200    PENDING_CREATE
00:04:12.009884  00:04:12.082647  0.072763         GET     200    PENDING_CREATE
00:04:13.084956  00:04:13.152629  0.067673         GET     200    PENDING_CREATE
00:04:14.153956  00:04:14.222803  0.068847         GET     200    PENDING_CREATE
00:04:15.223384  00:04:15.295284  0.071900         GET     200    PENDING_CREATE
00:04:16.296770  00:04:16.367899  0.071129         GET     200    PENDING_CREATE
00:04:17.369275  00:04:17.444881  0.075606         GET     200    PENDING_CREATE
00:04:18.446392  00:04:18.517135  0.070743         GET     200    PENDING_CREATE
00:04:19.518445  00:04:19.597487  0.079042         GET     200    PENDING_CREATE
00:04:20.598908  00:04:20.686463  0.087555         GET     200    PENDING_CREATE
00:04:21.687871  00:04:21.785878  0.098007         GET     200    PENDING_CREATE
00:04:22.787294  00:04:22.870277  0.082983         GET     200    PENDING_CREATE
00:04:23.871571  00:04:23.951204  0.079633         GET     200    PENDING_CREATE
00:04:24.952533  00:04:25.034635  0.082102         GET     200    PENDING_CREATE
00:04:26.035929  00:04:26.102802  0.066873         GET     200    PENDING_CREATE
00:04:27.103090  00:04:27.169742  0.066652         GET     200    PENDING_CREATE
00:04:28.170407  00:04:28.241202  0.070795         GET     200    PENDING_CREATE
00:04:29.242526  00:04:29.312336  0.069810         GET     200    PENDING_CREATE
00:04:30.313634  00:04:30.390532  0.076898         GET     200    PENDING_CREATE
00:04:31.391806  00:04:31.470720  0.078914         GET     200    PENDING_CREATE
00:04:32.472029  00:04:32.549346  0.077317         GET     200    PENDING_CREATE
00:04:33.550450  00:04:33.616903  0.066453         GET     200    PENDING_CREATE
00:04:34.618164  00:04:34.703542  0.085378         GET     200    PENDING_CREATE
00:04:35.704805  00:04:35.770063  0.065258         GET     200    PENDING_CREATE
00:04:36.770436  00:04:36.835777  0.065341         GET     200    PENDING_CREATE
00:04:37.836526  00:04:37.902764  0.066238         GET     200    PENDING_CREATE
00:04:38.903163  00:04:38.969852  0.066689         GET     200    PENDING_CREATE
00:04:39.971340  00:04:40.038694  0.067354         GET     200    PENDING_CREATE
00:04:41.039972  00:04:41.109182  0.069210         GET     200    PENDING_CREATE
00:04:42.110310  00:04:42.176932  0.066622         GET     200    PENDING_CREATE
00:04:43.178180  00:04:43.248694  0.070514         GET     200    PENDING_CREATE
00:04:44.250013  00:04:44.323359  0.073346         GET     200    PENDING_CREATE
00:04:45.324724  00:04:45.401031  0.076307         GET     200    PENDING_CREATE
00:04:46.402292  00:04:46.470105  0.067813         GET     200    PENDING_CREATE
00:04:47.471751  00:04:47.537283  0.065532         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 61.676097

[localhost] local: gohan client edge_router show --output-format json b7e6d8ad-5377-4380-bbb4-1a62566cbd6d
{
    "edge_router": {
        "autonomous_system": "65101",
        "description": "MX80 #1",
        "id": "b7e6d8ad-5377-4380-bbb4-1a62566cbd6d",
        "ip": "10.79.5.184",
        "login": "esi",
        "name": "vMX-router-01",
        "operational_state": "UP",
        "orchestration_state": "CREATE_COMPLETE",
        "password": "esiesi0000",
        "ssh_port": 830,
        "status": "ACTIVE",
        "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef"
    }
}

###########################################
### checking heat-stack (edge_routers) ####
###########################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/edge_routers/b7e6d8ad-5377-4380-bbb4-1a62566cbd6d
[localhost] local: heat stack-show edge_router_b7e6d8ad-5377-4380-bbb4-1a62566cbd6d
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                     |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                        |
| creation_time         | 2018-04-16T00:03:46Z                                                                                                                                                                      |
| description           | Physical port template                                                                                                                                                                    |
| disable_rollback      | True                                                                                                                                                                                      |
| id                    | 0d503769-c7ea-4a39-af3d-ed1e2a5c4798                                                                                                                                                      |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/b3e3095c0a5b4383805efe9cf2a6b5ef/stacks/edge_router_b7e6d8ad-5377-4380-bbb4-1a62566cbd6d/0d503769-c7ea-4a39-af3d-ed1e2a5c4798 |
| notification_topics   | []                                                                                                                                                                                        |
| outputs               | [                                                                                                                                                                                         |
|                       |   {                                                                                                                                                                                       |
|                       |     "output_value": "1e628441-c77a-4ebe-b5fe-6bd69816456d",                                                                                                                               |
|                       |     "description": "Monitoring Target ID",                                                                                                                                                |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                                  |
|                       |   },                                                                                                                                                                                      |
|                       |   {                                                                                                                                                                                       |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/1e628441-c77a-4ebe-b5fe-6bd69816456d",                                                      |
|                       |     "description": "Monitoring Process Link",                                                                                                                                             |
|                       |     "output_key": "monitoring_link"                                                                                                                                                       |
|                       |   }                                                                                                                                                                                       |
|                       | ]                                                                                                                                                                                         |
| parameters            | {                                                                                                                                                                                         |
|                       |   "OS::stack_id": "0d503769-c7ea-4a39-af3d-ed1e2a5c4798",                                                                                                                                 |
|                       |   "OS::stack_name": "edge_router_b7e6d8ad-5377-4380-bbb4-1a62566cbd6d",                                                                                                                   |
|                       |   "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef",                                                                                                                                        |
|                       |   "device_ip": "10.79.5.184",                                                                                                                                                             |
|                       |   "version": "1",                                                                                                                                                                         |
|                       |   "gohan_id": "b7e6d8ad-5377-4380-bbb4-1a62566cbd6d"                                                                                                                                      |
|                       | }                                                                                                                                                                                         |
| parent                | None                                                                                                                                                                                      |
| stack_name            | edge_router_b7e6d8ad-5377-4380-bbb4-1a62566cbd6d                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                     |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                           |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                       |
| stack_user_project_id | b3e3095c0a5b4383805efe9cf2a6b5ef                                                                                                                                                          |
| template_description  | Physical port template                                                                                                                                                                    |
| timeout_mins          | 3                                                                                                                                                                                         |
| updated_time          | None                                                                                                                                                                                      |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show edge_router_b7e6d8ad-5377-4380-bbb4-1a62566cbd6d
description: 'Physical port template

  '
heat_template_version: '2013-05-23'
outputs:
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [device_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: device_monitor}
parameters:
  device_ip: {description: Device IP Address, label: Device IP Address, type: string}
  gohan_id: {description: UUID of the Edge Router, label: Gohan resource ID, type: string}
  tenant_id: {label: Tenant ID, type: string}
  version: {label: Config version, type: number}
resources:
  device_monitor:
    properties:
      field_name: router
      properties:
        community_name: EDGE_ROUTER_COMMUNITY
        device_ip: {get_param: device_ip}
      resource_id: {get_param: gohan_id}
      resource_type: edge_routers
      syncer_properties:
        etcd:
          status: {key: router}
      tenant_id: {get_param: tenant_id}
      type: snmp_device
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget

### Create Ha Router ###
name:[sample-ha-router], id:[8c233862-895f-4cca-b377-c353e733c768]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
00:04:50.210174  00:04:50.652794  0.442620        POST     201    PENDING_CREATE
00:04:50.653235  00:04:50.786713  0.133478         GET     200    PENDING_CREATE
00:04:51.787666  00:04:51.853180  0.065514         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 1.643006

[localhost] local: gohan client ha_router show --output-format json 8c233862-895f-4cca-b377-c353e733c768
{
    "ha_router": {
        "available_gateways": 500,
        "description": "sample_ha_router",
        "id": "8c233862-895f-4cca-b377-c353e733c768",
        "maximum_gateways": 500,
        "name": "sample-ha-router",
        "primary_router_id": "7a35974a-a19f-49e2-b907-ad7fd8692975",
        "secondary_router_id": "b7e6d8ad-5377-4380-bbb4-1a62566cbd6d",
        "status": "ACTIVE",
        "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef"
    }
}

### Create Er Physical Interface ###
name:[ge-0/0/1], id:[f3ecf585-5c3b-445a-97a7-d8e124c99e16]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
00:04:52.475956  00:04:52.612636  0.136680        POST     201    PENDING_CREATE
00:04:52.613293  00:04:52.697082  0.083789         GET     200    PENDING_CREATE
00:04:53.698300  00:04:53.763806  0.065506         GET     200    PENDING_CREATE
00:04:54.764502  00:04:54.834568  0.070066         GET     200    PENDING_CREATE
00:04:55.835253  00:04:55.918254  0.083001         GET     200    PENDING_CREATE
00:04:56.920222  00:04:56.989108  0.068886         GET     200    PENDING_CREATE
00:04:57.990422  00:04:58.059257  0.068835         GET     200    PENDING_CREATE
00:04:59.060700  00:04:59.126937  0.066237         GET     200    PENDING_CREATE
00:05:00.128193  00:05:00.194477  0.066284         GET     200    PENDING_CREATE
00:05:01.195738  00:05:01.261429  0.065691         GET     200    PENDING_CREATE
00:05:02.262359  00:05:02.331842  0.069483         GET     200    PENDING_CREATE
00:05:03.332530  00:05:03.398197  0.065667         GET     200    PENDING_CREATE
00:05:04.399458  00:05:04.473080  0.073622         GET     200    PENDING_CREATE
00:05:05.474331  00:05:05.553566  0.079235         GET     200    PENDING_CREATE
00:05:06.554801  00:05:06.645009  0.090208         GET     200    PENDING_CREATE
00:05:07.646268  00:05:07.712460  0.066192         GET     200    PENDING_CREATE
00:05:08.713719  00:05:08.786061  0.072342         GET     200    PENDING_CREATE
00:05:09.787379  00:05:09.854819  0.067440         GET     200    PENDING_CREATE
00:05:10.856074  00:05:10.922122  0.066048         GET     200    PENDING_CREATE
00:05:11.923376  00:05:12.001844  0.078468         GET     200    PENDING_CREATE
00:05:13.003149  00:05:13.161447  0.158298         GET     200    PENDING_CREATE
00:05:14.162727  00:05:14.247235  0.084508         GET     200    PENDING_CREATE
00:05:15.248586  00:05:15.326757  0.078171         GET     200    PENDING_CREATE
00:05:16.328056  00:05:16.393882  0.065826         GET     200    PENDING_CREATE
00:05:17.395144  00:05:17.464929  0.069785         GET     200    PENDING_CREATE
00:05:18.466163  00:05:18.532309  0.066146         GET     200    PENDING_CREATE
00:05:19.533618  00:05:19.599365  0.065747         GET     200    PENDING_CREATE
00:05:20.600607  00:05:20.667041  0.066434         GET     200    PENDING_CREATE
00:05:21.668301  00:05:21.741221  0.072920         GET     200    PENDING_CREATE
00:05:22.742814  00:05:22.816754  0.073940         GET     200    PENDING_CREATE
00:05:23.817371  00:05:23.882593  0.065222         GET     200    PENDING_CREATE
00:05:24.883446  00:05:24.964423  0.080977         GET     200    PENDING_CREATE
00:05:25.965787  00:05:26.131992  0.166205         GET     200    PENDING_CREATE
00:05:27.133347  00:05:27.201977  0.068630         GET     200    PENDING_CREATE
00:05:28.203780  00:05:28.269104  0.065324         GET     200    PENDING_CREATE
00:05:29.270380  00:05:29.347469  0.077089         GET     200    PENDING_CREATE
00:05:30.348485  00:05:30.416037  0.067552         GET     200    PENDING_CREATE
00:05:31.423178  00:05:31.508824  0.085646         GET     200    PENDING_CREATE
00:05:32.509992  00:05:32.575154  0.065162         GET     200    PENDING_CREATE
00:05:33.576427  00:05:33.651599  0.075172         GET     200    PENDING_CREATE
00:05:34.651851  00:05:34.720292  0.068441         GET     200    PENDING_CREATE
00:05:35.721564  00:05:35.788079  0.066515         GET     200    PENDING_CREATE
00:05:36.788684  00:05:36.861472  0.072788         GET     200    PENDING_CREATE
00:05:37.862746  00:05:37.932415  0.069669         GET     200    PENDING_CREATE
00:05:38.933434  00:05:39.026121  0.092687         GET     200    PENDING_CREATE
00:05:40.027480  00:05:40.116585  0.089105         GET     200    PENDING_CREATE
00:05:41.117846  00:05:41.201305  0.083459         GET     200    PENDING_CREATE
00:05:42.202519  00:05:42.285722  0.083203         GET     200    PENDING_CREATE
00:05:43.286994  00:05:43.413774  0.126780         GET     200    PENDING_CREATE
00:05:44.414047  00:05:44.505642  0.091595         GET     200    PENDING_CREATE
00:05:45.506914  00:05:45.575711  0.068797         GET     200    PENDING_CREATE
00:05:46.576948  00:05:46.643412  0.066464         GET     200    PENDING_CREATE
00:05:47.644666  00:05:47.709866  0.065200         GET     200    PENDING_CREATE
00:05:48.710332  00:05:48.777125  0.066793         GET     200    PENDING_CREATE
00:05:49.778380  00:05:49.849248  0.070868         GET     200    PENDING_CREATE
00:05:50.850507  00:05:50.920404  0.069897         GET     200    PENDING_CREATE
00:05:51.921714  00:05:51.990029  0.068315         GET     200    PENDING_CREATE
00:05:52.991358  00:05:53.059290  0.067932         GET     200    PENDING_CREATE
00:05:54.060844  00:05:54.124478  0.063634         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 61.648522

[localhost] local: gohan client er_physical_interface show --output-format json f3ecf585-5c3b-445a-97a7-d8e124c99e16
{
    "er_physical_interface": {
        "connected_ese_port_id": null,
        "description": "",
        "device_id": "7a35974a-a19f-49e2-b907-ad7fd8692975",
        "id": "f3ecf585-5c3b-445a-97a7-d8e124c99e16",
        "name": "ge-0/0/1",
        "operational_state": "UP",
        "orchestration_state": "CREATE_COMPLETE",
        "status": "ACTIVE",
        "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef"
    }
}

#####################################################
### checking heat-stack (er_physical_interfaces) ####
#####################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/er_physical_interfaces/f3ecf585-5c3b-445a-97a7-d8e124c99e16
[localhost] local: heat stack-show er_physical_interface_f3ecf585-5c3b-445a-97a7-d8e124c99e16
+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                               |
+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                                  |
| creation_time         | 2018-04-16T00:04:53Z                                                                                                                                                                                |
| description           | Physical port template                                                                                                                                                                              |
| disable_rollback      | True                                                                                                                                                                                                |
| id                    | 0d9b9971-ca1a-4e0f-bd30-950dd935a9f4                                                                                                                                                                |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/b3e3095c0a5b4383805efe9cf2a6b5ef/stacks/er_physical_interface_f3ecf585-5c3b-445a-97a7-d8e124c99e16/0d9b9971-ca1a-4e0f-bd30-950dd935a9f4 |
| notification_topics   | []                                                                                                                                                                                                  |
| outputs               | [                                                                                                                                                                                                   |
|                       |   {                                                                                                                                                                                                 |
|                       |     "output_value": "03bc2bdc-e6b0-4ae6-acda-b76a5da84fb6",                                                                                                                                         |
|                       |     "description": "Monitoring Target ID",                                                                                                                                                          |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                                            |
|                       |   },                                                                                                                                                                                                |
|                       |   {                                                                                                                                                                                                 |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/03bc2bdc-e6b0-4ae6-acda-b76a5da84fb6",                                                                |
|                       |     "description": "Monitoring Process Link",                                                                                                                                                       |
|                       |     "output_key": "monitoring_link"                                                                                                                                                                 |
|                       |   }                                                                                                                                                                                                 |
|                       | ]                                                                                                                                                                                                   |
| parameters            | {                                                                                                                                                                                                   |
|                       |   "OS::stack_id": "0d9b9971-ca1a-4e0f-bd30-950dd935a9f4",                                                                                                                                           |
|                       |   "OS::stack_name": "er_physical_interface_f3ecf585-5c3b-445a-97a7-d8e124c99e16",                                                                                                                   |
|                       |   "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef",                                                                                                                                                  |
|                       |   "device_ip": "10.79.5.185",                                                                                                                                                                       |
|                       |   "if_name": "ge-0/0/1",                                                                                                                                                                            |
|                       |   "version": "1",                                                                                                                                                                                   |
|                       |   "gohan_id": "f3ecf585-5c3b-445a-97a7-d8e124c99e16"                                                                                                                                                |
|                       | }                                                                                                                                                                                                   |
| parent                | None                                                                                                                                                                                                |
| stack_name            | er_physical_interface_f3ecf585-5c3b-445a-97a7-d8e124c99e16                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                               |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                                     |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                                 |
| stack_user_project_id | b3e3095c0a5b4383805efe9cf2a6b5ef                                                                                                                                                                    |
| template_description  | Physical port template                                                                                                                                                                              |
| timeout_mins          | 3                                                                                                                                                                                                   |
| updated_time          | None                                                                                                                                                                                                |
+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show er_physical_interface_f3ecf585-5c3b-445a-97a7-d8e124c99e16
description: 'Physical port template

  '
heat_template_version: '2013-05-23'
outputs:
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [interface_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: interface_monitor}
parameters:
  device_ip: {description: Device IP Address, label: Device IP Address, type: string}
  gohan_id: {description: UUID of the ER Physical Interface, label: Gohan resource
      ID, type: string}
  if_name: {description: Name of the ER Physical Interface, label: Interface Name,
    type: string}
  tenant_id: {label: Tenant ID, type: string}
  version: {label: Config version, type: number}
resources:
  interface_monitor:
    properties:
      field_name: interface
      properties:
        community_name: EDGE_ROUTER_COMMUNITY
        device_ip: {get_param: device_ip}
        if_name: {get_param: if_name}
      resource_id: {get_param: gohan_id}
      resource_type: er_physical_interfaces
      syncer_properties:
        etcd:
          status: {key: interface}
      tenant_id: {get_param: tenant_id}
      type: snmp_ports_status
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget

### Create Er Physical Interface ###
name:[ae0], id:[3118d6be-b1cb-472a-805f-7e1ec46aa5e7]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
00:05:56.810059  00:05:56.983640  0.173581        POST     201    PENDING_CREATE
00:05:56.984688  00:05:57.078366  0.093678         GET     200    PENDING_CREATE
00:05:58.079671  00:05:58.144763  0.065092         GET     200    PENDING_CREATE
00:05:59.146024  00:05:59.220328  0.074304         GET     200    PENDING_CREATE
00:06:00.221652  00:06:00.492908  0.271256         GET     200    PENDING_CREATE
00:06:01.494173  00:06:01.561490  0.067317         GET     200    PENDING_CREATE
00:06:02.562919  00:06:02.643588  0.080669         GET     200    PENDING_CREATE
00:06:03.644887  00:06:03.738348  0.093461         GET     200    PENDING_CREATE
00:06:04.739657  00:06:04.823499  0.083842         GET     200    PENDING_CREATE
00:06:05.824074  00:06:05.891082  0.067008         GET     200    PENDING_CREATE
00:06:06.891921  00:06:06.959673  0.067752         GET     200    PENDING_CREATE
00:06:07.961228  00:06:08.045508  0.084280         GET     200    PENDING_CREATE
00:06:09.046273  00:06:09.117214  0.070941         GET     200    PENDING_CREATE
00:06:10.118551  00:06:10.190444  0.071893         GET     200    PENDING_CREATE
00:06:11.192053  00:06:11.275692  0.083639         GET     200    PENDING_CREATE
00:06:12.276527  00:06:12.365537  0.089010         GET     200    PENDING_CREATE
00:06:13.366960  00:06:13.435923  0.068963         GET     200    PENDING_CREATE
00:06:14.436531  00:06:14.505109  0.068578         GET     200    PENDING_CREATE
00:06:15.506350  00:06:15.574136  0.067786         GET     200    PENDING_CREATE
00:06:16.575391  00:06:16.669419  0.094028         GET     200    PENDING_CREATE
00:06:17.670664  00:06:17.735549  0.064885         GET     200    PENDING_CREATE
00:06:18.736788  00:06:18.804115  0.067327         GET     200    PENDING_CREATE
00:06:19.804400  00:06:19.883159  0.078759         GET     200    PENDING_CREATE
00:06:20.884463  00:06:20.952194  0.067731         GET     200    PENDING_CREATE
00:06:21.953311  00:06:22.023203  0.069892         GET     200    PENDING_CREATE
00:06:23.024596  00:06:23.090608  0.066012         GET     200    PENDING_CREATE
00:06:24.091866  00:06:24.159447  0.067581         GET     200    PENDING_CREATE
00:06:25.160742  00:06:25.230727  0.069985         GET     200    PENDING_CREATE
00:06:26.231702  00:06:26.296824  0.065122         GET     200    PENDING_CREATE
00:06:27.298223  00:06:27.365860  0.067637         GET     200    PENDING_CREATE
00:06:28.367138  00:06:28.434417  0.067279         GET     200    PENDING_CREATE
00:06:29.435702  00:06:29.504194  0.068492         GET     200    PENDING_CREATE
00:06:30.504526  00:06:30.570897  0.066371         GET     200    PENDING_CREATE
00:06:31.572141  00:06:31.645172  0.073031         GET     200    PENDING_CREATE
00:06:32.646408  00:06:32.719276  0.072868         GET     200    PENDING_CREATE
00:06:33.720606  00:06:33.789311  0.068705         GET     200    PENDING_CREATE
00:06:34.790567  00:06:34.858121  0.067554         GET     200    PENDING_CREATE
00:06:35.859389  00:06:35.929106  0.069717         GET     200    PENDING_CREATE
00:06:36.930438  00:06:36.997595  0.067157         GET     200    PENDING_CREATE
00:06:37.998908  00:06:38.067017  0.068109         GET     200    PENDING_CREATE
00:06:39.068798  00:06:39.141091  0.072293         GET     200    PENDING_CREATE
00:06:40.142128  00:06:40.207396  0.065268         GET     200    PENDING_CREATE
00:06:41.208525  00:06:41.276332  0.067807         GET     200    PENDING_CREATE
00:06:42.277736  00:06:42.346851  0.069115         GET     200    PENDING_CREATE
00:06:43.348158  00:06:43.416779  0.068621         GET     200    PENDING_CREATE
00:06:44.418428  00:06:44.674589  0.256161         GET     200    PENDING_CREATE
00:06:45.675529  00:06:45.742253  0.066724         GET     200    PENDING_CREATE
00:06:46.743402  00:06:46.822912  0.079510         GET     200    PENDING_CREATE
00:06:47.824190  00:06:47.904968  0.080778         GET     200    PENDING_CREATE
00:06:48.906276  00:06:48.975322  0.069046         GET     200    PENDING_CREATE
00:06:49.976679  00:06:50.044702  0.068023         GET     200    PENDING_CREATE
00:06:51.045973  00:06:51.111505  0.065532         GET     200    PENDING_CREATE
00:06:52.112521  00:06:52.180593  0.068072         GET     200    PENDING_CREATE
00:06:53.181865  00:06:53.248758  0.066893         GET     200    PENDING_CREATE
00:06:54.250029  00:06:54.330225  0.080196         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 57.520166

[localhost] local: gohan client er_physical_interface show --output-format json 3118d6be-b1cb-472a-805f-7e1ec46aa5e7
{
    "er_physical_interface": {
        "connected_ese_port_id": "0078808a-c28e-46e1-887d-8ec65f90c446",
        "description": "",
        "device_id": "7a35974a-a19f-49e2-b907-ad7fd8692975",
        "id": "3118d6be-b1cb-472a-805f-7e1ec46aa5e7",
        "name": "ae0",
        "operational_state": "UP",
        "orchestration_state": "CREATE_COMPLETE",
        "status": "ACTIVE",
        "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef"
    }
}

#####################################################
### checking heat-stack (er_physical_interfaces) ####
#####################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/er_physical_interfaces/3118d6be-b1cb-472a-805f-7e1ec46aa5e7
[localhost] local: heat stack-show er_physical_interface_3118d6be-b1cb-472a-805f-7e1ec46aa5e7
+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                               |
+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                                  |
| creation_time         | 2018-04-16T00:05:57Z                                                                                                                                                                                |
| description           | Physical port template                                                                                                                                                                              |
| disable_rollback      | True                                                                                                                                                                                                |
| id                    | 241287b8-c304-460c-9568-ac6ea69bf333                                                                                                                                                                |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/b3e3095c0a5b4383805efe9cf2a6b5ef/stacks/er_physical_interface_3118d6be-b1cb-472a-805f-7e1ec46aa5e7/241287b8-c304-460c-9568-ac6ea69bf333 |
| notification_topics   | []                                                                                                                                                                                                  |
| outputs               | [                                                                                                                                                                                                   |
|                       |   {                                                                                                                                                                                                 |
|                       |     "output_value": "e848bb97-1643-4167-9865-9a8b3b30b66f",                                                                                                                                         |
|                       |     "description": "Monitoring Target ID",                                                                                                                                                          |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                                            |
|                       |   },                                                                                                                                                                                                |
|                       |   {                                                                                                                                                                                                 |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/e848bb97-1643-4167-9865-9a8b3b30b66f",                                                                |
|                       |     "description": "Monitoring Process Link",                                                                                                                                                       |
|                       |     "output_key": "monitoring_link"                                                                                                                                                                 |
|                       |   }                                                                                                                                                                                                 |
|                       | ]                                                                                                                                                                                                   |
| parameters            | {                                                                                                                                                                                                   |
|                       |   "OS::stack_id": "241287b8-c304-460c-9568-ac6ea69bf333",                                                                                                                                           |
|                       |   "OS::stack_name": "er_physical_interface_3118d6be-b1cb-472a-805f-7e1ec46aa5e7",                                                                                                                   |
|                       |   "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef",                                                                                                                                                  |
|                       |   "device_ip": "10.79.5.185",                                                                                                                                                                       |
|                       |   "if_name": "ae0",                                                                                                                                                                                 |
|                       |   "version": "1",                                                                                                                                                                                   |
|                       |   "gohan_id": "3118d6be-b1cb-472a-805f-7e1ec46aa5e7"                                                                                                                                                |
|                       | }                                                                                                                                                                                                   |
| parent                | None                                                                                                                                                                                                |
| stack_name            | er_physical_interface_3118d6be-b1cb-472a-805f-7e1ec46aa5e7                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                               |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                                     |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                                 |
| stack_user_project_id | b3e3095c0a5b4383805efe9cf2a6b5ef                                                                                                                                                                    |
| template_description  | Physical port template                                                                                                                                                                              |
| timeout_mins          | 3                                                                                                                                                                                                   |
| updated_time          | None                                                                                                                                                                                                |
+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show er_physical_interface_3118d6be-b1cb-472a-805f-7e1ec46aa5e7
description: 'Physical port template

  '
heat_template_version: '2013-05-23'
outputs:
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [interface_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: interface_monitor}
parameters:
  device_ip: {description: Device IP Address, label: Device IP Address, type: string}
  gohan_id: {description: UUID of the ER Physical Interface, label: Gohan resource
      ID, type: string}
  if_name: {description: Name of the ER Physical Interface, label: Interface Name,
    type: string}
  tenant_id: {label: Tenant ID, type: string}
  version: {label: Config version, type: number}
resources:
  interface_monitor:
    properties:
      field_name: interface
      properties:
        community_name: EDGE_ROUTER_COMMUNITY
        device_ip: {get_param: device_ip}
        if_name: {get_param: if_name}
      resource_id: {get_param: gohan_id}
      resource_type: er_physical_interfaces
      syncer_properties:
        etcd:
          status: {key: interface}
      tenant_id: {get_param: tenant_id}
      type: snmp_ports_status
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget

### Create Er Physical Interface ###
name:[ae0], id:[c8e2d558-02ee-4bf3-ba5b-958821a21043]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
00:06:56.977118  00:06:57.149024  0.171906        POST     201    PENDING_CREATE
00:06:57.149232  00:06:57.240144  0.090912         GET     200    PENDING_CREATE
00:06:58.241362  00:06:58.323466  0.082104         GET     200    PENDING_CREATE
00:06:59.324559  00:06:59.404263  0.079704         GET     200    PENDING_CREATE
00:07:00.405497  00:07:00.480571  0.075074         GET     200    PENDING_CREATE
00:07:01.481438  00:07:01.555240  0.073802         GET     200    PENDING_CREATE
00:07:02.556480  00:07:02.623294  0.066814         GET     200    PENDING_CREATE
00:07:03.624552  00:07:03.699584  0.075032         GET     200    PENDING_CREATE
00:07:04.700835  00:07:04.768516  0.067681         GET     200    PENDING_CREATE
00:07:05.769665  00:07:05.843366  0.073701         GET     200    PENDING_CREATE
00:07:06.843764  00:07:06.909856  0.066092         GET     200    PENDING_CREATE
00:07:07.910611  00:07:07.975566  0.064955         GET     200    PENDING_CREATE
00:07:08.976811  00:07:09.043573  0.066762         GET     200    PENDING_CREATE
00:07:10.044465  00:07:10.109835  0.065370         GET     200    PENDING_CREATE
00:07:11.110564  00:07:11.179859  0.069295         GET     200    PENDING_CREATE
00:07:12.181104  00:07:12.248191  0.067087         GET     200    PENDING_CREATE
00:07:13.249432  00:07:13.317957  0.068525         GET     200    PENDING_CREATE
00:07:14.319217  00:07:14.394241  0.075024         GET     200    PENDING_CREATE
00:07:15.395492  00:07:15.462158  0.066666         GET     200    PENDING_CREATE
00:07:16.463407  00:07:16.531274  0.067867         GET     200    PENDING_CREATE
00:07:17.532530  00:07:17.610833  0.078303         GET     200    PENDING_CREATE
00:07:18.612035  00:07:18.684686  0.072651         GET     200    PENDING_CREATE
00:07:19.685928  00:07:19.754522  0.068594         GET     200    PENDING_CREATE
00:07:20.755845  00:07:20.823759  0.067914         GET     200    PENDING_CREATE
00:07:21.824767  00:07:22.009215  0.184448         GET     200    PENDING_CREATE
00:07:23.010391  00:07:23.077704  0.067313         GET     200    PENDING_CREATE
00:07:24.078985  00:07:24.151778  0.072793         GET     200    PENDING_CREATE
00:07:25.153061  00:07:25.220204  0.067143         GET     200    PENDING_CREATE
00:07:26.220553  00:07:26.289887  0.069334         GET     200    PENDING_CREATE
00:07:27.290693  00:07:27.358739  0.068046         GET     200    PENDING_CREATE
00:07:28.360061  00:07:28.444426  0.084365         GET     200    PENDING_CREATE
00:07:29.445891  00:07:29.513324  0.067433         GET     200    PENDING_CREATE
00:07:30.514672  00:07:30.588153  0.073481         GET     200    PENDING_CREATE
00:07:31.589470  00:07:31.657227  0.067757         GET     200    PENDING_CREATE
00:07:32.658553  00:07:32.725269  0.066716         GET     200    PENDING_CREATE
00:07:33.725951  00:07:33.809331  0.083380         GET     200    PENDING_CREATE
00:07:34.810557  00:07:34.885625  0.075068         GET     200    PENDING_CREATE
00:07:35.886451  00:07:35.951950  0.065499         GET     200    PENDING_CREATE
00:07:36.953193  00:07:37.020293  0.067100         GET     200    PENDING_CREATE
00:07:38.020871  00:07:38.086526  0.065655         GET     200    PENDING_CREATE
00:07:39.087859  00:07:39.154497  0.066638         GET     200    PENDING_CREATE
00:07:40.156024  00:07:40.224603  0.068579         GET     200    PENDING_CREATE
00:07:41.225626  00:07:41.292912  0.067286         GET     200    PENDING_CREATE
00:07:42.294219  00:07:42.359075  0.064856         GET     200    PENDING_CREATE
00:07:43.360231  00:07:43.438901  0.078670         GET     200    PENDING_CREATE
00:07:44.440350  00:07:44.507006  0.066656         GET     200    PENDING_CREATE
00:07:45.508382  00:07:45.573719  0.065337         GET     200    PENDING_CREATE
00:07:46.575007  00:07:46.641286  0.066279         GET     200    PENDING_CREATE
00:07:47.642592  00:07:47.709569  0.066977         GET     200    PENDING_CREATE
00:07:48.710414  00:07:48.773622  0.063208         GET     200    PENDING_CREATE
00:07:49.774255  00:07:49.854476  0.080221         GET     200    PENDING_CREATE
00:07:50.855856  00:07:50.921798  0.065942         GET     200    PENDING_CREATE
00:07:51.923091  00:07:51.995430  0.072339         GET     200    PENDING_CREATE
00:07:52.996746  00:07:53.063002  0.066256         GET     200    PENDING_CREATE
00:07:54.064261  00:07:54.130242  0.065981         GET     200    PENDING_CREATE
00:07:55.131485  00:07:55.200294  0.068809         GET     200    PENDING_CREATE
00:07:56.201561  00:07:56.268578  0.067017         GET     200    PENDING_CREATE
00:07:57.269682  00:07:57.337290  0.067608         GET     200    PENDING_CREATE
00:07:58.338613  00:07:58.408730  0.070117         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 61.431612

[localhost] local: gohan client er_physical_interface show --output-format json c8e2d558-02ee-4bf3-ba5b-958821a21043
{
    "er_physical_interface": {
        "connected_ese_port_id": "a6e70af1-386b-4d79-943f-6f44e87f95b3",
        "description": "",
        "device_id": "b7e6d8ad-5377-4380-bbb4-1a62566cbd6d",
        "id": "c8e2d558-02ee-4bf3-ba5b-958821a21043",
        "name": "ae0",
        "operational_state": "UP",
        "orchestration_state": "CREATE_COMPLETE",
        "status": "ACTIVE",
        "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef"
    }
}

#####################################################
### checking heat-stack (er_physical_interfaces) ####
#####################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/er_physical_interfaces/c8e2d558-02ee-4bf3-ba5b-958821a21043
[localhost] local: heat stack-show er_physical_interface_c8e2d558-02ee-4bf3-ba5b-958821a21043
+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                               |
+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                                  |
| creation_time         | 2018-04-16T00:06:57Z                                                                                                                                                                                |
| description           | Physical port template                                                                                                                                                                              |
| disable_rollback      | True                                                                                                                                                                                                |
| id                    | b9820e87-822c-4c9e-a785-987a9a71a94c                                                                                                                                                                |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/b3e3095c0a5b4383805efe9cf2a6b5ef/stacks/er_physical_interface_c8e2d558-02ee-4bf3-ba5b-958821a21043/b9820e87-822c-4c9e-a785-987a9a71a94c |
| notification_topics   | []                                                                                                                                                                                                  |
| outputs               | [                                                                                                                                                                                                   |
|                       |   {                                                                                                                                                                                                 |
|                       |     "output_value": "81b1e3e1-1182-4431-9c0f-9e430ec29a09",                                                                                                                                         |
|                       |     "description": "Monitoring Target ID",                                                                                                                                                          |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                                            |
|                       |   },                                                                                                                                                                                                |
|                       |   {                                                                                                                                                                                                 |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/81b1e3e1-1182-4431-9c0f-9e430ec29a09",                                                                |
|                       |     "description": "Monitoring Process Link",                                                                                                                                                       |
|                       |     "output_key": "monitoring_link"                                                                                                                                                                 |
|                       |   }                                                                                                                                                                                                 |
|                       | ]                                                                                                                                                                                                   |
| parameters            | {                                                                                                                                                                                                   |
|                       |   "OS::stack_id": "b9820e87-822c-4c9e-a785-987a9a71a94c",                                                                                                                                           |
|                       |   "OS::stack_name": "er_physical_interface_c8e2d558-02ee-4bf3-ba5b-958821a21043",                                                                                                                   |
|                       |   "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef",                                                                                                                                                  |
|                       |   "device_ip": "10.79.5.184",                                                                                                                                                                       |
|                       |   "if_name": "ae0",                                                                                                                                                                                 |
|                       |   "version": "1",                                                                                                                                                                                   |
|                       |   "gohan_id": "c8e2d558-02ee-4bf3-ba5b-958821a21043"                                                                                                                                                |
|                       | }                                                                                                                                                                                                   |
| parent                | None                                                                                                                                                                                                |
| stack_name            | er_physical_interface_c8e2d558-02ee-4bf3-ba5b-958821a21043                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                               |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                                     |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                                 |
| stack_user_project_id | b3e3095c0a5b4383805efe9cf2a6b5ef                                                                                                                                                                    |
| template_description  | Physical port template                                                                                                                                                                              |
| timeout_mins          | 3                                                                                                                                                                                                   |
| updated_time          | None                                                                                                                                                                                                |
+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show er_physical_interface_c8e2d558-02ee-4bf3-ba5b-958821a21043
description: 'Physical port template

  '
heat_template_version: '2013-05-23'
outputs:
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [interface_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: interface_monitor}
parameters:
  device_ip: {description: Device IP Address, label: Device IP Address, type: string}
  gohan_id: {description: UUID of the ER Physical Interface, label: Gohan resource
      ID, type: string}
  if_name: {description: Name of the ER Physical Interface, label: Interface Name,
    type: string}
  tenant_id: {label: Tenant ID, type: string}
  version: {label: Config version, type: number}
resources:
  interface_monitor:
    properties:
      field_name: interface
      properties:
        community_name: EDGE_ROUTER_COMMUNITY
        device_ip: {get_param: device_ip}
        if_name: {get_param: if_name}
      resource_id: {get_param: gohan_id}
      resource_type: er_physical_interfaces
      syncer_properties:
        etcd:
          status: {key: interface}
      tenant_id: {get_param: tenant_id}
      type: snmp_ports_status
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget

### Create Er Physical Interface ###
name:[ge-0/0/1], id:[2bc8e40d-ab01-4738-a4aa-e69d8fd30688]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
00:08:01.241777  00:08:01.380998  0.139221        POST     201    PENDING_CREATE
00:08:01.381192  00:08:01.479194  0.098002         GET     200    PENDING_CREATE
00:08:02.480417  00:08:02.547346  0.066929         GET     200    PENDING_CREATE
00:08:03.548524  00:08:03.621493  0.072969         GET     200    PENDING_CREATE
00:08:04.622721  00:08:04.691317  0.068596         GET     200    PENDING_CREATE
00:08:05.692560  00:08:05.765422  0.072862         GET     200    PENDING_CREATE
00:08:06.766674  00:08:06.844295  0.077621         GET     200    PENDING_CREATE
00:08:07.845587  00:08:07.911126  0.065539         GET     200    PENDING_CREATE
00:08:08.912382  00:08:08.977394  0.065012         GET     200    PENDING_CREATE
00:08:09.978661  00:08:10.048907  0.070246         GET     200    PENDING_CREATE
00:08:11.050160  00:08:11.116500  0.066340         GET     200    PENDING_CREATE
00:08:12.117757  00:08:12.187084  0.069327         GET     200    PENDING_CREATE
00:08:13.188381  00:08:13.262549  0.074168         GET     200    PENDING_CREATE
00:08:14.263831  00:08:14.331062  0.067231         GET     200    PENDING_CREATE
00:08:15.332325  00:08:15.399284  0.066959         GET     200    PENDING_CREATE
00:08:16.400596  00:08:16.470676  0.070080         GET     200    PENDING_CREATE
00:08:17.471925  00:08:17.538568  0.066643         GET     200    PENDING_CREATE
00:08:18.539899  00:08:18.608736  0.068837         GET     200    PENDING_CREATE
00:08:19.610190  00:08:19.690832  0.080642         GET     200    PENDING_CREATE
00:08:20.691452  00:08:20.759194  0.067742         GET     200    PENDING_CREATE
00:08:21.760479  00:08:21.834344  0.073865         GET     200    PENDING_CREATE
00:08:22.836036  00:08:22.909498  0.073462         GET     200    PENDING_CREATE
00:08:23.910418  00:08:23.979859  0.069441         GET     200    PENDING_CREATE
00:08:24.981174  00:08:25.046276  0.065102         GET     200    PENDING_CREATE
00:08:26.046638  00:08:26.111052  0.064414         GET     200    PENDING_CREATE
00:08:27.112471  00:08:27.179668  0.067197         GET     200    PENDING_CREATE
00:08:28.180982  00:08:28.247566  0.066584         GET     200    PENDING_CREATE
00:08:29.248992  00:08:29.314864  0.065872         GET     200    PENDING_CREATE
00:08:30.316263  00:08:30.383990  0.067727         GET     200    PENDING_CREATE
00:08:31.385290  00:08:31.452278  0.066988         GET     200    PENDING_CREATE
00:08:32.453589  00:08:32.524520  0.070931         GET     200    PENDING_CREATE
00:08:33.525830  00:08:33.594443  0.068613         GET     200    PENDING_CREATE
00:08:34.595970  00:08:34.669759  0.073789         GET     200    PENDING_CREATE
00:08:35.671002  00:08:35.739990  0.068988         GET     200    PENDING_CREATE
00:08:36.740575  00:08:36.805927  0.065352         GET     200    PENDING_CREATE
00:08:37.807203  00:08:37.875089  0.067886         GET     200    PENDING_CREATE
00:08:38.876350  00:08:38.948228  0.071878         GET     200    PENDING_CREATE
00:08:39.948807  00:08:40.018493  0.069686         GET     200    PENDING_CREATE
00:08:41.019756  00:08:41.145571  0.125815         GET     200    PENDING_CREATE
00:08:42.146836  00:08:42.217986  0.071150         GET     200    PENDING_CREATE
00:08:43.219253  00:08:43.287367  0.068114         GET     200    PENDING_CREATE
00:08:44.288529  00:08:44.354034  0.065505         GET     200    PENDING_CREATE
00:08:45.355183  00:08:45.427923  0.072740         GET     200    PENDING_CREATE
00:08:46.429738  00:08:46.500866  0.071128         GET     200    PENDING_CREATE
00:08:47.501316  00:08:47.572655  0.071339         GET     200    PENDING_CREATE
00:08:48.573054  00:08:48.643585  0.070531         GET     200    PENDING_CREATE
00:08:49.644495  00:08:49.714180  0.069685         GET     200    PENDING_CREATE
00:08:50.715420  00:08:50.781987  0.066567         GET     200    PENDING_CREATE
00:08:51.782874  00:08:51.920664  0.137790         GET     200    PENDING_CREATE
00:08:52.921907  00:08:52.988824  0.066917         GET     200    PENDING_CREATE
00:08:53.990022  00:08:54.056509  0.066487         GET     200    PENDING_CREATE
00:08:55.057758  00:08:55.124416  0.066658         GET     200    PENDING_CREATE
00:08:56.125750  00:08:56.192203  0.066453         GET     200    PENDING_CREATE
00:08:57.193010  00:08:57.261563  0.068553         GET     200    PENDING_CREATE
00:08:58.262791  00:08:58.336892  0.074101         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 57.095115

[localhost] local: gohan client er_physical_interface show --output-format json 2bc8e40d-ab01-4738-a4aa-e69d8fd30688
{
    "er_physical_interface": {
        "connected_ese_port_id": null,
        "description": "",
        "device_id": "b7e6d8ad-5377-4380-bbb4-1a62566cbd6d",
        "id": "2bc8e40d-ab01-4738-a4aa-e69d8fd30688",
        "name": "ge-0/0/1",
        "operational_state": "UP",
        "orchestration_state": "CREATE_COMPLETE",
        "status": "ACTIVE",
        "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef"
    }
}

#####################################################
### checking heat-stack (er_physical_interfaces) ####
#####################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/er_physical_interfaces/2bc8e40d-ab01-4738-a4aa-e69d8fd30688
[localhost] local: heat stack-show er_physical_interface_2bc8e40d-ab01-4738-a4aa-e69d8fd30688
+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                               |
+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                                  |
| creation_time         | 2018-04-16T00:08:02Z                                                                                                                                                                                |
| description           | Physical port template                                                                                                                                                                              |
| disable_rollback      | True                                                                                                                                                                                                |
| id                    | 868bb9da-99b7-4030-91bc-1fc94821b0f5                                                                                                                                                                |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/b3e3095c0a5b4383805efe9cf2a6b5ef/stacks/er_physical_interface_2bc8e40d-ab01-4738-a4aa-e69d8fd30688/868bb9da-99b7-4030-91bc-1fc94821b0f5 |
| notification_topics   | []                                                                                                                                                                                                  |
| outputs               | [                                                                                                                                                                                                   |
|                       |   {                                                                                                                                                                                                 |
|                       |     "output_value": "d80c91c1-a82c-4742-b571-03c17cbeff1c",                                                                                                                                         |
|                       |     "description": "Monitoring Target ID",                                                                                                                                                          |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                                            |
|                       |   },                                                                                                                                                                                                |
|                       |   {                                                                                                                                                                                                 |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/d80c91c1-a82c-4742-b571-03c17cbeff1c",                                                                |
|                       |     "description": "Monitoring Process Link",                                                                                                                                                       |
|                       |     "output_key": "monitoring_link"                                                                                                                                                                 |
|                       |   }                                                                                                                                                                                                 |
|                       | ]                                                                                                                                                                                                   |
| parameters            | {                                                                                                                                                                                                   |
|                       |   "OS::stack_id": "868bb9da-99b7-4030-91bc-1fc94821b0f5",                                                                                                                                           |
|                       |   "OS::stack_name": "er_physical_interface_2bc8e40d-ab01-4738-a4aa-e69d8fd30688",                                                                                                                   |
|                       |   "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef",                                                                                                                                                  |
|                       |   "device_ip": "10.79.5.184",                                                                                                                                                                       |
|                       |   "if_name": "ge-0/0/1",                                                                                                                                                                            |
|                       |   "version": "1",                                                                                                                                                                                   |
|                       |   "gohan_id": "2bc8e40d-ab01-4738-a4aa-e69d8fd30688"                                                                                                                                                |
|                       | }                                                                                                                                                                                                   |
| parent                | None                                                                                                                                                                                                |
| stack_name            | er_physical_interface_2bc8e40d-ab01-4738-a4aa-e69d8fd30688                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                               |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                                     |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                                 |
| stack_user_project_id | b3e3095c0a5b4383805efe9cf2a6b5ef                                                                                                                                                                    |
| template_description  | Physical port template                                                                                                                                                                              |
| timeout_mins          | 3                                                                                                                                                                                                   |
| updated_time          | None                                                                                                                                                                                                |
+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show er_physical_interface_2bc8e40d-ab01-4738-a4aa-e69d8fd30688
description: 'Physical port template

  '
heat_template_version: '2013-05-23'
outputs:
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [interface_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: interface_monitor}
parameters:
  device_ip: {description: Device IP Address, label: Device IP Address, type: string}
  gohan_id: {description: UUID of the ER Physical Interface, label: Gohan resource
      ID, type: string}
  if_name: {description: Name of the ER Physical Interface, label: Interface Name,
    type: string}
  tenant_id: {label: Tenant ID, type: string}
  version: {label: Config version, type: number}
resources:
  interface_monitor:
    properties:
      field_name: interface
      properties:
        community_name: EDGE_ROUTER_COMMUNITY
        device_ip: {get_param: device_ip}
        if_name: {get_param: if_name}
      resource_id: {get_param: gohan_id}
      resource_type: er_physical_interfaces
      syncer_properties:
        etcd:
          status: {key: interface}
      tenant_id: {get_param: tenant_id}
      type: snmp_ports_status
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget

### Create Ha Interface ###
name:[sample-ha-router-uplink], id:[c50006de-8afe-48fc-b7b8-37dc7617764a]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
00:09:01.031169  00:09:01.263271  0.232102        POST     201    PENDING_CREATE
00:09:01.264868  00:09:01.344953  0.080085         GET     200    PENDING_CREATE
00:09:02.346615  00:09:02.421725  0.075110         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 1.390556

[localhost] local: gohan client ha_interface show --output-format json c50006de-8afe-48fc-b7b8-37dc7617764a
{
    "ha_interface": {
        "admin_state_up": true,
        "available_be_bandwidth": 0,
        "available_ga_bandwidth": 0,
        "description": "",
        "gateway_instances_count": 0,
        "ha_router_id": "8c233862-895f-4cca-b377-c353e733c768",
        "id": "c50006de-8afe-48fc-b7b8-37dc7617764a",
        "link_type": "uplink",
        "maximum_be_bandwidth": 0,
        "maximum_ga_bandwidth": 0,
        "name": "sample-ha-router-uplink",
        "primary_interface_id": "f3ecf585-5c3b-445a-97a7-d8e124c99e16",
        "restricted_vlans": "",
        "secondary_interface_id": "2bc8e40d-ab01-4738-a4aa-e69d8fd30688",
        "status": "ACTIVE",
        "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef",
        "vlan_ids_available": 4093,
        "vlan_pool_state": "gAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAE="
    }
}

### Create Ha Interface ###
name:[sample-ha-router-downlink], id:[66bdfe91-b9e6-42f2-8942-bb4d4a67d5ba]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
00:09:03.011845  00:09:03.568667  0.556822        POST     201    PENDING_CREATE
00:09:03.568860  00:09:03.649366  0.080506         GET     200    PENDING_CREATE
00:09:04.650374  00:09:04.728500  0.078126         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 1.716655

[localhost] local: gohan client ha_interface show --output-format json 66bdfe91-b9e6-42f2-8942-bb4d4a67d5ba
{
    "ha_interface": {
        "admin_state_up": true,
        "available_be_bandwidth": 500,
        "available_ga_bandwidth": 500,
        "description": "",
        "gateway_instances_count": 0,
        "ha_router_id": "8c233862-895f-4cca-b377-c353e733c768",
        "id": "66bdfe91-b9e6-42f2-8942-bb4d4a67d5ba",
        "link_type": "downlink",
        "maximum_be_bandwidth": 500,
        "maximum_ga_bandwidth": 500,
        "name": "sample-ha-router-downlink",
        "primary_interface_id": "3118d6be-b1cb-472a-805f-7e1ec46aa5e7",
        "restricted_vlans": "0-1024,4094",
        "secondary_interface_id": "c8e2d558-02ee-4bf3-ba5b-958821a21043",
        "status": "ACTIVE",
        "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef",
        "vlan_ids_available": 3069,
        "vlan_pool_state": "//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAM="
    }
}

### Create Vpn Service ###
name:[sample-vpn-service], id:[c8d57f7e-b439-475e-a6fb-ee2594390177]
-----------------------------------------------------------------
http_request     http_response    response_time   method   code
-----------------------------------------------------------------
00:09:05.299831  00:09:05.416711  0.116880        POST     201
00:09:05.417990  00:09:05.860207  0.442217         GET     200
-----------------------------------------------------------------
Turn Around Time : 0.560376

[localhost] local: gohan client vpn_service show --output-format json c8d57f7e-b439-475e-a6fb-ee2594390177
{
    "vpn_service": {
        "be_forwarding_class": "FC-VPN-BE",
        "default_static_routes_per_gateway": 32,
        "description": "",
        "downlink_interfaces": [
            "66bdfe91-b9e6-42f2-8942-bb4d4a67d5ba"
        ],
        "ga_forwarding_class": "FC-VPN-GA",
        "id": "c8d57f7e-b439-475e-a6fb-ee2594390177",
        "name": "sample-vpn-service",
        "neighbour_prefix": "BGP-VIRTUAL-ROUTER-PEERS",
        "primary_downlink_vrrp_config_group": "VPNGW1-VRRP",
        "primary_ebgp_config_group": "VPNGW1-RI-EBGP",
        "primary_ibgp_config_group": "VPNGW1-RI-IBGP",
        "secondary_downlink_vrrp_config_group": "VPNGW2-VRRP",
        "secondary_ebgp_config_group": "VPNGW2-RI-EBGP",
        "secondary_ibgp_config_group": "VPNGW2-RI-IBGP",
        "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef",
        "uplink_interfaces": [
            "c50006de-8afe-48fc-b7b8-37dc7617764a"
        ],
        "vrf_config": null,
        "zone": "jp1-zone1"
    }
}

### Create Vpn Qos Option ###
name:[10Mbps-Guaranteed], id:[d35a3c95-8647-44d7-b32f-405b77d77f51]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
00:09:06.460663  00:09:06.653594  0.192931        POST     201    PENDING_CREATE
00:09:06.654113  00:09:06.732561  0.078448         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 0.271898

[localhost] local: gohan client qos_option show --output-format json d35a3c95-8647-44d7-b32f-405b77d77f51
{
    "qos_option": {
        "aws_service_id": null,
        "azure_service_id": null,
        "bandwidth": "10",
        "charge_type": null,
        "description": "",
        "gcp_service_id": null,
        "ha_router_id": "8c233862-895f-4cca-b377-c353e733c768",
        "id": "d35a3c95-8647-44d7-b32f-405b77d77f51",
        "incoming_policer_config": "action { loss-priority high then discard; } single-rate { color-blind; committed-information-rate 10m; committed-burst-size 187500000; excess-burst-size 187500000; }",
        "incoming_policer_name": "10M-GA-UP-VPN",
        "interdc_service_id": null,
        "internet_service_id": null,
        "name": "10Mbps-Guaranteed",
        "orchestration_state": "SYNC_COMPLETE",
        "outgoing_policer_config": "if-exceeding { bandwidth-limit 10m; burst-size-limit 187500000; } then discard;",
        "outgoing_policer_name": "10M-GA-DOWN-VPN",
        "qos_type": "guarantee",
        "service_type": "vpn",
        "status": "ACTIVE",
        "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef",
        "vpn_service_id": "c8d57f7e-b439-475e-a6fb-ee2594390177"
    }
}

### Create Vpn Gateway ###
name:[sample-vpn-gateway], id:[b1da850c-3344-4de2-aa18-d96a30b54f69]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
00:09:17.305303  00:09:17.695313  0.390010        POST     201    PENDING_CREATE
00:09:17.695607  00:09:17.788862  0.093255         GET     200    PENDING_CREATE
00:09:18.790152  00:09:18.862410  0.072258         GET     200    PENDING_CREATE
00:09:19.863310  00:09:19.935720  0.072410         GET     200    PENDING_CREATE
00:09:20.936505  00:09:21.040994  0.104489         GET     200    PENDING_CREATE
00:09:22.042199  00:09:22.118037  0.075838         GET     200    PENDING_CREATE
00:09:23.118576  00:09:23.197520  0.078944         GET     200    PENDING_CREATE
00:09:24.198801  00:09:24.277312  0.078511         GET     200    PENDING_CREATE
00:09:25.278362  00:09:25.352213  0.073851         GET     200    PENDING_CREATE
00:09:26.353456  00:09:26.425238  0.071782         GET     200    PENDING_CREATE
00:09:27.426444  00:09:27.497065  0.070621         GET     200    PENDING_CREATE
00:09:28.498292  00:09:28.569892  0.071600         GET     200    PENDING_CREATE
00:09:29.570429  00:09:29.643803  0.073374         GET     200    PENDING_CREATE
00:09:30.644524  00:09:30.718081  0.073557         GET     200    PENDING_CREATE
00:09:31.719324  00:09:31.792122  0.072798         GET     200    PENDING_CREATE
00:09:32.793365  00:09:32.871024  0.077659         GET     200    PENDING_CREATE
00:09:33.872262  00:09:33.948498  0.076236         GET     200    PENDING_CREATE
00:09:34.949586  00:09:35.019554  0.069968         GET     200    PENDING_CREATE
00:09:36.020499  00:09:36.092331  0.071832         GET     200    PENDING_CREATE
00:09:37.093588  00:09:37.169742  0.076154         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 19.864439

[localhost] local: gohan client vpn_gateway show --output-format json b1da850c-3344-4de2-aa18-d96a30b54f69
{
    "vpn_gateway": {
        "connected_vpn_interface": "",
        "description": "this resource is vpn-gateway",
        "downlink_interface_id": "66bdfe91-b9e6-42f2-8942-bb4d4a67d5ba",
        "downlink_vlan_id": "1025",
        "id": "b1da850c-3344-4de2-aa18-d96a30b54f69",
        "local_as_number": "65101",
        "maximum_static_routes": 32,
        "name": "sample-vpn-gateway",
        "orchestration_state": "CREATE_COMPLETE",
        "primary_logical_downlink_interface_name": "ae0.1025",
        "primary_logical_uplink_interface_name": "ge-0/0/1.122",
        "qos_option_id": "d35a3c95-8647-44d7-b32f-405b77d77f51",
        "secondary_logical_downlink_interface_name": "ae0.1025",
        "secondary_logical_uplink_interface_name": "ge-0/0/1.122",
        "status": "ACTIVE",
        "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef",
        "uplink_interface_id": "c50006de-8afe-48fc-b7b8-37dc7617764a",
        "uplink_vlan_id": "122",
        "vpn_service_id": "c8d57f7e-b439-475e-a6fb-ee2594390177",
        "vrf_name": "vrf_gw_sample-ha-router-downlink_1025"
    }
}

[localhost] local: gohan client resource_mapping list --output-format json
Command not found

###########################################
### checking heat-stack (vpn_gateways) ####
###########################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/vpn_gateways/b1da850c-3344-4de2-aa18-d96a30b54f69
[localhost] local: heat stack-show vpn_gateway_b1da850c-3344-4de2-aa18-d96a30b54f69
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                     |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                        |
| creation_time         | 2018-04-16T00:09:18Z                                                                                                                                                                      |
| description           | VPN Gateway                                                                                                                                                                               |
| disable_rollback      | True                                                                                                                                                                                      |
| id                    | 63a31186-fe5f-4db2-84ab-6fb47054cb3e                                                                                                                                                      |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/b3e3095c0a5b4383805efe9cf2a6b5ef/stacks/vpn_gateway_b1da850c-3344-4de2-aa18-d96a30b54f69/63a31186-fe5f-4db2-84ab-6fb47054cb3e |
| notification_topics   | []                                                                                                                                                                                        |
| outputs               | []                                                                                                                                                                                        |
| parameters            | {                                                                                                                                                                                         |
|                       |   "primary_device_logical_uplink_interface": "ge-0/0/1.122",                                                                                                                              |
|                       |   "primary_device_logical_downlink_interface": "ae0.1025",                                                                                                                                |
|                       |   "primary_device_password": "******",                                                                                                                                                    |
|                       |   "output_filter_name": "FILTER_10M-GA-DOWN-VPN",                                                                                                                                         |
|                       |   "primary_device_ip": "10.79.5.185",                                                                                                                                                     |
|                       |   "secondary_device_physical_downlink_interface": "ae0",                                                                                                                                  |
|                       |   "secondary_device_username": "esi",                                                                                                                                                     |
|                       |   "primary_device_physical_uplink_interface": "ge-0/0/1",                                                                                                                                 |
|                       |   "secondary_device_logical_uplink_interface": "ge-0/0/1.122",                                                                                                                            |
|                       |   "downlink_vlan": "1025",                                                                                                                                                                |
|                       |   "OS::stack_name": "vpn_gateway_b1da850c-3344-4de2-aa18-d96a30b54f69",                                                                                                                   |
|                       |   "secondary_device_logical_downlink_interface": "ae0.1025",                                                                                                                              |
|                       |   "input_filter_name": "FILTER_10M-GA-UP-VPN",                                                                                                                                            |
|                       |   "uplink_vlan": "122",                                                                                                                                                                   |
|                       |   "OS::stack_id": "63a31186-fe5f-4db2-84ab-6fb47054cb3e",                                                                                                                                 |
|                       |   "secondary_device_port": "830",                                                                                                                                                         |
|                       |   "primary_downlink_vrrp_config_group": "VPNGW1-VRRP",                                                                                                                                    |
|                       |   "secondary_device_password": "******",                                                                                                                                                  |
|                       |   "vrf_name": "vrf_gw_sample-ha-router-downlink_1025",                                                                                                                                    |
|                       |   "primary_device_username": "esi",                                                                                                                                                       |
|                       |   "primary_device_physical_downlink_interface": "ae0",                                                                                                                                    |
|                       |   "secondary_downlink_vrrp_config_group": "VPNGW2-VRRP",                                                                                                                                  |
|                       |   "primary_device_port": "830",                                                                                                                                                           |
|                       |   "secondary_device_physical_uplink_interface": "ge-0/0/1",                                                                                                                               |
|                       |   "secondary_device_ip": "10.79.5.184"                                                                                                                                                    |
|                       | }                                                                                                                                                                                         |
| parent                | None                                                                                                                                                                                      |
| stack_name            | vpn_gateway_b1da850c-3344-4de2-aa18-d96a30b54f69                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                     |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                           |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                       |
| stack_user_project_id | b3e3095c0a5b4383805efe9cf2a6b5ef                                                                                                                                                          |
| template_description  | VPN Gateway                                                                                                                                                                               |
| timeout_mins          | 60                                                                                                                                                                                        |
| updated_time          | None                                                                                                                                                                                      |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show vpn_gateway_b1da850c-3344-4de2-aa18-d96a30b54f69
description: 'VPN Gateway

  '
heat_template_version: '2013-05-23'
parameters:
  downlink_vlan: {description: vlan tag used by logical downlink interface, label: VLAN
      ID, type: string}
  input_filter_name: {description: Name for policer used for input, label: Input filter
      name, type: string}
  output_filter_name: {description: Name for policer used for output, label: Output
      filter name, type: string}
  primary_device_ip: {description: Ip address that will be used to establish ssh connection
      to the Primary Device., label: Ip address of the device., type: string}
  primary_device_logical_downlink_interface: {description: Name of the created logical
      downlink interface on the Primary device, label: Logical Interface name, type: string}
  primary_device_logical_uplink_interface: {description: Name of the created logical
      uplink interface on the Primary device, label: Logical Interface name, type: string}
  primary_device_password: {description: Password of the user which will be used to
      log onto the Primary Device., hidden: true, label: Users password., type: string}
  primary_device_physical_downlink_interface: {description: Physical port on the Primary
      device on which the logical downlink port will be configured, label: Underlying
      physical interface, type: string}
  primary_device_physical_uplink_interface: {description: Physical port on the Primary
      device on which the logical uplink port will be configured, label: Underlying
      physical interface, type: string}
  primary_device_port: {description: Port that will be used to establish ssh connection
      to the Primary Device., label: Port of the ssh connection., type: number}
  primary_device_username: {description: Name of the user which will be used to log
      onto the Primary Device., label: User name to log on to device., type: string}
  primary_downlink_vrrp_config_group: {description: Name for apply group to use for
      downlink interface for VRRP, label: Apply group name, type: string}
  secondary_device_ip: {description: Ip address that will be used to establish ssh
      connection to the Secondary Device., label: Ip address of the device., type: string}
  secondary_device_logical_downlink_interface: {description: Name of the created logical
      downlink interface on the Secondary device, label: Logical Interface name, type: string}
  secondary_device_logical_uplink_interface: {description: Name of the created logical
      uplink interface on the Secondary device, label: Logical Interface name, type: string}
  secondary_device_password: {description: Password of the user which will be used
      to log onto the Secondary Device., hidden: true, label: Users password., type: string}
  secondary_device_physical_downlink_interface: {description: Physical port on the
      Secondary device on which the logical downlink port will be configured, label: Underlying
      physical interface, type: string}
  secondary_device_physical_uplink_interface: {description: Physical port on the Secondary
      device on which the logical uplink port will be configured, label: Underlying
      physical interface, type: string}
  secondary_device_port: {description: Port that will be used to establish ssh connection
      to the Secondary Device., label: Port of the ssh connection., type: number}
  secondary_device_username: {description: Name of the user which will be used to
      log onto the Secondary Device., label: User name to log on to device., type: string}
  secondary_downlink_vrrp_config_group: {description: Name for apply group to use
      for downlink interface for VRRP, label: Apply group name, type: string}
  uplink_vlan: {description: vlan tag used by logical uplink interface, label: VLAN
      ID, type: string}
  vrf_name: {description: Name for VRF used by logical interfaces, label: VRF name,
    type: string}
resources:
  netconf_configure_primary:
    properties:
      configs:
      - config:
          str_replace:
            params:
              $APPLY_GROUP: {get_param: primary_downlink_vrrp_config_group}
              $INPUT_FILTER: {get_param: input_filter_name}
              $OUTPUT_FILTER: {get_param: output_filter_name}
              $VLAN: {get_param: downlink_vlan}
            template: "apply-groups $APPLY_GROUP\nvlan-id $VLAN;\ndescription vpn_gw;\n\
              family inet {\n    filter {\n        input $INPUT_FILTER;\n        output\
              \ $OUTPUT_FILTER;\n    }\n}\n"
        path:
        - {config_type: tag, tag: interfaces, xml_type: tag}
        - config_type: name
          name: {get_param: primary_device_physical_downlink_interface}
          tag: interface
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: downlink_vlan}
          tag: unit
          xml_type: named_tag
      - config:
          str_replace:
            params:
              $LIFD: {get_param: primary_device_logical_downlink_interface}
              $LIFU: {get_param: primary_device_logical_uplink_interface}
            template: 'instance-type virtual-router;

              interface $LIFD;

              interface $LIFU;

              '
        path:
        - {config_type: tag, tag: routing-instances, xml_type: tag}
        - config_type: name
          name: {get_param: vrf_name}
          tag: instance
          xml_type: named_tag
      - config:
          str_replace:
            params:
              $VLAN: {get_param: uplink_vlan}
            template: 'vlan-id $VLAN;

              description CloudGW_vpn;

              '
        path:
        - {config_type: tag, tag: interfaces, xml_type: tag}
        - config_type: name
          name: {get_param: primary_device_physical_uplink_interface}
          tag: interface
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: uplink_vlan}
          tag: unit
          xml_type: named_tag
      device_ip: {get_param: primary_device_ip}
      lock_timeout: 3000
      on_update: merge
      password: {get_param: primary_device_password}
      port: {get_param: primary_device_port}
      username: {get_param: primary_device_username}
    type: OS::Contrail::NetconfNamedConfigs
  netconf_configure_secondary:
    depends_on: netconf_configure_primary
    properties:
      configs:
      - config:
          str_replace:
            params:
              $APPLY_GROUP: {get_param: secondary_downlink_vrrp_config_group}
              $INPUT_FILTER: {get_param: input_filter_name}
              $OUTPUT_FILTER: {get_param: output_filter_name}
              $VLAN: {get_param: downlink_vlan}
            template: "apply-groups $APPLY_GROUP\nvlan-id $VLAN;\ndescription vpn_gw;\n\
              family inet {\n    filter {\n        input $INPUT_FILTER;\n        output\
              \ $OUTPUT_FILTER;\n    }\n}\n"
        path:
        - {config_type: tag, tag: interfaces, xml_type: tag}
        - config_type: name
          name: {get_param: secondary_device_physical_downlink_interface}
          tag: interface
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: downlink_vlan}
          tag: unit
          xml_type: named_tag
      - config:
          str_replace:
            params:
              $LIFD: {get_param: secondary_device_logical_downlink_interface}
              $LIFU: {get_param: secondary_device_logical_uplink_interface}
            template: 'instance-type virtual-router;

              interface $LIFD;

              interface $LIFU;

              '
        path:
        - {config_type: tag, tag: routing-instances, xml_type: tag}
        - config_type: name
          name: {get_param: vrf_name}
          tag: instance
          xml_type: named_tag
      - config:
          str_replace:
            params:
              $VLAN: {get_param: uplink_vlan}
            template: 'vlan-id $VLAN;

              description CloudGW_vpn;

              '
        path:
        - {config_type: tag, tag: interfaces, xml_type: tag}
        - config_type: name
          name: {get_param: secondary_device_physical_uplink_interface}
          tag: interface
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: uplink_vlan}
          tag: unit
          xml_type: named_tag
      device_ip: {get_param: secondary_device_ip}
      lock_timeout: 3000
      on_update: merge
      password: {get_param: secondary_device_password}
      port: {get_param: secondary_device_port}
      username: {get_param: secondary_device_username}
    type: OS::Contrail::NetconfNamedConfigs

### Create Vpn Interface ###
name:[sample-vpn-interface], id:[07d4f1fc-5142-4fae-b115-627fc009e222]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
00:09:50.422055  00:09:50.725401  0.303346        POST     201    PENDING_CREATE
00:09:50.726859  00:09:51.188504  0.461645         GET     200    PENDING_CREATE
00:09:52.189076  00:09:52.265989  0.076913         GET     200    PENDING_CREATE
00:09:53.267249  00:09:53.338202  0.070953         GET     200    PENDING_CREATE
00:09:54.339239  00:09:54.420641  0.081402         GET     200    PENDING_CREATE
00:09:55.421928  00:09:55.545715  0.123787         GET     200    PENDING_CREATE
00:09:56.545965  00:09:56.624765  0.078800         GET     200    PENDING_CREATE
00:09:57.625690  00:09:57.696402  0.070712         GET     200    PENDING_CREATE
00:09:58.697713  00:09:58.766108  0.068395         GET     200    PENDING_CREATE
00:09:59.767373  00:09:59.841429  0.074056         GET     200    PENDING_CREATE
00:10:00.842535  00:10:00.914725  0.072190         GET     200    PENDING_CREATE
00:10:01.915962  00:10:01.987529  0.071567         GET     200    PENDING_CREATE
00:10:02.988787  00:10:03.072802  0.084015         GET     200    PENDING_CREATE
00:10:04.074072  00:10:04.156214  0.082142         GET     200    PENDING_CREATE
00:10:05.156765  00:10:05.230941  0.074176         GET     200    PENDING_CREATE
00:10:06.232183  00:10:06.309277  0.077094         GET     200    PENDING_CREATE
00:10:07.310431  00:10:07.394907  0.084476         GET     200    PENDING_CREATE
00:10:08.396169  00:10:08.476646  0.080477         GET     200    PENDING_CREATE
00:10:09.477887  00:10:09.548138  0.070251         GET     200    PENDING_CREATE
00:10:10.548549  00:10:10.622075  0.073526         GET     200    PENDING_CREATE
00:10:11.623290  00:10:11.695279  0.071989         GET     200    PENDING_CREATE
00:10:12.696889  00:10:12.771228  0.074339         GET     200    PENDING_CREATE
00:10:13.772502  00:10:13.841459  0.068957         GET     200    PENDING_CREATE
00:10:14.842676  00:10:14.912012  0.069336         GET     200    PENDING_CREATE
00:10:15.912511  00:10:15.983012  0.070501         GET     200    PENDING_CREATE
00:10:16.984145  00:10:17.054477  0.070332         GET     200    PENDING_CREATE
00:10:18.055716  00:10:18.129131  0.073415         GET     200    PENDING_CREATE
00:10:19.130359  00:10:19.201395  0.071036         GET     200    PENDING_CREATE
00:10:20.202639  00:10:20.272781  0.070142         GET     200    PENDING_CREATE
00:10:21.273204  00:10:21.363497  0.090293         GET     200    PENDING_CREATE
00:10:22.364515  00:10:22.441442  0.076927         GET     200    PENDING_CREATE
00:10:23.442242  00:10:23.513092  0.070850         GET     200    PENDING_CREATE
00:10:24.514376  00:10:24.584580  0.070204         GET     200    PENDING_CREATE
00:10:25.585813  00:10:25.656661  0.070848         GET     200    PENDING_CREATE
00:10:26.657897  00:10:26.761344  0.103447         GET     200    PENDING_CREATE
00:10:27.762661  00:10:27.834364  0.071703         GET     200    PENDING_CREATE
00:10:28.835621  00:10:28.903407  0.067786         GET     200    PENDING_CREATE
00:10:29.904511  00:10:29.974264  0.069753         GET     200    PENDING_CREATE
00:10:30.975583  00:10:31.048941  0.073358         GET     200    PENDING_CREATE
00:10:32.050257  00:10:32.119404  0.069147         GET     200    PENDING_CREATE
00:10:33.120727  00:10:33.187821  0.067094         GET     200    PENDING_CREATE
00:10:34.188541  00:10:34.257116  0.068575         GET     200    PENDING_CREATE
00:10:35.258447  00:10:35.328228  0.069781         GET     200    PENDING_CREATE
00:10:36.329867  00:10:36.403934  0.074067         GET     200    PENDING_CREATE
00:10:37.405573  00:10:37.475657  0.070084         GET     200    PENDING_CREATE
00:10:38.476991  00:10:38.547024  0.070033         GET     200    PENDING_CREATE
00:10:39.548347  00:10:39.617830  0.069483         GET     200    PENDING_CREATE
00:10:40.619165  00:10:40.686486  0.067321         GET     200    PENDING_CREATE
00:10:41.688265  00:10:41.759982  0.071717         GET     200    PENDING_CREATE
00:10:42.761734  00:10:42.828516  0.066782         GET     200    PENDING_CREATE
00:10:43.829845  00:10:43.898769  0.068924         GET     200    PENDING_CREATE
00:10:44.900091  00:10:44.970199  0.070108         GET     200    PENDING_CREATE
00:10:45.971915  00:10:46.039894  0.067979         GET     200    PENDING_CREATE
00:10:47.041236  00:10:47.109466  0.068230         GET     200    PENDING_CREATE
00:10:48.110464  00:10:48.179938  0.069474         GET     200    PENDING_CREATE
00:10:49.181974  00:10:49.250246  0.068272         GET     200    PENDING_CREATE
00:10:50.250975  00:10:50.319251  0.068276         GET     200    PENDING_CREATE
00:10:51.320426  00:10:51.386140  0.065714         GET     200    PENDING_CREATE
00:10:52.387456  00:10:52.457799  0.070343         GET     200    PENDING_CREATE
00:10:53.459097  00:10:53.528182  0.069085         GET     200    PENDING_CREATE
00:10:54.528504  00:10:54.598451  0.069947         GET     200    PENDING_CREATE
00:10:55.599304  00:10:55.673378  0.074074         GET     200    PENDING_CREATE
00:10:56.675006  00:10:56.746771  0.071765         GET     200    PENDING_CREATE
00:10:57.748108  00:10:57.815921  0.067813         GET     200    PENDING_CREATE
00:10:58.817242  00:10:58.885199  0.067957         GET     200    PENDING_CREATE
00:10:59.886512  00:10:59.957001  0.070489         GET     200    PENDING_CREATE
00:11:00.958460  00:11:01.024224  0.065764         GET     200    PENDING_CREATE
00:11:02.025434  00:11:02.123699  0.098265         GET     200    PENDING_CREATE
00:11:03.124953  00:11:03.192871  0.067918         GET     200    PENDING_CREATE
00:11:04.194136  00:11:04.261540  0.067404         GET     200    PENDING_CREATE
00:11:05.262793  00:11:05.336390  0.073597         GET     200    PENDING_CREATE
00:11:06.337781  00:11:06.414484  0.076703         GET     200    PENDING_CREATE
00:11:07.415397  00:11:07.489182  0.073785         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 77.067127

[localhost] local: gohan client vpn_interface show --output-format json 07d4f1fc-5142-4fae-b115-627fc009e222
{
    "vpn_interface": {
        "bgp_md5": "test",
        "bgp_remote_as": "9598",
        "description": "Sample Vpn-interface",
        "id": "07d4f1fc-5142-4fae-b115-627fc009e222",
        "name": "sample-vpn-interface",
        "operational_state": "UP",
        "orchestration_state": "CREATE_COMPLETE",
        "primary": {
            "bgp_peer_ip": "192.168.8.1",
            "bgp_router_id": "192.168.8.2",
            "ip_address": "192.168.8.2/30"
        },
        "secondary": {
            "bgp_peer_ip": "192.168.8.5",
            "bgp_router_id": "192.168.8.6",
            "ip_address": "192.168.8.6/30"
        },
        "status": "ACTIVE",
        "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef",
        "vpn_gw_id": "b1da850c-3344-4de2-aa18-d96a30b54f69"
    }
}

[localhost] local: gohan client vpn_gateway show --output-format json b1da850c-3344-4de2-aa18-d96a30b54f69
{
    "vpn_gateway": {
        "connected_vpn_interface": "07d4f1fc-5142-4fae-b115-627fc009e222",
        "description": "this resource is vpn-gateway",
        "downlink_interface_id": "66bdfe91-b9e6-42f2-8942-bb4d4a67d5ba",
        "downlink_vlan_id": "1025",
        "id": "b1da850c-3344-4de2-aa18-d96a30b54f69",
        "local_as_number": "65101",
        "maximum_static_routes": 32,
        "name": "sample-vpn-gateway",
        "orchestration_state": "UPDATE_COMPLETE",
        "primary_logical_downlink_interface_name": "ae0.1025",
        "primary_logical_uplink_interface_name": "ge-0/0/1.122",
        "qos_option_id": "d35a3c95-8647-44d7-b32f-405b77d77f51",
        "secondary_logical_downlink_interface_name": "ae0.1025",
        "secondary_logical_uplink_interface_name": "ge-0/0/1.122",
        "status": "ACTIVE",
        "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef",
        "uplink_interface_id": "c50006de-8afe-48fc-b7b8-37dc7617764a",
        "uplink_vlan_id": "122",
        "vpn_service_id": "c8d57f7e-b439-475e-a6fb-ee2594390177",
        "vrf_name": "vrf_gw_sample-ha-router-downlink_1025"
    }
}

[localhost] local: gohan client resource_mapping list --output-format json
Command not found

#############################################
### checking heat-stack (vpn_interfaces) ####
#############################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/vpn_interfaces/07d4f1fc-5142-4fae-b115-627fc009e222
[localhost] local: heat stack-show vpn_interface_07d4f1fc-5142-4fae-b115-627fc009e222
+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                       |
+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                          |
| creation_time         | 2018-04-16T00:09:51Z                                                                                                                                                                        |
| description           | Inet Address                                                                                                                                                                                |
| disable_rollback      | True                                                                                                                                                                                        |
| id                    | d74ec7b4-930f-422a-a306-1695cb268680                                                                                                                                                        |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/b3e3095c0a5b4383805efe9cf2a6b5ef/stacks/vpn_interface_07d4f1fc-5142-4fae-b115-627fc009e222/d74ec7b4-930f-422a-a306-1695cb268680 |
| notification_topics   | []                                                                                                                                                                                          |
| outputs               | [                                                                                                                                                                                           |
|                       |   {                                                                                                                                                                                         |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/3bdb3c86-ac6d-4ff2-aa55-4b2989971614",                                                        |
|                       |     "description": "Monitoring Process Link",                                                                                                                                               |
|                       |     "output_key": "secondary_interface_monitoring_link"                                                                                                                                     |
|                       |   },                                                                                                                                                                                        |
|                       |   {                                                                                                                                                                                         |
|                       |     "output_value": "34b9de21-40c0-46f1-afa5-787220cc5ed2",                                                                                                                                 |
|                       |     "description": "Monitoring Target ID",                                                                                                                                                  |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                                    |
|                       |   },                                                                                                                                                                                        |
|                       |   {                                                                                                                                                                                         |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/d7885526-613f-4565-a3df-de89ed911e3b",                                                        |
|                       |     "description": "Monitoring Process Link",                                                                                                                                               |
|                       |     "output_key": "primary_interface_monitoring_link"                                                                                                                                       |
|                       |   },                                                                                                                                                                                        |
|                       |   {                                                                                                                                                                                         |
|                       |     "output_value": "d7885526-613f-4565-a3df-de89ed911e3b",                                                                                                                                 |
|                       |     "description": "Monitoring Target ID",                                                                                                                                                  |
|                       |     "output_key": "primary_interface_monitoring_target_id"                                                                                                                                  |
|                       |   },                                                                                                                                                                                        |
|                       |   {                                                                                                                                                                                         |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/34b9de21-40c0-46f1-afa5-787220cc5ed2",                                                        |
|                       |     "description": "Monitoring Process Link",                                                                                                                                               |
|                       |     "output_key": "monitoring_link"                                                                                                                                                         |
|                       |   },                                                                                                                                                                                        |
|                       |   {                                                                                                                                                                                         |
|                       |     "output_value": "3bdb3c86-ac6d-4ff2-aa55-4b2989971614",                                                                                                                                 |
|                       |     "description": "Monitoring Target ID",                                                                                                                                                  |
|                       |     "output_key": "secondary_interface_monitoring_target_id"                                                                                                                                |
|                       |   }                                                                                                                                                                                         |
|                       | ]                                                                                                                                                                                           |
| parameters            | {                                                                                                                                                                                           |
|                       |   "secondary_router_id": "192.168.8.6",                                                                                                                                                     |
|                       |   "secondary_device_physical_interface": "ge-0/0/1",                                                                                                                                        |
|                       |   "primary_peer_ip": "192.168.8.1",                                                                                                                                                         |
|                       |   "primary_device_logical_interface": "ge-0/0/1.122",                                                                                                                                       |
|                       |   "primary_device_password": "******",                                                                                                                                                      |
|                       |   "gohan_id": "07d4f1fc-5142-4fae-b115-627fc009e222",                                                                                                                                       |
|                       |   "bgp_group_name": "CloudGW1",                                                                                                                                                             |
|                       |   "remote_as": "9598",                                                                                                                                                                      |
|                       |   "primary_device_ip": "10.79.5.185",                                                                                                                                                       |
|                       |   "secondary_ebgp_config_group": "VPNGW2-RI-EBGP",                                                                                                                                          |
|                       |   "version": "1",                                                                                                                                                                           |
|                       |   "secondary_device_username": "esi",                                                                                                                                                       |
|                       |   "secondary_device_logical_interface": "ge-0/0/1.122",                                                                                                                                     |
|                       |   "OS::stack_name": "vpn_interface_07d4f1fc-5142-4fae-b115-627fc009e222",                                                                                                                   |
|                       |   "local_as": "65101",                                                                                                                                                                      |
|                       |   "primary_device_physical_interface": "ge-0/0/1",                                                                                                                                          |
|                       |   "uplink_vlan": "122",                                                                                                                                                                     |
|                       |   "md5": "test",                                                                                                                                                                            |
|                       |   "secondary_peer_ip": "192.168.8.5",                                                                                                                                                       |
|                       |   "primary_router_id": "192.168.8.2",                                                                                                                                                       |
|                       |   "OS::stack_id": "d74ec7b4-930f-422a-a306-1695cb268680",                                                                                                                                   |
|                       |   "primary_ebgp_config_group": "VPNGW1-RI-EBGP",                                                                                                                                            |
|                       |   "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef",                                                                                                                                          |
|                       |   "secondary_device_port": "830",                                                                                                                                                           |
|                       |   "secondary_device_password": "******",                                                                                                                                                    |
|                       |   "vrf_name": "vrf_gw_sample-ha-router-downlink_1025",                                                                                                                                      |
|                       |   "primary_device_username": "esi",                                                                                                                                                         |
|                       |   "primary_device_port": "830",                                                                                                                                                             |
|                       |   "secondary_device_ip": "10.79.5.184"                                                                                                                                                      |
|                       | }                                                                                                                                                                                           |
| parent                | None                                                                                                                                                                                        |
| stack_name            | vpn_interface_07d4f1fc-5142-4fae-b115-627fc009e222                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                       |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                             |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                         |
| stack_user_project_id | b3e3095c0a5b4383805efe9cf2a6b5ef                                                                                                                                                            |
| template_description  | Inet Address                                                                                                                                                                                |
| timeout_mins          | 60                                                                                                                                                                                          |
| updated_time          | None                                                                                                                                                                                        |
+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show vpn_interface_07d4f1fc-5142-4fae-b115-627fc009e222
description: 'Inet Address

  '
heat_template_version: '2013-05-23'
outputs:
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [bgp_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: bgp_monitor}
  primary_interface_monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [primary_interface_metric_monitor, link]
  primary_interface_monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: primary_interface_metric_monitor}
  secondary_interface_monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [secondary_interface_metric_monitor, link]
  secondary_interface_monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: secondary_interface_metric_monitor}
parameters:
  bgp_group_name: {description: Name of eBGP group, label: eBGP group name, type: string}
  gohan_id: {description: UUID of the VPN Interface, label: Gohan resource ID, type: string}
  local_as: {label: Local AS Number, type: number}
  md5: {description: eBGP authentication key, label: eBGP authentication key, type: string}
  primary_device_ip: {description: Ip address that will be used to establish ssh connection
      to the Primary Device., label: Ip address of the device., type: string}
  primary_device_logical_interface: {description: Name of the created logical uplink
      interface on the Primary device, label: Logical Interface name, type: string}
  primary_device_password: {description: Password of the user which will be used to
      log onto the Primary Device., hidden: true, label: Users password., type: string}
  primary_device_physical_interface: {description: MX physical port on which logical
      interface will be created, label: Underlying physical interface, type: string}
  primary_device_port: {description: Port that will be used to establish ssh connection
      to the Primary Device., label: Port of the ssh connection., type: number}
  primary_device_username: {description: Name of the user which will be used to log
      onto the Primary Device., label: User name to log on to device., type: string}
  primary_ebgp_config_group: {description: Name of MX config group for eBGP config,
    label: eBGP config group, type: string}
  primary_peer_ip: {description: IP address of primary router eBGP neighbour, label: Primary
      device BGP peer, type: string}
  primary_router_id: {description: Primary router VRF router id, label: Primary router
      id, type: string}
  remote_as: {description: eBGP remote autonomous system, label: Remote AS, type: string}
  secondary_device_ip: {description: Ip address that will be used to establish ssh
      connection to the Secondary Device., label: Ip address of the device., type: string}
  secondary_device_logical_interface: {description: Name of the created logical uplink
      interface on the Secondary device, label: Logical Interface name, type: string}
  secondary_device_password: {description: Password of the user which will be used
      to log onto the Secondary Device., hidden: true, label: Users password., type: string}
  secondary_device_physical_interface: {description: MX physical port on which logical
      interface will be created, label: Underlying physical interface, type: string}
  secondary_device_port: {description: Port that will be used to establish ssh connection
      to the Secondary Device., label: Port of the ssh connection., type: number}
  secondary_device_username: {description: Name of the user which will be used to
      log onto the Secondary Device., label: User name to log on to device., type: string}
  secondary_ebgp_config_group: {description: Name of MX config group for eBGP config,
    label: eBGP config group, type: string}
  secondary_peer_ip: {description: IP address of secondary router eBGP neighbour,
    label: Secondary device BGP peer, type: string}
  secondary_router_id: {description: Secondary router VRF router id, label: Secondary
      router id, type: string}
  tenant_id: {label: Tenant ID, type: string}
  uplink_vlan: {description: VLAN ID used on uplink interfaces (same for both primary
      and secondary device), label: Uplink VLAN ID, type: string}
  version: {label: Config version, type: number}
  vrf_name: {description: Name of VRF (routing-instance) in MX config, label: VRF
      Name, type: string}
resources:
  bgp_monitor:
    depends_on: netconf_configure_secondary
    properties:
      field_name: status
      properties:
        instance: {get_param: vrf_name}
        primary:
          host: {get_param: primary_device_ip}
          login: {get_param: primary_device_username}
          password: {get_param: primary_device_password}
          peer_address: {get_param: primary_peer_ip}
          port: {get_param: primary_device_port}
        secondary:
          host: {get_param: secondary_device_ip}
          login: {get_param: secondary_device_username}
          password: {get_param: secondary_device_password}
          peer_address: {get_param: secondary_peer_ip}
          port: {get_param: secondary_device_port}
      resource_id: {get_param: gohan_id}
      resource_type: vpn_interfaces
      syncer_properties:
        etcd:
          status: {key: status}
      tenant_id: {get_param: tenant_id}
      type: bgp_pool
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget
  netconf_configure_primary:
    properties:
      configs:
      - config: ''
        path:
        - {config_type: tag, tag: interfaces, xml_type: tag}
        - config_type: name
          name: {get_param: primary_device_physical_interface}
          tag: interface
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: uplink_vlan}
          tag: unit
          xml_type: named_tag
        - {config_type: tag, tag: family, xml_type: tag}
        - {config_type: tag, tag: inet, xml_type: tag}
        - {config_type: named_tag, name: 192.168.8.2/30, tag: address, xml_type: named_tag}
      - config:
          str_replace:
            params:
              $APPLY_GROUP: {get_param: primary_ebgp_config_group}
              $KEY: {get_param: md5}
              $NEIGHBOR_IP: {get_param: primary_peer_ip}
              $REMOTE_AS: {get_param: remote_as}
            template: 'apply-groups $APPLY_GROUP;

              local-address  192.168.8.2 ;

              peer-as $REMOTE_AS;

              neighbor $NEIGHBOR_IP authentication-key $KEY;

              '
        path:
        - {config_type: tag, tag: routing-instances, xml_type: tag}
        - config_type: name
          name: {get_param: vrf_name}
          tag: instance
          xml_type: named_tag
        - {config_type: tag, tag: protocols, xml_type: tag}
        - {config_type: tag, tag: bgp, xml_type: tag}
        - config_type: named_tag
          name: {get_param: bgp_group_name}
          tag: group
          xml_type: named_tag
      - config:
          str_replace:
            params:
              $LOCAL_AS: {get_param: local_as}
              $ROUTER_ID: {get_param: primary_router_id}
            template: 'router-id $ROUTER_ID;

              autonomous-system $LOCAL_AS;

              '
        path:
        - {config_type: tag, tag: routing-instances, xml_type: tag}
        - config_type: name
          name: {get_param: vrf_name}
          tag: instance
          xml_type: named_tag
        - {config_type: tag, tag: routing-options, xml_type: tag}
      device_ip: {get_param: primary_device_ip}
      lock_timeout: 3000
      password: {get_param: primary_device_password}
      port: {get_param: primary_device_port}
      username: {get_param: primary_device_username}
    type: OS::Contrail::NetconfNamedConfigs
  netconf_configure_secondary:
    depends_on: netconf_configure_primary
    properties:
      configs:
      - config: ''
        path:
        - {config_type: tag, tag: interfaces, xml_type: tag}
        - config_type: name
          name: {get_param: secondary_device_physical_interface}
          tag: interface
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: uplink_vlan}
          tag: unit
          xml_type: named_tag
        - {config_type: tag, tag: family, xml_type: tag}
        - {config_type: tag, tag: inet, xml_type: tag}
        - {config_type: named_tag, name: 192.168.8.6/30, tag: address, xml_type: named_tag}
      - config:
          str_replace:
            params:
              $APPLY_GROUP: {get_param: secondary_ebgp_config_group}
              $KEY: {get_param: md5}
              $NEIGHBOR_IP: {get_param: secondary_peer_ip}
              $REMOTE_AS: {get_param: remote_as}
            template: 'apply-groups $APPLY_GROUP;

              local-address  192.168.8.6 ;

              peer-as $REMOTE_AS;

              neighbor $NEIGHBOR_IP authentication-key $KEY;

              '
        path:
        - {config_type: tag, tag: routing-instances, xml_type: tag}
        - config_type: name
          name: {get_param: vrf_name}
          tag: instance
          xml_type: named_tag
        - {config_type: tag, tag: protocols, xml_type: tag}
        - {config_type: tag, tag: bgp, xml_type: tag}
        - config_type: named_tag
          name: {get_param: bgp_group_name}
          tag: group
          xml_type: named_tag
      - config:
          str_replace:
            params:
              $LOCAL_AS: {get_param: local_as}
              $ROUTER_ID: {get_param: secondary_router_id}
            template: 'router-id $ROUTER_ID;

              autonomous-system $LOCAL_AS;

              '
        path:
        - {config_type: tag, tag: routing-instances, xml_type: tag}
        - config_type: name
          name: {get_param: vrf_name}
          tag: instance
          xml_type: named_tag
        - {config_type: tag, tag: routing-options, xml_type: tag}
      device_ip: {get_param: secondary_device_ip}
      lock_timeout: 3000
      password: {get_param: secondary_device_password}
      port: {get_param: secondary_device_port}
      username: {get_param: secondary_device_username}
    type: OS::Contrail::NetconfNamedConfigs
  primary_interface_metric_monitor:
    depends_on: bgp_monitor
    properties:
      field_name: primary_router
      properties:
        community_name: EDGE_ROUTER_COMMUNITY
        device_ip: {get_param: primary_device_ip}
        if_name: {get_param: primary_device_logical_interface}
      resource_id: {get_param: gohan_id}
      resource_type: vpn_interfaces
      syncer_properties:
        tsdb:
          traffic.in:
            metric: traffic.bytes
            tags:
              device_index: primary
              direction: in
              resource_id: {get_param: gohan_id}
          traffic.out:
            metric: traffic.bytes
            tags:
              device_index: primary
              direction: out
              resource_id: {get_param: gohan_id}
      tenant_id: {get_param: tenant_id}
      type: snmp_ports_metric
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget
  secondary_interface_metric_monitor:
    depends_on: bgp_monitor
    properties:
      field_name: secondary_router
      properties:
        community_name: EDGE_ROUTER_COMMUNITY
        device_ip: {get_param: secondary_device_ip}
        if_name: {get_param: secondary_device_logical_interface}
      resource_id: {get_param: gohan_id}
      resource_type: vpn_interfaces
      syncer_properties:
        tsdb:
          traffic.in:
            metric: traffic.bytes
            tags:
              device_index: secondary
              direction: in
              resource_id: {get_param: gohan_id}
          traffic.out:
            metric: traffic.bytes
            tags:
              device_index: secondary
              direction: out
              resource_id: {get_param: gohan_id}
      tenant_id: {get_param: tenant_id}
      type: snmp_ports_metric
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget

###############################################################
### checking heat-stack (vpn_gateways) for UPDATE_COMPLETE ####
###############################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/vpn_gateways/b1da850c-3344-4de2-aa18-d96a30b54f69
[localhost] local: heat stack-show vpn_gateway_b1da850c-3344-4de2-aa18-d96a30b54f69
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                     |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                        |
| creation_time         | 2018-04-16T00:09:18Z                                                                                                                                                                      |
| description           | VPN Gateway                                                                                                                                                                               |
| disable_rollback      | True                                                                                                                                                                                      |
| id                    | 63a31186-fe5f-4db2-84ab-6fb47054cb3e                                                                                                                                                      |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/b3e3095c0a5b4383805efe9cf2a6b5ef/stacks/vpn_gateway_b1da850c-3344-4de2-aa18-d96a30b54f69/63a31186-fe5f-4db2-84ab-6fb47054cb3e |
| notification_topics   | []                                                                                                                                                                                        |
| outputs               | []                                                                                                                                                                                        |
| parameters            | {                                                                                                                                                                                         |
|                       |   "primary_device_logical_uplink_interface": "ge-0/0/1.122",                                                                                                                              |
|                       |   "primary_device_logical_downlink_interface": "ae0.1025",                                                                                                                                |
|                       |   "primary_device_password": "******",                                                                                                                                                    |
|                       |   "output_filter_name": "FILTER_10M-GA-DOWN-VPN",                                                                                                                                         |
|                       |   "primary_device_ip": "10.79.5.185",                                                                                                                                                     |
|                       |   "secondary_device_physical_downlink_interface": "ae0",                                                                                                                                  |
|                       |   "secondary_device_username": "esi",                                                                                                                                                     |
|                       |   "primary_device_physical_uplink_interface": "ge-0/0/1",                                                                                                                                 |
|                       |   "secondary_device_logical_uplink_interface": "ge-0/0/1.122",                                                                                                                            |
|                       |   "downlink_vlan": "1025",                                                                                                                                                                |
|                       |   "OS::stack_name": "vpn_gateway_b1da850c-3344-4de2-aa18-d96a30b54f69",                                                                                                                   |
|                       |   "secondary_device_logical_downlink_interface": "ae0.1025",                                                                                                                              |
|                       |   "input_filter_name": "FILTER_10M-GA-UP-VPN",                                                                                                                                            |
|                       |   "uplink_vlan": "122",                                                                                                                                                                   |
|                       |   "OS::stack_id": "63a31186-fe5f-4db2-84ab-6fb47054cb3e",                                                                                                                                 |
|                       |   "secondary_device_port": "830",                                                                                                                                                         |
|                       |   "primary_downlink_vrrp_config_group": "VPNGW1-VRRP",                                                                                                                                    |
|                       |   "secondary_device_password": "******",                                                                                                                                                  |
|                       |   "vrf_name": "vrf_gw_sample-ha-router-downlink_1025",                                                                                                                                    |
|                       |   "primary_device_username": "esi",                                                                                                                                                       |
|                       |   "primary_device_physical_downlink_interface": "ae0",                                                                                                                                    |
|                       |   "secondary_downlink_vrrp_config_group": "VPNGW2-VRRP",                                                                                                                                  |
|                       |   "primary_device_port": "830",                                                                                                                                                           |
|                       |   "secondary_device_physical_uplink_interface": "ge-0/0/1",                                                                                                                               |
|                       |   "secondary_device_ip": "10.79.5.184"                                                                                                                                                    |
|                       | }                                                                                                                                                                                         |
| parent                | None                                                                                                                                                                                      |
| stack_name            | vpn_gateway_b1da850c-3344-4de2-aa18-d96a30b54f69                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                     |
| stack_status          | UPDATE_COMPLETE                                                                                                                                                                           |
| stack_status_reason   | Stack successfully updated                                                                                                                                                                |
| stack_user_project_id | b3e3095c0a5b4383805efe9cf2a6b5ef                                                                                                                                                          |
| template_description  | VPN Gateway                                                                                                                                                                               |
| timeout_mins          | 60                                                                                                                                                                                        |
| updated_time          | 2018-04-16T00:10:12Z                                                                                                                                                                      |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show vpn_gateway_b1da850c-3344-4de2-aa18-d96a30b54f69
description: 'VPN Gateway

  '
heat_template_version: '2013-05-23'
parameters:
  downlink_vlan: {description: vlan tag used by logical downlink interface, label: VLAN
      ID, type: string}
  input_filter_name: {description: Name for policer used for input, label: Input filter
      name, type: string}
  output_filter_name: {description: Name for policer used for output, label: Output
      filter name, type: string}
  primary_device_ip: {description: Ip address that will be used to establish ssh connection
      to the Primary Device., label: Ip address of the device., type: string}
  primary_device_logical_downlink_interface: {description: Name of the created logical
      downlink interface on the Primary device, label: Logical Interface name, type: string}
  primary_device_logical_uplink_interface: {description: Name of the created logical
      uplink interface on the Primary device, label: Logical Interface name, type: string}
  primary_device_password: {description: Password of the user which will be used to
      log onto the Primary Device., hidden: true, label: Users password., type: string}
  primary_device_physical_downlink_interface: {description: Physical port on the Primary
      device on which the logical downlink port will be configured, label: Underlying
      physical interface, type: string}
  primary_device_physical_uplink_interface: {description: Physical port on the Primary
      device on which the logical uplink port will be configured, label: Underlying
      physical interface, type: string}
  primary_device_port: {description: Port that will be used to establish ssh connection
      to the Primary Device., label: Port of the ssh connection., type: number}
  primary_device_username: {description: Name of the user which will be used to log
      onto the Primary Device., label: User name to log on to device., type: string}
  primary_downlink_vrrp_config_group: {description: Name for apply group to use for
      downlink interface for VRRP, label: Apply group name, type: string}
  secondary_device_ip: {description: Ip address that will be used to establish ssh
      connection to the Secondary Device., label: Ip address of the device., type: string}
  secondary_device_logical_downlink_interface: {description: Name of the created logical
      downlink interface on the Secondary device, label: Logical Interface name, type: string}
  secondary_device_logical_uplink_interface: {description: Name of the created logical
      uplink interface on the Secondary device, label: Logical Interface name, type: string}
  secondary_device_password: {description: Password of the user which will be used
      to log onto the Secondary Device., hidden: true, label: Users password., type: string}
  secondary_device_physical_downlink_interface: {description: Physical port on the
      Secondary device on which the logical downlink port will be configured, label: Underlying
      physical interface, type: string}
  secondary_device_physical_uplink_interface: {description: Physical port on the Secondary
      device on which the logical uplink port will be configured, label: Underlying
      physical interface, type: string}
  secondary_device_port: {description: Port that will be used to establish ssh connection
      to the Secondary Device., label: Port of the ssh connection., type: number}
  secondary_device_username: {description: Name of the user which will be used to
      log onto the Secondary Device., label: User name to log on to device., type: string}
  secondary_downlink_vrrp_config_group: {description: Name for apply group to use
      for downlink interface for VRRP, label: Apply group name, type: string}
  uplink_vlan: {description: vlan tag used by logical uplink interface, label: VLAN
      ID, type: string}
  vrf_name: {description: Name for VRF used by logical interfaces, label: VRF name,
    type: string}
resources:
  netconf_configure_primary:
    properties:
      configs:
      - config:
          str_replace:
            params:
              $APPLY_GROUP: {get_param: primary_downlink_vrrp_config_group}
              $INPUT_FILTER: {get_param: input_filter_name}
              $OUTPUT_FILTER: {get_param: output_filter_name}
              $VLAN: {get_param: downlink_vlan}
            template: "apply-groups $APPLY_GROUP\nvlan-id $VLAN;\ndescription vpn_gw;\n\
              family inet {\n    filter {\n        input $INPUT_FILTER;\n        output\
              \ $OUTPUT_FILTER;\n    }\n}\n"
        path:
        - {config_type: tag, tag: interfaces, xml_type: tag}
        - config_type: name
          name: {get_param: primary_device_physical_downlink_interface}
          tag: interface
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: downlink_vlan}
          tag: unit
          xml_type: named_tag
      - config:
          str_replace:
            params:
              $LIFD: {get_param: primary_device_logical_downlink_interface}
              $LIFU: {get_param: primary_device_logical_uplink_interface}
            template: 'instance-type virtual-router;

              interface $LIFD;

              interface $LIFU;

              '
        path:
        - {config_type: tag, tag: routing-instances, xml_type: tag}
        - config_type: name
          name: {get_param: vrf_name}
          tag: instance
          xml_type: named_tag
      - config:
          str_replace:
            params:
              $VLAN: {get_param: uplink_vlan}
            template: 'vlan-id $VLAN;

              description CloudGW_vpn;

              '
        path:
        - {config_type: tag, tag: interfaces, xml_type: tag}
        - config_type: name
          name: {get_param: primary_device_physical_uplink_interface}
          tag: interface
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: uplink_vlan}
          tag: unit
          xml_type: named_tag
      device_ip: {get_param: primary_device_ip}
      lock_timeout: 3000
      on_update: merge
      password: {get_param: primary_device_password}
      port: {get_param: primary_device_port}
      username: {get_param: primary_device_username}
    type: OS::Contrail::NetconfNamedConfigs
  netconf_configure_secondary:
    depends_on: netconf_configure_primary
    properties:
      configs:
      - config:
          str_replace:
            params:
              $APPLY_GROUP: {get_param: secondary_downlink_vrrp_config_group}
              $INPUT_FILTER: {get_param: input_filter_name}
              $OUTPUT_FILTER: {get_param: output_filter_name}
              $VLAN: {get_param: downlink_vlan}
            template: "apply-groups $APPLY_GROUP\nvlan-id $VLAN;\ndescription vpn_gw;\n\
              family inet {\n    filter {\n        input $INPUT_FILTER;\n        output\
              \ $OUTPUT_FILTER;\n    }\n}\n"
        path:
        - {config_type: tag, tag: interfaces, xml_type: tag}
        - config_type: name
          name: {get_param: secondary_device_physical_downlink_interface}
          tag: interface
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: downlink_vlan}
          tag: unit
          xml_type: named_tag
      - config:
          str_replace:
            params:
              $LIFD: {get_param: secondary_device_logical_downlink_interface}
              $LIFU: {get_param: secondary_device_logical_uplink_interface}
            template: 'instance-type virtual-router;

              interface $LIFD;

              interface $LIFU;

              '
        path:
        - {config_type: tag, tag: routing-instances, xml_type: tag}
        - config_type: name
          name: {get_param: vrf_name}
          tag: instance
          xml_type: named_tag
      - config:
          str_replace:
            params:
              $VLAN: {get_param: uplink_vlan}
            template: 'vlan-id $VLAN;

              description CloudGW_vpn;

              '
        path:
        - {config_type: tag, tag: interfaces, xml_type: tag}
        - config_type: name
          name: {get_param: secondary_device_physical_uplink_interface}
          tag: interface
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: uplink_vlan}
          tag: unit
          xml_type: named_tag
      device_ip: {get_param: secondary_device_ip}
      lock_timeout: 3000
      on_update: merge
      password: {get_param: secondary_device_password}
      port: {get_param: secondary_device_port}
      username: {get_param: secondary_device_username}
    type: OS::Contrail::NetconfNamedConfigs

### Create Network ###
name:[sample-network], id:[afa0d9d6-84dc-4755-9c6e-db2f23f9dde2]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
00:11:53.475819  00:11:53.590406  0.114587        POST     201    PENDING_CREATE
00:11:53.591084  00:11:53.709951  0.118867         GET     200    PENDING_CREATE
00:11:54.710473  00:11:54.802308  0.091835         GET     200    PENDING_CREATE
00:11:55.803563  00:11:55.901880  0.098317         GET     200    PENDING_CREATE
00:11:56.903102  00:11:56.997949  0.094847         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 3.52213

[localhost] local: gohan client network show --output-format json afa0d9d6-84dc-4755-9c6e-db2f23f9dde2
{
    "network": {
        "admin_state_up": true,
        "description": "Sample Network",
        "id": "afa0d9d6-84dc-4755-9c6e-db2f23f9dde2",
        "name": "sample-network",
        "orchestration_state": "CREATE_COMPLETE",
        "plane": "data",
        "shared": false,
        "status": "ACTIVE",
        "subnets": [],
        "tags": {},
        "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef"
    }
}

[localhost] local: gohan client resource_mapping list --output-format json
Command not found

[localhost] local: gohan client billing_resource list --output-format json
{
    "billing_resources": [
        {
            "config_version": 1,
            "ended": null,
            "id": "c8e7828d-90f9-4322-b36b-170da9202371",
            "info": {},
            "parent_billing_id": null,
            "resource_id": "afa0d9d6-84dc-4755-9c6e-db2f23f9dde2",
            "resource_type": "network",
            "started": 1.523837516e+09,
            "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef",
            "unique_resource_id": "afa0d9d6-84dc-4755-9c6e-db2f23f9dde2"
        }
    ]
}

#######################################
### checking heat-stack (networks) ####
#######################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/networks/afa0d9d6-84dc-4755-9c6e-db2f23f9dde2
[localhost] local: heat stack-show network_afa0d9d6-84dc-4755-9c6e-db2f23f9dde2
+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                 |
+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                    |
| creation_time         | 2018-04-16T00:11:54Z                                                                                                                                                                  |
| description           | Network template                                                                                                                                                                      |
| disable_rollback      | True                                                                                                                                                                                  |
| id                    | 5c7f0749-24f9-4aeb-8835-027a73cf38d6                                                                                                                                                  |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/b3e3095c0a5b4383805efe9cf2a6b5ef/stacks/network_afa0d9d6-84dc-4755-9c6e-db2f23f9dde2/5c7f0749-24f9-4aeb-8835-027a73cf38d6 |
| notification_topics   | []                                                                                                                                                                                    |
| outputs               | [                                                                                                                                                                                     |
|                       |   {                                                                                                                                                                                   |
|                       |     "output_value": [],                                                                                                                                                               |
|                       |     "description": "The name of the virtual network.",                                                                                                                                |
|                       |     "output_key": "route_targets"                                                                                                                                                     |
|                       |   },                                                                                                                                                                                  |
|                       |   {                                                                                                                                                                                   |
|                       |     "output_value": "default-domain:usertenant:afa0d9d6-84dc-4755-9c6e-db2f23f9dde2",                                                                                                 |
|                       |     "description": "The FQ name of the virtual network.",                                                                                                                             |
|                       |     "output_key": "fq_name"                                                                                                                                                           |
|                       |   },                                                                                                                                                                                  |
|                       |   {                                                                                                                                                                                   |
|                       |     "output_value": "afa0d9d6-84dc-4755-9c6e-db2f23f9dde2",                                                                                                                           |
|                       |     "description": "A unique id for the virtual network.",                                                                                                                            |
|                       |     "output_key": "id"                                                                                                                                                                |
|                       |   },                                                                                                                                                                                  |
|                       |   {                                                                                                                                                                                   |
|                       |     "output_value": "afa0d9d6-84dc-4755-9c6e-db2f23f9dde2",                                                                                                                           |
|                       |     "description": "The name of the virtual network.",                                                                                                                                |
|                       |     "output_key": "name"                                                                                                                                                              |
|                       |   }                                                                                                                                                                                   |
|                       | ]                                                                                                                                                                                     |
| parameters            | {                                                                                                                                                                                     |
|                       |   "forwarding_mode": "l2_l3",                                                                                                                                                         |
|                       |   "allow_transit": "False",                                                                                                                                                           |
|                       |   "name": "afa0d9d6-84dc-4755-9c6e-db2f23f9dde2",                                                                                                                                     |
|                       |   "OS::stack_name": "network_afa0d9d6-84dc-4755-9c6e-db2f23f9dde2",                                                                                                                   |
|                       |   "admin_state_up": "True",                                                                                                                                                           |
|                       |   "OS::stack_id": "5c7f0749-24f9-4aeb-8835-027a73cf38d6",                                                                                                                             |
|                       |   "external": "True",                                                                                                                                                                 |
|                       |   "shared": "False",                                                                                                                                                                  |
|                       |   "route_targets": "",                                                                                                                                                                |
|                       |   "uuid": "afa0d9d6-84dc-4755-9c6e-db2f23f9dde2"                                                                                                                                      |
|                       | }                                                                                                                                                                                     |
| parent                | None                                                                                                                                                                                  |
| stack_name            | network_afa0d9d6-84dc-4755-9c6e-db2f23f9dde2                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                 |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                       |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                   |
| stack_user_project_id | b3e3095c0a5b4383805efe9cf2a6b5ef                                                                                                                                                      |
| template_description  | Network template                                                                                                                                                                      |
| timeout_mins          | 3                                                                                                                                                                                     |
| updated_time          | None                                                                                                                                                                                  |
+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show network_afa0d9d6-84dc-4755-9c6e-db2f23f9dde2
description: 'Network template

  '
heat_template_version: '2013-05-23'
outputs:
  fq_name:
    description: The FQ name of the virtual network.
    value:
      get_attr: [network, fq_name]
  id:
    description: A unique id for the virtual network.
    value: {get_resource: network}
  name:
    description: The name of the virtual network.
    value:
      get_attr: [network, name]
  route_targets:
    description: The name of the virtual network.
    value:
      get_attr: [network, route_targets]
parameters:
  admin_state_up: {default: true, label: Admin state up, type: boolean}
  allow_transit: {default: false, label: Allow Transit, type: boolean}
  external: {default: true, label: External Network, type: boolean}
  forwarding_mode: {default: l2_l3, description: Forwarding Mode., label: Forwarding
      Mode, type: string}
  name: {description: Name of the virtual network that will be created., label: Virtual
      Network Name, type: string}
  route_targets:
    default: []
    label: Route Targets list
    type: comma_delimited_list
  shared: {default: false, label: Shared Network, type: boolean}
  uuid: {default: '', description: UUID of the virtual network that will be created.,
    label: Virtual Network UUID, type: string}
resources:
  network:
    properties:
      admin_state_up: {get_param: admin_state_up}
      forwarding_mode: {get_param: forwarding_mode}
      name: {get_param: name}
      route_targets: {get_param: route_targets}
      shared: {get_param: shared}
      uuid: {get_param: uuid}
    type: OS::Contrail::VirtualNetwork

### Create Subnet ###
name:[sample-subnet], id:[e825f4e4-ba44-4d9e-9578-a31ad45bedda]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
00:12:10.670623  00:12:10.883232  0.212609        POST     201    PENDING_CREATE
00:12:10.883694  00:12:10.981484  0.097790         GET     200    PENDING_CREATE
00:12:11.982738  00:12:12.052396  0.069658         GET     200    PENDING_CREATE
00:12:13.053459  00:12:13.150212  0.096753         GET     200    PENDING_CREATE
00:12:14.151420  00:12:14.224071  0.072651         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 3.553448

[localhost] local: gohan client subnet show --output-format json e825f4e4-ba44-4d9e-9578-a31ad45bedda
{
    "subnet": {
        "allocation_pools": [
            {
                "end": "172.16.101.254",
                "start": "172.16.101.2"
            }
        ],
        "cidr": "172.16.101.0/24",
        "description": "Sample Subnet",
        "dhcp_server_address": "172.16.101.2",
        "dns_nameservers": [],
        "enable_dhcp": true,
        "gateway_ip": "172.16.101.1",
        "host_routes": [],
        "id": "e825f4e4-ba44-4d9e-9578-a31ad45bedda",
        "ip_version": 4,
        "ipv6_address_mode": null,
        "ipv6_ra_mode": null,
        "name": "sample-subnet",
        "network_id": "afa0d9d6-84dc-4755-9c6e-db2f23f9dde2",
        "ntp_servers": [],
        "orchestration_state": "CREATE_COMPLETE",
        "status": "ACTIVE",
        "tags": {},
        "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef"
    }
}

[localhost] local: gohan client port list --output-format json
[localhost] local: gohan client port show --output-format json 604f922d-489d-4170-9d6d-c09e657b2eb3
{
    "port": {
        "admin_state_up": true,
        "allowed_address_pairs": [],
        "attached": false,
        "binding:vif_type": "vrouter",
        "description": "DHCP Server Port",
        "device_id": "e825f4e4-ba44-4d9e-9578-a31ad45bedda",
        "device_owner": "network:dhcp",
        "ese_logical_port_id": null,
        "fake_delete": false,
        "fixed_ips": [
            {
                "ip_address": "172.16.101.2",
                "subnet_id": "e825f4e4-ba44-4d9e-9578-a31ad45bedda"
            }
        ],
        "id": "604f922d-489d-4170-9d6d-c09e657b2eb3",
        "mac_address": "00:00:5e:00:01:00",
        "managed_by_service": false,
        "name": "dhcp-server-port",
        "network_id": "afa0d9d6-84dc-4755-9c6e-db2f23f9dde2",
        "operational_state": "",
        "orchestration_state": "SYNC_COMPLETE",
        "security_groups": [],
        "segmentation_id": null,
        "segmentation_type": null,
        "status": "ACTIVE",
        "tags": {},
        "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef"
    }
}

######################################
### checking heat-stack (subnets) ####
######################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/subnets/e825f4e4-ba44-4d9e-9578-a31ad45bedda
[localhost] local: heat stack-show subnet_e825f4e4-ba44-4d9e-9578-a31ad45bedda
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                |
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                   |
| creation_time         | 2018-04-16T00:12:11Z                                                                                                                                                                 |
| description           | Subnet template                                                                                                                                                                      |
| disable_rollback      | True                                                                                                                                                                                 |
| id                    | a88b397a-8099-4c6f-8063-26b1855ac113                                                                                                                                                 |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/b3e3095c0a5b4383805efe9cf2a6b5ef/stacks/subnet_e825f4e4-ba44-4d9e-9578-a31ad45bedda/a88b397a-8099-4c6f-8063-26b1855ac113 |
| notification_topics   | []                                                                                                                                                                                   |
| outputs               | [                                                                                                                                                                                    |
|                       |   {                                                                                                                                                                                  |
|                       |     "output_value": "172.16.101.0/24",                                                                                                                                               |
|                       |     "description": "IP prefix of local subnet.",                                                                                                                                     |
|                       |     "output_key": "ip_prefix"                                                                                                                                                        |
|                       |   },                                                                                                                                                                                 |
|                       |   {                                                                                                                                                                                  |
|                       |     "output_value": "e825f4e4-ba44-4d9e-9578-a31ad45bedda",                                                                                                                          |
|                       |     "description": "The name of the local subnet.",                                                                                                                                  |
|                       |     "output_key": "name"                                                                                                                                                             |
|                       |   },                                                                                                                                                                                 |
|                       |   {                                                                                                                                                                                  |
|                       |     "output_value": "172.16.101.1",                                                                                                                                                  |
|                       |     "description": "Default gateway of local subnet.",                                                                                                                               |
|                       |     "output_key": "default_gateway"                                                                                                                                                  |
|                       |   },                                                                                                                                                                                 |
|                       |   {                                                                                                                                                                                  |
|                       |     "output_value": "afa0d9d6-84dc-4755-9c6e-db2f23f9dde2",                                                                                                                          |
|                       |     "description": "A unique id for the network.",                                                                                                                                   |
|                       |     "output_key": "network_id"                                                                                                                                                       |
|                       |   },                                                                                                                                                                                 |
|                       |   {                                                                                                                                                                                  |
|                       |     "output_value": "5a79909b-2bf3-4e26-8a9c-0bf6bb175457",                                                                                                                          |
|                       |     "description": "IPAM this local subnet uses.",                                                                                                                                   |
|                       |     "output_key": "ipam"                                                                                                                                                             |
|                       |   },                                                                                                                                                                                 |
|                       |   {                                                                                                                                                                                  |
|                       |     "output_value": "323017d2-b9fc-4407-b998-e4776b16aee8",                                                                                                                          |
|                       |     "description": "A unique id for the local subnet.",                                                                                                                              |
|                       |     "output_key": "id"                                                                                                                                                               |
|                       |   }                                                                                                                                                                                  |
|                       | ]                                                                                                                                                                                    |
| parameters            | {                                                                                                                                                                                    |
|                       |   "OS::stack_name": "subnet_e825f4e4-ba44-4d9e-9578-a31ad45bedda",                                                                                                                   |
|                       |   "enable_dhcp": "True",                                                                                                                                                             |
|                       |   "network_id": "afa0d9d6-84dc-4755-9c6e-db2f23f9dde2",                                                                                                                              |
|                       |   "ipam": "default-domain:default-project:default-network-ipam",                                                                                                                     |
|                       |   "dns_nameservers": "",                                                                                                                                                             |
|                       |   "dhcp_server_address": "172.16.101.2",                                                                                                                                             |
|                       |   "OS::stack_id": "a88b397a-8099-4c6f-8063-26b1855ac113",                                                                                                                            |
|                       |   "ntp_servers": "",                                                                                                                                                                 |
|                       |   "allocation_pools": "[{u'start': u'172.16.101.2', u'end': u'172.16.101.254'}]",                                                                                                    |
|                       |   "gateway_ip": "172.16.101.1",                                                                                                                                                      |
|                       |   "host_routes": "[]",                                                                                                                                                               |
|                       |   "cidr": "172.16.101.0/24",                                                                                                                                                         |
|                       |   "name": "e825f4e4-ba44-4d9e-9578-a31ad45bedda"                                                                                                                                     |
|                       | }                                                                                                                                                                                    |
| parent                | None                                                                                                                                                                                 |
| stack_name            | subnet_e825f4e4-ba44-4d9e-9578-a31ad45bedda                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                      |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                  |
| stack_user_project_id | b3e3095c0a5b4383805efe9cf2a6b5ef                                                                                                                                                     |
| template_description  | Subnet template                                                                                                                                                                      |
| timeout_mins          | 3                                                                                                                                                                                    |
| updated_time          | None                                                                                                                                                                                 |
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show subnet_e825f4e4-ba44-4d9e-9578-a31ad45bedda
description: 'Subnet template

  '
heat_template_version: '2013-05-23'
outputs:
  default_gateway:
    description: Default gateway of local subnet.
    value:
      get_attr: [subnet, default_gateway]
  id:
    description: A unique id for the local subnet.
    value: {get_resource: subnet}
  ip_prefix:
    description: IP prefix of local subnet.
    value:
      get_attr: [subnet, ip_prefix]
  ipam:
    description: IPAM this local subnet uses.
    value:
      get_attr: [subnet, ipam]
  name:
    description: The name of the local subnet.
    value:
      get_attr: [subnet, name]
  network_id:
    description: A unique id for the network.
    value:
      get_attr: [subnet, network_id]
parameters:
  allocation_pools:
    default: []
    description: Allocation Pools
    label: Allocation Pools
    type: string
  cidr: {description: IP prefix of the local subnet that will be created., label: Local
      Subnet IP prefix, type: string}
  dhcp_server_address: {default: 0.0.0.0, description: DHCP Server address, label: DHCP
      Server address, type: string}
  dns_nameservers:
    default: []
    description: DNS Nameservers List
    label: DNS Nameservers List
    type: comma_delimited_list
  enable_dhcp: {default: true, description: Enable DHCP, label: Enable DHCP, type: boolean}
  gateway_ip: {default: 0.0.0.0, description: Default gateway for the local subnet
      that will be created., label: Default Gateway, type: string}
  host_routes:
    default: []
    description: Host Routes
    label: Host Routes
    type: json
  ipam: {default: '', description: IPAM for the local subnet that will be created.,
    label: IP Address Management, type: string}
  name: {description: Name of the local subnet that will be created., label: Local
      Subnet Name, type: string}
  network_id: {description: ID of the network for which subnet will be created., label: Network
      ID, type: string}
  ntp_servers:
    default: []
    description: NTP Nameservers List
    label: NTP Nameservers List
    type: comma_delimited_list
resources:
  subnet:
    properties:
      allocation_pools: {get_param: allocation_pools}
      default_gateway: {get_param: gateway_ip}
      dns_nameservers: {get_param: dns_nameservers}
      dns_server_address: {get_param: dhcp_server_address}
      enable_dhcp: {get_param: enable_dhcp}
      gateway_is_vrouter: false
      host_routes: {get_param: host_routes}
      ip_prefix: {get_param: cidr}
      ipam: {get_param: ipam}
      name: {get_param: name}
      network_id: {get_param: network_id}
      ntp_servers: {get_param: ntp_servers}
    type: OS::Contrail::VnSubnet

### Create Gw Interface ###
name:[sample-gw-interface], id:[3dbcfce5-bca5-4182-991a-c23de685fcf1]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
00:12:28.006247  00:12:29.338247  1.332000        POST     201    PENDING_CREATE
00:12:29.338824  00:12:29.466030  0.127206         GET     200    PENDING_CREATE
00:12:30.466455  00:12:30.541776  0.075321         GET     200    PENDING_CREATE
00:12:31.542999  00:12:31.618533  0.075534         GET     200    PENDING_CREATE
00:12:32.619755  00:12:32.700466  0.080711         GET     200    PENDING_CREATE
00:12:33.701684  00:12:33.773734  0.072050         GET     200    PENDING_CREATE
00:12:34.774978  00:12:34.846989  0.072011         GET     200    PENDING_CREATE
00:12:35.848765  00:12:35.921828  0.073063         GET     200    PENDING_CREATE
00:12:36.923131  00:12:36.994872  0.071741         GET     200    PENDING_CREATE
00:12:37.996118  00:12:38.065105  0.068987         GET     200    PENDING_CREATE
00:12:39.066369  00:12:39.147661  0.081292         GET     200    PENDING_CREATE
00:12:40.148541  00:12:40.221012  0.072471         GET     200    PENDING_CREATE
00:12:41.222342  00:12:41.291435  0.069093         GET     200    PENDING_CREATE
00:12:42.292761  00:12:42.368722  0.075961         GET     200    PENDING_CREATE
00:12:43.370073  00:12:43.441928  0.071855         GET     200    PENDING_CREATE
00:12:44.443029  00:12:44.515966  0.072937         GET     200    PENDING_CREATE
00:12:45.516906  00:12:45.587851  0.070945         GET     200    PENDING_CREATE
00:12:46.588521  00:12:46.659964  0.071443         GET     200    PENDING_CREATE
00:12:47.660520  00:12:47.735571  0.075051         GET     200    PENDING_CREATE
00:12:48.736876  00:12:48.809228  0.072352         GET     200    PENDING_CREATE
00:12:49.810525  00:12:50.091075  0.280550         GET     200    PENDING_CREATE
00:12:51.093091  00:12:51.167948  0.074857         GET     200    PENDING_CREATE
00:12:52.168504  00:12:52.253933  0.085429         GET     200    PENDING_CREATE
00:12:53.255146  00:12:53.329327  0.074181         GET     200    PENDING_CREATE
00:12:54.330559  00:12:54.470312  0.139753         GET     200    PENDING_CREATE
00:12:55.471005  00:12:55.579625  0.108620         GET     200    PENDING_CREATE
00:12:56.580533  00:12:56.657423  0.076890         GET     200    PENDING_CREATE
00:12:57.658640  00:12:57.732706  0.074066         GET     200    PENDING_CREATE
00:12:58.733453  00:12:58.843312  0.109859         GET     200    PENDING_CREATE
00:12:59.844541  00:12:59.948159  0.103618         GET     200    PENDING_CREATE
00:13:00.948498  00:13:01.036306  0.087808         GET     200    PENDING_CREATE
00:13:02.037309  00:13:02.107451  0.070142         GET     200    PENDING_CREATE
00:13:03.108723  00:13:03.180385  0.071662         GET     200    PENDING_CREATE
00:13:04.180994  00:13:04.259902  0.078908         GET     200    PENDING_CREATE
00:13:05.260525  00:13:05.338516  0.077991         GET     200    PENDING_CREATE
00:13:06.339192  00:13:06.414912  0.075720         GET     200    PENDING_CREATE
00:13:07.415657  00:13:07.488882  0.073225         GET     200    PENDING_CREATE
00:13:08.489800  00:13:08.558580  0.068780         GET     200    PENDING_CREATE
00:13:09.559901  00:13:09.631365  0.071464         GET     200    PENDING_CREATE
00:13:10.632694  00:13:10.710046  0.077352         GET     200    PENDING_CREATE
00:13:11.711606  00:13:11.781627  0.070021         GET     200    PENDING_CREATE
00:13:12.782863  00:13:12.856283  0.073420         GET     200    PENDING_CREATE
00:13:13.857537  00:13:13.929741  0.072204         GET     200    PENDING_CREATE
00:13:14.930518  00:13:15.004998  0.074480         GET     200    PENDING_CREATE
00:13:16.006278  00:13:16.082337  0.076059         GET     200    PENDING_CREATE
00:13:17.082673  00:13:17.152310  0.069637         GET     200    PENDING_CREATE
00:13:18.153699  00:13:18.225979  0.072280         GET     200    PENDING_CREATE
00:13:19.226804  00:13:19.298980  0.072176         GET     200    PENDING_CREATE
00:13:20.300238  00:13:20.370299  0.070061         GET     200    PENDING_CREATE
00:13:21.370913  00:13:21.450650  0.079737         GET     200    PENDING_CREATE
00:13:22.451919  00:13:22.525352  0.073433         GET     200    PENDING_CREATE
00:13:23.525743  00:13:23.601383  0.075640         GET     200    PENDING_CREATE
00:13:24.602587  00:13:24.854452  0.251865         GET     200    PENDING_CREATE
00:13:25.855721  00:13:25.927026  0.071305         GET     200    PENDING_CREATE
00:13:26.927755  00:13:27.003457  0.075702         GET     200    PENDING_CREATE
00:13:28.004529  00:13:28.074564  0.070035         GET     200    PENDING_CREATE
00:13:29.075817  00:13:29.152523  0.076706         GET     200    PENDING_CREATE
00:13:30.153812  00:13:30.229604  0.075792         GET     200    PENDING_CREATE
00:13:31.230842  00:13:31.305324  0.074482         GET     200    PENDING_CREATE
00:13:32.306562  00:13:32.395713  0.089151         GET     200    PENDING_CREATE
00:13:33.396955  00:13:33.465612  0.068657         GET     200    PENDING_CREATE
00:13:34.466045  00:13:34.536404  0.070359         GET     200    PENDING_CREATE
00:13:35.536768  00:13:35.606200  0.069432         GET     200    PENDING_CREATE
00:13:36.607440  00:13:36.676120  0.068680         GET     200    PENDING_CREATE
00:13:37.676529  00:13:37.748765  0.072236         GET     200    PENDING_CREATE
00:13:38.750014  00:13:38.822310  0.072296         GET     200    PENDING_CREATE
00:13:39.823177  00:13:39.894018  0.070841         GET     200    PENDING_CREATE
00:13:40.895252  00:13:40.966002  0.070750         GET     200    PENDING_CREATE
00:13:41.967298  00:13:42.043011  0.075713         GET     200    PENDING_CREATE
00:13:43.044027  00:13:43.117498  0.073471         GET     200    PENDING_CREATE
00:13:44.117837  00:13:44.189308  0.071471         GET     200    PENDING_CREATE
00:13:45.190452  00:13:45.260525  0.070073         GET     200    PENDING_CREATE
00:13:46.261043  00:13:46.335609  0.074566         GET     200    PENDING_CREATE
00:13:47.336508  00:13:47.447401  0.110893         GET     200    PENDING_CREATE
00:13:48.448718  00:13:48.518049  0.069331         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 80.511802

[localhost] local: gohan client gw_interface show --output-format json 3dbcfce5-bca5-4182-991a-c23de685fcf1
{
    "gw_interface": {
        "aws_gw_id": null,
        "azure_gw_id": null,
        "description": "Sample Gw-interface",
        "gcp_gw_id": null,
        "gw_vipv4": "172.16.101.151",
        "gw_vipv6": null,
        "id": "3dbcfce5-bca5-4182-991a-c23de685fcf1",
        "interdc_gw_id": null,
        "internet_gw_id": null,
        "name": "sample-gw-interface",
        "netmask": 24,
        "network_id": "afa0d9d6-84dc-4755-9c6e-db2f23f9dde2",
        "operational_state": "UP",
        "orchestration_state": "CREATE_COMPLETE",
        "primary_ipv4": "172.16.101.152",
        "primary_ipv6": null,
        "public_ip_id": null,
        "secondary_ipv4": "172.16.101.153",
        "secondary_ipv6": null,
        "service_type": "vpn",
        "status": "ACTIVE",
        "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef",
        "vpn_gw_id": "b1da850c-3344-4de2-aa18-d96a30b54f69",
        "vrid": 20
    }
}

############################################
### checking heat-stack (gw_interfaces) ####
############################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/gw_interfaces/3dbcfce5-bca5-4182-991a-c23de685fcf1
[localhost] local: heat stack-show gw_interface_3dbcfce5-bca5-4182-991a-c23de685fcf1
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                      |
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                         |
| creation_time         | 2018-04-16T00:12:30Z                                                                                                                                                                       |
| description           | Inet Address                                                                                                                                                                               |
| disable_rollback      | True                                                                                                                                                                                       |
| id                    | 8be0df63-af3a-4d9c-a773-2334c72e858b                                                                                                                                                       |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/b3e3095c0a5b4383805efe9cf2a6b5ef/stacks/gw_interface_3dbcfce5-bca5-4182-991a-c23de685fcf1/8be0df63-af3a-4d9c-a773-2334c72e858b |
| notification_topics   | []                                                                                                                                                                                         |
| outputs               | [                                                                                                                                                                                          |
|                       |   {                                                                                                                                                                                        |
|                       |     "output_value": "8ac03032-a027-4965-b636-32a7b1281bfc",                                                                                                                                |
|                       |     "description": "Monitoring Target ID",                                                                                                                                                 |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                                   |
|                       |   },                                                                                                                                                                                       |
|                       |   {                                                                                                                                                                                        |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/8ac03032-a027-4965-b636-32a7b1281bfc",                                                       |
|                       |     "description": "Monitoring Process Link",                                                                                                                                              |
|                       |     "output_key": "monitoring_link"                                                                                                                                                        |
|                       |   }                                                                                                                                                                                        |
|                       | ]                                                                                                                                                                                          |
| parameters            | {                                                                                                                                                                                          |
|                       |   "secondary_device_physical_interface": "ae0",                                                                                                                                            |
|                       |   "secondary_ibgp_config_group": "VPNGW2-RI-IBGP",                                                                                                                                         |
|                       |   "primary_device_password": "******",                                                                                                                                                     |
|                       |   "secondary_device_gw_ip": "172.16.101.153",                                                                                                                                              |
|                       |   "gohan_id": "3dbcfce5-bca5-4182-991a-c23de685fcf1",                                                                                                                                      |
|                       |   "bgp_group_name": "inet-gw-group",                                                                                                                                                       |
|                       |   "OS::stack_name": "gw_interface_3dbcfce5-bca5-4182-991a-c23de685fcf1",                                                                                                                   |
|                       |   "gw_vip": "172.16.101.151",                                                                                                                                                              |
|                       |   "primary_device_ip": "10.79.5.185",                                                                                                                                                      |
|                       |   "version": "1",                                                                                                                                                                          |
|                       |   "secondary_device_username": "esi",                                                                                                                                                      |
|                       |   "downlink_vlan_id": "1025",                                                                                                                                                              |
|                       |   "secondary_logical_interface_name": "ae0.1025",                                                                                                                                          |
|                       |   "primary_logical_interface_name": "ae0.1025",                                                                                                                                            |
|                       |   "local_as": "65101",                                                                                                                                                                     |
|                       |   "primary_device_gw_ip": "172.16.101.152",                                                                                                                                                |
|                       |   "netmask": "24",                                                                                                                                                                         |
|                       |   "primary_device_physical_interface": "ae0",                                                                                                                                              |
|                       |   "vrrp_group": "20",                                                                                                                                                                      |
|                       |   "primary_device_priority": "105",                                                                                                                                                        |
|                       |   "OS::stack_id": "8be0df63-af3a-4d9c-a773-2334c72e858b",                                                                                                                                  |
|                       |   "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef",                                                                                                                                         |
|                       |   "secondary_device_port": "830",                                                                                                                                                          |
|                       |   "secondary_device_password": "******",                                                                                                                                                   |
|                       |   "vrf_name": "vrf_gw_sample-ha-router-downlink_1025",                                                                                                                                     |
|                       |   "primary_device_username": "esi",                                                                                                                                                        |
|                       |   "secondary_device_priority": "100",                                                                                                                                                      |
|                       |   "primary_ibgp_config_group": "VPNGW1-RI-IBGP",                                                                                                                                           |
|                       |   "primary_device_port": "830",                                                                                                                                                            |
|                       |   "secondary_device_ip": "10.79.5.184"                                                                                                                                                     |
|                       | }                                                                                                                                                                                          |
| parent                | None                                                                                                                                                                                       |
| stack_name            | gw_interface_3dbcfce5-bca5-4182-991a-c23de685fcf1                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                      |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                            |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                        |
| stack_user_project_id | b3e3095c0a5b4383805efe9cf2a6b5ef                                                                                                                                                           |
| template_description  | Inet Address                                                                                                                                                                               |
| timeout_mins          | 60                                                                                                                                                                                         |
| updated_time          | None                                                                                                                                                                                       |
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show gw_interface_3dbcfce5-bca5-4182-991a-c23de685fcf1
description: 'Inet Address

  '
heat_template_version: '2013-05-23'
outputs:
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [vrrp_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: vrrp_monitor}
parameters:
  bgp_group_name: {label: Name of BGP Group on VRF, type: string}
  downlink_vlan_id: {description: Vlan tag for mx logical downlink interface, label: Vlan
      Tag, type: string}
  gohan_id: {description: UUID of the GW Interface, label: Gohan resource ID, type: string}
  gw_vip: {description: Virtual IP configured on VRRP, label: Inet Address CIDR, type: string}
  local_as: {label: Local AS Number, type: string}
  netmask: {description: Netmask for gw_ip, label: Netmask, type: number}
  primary_device_gw_ip: {description: IP on primary device, label: Inet Address CIDR,
    type: string}
  primary_device_ip: {description: Ip address that will be used to establish ssh connection
      to the Primary Device., label: Ip address of the device., type: string}
  primary_device_password: {description: Password of the user which will be used to
      log onto the Primary Device., hidden: true, label: Users password., type: string}
  primary_device_physical_interface: {description: MX physical port on which logical
      interface will be created, label: Underlying physical interface, type: string}
  primary_device_port: {description: Port that will be used to establish ssh connection
      to the Primary Device., label: Port of the ssh connection., type: number}
  primary_device_priority: {label: Primary device priority, type: string}
  primary_device_username: {description: Name of the user which will be used to log
      onto the Primary Device., label: User name to log on to device., type: string}
  primary_ibgp_config_group: {description: Name for apply group to use for downlink
      interface, label: Apply group name, type: string}
  primary_logical_interface_name: {description: MX logical port, label: Underlying
      logical interface, type: string}
  secondary_device_gw_ip: {description: IP on secondary device, label: Inet Address
      CIDR, type: string}
  secondary_device_ip: {description: Ip address that will be used to establish ssh
      connection to the Secondary Device., label: Ip address of the device., type: string}
  secondary_device_password: {description: Password of the user which will be used
      to log onto the Secondary Device., hidden: true, label: Users password., type: string}
  secondary_device_physical_interface: {description: MX physical port on which logical
      interface will be created, label: Underlying physical interface, type: string}
  secondary_device_port: {description: Port that will be used to establish ssh connection
      to the Secondary Device., label: Port of the ssh connection., type: number}
  secondary_device_priority: {label: Secondary device priority, type: string}
  secondary_device_username: {description: Name of the user which will be used to
      log onto the Secondary Device., label: User name to log on to device., type: string}
  secondary_ibgp_config_group: {description: Name for apply group to use for downlink
      interface, label: Apply group name, type: string}
  secondary_logical_interface_name: {description: MX logical port, label: Underlying
      logical interface, type: string}
  tenant_id: {label: Tenant ID, type: string}
  version: {label: Config version, type: number}
  vrf_name: {label: VRF, type: string}
  vrrp_group: {label: VRRP Group, type: string}
resources:
  netconf_configure_primary:
    properties:
      configs:
      - config:
          str_replace:
            params:
              $PRIORITY: {get_param: primary_device_priority}
              $VIP: {get_param: gw_vip}
              $VRRP_GROUP: {get_param: vrrp_group}
            template: "vrrp-group $VRRP_GROUP {\n    virtual-address $VIP;\n    priority\
              \ $PRIORITY;\n}\n"
        path:
        - {config_type: tag, tag: interfaces, xml_type: tag}
        - config_type: name
          name: {get_param: primary_device_physical_interface}
          tag: interface
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: downlink_vlan_id}
          tag: unit
          xml_type: named_tag
        - {config_type: tag, tag: family, xml_type: tag}
        - {config_type: tag, tag: inet, xml_type: tag}
        - config_type: named_tag
          name:
            str_replace:
              params:
                $DEVICE_IP: {get_param: primary_device_gw_ip}
                $NETMASK: {get_param: netmask}
              template: '$DEVICE_IP/$NETMASK

                '
          tag: address
          xml_type: named_tag
      - config:
          str_replace:
            params:
              $APPLY_GROUP: {get_param: primary_ibgp_config_group}
              $DEVICE_GW_IP: {get_param: primary_device_gw_ip}
              $LOCAL_AS: {get_param: local_as}
              $NEIGHBOR_GW_IP: {get_param: secondary_device_gw_ip}
            template: 'apply-groups $APPLY_GROUP;

              local-address $DEVICE_GW_IP;

              peer-as $LOCAL_AS;

              neighbor $NEIGHBOR_GW_IP;

              '
        path:
        - {config_type: tag, tag: routing-instances, xml_type: tag}
        - config_type: name
          name: {get_param: vrf_name}
          tag: instance
          xml_type: named_tag
        - {config_type: tag, tag: protocols, xml_type: tag}
        - {config_type: tag, tag: bgp, xml_type: tag}
        - config_type: named_tag
          name: {get_param: bgp_group_name}
          tag: group
          xml_type: named_tag
      device_ip: {get_param: primary_device_ip}
      lock_timeout: 3000
      password: {get_param: primary_device_password}
      port: {get_param: primary_device_port}
      username: {get_param: primary_device_username}
    type: OS::Contrail::NetconfNamedConfigs
  netconf_configure_secondary:
    depends_on: netconf_configure_primary
    properties:
      configs:
      - config:
          str_replace:
            params:
              $PRIORITY: {get_param: secondary_device_priority}
              $VIP: {get_param: gw_vip}
              $VRRP_GROUP: {get_param: vrrp_group}
            template: "vrrp-group $VRRP_GROUP {\n    virtual-address $VIP;\n    priority\
              \ $PRIORITY;\n}\n"
        path:
        - {config_type: tag, tag: interfaces, xml_type: tag}
        - config_type: name
          name: {get_param: secondary_device_physical_interface}
          tag: interface
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: downlink_vlan_id}
          tag: unit
          xml_type: named_tag
        - {config_type: tag, tag: family, xml_type: tag}
        - {config_type: tag, tag: inet, xml_type: tag}
        - config_type: named_tag
          name:
            str_replace:
              params:
                $DEVICE_IP: {get_param: secondary_device_gw_ip}
                $NETMASK: {get_param: netmask}
              template: '$DEVICE_IP/$NETMASK

                '
          tag: address
          xml_type: named_tag
      - config:
          str_replace:
            params:
              $APPLY_GROUP: {get_param: secondary_ibgp_config_group}
              $DEVICE_GW_IP: {get_param: secondary_device_gw_ip}
              $LOCAL_AS: {get_param: local_as}
              $NEIGHBOR_GW_IP: {get_param: primary_device_gw_ip}
            template: 'apply-groups $APPLY_GROUP;

              local-address $DEVICE_GW_IP;

              peer-as $LOCAL_AS;

              neighbor $NEIGHBOR_GW_IP;

              '
        path:
        - {config_type: tag, tag: routing-instances, xml_type: tag}
        - config_type: name
          name: {get_param: vrf_name}
          tag: instance
          xml_type: named_tag
        - {config_type: tag, tag: protocols, xml_type: tag}
        - {config_type: tag, tag: bgp, xml_type: tag}
        - config_type: named_tag
          name: {get_param: bgp_group_name}
          tag: group
          xml_type: named_tag
      device_ip: {get_param: secondary_device_ip}
      lock_timeout: 3000
      password: {get_param: secondary_device_password}
      port: {get_param: secondary_device_port}
      username: {get_param: secondary_device_username}
    type: OS::Contrail::NetconfNamedConfigs
  vrrp_monitor:
    depends_on: netconf_configure_secondary
    properties:
      field_name: status
      properties:
        primary:
          host: {get_param: primary_device_ip}
          interface: {get_param: primary_logical_interface_name}
          login: {get_param: primary_device_username}
          password: {get_param: primary_device_password}
          port: {get_param: primary_device_port}
        secondary:
          host: {get_param: secondary_device_ip}
          interface: {get_param: secondary_logical_interface_name}
          login: {get_param: secondary_device_username}
          password: {get_param: secondary_device_password}
          port: {get_param: secondary_device_port}
        vrid:
        - {get_param: vrrp_group}
      resource_id: {get_param: gohan_id}
      resource_type: gw_interfaces
      syncer_properties:
        etcd:
          hold_options:
            positive_status: {primary: MASTER, secondary: BACKUP}
            time_seconds: 360
          status: {key: status}
      tenant_id: {get_param: tenant_id}
      type: vrrp_pool
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget

[localhost] local: gohan client ese_logical_port list --output-format json
[localhost] local: gohan client ese_logical_port show --output-format json 257d0a9f-d5ae-4a93-9af4-81ad611e1b0d
{
    "ese_logical_port": {
        "common_function_gateway_id": null,
        "connected_resource": "gw_interface",
        "description": "ESE Logical port for Port 53eeb091-3297-4b9b-a200-b6568567e387",
        "ese_physical_port_id": "a6e70af1-386b-4d79-943f-6f44e87f95b3",
        "gw_interface_id": "3dbcfce5-bca5-4182-991a-c23de685fcf1",
        "id": "257d0a9f-d5ae-4a93-9af4-81ad611e1b0d",
        "name": "xe-0/0/4.1025",
        "network_id": "afa0d9d6-84dc-4755-9c6e-db2f23f9dde2",
        "operational_state": "UP",
        "orchestration_state": "CREATE_COMPLETE",
        "port_ids": [
            "53eeb091-3297-4b9b-a200-b6568567e387"
        ],
        "status": "ACTIVE",
        "tags": {},
        "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef",
        "type": "L2",
        "vlan_id": 1025
    }
}

################################################
### checking heat-stack (ese_logical_ports) ####
################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/ese_logical_ports/257d0a9f-d5ae-4a93-9af4-81ad611e1b0d
[localhost] local: heat stack-show ese_logical_port_257d0a9f-d5ae-4a93-9af4-81ad611e1b0d
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                          |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                             |
| creation_time         | 2018-04-16T00:12:55Z                                                                                                                                                                           |
| description           | Logical port template                                                                                                                                                                          |
| disable_rollback      | True                                                                                                                                                                                           |
| id                    | 86ec2196-2feb-4570-a6d6-015bbec7f0d7                                                                                                                                                           |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/b3e3095c0a5b4383805efe9cf2a6b5ef/stacks/ese_logical_port_257d0a9f-d5ae-4a93-9af4-81ad611e1b0d/86ec2196-2feb-4570-a6d6-015bbec7f0d7 |
| notification_topics   | []                                                                                                                                                                                             |
| outputs               | [                                                                                                                                                                                              |
|                       |   {                                                                                                                                                                                            |
|                       |     "output_value": "5e4c28ad-c5f2-43fc-97e8-1b5e99642b87",                                                                                                                                    |
|                       |     "description": "Monitoring Target ID",                                                                                                                                                     |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                                       |
|                       |   },                                                                                                                                                                                           |
|                       |   {                                                                                                                                                                                            |
|                       |     "output_value": "46b0cd68-d0fb-4d72-9def-830164f9e215",                                                                                                                                    |
|                       |     "description": "A unique id for the logical interface",                                                                                                                                    |
|                       |     "output_key": "id"                                                                                                                                                                         |
|                       |   },                                                                                                                                                                                           |
|                       |   {                                                                                                                                                                                            |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/5e4c28ad-c5f2-43fc-97e8-1b5e99642b87",                                                           |
|                       |     "description": "Monitoring Process Link",                                                                                                                                                  |
|                       |     "output_key": "monitoring_link"                                                                                                                                                            |
|                       |   },                                                                                                                                                                                           |
|                       |   {                                                                                                                                                                                            |
|                       |     "output_value": "xe-0/0/38.0",                                                                                                                                                             |
|                       |     "description": "The name of the logical interface.",                                                                                                                                       |
|                       |     "output_key": "name"                                                                                                                                                                       |
|                       |   }                                                                                                                                                                                            |
|                       | ]                                                                                                                                                                                              |
| parameters            | {                                                                                                                                                                                              |
|                       |   "logical_port_type": "L2",                                                                                                                                                                   |
|                       |   "logical_port_vlan_id": "1025",                                                                                                                                                              |
|                       |   "OS::stack_name": "ese_logical_port_257d0a9f-d5ae-4a93-9af4-81ad611e1b0d",                                                                                                                   |
|                       |   "virtual_machine_interface_ids": "f68d0924-ef20-4c1b-ac45-0e6b879af5e7",                                                                                                                     |
|                       |   "device_ip": "10.161.0.34",                                                                                                                                                                  |
|                       |   "OS::stack_id": "86ec2196-2feb-4570-a6d6-015bbec7f0d7",                                                                                                                                      |
|                       |   "version": "1",                                                                                                                                                                              |
|                       |   "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef",                                                                                                                                             |
|                       |   "logical_port_name": "xe-0/0/4.1025",                                                                                                                                                        |
|                       |   "gohan_id": "257d0a9f-d5ae-4a93-9af4-81ad611e1b0d",                                                                                                                                          |
|                       |   "physical_port_id": "06bfe521-07f0-4931-9f8c-318c3ad8114e"                                                                                                                                   |
|                       | }                                                                                                                                                                                              |
| parent                | None                                                                                                                                                                                           |
| stack_name            | ese_logical_port_257d0a9f-d5ae-4a93-9af4-81ad611e1b0d                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                          |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                                |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                            |
| stack_user_project_id | b3e3095c0a5b4383805efe9cf2a6b5ef                                                                                                                                                               |
| template_description  | Logical port template                                                                                                                                                                          |
| timeout_mins          | 6                                                                                                                                                                                              |
| updated_time          | None                                                                                                                                                                                           |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show ese_logical_port_257d0a9f-d5ae-4a93-9af4-81ad611e1b0d
description: 'Logical port template

  '
heat_template_version: '2013-05-23'
outputs:
  id:
    description: A unique id for the logical interface
    value: {get_resource: logical_interface}
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [interface_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: interface_monitor}
  name:
    description: The name of the logical interface.
    value:
      get_attr: [logical_interface, name]
parameters:
  device_ip: {description: Device IP Address., label: Device IP Address, type: string}
  gohan_id: {description: UUID of the ESE Physical Port, label: Gohan resource ID,
    type: string}
  logical_port_name: {description: Name of the logical port., label: Logical Port
      Name, type: string}
  logical_port_type: {description: Type of the logical port., label: Logical Port
      Type, type: string}
  logical_port_vlan_id: {default: 0, description: VLAN id to use for logical port
      creation., label: VLAN id for Logical Port, type: number}
  physical_port_id: {description: A unique id for the Physical Interface., label: Physical
      Interface ID, type: string}
  tenant_id: {label: Tenant ID, type: string}
  version: {label: Config version, type: number}
  virtual_machine_interface_ids: {description: Virtual Machine Interface ID., label: Virtual
      Machine Interface ID, type: comma_delimited_list}
resources:
  interface_monitor:
    depends_on: logical_interface
    properties:
      field_name: logical_port
      properties:
        community_name: ESE_NODE_COMMUNITY
        device_ip: {get_param: device_ip}
        if_name: {get_param: logical_port_name}
      resource_id: {get_param: gohan_id}
      resource_type: ese_logical_ports
      syncer_properties:
        etcd:
          status: {key: logical_port}
        tsdb:
          traffic.in:
            metric: traffic.bytes
            tags:
            - direction: in
              port_id: 53eeb091-3297-4b9b-a200-b6568567e387
              resource_id: {get_param: gohan_id}
          traffic.out:
            metric: traffic.bytes
            tags:
            - direction: out
              port_id: 53eeb091-3297-4b9b-a200-b6568567e387
              resource_id: {get_param: gohan_id}
      tenant_id: {get_param: tenant_id}
      type: snmp_ports
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget
  logical_interface:
    properties:
      name: {get_param: logical_port_name}
      physical_interface: {get_param: physical_port_id}
      type: {get_param: logical_port_type}
      virtual_machine_interfaces: {get_param: virtual_machine_interface_ids}
      vlan: {get_param: logical_port_vlan_id}
    type: OS::Contrail::LogicalInterface

[localhost] local: gohan client port show --output-format json 53eeb091-3297-4b9b-a200-b6568567e387
{
    "port": {
        "admin_state_up": true,
        "allowed_address_pairs": [],
        "attached": true,
        "binding:vif_type": "vrouter",
        "description": "",
        "device_id": "3dbcfce5-bca5-4182-991a-c23de685fcf1",
        "device_owner": "network:gw_interface",
        "ese_logical_port_id": "257d0a9f-d5ae-4a93-9af4-81ad611e1b0d",
        "fake_delete": false,
        "fixed_ips": [
            {
                "ip_address": "172.16.101.153",
                "subnet_id": "e825f4e4-ba44-4d9e-9578-a31ad45bedda"
            }
        ],
        "id": "53eeb091-3297-4b9b-a200-b6568567e387",
        "mac_address": "fa:16:3e:7b:6f:90",
        "managed_by_service": true,
        "name": "Port for : a6e70af1-386b-4d79-943f-6f44e87f95b3",
        "network_id": "afa0d9d6-84dc-4755-9c6e-db2f23f9dde2",
        "operational_state": "FAIL",
        "orchestration_state": "UPDATE_COMPLETE",
        "security_groups": [],
        "segmentation_id": 1025,
        "segmentation_type": "vlan",
        "status": "MONITORING_UNAVAILABLE",
        "tags": {},
        "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef"
    }
}

########################################################
### checking heat-stack (ports) for UPDATE_COMPLETE ####
########################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/ports/53eeb091-3297-4b9b-a200-b6568567e387
[localhost] local: heat stack-show port_53eeb091-3297-4b9b-a200-b6568567e387
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                              |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                 |
| creation_time         | 2018-04-16T00:12:50Z                                                                                                                                                               |
| description           | Virtual Machine Interface Template                                                                                                                                                 |
| disable_rollback      | True                                                                                                                                                                               |
| id                    | ac4a2bed-a757-4419-b41c-19adfe1a46bf                                                                                                                                               |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/b3e3095c0a5b4383805efe9cf2a6b5ef/stacks/port_53eeb091-3297-4b9b-a200-b6568567e387/ac4a2bed-a757-4419-b41c-19adfe1a46bf |
| notification_topics   | []                                                                                                                                                                                 |
| outputs               | [                                                                                                                                                                                  |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": "default-domain:admin:f68d0924-ef20-4c1b-ac45-0e6b879af5e7",                                                                                                   |
|                       |     "description": "Fully Qualified Name of the VMI",                                                                                                                              |
|                       |     "output_key": "fq_name"                                                                                                                                                        |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": {                                                                                                                                                              |
|                       |       "allowed_address_pair": []                                                                                                                                                   |
|                       |     },                                                                                                                                                                             |
|                       |     "description": "Virtual machine allowed address pairs.",                                                                                                                       |
|                       |     "output_key": "allowed_address_pairs"                                                                                                                                          |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": "aa5568e3-f399-474f-9ddb-02c0e583b91b",                                                                                                                        |
|                       |     "description": "Monitoring Target ID",                                                                                                                                         |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                           |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": [                                                                                                                                                              |
|                       |       "fa:16:3e:f7:60:7f"                                                                                                                                                          |
|                       |     ],                                                                                                                                                                             |
|                       |     "description": "Virtual machine interface mac address.",                                                                                                                       |
|                       |     "output_key": "mac_address"                                                                                                                                                    |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": [                                                                                                                                                              |
|                       |       [                                                                                                                                                                            |
|                       |         "default-domain",                                                                                                                                                          |
|                       |         "admin",                                                                                                                                                                   |
|                       |         "b62eefe0-0872-478d-adfe-1a606320f0e7"                                                                                                                                     |
|                       |       ]                                                                                                                                                                            |
|                       |     ],                                                                                                                                                                             |
|                       |     "description": "Virtual network.",                                                                                                                                             |
|                       |     "output_key": "virtual_network"                                                                                                                                                |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": "f68d0924-ef20-4c1b-ac45-0e6b879af5e7",                                                                                                                        |
|                       |     "description": "A unique id for the virtual machine interface.",                                                                                                               |
|                       |     "output_key": "id"                                                                                                                                                             |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/aa5568e3-f399-474f-9ddb-02c0e583b91b",                                               |
|                       |     "description": "Monitoring Process Link",                                                                                                                                      |
|                       |     "output_key": "monitoring_link"                                                                                                                                                |
|                       |   }                                                                                                                                                                                |
|                       | ]                                                                                                                                                                                  |
| parameters            | {                                                                                                                                                                                  |
|                       |   "virtual_machine": "3dbcfce5-bca5-4182-991a-c23de685fcf1",                                                                                                                       |
|                       |   "uuid": "53eeb091-3297-4b9b-a200-b6568567e387",                                                                                                                                  |
|                       |   "OS::stack_name": "port_53eeb091-3297-4b9b-a200-b6568567e387",                                                                                                                   |
|                       |   "admin_state_up": "True",                                                                                                                                                        |
|                       |   "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef",                                                                                                                                 |
|                       |   "virtual_machine_interface_allowed_address_pairs": "null",                                                                                                                       |
|                       |   "virtual_machine_interface_mac_address": "fa:16:3e:7b:6f:90",                                                                                                                    |
|                       |   "OS::stack_id": "ac4a2bed-a757-4419-b41c-19adfe1a46bf",                                                                                                                          |
|                       |   "device_owner": "network:gw_interface",                                                                                                                                          |
|                       |   "version": "2",                                                                                                                                                                  |
|                       |   "virtual_network": "afa0d9d6-84dc-4755-9c6e-db2f23f9dde2",                                                                                                                       |
|                       |   "security_groups": "[]",                                                                                                                                                         |
|                       |   "name": "53eeb091-3297-4b9b-a200-b6568567e387"                                                                                                                                   |
|                       | }                                                                                                                                                                                  |
| parent                | None                                                                                                                                                                               |
| stack_name            | port_53eeb091-3297-4b9b-a200-b6568567e387                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                              |
| stack_status          | UPDATE_COMPLETE                                                                                                                                                                    |
| stack_status_reason   | Stack successfully updated                                                                                                                                                         |
| stack_user_project_id | b3e3095c0a5b4383805efe9cf2a6b5ef                                                                                                                                                   |
| template_description  | Virtual Machine Interface Template                                                                                                                                                 |
| timeout_mins          | 13                                                                                                                                                                                 |
| updated_time          | 2018-04-16T00:13:00Z                                                                                                                                                               |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show port_53eeb091-3297-4b9b-a200-b6568567e387
description: 'Virtual Machine Interface Template

  '
heat_template_version: '2013-05-23'
outputs:
  allowed_address_pairs:
    description: Virtual machine allowed address pairs.
    value:
      get_attr: [virtual_machine_interface, virtual_machine_interface_allowed_address_pairs]
  fq_name:
    description: Fully Qualified Name of the VMI
    value:
      get_attr: [virtual_machine_interface, fq_name]
  id:
    description: A unique id for the virtual machine interface.
    value: {get_resource: virtual_machine_interface}
  mac_address:
    description: Virtual machine interface mac address.
    value:
      get_attr: [virtual_machine_interface, virtual_machine_interface_mac_addresses]
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [vmi_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: vmi_monitor}
  virtual_network:
    description: Virtual network.
    value:
      get_attr: [virtual_machine_interface, virtual_networks]
parameters:
  admin_state_up: {default: true, label: Admin state up, type: boolean}
  device_owner: {default: '', label: Device Owner, type: string}
  name: {description: A unique id for the Physical Interface., label: Physical Interface
      ID, type: string}
  security_groups:
    default: []
    description: The IDs of security groups applied to the port.
    label: Security Groups List
    type: json
  tenant_id: {label: Tenant ID, type: string}
  uuid: {description: A unique id for the Virtual Machine Interface., label: Backend
      Virtual Machine Interface UUID, type: string}
  version: {label: Config version, type: number}
  virtual_machine: {default: '', label: Virtual Machine., type: string}
  virtual_machine_interface_allowed_address_pairs: {label: Virtual machine interface
      allowed address pairs., type: json}
  virtual_machine_interface_mac_address: {default: 'fe:ff:ff:ff:ff:ff', label: Virtual
      machine interface mac address., type: string}
  virtual_network: {label: Virtual Network., type: string}
resources:
  instance_ip_0:
    properties:
      ip_address: 172.16.101.153
      name:
        str_replace:
          params:
            '%ip%': 172.16.101.153
            '%name%': {get_param: name}
            '%zone%': e825f4e4-ba44-4d9e-9578-a31ad45bedda
          template: '%name%_%zone%_%ip%'
      network_id: {get_param: virtual_network}
      subnet_id: 323017d2-b9fc-4407-b998-e4776b16aee8
      virtual_machine_interfaces:
      - {get_resource: virtual_machine_interface}
    type: OS::Contrail::InstanceIp
  virtual_machine_interface:
    properties:
      admin_state_up: {get_param: admin_state_up}
      device_owner: {get_param: device_owner}
      name: {get_param: name}
      security_groups: {get_param: security_groups}
      uuid: {get_param: uuid}
      virtual_machine: {get_param: virtual_machine}
      virtual_machine_interface_allowed_address_pairs: {get_param: virtual_machine_interface_allowed_address_pairs}
      virtual_machine_interface_mac_addresses:
      - {get_param: virtual_machine_interface_mac_address}
      virtual_networks:
      - {get_param: virtual_network}
    type: OS::Contrail::VirtualMachineInterface
  vmi_monitor:
    depends_on: virtual_machine_interface
    properties:
      field_name: vmi
      properties:
        fq_name:
          get_attr: [virtual_machine_interface, fq_name]
      resource_id: {get_param: uuid}
      resource_type: ports
      syncer_properties:
        etcd:
          status: {key: vmi}
        tsdb:
          traffic.in:
            metric: traffic.contrail_bytes
            tags:
              direction: in
              resource_id: {get_param: uuid}
          traffic.out:
            metric: traffic.contrail_bytes
            tags:
              direction: out
              resource_id: {get_param: uuid}
      tenant_id: {get_param: tenant_id}
      type: virtual_machine_interface
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget

[localhost] local: gohan client ese_logical_port show --output-format json e30fdd19-2f48-422e-9c68-7c59a0e2fae8
{
    "ese_logical_port": {
        "common_function_gateway_id": null,
        "connected_resource": "gw_interface",
        "description": "ESE Logical port for Port 5eebab65-bf2f-4ac2-969a-15d6ccbfdd4b",
        "ese_physical_port_id": "0078808a-c28e-46e1-887d-8ec65f90c446",
        "gw_interface_id": "3dbcfce5-bca5-4182-991a-c23de685fcf1",
        "id": "e30fdd19-2f48-422e-9c68-7c59a0e2fae8",
        "name": "xe-0/0/3.1025",
        "network_id": "afa0d9d6-84dc-4755-9c6e-db2f23f9dde2",
        "operational_state": "UP",
        "orchestration_state": "CREATE_COMPLETE",
        "port_ids": [
            "5eebab65-bf2f-4ac2-969a-15d6ccbfdd4b"
        ],
        "status": "ACTIVE",
        "tags": {},
        "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef",
        "type": "L2",
        "vlan_id": 1025
    }
}

################################################
### checking heat-stack (ese_logical_ports) ####
################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/ese_logical_ports/e30fdd19-2f48-422e-9c68-7c59a0e2fae8
[localhost] local: heat stack-show ese_logical_port_e30fdd19-2f48-422e-9c68-7c59a0e2fae8
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                          |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                             |
| creation_time         | 2018-04-16T00:12:55Z                                                                                                                                                                           |
| description           | Logical port template                                                                                                                                                                          |
| disable_rollback      | True                                                                                                                                                                                           |
| id                    | d4e78191-1706-4db3-9681-ba771a6d6680                                                                                                                                                           |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/b3e3095c0a5b4383805efe9cf2a6b5ef/stacks/ese_logical_port_e30fdd19-2f48-422e-9c68-7c59a0e2fae8/d4e78191-1706-4db3-9681-ba771a6d6680 |
| notification_topics   | []                                                                                                                                                                                             |
| outputs               | [                                                                                                                                                                                              |
|                       |   {                                                                                                                                                                                            |
|                       |     "output_value": "fc210c75-e57f-4657-8114-a528d3b3aac5",                                                                                                                                    |
|                       |     "description": "Monitoring Target ID",                                                                                                                                                     |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                                       |
|                       |   },                                                                                                                                                                                           |
|                       |   {                                                                                                                                                                                            |
|                       |     "output_value": "46b0cd68-d0fb-4d72-9def-830164f9e215",                                                                                                                                    |
|                       |     "description": "A unique id for the logical interface",                                                                                                                                    |
|                       |     "output_key": "id"                                                                                                                                                                         |
|                       |   },                                                                                                                                                                                           |
|                       |   {                                                                                                                                                                                            |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/fc210c75-e57f-4657-8114-a528d3b3aac5",                                                           |
|                       |     "description": "Monitoring Process Link",                                                                                                                                                  |
|                       |     "output_key": "monitoring_link"                                                                                                                                                            |
|                       |   },                                                                                                                                                                                           |
|                       |   {                                                                                                                                                                                            |
|                       |     "output_value": "xe-0/0/38.0",                                                                                                                                                             |
|                       |     "description": "The name of the logical interface.",                                                                                                                                       |
|                       |     "output_key": "name"                                                                                                                                                                       |
|                       |   }                                                                                                                                                                                            |
|                       | ]                                                                                                                                                                                              |
| parameters            | {                                                                                                                                                                                              |
|                       |   "logical_port_type": "L2",                                                                                                                                                                   |
|                       |   "logical_port_vlan_id": "1025",                                                                                                                                                              |
|                       |   "OS::stack_name": "ese_logical_port_e30fdd19-2f48-422e-9c68-7c59a0e2fae8",                                                                                                                   |
|                       |   "virtual_machine_interface_ids": "f68d0924-ef20-4c1b-ac45-0e6b879af5e7",                                                                                                                     |
|                       |   "device_ip": "10.161.0.34",                                                                                                                                                                  |
|                       |   "OS::stack_id": "d4e78191-1706-4db3-9681-ba771a6d6680",                                                                                                                                      |
|                       |   "version": "1",                                                                                                                                                                              |
|                       |   "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef",                                                                                                                                             |
|                       |   "logical_port_name": "xe-0/0/3.1025",                                                                                                                                                        |
|                       |   "gohan_id": "e30fdd19-2f48-422e-9c68-7c59a0e2fae8",                                                                                                                                          |
|                       |   "physical_port_id": "06bfe521-07f0-4931-9f8c-318c3ad8114e"                                                                                                                                   |
|                       | }                                                                                                                                                                                              |
| parent                | None                                                                                                                                                                                           |
| stack_name            | ese_logical_port_e30fdd19-2f48-422e-9c68-7c59a0e2fae8                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                          |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                                |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                            |
| stack_user_project_id | b3e3095c0a5b4383805efe9cf2a6b5ef                                                                                                                                                               |
| template_description  | Logical port template                                                                                                                                                                          |
| timeout_mins          | 6                                                                                                                                                                                              |
| updated_time          | None                                                                                                                                                                                           |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show ese_logical_port_e30fdd19-2f48-422e-9c68-7c59a0e2fae8
description: 'Logical port template

  '
heat_template_version: '2013-05-23'
outputs:
  id:
    description: A unique id for the logical interface
    value: {get_resource: logical_interface}
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [interface_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: interface_monitor}
  name:
    description: The name of the logical interface.
    value:
      get_attr: [logical_interface, name]
parameters:
  device_ip: {description: Device IP Address., label: Device IP Address, type: string}
  gohan_id: {description: UUID of the ESE Physical Port, label: Gohan resource ID,
    type: string}
  logical_port_name: {description: Name of the logical port., label: Logical Port
      Name, type: string}
  logical_port_type: {description: Type of the logical port., label: Logical Port
      Type, type: string}
  logical_port_vlan_id: {default: 0, description: VLAN id to use for logical port
      creation., label: VLAN id for Logical Port, type: number}
  physical_port_id: {description: A unique id for the Physical Interface., label: Physical
      Interface ID, type: string}
  tenant_id: {label: Tenant ID, type: string}
  version: {label: Config version, type: number}
  virtual_machine_interface_ids: {description: Virtual Machine Interface ID., label: Virtual
      Machine Interface ID, type: comma_delimited_list}
resources:
  interface_monitor:
    depends_on: logical_interface
    properties:
      field_name: logical_port
      properties:
        community_name: ESE_NODE_COMMUNITY
        device_ip: {get_param: device_ip}
        if_name: {get_param: logical_port_name}
      resource_id: {get_param: gohan_id}
      resource_type: ese_logical_ports
      syncer_properties:
        etcd:
          status: {key: logical_port}
        tsdb:
          traffic.in:
            metric: traffic.bytes
            tags:
            - direction: in
              port_id: 5eebab65-bf2f-4ac2-969a-15d6ccbfdd4b
              resource_id: {get_param: gohan_id}
          traffic.out:
            metric: traffic.bytes
            tags:
            - direction: out
              port_id: 5eebab65-bf2f-4ac2-969a-15d6ccbfdd4b
              resource_id: {get_param: gohan_id}
      tenant_id: {get_param: tenant_id}
      type: snmp_ports
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget
  logical_interface:
    properties:
      name: {get_param: logical_port_name}
      physical_interface: {get_param: physical_port_id}
      type: {get_param: logical_port_type}
      virtual_machine_interfaces: {get_param: virtual_machine_interface_ids}
      vlan: {get_param: logical_port_vlan_id}
    type: OS::Contrail::LogicalInterface

[localhost] local: gohan client port show --output-format json 5eebab65-bf2f-4ac2-969a-15d6ccbfdd4b
{
    "port": {
        "admin_state_up": true,
        "allowed_address_pairs": [],
        "attached": true,
        "binding:vif_type": "vrouter",
        "description": "",
        "device_id": "3dbcfce5-bca5-4182-991a-c23de685fcf1",
        "device_owner": "network:gw_interface",
        "ese_logical_port_id": "e30fdd19-2f48-422e-9c68-7c59a0e2fae8",
        "fake_delete": false,
        "fixed_ips": [
            {
                "ip_address": "172.16.101.151",
                "subnet_id": "e825f4e4-ba44-4d9e-9578-a31ad45bedda"
            },
            {
                "ip_address": "172.16.101.152",
                "subnet_id": "e825f4e4-ba44-4d9e-9578-a31ad45bedda"
            }
        ],
        "id": "5eebab65-bf2f-4ac2-969a-15d6ccbfdd4b",
        "mac_address": "fa:16:3e:7b:eb:e8",
        "managed_by_service": true,
        "name": "Port for : 0078808a-c28e-46e1-887d-8ec65f90c446",
        "network_id": "afa0d9d6-84dc-4755-9c6e-db2f23f9dde2",
        "operational_state": "UP",
        "orchestration_state": "UPDATE_COMPLETE",
        "security_groups": [],
        "segmentation_id": 1025,
        "segmentation_type": "vlan",
        "status": "ACTIVE",
        "tags": {},
        "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef"
    }
}

########################################################
### checking heat-stack (ports) for UPDATE_COMPLETE ####
########################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/ports/5eebab65-bf2f-4ac2-969a-15d6ccbfdd4b
[localhost] local: heat stack-show port_5eebab65-bf2f-4ac2-969a-15d6ccbfdd4b
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                              |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                 |
| creation_time         | 2018-04-16T00:12:50Z                                                                                                                                                               |
| description           | Virtual Machine Interface Template                                                                                                                                                 |
| disable_rollback      | True                                                                                                                                                                               |
| id                    | bec6bc54-6873-47b3-a025-85e41532f7d2                                                                                                                                               |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/b3e3095c0a5b4383805efe9cf2a6b5ef/stacks/port_5eebab65-bf2f-4ac2-969a-15d6ccbfdd4b/bec6bc54-6873-47b3-a025-85e41532f7d2 |
| notification_topics   | []                                                                                                                                                                                 |
| outputs               | [                                                                                                                                                                                  |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": "default-domain:admin:f68d0924-ef20-4c1b-ac45-0e6b879af5e7",                                                                                                   |
|                       |     "description": "Fully Qualified Name of the VMI",                                                                                                                              |
|                       |     "output_key": "fq_name"                                                                                                                                                        |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": {                                                                                                                                                              |
|                       |       "allowed_address_pair": []                                                                                                                                                   |
|                       |     },                                                                                                                                                                             |
|                       |     "description": "Virtual machine allowed address pairs.",                                                                                                                       |
|                       |     "output_key": "allowed_address_pairs"                                                                                                                                          |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": "09f0db4a-16f7-4d25-840f-79436680056e",                                                                                                                        |
|                       |     "description": "Monitoring Target ID",                                                                                                                                         |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                           |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": [                                                                                                                                                              |
|                       |       "fa:16:3e:f7:60:7f"                                                                                                                                                          |
|                       |     ],                                                                                                                                                                             |
|                       |     "description": "Virtual machine interface mac address.",                                                                                                                       |
|                       |     "output_key": "mac_address"                                                                                                                                                    |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": [                                                                                                                                                              |
|                       |       [                                                                                                                                                                            |
|                       |         "default-domain",                                                                                                                                                          |
|                       |         "admin",                                                                                                                                                                   |
|                       |         "b62eefe0-0872-478d-adfe-1a606320f0e7"                                                                                                                                     |
|                       |       ]                                                                                                                                                                            |
|                       |     ],                                                                                                                                                                             |
|                       |     "description": "Virtual network.",                                                                                                                                             |
|                       |     "output_key": "virtual_network"                                                                                                                                                |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": "f68d0924-ef20-4c1b-ac45-0e6b879af5e7",                                                                                                                        |
|                       |     "description": "A unique id for the virtual machine interface.",                                                                                                               |
|                       |     "output_key": "id"                                                                                                                                                             |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/09f0db4a-16f7-4d25-840f-79436680056e",                                               |
|                       |     "description": "Monitoring Process Link",                                                                                                                                      |
|                       |     "output_key": "monitoring_link"                                                                                                                                                |
|                       |   }                                                                                                                                                                                |
|                       | ]                                                                                                                                                                                  |
| parameters            | {                                                                                                                                                                                  |
|                       |   "virtual_machine": "3dbcfce5-bca5-4182-991a-c23de685fcf1",                                                                                                                       |
|                       |   "uuid": "5eebab65-bf2f-4ac2-969a-15d6ccbfdd4b",                                                                                                                                  |
|                       |   "OS::stack_name": "port_5eebab65-bf2f-4ac2-969a-15d6ccbfdd4b",                                                                                                                   |
|                       |   "admin_state_up": "True",                                                                                                                                                        |
|                       |   "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef",                                                                                                                                 |
|                       |   "virtual_machine_interface_allowed_address_pairs": "null",                                                                                                                       |
|                       |   "virtual_machine_interface_mac_address": "fa:16:3e:7b:eb:e8",                                                                                                                    |
|                       |   "OS::stack_id": "bec6bc54-6873-47b3-a025-85e41532f7d2",                                                                                                                          |
|                       |   "device_owner": "network:gw_interface",                                                                                                                                          |
|                       |   "version": "2",                                                                                                                                                                  |
|                       |   "virtual_network": "afa0d9d6-84dc-4755-9c6e-db2f23f9dde2",                                                                                                                       |
|                       |   "security_groups": "[]",                                                                                                                                                         |
|                       |   "name": "5eebab65-bf2f-4ac2-969a-15d6ccbfdd4b"                                                                                                                                   |
|                       | }                                                                                                                                                                                  |
| parent                | None                                                                                                                                                                               |
| stack_name            | port_5eebab65-bf2f-4ac2-969a-15d6ccbfdd4b                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                              |
| stack_status          | UPDATE_COMPLETE                                                                                                                                                                    |
| stack_status_reason   | Stack successfully updated                                                                                                                                                         |
| stack_user_project_id | b3e3095c0a5b4383805efe9cf2a6b5ef                                                                                                                                                   |
| template_description  | Virtual Machine Interface Template                                                                                                                                                 |
| timeout_mins          | 13                                                                                                                                                                                 |
| updated_time          | 2018-04-16T00:13:01Z                                                                                                                                                               |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show port_5eebab65-bf2f-4ac2-969a-15d6ccbfdd4b
description: 'Virtual Machine Interface Template

  '
heat_template_version: '2013-05-23'
outputs:
  allowed_address_pairs:
    description: Virtual machine allowed address pairs.
    value:
      get_attr: [virtual_machine_interface, virtual_machine_interface_allowed_address_pairs]
  fq_name:
    description: Fully Qualified Name of the VMI
    value:
      get_attr: [virtual_machine_interface, fq_name]
  id:
    description: A unique id for the virtual machine interface.
    value: {get_resource: virtual_machine_interface}
  mac_address:
    description: Virtual machine interface mac address.
    value:
      get_attr: [virtual_machine_interface, virtual_machine_interface_mac_addresses]
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [vmi_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: vmi_monitor}
  virtual_network:
    description: Virtual network.
    value:
      get_attr: [virtual_machine_interface, virtual_networks]
parameters:
  admin_state_up: {default: true, label: Admin state up, type: boolean}
  device_owner: {default: '', label: Device Owner, type: string}
  name: {description: A unique id for the Physical Interface., label: Physical Interface
      ID, type: string}
  security_groups:
    default: []
    description: The IDs of security groups applied to the port.
    label: Security Groups List
    type: json
  tenant_id: {label: Tenant ID, type: string}
  uuid: {description: A unique id for the Virtual Machine Interface., label: Backend
      Virtual Machine Interface UUID, type: string}
  version: {label: Config version, type: number}
  virtual_machine: {default: '', label: Virtual Machine., type: string}
  virtual_machine_interface_allowed_address_pairs: {label: Virtual machine interface
      allowed address pairs., type: json}
  virtual_machine_interface_mac_address: {default: 'fe:ff:ff:ff:ff:ff', label: Virtual
      machine interface mac address., type: string}
  virtual_network: {label: Virtual Network., type: string}
resources:
  instance_ip_0:
    properties:
      ip_address: 172.16.101.151
      name:
        str_replace:
          params:
            '%ip%': 172.16.101.151
            '%name%': {get_param: name}
            '%zone%': e825f4e4-ba44-4d9e-9578-a31ad45bedda
          template: '%name%_%zone%_%ip%'
      network_id: {get_param: virtual_network}
      subnet_id: 323017d2-b9fc-4407-b998-e4776b16aee8
      virtual_machine_interfaces:
      - {get_resource: virtual_machine_interface}
    type: OS::Contrail::InstanceIp
  instance_ip_1:
    properties:
      ip_address: 172.16.101.152
      name:
        str_replace:
          params:
            '%ip%': 172.16.101.152
            '%name%': {get_param: name}
            '%zone%': e825f4e4-ba44-4d9e-9578-a31ad45bedda
          template: '%name%_%zone%_%ip%'
      network_id: {get_param: virtual_network}
      subnet_id: 323017d2-b9fc-4407-b998-e4776b16aee8
      virtual_machine_interfaces:
      - {get_resource: virtual_machine_interface}
    type: OS::Contrail::InstanceIp
  virtual_machine_interface:
    properties:
      admin_state_up: {get_param: admin_state_up}
      device_owner: {get_param: device_owner}
      name: {get_param: name}
      security_groups: {get_param: security_groups}
      uuid: {get_param: uuid}
      virtual_machine: {get_param: virtual_machine}
      virtual_machine_interface_allowed_address_pairs: {get_param: virtual_machine_interface_allowed_address_pairs}
      virtual_machine_interface_mac_addresses:
      - {get_param: virtual_machine_interface_mac_address}
      virtual_networks:
      - {get_param: virtual_network}
    type: OS::Contrail::VirtualMachineInterface
  vmi_monitor:
    depends_on: virtual_machine_interface
    properties:
      field_name: vmi
      properties:
        fq_name:
          get_attr: [virtual_machine_interface, fq_name]
      resource_id: {get_param: uuid}
      resource_type: ports
      syncer_properties:
        etcd:
          status: {key: vmi}
        tsdb:
          traffic.in:
            metric: traffic.contrail_bytes
            tags:
              direction: in
              resource_id: {get_param: uuid}
          traffic.out:
            metric: traffic.contrail_bytes
            tags:
              direction: out
              resource_id: {get_param: uuid}
      tenant_id: {get_param: tenant_id}
      type: virtual_machine_interface
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget

[localhost] local: gohan client resource_mapping list --output-format json
Command not found

[localhost] local: gohan client billing_resource list --output-format json
{
    "billing_resources": [
        {
            "config_version": 1,
            "ended": null,
            "id": "c8e7828d-90f9-4322-b36b-170da9202371",
            "info": {},
            "parent_billing_id": null,
            "resource_id": "afa0d9d6-84dc-4755-9c6e-db2f23f9dde2",
            "resource_type": "network",
            "started": 1.523837516e+09,
            "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef",
            "unique_resource_id": "afa0d9d6-84dc-4755-9c6e-db2f23f9dde2"
        }
    ]
}

### Create Static Route ###
name:[sample-static-route], id:[31980341-9bef-4f05-8df7-674dea343884]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
00:14:35.104606  00:14:35.271216  0.166610        POST     201    PENDING_CREATE
00:14:35.272703  00:14:35.365169  0.092466         GET     200    PENDING_CREATE
00:14:36.366464  00:14:36.438534  0.072070         GET     200    PENDING_CREATE
00:14:37.439226  00:14:37.507460  0.068234         GET     200    PENDING_CREATE
00:14:38.508526  00:14:38.577537  0.069011         GET     200    PENDING_CREATE
00:14:39.578847  00:14:39.653125  0.074278         GET     200    PENDING_CREATE
00:14:40.654424  00:14:40.730675  0.076251         GET     200    PENDING_CREATE
00:14:41.732395  00:14:41.803720  0.071325         GET     200    PENDING_CREATE
00:14:42.805059  00:14:42.878605  0.073546         GET     200    PENDING_CREATE
00:14:43.880565  00:14:43.956141  0.075576         GET     200    PENDING_CREATE
00:14:44.956662  00:14:45.034333  0.077671         GET     200    PENDING_CREATE
00:14:46.035550  00:14:46.110092  0.074542         GET     200    PENDING_CREATE
00:14:47.110515  00:14:47.181755  0.071240         GET     200    PENDING_CREATE
00:14:48.182983  00:14:48.250850  0.067867         GET     200    PENDING_CREATE
00:14:49.251739  00:14:49.321376  0.069637         GET     200    PENDING_CREATE
00:14:50.322688  00:14:50.393331  0.070643         GET     200    PENDING_CREATE
00:14:51.394671  00:14:51.473024  0.078353         GET     200    PENDING_CREATE
00:14:52.473743  00:14:52.541353  0.067610         GET     200    PENDING_CREATE
00:14:53.542611  00:14:53.618152  0.075541         GET     200    PENDING_CREATE
00:14:54.618736  00:14:54.693796  0.075060         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 19.58919

[localhost] local: gohan client static_route show --output-format json 31980341-9bef-4f05-8df7-674dea343884
{
    "static_route": {
        "aws_gw_id": null,
        "azure_gw_id": null,
        "description": "Sample Static-route",
        "destination": "192.168.0.0/24",
        "gcp_gw_id": null,
        "id": "31980341-9bef-4f05-8df7-674dea343884",
        "interdc_gw_id": null,
        "internet_gw_id": null,
        "name": "sample-static-route",
        "nexthop": "172.16.101.1",
        "orchestration_state": "CREATE_COMPLETE",
        "public_ip_id": null,
        "service_type": "vpn",
        "status": "ACTIVE",
        "tenant_id": "b3e3095c0a5b4383805efe9cf2a6b5ef",
        "vpn_gw_id": "b1da850c-3344-4de2-aa18-d96a30b54f69"
    }
}

############################################
### checking heat-stack (static_routes) ####
############################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/static_routes/31980341-9bef-4f05-8df7-674dea343884
[localhost] local: heat stack-show static_route_31980341-9bef-4f05-8df7-674dea343884
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                      |
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                         |
| creation_time         | 2018-04-16T00:14:36Z                                                                                                                                                                       |
| description           | VPN Gateway Static Route                                                                                                                                                                   |
| disable_rollback      | True                                                                                                                                                                                       |
| id                    | 2462a6a1-dfa5-4f7e-a02b-0a4da0613c61                                                                                                                                                       |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/b3e3095c0a5b4383805efe9cf2a6b5ef/stacks/static_route_31980341-9bef-4f05-8df7-674dea343884/2462a6a1-dfa5-4f7e-a02b-0a4da0613c61 |
| notification_topics   | []                                                                                                                                                                                         |
| outputs               | []                                                                                                                                                                                         |
| parameters            | {                                                                                                                                                                                          |
|                       |   "primary_device_ip": "10.79.5.185",                                                                                                                                                      |
|                       |   "OS::stack_id": "2462a6a1-dfa5-4f7e-a02b-0a4da0613c61",                                                                                                                                  |
|                       |   "OS::stack_name": "static_route_31980341-9bef-4f05-8df7-674dea343884",                                                                                                                   |
|                       |   "route": "192.168.0.0/24",                                                                                                                                                               |
|                       |   "secondary_device_port": "830",                                                                                                                                                          |
|                       |   "secondary_device_password": "******",                                                                                                                                                   |
|                       |   "primary_device_password": "******",                                                                                                                                                     |
|                       |   "next_hop": "172.16.101.1",                                                                                                                                                              |
|                       |   "vrf_name": "vrf_gw_sample-ha-router-downlink_1025",                                                                                                                                     |
|                       |   "primary_device_username": "esi",                                                                                                                                                        |
|                       |   "primary_device_port": "830",                                                                                                                                                            |
|                       |   "secondary_device_ip": "10.79.5.184",                                                                                                                                                    |
|                       |   "secondary_device_username": "esi"                                                                                                                                                       |
|                       | }                                                                                                                                                                                          |
| parent                | None                                                                                                                                                                                       |
| stack_name            | static_route_31980341-9bef-4f05-8df7-674dea343884                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                      |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                            |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                        |
| stack_user_project_id | b3e3095c0a5b4383805efe9cf2a6b5ef                                                                                                                                                           |
| template_description  | VPN Gateway Static Route                                                                                                                                                                   |
| timeout_mins          | 60                                                                                                                                                                                         |
| updated_time          | None                                                                                                                                                                                       |
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show static_route_31980341-9bef-4f05-8df7-674dea343884
description: 'VPN Gateway Static Route

  '
heat_template_version: '2013-05-23'
parameters:
  next_hop: {description: Next hop for the static route, label: Next hop, type: string}
  primary_device_ip: {description: Ip address that will be used to establish ssh connection
      to the Primary Device., label: Ip address of the device., type: string}
  primary_device_password: {description: Password of the user which will be used to
      log onto the Primary Device., hidden: true, label: Users password., type: string}
  primary_device_port: {description: Port that will be used to establish ssh connection
      to the Primary Device., label: Port of the ssh connection., type: number}
  primary_device_username: {description: Name of the user which will be used to log
      onto the Primary Device., label: User name to log on to device., type: string}
  route: {description: Static Route definition, label: Route, type: string}
  secondary_device_ip: {description: Ip address that will be used to establish ssh
      connection to the Secondary Device., label: Ip address of the device., type: string}
  secondary_device_password: {description: Password of the user which will be used
      to log onto the Secondary Device., hidden: true, label: Users password., type: string}
  secondary_device_port: {description: Port that will be used to establish ssh connection
      to the Secondary Device., label: Port of the ssh connection., type: number}
  secondary_device_username: {description: Name of the user which will be used to
      log onto the Secondary Device., label: User name to log on to device., type: string}
  vrf_name: {description: Name of VRF to add this static route, label: VRF, type: string}
resources:
  netconf_configure_primary:
    properties:
      configs:
      - config:
          str_replace:
            params:
              $NEXT_HOP: {get_param: next_hop}
            template: 'next-hop $NEXT_HOP;

              '
        path:
        - {config_type: tag, tag: routing-instances, xml_type: tag}
        - config_type: name
          name: {get_param: vrf_name}
          tag: instance
          xml_type: named_tag
        - {config_type: tag, tag: routing-options, xml_type: tag}
        - {config_type: tag, tag: static, xml_type: tag}
        - config_type: named_tag
          name: {get_param: route}
          tag: route
          xml_type: named_tag
      device_ip: {get_param: primary_device_ip}
      lock_timeout: 3000
      password: {get_param: primary_device_password}
      port: {get_param: primary_device_port}
      username: {get_param: primary_device_username}
    type: OS::Contrail::NetconfNamedConfigs
  netconf_configure_secondary:
    depends_on: netconf_configure_primary
    properties:
      configs:
      - config:
          str_replace:
            params:
              $NEXT_HOP: {get_param: next_hop}
            template: 'next-hop $NEXT_HOP;

              '
        path:
        - {config_type: tag, tag: routing-instances, xml_type: tag}
        - config_type: name
          name: {get_param: vrf_name}
          tag: instance
          xml_type: named_tag
        - {config_type: tag, tag: routing-options, xml_type: tag}
        - {config_type: tag, tag: static, xml_type: tag}
        - config_type: named_tag
          name: {get_param: route}
          tag: route
          xml_type: named_tag
      device_ip: {get_param: secondary_device_ip}
      lock_timeout: 3000
      password: {get_param: secondary_device_password}
      port: {get_param: secondary_device_port}
      username: {get_param: secondary_device_username}
    type: OS::Contrail::NetconfNamedConfigs

root@client:/tools/rest-api-for-esi# heat stack-list
+--------------------------------------+------------------------------------------------------------+-----------------+----------------------+
| id                                   | stack_name                                                 | stack_status    | creation_time        |
+--------------------------------------+------------------------------------------------------------+-----------------+----------------------+
| f7d42791-e73b-4ac4-b2ed-127a9b95dad5 | ese_device_4d8371c0-1b91-4818-a6e7-26425178e5d4            | CREATE_COMPLETE | 2018-04-15T23:59:28Z |
| f3349678-70d5-4450-b0c3-14122332861c | ese_physical_port_0078808a-c28e-46e1-887d-8ec65f90c446     | CREATE_COMPLETE | 2018-04-16T00:00:36Z |
| 20418531-0948-445f-95c6-f211f8b1dea7 | ese_physical_port_a6e70af1-386b-4d79-943f-6f44e87f95b3     | CREATE_COMPLETE | 2018-04-16T00:01:42Z |
| d1412d29-2acb-4105-95e4-9b55346b58ec | edge_router_7a35974a-a19f-49e2-b907-ad7fd8692975           | CREATE_COMPLETE | 2018-04-16T00:02:42Z |
| 0d503769-c7ea-4a39-af3d-ed1e2a5c4798 | edge_router_b7e6d8ad-5377-4380-bbb4-1a62566cbd6d           | CREATE_COMPLETE | 2018-04-16T00:03:46Z |
| 0d9b9971-ca1a-4e0f-bd30-950dd935a9f4 | er_physical_interface_f3ecf585-5c3b-445a-97a7-d8e124c99e16 | CREATE_COMPLETE | 2018-04-16T00:04:53Z |
| 241287b8-c304-460c-9568-ac6ea69bf333 | er_physical_interface_3118d6be-b1cb-472a-805f-7e1ec46aa5e7 | CREATE_COMPLETE | 2018-04-16T00:05:57Z |
| b9820e87-822c-4c9e-a785-987a9a71a94c | er_physical_interface_c8e2d558-02ee-4bf3-ba5b-958821a21043 | CREATE_COMPLETE | 2018-04-16T00:06:57Z |
| 868bb9da-99b7-4030-91bc-1fc94821b0f5 | er_physical_interface_2bc8e40d-ab01-4738-a4aa-e69d8fd30688 | CREATE_COMPLETE | 2018-04-16T00:08:02Z |
| 63a31186-fe5f-4db2-84ab-6fb47054cb3e | vpn_gateway_b1da850c-3344-4de2-aa18-d96a30b54f69           | UPDATE_COMPLETE | 2018-04-16T00:09:18Z |
| d74ec7b4-930f-422a-a306-1695cb268680 | vpn_interface_07d4f1fc-5142-4fae-b115-627fc009e222         | CREATE_COMPLETE | 2018-04-16T00:09:51Z |
| 5c7f0749-24f9-4aeb-8835-027a73cf38d6 | network_afa0d9d6-84dc-4755-9c6e-db2f23f9dde2               | CREATE_COMPLETE | 2018-04-16T00:11:54Z |
| a88b397a-8099-4c6f-8063-26b1855ac113 | subnet_e825f4e4-ba44-4d9e-9578-a31ad45bedda                | CREATE_COMPLETE | 2018-04-16T00:12:11Z |
| 8be0df63-af3a-4d9c-a773-2334c72e858b | gw_interface_3dbcfce5-bca5-4182-991a-c23de685fcf1          | CREATE_COMPLETE | 2018-04-16T00:12:30Z |
| ac4a2bed-a757-4419-b41c-19adfe1a46bf | port_53eeb091-3297-4b9b-a200-b6568567e387                  | UPDATE_COMPLETE | 2018-04-16T00:12:50Z |
| bec6bc54-6873-47b3-a025-85e41532f7d2 | port_5eebab65-bf2f-4ac2-969a-15d6ccbfdd4b                  | UPDATE_COMPLETE | 2018-04-16T00:12:50Z |
| 86ec2196-2feb-4570-a6d6-015bbec7f0d7 | ese_logical_port_257d0a9f-d5ae-4a93-9af4-81ad611e1b0d      | CREATE_COMPLETE | 2018-04-16T00:12:55Z |
| d4e78191-1706-4db3-9681-ba771a6d6680 | ese_logical_port_e30fdd19-2f48-422e-9c68-7c59a0e2fae8      | CREATE_COMPLETE | 2018-04-16T00:12:55Z |
| 2462a6a1-dfa5-4f7e-a02b-0a4da0613c61 | static_route_31980341-9bef-4f05-8df7-674dea343884          | CREATE_COMPLETE | 2018-04-16T00:14:36Z |
+--------------------------------------+------------------------------------------------------------+-----------------+----------------------+
root@client:/tools/rest-api-for-esi# neutron port-list
+--------------------------------------+-------------------------------------------------+-------------------+---------------------------------------------------------------------------------------+
| id                                   | name                                            | mac_address       | fixed_ips                                                                             |
+--------------------------------------+-------------------------------------------------+-------------------+---------------------------------------------------------------------------------------+
| 53eeb091-3297-4b9b-a200-b6568567e387 | Port for : a6e70af1-386b-4d79-943f-6f44e87f95b3 | fa:16:3e:7b:6f:90 | {"subnet_id": "e825f4e4-ba44-4d9e-9578-a31ad45bedda", "ip_address": "172.16.101.153"} |
| 5eebab65-bf2f-4ac2-969a-15d6ccbfdd4b | Port for : 0078808a-c28e-46e1-887d-8ec65f90c446 | fa:16:3e:7b:eb:e8 | {"subnet_id": "e825f4e4-ba44-4d9e-9578-a31ad45bedda", "ip_address": "172.16.101.151"} |
|                                      |                                                 |                   | {"subnet_id": "e825f4e4-ba44-4d9e-9578-a31ad45bedda", "ip_address": "172.16.101.152"} |
| 604f922d-489d-4170-9d6d-c09e657b2eb3 | dhcp-server-port                                | 00:00:5e:00:01:00 | {"subnet_id": "e825f4e4-ba44-4d9e-9578-a31ad45bedda", "ip_address": "172.16.101.2"}   |
+--------------------------------------+-------------------------------------------------+-------------------+---------------------------------------------------------------------------------------+
root@client:/tools/rest-api-for-esi# neutron port-show 53eeb091-3297-4b9b-a200-b6568567e387
+-----------------------+---------------------------------------------------------------------------------------+
| Field                 | Value                                                                                 |
+-----------------------+---------------------------------------------------------------------------------------+
| admin_state_up        | True                                                                                  |
| allowed_address_pairs |                                                                                       |
| attached              | True                                                                                  |
| binding:vif_type      | vrouter                                                                               |
| description           |                                                                                       |
| device_id             | 3dbcfce5-bca5-4182-991a-c23de685fcf1                                                  |
| device_owner          | network:gw_interface                                                                  |
| ese_logical_port_id   | 257d0a9f-d5ae-4a93-9af4-81ad611e1b0d                                                  |
| fake_delete           | False                                                                                 |
| fixed_ips             | {"subnet_id": "e825f4e4-ba44-4d9e-9578-a31ad45bedda", "ip_address": "172.16.101.153"} |
| id                    | 53eeb091-3297-4b9b-a200-b6568567e387                                                  |
| mac_address           | fa:16:3e:7b:6f:90                                                                     |
| managed_by_service    | True                                                                                  |
| name                  | Port for : a6e70af1-386b-4d79-943f-6f44e87f95b3                                       |
| network_id            | afa0d9d6-84dc-4755-9c6e-db2f23f9dde2                                                  |
| operational_state     | FAIL                                                                                  |
| orchestration_state   | UPDATE_COMPLETE                                                                       |
| security_groups       |                                                                                       |
| segmentation_id       | 1025                                                                                  |
| segmentation_type     | vlan                                                                                  |
| status                | MONITORING_UNAVAILABLE                                                                |
| tags                  | {}                                                                                    |
| tenant_id             | b3e3095c0a5b4383805efe9cf2a6b5ef                                                      |
+-----------------------+---------------------------------------------------------------------------------------+
root@client:/tools/rest-api-for-esi# neutron port-show 5eebab65-bf2f-4ac2-969a-15d6ccbfdd4b
+-----------------------+---------------------------------------------------------------------------------------+
| Field                 | Value                                                                                 |
+-----------------------+---------------------------------------------------------------------------------------+
| admin_state_up        | True                                                                                  |
| allowed_address_pairs |                                                                                       |
| attached              | True                                                                                  |
| binding:vif_type      | vrouter                                                                               |
| description           |                                                                                       |
| device_id             | 3dbcfce5-bca5-4182-991a-c23de685fcf1                                                  |
| device_owner          | network:gw_interface                                                                  |
| ese_logical_port_id   | e30fdd19-2f48-422e-9c68-7c59a0e2fae8                                                  |
| fake_delete           | False                                                                                 |
| fixed_ips             | {"subnet_id": "e825f4e4-ba44-4d9e-9578-a31ad45bedda", "ip_address": "172.16.101.151"} |
|                       | {"subnet_id": "e825f4e4-ba44-4d9e-9578-a31ad45bedda", "ip_address": "172.16.101.152"} |
| id                    | 5eebab65-bf2f-4ac2-969a-15d6ccbfdd4b                                                  |
| mac_address           | fa:16:3e:7b:eb:e8                                                                     |
| managed_by_service    | True                                                                                  |
| name                  | Port for : 0078808a-c28e-46e1-887d-8ec65f90c446                                       |
| network_id            | afa0d9d6-84dc-4755-9c6e-db2f23f9dde2                                                  |
| operational_state     | UP                                                                                    |
| orchestration_state   | UPDATE_COMPLETE                                                                       |
| security_groups       |                                                                                       |
| segmentation_id       | 1025                                                                                  |
| segmentation_type     | vlan                                                                                  |
| status                | ACTIVE                                                                                |
| tags                  | {}                                                                                    |
| tenant_id             | b3e3095c0a5b4383805efe9cf2a6b5ef                                                      |
+-----------------------+---------------------------------------------------------------------------------------+
