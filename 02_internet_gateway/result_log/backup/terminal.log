root@client:/tools/rest-api-for-esi# python gohan-api-internet-gateways.py 
### Create Ese Device ###
name:[QFX-NW02], id:[f5429afc-cf7e-41c4-91ee-36ec403a9695]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
00:55:45.942661  00:55:46.013059  0.070398        POST     201    PENDING_CREATE
00:55:46.013183  00:55:46.039504  0.026321         GET     200    PENDING_CREATE
00:55:47.039671  00:55:47.067293  0.027622         GET     200    PENDING_CREATE
00:55:48.067632  00:55:48.094716  0.027084         GET     200    PENDING_CREATE
00:55:49.095191  00:55:49.124568  0.029377         GET     200    PENDING_CREATE
00:55:50.125689  00:55:50.153916  0.028227         GET     200    PENDING_CREATE
00:55:51.154225  00:55:51.180743  0.026518         GET     200    PENDING_CREATE
00:55:52.181860  00:55:52.208014  0.026154         GET     200    PENDING_CREATE
00:55:53.208649  00:55:53.236742  0.028093         GET     200    PENDING_CREATE
00:55:54.237855  00:55:54.264017  0.026162         GET     200    PENDING_CREATE
00:55:55.265134  00:55:55.291706  0.026572         GET     200    PENDING_CREATE
00:55:56.292622  00:55:56.319387  0.026765         GET     200    PENDING_CREATE
00:55:57.320502  00:55:57.347654  0.027152         GET     200    PENDING_CREATE
00:55:58.348785  00:55:58.374768  0.025983         GET     200    PENDING_CREATE
00:55:59.375879  00:55:59.402045  0.026166         GET     200    PENDING_CREATE
00:56:00.403140  00:56:00.430130  0.026990         GET     200    PENDING_CREATE
00:56:01.431269  00:56:01.459431  0.028162         GET     200    PENDING_CREATE
00:56:02.460563  00:56:02.487690  0.027127         GET     200    PENDING_CREATE
00:56:03.488801  00:56:03.517734  0.028933         GET     200    PENDING_CREATE
00:56:04.518907  00:56:04.546911  0.028004         GET     200    PENDING_CREATE
00:56:05.548011  00:56:05.574586  0.026575         GET     200    PENDING_CREATE
00:56:06.575686  00:56:06.602924  0.027238         GET     200    PENDING_CREATE
00:56:07.604009  00:56:07.631539  0.027530         GET     200    PENDING_CREATE
00:56:08.632651  00:56:08.660655  0.028004         GET     200    PENDING_CREATE
00:56:09.661775  00:56:09.689666  0.027891         GET     200    PENDING_CREATE
00:56:10.690232  00:56:10.719162  0.028930         GET     200    PENDING_CREATE
00:56:11.719660  00:56:11.747688  0.028028         GET     200    PENDING_CREATE
00:56:12.748426  00:56:12.775051  0.026625         GET     200    PENDING_CREATE
00:56:13.776182  00:56:13.802950  0.026768         GET     200    PENDING_CREATE
00:56:14.804018  00:56:14.831122  0.027104         GET     200    PENDING_CREATE
00:56:15.831665  00:56:15.883507  0.051842         GET     200    PENDING_CREATE
00:56:16.884201  00:56:16.910875  0.026674         GET     200    PENDING_CREATE
00:56:17.911981  00:56:17.938370  0.026389         GET     200    PENDING_CREATE
00:56:18.939452  00:56:18.965394  0.025942         GET     200    PENDING_CREATE
00:56:19.966494  00:56:19.992282  0.025788         GET     200    PENDING_CREATE
00:56:20.993398  00:56:21.018987  0.025589         GET     200    PENDING_CREATE
00:56:22.020125  00:56:22.047112  0.026987         GET     200    PENDING_CREATE
00:56:23.048257  00:56:23.074942  0.026685         GET     200    PENDING_CREATE
00:56:24.076063  00:56:24.102805  0.026742         GET     200    PENDING_CREATE
00:56:25.103651  00:56:25.131365  0.027714         GET     200    PENDING_CREATE
00:56:26.132510  00:56:26.160173  0.027663         GET     200    PENDING_CREATE
00:56:27.161273  00:56:27.188216  0.026943         GET     200    PENDING_CREATE
00:56:28.189371  00:56:28.215383  0.026012         GET     200    PENDING_CREATE
00:56:29.215665  00:56:29.244009  0.028344         GET     200    PENDING_CREATE
00:56:30.245140  00:56:30.271579  0.026439         GET     200    PENDING_CREATE
00:56:31.272782  00:56:31.300448  0.027666         GET     200    PENDING_CREATE
00:56:32.301587  00:56:32.329540  0.027953         GET     200    PENDING_CREATE
00:56:33.330693  00:56:33.357111  0.026418         GET     200    PENDING_CREATE
00:56:34.358249  00:56:34.387322  0.029073         GET     200    PENDING_CREATE
00:56:35.388505  00:56:35.420476  0.031971         GET     200    PENDING_CREATE
00:56:36.421641  00:56:36.446950  0.025309         GET     200    PENDING_CREATE
00:56:37.448067  00:56:37.474694  0.026627         GET     200    PENDING_CREATE
00:56:38.475849  00:56:38.502077  0.026228         GET     200    PENDING_CREATE
00:56:39.503222  00:56:39.530846  0.027624         GET     200    PENDING_CREATE
00:56:40.531992  00:56:40.560373  0.028381         GET     200    PENDING_CREATE
00:56:41.561503  00:56:41.587342  0.025839         GET     200    PENDING_CREATE
00:56:42.588493  00:56:42.614624  0.026131         GET     200    PENDING_CREATE
00:56:43.615712  00:56:43.641972  0.026260         GET     200    PENDING_CREATE
00:56:44.643090  00:56:44.670223  0.027133         GET     200    PENDING_CREATE
00:56:45.671314  00:56:45.698296  0.026982         GET     200    PENDING_CREATE
00:56:46.699381  00:56:46.725281  0.025900         GET     200    PENDING_CREATE
00:56:47.726395  00:56:47.753780  0.027385         GET     200    PENDING_CREATE
00:56:48.754867  00:56:48.781193  0.026326         GET     200    PENDING_CREATE
00:56:49.782297  00:56:49.808832  0.026535         GET     200    PENDING_CREATE
00:56:50.809968  00:56:50.836838  0.026870         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 64.894177

[localhost] local: gohan client ese_device show --output-format json f5429afc-cf7e-41c4-91ee-36ec403a9695
{
	"ese_device": {
		"description": "",
		"existing": "existing",
		"flavor": null,
		"hostname": "QFX-NW02",
		"id": "f5429afc-cf7e-41c4-91ee-36ec403a9695",
		"location": null,
		"management_ip_address": "10.161.0.34",
		"name": "QFX-NW02",
		"operational_state": "UP",
		"orchestration_state": "CREATE_COMPLETE",
		"password": "password",
		"public_ip_address": "10.161.0.34",
		"status": "ACTIVE",
		"tags": {},
		"tenant_id": "20511c5aef804417a03bf14ed8aea3b8",
		"tor_agent_names": null,
		"tsn_names": null,
		"type": "tor",
		"username": "esi"
	}
}

##########################################
### checking heat-stack (ese_devices) ####
##########################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/ese_devices/f5429afc-cf7e-41c4-91ee-36ec403a9695
[localhost] local: heat stack-show ese_device_f5429afc-cf7e-41c4-91ee-36ec403a9695
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                    |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                       |
| creation_time         | 2018-03-30T00:55:47Z                                                                                                                                                                     |
| description           | ESE Device (existing) template                                                                                                                                                           |
| disable_rollback      | True                                                                                                                                                                                     |
| id                    | 04d44469-232c-4e75-94fb-5a7824698d0e                                                                                                                                                     |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/20511c5aef804417a03bf14ed8aea3b8/stacks/ese_device_f5429afc-cf7e-41c4-91ee-36ec403a9695/04d44469-232c-4e75-94fb-5a7824698d0e |
| notification_topics   | []                                                                                                                                                                                       |
| outputs               | [                                                                                                                                                                                        |
|                       |   {                                                                                                                                                                                      |
|                       |     "output_value": "cc19c36a-a5ed-4dce-be0d-dc228f8b1c00",                                                                                                                              |
|                       |     "description": "Monitoring Target ID",                                                                                                                                               |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                                 |
|                       |   },                                                                                                                                                                                     |
|                       |   {                                                                                                                                                                                      |
|                       |     "output_value": [                                                                                                                                                                    |
|                       |       "default-global-system-config",                                                                                                                                                    |
|                       |       "NWSDP-JNPR-02"                                                                                                                                                                    |
|                       |     ],                                                                                                                                                                                   |
|                       |     "description": "The FQ name of the physical router.",                                                                                                                                |
|                       |     "output_key": "fq_name"                                                                                                                                                              |
|                       |   },                                                                                                                                                                                     |
|                       |   {                                                                                                                                                                                      |
|                       |     "output_value": "7e5c78fa-71c0-427e-947f-586b1fc3c470",                                                                                                                              |
|                       |     "description": "A unique id for the physical router.",                                                                                                                               |
|                       |     "output_key": "id"                                                                                                                                                                   |
|                       |   },                                                                                                                                                                                     |
|                       |   {                                                                                                                                                                                      |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/cc19c36a-a5ed-4dce-be0d-dc228f8b1c00",                                                     |
|                       |     "description": "Monitoring Process Link",                                                                                                                                            |
|                       |     "output_key": "monitoring_link"                                                                                                                                                      |
|                       |   },                                                                                                                                                                                     |
|                       |   {                                                                                                                                                                                      |
|                       |     "output_value": "NWSDP-JNPR-02",                                                                                                                                                     |
|                       |     "description": "The name of the physical router.",                                                                                                                                   |
|                       |     "output_key": "name"                                                                                                                                                                 |
|                       |   }                                                                                                                                                                                      |
|                       | ]                                                                                                                                                                                        |
| parameters            | {                                                                                                                                                                                        |
|                       |   "device_ip": "10.161.0.34",                                                                                                                                                            |
|                       |   "OS::stack_id": "04d44469-232c-4e75-94fb-5a7824698d0e",                                                                                                                                |
|                       |   "OS::stack_name": "ese_device_f5429afc-cf7e-41c4-91ee-36ec403a9695",                                                                                                                   |
|                       |   "tenant_id": "20511c5aef804417a03bf14ed8aea3b8",                                                                                                                                       |
|                       |   "hostname": "QFX-NW02",                                                                                                                                                                |
|                       |   "version": "1",                                                                                                                                                                        |
|                       |   "gohan_id": "f5429afc-cf7e-41c4-91ee-36ec403a9695",                                                                                                                                    |
|                       |   "name": "QFX-NW02"                                                                                                                                                                     |
|                       | }                                                                                                                                                                                        |
| parent                | None                                                                                                                                                                                     |
| stack_name            | ese_device_f5429afc-cf7e-41c4-91ee-36ec403a9695                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                    |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                          |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                      |
| stack_user_project_id | 20511c5aef804417a03bf14ed8aea3b8                                                                                                                                                         |
| template_description  | ESE Device (existing) template                                                                                                                                                           |
| timeout_mins          | 6                                                                                                                                                                                        |
| updated_time          | None                                                                                                                                                                                     |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show ese_device_f5429afc-cf7e-41c4-91ee-36ec403a9695
description: 'ESE Device (existing) template

  '
heat_template_version: '2013-05-23'
outputs:
  fq_name:
    description: The FQ name of the physical router.
    value:
      get_attr: [physical_router, fq_name]
  id:
    description: A unique id for the physical router.
    value: {get_resource: physical_router}
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [device_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: device_monitor}
  name:
    description: The name of the physical router.
    value:
      get_attr: [physical_router, name]
parameters:
  device_ip: {description: Device IP Address., label: Device IP Address, type: string}
  gohan_id: {description: UUID of the ESE Device, label: Gohan resource ID, type: string}
  hostname: {description: Name of host (vrouter) to create router on, label: Hostname,
    type: string}
  name: {description: Name of the physical router that will be created., label: Physical
      Router Name, type: string}
  tenant_id: {label: Tenant ID, type: string}
  version: {label: Config version, type: number}
resources:
  device_monitor:
    depends_on: physical_router
    properties:
      field_name: switch
      properties:
        community_name: ESE_NODE_COMMUNITY
        device_ip: {get_param: device_ip}
      resource_id: {get_param: gohan_id}
      resource_type: ese_devices
      syncer_properties:
        etcd:
          status: {key: switch}
      tenant_id: {get_param: tenant_id}
      type: snmp_device
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget
  physical_router:
    properties:
      fq_name:
      - default-global-system-config
      - {get_param: hostname}
      resource_type: physical_router
    type: OS::Contrail::ExistingResource

### Create Ese Physical Port ###
name:[xe-0/0/3], id:[7861b62a-55fe-4e98-9bfc-10bf19052d9a]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
00:56:53.368995  00:56:53.491447  0.122452        POST     201    PENDING_CREATE
00:56:53.491527  00:56:53.549480  0.057953         GET     200    PENDING_CREATE
00:56:54.550590  00:56:54.576127  0.025537         GET     200    PENDING_CREATE
00:56:55.577269  00:56:55.603150  0.025881         GET     200    PENDING_CREATE
00:56:56.604235  00:56:56.629886  0.025651         GET     200    PENDING_CREATE
00:56:57.630981  00:56:57.661649  0.030668         GET     200    PENDING_CREATE
00:56:58.662679  00:56:58.690809  0.028130         GET     200    PENDING_CREATE
00:56:59.691918  00:56:59.718856  0.026938         GET     200    PENDING_CREATE
00:57:00.719405  00:57:00.745573  0.026168         GET     200    PENDING_CREATE
00:57:01.746672  00:57:01.773268  0.026596         GET     200    PENDING_CREATE
00:57:02.774371  00:57:02.800299  0.025928         GET     200    PENDING_CREATE
00:57:03.800821  00:57:03.826560  0.025739         GET     200    PENDING_CREATE
00:57:04.827645  00:57:04.853025  0.025380         GET     200    PENDING_CREATE
00:57:05.854160  00:57:05.880195  0.026035         GET     200    PENDING_CREATE
00:57:06.881315  00:57:06.906559  0.025244         GET     200    PENDING_CREATE
00:57:07.907673  00:57:07.932843  0.025170         GET     200    PENDING_CREATE
00:57:08.933958  00:57:08.961034  0.027076         GET     200    PENDING_CREATE
00:57:09.962146  00:57:09.988102  0.025956         GET     200    PENDING_CREATE
00:57:10.989235  00:57:11.015794  0.026559         GET     200    PENDING_CREATE
00:57:12.016881  00:57:12.046168  0.029287         GET     200    PENDING_CREATE
00:57:13.047306  00:57:13.074084  0.026778         GET     200    PENDING_CREATE
00:57:14.075208  00:57:14.101653  0.026445         GET     200    PENDING_CREATE
00:57:15.102772  00:57:15.128258  0.025486         GET     200    PENDING_CREATE
00:57:16.129365  00:57:16.154794  0.025429         GET     200    PENDING_CREATE
00:57:17.155684  00:57:17.180978  0.025294         GET     200    PENDING_CREATE
00:57:18.182111  00:57:18.207573  0.025462         GET     200    PENDING_CREATE
00:57:19.208702  00:57:19.235454  0.026752         GET     200    PENDING_CREATE
00:57:20.235669  00:57:20.261779  0.026110         GET     200    PENDING_CREATE
00:57:21.262891  00:57:21.289541  0.026650         GET     200    PENDING_CREATE
00:57:22.290667  00:57:22.316384  0.025717         GET     200    PENDING_CREATE
00:57:23.317468  00:57:23.344454  0.026986         GET     200    PENDING_CREATE
00:57:24.345579  00:57:24.371868  0.026289         GET     200    PENDING_CREATE
00:57:25.372986  00:57:25.398442  0.025456         GET     200    PENDING_CREATE
00:57:26.399525  00:57:26.425509  0.025984         GET     200    PENDING_CREATE
00:57:27.426622  00:57:27.454550  0.027928         GET     200    PENDING_CREATE
00:57:28.455109  00:57:28.480621  0.025512         GET     200    PENDING_CREATE
00:57:29.481739  00:57:29.506855  0.025116         GET     200    PENDING_CREATE
00:57:30.507965  00:57:30.622743  0.114778         GET     200    PENDING_CREATE
00:57:31.623872  00:57:31.652408  0.028536         GET     200    PENDING_CREATE
00:57:32.653518  00:57:32.678674  0.025156         GET     200    PENDING_CREATE
00:57:33.679791  00:57:33.705105  0.025314         GET     200    PENDING_CREATE
00:57:34.706192  00:57:34.732543  0.026351         GET     200    PENDING_CREATE
00:57:35.733239  00:57:35.760219  0.026980         GET     200    PENDING_CREATE
00:57:36.760868  00:57:36.788389  0.027521         GET     200    PENDING_CREATE
00:57:37.789480  00:57:37.817479  0.027999         GET     200    PENDING_CREATE
00:57:38.818587  00:57:38.845045  0.026458         GET     200    PENDING_CREATE
00:57:39.845775  00:57:39.873770  0.027995         GET     200    PENDING_CREATE
00:57:40.874656  00:57:40.899556  0.024900         GET     200    PENDING_CREATE
00:57:41.900690  00:57:41.926040  0.025350         GET     200    PENDING_CREATE
00:57:42.927127  00:57:42.952856  0.025729         GET     200    PENDING_CREATE
00:57:43.953941  00:57:43.988065  0.034124         GET     200    PENDING_CREATE
00:57:44.989175  00:57:45.017187  0.028012         GET     200    PENDING_CREATE
00:57:46.018335  00:57:46.047799  0.029464         GET     200    PENDING_CREATE
00:57:47.048922  00:57:47.082411  0.033489         GET     200    PENDING_CREATE
00:57:48.083527  00:57:48.109275  0.025748         GET     200    PENDING_CREATE
00:57:49.110359  00:57:49.137144  0.026785         GET     200    PENDING_CREATE
00:57:50.138280  00:57:50.163888  0.025608         GET     200    PENDING_CREATE
00:57:51.164973  00:57:51.191978  0.027005         GET     200    PENDING_CREATE
00:57:52.193094  00:57:52.218206  0.025112         GET     200    PENDING_CREATE
00:57:53.219330  00:57:53.244761  0.025431         GET     200    PENDING_CREATE
00:57:54.245906  00:57:54.271893  0.025987         GET     200    PENDING_CREATE
00:57:55.273005  00:57:55.298693  0.025688         GET     200    PENDING_CREATE
00:57:56.299791  00:57:56.327460  0.027669         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 62.958465

[localhost] local: gohan client ese_physical_port show --output-format json 7861b62a-55fe-4e98-9bfc-10bf19052d9a
{
	"ese_physical_port": {
		"connected_port_id": "",
		"connected_port_owner": "mx_downlink",
		"description": "",
		"ese_device_id": "f5429afc-cf7e-41c4-91ee-36ec403a9695",
		"existing": "new",
		"id": "7861b62a-55fe-4e98-9bfc-10bf19052d9a",
		"name": "xe-0/0/3",
		"operational_state": "UP",
		"orchestration_state": "CREATE_COMPLETE",
		"status": "ACTIVE",
		"tags": {},
		"tenant_id": "20511c5aef804417a03bf14ed8aea3b8"
	}
}

#################################################
### checking heat-stack (ese_physical_ports) ####
#################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/ese_physical_ports/7861b62a-55fe-4e98-9bfc-10bf19052d9a
[localhost] local: heat stack-show ese_physical_port_7861b62a-55fe-4e98-9bfc-10bf19052d9a
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                           |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                              |
| creation_time         | 2018-03-30T00:56:54Z                                                                                                                                                                            |
| description           | Physical port template                                                                                                                                                                          |
| disable_rollback      | True                                                                                                                                                                                            |
| id                    | f86d2973-36d9-49ac-9c63-65eaa33e0737                                                                                                                                                            |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/20511c5aef804417a03bf14ed8aea3b8/stacks/ese_physical_port_7861b62a-55fe-4e98-9bfc-10bf19052d9a/f86d2973-36d9-49ac-9c63-65eaa33e0737 |
| notification_topics   | []                                                                                                                                                                                              |
| outputs               | [                                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                             |
|                       |     "output_value": "c80300f1-641c-4cbc-bd93-d65cef324cfb",                                                                                                                                     |
|                       |     "description": "Monitoring Target ID",                                                                                                                                                      |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                                        |
|                       |   },                                                                                                                                                                                            |
|                       |   {                                                                                                                                                                                             |
|                       |     "output_value": "06bfe521-07f0-4931-9f8c-318c3ad8114e",                                                                                                                                     |
|                       |     "description": "A unique id for the physical interface",                                                                                                                                    |
|                       |     "output_key": "id"                                                                                                                                                                          |
|                       |   },                                                                                                                                                                                            |
|                       |   {                                                                                                                                                                                             |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/c80300f1-641c-4cbc-bd93-d65cef324cfb",                                                            |
|                       |     "description": "Monitoring Process Link",                                                                                                                                                   |
|                       |     "output_key": "monitoring_link"                                                                                                                                                             |
|                       |   },                                                                                                                                                                                            |
|                       |   {                                                                                                                                                                                             |
|                       |     "output_value": "xe-0/0/38",                                                                                                                                                                |
|                       |     "description": "The name of the physical interface.",                                                                                                                                       |
|                       |     "output_key": "name"                                                                                                                                                                        |
|                       |   }                                                                                                                                                                                             |
|                       | ]                                                                                                                                                                                               |
| parameters            | {                                                                                                                                                                                               |
|                       |   "physical_port_name": "xe-0/0/3",                                                                                                                                                             |
|                       |   "OS::stack_id": "f86d2973-36d9-49ac-9c63-65eaa33e0737",                                                                                                                                       |
|                       |   "OS::stack_name": "ese_physical_port_7861b62a-55fe-4e98-9bfc-10bf19052d9a",                                                                                                                   |
|                       |   "tenant_id": "20511c5aef804417a03bf14ed8aea3b8",                                                                                                                                              |
|                       |   "device_ip": "10.161.0.34",                                                                                                                                                                   |
|                       |   "physical_device": "7e5c78fa-71c0-427e-947f-586b1fc3c470",                                                                                                                                    |
|                       |   "version": "1",                                                                                                                                                                               |
|                       |   "gohan_id": "7861b62a-55fe-4e98-9bfc-10bf19052d9a"                                                                                                                                            |
|                       | }                                                                                                                                                                                               |
| parent                | None                                                                                                                                                                                            |
| stack_name            | ese_physical_port_7861b62a-55fe-4e98-9bfc-10bf19052d9a                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                           |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                                 |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                             |
| stack_user_project_id | 20511c5aef804417a03bf14ed8aea3b8                                                                                                                                                                |
| template_description  | Physical port template                                                                                                                                                                          |
| timeout_mins          | 6                                                                                                                                                                                               |
| updated_time          | None                                                                                                                                                                                            |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show ese_physical_port_7861b62a-55fe-4e98-9bfc-10bf19052d9a
description: 'Physical port template

  '
heat_template_version: '2013-05-23'
outputs:
  id:
    description: A unique id for the physical interface
    value: {get_resource: physical_interface}
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [interface_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: interface_monitor}
  name:
    description: The name of the physical interface.
    value:
      get_attr: [physical_interface, name]
parameters:
  device_ip: {description: Device IP Address., label: Device IP Address, type: string}
  gohan_id: {description: UUID of the ESE Physical Port, label: Gohan resource ID,
    type: string}
  physical_device: {description: Id of the physical device on which physical port
      will be created., label: Physical Device Id, type: string}
  physical_port_name: {description: Name of the physical port., label: Physical Interface
      Name, type: string}
  tenant_id: {label: Tenant ID, type: string}
  version: {label: Config version, type: number}
resources:
  interface_monitor:
    depends_on: physical_interface
    properties:
      field_name: port
      properties:
        community_name: ESE_NODE_COMMUNITY
        device_ip: {get_param: device_ip}
        if_name: {get_param: physical_port_name}
      resource_id: {get_param: gohan_id}
      resource_type: ese_physical_ports
      syncer_properties:
        etcd:
          status: {key: port}
      tenant_id: {get_param: tenant_id}
      type: snmp_ports_status
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget
  physical_interface:
    properties:
      name: {get_param: physical_port_name}
      physical_router: {get_param: physical_device}
    type: OS::Contrail::PhysicalInterface

### Create Ese Physical Port ###
name:[xe-0/0/4], id:[76001683-a8bb-4c68-8c87-7b63ea7bd5cd]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
00:57:57.665854  00:57:57.826835  0.160981        POST     201    PENDING_CREATE
00:57:57.826912  00:57:57.852229  0.025317         GET     200    PENDING_CREATE
00:57:58.853346  00:57:58.878506  0.025160         GET     200    PENDING_CREATE
00:57:59.879621  00:57:59.907367  0.027746         GET     200    PENDING_CREATE
00:58:00.908498  00:58:00.934499  0.026001         GET     200    PENDING_CREATE
00:58:01.935655  00:58:01.962937  0.027282         GET     200    PENDING_CREATE
00:58:02.963656  00:58:02.988929  0.025273         GET     200    PENDING_CREATE
00:58:03.990044  00:58:04.015448  0.025404         GET     200    PENDING_CREATE
00:58:05.016578  00:58:05.043207  0.026629         GET     200    PENDING_CREATE
00:58:06.044292  00:58:06.069980  0.025688         GET     200    PENDING_CREATE
00:58:07.071116  00:58:07.097990  0.026874         GET     200    PENDING_CREATE
00:58:08.099119  00:58:08.210515  0.111396         GET     200    PENDING_CREATE
00:58:09.211643  00:58:09.237506  0.025863         GET     200    PENDING_CREATE
00:58:10.238621  00:58:10.265536  0.026915         GET     200    PENDING_CREATE
00:58:11.266654  00:58:11.292983  0.026329         GET     200    PENDING_CREATE
00:58:12.294088  00:58:12.320476  0.026388         GET     200    PENDING_CREATE
00:58:13.322646  00:58:13.350314  0.027668         GET     200    PENDING_CREATE
00:58:14.351445  00:58:14.377517  0.026072         GET     200    PENDING_CREATE
00:58:15.378636  00:58:15.404840  0.026204         GET     200    PENDING_CREATE
00:58:16.405970  00:58:16.432515  0.026545         GET     200    PENDING_CREATE
00:58:17.433655  00:58:17.459592  0.025937         GET     200    PENDING_CREATE
00:58:18.460725  00:58:18.486240  0.025515         GET     200    PENDING_CREATE
00:58:19.487351  00:58:19.514282  0.026931         GET     200    PENDING_CREATE
00:58:20.515372  00:58:20.541168  0.025796         GET     200    PENDING_CREATE
00:58:21.542282  00:58:21.567299  0.025017         GET     200    PENDING_CREATE
00:58:22.568423  00:58:22.594568  0.026145         GET     200    PENDING_CREATE
00:58:23.595703  00:58:23.622059  0.026356         GET     200    PENDING_CREATE
00:58:24.623219  00:58:24.650604  0.027385         GET     200    PENDING_CREATE
00:58:25.651716  00:58:25.678741  0.027025         GET     200    PENDING_CREATE
00:58:26.679922  00:58:26.705744  0.025822         GET     200    PENDING_CREATE
00:58:27.706881  00:58:27.734280  0.027399         GET     200    PENDING_CREATE
00:58:28.735364  00:58:28.761269  0.025905         GET     200    PENDING_CREATE
00:58:29.762414  00:58:29.788452  0.026038         GET     200    PENDING_CREATE
00:58:30.789585  00:58:30.815860  0.026275         GET     200    PENDING_CREATE
00:58:31.817003  00:58:31.843182  0.026179         GET     200    PENDING_CREATE
00:58:32.844341  00:58:32.870015  0.025674         GET     200    PENDING_CREATE
00:58:33.871191  00:58:33.897428  0.026237         GET     200    PENDING_CREATE
00:58:34.898645  00:58:34.923636  0.024991         GET     200    PENDING_CREATE
00:58:35.924770  00:58:35.951397  0.026627         GET     200    PENDING_CREATE
00:58:36.952545  00:58:36.979463  0.026918         GET     200    PENDING_CREATE
00:58:37.980588  00:58:38.007355  0.026767         GET     200    PENDING_CREATE
00:58:39.008469  00:58:39.033859  0.025390         GET     200    PENDING_CREATE
00:58:40.034987  00:58:40.060584  0.025597         GET     200    PENDING_CREATE
00:58:41.061666  00:58:41.087831  0.026165         GET     200    PENDING_CREATE
00:58:42.088952  00:58:42.114870  0.025918         GET     200    PENDING_CREATE
00:58:43.115636  00:58:43.142114  0.026478         GET     200    PENDING_CREATE
00:58:44.142971  00:58:44.167848  0.024877         GET     200    PENDING_CREATE
00:58:45.168184  00:58:45.193480  0.025296         GET     200    PENDING_CREATE
00:58:46.194567  00:58:46.220481  0.025914         GET     200    PENDING_CREATE
00:58:47.220870  00:58:47.246468  0.025598         GET     200    PENDING_CREATE
00:58:48.247621  00:58:48.293051  0.045430         GET     200    PENDING_CREATE
00:58:49.294128  00:58:49.320818  0.026690         GET     200    PENDING_CREATE
00:58:50.321291  00:58:50.354203  0.032912         GET     200    PENDING_CREATE
00:58:51.355317  00:58:51.380950  0.025633         GET     200    PENDING_CREATE
00:58:52.382078  00:58:52.450291  0.068213         GET     200    PENDING_CREATE
00:58:53.451400  00:58:53.477488  0.026088         GET     200    PENDING_CREATE
00:58:54.478588  00:58:54.505191  0.026603         GET     200    PENDING_CREATE
00:58:55.506101  00:58:55.533961  0.027860         GET     200    PENDING_CREATE
00:58:56.535048  00:58:56.563941  0.028893         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 58.898087

[localhost] local: gohan client ese_physical_port show --output-format json 76001683-a8bb-4c68-8c87-7b63ea7bd5cd
{
	"ese_physical_port": {
		"connected_port_id": "",
		"connected_port_owner": "mx_downlink",
		"description": "",
		"ese_device_id": "f5429afc-cf7e-41c4-91ee-36ec403a9695",
		"existing": "new",
		"id": "76001683-a8bb-4c68-8c87-7b63ea7bd5cd",
		"name": "xe-0/0/4",
		"operational_state": "UP",
		"orchestration_state": "CREATE_COMPLETE",
		"status": "ACTIVE",
		"tags": {},
		"tenant_id": "20511c5aef804417a03bf14ed8aea3b8"
	}
}

#################################################
### checking heat-stack (ese_physical_ports) ####
#################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/ese_physical_ports/76001683-a8bb-4c68-8c87-7b63ea7bd5cd
[localhost] local: heat stack-show ese_physical_port_76001683-a8bb-4c68-8c87-7b63ea7bd5cd
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                           |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                              |
| creation_time         | 2018-03-30T00:57:58Z                                                                                                                                                                            |
| description           | Physical port template                                                                                                                                                                          |
| disable_rollback      | True                                                                                                                                                                                            |
| id                    | 86d28504-cbc6-43ad-8c0a-12674d62e474                                                                                                                                                            |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/20511c5aef804417a03bf14ed8aea3b8/stacks/ese_physical_port_76001683-a8bb-4c68-8c87-7b63ea7bd5cd/86d28504-cbc6-43ad-8c0a-12674d62e474 |
| notification_topics   | []                                                                                                                                                                                              |
| outputs               | [                                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                             |
|                       |     "output_value": "2b9fc4b0-a261-4218-a9fc-7b449642836b",                                                                                                                                     |
|                       |     "description": "Monitoring Target ID",                                                                                                                                                      |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                                        |
|                       |   },                                                                                                                                                                                            |
|                       |   {                                                                                                                                                                                             |
|                       |     "output_value": "06bfe521-07f0-4931-9f8c-318c3ad8114e",                                                                                                                                     |
|                       |     "description": "A unique id for the physical interface",                                                                                                                                    |
|                       |     "output_key": "id"                                                                                                                                                                          |
|                       |   },                                                                                                                                                                                            |
|                       |   {                                                                                                                                                                                             |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/2b9fc4b0-a261-4218-a9fc-7b449642836b",                                                            |
|                       |     "description": "Monitoring Process Link",                                                                                                                                                   |
|                       |     "output_key": "monitoring_link"                                                                                                                                                             |
|                       |   },                                                                                                                                                                                            |
|                       |   {                                                                                                                                                                                             |
|                       |     "output_value": "xe-0/0/38",                                                                                                                                                                |
|                       |     "description": "The name of the physical interface.",                                                                                                                                       |
|                       |     "output_key": "name"                                                                                                                                                                        |
|                       |   }                                                                                                                                                                                             |
|                       | ]                                                                                                                                                                                               |
| parameters            | {                                                                                                                                                                                               |
|                       |   "physical_port_name": "xe-0/0/4",                                                                                                                                                             |
|                       |   "OS::stack_id": "86d28504-cbc6-43ad-8c0a-12674d62e474",                                                                                                                                       |
|                       |   "OS::stack_name": "ese_physical_port_76001683-a8bb-4c68-8c87-7b63ea7bd5cd",                                                                                                                   |
|                       |   "tenant_id": "20511c5aef804417a03bf14ed8aea3b8",                                                                                                                                              |
|                       |   "device_ip": "10.161.0.34",                                                                                                                                                                   |
|                       |   "physical_device": "7e5c78fa-71c0-427e-947f-586b1fc3c470",                                                                                                                                    |
|                       |   "version": "1",                                                                                                                                                                               |
|                       |   "gohan_id": "76001683-a8bb-4c68-8c87-7b63ea7bd5cd"                                                                                                                                            |
|                       | }                                                                                                                                                                                               |
| parent                | None                                                                                                                                                                                            |
| stack_name            | ese_physical_port_76001683-a8bb-4c68-8c87-7b63ea7bd5cd                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                           |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                                 |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                             |
| stack_user_project_id | 20511c5aef804417a03bf14ed8aea3b8                                                                                                                                                                |
| template_description  | Physical port template                                                                                                                                                                          |
| timeout_mins          | 6                                                                                                                                                                                               |
| updated_time          | None                                                                                                                                                                                            |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show ese_physical_port_76001683-a8bb-4c68-8c87-7b63ea7bd5cd
description: 'Physical port template

  '
heat_template_version: '2013-05-23'
outputs:
  id:
    description: A unique id for the physical interface
    value: {get_resource: physical_interface}
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [interface_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: interface_monitor}
  name:
    description: The name of the physical interface.
    value:
      get_attr: [physical_interface, name]
parameters:
  device_ip: {description: Device IP Address., label: Device IP Address, type: string}
  gohan_id: {description: UUID of the ESE Physical Port, label: Gohan resource ID,
    type: string}
  physical_device: {description: Id of the physical device on which physical port
      will be created., label: Physical Device Id, type: string}
  physical_port_name: {description: Name of the physical port., label: Physical Interface
      Name, type: string}
  tenant_id: {label: Tenant ID, type: string}
  version: {label: Config version, type: number}
resources:
  interface_monitor:
    depends_on: physical_interface
    properties:
      field_name: port
      properties:
        community_name: ESE_NODE_COMMUNITY
        device_ip: {get_param: device_ip}
        if_name: {get_param: physical_port_name}
      resource_id: {get_param: gohan_id}
      resource_type: ese_physical_ports
      syncer_properties:
        etcd:
          status: {key: port}
      tenant_id: {get_param: tenant_id}
      type: snmp_ports_status
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget
  physical_interface:
    properties:
      name: {get_param: physical_port_name}
      physical_router: {get_param: physical_device}
    type: OS::Contrail::PhysicalInterface

### Create Edge Router ###
name:[vMX-router-02], id:[2a28fdaa-651b-4558-8825-891b93329123]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
00:58:57.824528  00:58:57.885237  0.060709        POST     201    PENDING_CREATE
00:58:57.885304  00:58:57.911263  0.025959         GET     200    PENDING_CREATE
00:58:58.912382  00:58:58.947002  0.034620         GET     200    PENDING_CREATE
00:58:59.947128  00:58:59.977972  0.030844         GET     200    PENDING_CREATE
00:59:00.979096  00:59:01.009650  0.030554         GET     200    PENDING_CREATE
00:59:02.010735  00:59:02.038404  0.027669         GET     200    PENDING_CREATE
00:59:03.039321  00:59:03.067852  0.028531         GET     200    PENDING_CREATE
00:59:04.068938  00:59:04.099324  0.030386         GET     200    PENDING_CREATE
00:59:05.099668  00:59:05.126872  0.027204         GET     200    PENDING_CREATE
00:59:06.127711  00:59:06.153866  0.026155         GET     200    PENDING_CREATE
00:59:07.154994  00:59:07.181580  0.026586         GET     200    PENDING_CREATE
00:59:08.182687  00:59:08.208267  0.025580         GET     200    PENDING_CREATE
00:59:09.209419  00:59:09.238400  0.028981         GET     200    PENDING_CREATE
00:59:10.239482  00:59:10.265970  0.026488         GET     200    PENDING_CREATE
00:59:11.267054  00:59:11.292098  0.025044         GET     200    PENDING_CREATE
00:59:12.293219  00:59:12.318049  0.024830         GET     200    PENDING_CREATE
00:59:13.319092  00:59:13.346053  0.026961         GET     200    PENDING_CREATE
00:59:14.346504  00:59:14.372685  0.026181         GET     200    PENDING_CREATE
00:59:15.373771  00:59:15.407925  0.034154         GET     200    PENDING_CREATE
00:59:16.408059  00:59:16.438436  0.030377         GET     200    PENDING_CREATE
00:59:17.439090  00:59:17.465844  0.026754         GET     200    PENDING_CREATE
00:59:18.466931  00:59:18.492244  0.025313         GET     200    PENDING_CREATE
00:59:19.492557  00:59:19.519187  0.026630         GET     200    PENDING_CREATE
00:59:20.520280  00:59:20.546443  0.026163         GET     200    PENDING_CREATE
00:59:21.547547  00:59:21.572931  0.025384         GET     200    PENDING_CREATE
00:59:22.574045  00:59:22.598628  0.024583         GET     200    PENDING_CREATE
00:59:23.599759  00:59:23.626924  0.027165         GET     200    PENDING_CREATE
00:59:24.628098  00:59:24.653681  0.025583         GET     200    PENDING_CREATE
00:59:25.654793  00:59:25.680572  0.025779         GET     200    PENDING_CREATE
00:59:26.681704  00:59:26.707751  0.026047         GET     200    PENDING_CREATE
00:59:27.708859  00:59:27.735272  0.026413         GET     200    PENDING_CREATE
00:59:28.736403  00:59:28.762167  0.025764         GET     200    PENDING_CREATE
00:59:29.763275  00:59:29.789733  0.026458         GET     200    PENDING_CREATE
00:59:30.790816  00:59:30.816359  0.025543         GET     200    PENDING_CREATE
00:59:31.817440  00:59:31.843598  0.026158         GET     200    PENDING_CREATE
00:59:32.843699  00:59:32.870492  0.026793         GET     200    PENDING_CREATE
00:59:33.871656  00:59:33.896879  0.025223         GET     200    PENDING_CREATE
00:59:34.897323  00:59:34.923661  0.026338         GET     200    PENDING_CREATE
00:59:35.923746  00:59:35.949456  0.025710         GET     200    PENDING_CREATE
00:59:36.950601  00:59:36.975944  0.025343         GET     200    PENDING_CREATE
00:59:37.977096  00:59:38.003787  0.026691         GET     200    PENDING_CREATE
00:59:39.004920  00:59:39.031118  0.026198         GET     200    PENDING_CREATE
00:59:40.032276  00:59:40.057666  0.025390         GET     200    PENDING_CREATE
00:59:41.058786  00:59:41.084191  0.025405         GET     200    PENDING_CREATE
00:59:42.085280  00:59:42.110153  0.024873         GET     200    PENDING_CREATE
00:59:43.111311  00:59:43.138687  0.027376         GET     200    PENDING_CREATE
00:59:44.139654  00:59:44.165512  0.025858         GET     200    PENDING_CREATE
00:59:45.166619  00:59:45.213391  0.046772         GET     200    PENDING_CREATE
00:59:46.214254  00:59:46.240580  0.026326         GET     200    PENDING_CREATE
00:59:47.241690  00:59:47.267116  0.025426         GET     200    PENDING_CREATE
00:59:48.267353  00:59:48.293276  0.025923         GET     200    PENDING_CREATE
00:59:49.294363  00:59:49.322232  0.027869         GET     200    PENDING_CREATE
00:59:50.323316  00:59:50.349711  0.026395         GET     200    PENDING_CREATE
00:59:51.350811  00:59:51.377388  0.026577         GET     200    PENDING_CREATE
00:59:52.378491  00:59:52.403560  0.025069         GET     200    PENDING_CREATE
00:59:53.404698  00:59:53.430621  0.025923         GET     200    PENDING_CREATE
00:59:54.431760  00:59:54.457256  0.025496         GET     200    PENDING_CREATE
00:59:55.458367  00:59:55.484534  0.026167         GET     200    PENDING_CREATE
00:59:56.485650  00:59:56.511004  0.025354         GET     200    PENDING_CREATE
00:59:57.511659  00:59:57.538451  0.026792         GET     200    PENDING_CREATE
00:59:58.539590  00:59:58.564452  0.024862         GET     200    PENDING_CREATE
00:59:59.565536  00:59:59.590931  0.025395         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 61.766403

[localhost] local: gohan client edge_router show --output-format json 2a28fdaa-651b-4558-8825-891b93329123
{
	"edge_router": {
		"autonomous_system": "65101",
		"description": "MX80 #2",
		"id": "2a28fdaa-651b-4558-8825-891b93329123",
		"ip": "192.168.100.102",
		"login": "esi",
		"name": "vMX-router-02",
		"operational_state": "UP",
		"orchestration_state": "CREATE_COMPLETE",
		"password": "esiesi0000",
		"ssh_port": 830,
		"status": "ACTIVE",
		"tenant_id": "20511c5aef804417a03bf14ed8aea3b8"
	}
}

### Create Edge Router ###
name:[vMX-router-01], id:[43119898-9a76-400c-abdc-8d3ec2113b5d]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
00:59:59.890024  00:59:59.953845  0.063821        POST     201    PENDING_CREATE
00:59:59.953909  00:59:59.982535  0.028626         GET     200    PENDING_CREATE
01:00:00.983629  01:00:01.010087  0.026458         GET     200    PENDING_CREATE
01:00:02.011218  01:00:02.039214  0.027996         GET     200    PENDING_CREATE
01:00:03.040363  01:00:03.065780  0.025417         GET     200    PENDING_CREATE
01:00:04.066892  01:00:04.117608  0.050716         GET     200    PENDING_CREATE
01:00:05.118736  01:00:05.146259  0.027523         GET     200    PENDING_CREATE
01:00:06.147381  01:00:06.173477  0.026096         GET     200    PENDING_CREATE
01:00:07.174644  01:00:07.199237  0.024593         GET     200    PENDING_CREATE
01:00:08.199667  01:00:08.224629  0.024962         GET     200    PENDING_CREATE
01:00:09.225760  01:00:09.252442  0.026682         GET     200    PENDING_CREATE
01:00:10.253559  01:00:10.280131  0.026572         GET     200    PENDING_CREATE
01:00:11.281267  01:00:11.307473  0.026206         GET     200    PENDING_CREATE
01:00:12.307675  01:00:12.335590  0.027915         GET     200    PENDING_CREATE
01:00:13.335999  01:00:13.361607  0.025608         GET     200    PENDING_CREATE
01:00:14.361749  01:00:14.386977  0.025228         GET     200    PENDING_CREATE
01:00:15.388081  01:00:15.413084  0.025003         GET     200    PENDING_CREATE
01:00:16.414200  01:00:16.439317  0.025117         GET     200    PENDING_CREATE
01:00:17.440481  01:00:17.464970  0.024489         GET     200    PENDING_CREATE
01:00:18.466088  01:00:18.491830  0.025742         GET     200    PENDING_CREATE
01:00:19.492896  01:00:19.519438  0.026542         GET     200    PENDING_CREATE
01:00:20.519649  01:00:20.544839  0.025190         GET     200    PENDING_CREATE
01:00:21.545591  01:00:21.572004  0.026413         GET     200    PENDING_CREATE
01:00:22.573117  01:00:22.599399  0.026282         GET     200    PENDING_CREATE
01:00:23.600527  01:00:23.625409  0.024882         GET     200    PENDING_CREATE
01:00:24.626529  01:00:24.653317  0.026788         GET     200    PENDING_CREATE
01:00:25.654414  01:00:25.680295  0.025881         GET     200    PENDING_CREATE
01:00:26.681424  01:00:26.706262  0.024838         GET     200    PENDING_CREATE
01:00:27.707367  01:00:27.734683  0.027316         GET     200    PENDING_CREATE
01:00:28.735831  01:00:28.762793  0.026962         GET     200    PENDING_CREATE
01:00:29.763877  01:00:29.789633  0.025756         GET     200    PENDING_CREATE
01:00:30.790229  01:00:30.815574  0.025345         GET     200    PENDING_CREATE
01:00:31.816705  01:00:31.841549  0.024844         GET     200    PENDING_CREATE
01:00:32.842667  01:00:32.868047  0.025380         GET     200    PENDING_CREATE
01:00:33.869199  01:00:33.895030  0.025831         GET     200    PENDING_CREATE
01:00:34.896165  01:00:34.920827  0.024662         GET     200    PENDING_CREATE
01:00:35.921946  01:00:35.949992  0.028046         GET     200    PENDING_CREATE
01:00:36.951144  01:00:36.977471  0.026327         GET     200    PENDING_CREATE
01:00:37.978597  01:00:38.004104  0.025507         GET     200    PENDING_CREATE
01:00:39.005226  01:00:39.030689  0.025463         GET     200    PENDING_CREATE
01:00:40.031676  01:00:40.056756  0.025080         GET     200    PENDING_CREATE
01:00:41.057513  01:00:41.084130  0.026617         GET     200    PENDING_CREATE
01:00:42.085237  01:00:42.110422  0.025185         GET     200    PENDING_CREATE
01:00:43.111549  01:00:43.136543  0.024994         GET     200    PENDING_CREATE
01:00:44.137657  01:00:44.166720  0.029063         GET     200    PENDING_CREATE
01:00:45.167826  01:00:45.193399  0.025573         GET     200    PENDING_CREATE
01:00:46.194524  01:00:46.223080  0.028556         GET     200    PENDING_CREATE
01:00:47.224211  01:00:47.250174  0.025963         GET     200    PENDING_CREATE
01:00:48.251267  01:00:48.291507  0.040240         GET     200    PENDING_CREATE
01:00:49.291675  01:00:49.321450  0.029775         GET     200    PENDING_CREATE
01:00:50.322566  01:00:50.347831  0.025265         GET     200    PENDING_CREATE
01:00:51.348952  01:00:51.373819  0.024867         GET     200    PENDING_CREATE
01:00:52.374036  01:00:52.398842  0.024806         GET     200    PENDING_CREATE
01:00:53.400022  01:00:53.425947  0.025925         GET     200    PENDING_CREATE
01:00:54.427037  01:00:54.452917  0.025880         GET     200    PENDING_CREATE
01:00:55.454036  01:00:55.479642  0.025606         GET     200    PENDING_CREATE
01:00:56.480750  01:00:56.506156  0.025406         GET     200    PENDING_CREATE
01:00:57.507299  01:00:57.533429  0.026130         GET     200    PENDING_CREATE
01:00:58.534577  01:00:58.560796  0.026219         GET     200    PENDING_CREATE
01:00:59.561917  01:00:59.587700  0.025783         GET     200    PENDING_CREATE
01:01:00.588818  01:01:00.616538  0.027720         GET     200    PENDING_CREATE
01:01:01.617711  01:01:01.643412  0.025701         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 61.753388

[localhost] local: gohan client edge_router show --output-format json 43119898-9a76-400c-abdc-8d3ec2113b5d
{
	"edge_router": {
		"autonomous_system": "65101",
		"description": "MX80 #1",
		"id": "43119898-9a76-400c-abdc-8d3ec2113b5d",
		"ip": "192.168.100.101",
		"login": "esi",
		"name": "vMX-router-01",
		"operational_state": "UP",
		"orchestration_state": "CREATE_COMPLETE",
		"password": "esiesi0000",
		"ssh_port": 830,
		"status": "ACTIVE",
		"tenant_id": "20511c5aef804417a03bf14ed8aea3b8"
	}
}

### Create Ha Router ###
name:[sample-ha-router], id:[420b119a-c91e-4426-b4b4-80b5a7010910]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
01:01:01.989425  01:01:02.074906  0.085481        POST     201    PENDING_CREATE
01:01:02.075249  01:01:02.101695  0.026446         GET     200    PENDING_CREATE
01:01:03.102825  01:01:03.128086  0.025261         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 1.138661

[localhost] local: gohan client ha_router show --output-format json 420b119a-c91e-4426-b4b4-80b5a7010910
{
	"ha_router": {
		"available_gateways": 500,
		"description": "sample_ha_router",
		"id": "420b119a-c91e-4426-b4b4-80b5a7010910",
		"maximum_gateways": 500,
		"name": "sample-ha-router",
		"primary_router_id": "2a28fdaa-651b-4558-8825-891b93329123",
		"secondary_router_id": "43119898-9a76-400c-abdc-8d3ec2113b5d",
		"status": "ACTIVE",
		"tenant_id": "20511c5aef804417a03bf14ed8aea3b8"
	}
}

### Create Er Physical Interface ###
name:[ae0], id:[7dd45d1b-1ca1-4735-9a3e-8b7e09125e0d]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
01:01:03.441370  01:01:03.526900  0.085530        POST     201    PENDING_CREATE
01:01:03.527014  01:01:03.553485  0.026471         GET     200    PENDING_CREATE
01:01:04.554657  01:01:04.580087  0.025430         GET     200    PENDING_CREATE
01:01:05.581179  01:01:05.606644  0.025465         GET     200    PENDING_CREATE
01:01:06.607752  01:01:06.634350  0.026598         GET     200    PENDING_CREATE
01:01:07.635472  01:01:07.661642  0.026170         GET     200    PENDING_CREATE
01:01:08.662746  01:01:08.688680  0.025934         GET     200    PENDING_CREATE
01:01:09.689797  01:01:09.716427  0.026630         GET     200    PENDING_CREATE
01:01:10.717621  01:01:10.743831  0.026210         GET     200    PENDING_CREATE
01:01:11.744951  01:01:11.771397  0.026446         GET     200    PENDING_CREATE
01:01:12.772514  01:01:12.798128  0.025614         GET     200    PENDING_CREATE
01:01:13.799052  01:01:13.824654  0.025602         GET     200    PENDING_CREATE
01:01:14.825777  01:01:14.852156  0.026379         GET     200    PENDING_CREATE
01:01:15.853282  01:01:15.880411  0.027129         GET     200    PENDING_CREATE
01:01:16.881595  01:01:16.909601  0.028006         GET     200    PENDING_CREATE
01:01:17.910733  01:01:18.004152  0.093419         GET     200    PENDING_CREATE
01:01:19.005279  01:01:19.030278  0.024999         GET     200    PENDING_CREATE
01:01:20.031399  01:01:20.057004  0.025605         GET     200    PENDING_CREATE
01:01:21.058094  01:01:21.083565  0.025471         GET     200    PENDING_CREATE
01:01:22.084740  01:01:22.112293  0.027553         GET     200    PENDING_CREATE
01:01:23.113473  01:01:23.138858  0.025385         GET     200    PENDING_CREATE
01:01:24.139997  01:01:24.166558  0.026561         GET     200    PENDING_CREATE
01:01:25.166904  01:01:25.193116  0.026212         GET     200    PENDING_CREATE
01:01:26.194264  01:01:26.220085  0.025821         GET     200    PENDING_CREATE
01:01:27.221227  01:01:27.246827  0.025600         GET     200    PENDING_CREATE
01:01:28.247940  01:01:28.273641  0.025701         GET     200    PENDING_CREATE
01:01:29.274800  01:01:29.301456  0.026656         GET     200    PENDING_CREATE
01:01:30.302572  01:01:30.330400  0.027828         GET     200    PENDING_CREATE
01:01:31.331527  01:01:31.357319  0.025792         GET     200    PENDING_CREATE
01:01:32.358437  01:01:32.383538  0.025101         GET     200    PENDING_CREATE
01:01:33.384675  01:01:33.410369  0.025694         GET     200    PENDING_CREATE
01:01:34.410647  01:01:34.437646  0.026999         GET     200    PENDING_CREATE
01:01:35.438808  01:01:35.463970  0.025162         GET     200    PENDING_CREATE
01:01:36.465111  01:01:36.490308  0.025197         GET     200    PENDING_CREATE
01:01:37.491447  01:01:37.516477  0.025030         GET     200    PENDING_CREATE
01:01:38.516797  01:01:38.542295  0.025498         GET     200    PENDING_CREATE
01:01:39.543455  01:01:39.569593  0.026138         GET     200    PENDING_CREATE
01:01:40.570779  01:01:40.595764  0.024985         GET     200    PENDING_CREATE
01:01:41.596930  01:01:41.621972  0.025042         GET     200    PENDING_CREATE
01:01:42.623135  01:01:42.649637  0.026502         GET     200    PENDING_CREATE
01:01:43.650777  01:01:43.677537  0.026760         GET     200    PENDING_CREATE
01:01:44.678643  01:01:44.704087  0.025444         GET     200    PENDING_CREATE
01:01:45.705225  01:01:45.730732  0.025507         GET     200    PENDING_CREATE
01:01:46.731850  01:01:46.758942  0.027092         GET     200    PENDING_CREATE
01:01:47.760084  01:01:47.785377  0.025293         GET     200    PENDING_CREATE
01:01:48.786516  01:01:48.833068  0.046552         GET     200    PENDING_CREATE
01:01:49.834210  01:01:49.859215  0.025005         GET     200    PENDING_CREATE
01:01:50.860336  01:01:50.885850  0.025514         GET     200    PENDING_CREATE
01:01:51.886994  01:01:51.912914  0.025920         GET     200    PENDING_CREATE
01:01:52.914057  01:01:52.939186  0.025129         GET     200    PENDING_CREATE
01:01:53.939418  01:01:53.964223  0.024805         GET     200    PENDING_CREATE
01:01:54.965351  01:01:54.991186  0.025835         GET     200    PENDING_CREATE
01:01:55.992307  01:01:56.017703  0.025396         GET     200    PENDING_CREATE
01:01:57.018866  01:01:57.043931  0.025065         GET     200    PENDING_CREATE
01:01:58.045038  01:01:58.070325  0.025287         GET     200    PENDING_CREATE
01:01:59.071447  01:01:59.097828  0.026381         GET     200    PENDING_CREATE
01:02:00.098923  01:02:00.159125  0.060202         GET     200    PENDING_CREATE
01:02:01.160263  01:02:01.193347  0.033084         GET     200    PENDING_CREATE
01:02:02.194451  01:02:02.228903  0.034452         GET     200    PENDING_CREATE
01:02:03.230002  01:02:03.260745  0.030743         GET     200    PENDING_CREATE
01:02:04.261849  01:02:04.289950  0.028101         GET     200    PENDING_CREATE
01:02:05.291054  01:02:05.330600  0.039546         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 61.88923

[localhost] local: gohan client er_physical_interface show --output-format json 7dd45d1b-1ca1-4735-9a3e-8b7e09125e0d
{
	"er_physical_interface": {
		"connected_ese_port_id": "7861b62a-55fe-4e98-9bfc-10bf19052d9a",
		"description": "",
		"device_id": "2a28fdaa-651b-4558-8825-891b93329123",
		"id": "7dd45d1b-1ca1-4735-9a3e-8b7e09125e0d",
		"name": "ae0",
		"operational_state": "UP",
		"orchestration_state": "CREATE_COMPLETE",
		"status": "ACTIVE",
		"tenant_id": "20511c5aef804417a03bf14ed8aea3b8"
	}
}

### Create Er Physical Interface ###
name:[ae0], id:[372f28d1-8fb2-4bb1-9b42-cfc30515735a]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
01:02:05.648934  01:02:05.780692  0.131758        POST     201    PENDING_CREATE
01:02:05.780805  01:02:05.809873  0.029068         GET     200    PENDING_CREATE
01:02:06.810976  01:02:06.842513  0.031537         GET     200    PENDING_CREATE
01:02:07.843626  01:02:07.874343  0.030717         GET     200    PENDING_CREATE
01:02:08.875457  01:02:08.912538  0.037081         GET     200    PENDING_CREATE
01:02:09.913669  01:02:09.944070  0.030401         GET     200    PENDING_CREATE
01:02:10.945176  01:02:10.972622  0.027446         GET     200    PENDING_CREATE
01:02:11.973722  01:02:12.003510  0.029788         GET     200    PENDING_CREATE
01:02:13.003786  01:02:13.039190  0.035404         GET     200    PENDING_CREATE
01:02:14.040309  01:02:14.070847  0.030538         GET     200    PENDING_CREATE
01:02:15.071954  01:02:15.100878  0.028924         GET     200    PENDING_CREATE
01:02:16.101984  01:02:16.129087  0.027103         GET     200    PENDING_CREATE
01:02:17.130193  01:02:17.158310  0.028117         GET     200    PENDING_CREATE
01:02:18.159421  01:02:18.187005  0.027584         GET     200    PENDING_CREATE
01:02:19.188140  01:02:19.215456  0.027316         GET     200    PENDING_CREATE
01:02:20.215639  01:02:20.244649  0.029010         GET     200    PENDING_CREATE
01:02:21.245812  01:02:21.279874  0.034062         GET     200    PENDING_CREATE
01:02:22.280975  01:02:22.316499  0.035524         GET     200    PENDING_CREATE
01:02:23.317615  01:02:23.350943  0.033328         GET     200    PENDING_CREATE
01:02:24.351636  01:02:24.384479  0.032843         GET     200    PENDING_CREATE
01:02:25.385583  01:02:25.421608  0.036025         GET     200    PENDING_CREATE
01:02:26.422733  01:02:26.448456  0.025723         GET     200    PENDING_CREATE
01:02:27.449576  01:02:27.475408  0.025832         GET     200    PENDING_CREATE
01:02:28.476525  01:02:28.501435  0.024910         GET     200    PENDING_CREATE
01:02:29.502549  01:02:29.529404  0.026855         GET     200    PENDING_CREATE
01:02:30.530531  01:02:30.557061  0.026530         GET     200    PENDING_CREATE
01:02:31.558184  01:02:31.583087  0.024903         GET     200    PENDING_CREATE
01:02:32.584226  01:02:32.683724  0.099498         GET     200    PENDING_CREATE
01:02:33.684862  01:02:33.713210  0.028348         GET     200    PENDING_CREATE
01:02:34.714321  01:02:34.739989  0.025668         GET     200    PENDING_CREATE
01:02:35.741169  01:02:35.766601  0.025432         GET     200    PENDING_CREATE
01:02:36.767785  01:02:36.793397  0.025612         GET     200    PENDING_CREATE
01:02:37.793790  01:02:37.819022  0.025232         GET     200    PENDING_CREATE
01:02:38.820153  01:02:38.845684  0.025531         GET     200    PENDING_CREATE
01:02:39.846835  01:02:39.872289  0.025454         GET     200    PENDING_CREATE
01:02:40.873438  01:02:40.899711  0.026273         GET     200    PENDING_CREATE
01:02:41.900188  01:02:41.925845  0.025657         GET     200    PENDING_CREATE
01:02:42.926993  01:02:42.952179  0.025186         GET     200    PENDING_CREATE
01:02:43.953312  01:02:43.978532  0.025220         GET     200    PENDING_CREATE
01:02:44.979674  01:02:45.005259  0.025585         GET     200    PENDING_CREATE
01:02:46.006396  01:02:46.032654  0.026258         GET     200    PENDING_CREATE
01:02:47.033811  01:02:47.058515  0.024704         GET     200    PENDING_CREATE
01:02:48.059680  01:02:48.085228  0.025548         GET     200    PENDING_CREATE
01:02:49.086369  01:02:49.113009  0.026640         GET     200    PENDING_CREATE
01:02:50.114142  01:02:50.140524  0.026382         GET     200    PENDING_CREATE
01:02:51.141674  01:02:51.173315  0.031641         GET     200    PENDING_CREATE
01:02:52.174454  01:02:52.199370  0.024916         GET     200    PENDING_CREATE
01:02:53.200527  01:02:53.225598  0.025071         GET     200    PENDING_CREATE
01:02:54.226753  01:02:54.252588  0.025835         GET     200    PENDING_CREATE
01:02:55.253696  01:02:55.278385  0.024689         GET     200    PENDING_CREATE
01:02:56.278885  01:02:56.303957  0.025072         GET     200    PENDING_CREATE
01:02:57.305097  01:02:57.331954  0.026857         GET     200    PENDING_CREATE
01:02:58.333066  01:02:58.360890  0.027824         GET     200    PENDING_CREATE
01:02:59.362009  01:02:59.386973  0.024964         GET     200    PENDING_CREATE
01:03:00.388115  01:03:00.434641  0.046526         GET     200    PENDING_CREATE
01:03:01.435775  01:03:01.460790  0.025015         GET     200    PENDING_CREATE
01:03:02.461916  01:03:02.487359  0.025443         GET     200    PENDING_CREATE
01:03:03.488469  01:03:03.514748  0.026279         GET     200    PENDING_CREATE
01:03:04.515894  01:03:04.541051  0.025157         GET     200    PENDING_CREATE
01:03:05.542221  01:03:05.567157  0.024936         GET     200    PENDING_CREATE
01:03:06.567988  01:03:06.593630  0.025642         GET     200    PENDING_CREATE
01:03:07.594858  01:03:07.619817  0.024959         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 61.970883

[localhost] local: gohan client er_physical_interface show --output-format json 372f28d1-8fb2-4bb1-9b42-cfc30515735a
{
	"er_physical_interface": {
		"connected_ese_port_id": "76001683-a8bb-4c68-8c87-7b63ea7bd5cd",
		"description": "",
		"device_id": "43119898-9a76-400c-abdc-8d3ec2113b5d",
		"id": "372f28d1-8fb2-4bb1-9b42-cfc30515735a",
		"name": "ae0",
		"operational_state": "UP",
		"orchestration_state": "CREATE_COMPLETE",
		"status": "ACTIVE",
		"tenant_id": "20511c5aef804417a03bf14ed8aea3b8"
	}
}

### Create Ha Interface ###
name:[sample-ha-router-downlink], id:[54a252d3-8248-45b1-b67e-2f13e00b5005]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
01:03:07.939707  01:03:08.105247  0.165540        POST     201    PENDING_CREATE
01:03:08.105329  01:03:08.141577  0.036248         GET     200    PENDING_CREATE
01:03:09.142696  01:03:09.181424  0.038728         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 1.241717

[localhost] local: gohan client ha_interface show --output-format json 54a252d3-8248-45b1-b67e-2f13e00b5005
{
	"ha_interface": {
		"admin_state_up": true,
		"available_be_bandwidth": 500,
		"available_ga_bandwidth": 500,
		"description": "",
		"gateway_instances_count": 0,
		"ha_router_id": "420b119a-c91e-4426-b4b4-80b5a7010910",
		"id": "54a252d3-8248-45b1-b67e-2f13e00b5005",
		"link_type": "downlink",
		"maximum_be_bandwidth": 500,
		"maximum_ga_bandwidth": 500,
		"name": "sample-ha-router-downlink",
		"primary_interface_id": "7dd45d1b-1ca1-4735-9a3e-8b7e09125e0d",
		"restricted_vlans": "0-1024,4094",
		"secondary_interface_id": "372f28d1-8fb2-4bb1-9b42-cfc30515735a",
		"status": "ACTIVE",
		"tenant_id": "20511c5aef804417a03bf14ed8aea3b8",
		"vlan_ids_available": 3069,
		"vlan_pool_state": "//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAM="
	}
}

### Create Internet Service ###
name:[sample-internet-service], id:[e8a97c54-3446-4a55-9e3f-f9045cd97b24]
-----------------------------------------------------------------
http_request     http_response    response_time   method   code
-----------------------------------------------------------------
01:03:19.480254  01:03:19.557712  0.077458        POST     201
01:03:19.557798  01:03:19.584788  0.026990         GET     200
-----------------------------------------------------------------
Turn Around Time : 0.104534

[localhost] local: gohan client internet_service show --output-format json e8a97c54-3446-4a55-9e3f-f9045cd97b24
{
	"internet_service": {
		"be_forwarding_class": "FC-INET-BE",
		"default_static_routes_per_gateway": 32,
		"description": "",
		"downlink_interfaces": [
			"54a252d3-8248-45b1-b67e-2f13e00b5005"
		],
		"ga_forwarding_class": "FC-INET-GA",
		"id": "e8a97c54-3446-4a55-9e3f-f9045cd97b24",
		"inet_in_filter": "INET_IN",
		"inet_out_filter": "INET_OUT",
		"minimal_submask_length": 26,
		"name": "sample-internet-service",
		"neighbour_prefix": "BGP-VIRTUAL-ROUTER-PEERS",
		"primary_ibgp_config_group": "InetGW2-RI-IBGP",
		"primary_vrrp_config_group": "InetGW1-VRRP",
		"secondary_ibgp_config_group": "InetGW1-RI-IBGP",
		"secondary_vrrp_config_group": "InetGW2-VRRP",
		"tenant_id": "20511c5aef804417a03bf14ed8aea3b8",
		"uplink_import_policy": "INSTANCE-MASTER_IN",
		"vrf_config": "",
		"vrf_export_policy": "INSTANCE-USER_OUT",
		"vrf_import_policy": "INSTANCE-USER_IN",
		"zone": "jp1-zone1"
	}
}

### Create Internet Qos Option ###
name:[10Mbps-Guaranteed], id:[e6a65b22-6f74-4c9c-af6a-a393e70c66ac]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
01:03:29.902548  01:03:29.989332  0.086784        POST     201    PENDING_CREATE
01:03:29.989396  01:03:30.017621  0.028225         GET     200    PENDING_CREATE
01:03:31.018733  01:03:31.045944  0.027211         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 1.143396

[localhost] local: gohan client qos_option show --output-format json e6a65b22-6f74-4c9c-af6a-a393e70c66ac
{
	"qos_option": {
		"aws_service_id": null,
		"azure_service_id": null,
		"bandwidth": "10",
		"charge_type": null,
		"description": "",
		"gcp_service_id": null,
		"ha_router_id": "420b119a-c91e-4426-b4b4-80b5a7010910",
		"id": "e6a65b22-6f74-4c9c-af6a-a393e70c66ac",
		"incoming_policer_config": "action { loss-priority high then discard; } single-rate { color-blind; committed-information-rate 10m; committed-burst-size 187500000; excess-burst-size 187500000; }",
		"incoming_policer_name": "10M-GA-UP-INET",
		"interdc_service_id": null,
		"internet_service_id": "e8a97c54-3446-4a55-9e3f-f9045cd97b24",
		"name": "10Mbps-Guaranteed",
		"orchestration_state": "SYNC_COMPLETE",
		"outgoing_policer_config": "if-exceeding { bandwidth-limit 10m; burst-size-limit 187500000; } then discard;",
		"outgoing_policer_name": "10M-GA-DOWN-INET",
		"qos_type": "guarantee",
		"service_type": "internet",
		"status": "ACTIVE",
		"tenant_id": "20511c5aef804417a03bf14ed8aea3b8",
		"vpn_service_id": null
	}
}

### Create Public Ip Pool ###
name:[public_ip_pool], id:[874dd765-93d7-454f-8f8d-0c6f7e8bcac2]
-----------------------------------------------------------------
http_request     http_response    response_time   method   code
-----------------------------------------------------------------
01:03:31.396674  01:03:31.492054  0.095380        POST     201
01:03:31.492149  01:03:31.517842  0.025693         GET     200
-----------------------------------------------------------------
Turn Around Time : 0.121168

[localhost] local: gohan client public_ip_pool show --output-format json 874dd765-93d7-454f-8f8d-0c6f7e8bcac2
{
	"public_ip_pool": {
		"addresses_available": 512,
		"ha_router_id": "420b119a-c91e-4426-b4b4-80b5a7010910",
		"id": "874dd765-93d7-454f-8f8d-0c6f7e8bcac2",
		"internet_service_id": "e8a97c54-3446-4a55-9e3f-f9045cd97b24",
		"ip_version": 4,
		"pool_state": "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==",
		"submask_length": 23,
		"subnet_ip": "203.0.112.0",
		"tenant_id": "20511c5aef804417a03bf14ed8aea3b8"
	}
}

### Create Internet Gateway ###
name:[sample-internet-gateway], id:[d4e4e75c-8c02-420f-9eda-fa5771c3bad6]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
01:03:31.924083  01:03:32.060904  0.136821        POST     201    PENDING_CREATE
01:03:32.061002  01:03:32.090879  0.029877         GET     200    PENDING_CREATE
01:03:33.091971  01:03:33.122001  0.030030         GET     200    PENDING_CREATE
01:03:34.123090  01:03:34.152972  0.029882         GET     200    PENDING_CREATE
01:03:35.154106  01:03:35.184108  0.030002         GET     200    PENDING_CREATE
01:03:36.184943  01:03:36.213169  0.028226         GET     200    PENDING_CREATE
01:03:37.214260  01:03:37.241877  0.027617         GET     200    PENDING_CREATE
01:03:38.244082  01:03:38.271346  0.027264         GET     200    PENDING_CREATE
01:03:39.271697  01:03:39.297630  0.025933         GET     200    PENDING_CREATE
01:03:40.298768  01:03:40.325700  0.026932         GET     200    PENDING_CREATE
01:03:41.326839  01:03:41.353792  0.026953         GET     200    PENDING_CREATE
01:03:42.354958  01:03:42.381878  0.026920         GET     200    PENDING_CREATE
01:03:43.382975  01:03:43.411244  0.028269         GET     200    PENDING_CREATE
01:03:44.411650  01:03:44.528794  0.117144         GET     200    PENDING_CREATE
01:03:45.529876  01:03:45.556128  0.026252         GET     200    PENDING_CREATE
01:03:46.557238  01:03:46.584740  0.027502         GET     200    PENDING_CREATE
01:03:47.585877  01:03:47.614688  0.028811         GET     200    PENDING_CREATE
01:03:48.615210  01:03:48.641901  0.026691         GET     200    PENDING_CREATE
01:03:49.643023  01:03:49.670069  0.027046         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 17.745986

[localhost] local: gohan client internet_gateway show --output-format json d4e4e75c-8c02-420f-9eda-fa5771c3bad6
{
	"internet_gateway": {
		"associated_uplink_id": null,
		"description": "Sample Internet-gateway",
		"downlink_interface_id": "54a252d3-8248-45b1-b67e-2f13e00b5005",
		"id": "d4e4e75c-8c02-420f-9eda-fa5771c3bad6",
		"internet_service_id": "e8a97c54-3446-4a55-9e3f-f9045cd97b24",
		"maximum_static_routes": 32,
		"name": "sample-internet-gateway",
		"orchestration_state": "CREATE_COMPLETE",
		"primary_logical_interface_name": "ae0.1025",
		"qos_option_id": "e6a65b22-6f74-4c9c-af6a-a393e70c66ac",
		"secondary_logical_interface_name": "ae0.1025",
		"status": "ACTIVE",
		"tenant_id": "20511c5aef804417a03bf14ed8aea3b8",
		"vlan_id": "1025",
		"vrf_name": "vrf_gw_sample-ha-router-downlink_1025"
	}
}

[localhost] local: gohan client resource_mapping list --output-format json
Command not found

[localhost] local: gohan client billing_resource list --output-format json
{
	"billing_resources": [
		{
			"config_version": 1,
			"ended": null,
			"id": "dda3ad32-230f-4c9b-809d-e7f637c65f43",
			"info": {
				"bandwidth": "10",
				"qos_type": "guarantee"
			},
			"parent_billing_id": "f43481b0-8f3f-4a5c-ac12-a35fcc3f29ce",
			"resource_id": "e6a65b22-6f74-4c9c-af6a-a393e70c66ac",
			"resource_type": "qos_option",
			"started": 1.522371829e+09,
			"tenant_id": "20511c5aef804417a03bf14ed8aea3b8",
			"unique_resource_id": null
		},
		{
			"config_version": 1,
			"ended": null,
			"id": "f43481b0-8f3f-4a5c-ac12-a35fcc3f29ce",
			"info": {
				"internet_service": "sample-internet-service"
			},
			"parent_billing_id": null,
			"resource_id": "d4e4e75c-8c02-420f-9eda-fa5771c3bad6",
			"resource_type": "internet_gateway",
			"started": 1.522371829e+09,
			"tenant_id": "20511c5aef804417a03bf14ed8aea3b8",
			"unique_resource_id": "d4e4e75c-8c02-420f-9eda-fa5771c3bad6"
		}
	]
}

################################################
### checking heat-stack (internet_gateways) ####
################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/internet_gateways/d4e4e75c-8c02-420f-9eda-fa5771c3bad6
[localhost] local: heat stack-show internet_gateway_d4e4e75c-8c02-420f-9eda-fa5771c3bad6
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                          |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                             |
| creation_time         | 2018-03-30T01:03:32Z                                                                                                                                                                           |
| description           | Internet GW Instance                                                                                                                                                                           |
| disable_rollback      | True                                                                                                                                                                                           |
| id                    | b319ea8c-7fc6-4fce-a742-17a6414bef65                                                                                                                                                           |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/20511c5aef804417a03bf14ed8aea3b8/stacks/internet_gateway_d4e4e75c-8c02-420f-9eda-fa5771c3bad6/b319ea8c-7fc6-4fce-a742-17a6414bef65 |
| notification_topics   | []                                                                                                                                                                                             |
| outputs               | [                                                                                                                                                                                              |
|                       |   {                                                                                                                                                                                            |
|                       |     "output_value": "082e613f-f9d2-4713-9a0a-238c5271d48f",                                                                                                                                    |
|                       |     "description": "Monitoring Target ID",                                                                                                                                                     |
|                       |     "output_key": "primary_monitoring_target_id"                                                                                                                                               |
|                       |   },                                                                                                                                                                                           |
|                       |   {                                                                                                                                                                                            |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/cc9ebe89-fd84-4b9e-b3ed-e1c32fc21c20",                                                           |
|                       |     "description": "Monitoring Process Link",                                                                                                                                                  |
|                       |     "output_key": "secondary_monitoring_link"                                                                                                                                                  |
|                       |   },                                                                                                                                                                                           |
|                       |   {                                                                                                                                                                                            |
|                       |     "output_value": "cc9ebe89-fd84-4b9e-b3ed-e1c32fc21c20",                                                                                                                                    |
|                       |     "description": "Monitoring Target ID",                                                                                                                                                     |
|                       |     "output_key": "secondary_monitoring_target_id"                                                                                                                                             |
|                       |   },                                                                                                                                                                                           |
|                       |   {                                                                                                                                                                                            |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/082e613f-f9d2-4713-9a0a-238c5271d48f",                                                           |
|                       |     "description": "Monitoring Process Link",                                                                                                                                                  |
|                       |     "output_key": "primary_monitoring_link"                                                                                                                                                    |
|                       |   }                                                                                                                                                                                            |
|                       | ]                                                                                                                                                                                              |
| parameters            | {                                                                                                                                                                                              |
|                       |   "vrf_export_policy": "INSTANCE-USER_OUT",                                                                                                                                                    |
|                       |   "secondary_device_physical_interface": "ae0",                                                                                                                                                |
|                       |   "counter_name_out": "vrf_gw_sample-ha-router-downlink_1025_OUT",                                                                                                                             |
|                       |   "primary_device_username": "esi",                                                                                                                                                            |
|                       |   "primary_device_logical_interface": "ae0.1025",                                                                                                                                              |
|                       |   "primary_device_password": "******",                                                                                                                                                         |
|                       |   "gohan_id": "d4e4e75c-8c02-420f-9eda-fa5771c3bad6",                                                                                                                                          |
|                       |   "vrf_import_policy": "INSTANCE-USER_IN",                                                                                                                                                     |
|                       |   "prefix_list_name": "vrf_gw_sample-ha-router-downlink_1025_prefix",                                                                                                                          |
|                       |   "output_filter_name": "FILTER_10M-GA-DOWN-INET",                                                                                                                                             |
|                       |   "secondary_vrrp_config_group": "InetGW2-VRRP",                                                                                                                                               |
|                       |   "primary_device_ip": "192.168.100.102",                                                                                                                                                      |
|                       |   "version": "1",                                                                                                                                                                              |
|                       |   "inet_in_filter": "INET_IN",                                                                                                                                                                 |
|                       |   "secondary_device_username": "esi",                                                                                                                                                          |
|                       |   "secondary_device_logical_interface": "ae0.1025",                                                                                                                                            |
|                       |   "counter_name_in": "vrf_gw_sample-ha-router-downlink_1025_IN",                                                                                                                               |
|                       |   "OS::stack_name": "internet_gateway_d4e4e75c-8c02-420f-9eda-fa5771c3bad6",                                                                                                                   |
|                       |   "inet_out_filter": "INET_OUT",                                                                                                                                                               |
|                       |   "vlan": "1025",                                                                                                                                                                              |
|                       |   "primary_device_physical_interface": "ae0",                                                                                                                                                  |
|                       |   "uplink_import_policy": "INSTANCE-MASTER_IN",                                                                                                                                                |
|                       |   "input_filter_name": "FILTER_10M-GA-UP-INET",                                                                                                                                                |
|                       |   "filter_term_name": "vrf_gw_sample-ha-router-downlink_1025_filter",                                                                                                                          |
|                       |   "OS::stack_id": "b319ea8c-7fc6-4fce-a742-17a6414bef65",                                                                                                                                      |
|                       |   "tenant_id": "20511c5aef804417a03bf14ed8aea3b8",                                                                                                                                             |
|                       |   "secondary_device_port": "830",                                                                                                                                                              |
|                       |   "secondary_device_password": "******",                                                                                                                                                       |
|                       |   "vrf_name": "vrf_gw_sample-ha-router-downlink_1025",                                                                                                                                         |
|                       |   "primary_vrrp_config_group": "InetGW1-VRRP",                                                                                                                                                 |
|                       |   "primary_device_port": "830",                                                                                                                                                                |
|                       |   "secondary_device_ip": "192.168.100.101"                                                                                                                                                     |
|                       | }                                                                                                                                                                                              |
| parent                | None                                                                                                                                                                                           |
| stack_name            | internet_gateway_d4e4e75c-8c02-420f-9eda-fa5771c3bad6                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                          |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                                |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                            |
| stack_user_project_id | 20511c5aef804417a03bf14ed8aea3b8                                                                                                                                                               |
| template_description  | Internet GW Instance                                                                                                                                                                           |
| timeout_mins          | 60                                                                                                                                                                                             |
| updated_time          | None                                                                                                                                                                                           |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show internet_gateway_d4e4e75c-8c02-420f-9eda-fa5771c3bad6
description: 'Internet GW Instance

  '
heat_template_version: '2013-05-23'
outputs:
  primary_monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [primary_igs_metric_monitor, link]
  primary_monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: primary_igs_metric_monitor}
  secondary_monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [secondary_igs_metric_monitor, link]
  secondary_monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: secondary_igs_metric_monitor}
parameters:
  counter_name_in: {label: Input counter name, type: string}
  counter_name_out: {label: Output counter name, type: string}
  filter_term_name: {label: Filter term name, type: string}
  gohan_id: {description: UUID of the GW Interface, label: Gohan resource ID, type: string}
  inet_in_filter: {label: Internet Input Filter, type: string}
  inet_out_filter: {label: Internet Output Filter, type: string}
  input_filter_name: {description: Policer name to use as input policer, label: Input
      policer name, type: string}
  output_filter_name: {description: Policer name to use as output policer, label: Output
      policer name, type: string}
  prefix_list_name: {label: Prefix list name, type: string}
  primary_device_ip: {description: Ip address that will be used to establish ssh connection
      to the Primary Device., label: Ip address of the device., type: string}
  primary_device_logical_interface: {description: Name of the created logical interface
      on the Primary device, label: Logical Interface name, type: string}
  primary_device_password: {description: Password of the user which will be used to
      log onto the Primary Device., hidden: true, label: Users password., type: string}
  primary_device_physical_interface: {description: Physical port on the Primary device
      on which the logical port will be configured, label: Underlying physical interface,
    type: string}
  primary_device_port: {description: Port that will be used to establish ssh connection
      to the Primary Device., label: Port of the ssh connection., type: number}
  primary_device_username: {description: Name of the user which will be used to log
      onto the Primary Device., label: User name to log on to device., type: string}
  primary_vrrp_config_group: {description: Name for apply group to use for interface
      for VRRP, label: Apply group name, type: string}
  secondary_device_ip: {description: Ip address that will be used to establish ssh
      connection to the Secondary Device., label: Ip address of the device., type: string}
  secondary_device_logical_interface: {description: Name of the created logical interface
      on the Secondary device, label: Logical Interface name, type: string}
  secondary_device_password: {description: Password of the user which will be used
      to log onto the Secondary Device., hidden: true, label: Users password., type: string}
  secondary_device_physical_interface: {description: Physical port on the Secondary
      device on which the logical port will be configured, label: Underlying physical
      interface, type: string}
  secondary_device_port: {description: Port that will be used to establish ssh connection
      to the Secondary Device., label: Port of the ssh connection., type: number}
  secondary_device_username: {description: Name of the user which will be used to
      log onto the Secondary Device., label: User name to log on to device., type: string}
  secondary_vrrp_config_group: {description: Name for apply group to use for interface
      for VRRP, label: Apply group name, type: string}
  tenant_id: {label: Tenant ID, type: string}
  uplink_import_policy: {description: Uplink Import Policy for IGS, label: Uplink
      Import Policy, type: string}
  version: {label: Config version, type: number}
  vlan: {description: vlan tag used by logical interface, label: VLAN ID, type: string}
  vrf_export_policy: {description: Export Policy for IGS, label: Export Policy, type: string}
  vrf_import_policy: {description: Import Policy for IGS, label: Import Policy, type: string}
  vrf_name: {description: Name for VRF used by logical interface, label: VRF name,
    type: string}
resources:
  netconf_configure_primary:
    properties:
      configs:
      - config:
          str_replace:
            params:
              $APPLY_GROUP: {get_param: primary_vrrp_config_group}
              $INPUT_FILTER: {get_param: input_filter_name}
              $OUTPUT_FILTER: {get_param: output_filter_name}
              $VLAN: {get_param: vlan}
            template: "apply-groups $APPLY_GROUP\nvlan-id $VLAN;\ndescription inet_gw;\n\
              family inet {\n    filter {\n        input $INPUT_FILTER;\n        output\
              \ $OUTPUT_FILTER;\n    }\n}\n"
        path:
        - {config_type: tag, tag: interfaces, xml_type: tag}
        - config_type: name
          name: {get_param: primary_device_physical_interface}
          tag: interface
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: vlan}
          tag: unit
          xml_type: named_tag
      - config:
          str_replace:
            params:
              $EXPORT_POLICY: {get_param: vrf_export_policy}
              $IMPORT_POLICY: {get_param: vrf_import_policy}
              $LIF: {get_param: primary_device_logical_interface}
            template: 'instance-type virtual-router;

              interface $LIF;

              routing-options instance-import $IMPORT_POLICY;

              routing-options instance-export $EXPORT_POLICY;

              '
        path:
        - {config_type: tag, tag: routing-instances, xml_type: tag}
        - config_type: name
          name: {get_param: vrf_name}
          tag: instance
          xml_type: named_tag
      - config:
          str_replace:
            params:
              $VRF_NAME: {get_param: vrf_name}
            template: 'from instance $VRF_NAME;

              then accept;

              '
        path:
        - {config_type: tag, tag: policy-options, xml_type: tag}
        - config_type: named_tag
          name: {get_param: uplink_import_policy}
          tag: policy-statement
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: vrf_name}
          tag: term
          xml_type: named_tag
      - config: ''
        path:
        - {config_type: tag, tag: policy-options, xml_type: tag}
        - config_type: named_tag
          name: {get_param: prefix_list_name}
          tag: prefix-list
          xml_type: named_tag
      - additional_commands:
          str_replace:
            params:
              $INET_IN: {get_param: inet_in_filter}
              $TERM_NAME: {get_param: filter_term_name}
            template: 'insert firewall family inet filter $INET_IN term $TERM_NAME
              before term all-accept

              '
        config:
          str_replace:
            params:
              $PREFIX_LIST_NAME: {get_param: prefix_list_name}
              $VRF_NAME: {get_param: vrf_name}
            template: "from {\n   destination-prefix-list {\n        $PREFIX_LIST_NAME;\n\
              \   }\n}\nthen {\n     count $VRF_NAME_IN;\n     accept;\n}\n"
        path:
        - {config_type: tag, tag: firewall, xml_type: tag}
        - {config_type: tag, tag: family, xml_type: tag}
        - {config_type: tag, tag: inet, xml_type: tag}
        - config_type: named_tag
          name: {get_param: inet_in_filter}
          tag: filter
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: filter_term_name}
          tag: term
          xml_type: named_tag
      - additional_commands:
          str_replace:
            params:
              $INET_OUT: {get_param: inet_out_filter}
              $TERM_NAME: {get_param: filter_term_name}
            template: 'insert firewall family inet filter $INET_OUT term $TERM_NAME
              before term all-accept

              '
        config:
          str_replace:
            params:
              $PREFIX_LIST_NAME: {get_param: prefix_list_name}
              $VRF_NAME: {get_param: vrf_name}
            template: "from {\n   source-prefix-list {\n        $PREFIX_LIST_NAME;\n\
              \   }\n}\nthen {\n     count $VRF_NAME_OUT;\n     accept;\n}\n"
        path:
        - {config_type: tag, tag: firewall, xml_type: tag}
        - {config_type: tag, tag: family, xml_type: tag}
        - {config_type: tag, tag: inet, xml_type: tag}
        - config_type: named_tag
          name: {get_param: inet_out_filter}
          tag: filter
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: filter_term_name}
          tag: term
          xml_type: named_tag
      device_ip: {get_param: primary_device_ip}
      lock_timeout: 3000
      on_update: merge
      password: {get_param: primary_device_password}
      port: {get_param: primary_device_port}
      username: {get_param: primary_device_username}
    type: OS::Contrail::NetconfNamedConfigs
  netconf_configure_secondary:
    depends_on: netconf_configure_primary
    properties:
      configs:
      - config:
          str_replace:
            params:
              $APPLY_GROUP: {get_param: secondary_vrrp_config_group}
              $INPUT_FILTER: {get_param: input_filter_name}
              $OUTPUT_FILTER: {get_param: output_filter_name}
              $VLAN: {get_param: vlan}
            template: "apply-groups $APPLY_GROUP\nvlan-id $VLAN;\ndescription inet_gw;\n\
              family inet {\n    filter {\n        input $INPUT_FILTER;\n        output\
              \ $OUTPUT_FILTER;\n    }\n}\n"
        path:
        - {config_type: tag, tag: interfaces, xml_type: tag}
        - config_type: name
          name: {get_param: secondary_device_physical_interface}
          tag: interface
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: vlan}
          tag: unit
          xml_type: named_tag
      - config:
          str_replace:
            params:
              $EXPORT_POLICY: {get_param: vrf_export_policy}
              $IMPORT_POLICY: {get_param: vrf_import_policy}
              $LIF: {get_param: secondary_device_logical_interface}
            template: 'instance-type virtual-router;

              interface $LIF;

              routing-options instance-import $IMPORT_POLICY;

              routing-options instance-export $EXPORT_POLICY;

              '
        path:
        - {config_type: tag, tag: routing-instances, xml_type: tag}
        - config_type: name
          name: {get_param: vrf_name}
          tag: instance
          xml_type: named_tag
      - config:
          str_replace:
            params:
              $VRF_NAME: {get_param: vrf_name}
            template: 'from instance $VRF_NAME;

              then accept;

              '
        path:
        - {config_type: tag, tag: policy-options, xml_type: tag}
        - config_type: named_tag
          name: {get_param: uplink_import_policy}
          tag: policy-statement
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: vrf_name}
          tag: term
          xml_type: named_tag
      - config: ''
        path:
        - {config_type: tag, tag: policy-options, xml_type: tag}
        - config_type: named_tag
          name: {get_param: prefix_list_name}
          tag: prefix-list
          xml_type: named_tag
      - additional_commands:
          str_replace:
            params:
              $INET_IN: {get_param: inet_in_filter}
              $TERM_NAME: {get_param: filter_term_name}
            template: 'insert firewall family inet filter $INET_IN term $TERM_NAME
              before term all-accept

              '
        config:
          str_replace:
            params:
              $PREFIX_LIST_NAME: {get_param: prefix_list_name}
              $VRF_NAME: {get_param: vrf_name}
            template: "from {\n   destination-prefix-list {\n        $PREFIX_LIST_NAME;\n\
              \   }\n}\nthen {\n     count $VRF_NAME_IN;\n     accept;\n}\n"
        path:
        - {config_type: tag, tag: firewall, xml_type: tag}
        - {config_type: tag, tag: family, xml_type: tag}
        - {config_type: tag, tag: inet, xml_type: tag}
        - config_type: named_tag
          name: {get_param: inet_in_filter}
          tag: filter
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: filter_term_name}
          tag: term
          xml_type: named_tag
      - additional_commands:
          str_replace:
            params:
              $INET_OUT: {get_param: inet_out_filter}
              $TERM_NAME: {get_param: filter_term_name}
            template: 'insert firewall family inet filter $INET_OUT term $TERM_NAME
              before term all-accept

              '
        config:
          str_replace:
            params:
              $PREFIX_LIST_NAME: {get_param: prefix_list_name}
              $VRF_NAME: {get_param: vrf_name}
            template: "from {\n   source-prefix-list {\n        $PREFIX_LIST_NAME;\n\
              \   }\n}\nthen {\n     count $VRF_NAME_OUT;\n     accept;\n}\n"
        path:
        - {config_type: tag, tag: firewall, xml_type: tag}
        - {config_type: tag, tag: family, xml_type: tag}
        - {config_type: tag, tag: inet, xml_type: tag}
        - config_type: named_tag
          name: {get_param: inet_out_filter}
          tag: filter
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: filter_term_name}
          tag: term
          xml_type: named_tag
      device_ip: {get_param: secondary_device_ip}
      lock_timeout: 3000
      on_update: merge
      password: {get_param: secondary_device_password}
      port: {get_param: secondary_device_port}
      username: {get_param: secondary_device_username}
    type: OS::Contrail::NetconfNamedConfigs
  primary_igs_metric_monitor:
    depends_on: netconf_configure_secondary
    properties:
      field_name: primary_counter
      properties:
        counter_name_in: {get_param: counter_name_in}
        counter_name_out: {get_param: counter_name_out}
        host: {get_param: primary_device_ip}
        login: {get_param: primary_device_username}
        password: {get_param: primary_device_password}
        port: {get_param: primary_device_port}
        primary_device_ip: {get_param: primary_device_ip}
        secondary_device_ip: {get_param: secondary_device_ip}
      resource_id: {get_param: gohan_id}
      resource_type: internet_gateways
      syncer_properties:
        tsdb:
          traffic.in:
            metric: traffic.bytes
            tags:
              device_index: primary
              direction: in
              resource_id: {get_param: gohan_id}
          traffic.out:
            metric: traffic.bytes
            tags:
              device_index: primary
              direction: out
              resource_id: {get_param: gohan_id}
      tenant_id: {get_param: tenant_id}
      type: igs_counter
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget
  secondary_igs_metric_monitor:
    depends_on: netconf_configure_secondary
    properties:
      field_name: secondary_counter
      properties:
        counter_name_in: {get_param: counter_name_in}
        counter_name_out: {get_param: counter_name_out}
        host: {get_param: secondary_device_ip}
        login: {get_param: secondary_device_username}
        password: {get_param: secondary_device_password}
        port: {get_param: secondary_device_port}
        primary_device_ip: {get_param: primary_device_ip}
        secondary_device_ip: {get_param: secondary_device_ip}
      resource_id: {get_param: gohan_id}
      resource_type: internet_gateways
      syncer_properties:
        tsdb:
          traffic.in:
            metric: traffic.bytes
            tags:
              device_index: secondary
              direction: in
              resource_id: {get_param: gohan_id}
          traffic.out:
            metric: traffic.bytes
            tags:
              device_index: secondary
              direction: out
              resource_id: {get_param: gohan_id}
      tenant_id: {get_param: tenant_id}
      type: igs_counter
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget

### Create Public Ip ###
name:[sample-public_ip], id:[6f583980-3f9e-458f-8f68-f42a7adfb211]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
01:04:01.369112  01:04:01.479458  0.110346        POST     201    PENDING_CREATE
01:04:01.479695  01:04:01.504341  0.024646         GET     200    PENDING_CREATE
01:04:02.505451  01:04:02.532023  0.026572         GET     200    PENDING_CREATE
01:04:03.533135  01:04:03.560546  0.027411         GET     200    PENDING_CREATE
01:04:04.561688  01:04:04.589565  0.027877         GET     200    PENDING_CREATE
01:04:05.590689  01:04:05.615971  0.025282         GET     200    PENDING_CREATE
01:04:06.617107  01:04:06.642251  0.025144         GET     200    PENDING_CREATE
01:04:07.643384  01:04:07.668943  0.025559         GET     200    PENDING_CREATE
01:04:08.670037  01:04:08.696035  0.025998         GET     200    PENDING_CREATE
01:04:09.697148  01:04:09.723211  0.026063         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 8.354099

[localhost] local: gohan client public_ip show --output-format json 6f583980-3f9e-458f-8f68-f42a7adfb211
{
	"public_ip": {
		"cidr": "203.0.112.0",
		"description": "Sample Public-Ip",
		"id": "6f583980-3f9e-458f-8f68-f42a7adfb211",
		"internet_gw_id": "d4e4e75c-8c02-420f-9eda-fa5771c3bad6",
		"ip_pool_id": "874dd765-93d7-454f-8f8d-0c6f7e8bcac2",
		"name": "sample-public_ip",
		"orchestration_state": "CREATE_COMPLETE",
		"status": "ACTIVE",
		"submask_length": 28,
		"suspended_public_ip_id": null,
		"tenant_id": "20511c5aef804417a03bf14ed8aea3b8"
	}
}

[localhost] local: gohan client resource_mapping list --output-format json
Command not found

[localhost] local: gohan client billing_resource list --output-format json
{
	"billing_resources": [
		{
			"config_version": 1,
			"ended": null,
			"id": "0970a905-6c25-4341-8a12-343f6f07eaf6",
			"info": {
				"cidr": "203.0.112.0",
				"submask_length": 28
			},
			"parent_billing_id": null,
			"resource_id": "6f583980-3f9e-458f-8f68-f42a7adfb211",
			"resource_type": "public_ip",
			"started": 1.522371849e+09,
			"tenant_id": "20511c5aef804417a03bf14ed8aea3b8",
			"unique_resource_id": "6f583980-3f9e-458f-8f68-f42a7adfb211"
		},
		{
			"config_version": 1,
			"ended": null,
			"id": "dda3ad32-230f-4c9b-809d-e7f637c65f43",
			"info": {
				"bandwidth": "10",
				"qos_type": "guarantee"
			},
			"parent_billing_id": "f43481b0-8f3f-4a5c-ac12-a35fcc3f29ce",
			"resource_id": "e6a65b22-6f74-4c9c-af6a-a393e70c66ac",
			"resource_type": "qos_option",
			"started": 1.522371829e+09,
			"tenant_id": "20511c5aef804417a03bf14ed8aea3b8",
			"unique_resource_id": null
		},
		{
			"config_version": 1,
			"ended": null,
			"id": "f43481b0-8f3f-4a5c-ac12-a35fcc3f29ce",
			"info": {
				"internet_service": "sample-internet-service"
			},
			"parent_billing_id": null,
			"resource_id": "d4e4e75c-8c02-420f-9eda-fa5771c3bad6",
			"resource_type": "internet_gateway",
			"started": 1.522371829e+09,
			"tenant_id": "20511c5aef804417a03bf14ed8aea3b8",
			"unique_resource_id": "d4e4e75c-8c02-420f-9eda-fa5771c3bad6"
		}
	]
}

#########################################
### checking heat-stack (public_ips) ####
#########################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/public_ips/6f583980-3f9e-458f-8f68-f42a7adfb211
[localhost] local: heat stack-show public_ip_6f583980-3f9e-458f-8f68-f42a7adfb211
+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                   |
+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                      |
| creation_time         | 2018-03-30T01:04:02Z                                                                                                                                                                    |
| description           | QoS Option                                                                                                                                                                              |
| disable_rollback      | True                                                                                                                                                                                    |
| id                    | c497b0cf-b3b0-4f96-a748-06d45d9fa123                                                                                                                                                    |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/20511c5aef804417a03bf14ed8aea3b8/stacks/public_ip_6f583980-3f9e-458f-8f68-f42a7adfb211/c497b0cf-b3b0-4f96-a748-06d45d9fa123 |
| notification_topics   | []                                                                                                                                                                                      |
| outputs               | []                                                                                                                                                                                      |
| parameters            | {                                                                                                                                                                                       |
|                       |   "primary_device_ip": "192.168.100.102",                                                                                                                                               |
|                       |   "OS::stack_id": "c497b0cf-b3b0-4f96-a748-06d45d9fa123",                                                                                                                               |
|                       |   "OS::stack_name": "public_ip_6f583980-3f9e-458f-8f68-f42a7adfb211",                                                                                                                   |
|                       |   "secondary_device_port": "830",                                                                                                                                                       |
|                       |   "secondary_device_password": "******",                                                                                                                                                |
|                       |   "ip_mask": "28",                                                                                                                                                                      |
|                       |   "primary_device_password": "******",                                                                                                                                                  |
|                       |   "ip_cidr": "203.0.112.0",                                                                                                                                                             |
|                       |   "primary_device_username": "esi",                                                                                                                                                     |
|                       |   "secondary_device_username": "esi",                                                                                                                                                   |
|                       |   "primary_device_port": "830",                                                                                                                                                         |
|                       |   "secondary_device_ip": "192.168.100.101",                                                                                                                                             |
|                       |   "prefix_list_name": "vrf_gw_sample-ha-router-downlink_1025_prefix"                                                                                                                    |
|                       | }                                                                                                                                                                                       |
| parent                | None                                                                                                                                                                                    |
| stack_name            | public_ip_6f583980-3f9e-458f-8f68-f42a7adfb211                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                   |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                         |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                     |
| stack_user_project_id | 20511c5aef804417a03bf14ed8aea3b8                                                                                                                                                        |
| template_description  | QoS Option                                                                                                                                                                              |
| timeout_mins          | 60                                                                                                                                                                                      |
| updated_time          | None                                                                                                                                                                                    |
+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show public_ip_6f583980-3f9e-458f-8f68-f42a7adfb211
description: 'QoS Option

  '
heat_template_version: '2013-05-23'
parameters:
  ip_cidr: {label: Public IP CIDR, type: string}
  ip_mask: {label: Public IP CIDR, type: string}
  prefix_list_name: {label: Prefix List name., type: string}
  primary_device_ip: {description: Ip address that will be used to establish ssh connection
      to the Primary Device., label: Ip address of the device., type: string}
  primary_device_password: {description: Password of the user which will be used to
      log onto the Primary Device., hidden: true, label: Users password., type: string}
  primary_device_port: {description: Port that will be used to establish ssh connection
      to the Primary Device., label: Port of the ssh connection., type: number}
  primary_device_username: {description: Name of the user which will be used to log
      onto the Primary Device., label: User name to log on to device., type: string}
  secondary_device_ip: {description: Ip address that will be used to establish ssh
      connection to the Secondary Device., label: Ip address of the device., type: string}
  secondary_device_password: {description: Password of the user which will be used
      to log onto the Secondary Device., hidden: true, label: Users password., type: string}
  secondary_device_port: {description: Port that will be used to establish ssh connection
      to the Secondary Device., label: Port of the ssh connection., type: number}
  secondary_device_username: {description: Name of the user which will be used to
      log onto the Secondary Device., label: User name to log on to device., type: string}
resources:
  netconf_configure_primary:
    properties:
      configs:
      - config: ''
        path:
        - {config_type: tag, tag: policy-options, xml_type: tag}
        - config_type: named_tag
          name: {get_param: prefix_list_name}
          tag: prefix-list
          xml_type: named_tag
        - config_type: name
          name:
            str_replace:
              params:
                $CIDR: {get_param: ip_cidr}
                $MASK: {get_param: ip_mask}
              template: '$CIDR/$MASK

                '
          tag: prefix-list-item
          xml_type: named_tag
      device_ip: {get_param: primary_device_ip}
      lock_timeout: 3000
      password: {get_param: primary_device_password}
      port: {get_param: primary_device_port}
      username: {get_param: primary_device_username}
    type: OS::Contrail::NetconfNamedConfigs
  netconf_configure_secondary:
    depends_on: netconf_configure_primary
    properties:
      configs:
      - config: ''
        path:
        - {config_type: tag, tag: policy-options, xml_type: tag}
        - config_type: named_tag
          name: {get_param: prefix_list_name}
          tag: prefix-list
          xml_type: named_tag
        - config_type: name
          name:
            str_replace:
              params:
                $CIDR: {get_param: ip_cidr}
                $MASK: {get_param: ip_mask}
              template: '$CIDR/$MASK

                '
          tag: prefix-list-item
          xml_type: named_tag
      device_ip: {get_param: secondary_device_ip}
      lock_timeout: 3000
      password: {get_param: secondary_device_password}
      port: {get_param: secondary_device_port}
      username: {get_param: secondary_device_username}
    type: OS::Contrail::NetconfNamedConfigs

### Create Network ###
name:[sample-network], id:[73f88c22-ae22-4fb7-86b3-9acb141b8809]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
01:04:21.439905  01:04:21.501140  0.061235        POST     201    PENDING_CREATE
01:04:21.501226  01:04:21.537071  0.035845         GET     200    PENDING_CREATE
01:04:22.538192  01:04:22.574146  0.035954         GET     200    PENDING_CREATE
01:04:23.575254  01:04:23.707265  0.132011         GET     200    PENDING_CREATE
01:04:24.707627  01:04:24.743414  0.035787         GET     200    PENDING_CREATE
01:04:25.744497  01:04:25.782596  0.038099         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 4.342691

[localhost] local: gohan client network show --output-format json 73f88c22-ae22-4fb7-86b3-9acb141b8809
{
	"network": {
		"admin_state_up": true,
		"description": "Sample Network",
		"id": "73f88c22-ae22-4fb7-86b3-9acb141b8809",
		"name": "sample-network",
		"orchestration_state": "CREATE_COMPLETE",
		"plane": "data",
		"shared": false,
		"status": "ACTIVE",
		"subnets": [],
		"tags": {},
		"tenant_id": "20511c5aef804417a03bf14ed8aea3b8"
	}
}

[localhost] local: gohan client resource_mapping list --output-format json
Command not found

[localhost] local: gohan client billing_resource list --output-format json
{
	"billing_resources": [
		{
			"config_version": 1,
			"ended": null,
			"id": "0970a905-6c25-4341-8a12-343f6f07eaf6",
			"info": {
				"cidr": "203.0.112.0",
				"submask_length": 28
			},
			"parent_billing_id": null,
			"resource_id": "6f583980-3f9e-458f-8f68-f42a7adfb211",
			"resource_type": "public_ip",
			"started": 1.522371849e+09,
			"tenant_id": "20511c5aef804417a03bf14ed8aea3b8",
			"unique_resource_id": "6f583980-3f9e-458f-8f68-f42a7adfb211"
		},
		{
			"config_version": 1,
			"ended": null,
			"id": "7c533b6d-b4d2-41f1-b24c-cd0512e08903",
			"info": {},
			"parent_billing_id": null,
			"resource_id": "73f88c22-ae22-4fb7-86b3-9acb141b8809",
			"resource_type": "network",
			"started": 1.522371865e+09,
			"tenant_id": "20511c5aef804417a03bf14ed8aea3b8",
			"unique_resource_id": "73f88c22-ae22-4fb7-86b3-9acb141b8809"
		},
		{
			"config_version": 1,
			"ended": null,
			"id": "dda3ad32-230f-4c9b-809d-e7f637c65f43",
			"info": {
				"bandwidth": "10",
				"qos_type": "guarantee"
			},
			"parent_billing_id": "f43481b0-8f3f-4a5c-ac12-a35fcc3f29ce",
			"resource_id": "e6a65b22-6f74-4c9c-af6a-a393e70c66ac",
			"resource_type": "qos_option",
			"started": 1.522371829e+09,
			"tenant_id": "20511c5aef804417a03bf14ed8aea3b8",
			"unique_resource_id": null
		},
		{
			"config_version": 1,
			"ended": null,
			"id": "f43481b0-8f3f-4a5c-ac12-a35fcc3f29ce",
			"info": {
				"internet_service": "sample-internet-service"
			},
			"parent_billing_id": null,
			"resource_id": "d4e4e75c-8c02-420f-9eda-fa5771c3bad6",
			"resource_type": "internet_gateway",
			"started": 1.522371829e+09,
			"tenant_id": "20511c5aef804417a03bf14ed8aea3b8",
			"unique_resource_id": "d4e4e75c-8c02-420f-9eda-fa5771c3bad6"
		}
	]
}

#######################################
### checking heat-stack (networks) ####
#######################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/networks/73f88c22-ae22-4fb7-86b3-9acb141b8809
[localhost] local: heat stack-show network_73f88c22-ae22-4fb7-86b3-9acb141b8809
+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                 |
+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                    |
| creation_time         | 2018-03-30T01:04:22Z                                                                                                                                                                  |
| description           | Network template                                                                                                                                                                      |
| disable_rollback      | True                                                                                                                                                                                  |
| id                    | bea47c8d-0bea-4b8a-a51b-9b4009eb74d6                                                                                                                                                  |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/20511c5aef804417a03bf14ed8aea3b8/stacks/network_73f88c22-ae22-4fb7-86b3-9acb141b8809/bea47c8d-0bea-4b8a-a51b-9b4009eb74d6 |
| notification_topics   | []                                                                                                                                                                                    |
| outputs               | [                                                                                                                                                                                     |
|                       |   {                                                                                                                                                                                   |
|                       |     "output_value": [],                                                                                                                                                               |
|                       |     "description": "The name of the virtual network.",                                                                                                                                |
|                       |     "output_key": "route_targets"                                                                                                                                                     |
|                       |   },                                                                                                                                                                                  |
|                       |   {                                                                                                                                                                                   |
|                       |     "output_value": "default-domain:usertenant:73f88c22-ae22-4fb7-86b3-9acb141b8809",                                                                                                 |
|                       |     "description": "The FQ name of the virtual network.",                                                                                                                             |
|                       |     "output_key": "fq_name"                                                                                                                                                           |
|                       |   },                                                                                                                                                                                  |
|                       |   {                                                                                                                                                                                   |
|                       |     "output_value": "73f88c22-ae22-4fb7-86b3-9acb141b8809",                                                                                                                           |
|                       |     "description": "A unique id for the virtual network.",                                                                                                                            |
|                       |     "output_key": "id"                                                                                                                                                                |
|                       |   },                                                                                                                                                                                  |
|                       |   {                                                                                                                                                                                   |
|                       |     "output_value": "73f88c22-ae22-4fb7-86b3-9acb141b8809",                                                                                                                           |
|                       |     "description": "The name of the virtual network.",                                                                                                                                |
|                       |     "output_key": "name"                                                                                                                                                              |
|                       |   }                                                                                                                                                                                   |
|                       | ]                                                                                                                                                                                     |
| parameters            | {                                                                                                                                                                                     |
|                       |   "forwarding_mode": "l2_l3",                                                                                                                                                         |
|                       |   "allow_transit": "False",                                                                                                                                                           |
|                       |   "name": "73f88c22-ae22-4fb7-86b3-9acb141b8809",                                                                                                                                     |
|                       |   "OS::stack_name": "network_73f88c22-ae22-4fb7-86b3-9acb141b8809",                                                                                                                   |
|                       |   "admin_state_up": "True",                                                                                                                                                           |
|                       |   "OS::stack_id": "bea47c8d-0bea-4b8a-a51b-9b4009eb74d6",                                                                                                                             |
|                       |   "external": "True",                                                                                                                                                                 |
|                       |   "shared": "False",                                                                                                                                                                  |
|                       |   "route_targets": "",                                                                                                                                                                |
|                       |   "uuid": "73f88c22-ae22-4fb7-86b3-9acb141b8809"                                                                                                                                      |
|                       | }                                                                                                                                                                                     |
| parent                | None                                                                                                                                                                                  |
| stack_name            | network_73f88c22-ae22-4fb7-86b3-9acb141b8809                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                 |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                       |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                   |
| stack_user_project_id | 20511c5aef804417a03bf14ed8aea3b8                                                                                                                                                      |
| template_description  | Network template                                                                                                                                                                      |
| timeout_mins          | 3                                                                                                                                                                                     |
| updated_time          | None                                                                                                                                                                                  |
+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show network_73f88c22-ae22-4fb7-86b3-9acb141b8809
description: 'Network template

  '
heat_template_version: '2013-05-23'
outputs:
  fq_name:
    description: The FQ name of the virtual network.
    value:
      get_attr: [network, fq_name]
  id:
    description: A unique id for the virtual network.
    value: {get_resource: network}
  name:
    description: The name of the virtual network.
    value:
      get_attr: [network, name]
  route_targets:
    description: The name of the virtual network.
    value:
      get_attr: [network, route_targets]
parameters:
  admin_state_up: {default: true, label: Admin state up, type: boolean}
  allow_transit: {default: false, label: Allow Transit, type: boolean}
  external: {default: true, label: External Network, type: boolean}
  forwarding_mode: {default: l2_l3, description: Forwarding Mode., label: Forwarding
      Mode, type: string}
  name: {description: Name of the virtual network that will be created., label: Virtual
      Network Name, type: string}
  route_targets:
    default: []
    label: Route Targets list
    type: comma_delimited_list
  shared: {default: false, label: Shared Network, type: boolean}
  uuid: {default: '', description: UUID of the virtual network that will be created.,
    label: Virtual Network UUID, type: string}
resources:
  network:
    properties:
      admin_state_up: {get_param: admin_state_up}
      forwarding_mode: {get_param: forwarding_mode}
      name: {get_param: name}
      route_targets: {get_param: route_targets}
      shared: {get_param: shared}
      uuid: {get_param: uuid}
    type: OS::Contrail::VirtualNetwork

### Create Subnet ###
name:[sample-subnet], id:[8fca93d6-5f0b-413d-98e0-74c3d1bacf07]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
01:04:37.472808  01:04:37.577606  0.104798        POST     201    PENDING_CREATE
01:04:37.577688  01:04:37.605356  0.027668         GET     200    PENDING_CREATE
01:04:38.606257  01:04:38.633741  0.027484         GET     200    PENDING_CREATE
01:04:39.634855  01:04:39.661716  0.026861         GET     200    PENDING_CREATE
01:04:40.662825  01:04:40.689946  0.027121         GET     200    PENDING_CREATE
01:04:41.690564  01:04:41.716683  0.026119         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 4.243875

[localhost] local: gohan client subnet show --output-format json 8fca93d6-5f0b-413d-98e0-74c3d1bacf07
{
	"subnet": {
		"allocation_pools": [
			{
				"end": "172.16.101.254",
				"start": "172.16.101.2"
			}
		],
		"cidr": "172.16.101.0/24",
		"description": "Sample Subnet",
		"dhcp_server_address": "172.16.101.2",
		"dns_nameservers": [],
		"enable_dhcp": true,
		"gateway_ip": "172.16.101.1",
		"host_routes": [],
		"id": "8fca93d6-5f0b-413d-98e0-74c3d1bacf07",
		"ip_version": 4,
		"ipv6_address_mode": null,
		"ipv6_ra_mode": null,
		"name": "sample-subnet",
		"network_id": "73f88c22-ae22-4fb7-86b3-9acb141b8809",
		"ntp_servers": [],
		"orchestration_state": "CREATE_COMPLETE",
		"status": "ACTIVE",
		"tags": {},
		"tenant_id": "20511c5aef804417a03bf14ed8aea3b8"
	}
}

[localhost] local: gohan client port list --output-format json
[localhost] local: gohan client port show --output-format json 33bbb900-1405-44e8-8b2e-3482e0b43a36
{
	"port": {
		"admin_state_up": true,
		"allowed_address_pairs": [],
		"attached": false,
		"binding:vif_type": "vrouter",
		"description": "DHCP Server Port",
		"device_id": "8fca93d6-5f0b-413d-98e0-74c3d1bacf07",
		"device_owner": "network:dhcp",
		"ese_logical_port_id": null,
		"fake_delete": false,
		"fixed_ips": [
			{
				"ip_address": "172.16.101.2",
				"subnet_id": "8fca93d6-5f0b-413d-98e0-74c3d1bacf07"
			}
		],
		"id": "33bbb900-1405-44e8-8b2e-3482e0b43a36",
		"mac_address": "00:00:5e:00:01:00",
		"managed_by_service": false,
		"name": "dhcp-server-port",
		"network_id": "73f88c22-ae22-4fb7-86b3-9acb141b8809",
		"operational_state": "",
		"orchestration_state": "SYNC_COMPLETE",
		"security_groups": [],
		"segmentation_id": null,
		"segmentation_type": null,
		"status": "ACTIVE",
		"tags": {},
		"tenant_id": "20511c5aef804417a03bf14ed8aea3b8"
	}
}

######################################
### checking heat-stack (subnets) ####
######################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/subnets/8fca93d6-5f0b-413d-98e0-74c3d1bacf07
[localhost] local: heat stack-show subnet_8fca93d6-5f0b-413d-98e0-74c3d1bacf07
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                |
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                   |
| creation_time         | 2018-03-30T01:04:38Z                                                                                                                                                                 |
| description           | Subnet template                                                                                                                                                                      |
| disable_rollback      | True                                                                                                                                                                                 |
| id                    | b33cd553-17b0-47b0-874c-022e1e458a70                                                                                                                                                 |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/20511c5aef804417a03bf14ed8aea3b8/stacks/subnet_8fca93d6-5f0b-413d-98e0-74c3d1bacf07/b33cd553-17b0-47b0-874c-022e1e458a70 |
| notification_topics   | []                                                                                                                                                                                   |
| outputs               | [                                                                                                                                                                                    |
|                       |   {                                                                                                                                                                                  |
|                       |     "output_value": "172.16.101.0/24",                                                                                                                                               |
|                       |     "description": "IP prefix of local subnet.",                                                                                                                                     |
|                       |     "output_key": "ip_prefix"                                                                                                                                                        |
|                       |   },                                                                                                                                                                                 |
|                       |   {                                                                                                                                                                                  |
|                       |     "output_value": "8fca93d6-5f0b-413d-98e0-74c3d1bacf07",                                                                                                                          |
|                       |     "description": "The name of the local subnet.",                                                                                                                                  |
|                       |     "output_key": "name"                                                                                                                                                             |
|                       |   },                                                                                                                                                                                 |
|                       |   {                                                                                                                                                                                  |
|                       |     "output_value": "172.16.101.1",                                                                                                                                                  |
|                       |     "description": "Default gateway of local subnet.",                                                                                                                               |
|                       |     "output_key": "default_gateway"                                                                                                                                                  |
|                       |   },                                                                                                                                                                                 |
|                       |   {                                                                                                                                                                                  |
|                       |     "output_value": "73f88c22-ae22-4fb7-86b3-9acb141b8809",                                                                                                                          |
|                       |     "description": "A unique id for the network.",                                                                                                                                   |
|                       |     "output_key": "network_id"                                                                                                                                                       |
|                       |   },                                                                                                                                                                                 |
|                       |   {                                                                                                                                                                                  |
|                       |     "output_value": "5a79909b-2bf3-4e26-8a9c-0bf6bb175457",                                                                                                                          |
|                       |     "description": "IPAM this local subnet uses.",                                                                                                                                   |
|                       |     "output_key": "ipam"                                                                                                                                                             |
|                       |   },                                                                                                                                                                                 |
|                       |   {                                                                                                                                                                                  |
|                       |     "output_value": "a93e21d9-d8ad-4ea8-aaf0-7a03a7024f67",                                                                                                                          |
|                       |     "description": "A unique id for the local subnet.",                                                                                                                              |
|                       |     "output_key": "id"                                                                                                                                                               |
|                       |   }                                                                                                                                                                                  |
|                       | ]                                                                                                                                                                                    |
| parameters            | {                                                                                                                                                                                    |
|                       |   "OS::stack_name": "subnet_8fca93d6-5f0b-413d-98e0-74c3d1bacf07",                                                                                                                   |
|                       |   "enable_dhcp": "True",                                                                                                                                                             |
|                       |   "network_id": "73f88c22-ae22-4fb7-86b3-9acb141b8809",                                                                                                                              |
|                       |   "ipam": "default-domain:default-project:default-network-ipam",                                                                                                                     |
|                       |   "dns_nameservers": "",                                                                                                                                                             |
|                       |   "dhcp_server_address": "172.16.101.2",                                                                                                                                             |
|                       |   "OS::stack_id": "b33cd553-17b0-47b0-874c-022e1e458a70",                                                                                                                            |
|                       |   "ntp_servers": "",                                                                                                                                                                 |
|                       |   "allocation_pools": "[{u'start': u'172.16.101.2', u'end': u'172.16.101.254'}]",                                                                                                    |
|                       |   "gateway_ip": "172.16.101.1",                                                                                                                                                      |
|                       |   "host_routes": "[]",                                                                                                                                                               |
|                       |   "cidr": "172.16.101.0/24",                                                                                                                                                         |
|                       |   "name": "8fca93d6-5f0b-413d-98e0-74c3d1bacf07"                                                                                                                                     |
|                       | }                                                                                                                                                                                    |
| parent                | None                                                                                                                                                                                 |
| stack_name            | subnet_8fca93d6-5f0b-413d-98e0-74c3d1bacf07                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                      |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                  |
| stack_user_project_id | 20511c5aef804417a03bf14ed8aea3b8                                                                                                                                                     |
| template_description  | Subnet template                                                                                                                                                                      |
| timeout_mins          | 3                                                                                                                                                                                    |
| updated_time          | None                                                                                                                                                                                 |
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show subnet_8fca93d6-5f0b-413d-98e0-74c3d1bacf07
description: 'Subnet template

  '
heat_template_version: '2013-05-23'
outputs:
  default_gateway:
    description: Default gateway of local subnet.
    value:
      get_attr: [subnet, default_gateway]
  id:
    description: A unique id for the local subnet.
    value: {get_resource: subnet}
  ip_prefix:
    description: IP prefix of local subnet.
    value:
      get_attr: [subnet, ip_prefix]
  ipam:
    description: IPAM this local subnet uses.
    value:
      get_attr: [subnet, ipam]
  name:
    description: The name of the local subnet.
    value:
      get_attr: [subnet, name]
  network_id:
    description: A unique id for the network.
    value:
      get_attr: [subnet, network_id]
parameters:
  allocation_pools:
    default: []
    description: Allocation Pools
    label: Allocation Pools
    type: string
  cidr: {description: IP prefix of the local subnet that will be created., label: Local
      Subnet IP prefix, type: string}
  dhcp_server_address: {default: 0.0.0.0, description: DHCP Server address, label: DHCP
      Server address, type: string}
  dns_nameservers:
    default: []
    description: DNS Nameservers List
    label: DNS Nameservers List
    type: comma_delimited_list
  enable_dhcp: {default: true, description: Enable DHCP, label: Enable DHCP, type: boolean}
  gateway_ip: {default: 0.0.0.0, description: Default gateway for the local subnet
      that will be created., label: Default Gateway, type: string}
  host_routes:
    default: []
    description: Host Routes
    label: Host Routes
    type: json
  ipam: {default: '', description: IPAM for the local subnet that will be created.,
    label: IP Address Management, type: string}
  name: {description: Name of the local subnet that will be created., label: Local
      Subnet Name, type: string}
  network_id: {description: ID of the network for which subnet will be created., label: Network
      ID, type: string}
  ntp_servers:
    default: []
    description: NTP Nameservers List
    label: NTP Nameservers List
    type: comma_delimited_list
resources:
  subnet:
    properties:
      allocation_pools: {get_param: allocation_pools}
      default_gateway: {get_param: gateway_ip}
      dns_nameservers: {get_param: dns_nameservers}
      dns_server_address: {get_param: dhcp_server_address}
      enable_dhcp: {get_param: enable_dhcp}
      gateway_is_vrouter: false
      host_routes: {get_param: host_routes}
      ip_prefix: {get_param: cidr}
      ipam: {get_param: ipam}
      name: {get_param: name}
      network_id: {get_param: network_id}
      ntp_servers: {get_param: ntp_servers}
    type: OS::Contrail::VnSubnet

### Create Gw Interface ###
name:[sample-gw-interface], id:[d84ce543-bc58-4844-b861-4a6d79fb2e48]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
01:04:53.440036  01:04:53.892205  0.452169        POST     201    PENDING_CREATE
01:04:53.892275  01:04:53.923002  0.030727         GET     200    PENDING_CREATE
01:04:54.924098  01:04:54.957467  0.033369         GET     200    PENDING_CREATE
01:04:55.958597  01:04:55.986408  0.027811         GET     200    PENDING_CREATE
01:04:56.987526  01:04:57.019822  0.032296         GET     200    PENDING_CREATE
01:04:58.020949  01:04:58.052607  0.031658         GET     200    PENDING_CREATE
01:04:59.053733  01:04:59.087063  0.033330         GET     200    PENDING_CREATE
01:05:00.088167  01:05:00.123073  0.034906         GET     200    PENDING_CREATE
01:05:01.123679  01:05:01.151798  0.028119         GET     200    PENDING_CREATE
01:05:02.152884  01:05:02.185640  0.032756         GET     200    PENDING_CREATE
01:05:03.186748  01:05:03.227400  0.040652         GET     200    PENDING_CREATE
01:05:04.228523  01:05:04.256459  0.027936         GET     200    PENDING_CREATE
01:05:05.257558  01:05:05.285368  0.027810         GET     200    PENDING_CREATE
01:05:06.286457  01:05:06.313239  0.026782         GET     200    PENDING_CREATE
01:05:07.314370  01:05:07.341885  0.027515         GET     200    PENDING_CREATE
01:05:08.343010  01:05:08.370876  0.027866         GET     200    PENDING_CREATE
01:05:09.371691  01:05:09.398973  0.027282         GET     200    PENDING_CREATE
01:05:10.399684  01:05:10.427476  0.027792         GET     200    PENDING_CREATE
01:05:11.428590  01:05:11.456774  0.028184         GET     200    PENDING_CREATE
01:05:12.457890  01:05:12.485602  0.027712         GET     200    PENDING_CREATE
01:05:13.486692  01:05:13.519777  0.033085         GET     200    PENDING_CREATE
01:05:14.520855  01:05:14.551482  0.030627         GET     200    PENDING_CREATE
01:05:15.552568  01:05:15.589423  0.036855         GET     200    PENDING_CREATE
01:05:16.590511  01:05:16.618424  0.027913         GET     200    PENDING_CREATE
01:05:17.619519  01:05:17.647547  0.028028         GET     200    PENDING_CREATE
01:05:18.648699  01:05:18.676940  0.028241         GET     200    PENDING_CREATE
01:05:19.678026  01:05:19.705135  0.027109         GET     200    PENDING_CREATE
01:05:20.705790  01:05:20.735805  0.030015         GET     200    PENDING_CREATE
01:05:21.736921  01:05:21.763544  0.026623         GET     200    PENDING_CREATE
01:05:22.763737  01:05:22.827587  0.063850         GET     200    PENDING_CREATE
01:05:23.828597  01:05:23.855367  0.026770         GET     200    PENDING_CREATE
01:05:24.855663  01:05:24.886057  0.030394         GET     200    PENDING_CREATE
01:05:25.887199  01:05:25.914081  0.026882         GET     200    PENDING_CREATE
01:05:26.915223  01:05:26.947264  0.032041         GET     200    PENDING_CREATE
01:05:27.947681  01:05:27.974358  0.026677         GET     200    PENDING_CREATE
01:05:28.975453  01:05:29.006806  0.031353         GET     200    PENDING_CREATE
01:05:30.007636  01:05:30.056181  0.048545         GET     200    PENDING_CREATE
01:05:31.057269  01:05:31.084438  0.027169         GET     200    PENDING_CREATE
01:05:32.085557  01:05:32.112178  0.026621         GET     200    PENDING_CREATE
01:05:33.113301  01:05:33.144691  0.031390         GET     200    PENDING_CREATE
01:05:34.145809  01:05:34.173310  0.027501         GET     200    PENDING_CREATE
01:05:35.174427  01:05:35.202194  0.027767         GET     200    PENDING_CREATE
01:05:36.203309  01:05:36.230272  0.026963         GET     200    PENDING_CREATE
01:05:37.231383  01:05:37.258975  0.027592         GET     200    PENDING_CREATE
01:05:38.260060  01:05:38.289871  0.029811         GET     200    PENDING_CREATE
01:05:39.290437  01:05:39.317972  0.027535         GET     200    PENDING_CREATE
01:05:40.318391  01:05:40.344827  0.026436         GET     200    PENDING_CREATE
01:05:41.345966  01:05:41.372973  0.027007         GET     200    PENDING_CREATE
01:05:42.373860  01:05:42.402718  0.028858         GET     200    PENDING_CREATE
01:05:43.403672  01:05:43.430286  0.026614         GET     200    PENDING_CREATE
01:05:44.431400  01:05:44.458861  0.027461         GET     200    PENDING_CREATE
01:05:45.459991  01:05:45.492035  0.032044         GET     200    PENDING_CREATE
01:05:46.493178  01:05:46.520623  0.027445         GET     200    PENDING_CREATE
01:05:47.521782  01:05:47.559472  0.037690         GET     200    PENDING_CREATE
01:05:48.559703  01:05:48.587026  0.027323         GET     200    PENDING_CREATE
01:05:49.588147  01:05:49.614907  0.026760         GET     200    PENDING_CREATE
01:05:50.615338  01:05:50.642966  0.027628         GET     200    PENDING_CREATE
01:05:51.644057  01:05:51.670812  0.026755         GET     200    PENDING_CREATE
01:05:52.671700  01:05:52.698881  0.027181         GET     200    PENDING_CREATE
01:05:53.699998  01:05:53.726986  0.026988         GET     200    PENDING_CREATE
01:05:54.727646  01:05:54.754327  0.026681         GET     200    PENDING_CREATE
01:05:55.755447  01:05:55.782970  0.027523         GET     200    PENDING_CREATE
01:05:56.784113  01:05:56.811774  0.027661         GET     200    PENDING_CREATE
01:05:57.812907  01:05:57.840253  0.027346         GET     200    PENDING_CREATE
01:05:58.841399  01:05:58.868820  0.027421         GET     200    PENDING_CREATE
01:05:59.869945  01:05:59.896788  0.026843         GET     200    PENDING_CREATE
01:06:00.897752  01:06:01.008137  0.110385         GET     200    PENDING_CREATE
01:06:02.008316  01:06:02.035626  0.027310         GET     200    PENDING_CREATE
01:06:03.036791  01:06:03.068563  0.031772         GET     200    PENDING_CREATE
01:06:04.069734  01:06:04.097201  0.027467         GET     200    PENDING_CREATE
01:06:05.098347  01:06:05.128282  0.029935         GET     200    PENDING_CREATE
01:06:06.128581  01:06:06.156221  0.027640         GET     200    PENDING_CREATE
01:06:07.157341  01:06:07.188543  0.031202         GET     200    PENDING_CREATE
01:06:08.189637  01:06:08.219564  0.029927         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 74.779528

[localhost] local: gohan client gw_interface show --output-format json d84ce543-bc58-4844-b861-4a6d79fb2e48
{
	"gw_interface": {
		"aws_gw_id": null,
		"azure_gw_id": null,
		"description": "Sample Gw-interface",
		"gcp_gw_id": null,
		"gw_vipv4": "172.16.101.151",
		"gw_vipv6": null,
		"id": "d84ce543-bc58-4844-b861-4a6d79fb2e48",
		"interdc_gw_id": null,
		"internet_gw_id": "d4e4e75c-8c02-420f-9eda-fa5771c3bad6",
		"name": "sample-gw-interface",
		"netmask": 24,
		"network_id": "73f88c22-ae22-4fb7-86b3-9acb141b8809",
		"operational_state": "UP",
		"orchestration_state": "CREATE_COMPLETE",
		"primary_ipv4": "172.16.101.152",
		"primary_ipv6": null,
		"public_ip_id": null,
		"secondary_ipv4": "172.16.101.153",
		"secondary_ipv6": null,
		"service_type": "internet",
		"status": "ACTIVE",
		"tenant_id": "20511c5aef804417a03bf14ed8aea3b8",
		"vpn_gw_id": null,
		"vrid": 20
	}
}

############################################
### checking heat-stack (gw_interfaces) ####
############################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/gw_interfaces/d84ce543-bc58-4844-b861-4a6d79fb2e48
[localhost] local: heat stack-show gw_interface_d84ce543-bc58-4844-b861-4a6d79fb2e48
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                      |
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                         |
| creation_time         | 2018-03-30T01:04:54Z                                                                                                                                                                       |
| description           | Inet Address                                                                                                                                                                               |
| disable_rollback      | True                                                                                                                                                                                       |
| id                    | a3e0ec47-e33f-4328-8eb0-2c7d40a1fade                                                                                                                                                       |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/20511c5aef804417a03bf14ed8aea3b8/stacks/gw_interface_d84ce543-bc58-4844-b861-4a6d79fb2e48/a3e0ec47-e33f-4328-8eb0-2c7d40a1fade |
| notification_topics   | []                                                                                                                                                                                         |
| outputs               | [                                                                                                                                                                                          |
|                       |   {                                                                                                                                                                                        |
|                       |     "output_value": "23957481-7625-47c9-9dfd-770dcca7b8af",                                                                                                                                |
|                       |     "description": "Monitoring Target ID",                                                                                                                                                 |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                                   |
|                       |   },                                                                                                                                                                                       |
|                       |   {                                                                                                                                                                                        |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/23957481-7625-47c9-9dfd-770dcca7b8af",                                                       |
|                       |     "description": "Monitoring Process Link",                                                                                                                                              |
|                       |     "output_key": "monitoring_link"                                                                                                                                                        |
|                       |   }                                                                                                                                                                                        |
|                       | ]                                                                                                                                                                                          |
| parameters            | {                                                                                                                                                                                          |
|                       |   "secondary_device_physical_interface": "ae0",                                                                                                                                            |
|                       |   "secondary_ibgp_config_group": "InetGW1-RI-IBGP",                                                                                                                                        |
|                       |   "primary_device_password": "******",                                                                                                                                                     |
|                       |   "secondary_device_gw_ip": "172.16.101.153",                                                                                                                                              |
|                       |   "gohan_id": "d84ce543-bc58-4844-b861-4a6d79fb2e48",                                                                                                                                      |
|                       |   "bgp_group_name": "inet-gw-group",                                                                                                                                                       |
|                       |   "OS::stack_name": "gw_interface_d84ce543-bc58-4844-b861-4a6d79fb2e48",                                                                                                                   |
|                       |   "gw_vip": "172.16.101.151",                                                                                                                                                              |
|                       |   "primary_device_ip": "192.168.100.102",                                                                                                                                                  |
|                       |   "version": "1",                                                                                                                                                                          |
|                       |   "secondary_device_username": "esi",                                                                                                                                                      |
|                       |   "secondary_logical_interface_name": "ae0.1025",                                                                                                                                          |
|                       |   "primary_logical_interface_name": "ae0.1025",                                                                                                                                            |
|                       |   "vlan": "1025",                                                                                                                                                                          |
|                       |   "primary_device_gw_ip": "172.16.101.152",                                                                                                                                                |
|                       |   "netmask": "24",                                                                                                                                                                         |
|                       |   "primary_device_physical_interface": "ae0",                                                                                                                                              |
|                       |   "vrrp_group": "20",                                                                                                                                                                      |
|                       |   "primary_device_priority": "105",                                                                                                                                                        |
|                       |   "OS::stack_id": "a3e0ec47-e33f-4328-8eb0-2c7d40a1fade",                                                                                                                                  |
|                       |   "tenant_id": "20511c5aef804417a03bf14ed8aea3b8",                                                                                                                                         |
|                       |   "secondary_device_port": "830",                                                                                                                                                          |
|                       |   "secondary_device_password": "******",                                                                                                                                                   |
|                       |   "vrf_name": "vrf_gw_sample-ha-router-downlink_1025",                                                                                                                                     |
|                       |   "primary_device_username": "esi",                                                                                                                                                        |
|                       |   "secondary_device_priority": "100",                                                                                                                                                      |
|                       |   "primary_ibgp_config_group": "InetGW2-RI-IBGP",                                                                                                                                          |
|                       |   "primary_device_port": "830",                                                                                                                                                            |
|                       |   "secondary_device_ip": "192.168.100.101"                                                                                                                                                 |
|                       | }                                                                                                                                                                                          |
| parent                | None                                                                                                                                                                                       |
| stack_name            | gw_interface_d84ce543-bc58-4844-b861-4a6d79fb2e48                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                      |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                            |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                        |
| stack_user_project_id | 20511c5aef804417a03bf14ed8aea3b8                                                                                                                                                           |
| template_description  | Inet Address                                                                                                                                                                               |
| timeout_mins          | 60                                                                                                                                                                                         |
| updated_time          | None                                                                                                                                                                                       |
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show gw_interface_d84ce543-bc58-4844-b861-4a6d79fb2e48
description: 'Inet Address

  '
heat_template_version: '2013-05-23'
outputs:
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [vrrp_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: vrrp_monitor}
parameters:
  bgp_group_name: {label: Name of BGP Group on VRF, type: string}
  gohan_id: {description: UUID of the GW Interface, label: Gohan resource ID, type: string}
  gw_vip: {description: Virtual IP configured on VRRP, label: Inet Address CIDR, type: string}
  netmask: {description: Netmask for gw_ip, label: Netmask, type: number}
  primary_device_gw_ip: {description: IP on primary device, label: Inet Address CIDR,
    type: string}
  primary_device_ip: {description: Ip address that will be used to establish ssh connection
      to the Primary Device., label: Ip address of the device., type: string}
  primary_device_password: {description: Password of the user which will be used to
      log onto the Primary Device., hidden: true, label: Users password., type: string}
  primary_device_physical_interface: {description: MX physical port on which logical
      interface will be created, label: Underlying physical interface, type: string}
  primary_device_port: {description: Port that will be used to establish ssh connection
      to the Primary Device., label: Port of the ssh connection., type: number}
  primary_device_priority: {label: Primary device priority, type: string}
  primary_device_username: {description: Name of the user which will be used to log
      onto the Primary Device., label: User name to log on to device., type: string}
  primary_ibgp_config_group: {description: Name for apply group to use for downlink
      interface, label: Apply group name, type: string}
  primary_logical_interface_name: {description: MX logical port, label: Underlying
      logical interface, type: string}
  secondary_device_gw_ip: {description: IP on secondary device, label: Inet Address
      CIDR, type: string}
  secondary_device_ip: {description: Ip address that will be used to establish ssh
      connection to the Secondary Device., label: Ip address of the device., type: string}
  secondary_device_password: {description: Password of the user which will be used
      to log onto the Secondary Device., hidden: true, label: Users password., type: string}
  secondary_device_physical_interface: {description: MX physical port on which logical
      interface will be created, label: Underlying physical interface, type: string}
  secondary_device_port: {description: Port that will be used to establish ssh connection
      to the Secondary Device., label: Port of the ssh connection., type: number}
  secondary_device_priority: {label: Secondary device priority, type: string}
  secondary_device_username: {description: Name of the user which will be used to
      log onto the Secondary Device., label: User name to log on to device., type: string}
  secondary_ibgp_config_group: {description: Name for apply group to use for downlink
      interface, label: Apply group name, type: string}
  secondary_logical_interface_name: {description: MX logical port, label: Underlying
      logical interface, type: string}
  tenant_id: {label: Tenant ID, type: string}
  version: {label: Config version, type: number}
  vlan: {description: Vlan tag for mx logical interface, label: Vlan Tag, type: string}
  vrf_name: {label: VRF, type: string}
  vrrp_group: {label: VRRP Group, type: string}
resources:
  netconf_configure_primary:
    properties:
      configs:
      - config:
          str_replace:
            params:
              $PRIORITY: {get_param: primary_device_priority}
              $VIP: {get_param: gw_vip}
              $VRRP_GROUP: {get_param: vrrp_group}
            template: "vrrp-group $VRRP_GROUP {\n    virtual-address $VIP;\n    priority\
              \ $PRIORITY;\n}\n"
        path:
        - {config_type: tag, tag: interfaces, xml_type: tag}
        - config_type: name
          name: {get_param: primary_device_physical_interface}
          tag: interface
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: vlan}
          tag: unit
          xml_type: named_tag
        - {config_type: tag, tag: family, xml_type: tag}
        - {config_type: tag, tag: inet, xml_type: tag}
        - config_type: named_tag
          name:
            str_replace:
              params:
                $DEVICE_IP: {get_param: primary_device_gw_ip}
                $NETMASK: {get_param: netmask}
              template: '$DEVICE_IP/$NETMASK

                '
          tag: address
          xml_type: named_tag
      - config:
          str_replace:
            params:
              $APPLY_GROUP: {get_param: primary_ibgp_config_group}
              $DEVICE_GW_IP: {get_param: primary_device_gw_ip}
              $NEIGHBOR_GW_IP: {get_param: secondary_device_gw_ip}
            template: 'apply-groups $APPLY_GROUP

              local-address $DEVICE_GW_IP;

              neighbor $NEIGHBOR_GW_IP;

              '
        path:
        - {config_type: tag, tag: routing-instances, xml_type: tag}
        - config_type: name
          name: {get_param: vrf_name}
          tag: instance
          xml_type: named_tag
        - {config_type: tag, tag: protocols, xml_type: tag}
        - {config_type: tag, tag: bgp, xml_type: tag}
        - config_type: named_tag
          name: {get_param: bgp_group_name}
          tag: group
          xml_type: named_tag
      device_ip: {get_param: primary_device_ip}
      lock_timeout: 3000
      password: {get_param: primary_device_password}
      port: {get_param: primary_device_port}
      username: {get_param: primary_device_username}
    type: OS::Contrail::NetconfNamedConfigs
  netconf_configure_secondary:
    depends_on: netconf_configure_primary
    properties:
      configs:
      - config:
          str_replace:
            params:
              $PRIORITY: {get_param: secondary_device_priority}
              $VIP: {get_param: gw_vip}
              $VRRP_GROUP: {get_param: vrrp_group}
            template: "vrrp-group $VRRP_GROUP {\n    virtual-address $VIP;\n    priority\
              \ $PRIORITY;\n}\n"
        path:
        - {config_type: tag, tag: interfaces, xml_type: tag}
        - config_type: name
          name: {get_param: secondary_device_physical_interface}
          tag: interface
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: vlan}
          tag: unit
          xml_type: named_tag
        - {config_type: tag, tag: family, xml_type: tag}
        - {config_type: tag, tag: inet, xml_type: tag}
        - config_type: named_tag
          name:
            str_replace:
              params:
                $DEVICE_IP: {get_param: secondary_device_gw_ip}
                $NETMASK: {get_param: netmask}
              template: '$DEVICE_IP/$NETMASK

                '
          tag: address
          xml_type: named_tag
      - config:
          str_replace:
            params:
              $APPLY_GROUP: {get_param: secondary_ibgp_config_group}
              $DEVICE_GW_IP: {get_param: secondary_device_gw_ip}
              $NEIGHBOR_GW_IP: {get_param: primary_device_gw_ip}
            template: 'apply-groups $APPLY_GROUP

              local-address $DEVICE_GW_IP;

              neighbor $NEIGHBOR_GW_IP;

              '
        path:
        - {config_type: tag, tag: routing-instances, xml_type: tag}
        - config_type: name
          name: {get_param: vrf_name}
          tag: instance
          xml_type: named_tag
        - {config_type: tag, tag: protocols, xml_type: tag}
        - {config_type: tag, tag: bgp, xml_type: tag}
        - config_type: named_tag
          name: {get_param: bgp_group_name}
          tag: group
          xml_type: named_tag
      device_ip: {get_param: secondary_device_ip}
      lock_timeout: 3000
      password: {get_param: secondary_device_password}
      port: {get_param: secondary_device_port}
      username: {get_param: secondary_device_username}
    type: OS::Contrail::NetconfNamedConfigs
  vrrp_monitor:
    depends_on: netconf_configure_secondary
    properties:
      field_name: status
      properties:
        primary:
          host: {get_param: primary_device_ip}
          interface: {get_param: primary_logical_interface_name}
          login: {get_param: primary_device_username}
          password: {get_param: primary_device_password}
          port: {get_param: primary_device_port}
        secondary:
          host: {get_param: secondary_device_ip}
          interface: {get_param: secondary_logical_interface_name}
          login: {get_param: secondary_device_username}
          password: {get_param: secondary_device_password}
          port: {get_param: secondary_device_port}
        vrid:
        - {get_param: vrrp_group}
      resource_id: {get_param: gohan_id}
      resource_type: gw_interfaces
      syncer_properties:
        etcd:
          hold_options:
            positive_status: {primary: MASTER, secondary: BACKUP}
            time_seconds: 360
          status: {key: status}
      tenant_id: {get_param: tenant_id}
      type: vrrp_pool
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget

[localhost] local: gohan client ese_logical_port list --output-format json
[localhost] local: gohan client ese_logical_port show --output-format json d87b39f3-d117-46b4-ad1d-5b606d651b4f
{
	"ese_logical_port": {
		"common_function_gateway_id": null,
		"connected_resource": "gw_interface",
		"description": "ESE Logical port for Port 4fca361d-fdaf-4b92-81a8-a4cdd767cad4",
		"ese_physical_port_id": "76001683-a8bb-4c68-8c87-7b63ea7bd5cd",
		"gw_interface_id": "d84ce543-bc58-4844-b861-4a6d79fb2e48",
		"id": "d87b39f3-d117-46b4-ad1d-5b606d651b4f",
		"name": "xe-0/0/4.1025",
		"network_id": "73f88c22-ae22-4fb7-86b3-9acb141b8809",
		"operational_state": "UP",
		"orchestration_state": "CREATE_COMPLETE",
		"port_ids": [
			"4fca361d-fdaf-4b92-81a8-a4cdd767cad4"
		],
		"status": "ACTIVE",
		"tags": {},
		"tenant_id": "20511c5aef804417a03bf14ed8aea3b8",
		"type": "L2",
		"vlan_id": 1025
	}
}

################################################
### checking heat-stack (ese_logical_ports) ####
################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/ese_logical_ports/d87b39f3-d117-46b4-ad1d-5b606d651b4f
[localhost] local: heat stack-show ese_logical_port_d87b39f3-d117-46b4-ad1d-5b606d651b4f
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                          |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                             |
| creation_time         | 2018-03-30T01:05:17Z                                                                                                                                                                           |
| description           | Logical port template                                                                                                                                                                          |
| disable_rollback      | True                                                                                                                                                                                           |
| id                    | c914a12c-26e2-4eb8-a05d-ae27908bd96b                                                                                                                                                           |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/20511c5aef804417a03bf14ed8aea3b8/stacks/ese_logical_port_d87b39f3-d117-46b4-ad1d-5b606d651b4f/c914a12c-26e2-4eb8-a05d-ae27908bd96b |
| notification_topics   | []                                                                                                                                                                                             |
| outputs               | [                                                                                                                                                                                              |
|                       |   {                                                                                                                                                                                            |
|                       |     "output_value": "8b3e197f-0e6c-4440-92b7-652d5cdaf733",                                                                                                                                    |
|                       |     "description": "Monitoring Target ID",                                                                                                                                                     |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                                       |
|                       |   },                                                                                                                                                                                           |
|                       |   {                                                                                                                                                                                            |
|                       |     "output_value": "46b0cd68-d0fb-4d72-9def-830164f9e215",                                                                                                                                    |
|                       |     "description": "A unique id for the logical interface",                                                                                                                                    |
|                       |     "output_key": "id"                                                                                                                                                                         |
|                       |   },                                                                                                                                                                                           |
|                       |   {                                                                                                                                                                                            |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/8b3e197f-0e6c-4440-92b7-652d5cdaf733",                                                           |
|                       |     "description": "Monitoring Process Link",                                                                                                                                                  |
|                       |     "output_key": "monitoring_link"                                                                                                                                                            |
|                       |   },                                                                                                                                                                                           |
|                       |   {                                                                                                                                                                                            |
|                       |     "output_value": "xe-0/0/38.0",                                                                                                                                                             |
|                       |     "description": "The name of the logical interface.",                                                                                                                                       |
|                       |     "output_key": "name"                                                                                                                                                                       |
|                       |   }                                                                                                                                                                                            |
|                       | ]                                                                                                                                                                                              |
| parameters            | {                                                                                                                                                                                              |
|                       |   "logical_port_type": "L2",                                                                                                                                                                   |
|                       |   "logical_port_vlan_id": "1025",                                                                                                                                                              |
|                       |   "OS::stack_name": "ese_logical_port_d87b39f3-d117-46b4-ad1d-5b606d651b4f",                                                                                                                   |
|                       |   "virtual_machine_interface_ids": "f68d0924-ef20-4c1b-ac45-0e6b879af5e7",                                                                                                                     |
|                       |   "device_ip": "10.161.0.34",                                                                                                                                                                  |
|                       |   "OS::stack_id": "c914a12c-26e2-4eb8-a05d-ae27908bd96b",                                                                                                                                      |
|                       |   "version": "1",                                                                                                                                                                              |
|                       |   "tenant_id": "20511c5aef804417a03bf14ed8aea3b8",                                                                                                                                             |
|                       |   "logical_port_name": "xe-0/0/4.1025",                                                                                                                                                        |
|                       |   "gohan_id": "d87b39f3-d117-46b4-ad1d-5b606d651b4f",                                                                                                                                          |
|                       |   "physical_port_id": "06bfe521-07f0-4931-9f8c-318c3ad8114e"                                                                                                                                   |
|                       | }                                                                                                                                                                                              |
| parent                | None                                                                                                                                                                                           |
| stack_name            | ese_logical_port_d87b39f3-d117-46b4-ad1d-5b606d651b4f                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                          |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                                |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                            |
| stack_user_project_id | 20511c5aef804417a03bf14ed8aea3b8                                                                                                                                                               |
| template_description  | Logical port template                                                                                                                                                                          |
| timeout_mins          | 6                                                                                                                                                                                              |
| updated_time          | None                                                                                                                                                                                           |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show ese_logical_port_d87b39f3-d117-46b4-ad1d-5b606d651b4f
description: 'Logical port template

  '
heat_template_version: '2013-05-23'
outputs:
  id:
    description: A unique id for the logical interface
    value: {get_resource: logical_interface}
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [interface_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: interface_monitor}
  name:
    description: The name of the logical interface.
    value:
      get_attr: [logical_interface, name]
parameters:
  device_ip: {description: Device IP Address., label: Device IP Address, type: string}
  gohan_id: {description: UUID of the ESE Physical Port, label: Gohan resource ID,
    type: string}
  logical_port_name: {description: Name of the logical port., label: Logical Port
      Name, type: string}
  logical_port_type: {description: Type of the logical port., label: Logical Port
      Type, type: string}
  logical_port_vlan_id: {default: 0, description: VLAN id to use for logical port
      creation., label: VLAN id for Logical Port, type: number}
  physical_port_id: {description: A unique id for the Physical Interface., label: Physical
      Interface ID, type: string}
  tenant_id: {label: Tenant ID, type: string}
  version: {label: Config version, type: number}
  virtual_machine_interface_ids: {description: Virtual Machine Interface ID., label: Virtual
      Machine Interface ID, type: comma_delimited_list}
resources:
  interface_monitor:
    depends_on: logical_interface
    properties:
      field_name: logical_port
      properties:
        community_name: ESE_NODE_COMMUNITY
        device_ip: {get_param: device_ip}
        if_name: {get_param: logical_port_name}
      resource_id: {get_param: gohan_id}
      resource_type: ese_logical_ports
      syncer_properties:
        etcd:
          status: {key: logical_port}
        tsdb:
          traffic.in:
            metric: traffic.bytes
            tags:
            - direction: in
              port_id: 4fca361d-fdaf-4b92-81a8-a4cdd767cad4
              resource_id: {get_param: gohan_id}
          traffic.out:
            metric: traffic.bytes
            tags:
            - direction: out
              port_id: 4fca361d-fdaf-4b92-81a8-a4cdd767cad4
              resource_id: {get_param: gohan_id}
      tenant_id: {get_param: tenant_id}
      type: snmp_ports
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget
  logical_interface:
    properties:
      name: {get_param: logical_port_name}
      physical_interface: {get_param: physical_port_id}
      type: {get_param: logical_port_type}
      virtual_machine_interfaces: {get_param: virtual_machine_interface_ids}
      vlan: {get_param: logical_port_vlan_id}
    type: OS::Contrail::LogicalInterface

[localhost] local: gohan client port show --output-format json 4fca361d-fdaf-4b92-81a8-a4cdd767cad4
{
	"port": {
		"admin_state_up": true,
		"allowed_address_pairs": [],
		"attached": true,
		"binding:vif_type": "vrouter",
		"description": "",
		"device_id": "d84ce543-bc58-4844-b861-4a6d79fb2e48",
		"device_owner": "network:gw_interface",
		"ese_logical_port_id": "d87b39f3-d117-46b4-ad1d-5b606d651b4f",
		"fake_delete": false,
		"fixed_ips": [
			{
				"ip_address": "172.16.101.153",
				"subnet_id": "8fca93d6-5f0b-413d-98e0-74c3d1bacf07"
			}
		],
		"id": "4fca361d-fdaf-4b92-81a8-a4cdd767cad4",
		"mac_address": "fa:16:3e:b1:3d:bf",
		"managed_by_service": true,
		"name": "Port for : 76001683-a8bb-4c68-8c87-7b63ea7bd5cd",
		"network_id": "73f88c22-ae22-4fb7-86b3-9acb141b8809",
		"operational_state": "FAIL",
		"orchestration_state": "UPDATE_COMPLETE",
		"security_groups": [],
		"segmentation_id": 1025,
		"segmentation_type": "vlan",
		"status": "MONITORING_UNAVAILABLE",
		"tags": {},
		"tenant_id": "20511c5aef804417a03bf14ed8aea3b8"
	}
}

########################################################
### checking heat-stack (ports) for UPDATE_COMPLETE ####
########################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/ports/4fca361d-fdaf-4b92-81a8-a4cdd767cad4
[localhost] local: heat stack-show port_4fca361d-fdaf-4b92-81a8-a4cdd767cad4
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                              |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                 |
| creation_time         | 2018-03-30T01:05:11Z                                                                                                                                                               |
| description           | Virtual Machine Interface Template                                                                                                                                                 |
| disable_rollback      | True                                                                                                                                                                               |
| id                    | 2de98634-2232-454c-9142-3a98c55c01e2                                                                                                                                               |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/20511c5aef804417a03bf14ed8aea3b8/stacks/port_4fca361d-fdaf-4b92-81a8-a4cdd767cad4/2de98634-2232-454c-9142-3a98c55c01e2 |
| notification_topics   | []                                                                                                                                                                                 |
| outputs               | [                                                                                                                                                                                  |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": "default-domain:admin:f68d0924-ef20-4c1b-ac45-0e6b879af5e7",                                                                                                   |
|                       |     "description": "Fully Qualified Name of the VMI",                                                                                                                              |
|                       |     "output_key": "fq_name"                                                                                                                                                        |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": {                                                                                                                                                              |
|                       |       "allowed_address_pair": []                                                                                                                                                   |
|                       |     },                                                                                                                                                                             |
|                       |     "description": "Virtual machine allowed address pairs.",                                                                                                                       |
|                       |     "output_key": "allowed_address_pairs"                                                                                                                                          |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": "7d83904d-f8d6-401a-85ee-2c3f3275685d",                                                                                                                        |
|                       |     "description": "Monitoring Target ID",                                                                                                                                         |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                           |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": [                                                                                                                                                              |
|                       |       "fa:16:3e:f7:60:7f"                                                                                                                                                          |
|                       |     ],                                                                                                                                                                             |
|                       |     "description": "Virtual machine interface mac address.",                                                                                                                       |
|                       |     "output_key": "mac_address"                                                                                                                                                    |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": [                                                                                                                                                              |
|                       |       [                                                                                                                                                                            |
|                       |         "default-domain",                                                                                                                                                          |
|                       |         "admin",                                                                                                                                                                   |
|                       |         "b62eefe0-0872-478d-adfe-1a606320f0e7"                                                                                                                                     |
|                       |       ]                                                                                                                                                                            |
|                       |     ],                                                                                                                                                                             |
|                       |     "description": "Virtual network.",                                                                                                                                             |
|                       |     "output_key": "virtual_network"                                                                                                                                                |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": "f68d0924-ef20-4c1b-ac45-0e6b879af5e7",                                                                                                                        |
|                       |     "description": "A unique id for the virtual machine interface.",                                                                                                               |
|                       |     "output_key": "id"                                                                                                                                                             |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/7d83904d-f8d6-401a-85ee-2c3f3275685d",                                               |
|                       |     "description": "Monitoring Process Link",                                                                                                                                      |
|                       |     "output_key": "monitoring_link"                                                                                                                                                |
|                       |   }                                                                                                                                                                                |
|                       | ]                                                                                                                                                                                  |
| parameters            | {                                                                                                                                                                                  |
|                       |   "virtual_machine": "d84ce543-bc58-4844-b861-4a6d79fb2e48",                                                                                                                       |
|                       |   "uuid": "4fca361d-fdaf-4b92-81a8-a4cdd767cad4",                                                                                                                                  |
|                       |   "OS::stack_name": "port_4fca361d-fdaf-4b92-81a8-a4cdd767cad4",                                                                                                                   |
|                       |   "admin_state_up": "True",                                                                                                                                                        |
|                       |   "tenant_id": "20511c5aef804417a03bf14ed8aea3b8",                                                                                                                                 |
|                       |   "virtual_machine_interface_allowed_address_pairs": "null",                                                                                                                       |
|                       |   "virtual_machine_interface_mac_address": "fa:16:3e:b1:3d:bf",                                                                                                                    |
|                       |   "OS::stack_id": "2de98634-2232-454c-9142-3a98c55c01e2",                                                                                                                          |
|                       |   "device_owner": "network:gw_interface",                                                                                                                                          |
|                       |   "version": "2",                                                                                                                                                                  |
|                       |   "virtual_network": "73f88c22-ae22-4fb7-86b3-9acb141b8809",                                                                                                                       |
|                       |   "security_groups": "[]",                                                                                                                                                         |
|                       |   "name": "4fca361d-fdaf-4b92-81a8-a4cdd767cad4"                                                                                                                                   |
|                       | }                                                                                                                                                                                  |
| parent                | None                                                                                                                                                                               |
| stack_name            | port_4fca361d-fdaf-4b92-81a8-a4cdd767cad4                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                              |
| stack_status          | UPDATE_COMPLETE                                                                                                                                                                    |
| stack_status_reason   | Stack successfully updated                                                                                                                                                         |
| stack_user_project_id | 20511c5aef804417a03bf14ed8aea3b8                                                                                                                                                   |
| template_description  | Virtual Machine Interface Template                                                                                                                                                 |
| timeout_mins          | 13                                                                                                                                                                                 |
| updated_time          | 2018-03-30T01:05:22Z                                                                                                                                                               |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show port_4fca361d-fdaf-4b92-81a8-a4cdd767cad4
description: 'Virtual Machine Interface Template

  '
heat_template_version: '2013-05-23'
outputs:
  allowed_address_pairs:
    description: Virtual machine allowed address pairs.
    value:
      get_attr: [virtual_machine_interface, virtual_machine_interface_allowed_address_pairs]
  fq_name:
    description: Fully Qualified Name of the VMI
    value:
      get_attr: [virtual_machine_interface, fq_name]
  id:
    description: A unique id for the virtual machine interface.
    value: {get_resource: virtual_machine_interface}
  mac_address:
    description: Virtual machine interface mac address.
    value:
      get_attr: [virtual_machine_interface, virtual_machine_interface_mac_addresses]
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [vmi_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: vmi_monitor}
  virtual_network:
    description: Virtual network.
    value:
      get_attr: [virtual_machine_interface, virtual_networks]
parameters:
  admin_state_up: {default: true, label: Admin state up, type: boolean}
  device_owner: {default: '', label: Device Owner, type: string}
  name: {description: A unique id for the Physical Interface., label: Physical Interface
      ID, type: string}
  security_groups:
    default: []
    description: The IDs of security groups applied to the port.
    label: Security Groups List
    type: json
  tenant_id: {label: Tenant ID, type: string}
  uuid: {description: A unique id for the Virtual Machine Interface., label: Backend
      Virtual Machine Interface UUID, type: string}
  version: {label: Config version, type: number}
  virtual_machine: {default: '', label: Virtual Machine., type: string}
  virtual_machine_interface_allowed_address_pairs: {label: Virtual machine interface
      allowed address pairs., type: json}
  virtual_machine_interface_mac_address: {default: 'fe:ff:ff:ff:ff:ff', label: Virtual
      machine interface mac address., type: string}
  virtual_network: {label: Virtual Network., type: string}
resources:
  instance_ip_0:
    properties:
      ip_address: 172.16.101.153
      name:
        str_replace:
          params:
            '%ip%': 172.16.101.153
            '%name%': {get_param: name}
            '%zone%': 8fca93d6-5f0b-413d-98e0-74c3d1bacf07
          template: '%name%_%zone%_%ip%'
      network_id: {get_param: virtual_network}
      subnet_id: a93e21d9-d8ad-4ea8-aaf0-7a03a7024f67
      virtual_machine_interfaces:
      - {get_resource: virtual_machine_interface}
    type: OS::Contrail::InstanceIp
  virtual_machine_interface:
    properties:
      admin_state_up: {get_param: admin_state_up}
      device_owner: {get_param: device_owner}
      name: {get_param: name}
      security_groups: {get_param: security_groups}
      uuid: {get_param: uuid}
      virtual_machine: {get_param: virtual_machine}
      virtual_machine_interface_allowed_address_pairs: {get_param: virtual_machine_interface_allowed_address_pairs}
      virtual_machine_interface_mac_addresses:
      - {get_param: virtual_machine_interface_mac_address}
      virtual_networks:
      - {get_param: virtual_network}
    type: OS::Contrail::VirtualMachineInterface
  vmi_monitor:
    depends_on: virtual_machine_interface
    properties:
      field_name: vmi
      properties:
        fq_name:
          get_attr: [virtual_machine_interface, fq_name]
      resource_id: {get_param: uuid}
      resource_type: ports
      syncer_properties:
        etcd:
          status: {key: vmi}
        tsdb:
          traffic.in:
            metric: traffic.contrail_bytes
            tags:
              direction: in
              resource_id: {get_param: uuid}
          traffic.out:
            metric: traffic.contrail_bytes
            tags:
              direction: out
              resource_id: {get_param: uuid}
      tenant_id: {get_param: tenant_id}
      type: virtual_machine_interface
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget

[localhost] local: gohan client ese_logical_port show --output-format json ecf42487-2aef-4e27-931c-8517b1632d49
{
	"ese_logical_port": {
		"common_function_gateway_id": null,
		"connected_resource": "gw_interface",
		"description": "ESE Logical port for Port 7413e81d-f895-4527-ba5d-a86ffb663258",
		"ese_physical_port_id": "7861b62a-55fe-4e98-9bfc-10bf19052d9a",
		"gw_interface_id": "d84ce543-bc58-4844-b861-4a6d79fb2e48",
		"id": "ecf42487-2aef-4e27-931c-8517b1632d49",
		"name": "xe-0/0/3.1025",
		"network_id": "73f88c22-ae22-4fb7-86b3-9acb141b8809",
		"operational_state": "UP",
		"orchestration_state": "CREATE_COMPLETE",
		"port_ids": [
			"7413e81d-f895-4527-ba5d-a86ffb663258"
		],
		"status": "ACTIVE",
		"tags": {},
		"tenant_id": "20511c5aef804417a03bf14ed8aea3b8",
		"type": "L2",
		"vlan_id": 1025
	}
}

################################################
### checking heat-stack (ese_logical_ports) ####
################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/ese_logical_ports/ecf42487-2aef-4e27-931c-8517b1632d49
[localhost] local: heat stack-show ese_logical_port_ecf42487-2aef-4e27-931c-8517b1632d49
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                          |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                             |
| creation_time         | 2018-03-30T01:05:17Z                                                                                                                                                                           |
| description           | Logical port template                                                                                                                                                                          |
| disable_rollback      | True                                                                                                                                                                                           |
| id                    | 746edbe8-fc14-4513-aa03-f2b83004e5b2                                                                                                                                                           |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/20511c5aef804417a03bf14ed8aea3b8/stacks/ese_logical_port_ecf42487-2aef-4e27-931c-8517b1632d49/746edbe8-fc14-4513-aa03-f2b83004e5b2 |
| notification_topics   | []                                                                                                                                                                                             |
| outputs               | [                                                                                                                                                                                              |
|                       |   {                                                                                                                                                                                            |
|                       |     "output_value": "403bcdd8-8542-4d56-92f8-58b0f524aa7b",                                                                                                                                    |
|                       |     "description": "Monitoring Target ID",                                                                                                                                                     |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                                       |
|                       |   },                                                                                                                                                                                           |
|                       |   {                                                                                                                                                                                            |
|                       |     "output_value": "46b0cd68-d0fb-4d72-9def-830164f9e215",                                                                                                                                    |
|                       |     "description": "A unique id for the logical interface",                                                                                                                                    |
|                       |     "output_key": "id"                                                                                                                                                                         |
|                       |   },                                                                                                                                                                                           |
|                       |   {                                                                                                                                                                                            |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/403bcdd8-8542-4d56-92f8-58b0f524aa7b",                                                           |
|                       |     "description": "Monitoring Process Link",                                                                                                                                                  |
|                       |     "output_key": "monitoring_link"                                                                                                                                                            |
|                       |   },                                                                                                                                                                                           |
|                       |   {                                                                                                                                                                                            |
|                       |     "output_value": "xe-0/0/38.0",                                                                                                                                                             |
|                       |     "description": "The name of the logical interface.",                                                                                                                                       |
|                       |     "output_key": "name"                                                                                                                                                                       |
|                       |   }                                                                                                                                                                                            |
|                       | ]                                                                                                                                                                                              |
| parameters            | {                                                                                                                                                                                              |
|                       |   "logical_port_type": "L2",                                                                                                                                                                   |
|                       |   "logical_port_vlan_id": "1025",                                                                                                                                                              |
|                       |   "OS::stack_name": "ese_logical_port_ecf42487-2aef-4e27-931c-8517b1632d49",                                                                                                                   |
|                       |   "virtual_machine_interface_ids": "f68d0924-ef20-4c1b-ac45-0e6b879af5e7",                                                                                                                     |
|                       |   "device_ip": "10.161.0.34",                                                                                                                                                                  |
|                       |   "OS::stack_id": "746edbe8-fc14-4513-aa03-f2b83004e5b2",                                                                                                                                      |
|                       |   "version": "1",                                                                                                                                                                              |
|                       |   "tenant_id": "20511c5aef804417a03bf14ed8aea3b8",                                                                                                                                             |
|                       |   "logical_port_name": "xe-0/0/3.1025",                                                                                                                                                        |
|                       |   "gohan_id": "ecf42487-2aef-4e27-931c-8517b1632d49",                                                                                                                                          |
|                       |   "physical_port_id": "06bfe521-07f0-4931-9f8c-318c3ad8114e"                                                                                                                                   |
|                       | }                                                                                                                                                                                              |
| parent                | None                                                                                                                                                                                           |
| stack_name            | ese_logical_port_ecf42487-2aef-4e27-931c-8517b1632d49                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                          |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                                |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                            |
| stack_user_project_id | 20511c5aef804417a03bf14ed8aea3b8                                                                                                                                                               |
| template_description  | Logical port template                                                                                                                                                                          |
| timeout_mins          | 6                                                                                                                                                                                              |
| updated_time          | None                                                                                                                                                                                           |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show ese_logical_port_ecf42487-2aef-4e27-931c-8517b1632d49
description: 'Logical port template

  '
heat_template_version: '2013-05-23'
outputs:
  id:
    description: A unique id for the logical interface
    value: {get_resource: logical_interface}
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [interface_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: interface_monitor}
  name:
    description: The name of the logical interface.
    value:
      get_attr: [logical_interface, name]
parameters:
  device_ip: {description: Device IP Address., label: Device IP Address, type: string}
  gohan_id: {description: UUID of the ESE Physical Port, label: Gohan resource ID,
    type: string}
  logical_port_name: {description: Name of the logical port., label: Logical Port
      Name, type: string}
  logical_port_type: {description: Type of the logical port., label: Logical Port
      Type, type: string}
  logical_port_vlan_id: {default: 0, description: VLAN id to use for logical port
      creation., label: VLAN id for Logical Port, type: number}
  physical_port_id: {description: A unique id for the Physical Interface., label: Physical
      Interface ID, type: string}
  tenant_id: {label: Tenant ID, type: string}
  version: {label: Config version, type: number}
  virtual_machine_interface_ids: {description: Virtual Machine Interface ID., label: Virtual
      Machine Interface ID, type: comma_delimited_list}
resources:
  interface_monitor:
    depends_on: logical_interface
    properties:
      field_name: logical_port
      properties:
        community_name: ESE_NODE_COMMUNITY
        device_ip: {get_param: device_ip}
        if_name: {get_param: logical_port_name}
      resource_id: {get_param: gohan_id}
      resource_type: ese_logical_ports
      syncer_properties:
        etcd:
          status: {key: logical_port}
        tsdb:
          traffic.in:
            metric: traffic.bytes
            tags:
            - direction: in
              port_id: 7413e81d-f895-4527-ba5d-a86ffb663258
              resource_id: {get_param: gohan_id}
          traffic.out:
            metric: traffic.bytes
            tags:
            - direction: out
              port_id: 7413e81d-f895-4527-ba5d-a86ffb663258
              resource_id: {get_param: gohan_id}
      tenant_id: {get_param: tenant_id}
      type: snmp_ports
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget
  logical_interface:
    properties:
      name: {get_param: logical_port_name}
      physical_interface: {get_param: physical_port_id}
      type: {get_param: logical_port_type}
      virtual_machine_interfaces: {get_param: virtual_machine_interface_ids}
      vlan: {get_param: logical_port_vlan_id}
    type: OS::Contrail::LogicalInterface

[localhost] local: gohan client port show --output-format json 7413e81d-f895-4527-ba5d-a86ffb663258
{
	"port": {
		"admin_state_up": true,
		"allowed_address_pairs": [],
		"attached": true,
		"binding:vif_type": "vrouter",
		"description": "",
		"device_id": "d84ce543-bc58-4844-b861-4a6d79fb2e48",
		"device_owner": "network:gw_interface",
		"ese_logical_port_id": "ecf42487-2aef-4e27-931c-8517b1632d49",
		"fake_delete": false,
		"fixed_ips": [
			{
				"ip_address": "172.16.101.151",
				"subnet_id": "8fca93d6-5f0b-413d-98e0-74c3d1bacf07"
			},
			{
				"ip_address": "172.16.101.152",
				"subnet_id": "8fca93d6-5f0b-413d-98e0-74c3d1bacf07"
			}
		],
		"id": "7413e81d-f895-4527-ba5d-a86ffb663258",
		"mac_address": "fa:16:3e:19:71:4b",
		"managed_by_service": true,
		"name": "Port for : 7861b62a-55fe-4e98-9bfc-10bf19052d9a",
		"network_id": "73f88c22-ae22-4fb7-86b3-9acb141b8809",
		"operational_state": "UP",
		"orchestration_state": "UPDATE_COMPLETE",
		"security_groups": [],
		"segmentation_id": 1025,
		"segmentation_type": "vlan",
		"status": "ACTIVE",
		"tags": {},
		"tenant_id": "20511c5aef804417a03bf14ed8aea3b8"
	}
}

########################################################
### checking heat-stack (ports) for UPDATE_COMPLETE ####
########################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/ports/7413e81d-f895-4527-ba5d-a86ffb663258
[localhost] local: heat stack-show port_7413e81d-f895-4527-ba5d-a86ffb663258
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                              |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                 |
| creation_time         | 2018-03-30T01:05:11Z                                                                                                                                                               |
| description           | Virtual Machine Interface Template                                                                                                                                                 |
| disable_rollback      | True                                                                                                                                                                               |
| id                    | 70eb106f-7ed9-46b7-be70-6e2048a91bc6                                                                                                                                               |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/20511c5aef804417a03bf14ed8aea3b8/stacks/port_7413e81d-f895-4527-ba5d-a86ffb663258/70eb106f-7ed9-46b7-be70-6e2048a91bc6 |
| notification_topics   | []                                                                                                                                                                                 |
| outputs               | [                                                                                                                                                                                  |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": "default-domain:admin:f68d0924-ef20-4c1b-ac45-0e6b879af5e7",                                                                                                   |
|                       |     "description": "Fully Qualified Name of the VMI",                                                                                                                              |
|                       |     "output_key": "fq_name"                                                                                                                                                        |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": {                                                                                                                                                              |
|                       |       "allowed_address_pair": []                                                                                                                                                   |
|                       |     },                                                                                                                                                                             |
|                       |     "description": "Virtual machine allowed address pairs.",                                                                                                                       |
|                       |     "output_key": "allowed_address_pairs"                                                                                                                                          |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": "3eb90fa9-0c66-4bde-bb09-98883e40471f",                                                                                                                        |
|                       |     "description": "Monitoring Target ID",                                                                                                                                         |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                           |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": [                                                                                                                                                              |
|                       |       "fa:16:3e:f7:60:7f"                                                                                                                                                          |
|                       |     ],                                                                                                                                                                             |
|                       |     "description": "Virtual machine interface mac address.",                                                                                                                       |
|                       |     "output_key": "mac_address"                                                                                                                                                    |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": [                                                                                                                                                              |
|                       |       [                                                                                                                                                                            |
|                       |         "default-domain",                                                                                                                                                          |
|                       |         "admin",                                                                                                                                                                   |
|                       |         "b62eefe0-0872-478d-adfe-1a606320f0e7"                                                                                                                                     |
|                       |       ]                                                                                                                                                                            |
|                       |     ],                                                                                                                                                                             |
|                       |     "description": "Virtual network.",                                                                                                                                             |
|                       |     "output_key": "virtual_network"                                                                                                                                                |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": "f68d0924-ef20-4c1b-ac45-0e6b879af5e7",                                                                                                                        |
|                       |     "description": "A unique id for the virtual machine interface.",                                                                                                               |
|                       |     "output_key": "id"                                                                                                                                                             |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/3eb90fa9-0c66-4bde-bb09-98883e40471f",                                               |
|                       |     "description": "Monitoring Process Link",                                                                                                                                      |
|                       |     "output_key": "monitoring_link"                                                                                                                                                |
|                       |   }                                                                                                                                                                                |
|                       | ]                                                                                                                                                                                  |
| parameters            | {                                                                                                                                                                                  |
|                       |   "virtual_machine": "d84ce543-bc58-4844-b861-4a6d79fb2e48",                                                                                                                       |
|                       |   "uuid": "7413e81d-f895-4527-ba5d-a86ffb663258",                                                                                                                                  |
|                       |   "OS::stack_name": "port_7413e81d-f895-4527-ba5d-a86ffb663258",                                                                                                                   |
|                       |   "admin_state_up": "True",                                                                                                                                                        |
|                       |   "tenant_id": "20511c5aef804417a03bf14ed8aea3b8",                                                                                                                                 |
|                       |   "virtual_machine_interface_allowed_address_pairs": "null",                                                                                                                       |
|                       |   "virtual_machine_interface_mac_address": "fa:16:3e:19:71:4b",                                                                                                                    |
|                       |   "OS::stack_id": "70eb106f-7ed9-46b7-be70-6e2048a91bc6",                                                                                                                          |
|                       |   "device_owner": "network:gw_interface",                                                                                                                                          |
|                       |   "version": "2",                                                                                                                                                                  |
|                       |   "virtual_network": "73f88c22-ae22-4fb7-86b3-9acb141b8809",                                                                                                                       |
|                       |   "security_groups": "[]",                                                                                                                                                         |
|                       |   "name": "7413e81d-f895-4527-ba5d-a86ffb663258"                                                                                                                                   |
|                       | }                                                                                                                                                                                  |
| parent                | None                                                                                                                                                                               |
| stack_name            | port_7413e81d-f895-4527-ba5d-a86ffb663258                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                              |
| stack_status          | UPDATE_COMPLETE                                                                                                                                                                    |
| stack_status_reason   | Stack successfully updated                                                                                                                                                         |
| stack_user_project_id | 20511c5aef804417a03bf14ed8aea3b8                                                                                                                                                   |
| template_description  | Virtual Machine Interface Template                                                                                                                                                 |
| timeout_mins          | 13                                                                                                                                                                                 |
| updated_time          | 2018-03-30T01:05:23Z                                                                                                                                                               |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show port_7413e81d-f895-4527-ba5d-a86ffb663258
description: 'Virtual Machine Interface Template

  '
heat_template_version: '2013-05-23'
outputs:
  allowed_address_pairs:
    description: Virtual machine allowed address pairs.
    value:
      get_attr: [virtual_machine_interface, virtual_machine_interface_allowed_address_pairs]
  fq_name:
    description: Fully Qualified Name of the VMI
    value:
      get_attr: [virtual_machine_interface, fq_name]
  id:
    description: A unique id for the virtual machine interface.
    value: {get_resource: virtual_machine_interface}
  mac_address:
    description: Virtual machine interface mac address.
    value:
      get_attr: [virtual_machine_interface, virtual_machine_interface_mac_addresses]
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [vmi_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: vmi_monitor}
  virtual_network:
    description: Virtual network.
    value:
      get_attr: [virtual_machine_interface, virtual_networks]
parameters:
  admin_state_up: {default: true, label: Admin state up, type: boolean}
  device_owner: {default: '', label: Device Owner, type: string}
  name: {description: A unique id for the Physical Interface., label: Physical Interface
      ID, type: string}
  security_groups:
    default: []
    description: The IDs of security groups applied to the port.
    label: Security Groups List
    type: json
  tenant_id: {label: Tenant ID, type: string}
  uuid: {description: A unique id for the Virtual Machine Interface., label: Backend
      Virtual Machine Interface UUID, type: string}
  version: {label: Config version, type: number}
  virtual_machine: {default: '', label: Virtual Machine., type: string}
  virtual_machine_interface_allowed_address_pairs: {label: Virtual machine interface
      allowed address pairs., type: json}
  virtual_machine_interface_mac_address: {default: 'fe:ff:ff:ff:ff:ff', label: Virtual
      machine interface mac address., type: string}
  virtual_network: {label: Virtual Network., type: string}
resources:
  instance_ip_0:
    properties:
      ip_address: 172.16.101.151
      name:
        str_replace:
          params:
            '%ip%': 172.16.101.151
            '%name%': {get_param: name}
            '%zone%': 8fca93d6-5f0b-413d-98e0-74c3d1bacf07
          template: '%name%_%zone%_%ip%'
      network_id: {get_param: virtual_network}
      subnet_id: a93e21d9-d8ad-4ea8-aaf0-7a03a7024f67
      virtual_machine_interfaces:
      - {get_resource: virtual_machine_interface}
    type: OS::Contrail::InstanceIp
  instance_ip_1:
    properties:
      ip_address: 172.16.101.152
      name:
        str_replace:
          params:
            '%ip%': 172.16.101.152
            '%name%': {get_param: name}
            '%zone%': 8fca93d6-5f0b-413d-98e0-74c3d1bacf07
          template: '%name%_%zone%_%ip%'
      network_id: {get_param: virtual_network}
      subnet_id: a93e21d9-d8ad-4ea8-aaf0-7a03a7024f67
      virtual_machine_interfaces:
      - {get_resource: virtual_machine_interface}
    type: OS::Contrail::InstanceIp
  virtual_machine_interface:
    properties:
      admin_state_up: {get_param: admin_state_up}
      device_owner: {get_param: device_owner}
      name: {get_param: name}
      security_groups: {get_param: security_groups}
      uuid: {get_param: uuid}
      virtual_machine: {get_param: virtual_machine}
      virtual_machine_interface_allowed_address_pairs: {get_param: virtual_machine_interface_allowed_address_pairs}
      virtual_machine_interface_mac_addresses:
      - {get_param: virtual_machine_interface_mac_address}
      virtual_networks:
      - {get_param: virtual_network}
    type: OS::Contrail::VirtualMachineInterface
  vmi_monitor:
    depends_on: virtual_machine_interface
    properties:
      field_name: vmi
      properties:
        fq_name:
          get_attr: [virtual_machine_interface, fq_name]
      resource_id: {get_param: uuid}
      resource_type: ports
      syncer_properties:
        etcd:
          status: {key: vmi}
        tsdb:
          traffic.in:
            metric: traffic.contrail_bytes
            tags:
              direction: in
              resource_id: {get_param: uuid}
          traffic.out:
            metric: traffic.contrail_bytes
            tags:
              direction: out
              resource_id: {get_param: uuid}
      tenant_id: {get_param: tenant_id}
      type: virtual_machine_interface
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget

[localhost] local: gohan client resource_mapping list --output-format json
Command not found

[localhost] local: gohan client billing_resource list --output-format json
{
	"billing_resources": [
		{
			"config_version": 1,
			"ended": null,
			"id": "0970a905-6c25-4341-8a12-343f6f07eaf6",
			"info": {
				"cidr": "203.0.112.0",
				"submask_length": 28
			},
			"parent_billing_id": null,
			"resource_id": "6f583980-3f9e-458f-8f68-f42a7adfb211",
			"resource_type": "public_ip",
			"started": 1.522371849e+09,
			"tenant_id": "20511c5aef804417a03bf14ed8aea3b8",
			"unique_resource_id": "6f583980-3f9e-458f-8f68-f42a7adfb211"
		},
		{
			"config_version": 1,
			"ended": null,
			"id": "7c533b6d-b4d2-41f1-b24c-cd0512e08903",
			"info": {},
			"parent_billing_id": null,
			"resource_id": "73f88c22-ae22-4fb7-86b3-9acb141b8809",
			"resource_type": "network",
			"started": 1.522371865e+09,
			"tenant_id": "20511c5aef804417a03bf14ed8aea3b8",
			"unique_resource_id": "73f88c22-ae22-4fb7-86b3-9acb141b8809"
		},
		{
			"config_version": 1,
			"ended": null,
			"id": "dda3ad32-230f-4c9b-809d-e7f637c65f43",
			"info": {
				"bandwidth": "10",
				"qos_type": "guarantee"
			},
			"parent_billing_id": "f43481b0-8f3f-4a5c-ac12-a35fcc3f29ce",
			"resource_id": "e6a65b22-6f74-4c9c-af6a-a393e70c66ac",
			"resource_type": "qos_option",
			"started": 1.522371829e+09,
			"tenant_id": "20511c5aef804417a03bf14ed8aea3b8",
			"unique_resource_id": null
		},
		{
			"config_version": 1,
			"ended": null,
			"id": "f43481b0-8f3f-4a5c-ac12-a35fcc3f29ce",
			"info": {
				"internet_service": "sample-internet-service"
			},
			"parent_billing_id": null,
			"resource_id": "d4e4e75c-8c02-420f-9eda-fa5771c3bad6",
			"resource_type": "internet_gateway",
			"started": 1.522371829e+09,
			"tenant_id": "20511c5aef804417a03bf14ed8aea3b8",
			"unique_resource_id": "d4e4e75c-8c02-420f-9eda-fa5771c3bad6"
		}
	]
}

### Create Static Route ###
name:[sample-static-route], id:[07967b57-33c3-44b9-b1e7-47d85c840011]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
01:06:44.816100  01:06:44.893199  0.077099        POST     201    PENDING_CREATE
01:06:44.893283  01:06:44.930849  0.037566         GET     200    PENDING_CREATE
01:06:45.931988  01:06:45.958588  0.026600         GET     200    PENDING_CREATE
01:06:46.959698  01:06:46.986111  0.026413         GET     200    PENDING_CREATE
01:06:47.987215  01:06:48.014740  0.027525         GET     200    PENDING_CREATE
01:06:49.015859  01:06:49.042466  0.026607         GET     200    PENDING_CREATE
01:06:50.043581  01:06:50.070959  0.027378         GET     200    PENDING_CREATE
01:06:51.071485  01:06:51.100684  0.029199         GET     200    PENDING_CREATE
01:06:52.101783  01:06:52.129089  0.027306         GET     200    PENDING_CREATE
01:06:53.130213  01:06:53.157499  0.027286         GET     200    PENDING_CREATE
01:06:54.158612  01:06:54.189574  0.030962         GET     200    PENDING_CREATE
01:06:55.190698  01:06:55.217356  0.026658         GET     200    PENDING_CREATE
01:06:56.218485  01:06:56.338287  0.119802         GET     200    PENDING_CREATE
01:06:57.339419  01:06:57.366520  0.027101         GET     200    PENDING_CREATE
01:06:58.367635  01:06:58.394276  0.026641         GET     200    PENDING_CREATE
01:06:59.395362  01:06:59.421852  0.026490         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 14.605752

[localhost] local: gohan client static_route show --output-format json 07967b57-33c3-44b9-b1e7-47d85c840011
{
	"static_route": {
		"aws_gw_id": null,
		"azure_gw_id": null,
		"description": "Sample Static-route",
		"destination": "203.0.112.0/28",
		"gcp_gw_id": null,
		"id": "07967b57-33c3-44b9-b1e7-47d85c840011",
		"interdc_gw_id": null,
		"internet_gw_id": "d4e4e75c-8c02-420f-9eda-fa5771c3bad6",
		"name": "sample-static-route",
		"nexthop": "172.16.101.1",
		"orchestration_state": "CREATE_COMPLETE",
		"public_ip_id": "6f583980-3f9e-458f-8f68-f42a7adfb211",
		"service_type": "internet",
		"status": "ACTIVE",
		"tenant_id": "20511c5aef804417a03bf14ed8aea3b8",
		"vpn_gw_id": null
	}
}

############################################
### checking heat-stack (static_routes) ####
############################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/static_routes/07967b57-33c3-44b9-b1e7-47d85c840011
[localhost] local: heat stack-show static_route_07967b57-33c3-44b9-b1e7-47d85c840011
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                      |
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                         |
| creation_time         | 2018-03-30T01:06:45Z                                                                                                                                                                       |
| description           | Internet Gateway Static Route                                                                                                                                                              |
| disable_rollback      | True                                                                                                                                                                                       |
| id                    | 40085e5e-ac45-462d-b007-ddae8bd53448                                                                                                                                                       |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/20511c5aef804417a03bf14ed8aea3b8/stacks/static_route_07967b57-33c3-44b9-b1e7-47d85c840011/40085e5e-ac45-462d-b007-ddae8bd53448 |
| notification_topics   | []                                                                                                                                                                                         |
| outputs               | []                                                                                                                                                                                         |
| parameters            | {                                                                                                                                                                                          |
|                       |   "primary_device_ip": "192.168.100.102",                                                                                                                                                  |
|                       |   "OS::stack_id": "40085e5e-ac45-462d-b007-ddae8bd53448",                                                                                                                                  |
|                       |   "OS::stack_name": "static_route_07967b57-33c3-44b9-b1e7-47d85c840011",                                                                                                                   |
|                       |   "route": "203.0.112.0/28",                                                                                                                                                               |
|                       |   "secondary_device_port": "830",                                                                                                                                                          |
|                       |   "secondary_device_password": "******",                                                                                                                                                   |
|                       |   "primary_device_password": "******",                                                                                                                                                     |
|                       |   "next_hop": "172.16.101.1",                                                                                                                                                              |
|                       |   "vrf_name": "vrf_gw_sample-ha-router-downlink_1025",                                                                                                                                     |
|                       |   "primary_device_username": "esi",                                                                                                                                                        |
|                       |   "primary_device_port": "830",                                                                                                                                                            |
|                       |   "secondary_device_ip": "192.168.100.101",                                                                                                                                                |
|                       |   "secondary_device_username": "esi"                                                                                                                                                       |
|                       | }                                                                                                                                                                                          |
| parent                | None                                                                                                                                                                                       |
| stack_name            | static_route_07967b57-33c3-44b9-b1e7-47d85c840011                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                      |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                            |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                        |
| stack_user_project_id | 20511c5aef804417a03bf14ed8aea3b8                                                                                                                                                           |
| template_description  | Internet Gateway Static Route                                                                                                                                                              |
| timeout_mins          | 60                                                                                                                                                                                         |
| updated_time          | None                                                                                                                                                                                       |
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show static_route_07967b57-33c3-44b9-b1e7-47d85c840011
description: 'Internet Gateway Static Route

  '
heat_template_version: '2013-05-23'
parameters:
  next_hop: {description: Next hop for the static route, label: Next hop, type: string}
  primary_device_ip: {description: Ip address that will be used to establish ssh connection
      to the Primary Device., label: Ip address of the device., type: string}
  primary_device_password: {description: Password of the user which will be used to
      log onto the Primary Device., hidden: true, label: Users password., type: string}
  primary_device_port: {description: Port that will be used to establish ssh connection
      to the Primary Device., label: Port of the ssh connection., type: number}
  primary_device_username: {description: Name of the user which will be used to log
      onto the Primary Device., label: User name to log on to device., type: string}
  route: {description: Static Route definition, label: Route, type: string}
  secondary_device_ip: {description: Ip address that will be used to establish ssh
      connection to the Secondary Device., label: Ip address of the device., type: string}
  secondary_device_password: {description: Password of the user which will be used
      to log onto the Secondary Device., hidden: true, label: Users password., type: string}
  secondary_device_port: {description: Port that will be used to establish ssh connection
      to the Secondary Device., label: Port of the ssh connection., type: number}
  secondary_device_username: {description: Name of the user which will be used to
      log onto the Secondary Device., label: User name to log on to device., type: string}
  vrf_name: {description: Name of VRF to add this static route, label: VRF, type: string}
resources:
  netconf_configure_primary:
    properties:
      configs:
      - config:
          str_replace:
            params:
              $NEXT_HOP: {get_param: next_hop}
            template: 'next-hop $NEXT_HOP;

              '
        path:
        - {config_type: tag, tag: routing-instances, xml_type: tag}
        - config_type: name
          name: {get_param: vrf_name}
          tag: instance
          xml_type: named_tag
        - {config_type: tag, tag: routing-options, xml_type: tag}
        - {config_type: tag, tag: static, xml_type: tag}
        - config_type: named_tag
          name: {get_param: route}
          tag: route
          xml_type: named_tag
      device_ip: {get_param: primary_device_ip}
      lock_timeout: 3000
      password: {get_param: primary_device_password}
      port: {get_param: primary_device_port}
      username: {get_param: primary_device_username}
    type: OS::Contrail::NetconfNamedConfigs
  netconf_configure_secondary:
    depends_on: netconf_configure_primary
    properties:
      configs:
      - config:
          str_replace:
            params:
              $NEXT_HOP: {get_param: next_hop}
            template: 'next-hop $NEXT_HOP;

              '
        path:
        - {config_type: tag, tag: routing-instances, xml_type: tag}
        - config_type: name
          name: {get_param: vrf_name}
          tag: instance
          xml_type: named_tag
        - {config_type: tag, tag: routing-options, xml_type: tag}
        - {config_type: tag, tag: static, xml_type: tag}
        - config_type: named_tag
          name: {get_param: route}
          tag: route
          xml_type: named_tag
      device_ip: {get_param: secondary_device_ip}
      lock_timeout: 3000
      password: {get_param: secondary_device_password}
      port: {get_param: secondary_device_port}
      username: {get_param: secondary_device_username}
    type: OS::Contrail::NetconfNamedConfigs

root@client:/tools/rest-api-for-esi# heat stack-list
+--------------------------------------+------------------------------------------------------------+-----------------+----------------------+
| id                                   | stack_name                                                 | stack_status    | creation_time        |
+--------------------------------------+------------------------------------------------------------+-----------------+----------------------+
| 04d44469-232c-4e75-94fb-5a7824698d0e | ese_device_f5429afc-cf7e-41c4-91ee-36ec403a9695            | CREATE_COMPLETE | 2018-03-30T00:55:47Z |
| f86d2973-36d9-49ac-9c63-65eaa33e0737 | ese_physical_port_7861b62a-55fe-4e98-9bfc-10bf19052d9a     | CREATE_COMPLETE | 2018-03-30T00:56:54Z |
| 86d28504-cbc6-43ad-8c0a-12674d62e474 | ese_physical_port_76001683-a8bb-4c68-8c87-7b63ea7bd5cd     | CREATE_COMPLETE | 2018-03-30T00:57:58Z |
| 1cfc2508-106b-4200-9db0-f8d56d73b1fe | edge_router_2a28fdaa-651b-4558-8825-891b93329123           | CREATE_COMPLETE | 2018-03-30T00:58:58Z |
| 45d8a147-be98-4943-8ecb-c532af993763 | edge_router_43119898-9a76-400c-abdc-8d3ec2113b5d           | CREATE_COMPLETE | 2018-03-30T01:00:00Z |
| 26de7b46-9900-4300-b6dc-a4867249c45e | er_physical_interface_7dd45d1b-1ca1-4735-9a3e-8b7e09125e0d | CREATE_COMPLETE | 2018-03-30T01:01:04Z |
| 808b7588-6628-413d-8e12-f78162dea45a | er_physical_interface_372f28d1-8fb2-4bb1-9b42-cfc30515735a | CREATE_COMPLETE | 2018-03-30T01:02:06Z |
| b319ea8c-7fc6-4fce-a742-17a6414bef65 | internet_gateway_d4e4e75c-8c02-420f-9eda-fa5771c3bad6      | CREATE_COMPLETE | 2018-03-30T01:03:32Z |
| c497b0cf-b3b0-4f96-a748-06d45d9fa123 | public_ip_6f583980-3f9e-458f-8f68-f42a7adfb211             | CREATE_COMPLETE | 2018-03-30T01:04:02Z |
| bea47c8d-0bea-4b8a-a51b-9b4009eb74d6 | network_73f88c22-ae22-4fb7-86b3-9acb141b8809               | CREATE_COMPLETE | 2018-03-30T01:04:22Z |
| b33cd553-17b0-47b0-874c-022e1e458a70 | subnet_8fca93d6-5f0b-413d-98e0-74c3d1bacf07                | CREATE_COMPLETE | 2018-03-30T01:04:38Z |
| a3e0ec47-e33f-4328-8eb0-2c7d40a1fade | gw_interface_d84ce543-bc58-4844-b861-4a6d79fb2e48          | CREATE_COMPLETE | 2018-03-30T01:04:54Z |
| 2de98634-2232-454c-9142-3a98c55c01e2 | port_4fca361d-fdaf-4b92-81a8-a4cdd767cad4                  | UPDATE_COMPLETE | 2018-03-30T01:05:11Z |
| 70eb106f-7ed9-46b7-be70-6e2048a91bc6 | port_7413e81d-f895-4527-ba5d-a86ffb663258                  | UPDATE_COMPLETE | 2018-03-30T01:05:11Z |
| 746edbe8-fc14-4513-aa03-f2b83004e5b2 | ese_logical_port_ecf42487-2aef-4e27-931c-8517b1632d49      | CREATE_COMPLETE | 2018-03-30T01:05:17Z |
| c914a12c-26e2-4eb8-a05d-ae27908bd96b | ese_logical_port_d87b39f3-d117-46b4-ad1d-5b606d651b4f      | CREATE_COMPLETE | 2018-03-30T01:05:17Z |
| 40085e5e-ac45-462d-b007-ddae8bd53448 | static_route_07967b57-33c3-44b9-b1e7-47d85c840011          | CREATE_COMPLETE | 2018-03-30T01:06:45Z |
+--------------------------------------+------------------------------------------------------------+-----------------+----------------------+
root@client:/tools/rest-api-for-esi# neutron port-list
+--------------------------------------+-------------------------------------------------+-------------------+---------------------------------------------------------------------------------------+
| id                                   | name                                            | mac_address       | fixed_ips                                                                             |
+--------------------------------------+-------------------------------------------------+-------------------+---------------------------------------------------------------------------------------+
| 33bbb900-1405-44e8-8b2e-3482e0b43a36 | dhcp-server-port                                | 00:00:5e:00:01:00 | {"subnet_id": "8fca93d6-5f0b-413d-98e0-74c3d1bacf07", "ip_address": "172.16.101.2"}   |
| 4fca361d-fdaf-4b92-81a8-a4cdd767cad4 | Port for : 76001683-a8bb-4c68-8c87-7b63ea7bd5cd | fa:16:3e:b1:3d:bf | {"subnet_id": "8fca93d6-5f0b-413d-98e0-74c3d1bacf07", "ip_address": "172.16.101.153"} |
| 7413e81d-f895-4527-ba5d-a86ffb663258 | Port for : 7861b62a-55fe-4e98-9bfc-10bf19052d9a | fa:16:3e:19:71:4b | {"subnet_id": "8fca93d6-5f0b-413d-98e0-74c3d1bacf07", "ip_address": "172.16.101.151"} |
|                                      |                                                 |                   | {"subnet_id": "8fca93d6-5f0b-413d-98e0-74c3d1bacf07", "ip_address": "172.16.101.152"} |
+--------------------------------------+-------------------------------------------------+-------------------+---------------------------------------------------------------------------------------+
root@client:/tools/rest-api-for-esi# neutron port-show 33bbb900-1405-44e8-8b2e-3482e0b43a36
+-----------------------+-------------------------------------------------------------------------------------+
| Field                 | Value                                                                               |
+-----------------------+-------------------------------------------------------------------------------------+
| admin_state_up        | True                                                                                |
| allowed_address_pairs |                                                                                     |
| attached              | False                                                                               |
| binding:vif_type      | vrouter                                                                             |
| description           | DHCP Server Port                                                                    |
| device_id             | 8fca93d6-5f0b-413d-98e0-74c3d1bacf07                                                |
| device_owner          | network:dhcp                                                                        |
| ese_logical_port_id   |                                                                                     |
| fake_delete           | False                                                                               |
| fixed_ips             | {"subnet_id": "8fca93d6-5f0b-413d-98e0-74c3d1bacf07", "ip_address": "172.16.101.2"} |
| id                    | 33bbb900-1405-44e8-8b2e-3482e0b43a36                                                |
| mac_address           | 00:00:5e:00:01:00                                                                   |
| managed_by_service    | False                                                                               |
| name                  | dhcp-server-port                                                                    |
| network_id            | 73f88c22-ae22-4fb7-86b3-9acb141b8809                                                |
| operational_state     |                                                                                     |
| orchestration_state   | SYNC_COMPLETE                                                                       |
| security_groups       |                                                                                     |
| segmentation_id       |                                                                                     |
| segmentation_type     |                                                                                     |
| status                | ACTIVE                                                                              |
| tags                  | {}                                                                                  |
| tenant_id             | 20511c5aef804417a03bf14ed8aea3b8                                                    |
+-----------------------+-------------------------------------------------------------------------------------+
root@client:/tools/rest-api-for-esi# neutron port-show 4fca361d-fdaf-4b92-81a8-a4cdd767cad4
+-----------------------+---------------------------------------------------------------------------------------+
| Field                 | Value                                                                                 |
+-----------------------+---------------------------------------------------------------------------------------+
| admin_state_up        | True                                                                                  |
| allowed_address_pairs |                                                                                       |
| attached              | True                                                                                  |
| binding:vif_type      | vrouter                                                                               |
| description           |                                                                                       |
| device_id             | d84ce543-bc58-4844-b861-4a6d79fb2e48                                                  |
| device_owner          | network:gw_interface                                                                  |
| ese_logical_port_id   | d87b39f3-d117-46b4-ad1d-5b606d651b4f                                                  |
| fake_delete           | False                                                                                 |
| fixed_ips             | {"subnet_id": "8fca93d6-5f0b-413d-98e0-74c3d1bacf07", "ip_address": "172.16.101.153"} |
| id                    | 4fca361d-fdaf-4b92-81a8-a4cdd767cad4                                                  |
| mac_address           | fa:16:3e:b1:3d:bf                                                                     |
| managed_by_service    | True                                                                                  |
| name                  | Port for : 76001683-a8bb-4c68-8c87-7b63ea7bd5cd                                       |
| network_id            | 73f88c22-ae22-4fb7-86b3-9acb141b8809                                                  |
| operational_state     | UP                                                                                    |
| orchestration_state   | UPDATE_COMPLETE                                                                       |
| security_groups       |                                                                                       |
| segmentation_id       | 1025                                                                                  |
| segmentation_type     | vlan                                                                                  |
| status                | ACTIVE                                                                                |
| tags                  | {}                                                                                    |
| tenant_id             | 20511c5aef804417a03bf14ed8aea3b8                                                      |
+-----------------------+---------------------------------------------------------------------------------------+
root@client:/tools/rest-api-for-esi# neutron port-show 7413e81d-f895-4527-ba5d-a86ffb663258
+-----------------------+---------------------------------------------------------------------------------------+
| Field                 | Value                                                                                 |
+-----------------------+---------------------------------------------------------------------------------------+
| admin_state_up        | True                                                                                  |
| allowed_address_pairs |                                                                                       |
| attached              | True                                                                                  |
| binding:vif_type      | vrouter                                                                               |
| description           |                                                                                       |
| device_id             | d84ce543-bc58-4844-b861-4a6d79fb2e48                                                  |
| device_owner          | network:gw_interface                                                                  |
| ese_logical_port_id   | ecf42487-2aef-4e27-931c-8517b1632d49                                                  |
| fake_delete           | False                                                                                 |
| fixed_ips             | {"subnet_id": "8fca93d6-5f0b-413d-98e0-74c3d1bacf07", "ip_address": "172.16.101.151"} |
|                       | {"subnet_id": "8fca93d6-5f0b-413d-98e0-74c3d1bacf07", "ip_address": "172.16.101.152"} |
| id                    | 7413e81d-f895-4527-ba5d-a86ffb663258                                                  |
| mac_address           | fa:16:3e:19:71:4b                                                                     |
| managed_by_service    | True                                                                                  |
| name                  | Port for : 7861b62a-55fe-4e98-9bfc-10bf19052d9a                                       |
| network_id            | 73f88c22-ae22-4fb7-86b3-9acb141b8809                                                  |
| operational_state     | FAIL                                                                                  |
| orchestration_state   | UPDATE_COMPLETE                                                                       |
| security_groups       |                                                                                       |
| segmentation_id       | 1025                                                                                  |
| segmentation_type     | vlan                                                                                  |
| status                | MONITORING_UNAVAILABLE                                                                |
| tags                  | {}                                                                                    |
| tenant_id             | 20511c5aef804417a03bf14ed8aea3b8                                                      |
+-----------------------+---------------------------------------------------------------------------------------+
