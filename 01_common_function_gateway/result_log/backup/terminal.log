root@client:/tools/rest-api-for-esi# python gohan-api-common-function-gateways.py 
### Create Ese Device ###
name:[QFX-NW02], id:[cc214b6a-2f09-4094-b7cd-a9590f64b854]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
04:41:19.615414  04:41:19.982459  0.367045        POST     201    PENDING_CREATE
04:41:19.982743  04:41:20.160777  0.178034         GET     200    PENDING_CREATE
04:41:21.162180  04:41:21.239628  0.077448         GET     200    PENDING_CREATE
04:41:22.240503  04:41:22.322414  0.081911         GET     200    PENDING_CREATE
04:41:23.323797  04:41:23.405678  0.081881         GET     200    PENDING_CREATE
04:41:24.406142  04:41:24.517681  0.111539         GET     200    PENDING_CREATE
04:41:25.519098  04:41:25.638436  0.119338         GET     200    PENDING_CREATE
04:41:26.639672  04:41:26.732367  0.092695         GET     200    PENDING_CREATE
04:41:27.733672  04:41:27.822616  0.088944         GET     200    PENDING_CREATE
04:41:28.822988  04:41:28.912236  0.089248         GET     200    PENDING_CREATE
04:41:29.912497  04:41:30.004911  0.092414         GET     200    PENDING_CREATE
04:41:31.006618  04:41:31.096644  0.090026         GET     200    PENDING_CREATE
04:41:32.097888  04:41:32.191275  0.093387         GET     200    PENDING_CREATE
04:41:33.192499  04:41:33.295389  0.102890         GET     200    PENDING_CREATE
04:41:34.296511  04:41:34.380928  0.084417         GET     200    PENDING_CREATE
04:41:35.381332  04:41:35.455496  0.074164         GET     200    PENDING_CREATE
04:41:36.456534  04:41:36.533258  0.076724         GET     200    PENDING_CREATE
04:41:37.533739  04:41:37.616086  0.082347         GET     200    PENDING_CREATE
04:41:38.617361  04:41:38.694541  0.077180         GET     200    PENDING_CREATE
04:41:39.695810  04:41:39.775935  0.080125         GET     200    PENDING_CREATE
04:41:40.777258  04:41:40.851196  0.073938         GET     200    PENDING_CREATE
04:41:41.852502  04:41:41.936383  0.083881         GET     200    PENDING_CREATE
04:41:42.937748  04:41:43.027937  0.090189         GET     200    PENDING_CREATE
04:41:44.029237  04:41:44.108137  0.078900         GET     200    PENDING_CREATE
04:41:45.109372  04:41:45.186011  0.076639         GET     200    PENDING_CREATE
04:41:46.186461  04:41:46.264238  0.077777         GET     200    PENDING_CREATE
04:41:47.264536  04:41:47.495855  0.231319         GET     200    PENDING_CREATE
04:41:48.497166  04:41:48.564788  0.067622         GET     200    PENDING_CREATE
04:41:49.565548  04:41:49.638519  0.072971         GET     200    PENDING_CREATE
04:41:50.639395  04:41:50.716162  0.076767         GET     200    PENDING_CREATE
04:41:51.717272  04:41:51.798865  0.081593         GET     200    PENDING_CREATE
04:41:52.800758  04:41:52.882718  0.081960         GET     200    PENDING_CREATE
04:41:53.883827  04:41:53.967350  0.083523         GET     200    PENDING_CREATE
04:41:54.968509  04:41:55.055115  0.086606         GET     200    PENDING_CREATE
04:41:56.056382  04:41:56.123177  0.066795         GET     200    PENDING_CREATE
04:41:57.124473  04:41:57.192684  0.068211         GET     200    PENDING_CREATE
04:41:58.193916  04:41:58.259832  0.065916         GET     200    PENDING_CREATE
04:41:59.260814  04:41:59.326375  0.065561         GET     200    PENDING_CREATE
04:42:00.327640  04:42:00.396131  0.068491         GET     200    PENDING_CREATE
04:42:01.397397  04:42:01.466939  0.069542         GET     200    PENDING_CREATE
04:42:02.468229  04:42:02.550761  0.082532         GET     200    PENDING_CREATE
04:42:03.552051  04:42:03.619138  0.067087         GET     200    PENDING_CREATE
04:42:04.620400  04:42:04.689875  0.069475         GET     200    PENDING_CREATE
04:42:05.691177  04:42:05.759131  0.067954         GET     200    PENDING_CREATE
04:42:06.760471  04:42:06.832670  0.072199         GET     200    PENDING_CREATE
04:42:07.833136  04:42:07.902572  0.069436         GET     200    PENDING_CREATE
04:42:08.903715  04:42:08.972945  0.069230         GET     200    PENDING_CREATE
04:42:09.974412  04:42:10.043760  0.069348         GET     200    PENDING_CREATE
04:42:11.044530  04:42:11.114515  0.069985         GET     200    PENDING_CREATE
04:42:12.115786  04:42:12.181505  0.065719         GET     200    PENDING_CREATE
04:42:13.182762  04:42:13.249487  0.066725         GET     200    PENDING_CREATE
04:42:14.250194  04:42:14.321941  0.071747         GET     200    PENDING_CREATE
04:42:15.323166  04:42:15.419108  0.095942         GET     200    PENDING_CREATE
04:42:16.420391  04:42:16.489658  0.069267         GET     200    PENDING_CREATE
04:42:17.491595  04:42:17.562656  0.071061         GET     200    PENDING_CREATE
04:42:18.563633  04:42:18.646134  0.082501         GET     200    PENDING_CREATE
04:42:19.647426  04:42:19.722640  0.075214         GET     200    PENDING_CREATE
04:42:20.724001  04:42:20.790695  0.066694         GET     200    PENDING_CREATE
04:42:21.791958  04:42:21.858770  0.066812         GET     200    PENDING_CREATE
04:42:22.860115  04:42:22.926173  0.066058         GET     200    PENDING_CREATE
04:42:23.927525  04:42:23.999674  0.072149         GET     200    PENDING_CREATE
04:42:25.001090  04:42:25.081889  0.080799         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 65.466475

[localhost] local: gohan client ese_device show --output-format json cc214b6a-2f09-4094-b7cd-a9590f64b854
{
    "ese_device": {
        "description": "",
        "existing": "existing",
        "flavor": null,
        "hostname": "QFX-NW02",
        "id": "cc214b6a-2f09-4094-b7cd-a9590f64b854",
        "location": null,
        "management_ip_address": "10.161.0.34",
        "name": "QFX-NW02",
        "operational_state": "UP",
        "orchestration_state": "CREATE_COMPLETE",
        "password": "password",
        "public_ip_address": "10.161.0.34",
        "status": "ACTIVE",
        "tags": {},
        "tenant_id": "c583ce78843344adbe5fd20f13620274",
        "tor_agent_names": null,
        "tsn_names": null,
        "type": "tor",
        "username": "esi"
    }
}

##########################################
### checking heat-stack (ese_devices) ####
##########################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/ese_devices/cc214b6a-2f09-4094-b7cd-a9590f64b854
[localhost] local: heat stack-show ese_device_cc214b6a-2f09-4094-b7cd-a9590f64b854
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                    |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                       |
| creation_time         | 2018-04-09T04:41:21Z                                                                                                                                                                     |
| description           | ESE Device (existing) template                                                                                                                                                           |
| disable_rollback      | True                                                                                                                                                                                     |
| id                    | 83145b8c-af3d-400a-a3fe-922116bd9f01                                                                                                                                                     |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/c583ce78843344adbe5fd20f13620274/stacks/ese_device_cc214b6a-2f09-4094-b7cd-a9590f64b854/83145b8c-af3d-400a-a3fe-922116bd9f01 |
| notification_topics   | []                                                                                                                                                                                       |
| outputs               | [                                                                                                                                                                                        |
|                       |   {                                                                                                                                                                                      |
|                       |     "output_value": "2762cfcb-575c-45cc-a07b-ca19f5b007cd",                                                                                                                              |
|                       |     "description": "Monitoring Target ID",                                                                                                                                               |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                                 |
|                       |   },                                                                                                                                                                                     |
|                       |   {                                                                                                                                                                                      |
|                       |     "output_value": [                                                                                                                                                                    |
|                       |       "default-global-system-config",                                                                                                                                                    |
|                       |       "NWSDP-JNPR-02"                                                                                                                                                                    |
|                       |     ],                                                                                                                                                                                   |
|                       |     "description": "The FQ name of the physical router.",                                                                                                                                |
|                       |     "output_key": "fq_name"                                                                                                                                                              |
|                       |   },                                                                                                                                                                                     |
|                       |   {                                                                                                                                                                                      |
|                       |     "output_value": "7e5c78fa-71c0-427e-947f-586b1fc3c470",                                                                                                                              |
|                       |     "description": "A unique id for the physical router.",                                                                                                                               |
|                       |     "output_key": "id"                                                                                                                                                                   |
|                       |   },                                                                                                                                                                                     |
|                       |   {                                                                                                                                                                                      |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/2762cfcb-575c-45cc-a07b-ca19f5b007cd",                                                     |
|                       |     "description": "Monitoring Process Link",                                                                                                                                            |
|                       |     "output_key": "monitoring_link"                                                                                                                                                      |
|                       |   },                                                                                                                                                                                     |
|                       |   {                                                                                                                                                                                      |
|                       |     "output_value": "NWSDP-JNPR-02",                                                                                                                                                     |
|                       |     "description": "The name of the physical router.",                                                                                                                                   |
|                       |     "output_key": "name"                                                                                                                                                                 |
|                       |   }                                                                                                                                                                                      |
|                       | ]                                                                                                                                                                                        |
| parameters            | {                                                                                                                                                                                        |
|                       |   "device_ip": "10.161.0.34",                                                                                                                                                            |
|                       |   "OS::stack_id": "83145b8c-af3d-400a-a3fe-922116bd9f01",                                                                                                                                |
|                       |   "OS::stack_name": "ese_device_cc214b6a-2f09-4094-b7cd-a9590f64b854",                                                                                                                   |
|                       |   "tenant_id": "c583ce78843344adbe5fd20f13620274",                                                                                                                                       |
|                       |   "hostname": "QFX-NW02",                                                                                                                                                                |
|                       |   "version": "1",                                                                                                                                                                        |
|                       |   "gohan_id": "cc214b6a-2f09-4094-b7cd-a9590f64b854",                                                                                                                                    |
|                       |   "name": "QFX-NW02"                                                                                                                                                                     |
|                       | }                                                                                                                                                                                        |
| parent                | None                                                                                                                                                                                     |
| stack_name            | ese_device_cc214b6a-2f09-4094-b7cd-a9590f64b854                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                    |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                          |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                      |
| stack_user_project_id | c583ce78843344adbe5fd20f13620274                                                                                                                                                         |
| template_description  | ESE Device (existing) template                                                                                                                                                           |
| timeout_mins          | 6                                                                                                                                                                                        |
| updated_time          | None                                                                                                                                                                                     |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show ese_device_cc214b6a-2f09-4094-b7cd-a9590f64b854
description: 'ESE Device (existing) template

  '
heat_template_version: '2013-05-23'
outputs:
  fq_name:
    description: The FQ name of the physical router.
    value:
      get_attr: [physical_router, fq_name]
  id:
    description: A unique id for the physical router.
    value: {get_resource: physical_router}
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [device_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: device_monitor}
  name:
    description: The name of the physical router.
    value:
      get_attr: [physical_router, name]
parameters:
  device_ip: {description: Device IP Address., label: Device IP Address, type: string}
  gohan_id: {description: UUID of the ESE Device, label: Gohan resource ID, type: string}
  hostname: {description: Name of host (vrouter) to create router on, label: Hostname,
    type: string}
  name: {description: Name of the physical router that will be created., label: Physical
      Router Name, type: string}
  tenant_id: {label: Tenant ID, type: string}
  version: {label: Config version, type: number}
resources:
  device_monitor:
    depends_on: physical_router
    properties:
      field_name: switch
      properties:
        community_name: ESE_NODE_COMMUNITY
        device_ip: {get_param: device_ip}
      resource_id: {get_param: gohan_id}
      resource_type: ese_devices
      syncer_properties:
        etcd:
          status: {key: switch}
      tenant_id: {get_param: tenant_id}
      type: snmp_device
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget
  physical_router:
    properties:
      fq_name:
      - default-global-system-config
      - {get_param: hostname}
      resource_type: physical_router
    type: OS::Contrail::ExistingResource

### Create Ese Physical Port ###
name:[xe-0/0/3], id:[9451c9ca-289d-42ba-846d-359c448e910c]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
04:42:28.375924  04:42:28.564823  0.188899        POST     201    PENDING_CREATE
04:42:28.565630  04:42:28.643351  0.077721         GET     200    PENDING_CREATE
04:42:29.643597  04:42:29.711446  0.067849         GET     200    PENDING_CREATE
04:42:30.712512  04:42:30.795885  0.083373         GET     200    PENDING_CREATE
04:42:31.797124  04:42:31.872376  0.075252         GET     200    PENDING_CREATE
04:42:32.873728  04:42:32.942972  0.069244         GET     200    PENDING_CREATE
04:42:33.944263  04:42:34.011640  0.067377         GET     200    PENDING_CREATE
04:42:35.012753  04:42:35.080908  0.068155         GET     200    PENDING_CREATE
04:42:36.082199  04:42:36.147856  0.065657         GET     200    PENDING_CREATE
04:42:37.149142  04:42:37.217728  0.068586         GET     200    PENDING_CREATE
04:42:38.219000  04:42:38.306420  0.087420         GET     200    PENDING_CREATE
04:42:39.307156  04:42:39.372680  0.065524         GET     200    PENDING_CREATE
04:42:40.373967  04:42:40.441062  0.067095         GET     200    PENDING_CREATE
04:42:41.442442  04:42:41.512270  0.069828         GET     200    PENDING_CREATE
04:42:42.513025  04:42:42.584659  0.071634         GET     200    PENDING_CREATE
04:42:43.585930  04:42:43.660897  0.074967         GET     200    PENDING_CREATE
04:42:44.662175  04:42:44.732350  0.070175         GET     200    PENDING_CREATE
04:42:45.733687  04:42:45.799742  0.066055         GET     200    PENDING_CREATE
04:42:46.801018  04:42:46.870693  0.069675         GET     200    PENDING_CREATE
04:42:47.871969  04:42:47.938616  0.066647         GET     200    PENDING_CREATE
04:42:48.939904  04:42:49.017902  0.077998         GET     200    PENDING_CREATE
04:42:50.019311  04:42:50.104874  0.085563         GET     200    PENDING_CREATE
04:42:51.105847  04:42:51.177233  0.071386         GET     200    PENDING_CREATE
04:42:52.178493  04:42:52.247335  0.068842         GET     200    PENDING_CREATE
04:42:53.248534  04:42:53.318473  0.069939         GET     200    PENDING_CREATE
04:42:54.319756  04:42:54.386376  0.066620         GET     200    PENDING_CREATE
04:42:55.387680  04:42:55.455957  0.068277         GET     200    PENDING_CREATE
04:42:56.457202  04:42:56.526060  0.068858         GET     200    PENDING_CREATE
04:42:57.527344  04:42:57.596222  0.068878         GET     200    PENDING_CREATE
04:42:58.597541  04:42:58.664945  0.067404         GET     200    PENDING_CREATE
04:42:59.665473  04:42:59.733550  0.068077         GET     200    PENDING_CREATE
04:43:00.734804  04:43:00.802010  0.067206         GET     200    PENDING_CREATE
04:43:01.803384  04:43:01.872391  0.069007         GET     200    PENDING_CREATE
04:43:02.873803  04:43:03.185823  0.312020         GET     200    PENDING_CREATE
04:43:04.187178  04:43:04.253682  0.066504         GET     200    PENDING_CREATE
04:43:05.254964  04:43:05.323805  0.068841         GET     200    PENDING_CREATE
04:43:06.325088  04:43:06.401528  0.076440         GET     200    PENDING_CREATE
04:43:07.402792  04:43:07.472058  0.069266         GET     200    PENDING_CREATE
04:43:08.473194  04:43:08.539998  0.066804         GET     200    PENDING_CREATE
04:43:09.541272  04:43:09.611425  0.070153         GET     200    PENDING_CREATE
04:43:10.612311  04:43:10.682798  0.070487         GET     200    PENDING_CREATE
04:43:11.684078  04:43:11.766722  0.082644         GET     200    PENDING_CREATE
04:43:12.768008  04:43:12.855801  0.087793         GET     200    PENDING_CREATE
04:43:13.857088  04:43:13.928140  0.071052         GET     200    PENDING_CREATE
04:43:14.928570  04:43:15.005592  0.077022         GET     200    PENDING_CREATE
04:43:16.006668  04:43:16.077467  0.070799         GET     200    PENDING_CREATE
04:43:17.078763  04:43:17.147602  0.068839         GET     200    PENDING_CREATE
04:43:18.148522  04:43:18.226856  0.078334         GET     200    PENDING_CREATE
04:43:19.228267  04:43:19.310601  0.082334         GET     200    PENDING_CREATE
04:43:20.312043  04:43:20.378853  0.066810         GET     200    PENDING_CREATE
04:43:21.380157  04:43:21.452679  0.072522         GET     200    PENDING_CREATE
04:43:22.453969  04:43:22.524639  0.070670         GET     200    PENDING_CREATE
04:43:23.525107  04:43:23.593027  0.067920         GET     200    PENDING_CREATE
04:43:24.594302  04:43:24.665806  0.071504         GET     200    PENDING_CREATE
04:43:25.667080  04:43:25.736959  0.069879         GET     200    PENDING_CREATE
04:43:26.737745  04:43:26.805757  0.068012         GET     200    PENDING_CREATE
04:43:27.807034  04:43:27.874219  0.067185         GET     200    PENDING_CREATE
04:43:28.875478  04:43:28.940768  0.065290         GET     200    PENDING_CREATE
04:43:29.942042  04:43:30.014935  0.072893         GET     200    PENDING_CREATE
04:43:31.016198  04:43:31.080683  0.064485         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 62.704759

[localhost] local: gohan client ese_physical_port show --output-format json 9451c9ca-289d-42ba-846d-359c448e910c
{
    "ese_physical_port": {
        "connected_port_id": "",
        "connected_port_owner": "mx_downlink",
        "description": "",
        "ese_device_id": "cc214b6a-2f09-4094-b7cd-a9590f64b854",
        "existing": "new",
        "id": "9451c9ca-289d-42ba-846d-359c448e910c",
        "name": "xe-0/0/3",
        "operational_state": "UP",
        "orchestration_state": "CREATE_COMPLETE",
        "status": "ACTIVE",
        "tags": {},
        "tenant_id": "c583ce78843344adbe5fd20f13620274"
    }
}

#################################################
### checking heat-stack (ese_physical_ports) ####
#################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/ese_physical_ports/9451c9ca-289d-42ba-846d-359c448e910c
[localhost] local: heat stack-show ese_physical_port_9451c9ca-289d-42ba-846d-359c448e910c
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                           |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                              |
| creation_time         | 2018-04-09T04:42:29Z                                                                                                                                                                            |
| description           | Physical port template                                                                                                                                                                          |
| disable_rollback      | True                                                                                                                                                                                            |
| id                    | 90f0d5d9-e55d-4f3f-9fcf-f94d5aceadbe                                                                                                                                                            |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/c583ce78843344adbe5fd20f13620274/stacks/ese_physical_port_9451c9ca-289d-42ba-846d-359c448e910c/90f0d5d9-e55d-4f3f-9fcf-f94d5aceadbe |
| notification_topics   | []                                                                                                                                                                                              |
| outputs               | [                                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                             |
|                       |     "output_value": "78d717f0-66d9-4f82-afe6-833c5e8f38f5",                                                                                                                                     |
|                       |     "description": "Monitoring Target ID",                                                                                                                                                      |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                                        |
|                       |   },                                                                                                                                                                                            |
|                       |   {                                                                                                                                                                                             |
|                       |     "output_value": "06bfe521-07f0-4931-9f8c-318c3ad8114e",                                                                                                                                     |
|                       |     "description": "A unique id for the physical interface",                                                                                                                                    |
|                       |     "output_key": "id"                                                                                                                                                                          |
|                       |   },                                                                                                                                                                                            |
|                       |   {                                                                                                                                                                                             |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/78d717f0-66d9-4f82-afe6-833c5e8f38f5",                                                            |
|                       |     "description": "Monitoring Process Link",                                                                                                                                                   |
|                       |     "output_key": "monitoring_link"                                                                                                                                                             |
|                       |   },                                                                                                                                                                                            |
|                       |   {                                                                                                                                                                                             |
|                       |     "output_value": "xe-0/0/38",                                                                                                                                                                |
|                       |     "description": "The name of the physical interface.",                                                                                                                                       |
|                       |     "output_key": "name"                                                                                                                                                                        |
|                       |   }                                                                                                                                                                                             |
|                       | ]                                                                                                                                                                                               |
| parameters            | {                                                                                                                                                                                               |
|                       |   "physical_port_name": "xe-0/0/3",                                                                                                                                                             |
|                       |   "OS::stack_id": "90f0d5d9-e55d-4f3f-9fcf-f94d5aceadbe",                                                                                                                                       |
|                       |   "OS::stack_name": "ese_physical_port_9451c9ca-289d-42ba-846d-359c448e910c",                                                                                                                   |
|                       |   "tenant_id": "c583ce78843344adbe5fd20f13620274",                                                                                                                                              |
|                       |   "device_ip": "10.161.0.34",                                                                                                                                                                   |
|                       |   "physical_device": "7e5c78fa-71c0-427e-947f-586b1fc3c470",                                                                                                                                    |
|                       |   "version": "1",                                                                                                                                                                               |
|                       |   "gohan_id": "9451c9ca-289d-42ba-846d-359c448e910c"                                                                                                                                            |
|                       | }                                                                                                                                                                                               |
| parent                | None                                                                                                                                                                                            |
| stack_name            | ese_physical_port_9451c9ca-289d-42ba-846d-359c448e910c                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                           |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                                 |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                             |
| stack_user_project_id | c583ce78843344adbe5fd20f13620274                                                                                                                                                                |
| template_description  | Physical port template                                                                                                                                                                          |
| timeout_mins          | 6                                                                                                                                                                                               |
| updated_time          | None                                                                                                                                                                                            |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show ese_physical_port_9451c9ca-289d-42ba-846d-359c448e910c
description: 'Physical port template

  '
heat_template_version: '2013-05-23'
outputs:
  id:
    description: A unique id for the physical interface
    value: {get_resource: physical_interface}
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [interface_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: interface_monitor}
  name:
    description: The name of the physical interface.
    value:
      get_attr: [physical_interface, name]
parameters:
  device_ip: {description: Device IP Address., label: Device IP Address, type: string}
  gohan_id: {description: UUID of the ESE Physical Port, label: Gohan resource ID,
    type: string}
  physical_device: {description: Id of the physical device on which physical port
      will be created., label: Physical Device Id, type: string}
  physical_port_name: {description: Name of the physical port., label: Physical Interface
      Name, type: string}
  tenant_id: {label: Tenant ID, type: string}
  version: {label: Config version, type: number}
resources:
  interface_monitor:
    depends_on: physical_interface
    properties:
      field_name: port
      properties:
        community_name: ESE_NODE_COMMUNITY
        device_ip: {get_param: device_ip}
        if_name: {get_param: physical_port_name}
      resource_id: {get_param: gohan_id}
      resource_type: ese_physical_ports
      syncer_properties:
        etcd:
          status: {key: port}
      tenant_id: {get_param: tenant_id}
      type: snmp_ports_status
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget
  physical_interface:
    properties:
      name: {get_param: physical_port_name}
      physical_router: {get_param: physical_device}
    type: OS::Contrail::PhysicalInterface

### Create Ese Physical Port ###
name:[xe-0/0/4], id:[f4c3a1bf-3b61-48ba-a548-422036849465]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
04:43:33.976785  04:43:34.122651  0.145866        POST     201    PENDING_CREATE
04:43:34.124982  04:43:34.214674  0.089692         GET     200    PENDING_CREATE
04:43:35.215989  04:43:35.284013  0.068024         GET     200    PENDING_CREATE
04:43:36.284568  04:43:36.350168  0.065600         GET     200    PENDING_CREATE
04:43:37.351480  04:43:37.424050  0.072570         GET     200    PENDING_CREATE
04:43:38.425386  04:43:38.491694  0.066308         GET     200    PENDING_CREATE
04:43:39.492054  04:43:39.571494  0.079440         GET     200    PENDING_CREATE
04:43:40.572833  04:43:40.821633  0.248800         GET     200    PENDING_CREATE
04:43:41.822990  04:43:41.890918  0.067928         GET     200    PENDING_CREATE
04:43:42.892183  04:43:42.960182  0.067999         GET     200    PENDING_CREATE
04:43:43.961470  04:43:44.030822  0.069352         GET     200    PENDING_CREATE
04:43:45.031210  04:43:45.099251  0.068041         GET     200    PENDING_CREATE
04:43:46.100600  04:43:46.170547  0.069947         GET     200    PENDING_CREATE
04:43:47.172266  04:43:47.239339  0.067073         GET     200    PENDING_CREATE
04:43:48.240610  04:43:48.312642  0.072032         GET     200    PENDING_CREATE
04:43:49.313909  04:43:49.379889  0.065980         GET     200    PENDING_CREATE
04:43:50.380483  04:43:50.449509  0.069026         GET     200    PENDING_CREATE
04:43:51.450850  04:43:51.522325  0.071475         GET     200    PENDING_CREATE
04:43:52.523660  04:43:52.590202  0.066542         GET     200    PENDING_CREATE
04:43:53.591544  04:43:53.658136  0.066592         GET     200    PENDING_CREATE
04:43:54.659940  04:43:54.727617  0.067677         GET     200    PENDING_CREATE
04:43:55.729329  04:43:55.807656  0.078327         GET     200    PENDING_CREATE
04:43:56.808988  04:43:56.885056  0.076068         GET     200    PENDING_CREATE
04:43:57.886509  04:43:57.952903  0.066394         GET     200    PENDING_CREATE
04:43:58.954370  04:43:59.032945  0.078575         GET     200    PENDING_CREATE
04:44:00.034726  04:44:00.133740  0.099014         GET     200    PENDING_CREATE
04:44:01.134070  04:44:01.203765  0.069695         GET     200    PENDING_CREATE
04:44:02.205117  04:44:02.288119  0.083002         GET     200    PENDING_CREATE
04:44:03.289933  04:44:03.364135  0.074202         GET     200    PENDING_CREATE
04:44:04.364847  04:44:04.430468  0.065621         GET     200    PENDING_CREATE
04:44:05.430790  04:44:05.503426  0.072636         GET     200    PENDING_CREATE
04:44:06.504702  04:44:06.572037  0.067335         GET     200    PENDING_CREATE
04:44:07.573321  04:44:07.644166  0.070845         GET     200    PENDING_CREATE
04:44:08.645490  04:44:08.719872  0.074382         GET     200    PENDING_CREATE
04:44:09.720572  04:44:09.788157  0.067585         GET     200    PENDING_CREATE
04:44:10.789443  04:44:10.858201  0.068758         GET     200    PENDING_CREATE
04:44:11.859350  04:44:11.926353  0.067003         GET     200    PENDING_CREATE
04:44:12.926959  04:44:12.994365  0.067406         GET     200    PENDING_CREATE
04:44:13.994830  04:44:14.065180  0.070350         GET     200    PENDING_CREATE
04:44:15.065824  04:44:15.130200  0.064376         GET     200    PENDING_CREATE
04:44:16.130509  04:44:16.196789  0.066280         GET     200    PENDING_CREATE
04:44:17.197127  04:44:17.265303  0.068176         GET     200    PENDING_CREATE
04:44:18.266574  04:44:18.334195  0.067621         GET     200    PENDING_CREATE
04:44:19.335456  04:44:19.399667  0.064211         GET     200    PENDING_CREATE
04:44:20.400532  04:44:20.468589  0.068057         GET     200    PENDING_CREATE
04:44:21.469852  04:44:21.535241  0.065389         GET     200    PENDING_CREATE
04:44:22.536511  04:44:22.604275  0.067764         GET     200    PENDING_CREATE
04:44:23.605598  04:44:23.690824  0.085226         GET     200    PENDING_CREATE
04:44:24.691123  04:44:25.023433  0.332310         GET     200    PENDING_CREATE
04:44:26.024703  04:44:26.089875  0.065172         GET     200    PENDING_CREATE
04:44:27.091164  04:44:27.162525  0.071361         GET     200    PENDING_CREATE
04:44:28.163591  04:44:28.230775  0.067184         GET     200    PENDING_CREATE
04:44:29.232047  04:44:29.299581  0.067534         GET     200    PENDING_CREATE
04:44:30.300499  04:44:30.376981  0.076482         GET     200    PENDING_CREATE
04:44:31.378274  04:44:31.449825  0.071551         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 57.47304

[localhost] local: gohan client ese_physical_port show --output-format json f4c3a1bf-3b61-48ba-a548-422036849465
{
    "ese_physical_port": {
        "connected_port_id": "",
        "connected_port_owner": "mx_downlink",
        "description": "",
        "ese_device_id": "cc214b6a-2f09-4094-b7cd-a9590f64b854",
        "existing": "new",
        "id": "f4c3a1bf-3b61-48ba-a548-422036849465",
        "name": "xe-0/0/4",
        "operational_state": "UP",
        "orchestration_state": "CREATE_COMPLETE",
        "status": "ACTIVE",
        "tags": {},
        "tenant_id": "c583ce78843344adbe5fd20f13620274"
    }
}

#################################################
### checking heat-stack (ese_physical_ports) ####
#################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/ese_physical_ports/f4c3a1bf-3b61-48ba-a548-422036849465
[localhost] local: heat stack-show ese_physical_port_f4c3a1bf-3b61-48ba-a548-422036849465
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                           |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                              |
| creation_time         | 2018-04-09T04:43:34Z                                                                                                                                                                            |
| description           | Physical port template                                                                                                                                                                          |
| disable_rollback      | True                                                                                                                                                                                            |
| id                    | 8ec1e9db-3670-4dd5-8146-afde8984cfab                                                                                                                                                            |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/c583ce78843344adbe5fd20f13620274/stacks/ese_physical_port_f4c3a1bf-3b61-48ba-a548-422036849465/8ec1e9db-3670-4dd5-8146-afde8984cfab |
| notification_topics   | []                                                                                                                                                                                              |
| outputs               | [                                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                             |
|                       |     "output_value": "9da949d8-3a71-4bc7-a044-04d1b3f62d7a",                                                                                                                                     |
|                       |     "description": "Monitoring Target ID",                                                                                                                                                      |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                                        |
|                       |   },                                                                                                                                                                                            |
|                       |   {                                                                                                                                                                                             |
|                       |     "output_value": "06bfe521-07f0-4931-9f8c-318c3ad8114e",                                                                                                                                     |
|                       |     "description": "A unique id for the physical interface",                                                                                                                                    |
|                       |     "output_key": "id"                                                                                                                                                                          |
|                       |   },                                                                                                                                                                                            |
|                       |   {                                                                                                                                                                                             |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/9da949d8-3a71-4bc7-a044-04d1b3f62d7a",                                                            |
|                       |     "description": "Monitoring Process Link",                                                                                                                                                   |
|                       |     "output_key": "monitoring_link"                                                                                                                                                             |
|                       |   },                                                                                                                                                                                            |
|                       |   {                                                                                                                                                                                             |
|                       |     "output_value": "xe-0/0/38",                                                                                                                                                                |
|                       |     "description": "The name of the physical interface.",                                                                                                                                       |
|                       |     "output_key": "name"                                                                                                                                                                        |
|                       |   }                                                                                                                                                                                             |
|                       | ]                                                                                                                                                                                               |
| parameters            | {                                                                                                                                                                                               |
|                       |   "physical_port_name": "xe-0/0/4",                                                                                                                                                             |
|                       |   "OS::stack_id": "8ec1e9db-3670-4dd5-8146-afde8984cfab",                                                                                                                                       |
|                       |   "OS::stack_name": "ese_physical_port_f4c3a1bf-3b61-48ba-a548-422036849465",                                                                                                                   |
|                       |   "tenant_id": "c583ce78843344adbe5fd20f13620274",                                                                                                                                              |
|                       |   "device_ip": "10.161.0.34",                                                                                                                                                                   |
|                       |   "physical_device": "7e5c78fa-71c0-427e-947f-586b1fc3c470",                                                                                                                                    |
|                       |   "version": "1",                                                                                                                                                                               |
|                       |   "gohan_id": "f4c3a1bf-3b61-48ba-a548-422036849465"                                                                                                                                            |
|                       | }                                                                                                                                                                                               |
| parent                | None                                                                                                                                                                                            |
| stack_name            | ese_physical_port_f4c3a1bf-3b61-48ba-a548-422036849465                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                           |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                                 |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                             |
| stack_user_project_id | c583ce78843344adbe5fd20f13620274                                                                                                                                                                |
| template_description  | Physical port template                                                                                                                                                                          |
| timeout_mins          | 6                                                                                                                                                                                               |
| updated_time          | None                                                                                                                                                                                            |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show ese_physical_port_f4c3a1bf-3b61-48ba-a548-422036849465
description: 'Physical port template

  '
heat_template_version: '2013-05-23'
outputs:
  id:
    description: A unique id for the physical interface
    value: {get_resource: physical_interface}
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [interface_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: interface_monitor}
  name:
    description: The name of the physical interface.
    value:
      get_attr: [physical_interface, name]
parameters:
  device_ip: {description: Device IP Address., label: Device IP Address, type: string}
  gohan_id: {description: UUID of the ESE Physical Port, label: Gohan resource ID,
    type: string}
  physical_device: {description: Id of the physical device on which physical port
      will be created., label: Physical Device Id, type: string}
  physical_port_name: {description: Name of the physical port., label: Physical Interface
      Name, type: string}
  tenant_id: {label: Tenant ID, type: string}
  version: {label: Config version, type: number}
resources:
  interface_monitor:
    depends_on: physical_interface
    properties:
      field_name: port
      properties:
        community_name: ESE_NODE_COMMUNITY
        device_ip: {get_param: device_ip}
        if_name: {get_param: physical_port_name}
      resource_id: {get_param: gohan_id}
      resource_type: ese_physical_ports
      syncer_properties:
        etcd:
          status: {key: port}
      tenant_id: {get_param: tenant_id}
      type: snmp_ports_status
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget
  physical_interface:
    properties:
      name: {get_param: physical_port_name}
      physical_router: {get_param: physical_device}
    type: OS::Contrail::PhysicalInterface

### Create Edge Router ###
name:[vMX-router-02], id:[f4f54175-93fe-406b-ae66-dbca4df99e03]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
04:44:34.234375  04:44:34.345838  0.111463        POST     201    PENDING_CREATE
04:44:34.347017  04:44:34.431515  0.084498         GET     200    PENDING_CREATE
04:44:35.432518  04:44:35.503790  0.071272         GET     200    PENDING_CREATE
04:44:36.505094  04:44:36.582050  0.076956         GET     200    PENDING_CREATE
04:44:37.583075  04:44:37.649508  0.066433         GET     200    PENDING_CREATE
04:44:38.650773  04:44:38.717123  0.066350         GET     200    PENDING_CREATE
04:44:39.718408  04:44:39.786830  0.068422         GET     200    PENDING_CREATE
04:44:40.788102  04:44:40.854600  0.066498         GET     200    PENDING_CREATE
04:44:41.855879  04:44:41.922217  0.066338         GET     200    PENDING_CREATE
04:44:42.923491  04:44:42.994996  0.071505         GET     200    PENDING_CREATE
04:44:43.995501  04:44:44.070511  0.075010         GET     200    PENDING_CREATE
04:44:45.071131  04:44:45.136975  0.065844         GET     200    PENDING_CREATE
04:44:46.138260  04:44:46.219221  0.080961         GET     200    PENDING_CREATE
04:44:47.220563  04:44:47.289164  0.068601         GET     200    PENDING_CREATE
04:44:48.290504  04:44:48.356352  0.065848         GET     200    PENDING_CREATE
04:44:49.357310  04:44:49.424712  0.067402         GET     200    PENDING_CREATE
04:44:50.426053  04:44:50.496235  0.070182         GET     200    PENDING_CREATE
04:44:51.497409  04:44:51.561422  0.064013         GET     200    PENDING_CREATE
04:44:52.562778  04:44:52.629011  0.066233         GET     200    PENDING_CREATE
04:44:53.630353  04:44:53.694994  0.064641         GET     200    PENDING_CREATE
04:44:54.696346  04:44:54.768834  0.072488         GET     200    PENDING_CREATE
04:44:55.770124  04:44:55.834021  0.063897         GET     200    PENDING_CREATE
04:44:56.835326  04:44:56.901164  0.065838         GET     200    PENDING_CREATE
04:44:57.902506  04:44:57.973407  0.070901         GET     200    PENDING_CREATE
04:44:58.974234  04:44:59.053492  0.079258         GET     200    PENDING_CREATE
04:45:00.054840  04:45:00.535123  0.480283         GET     200    PENDING_CREATE
04:45:01.536537  04:45:01.609702  0.073165         GET     200    PENDING_CREATE
04:45:02.611694  04:45:02.683222  0.071528         GET     200    PENDING_CREATE
04:45:03.685091  04:45:03.765173  0.080082         GET     200    PENDING_CREATE
04:45:04.766569  04:45:04.847442  0.080873         GET     200    PENDING_CREATE
04:45:05.849021  04:45:05.949351  0.100330         GET     200    PENDING_CREATE
04:45:06.950756  04:45:07.020399  0.069643         GET     200    PENDING_CREATE
04:45:08.021725  04:45:08.097136  0.075411         GET     200    PENDING_CREATE
04:45:09.098473  04:45:09.164498  0.066025         GET     200    PENDING_CREATE
04:45:10.165653  04:45:10.231210  0.065557         GET     200    PENDING_CREATE
04:45:11.232548  04:45:11.302966  0.070418         GET     200    PENDING_CREATE
04:45:12.303766  04:45:12.369379  0.065613         GET     200    PENDING_CREATE
04:45:13.370711  04:45:13.436739  0.066028         GET     200    PENDING_CREATE
04:45:14.438047  04:45:14.514131  0.076084         GET     200    PENDING_CREATE
04:45:15.515320  04:45:15.591798  0.076478         GET     200    PENDING_CREATE
04:45:16.593155  04:45:16.662238  0.069083         GET     200    PENDING_CREATE
04:45:17.663670  04:45:17.735358  0.071688         GET     200    PENDING_CREATE
04:45:18.736889  04:45:18.805664  0.068775         GET     200    PENDING_CREATE
04:45:19.807404  04:45:19.873657  0.066253         GET     200    PENDING_CREATE
04:45:20.874988  04:45:20.944386  0.069398         GET     200    PENDING_CREATE
04:45:21.944905  04:45:22.017585  0.072680         GET     200    PENDING_CREATE
04:45:23.018948  04:45:23.089458  0.070510         GET     200    PENDING_CREATE
04:45:24.090799  04:45:24.156714  0.065915         GET     200    PENDING_CREATE
04:45:25.157603  04:45:25.222335  0.064732         GET     200    PENDING_CREATE
04:45:26.223611  04:45:26.290479  0.066868         GET     200    PENDING_CREATE
04:45:27.291186  04:45:27.355843  0.064657         GET     200    PENDING_CREATE
04:45:28.357099  04:45:28.420922  0.063823         GET     200    PENDING_CREATE
04:45:29.422184  04:45:29.488310  0.066126         GET     200    PENDING_CREATE
04:45:30.489603  04:45:30.554315  0.064712         GET     200    PENDING_CREATE
04:45:31.555608  04:45:31.619359  0.063751         GET     200    PENDING_CREATE
04:45:32.620563  04:45:32.696294  0.075731         GET     200    PENDING_CREATE
04:45:33.697536  04:45:33.773015  0.075479         GET     200    PENDING_CREATE
04:45:34.774289  04:45:34.837738  0.063449         GET     200    PENDING_CREATE
04:45:35.838484  04:45:35.904786  0.066302         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 61.670411

[localhost] local: gohan client edge_router show --output-format json f4f54175-93fe-406b-ae66-dbca4df99e03
{
    "edge_router": {
        "autonomous_system": "65101",
        "description": "MX80 #2",
        "id": "f4f54175-93fe-406b-ae66-dbca4df99e03",
        "ip": "10.79.5.185",
        "login": "esi",
        "name": "vMX-router-02",
        "operational_state": "UP",
        "orchestration_state": "CREATE_COMPLETE",
        "password": "esiesi0000",
        "ssh_port": 830,
        "status": "ACTIVE",
        "tenant_id": "c583ce78843344adbe5fd20f13620274"
    }
}

###########################################
### checking heat-stack (edge_routers) ####
###########################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/edge_routers/f4f54175-93fe-406b-ae66-dbca4df99e03
[localhost] local: heat stack-show edge_router_f4f54175-93fe-406b-ae66-dbca4df99e03
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                     |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                        |
| creation_time         | 2018-04-09T04:44:35Z                                                                                                                                                                      |
| description           | Physical port template                                                                                                                                                                    |
| disable_rollback      | True                                                                                                                                                                                      |
| id                    | 521c324d-4685-43c7-9e51-a7153e188aae                                                                                                                                                      |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/c583ce78843344adbe5fd20f13620274/stacks/edge_router_f4f54175-93fe-406b-ae66-dbca4df99e03/521c324d-4685-43c7-9e51-a7153e188aae |
| notification_topics   | []                                                                                                                                                                                        |
| outputs               | [                                                                                                                                                                                         |
|                       |   {                                                                                                                                                                                       |
|                       |     "output_value": "b88cbb53-f850-44f2-9960-95ade457e46c",                                                                                                                               |
|                       |     "description": "Monitoring Target ID",                                                                                                                                                |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                                  |
|                       |   },                                                                                                                                                                                      |
|                       |   {                                                                                                                                                                                       |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/b88cbb53-f850-44f2-9960-95ade457e46c",                                                      |
|                       |     "description": "Monitoring Process Link",                                                                                                                                             |
|                       |     "output_key": "monitoring_link"                                                                                                                                                       |
|                       |   }                                                                                                                                                                                       |
|                       | ]                                                                                                                                                                                         |
| parameters            | {                                                                                                                                                                                         |
|                       |   "OS::stack_id": "521c324d-4685-43c7-9e51-a7153e188aae",                                                                                                                                 |
|                       |   "OS::stack_name": "edge_router_f4f54175-93fe-406b-ae66-dbca4df99e03",                                                                                                                   |
|                       |   "tenant_id": "c583ce78843344adbe5fd20f13620274",                                                                                                                                        |
|                       |   "device_ip": "10.79.5.185",                                                                                                                                                             |
|                       |   "version": "1",                                                                                                                                                                         |
|                       |   "gohan_id": "f4f54175-93fe-406b-ae66-dbca4df99e03"                                                                                                                                      |
|                       | }                                                                                                                                                                                         |
| parent                | None                                                                                                                                                                                      |
| stack_name            | edge_router_f4f54175-93fe-406b-ae66-dbca4df99e03                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                     |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                           |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                       |
| stack_user_project_id | c583ce78843344adbe5fd20f13620274                                                                                                                                                          |
| template_description  | Physical port template                                                                                                                                                                    |
| timeout_mins          | 3                                                                                                                                                                                         |
| updated_time          | None                                                                                                                                                                                      |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show edge_router_f4f54175-93fe-406b-ae66-dbca4df99e03
description: 'Physical port template

  '
heat_template_version: '2013-05-23'
outputs:
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [device_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: device_monitor}
parameters:
  device_ip: {description: Device IP Address, label: Device IP Address, type: string}
  gohan_id: {description: UUID of the Edge Router, label: Gohan resource ID, type: string}
  tenant_id: {label: Tenant ID, type: string}
  version: {label: Config version, type: number}
resources:
  device_monitor:
    properties:
      field_name: router
      properties:
        community_name: EDGE_ROUTER_COMMUNITY
        device_ip: {get_param: device_ip}
      resource_id: {get_param: gohan_id}
      resource_type: edge_routers
      syncer_properties:
        etcd:
          status: {key: router}
      tenant_id: {get_param: tenant_id}
      type: snmp_device
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget

### Create Edge Router ###
name:[vMX-router-01], id:[2d056865-47a9-45cf-a890-ed10e3b5912a]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
04:45:38.512799  04:45:38.619346  0.106547        POST     201    PENDING_CREATE
04:45:38.626334  04:45:38.711885  0.085551         GET     200    PENDING_CREATE
04:45:39.713116  04:45:39.781850  0.068734         GET     200    PENDING_CREATE
04:45:40.783101  04:45:40.852689  0.069588         GET     200    PENDING_CREATE
04:45:41.853497  04:45:41.928242  0.074745         GET     200    PENDING_CREATE
04:45:42.928871  04:45:42.997321  0.068450         GET     200    PENDING_CREATE
04:45:43.998582  04:45:44.065796  0.067214         GET     200    PENDING_CREATE
04:45:45.067048  04:45:45.131867  0.064819         GET     200    PENDING_CREATE
04:45:46.132571  04:45:46.215495  0.082924         GET     200    PENDING_CREATE
04:45:47.216799  04:45:47.289017  0.072218         GET     200    PENDING_CREATE
04:45:48.289586  04:45:48.369140  0.079554         GET     200    PENDING_CREATE
04:45:49.370453  04:45:49.449545  0.079092         GET     200    PENDING_CREATE
04:45:50.450824  04:45:50.518936  0.068112         GET     200    PENDING_CREATE
04:45:51.520199  04:45:51.594942  0.074743         GET     200    PENDING_CREATE
04:45:52.596235  04:45:52.694270  0.098035         GET     200    PENDING_CREATE
04:45:53.695526  04:45:53.765709  0.070183         GET     200    PENDING_CREATE
04:45:54.766977  04:45:54.831083  0.064106         GET     200    PENDING_CREATE
04:45:55.832353  04:45:55.898276  0.065923         GET     200    PENDING_CREATE
04:45:56.899553  04:45:56.963274  0.063721         GET     200    PENDING_CREATE
04:45:57.964544  04:45:58.028391  0.063847         GET     200    PENDING_CREATE
04:45:59.029361  04:45:59.096157  0.066796         GET     200    PENDING_CREATE
04:46:00.097395  04:46:00.162513  0.065118         GET     200    PENDING_CREATE
04:46:01.163756  04:46:01.227979  0.064223         GET     200    PENDING_CREATE
04:46:02.228960  04:46:02.304948  0.075988         GET     200    PENDING_CREATE
04:46:03.305550  04:46:03.391023  0.085473         GET     200    PENDING_CREATE
04:46:04.391737  04:46:04.458737  0.067000         GET     200    PENDING_CREATE
04:46:05.460021  04:46:05.535724  0.075703         GET     200    PENDING_CREATE
04:46:06.537925  04:46:06.621652  0.083727         GET     200    PENDING_CREATE
04:46:07.623023  04:46:07.700396  0.077373         GET     200    PENDING_CREATE
04:46:08.702280  04:46:08.784707  0.082427         GET     200    PENDING_CREATE
04:46:09.786099  04:46:09.862996  0.076897         GET     200    PENDING_CREATE
04:46:10.864523  04:46:10.942189  0.077666         GET     200    PENDING_CREATE
04:46:11.944192  04:46:12.009194  0.065002         GET     200    PENDING_CREATE
04:46:13.010469  04:46:13.084612  0.074143         GET     200    PENDING_CREATE
04:46:14.085204  04:46:14.154516  0.069312         GET     200    PENDING_CREATE
04:46:15.155780  04:46:15.220552  0.064772         GET     200    PENDING_CREATE
04:46:16.221808  04:46:16.285825  0.064017         GET     200    PENDING_CREATE
04:46:17.287097  04:46:17.376601  0.089504         GET     200    PENDING_CREATE
04:46:18.377410  04:46:18.443357  0.065947         GET     200    PENDING_CREATE
04:46:19.444629  04:46:19.517238  0.072609         GET     200    PENDING_CREATE
04:46:20.518503  04:46:20.591418  0.072915         GET     200    PENDING_CREATE
04:46:21.592353  04:46:21.656190  0.063837         GET     200    PENDING_CREATE
04:46:22.657461  04:46:22.722940  0.065479         GET     200    PENDING_CREATE
04:46:23.724542  04:46:23.859516  0.134974         GET     200    PENDING_CREATE
04:46:24.861221  04:46:24.928530  0.067309         GET     200    PENDING_CREATE
04:46:25.929352  04:46:26.005731  0.076379         GET     200    PENDING_CREATE
04:46:27.007091  04:46:27.084753  0.077662         GET     200    PENDING_CREATE
04:46:28.086453  04:46:28.151264  0.064811         GET     200    PENDING_CREATE
04:46:29.152585  04:46:29.230045  0.077460         GET     200    PENDING_CREATE
04:46:30.230958  04:46:30.300614  0.069656         GET     200    PENDING_CREATE
04:46:31.301215  04:46:31.425292  0.124077         GET     200    PENDING_CREATE
04:46:32.426539  04:46:32.500740  0.074201         GET     200    PENDING_CREATE
04:46:33.502123  04:46:33.569088  0.066965         GET     200    PENDING_CREATE
04:46:34.570435  04:46:34.634951  0.064516         GET     200    PENDING_CREATE
04:46:35.635867  04:46:35.713758  0.077891         GET     200    PENDING_CREATE
04:46:36.715079  04:46:36.787038  0.071959         GET     200    PENDING_CREATE
04:46:37.788302  04:46:37.856378  0.068076         GET     200    PENDING_CREATE
04:46:38.857194  04:46:38.934489  0.077295         GET     200    PENDING_CREATE
04:46:39.936573  04:46:40.003809  0.067236         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 61.49101

[localhost] local: gohan client edge_router show --output-format json 2d056865-47a9-45cf-a890-ed10e3b5912a
{
    "edge_router": {
        "autonomous_system": "65101",
        "description": "MX80 #1",
        "id": "2d056865-47a9-45cf-a890-ed10e3b5912a",
        "ip": "10.79.5.184",
        "login": "esi",
        "name": "vMX-router-01",
        "operational_state": "UP",
        "orchestration_state": "CREATE_COMPLETE",
        "password": "esiesi0000",
        "ssh_port": 830,
        "status": "ACTIVE",
        "tenant_id": "c583ce78843344adbe5fd20f13620274"
    }
}

###########################################
### checking heat-stack (edge_routers) ####
###########################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/edge_routers/2d056865-47a9-45cf-a890-ed10e3b5912a
[localhost] local: heat stack-show edge_router_2d056865-47a9-45cf-a890-ed10e3b5912a
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                     |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                        |
| creation_time         | 2018-04-09T04:45:39Z                                                                                                                                                                      |
| description           | Physical port template                                                                                                                                                                    |
| disable_rollback      | True                                                                                                                                                                                      |
| id                    | 36e9b437-d8f6-412d-85c5-f8c913379c2c                                                                                                                                                      |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/c583ce78843344adbe5fd20f13620274/stacks/edge_router_2d056865-47a9-45cf-a890-ed10e3b5912a/36e9b437-d8f6-412d-85c5-f8c913379c2c |
| notification_topics   | []                                                                                                                                                                                        |
| outputs               | [                                                                                                                                                                                         |
|                       |   {                                                                                                                                                                                       |
|                       |     "output_value": "ad464fbb-0810-447e-b10d-31715221cb95",                                                                                                                               |
|                       |     "description": "Monitoring Target ID",                                                                                                                                                |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                                  |
|                       |   },                                                                                                                                                                                      |
|                       |   {                                                                                                                                                                                       |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/ad464fbb-0810-447e-b10d-31715221cb95",                                                      |
|                       |     "description": "Monitoring Process Link",                                                                                                                                             |
|                       |     "output_key": "monitoring_link"                                                                                                                                                       |
|                       |   }                                                                                                                                                                                       |
|                       | ]                                                                                                                                                                                         |
| parameters            | {                                                                                                                                                                                         |
|                       |   "OS::stack_id": "36e9b437-d8f6-412d-85c5-f8c913379c2c",                                                                                                                                 |
|                       |   "OS::stack_name": "edge_router_2d056865-47a9-45cf-a890-ed10e3b5912a",                                                                                                                   |
|                       |   "tenant_id": "c583ce78843344adbe5fd20f13620274",                                                                                                                                        |
|                       |   "device_ip": "10.79.5.184",                                                                                                                                                             |
|                       |   "version": "1",                                                                                                                                                                         |
|                       |   "gohan_id": "2d056865-47a9-45cf-a890-ed10e3b5912a"                                                                                                                                      |
|                       | }                                                                                                                                                                                         |
| parent                | None                                                                                                                                                                                      |
| stack_name            | edge_router_2d056865-47a9-45cf-a890-ed10e3b5912a                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                     |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                           |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                       |
| stack_user_project_id | c583ce78843344adbe5fd20f13620274                                                                                                                                                          |
| template_description  | Physical port template                                                                                                                                                                    |
| timeout_mins          | 3                                                                                                                                                                                         |
| updated_time          | None                                                                                                                                                                                      |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show edge_router_2d056865-47a9-45cf-a890-ed10e3b5912a
description: 'Physical port template

  '
heat_template_version: '2013-05-23'
outputs:
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [device_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: device_monitor}
parameters:
  device_ip: {description: Device IP Address, label: Device IP Address, type: string}
  gohan_id: {description: UUID of the Edge Router, label: Gohan resource ID, type: string}
  tenant_id: {label: Tenant ID, type: string}
  version: {label: Config version, type: number}
resources:
  device_monitor:
    properties:
      field_name: router
      properties:
        community_name: EDGE_ROUTER_COMMUNITY
        device_ip: {get_param: device_ip}
      resource_id: {get_param: gohan_id}
      resource_type: edge_routers
      syncer_properties:
        etcd:
          status: {key: router}
      tenant_id: {get_param: tenant_id}
      type: snmp_device
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget

### Create Ha Router ###
name:[sample-ha-router], id:[e16529c4-ffb8-4346-b850-af3c93564604]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
04:46:42.677910  04:46:42.839586  0.161676        POST     201    PENDING_CREATE
04:46:42.844494  04:46:42.934349  0.089855         GET     200    PENDING_CREATE
04:46:43.935889  04:46:44.012757  0.076868         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 1.334847

[localhost] local: gohan client ha_router show --output-format json e16529c4-ffb8-4346-b850-af3c93564604
{
    "ha_router": {
        "available_gateways": 500,
        "description": "sample_ha_router",
        "id": "e16529c4-ffb8-4346-b850-af3c93564604",
        "maximum_gateways": 500,
        "name": "sample-ha-router",
        "primary_router_id": "f4f54175-93fe-406b-ae66-dbca4df99e03",
        "secondary_router_id": "2d056865-47a9-45cf-a890-ed10e3b5912a",
        "status": "ACTIVE",
        "tenant_id": "c583ce78843344adbe5fd20f13620274"
    }
}

### Create Er Physical Interface ###
name:[ae0], id:[c2576120-00b0-461e-a2ae-f7bbff9465d0]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
04:46:44.683459  04:46:44.849469  0.166010        POST     201    PENDING_CREATE
04:46:44.850602  04:46:44.928386  0.077784         GET     200    PENDING_CREATE
04:46:45.929857  04:46:45.997103  0.067246         GET     200    PENDING_CREATE
04:46:46.998418  04:46:47.072282  0.073864         GET     200    PENDING_CREATE
04:46:48.073544  04:46:48.139192  0.065648         GET     200    PENDING_CREATE
04:46:49.140492  04:46:49.216921  0.076429         GET     200    PENDING_CREATE
04:46:50.218188  04:46:50.283315  0.065127         GET     200    PENDING_CREATE
04:46:51.284546  04:46:51.354260  0.069714         GET     200    PENDING_CREATE
04:46:52.355584  04:46:52.422734  0.067150         GET     200    PENDING_CREATE
04:46:53.423816  04:46:53.491937  0.068121         GET     200    PENDING_CREATE
04:46:54.493285  04:46:54.716914  0.223629         GET     200    PENDING_CREATE
04:46:55.718261  04:46:55.785889  0.067628         GET     200    PENDING_CREATE
04:46:56.787369  04:46:56.867444  0.080075         GET     200    PENDING_CREATE
04:46:57.869493  04:46:57.947880  0.078387         GET     200    PENDING_CREATE
04:46:58.949210  04:46:59.015512  0.066302         GET     200    PENDING_CREATE
04:47:00.016554  04:47:00.114443  0.097889         GET     200    PENDING_CREATE
04:47:01.115814  04:47:01.184210  0.068396         GET     200    PENDING_CREATE
04:47:02.185864  04:47:02.252613  0.066749         GET     200    PENDING_CREATE
04:47:03.253880  04:47:03.323617  0.069737         GET     200    PENDING_CREATE
04:47:04.324926  04:47:04.391990  0.067064         GET     200    PENDING_CREATE
04:47:05.392676  04:47:05.468222  0.075546         GET     200    PENDING_CREATE
04:47:06.469667  04:47:06.548954  0.079287         GET     200    PENDING_CREATE
04:47:07.549663  04:47:07.617960  0.068297         GET     200    PENDING_CREATE
04:47:08.619620  04:47:08.686435  0.066815         GET     200    PENDING_CREATE
04:47:09.687782  04:47:09.756695  0.068913         GET     200    PENDING_CREATE
04:47:10.757985  04:47:10.826792  0.068807         GET     200    PENDING_CREATE
04:47:11.828138  04:47:11.898179  0.070041         GET     200    PENDING_CREATE
04:47:12.899539  04:47:12.971174  0.071635         GET     200    PENDING_CREATE
04:47:13.972626  04:47:14.041375  0.068749         GET     200    PENDING_CREATE
04:47:15.042635  04:47:15.113871  0.071236         GET     200    PENDING_CREATE
04:47:16.114220  04:47:16.179317  0.065097         GET     200    PENDING_CREATE
04:47:17.180584  04:47:17.248825  0.068241         GET     200    PENDING_CREATE
04:47:18.250119  04:47:18.321066  0.070947         GET     200    PENDING_CREATE
04:47:19.321681  04:47:19.399032  0.077351         GET     200    PENDING_CREATE
04:47:20.400359  04:47:20.467334  0.066975         GET     200    PENDING_CREATE
04:47:21.468686  04:47:21.531922  0.063236         GET     200    PENDING_CREATE
04:47:22.533256  04:47:22.601151  0.067895         GET     200    PENDING_CREATE
04:47:23.601605  04:47:23.667688  0.066083         GET     200    PENDING_CREATE
04:47:24.669203  04:47:24.735165  0.065962         GET     200    PENDING_CREATE
04:47:25.736582  04:47:25.818344  0.081762         GET     200    PENDING_CREATE
04:47:26.819190  04:47:26.891775  0.072585         GET     200    PENDING_CREATE
04:47:27.892534  04:47:27.959489  0.066955         GET     200    PENDING_CREATE
04:47:28.960562  04:47:29.029678  0.069116         GET     200    PENDING_CREATE
04:47:30.030336  04:47:30.169453  0.139117         GET     200    PENDING_CREATE
04:47:31.171428  04:47:31.239160  0.067732         GET     200    PENDING_CREATE
04:47:32.240539  04:47:32.309195  0.068656         GET     200    PENDING_CREATE
04:47:33.310534  04:47:33.389502  0.078968         GET     200    PENDING_CREATE
04:47:34.390885  04:47:34.534986  0.144101         GET     200    PENDING_CREATE
04:47:35.536391  04:47:35.602878  0.066487         GET     200    PENDING_CREATE
04:47:36.603845  04:47:36.673728  0.069883         GET     200    PENDING_CREATE
04:47:37.675062  04:47:37.742458  0.067396         GET     200    PENDING_CREATE
04:47:38.742748  04:47:38.829351  0.086603         GET     200    PENDING_CREATE
04:47:39.830391  04:47:39.897009  0.066618         GET     200    PENDING_CREATE
04:47:40.898278  04:47:40.964988  0.066710         GET     200    PENDING_CREATE
04:47:41.966273  04:47:42.035277  0.069004         GET     200    PENDING_CREATE
04:47:43.036572  04:47:43.115807  0.079235         GET     200    PENDING_CREATE
04:47:44.117124  04:47:44.184239  0.067115         GET     200    PENDING_CREATE
04:47:45.185555  04:47:45.252553  0.066998         GET     200    PENDING_CREATE
04:47:46.253912  04:47:46.322889  0.068977         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 61.63943

[localhost] local: gohan client er_physical_interface show --output-format json c2576120-00b0-461e-a2ae-f7bbff9465d0
{
    "er_physical_interface": {
        "connected_ese_port_id": "9451c9ca-289d-42ba-846d-359c448e910c",
        "description": "",
        "device_id": "f4f54175-93fe-406b-ae66-dbca4df99e03",
        "id": "c2576120-00b0-461e-a2ae-f7bbff9465d0",
        "name": "ae0",
        "operational_state": "UP",
        "orchestration_state": "CREATE_COMPLETE",
        "status": "ACTIVE",
        "tenant_id": "c583ce78843344adbe5fd20f13620274"
    }
}

#####################################################
### checking heat-stack (er_physical_interfaces) ####
#####################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/er_physical_interfaces/c2576120-00b0-461e-a2ae-f7bbff9465d0
[localhost] local: heat stack-show er_physical_interface_c2576120-00b0-461e-a2ae-f7bbff9465d0
+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                               |
+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                                  |
| creation_time         | 2018-04-09T04:46:45Z                                                                                                                                                                                |
| description           | Physical port template                                                                                                                                                                              |
| disable_rollback      | True                                                                                                                                                                                                |
| id                    | 9dc94842-9230-446f-ae5c-26a2fe1b3f33                                                                                                                                                                |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/c583ce78843344adbe5fd20f13620274/stacks/er_physical_interface_c2576120-00b0-461e-a2ae-f7bbff9465d0/9dc94842-9230-446f-ae5c-26a2fe1b3f33 |
| notification_topics   | []                                                                                                                                                                                                  |
| outputs               | [                                                                                                                                                                                                   |
|                       |   {                                                                                                                                                                                                 |
|                       |     "output_value": "23d9d390-e1e3-41c7-b926-479d6909aeeb",                                                                                                                                         |
|                       |     "description": "Monitoring Target ID",                                                                                                                                                          |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                                            |
|                       |   },                                                                                                                                                                                                |
|                       |   {                                                                                                                                                                                                 |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/23d9d390-e1e3-41c7-b926-479d6909aeeb",                                                                |
|                       |     "description": "Monitoring Process Link",                                                                                                                                                       |
|                       |     "output_key": "monitoring_link"                                                                                                                                                                 |
|                       |   }                                                                                                                                                                                                 |
|                       | ]                                                                                                                                                                                                   |
| parameters            | {                                                                                                                                                                                                   |
|                       |   "OS::stack_id": "9dc94842-9230-446f-ae5c-26a2fe1b3f33",                                                                                                                                           |
|                       |   "OS::stack_name": "er_physical_interface_c2576120-00b0-461e-a2ae-f7bbff9465d0",                                                                                                                   |
|                       |   "tenant_id": "c583ce78843344adbe5fd20f13620274",                                                                                                                                                  |
|                       |   "device_ip": "10.79.5.185",                                                                                                                                                                       |
|                       |   "if_name": "ae0",                                                                                                                                                                                 |
|                       |   "version": "1",                                                                                                                                                                                   |
|                       |   "gohan_id": "c2576120-00b0-461e-a2ae-f7bbff9465d0"                                                                                                                                                |
|                       | }                                                                                                                                                                                                   |
| parent                | None                                                                                                                                                                                                |
| stack_name            | er_physical_interface_c2576120-00b0-461e-a2ae-f7bbff9465d0                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                               |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                                     |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                                 |
| stack_user_project_id | c583ce78843344adbe5fd20f13620274                                                                                                                                                                    |
| template_description  | Physical port template                                                                                                                                                                              |
| timeout_mins          | 3                                                                                                                                                                                                   |
| updated_time          | None                                                                                                                                                                                                |
+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show er_physical_interface_c2576120-00b0-461e-a2ae-f7bbff9465d0
description: 'Physical port template

  '
heat_template_version: '2013-05-23'
outputs:
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [interface_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: interface_monitor}
parameters:
  device_ip: {description: Device IP Address, label: Device IP Address, type: string}
  gohan_id: {description: UUID of the ER Physical Interface, label: Gohan resource
      ID, type: string}
  if_name: {description: Name of the ER Physical Interface, label: Interface Name,
    type: string}
  tenant_id: {label: Tenant ID, type: string}
  version: {label: Config version, type: number}
resources:
  interface_monitor:
    properties:
      field_name: interface
      properties:
        community_name: EDGE_ROUTER_COMMUNITY
        device_ip: {get_param: device_ip}
        if_name: {get_param: if_name}
      resource_id: {get_param: gohan_id}
      resource_type: er_physical_interfaces
      syncer_properties:
        etcd:
          status: {key: interface}
      tenant_id: {get_param: tenant_id}
      type: snmp_ports_status
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget

### Create Er Physical Interface ###
name:[ae0], id:[b9c7c1f4-1b90-4a7a-8161-34276bb2ed10]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
04:47:49.034675  04:47:49.220420  0.185745        POST     201    PENDING_CREATE
04:47:49.220977  04:47:49.318219  0.097242         GET     200    PENDING_CREATE
04:47:50.319616  04:47:50.388194  0.068578         GET     200    PENDING_CREATE
04:47:51.389311  04:47:51.466805  0.077494         GET     200    PENDING_CREATE
04:47:52.468060  04:47:52.543436  0.075376         GET     200    PENDING_CREATE
04:47:53.544776  04:47:53.616829  0.072053         GET     200    PENDING_CREATE
04:47:54.618181  04:47:54.715225  0.097044         GET     200    PENDING_CREATE
04:47:55.716551  04:47:55.796862  0.080311         GET     200    PENDING_CREATE
04:47:56.797588  04:47:56.877385  0.079797         GET     200    PENDING_CREATE
04:47:57.877902  04:47:57.968133  0.090231         GET     200    PENDING_CREATE
04:47:58.970426  04:47:59.037009  0.066583         GET     200    PENDING_CREATE
04:48:00.038779  04:48:00.114991  0.076212         GET     200    PENDING_CREATE
04:48:01.115740  04:48:01.183954  0.068214         GET     200    PENDING_CREATE
04:48:02.184789  04:48:02.252372  0.067583         GET     200    PENDING_CREATE
04:48:03.252907  04:48:03.334141  0.081234         GET     200    PENDING_CREATE
04:48:04.336001  04:48:04.409292  0.073291         GET     200    PENDING_CREATE
04:48:05.410637  04:48:05.484390  0.073753         GET     200    PENDING_CREATE
04:48:06.485211  04:48:06.562146  0.076935         GET     200    PENDING_CREATE
04:48:07.563490  04:48:07.630300  0.066810         GET     200    PENDING_CREATE
04:48:08.631633  04:48:08.697165  0.065532         GET     200    PENDING_CREATE
04:48:09.698023  04:48:09.766684  0.068661         GET     200    PENDING_CREATE
04:48:10.768004  04:48:10.834651  0.066647         GET     200    PENDING_CREATE
04:48:11.836616  04:48:11.903352  0.066736         GET     200    PENDING_CREATE
04:48:12.904788  04:48:13.186006  0.281218         GET     200    PENDING_CREATE
04:48:14.187693  04:48:14.256619  0.068926         GET     200    PENDING_CREATE
04:48:15.257127  04:48:15.326167  0.069040         GET     200    PENDING_CREATE
04:48:16.327450  04:48:16.397489  0.070039         GET     200    PENDING_CREATE
04:48:17.397892  04:48:17.466404  0.068512         GET     200    PENDING_CREATE
04:48:18.467695  04:48:18.533035  0.065340         GET     200    PENDING_CREATE
04:48:19.534322  04:48:19.620010  0.085688         GET     200    PENDING_CREATE
04:48:20.620537  04:48:20.706787  0.086250         GET     200    PENDING_CREATE
04:48:21.707829  04:48:21.775290  0.067461         GET     200    PENDING_CREATE
04:48:22.776577  04:48:22.843974  0.067397         GET     200    PENDING_CREATE
04:48:23.845351  04:48:23.911674  0.066323         GET     200    PENDING_CREATE
04:48:24.912976  04:48:24.981017  0.068041         GET     200    PENDING_CREATE
04:48:25.982288  04:48:26.050070  0.067782         GET     200    PENDING_CREATE
04:48:27.050676  04:48:27.130061  0.079385         GET     200    PENDING_CREATE
04:48:28.131443  04:48:28.197806  0.066363         GET     200    PENDING_CREATE
04:48:29.199081  04:48:29.272644  0.073563         GET     200    PENDING_CREATE
04:48:30.273959  04:48:30.344283  0.070324         GET     200    PENDING_CREATE
04:48:31.345664  04:48:31.415344  0.069680         GET     200    PENDING_CREATE
04:48:32.416358  04:48:32.485857  0.069499         GET     200    PENDING_CREATE
04:48:33.487129  04:48:33.566773  0.079644         GET     200    PENDING_CREATE
04:48:34.567879  04:48:34.634322  0.066443         GET     200    PENDING_CREATE
04:48:35.634817  04:48:35.702635  0.067818         GET     200    PENDING_CREATE
04:48:36.704008  04:48:36.781716  0.077708         GET     200    PENDING_CREATE
04:48:37.783112  04:48:37.849445  0.066333         GET     200    PENDING_CREATE
04:48:38.850789  04:48:38.915896  0.065107         GET     200    PENDING_CREATE
04:48:39.917179  04:48:39.988023  0.070844         GET     200    PENDING_CREATE
04:48:40.989311  04:48:41.070210  0.080899         GET     200    PENDING_CREATE
04:48:42.071534  04:48:42.139949  0.068415         GET     200    PENDING_CREATE
04:48:43.140552  04:48:43.217603  0.077051         GET     200    PENDING_CREATE
04:48:44.218886  04:48:44.285246  0.066360         GET     200    PENDING_CREATE
04:48:45.286207  04:48:45.352637  0.066430         GET     200    PENDING_CREATE
04:48:46.353905  04:48:46.420853  0.066948         GET     200    PENDING_CREATE
04:48:47.421763  04:48:47.488539  0.066776         GET     200    PENDING_CREATE
04:48:48.489526  04:48:48.555328  0.065802         GET     200    PENDING_CREATE
04:48:49.556646  04:48:49.639035  0.082389         GET     200    PENDING_CREATE
04:48:50.640089  04:48:50.717334  0.077245         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 61.682659

[localhost] local: gohan client er_physical_interface show --output-format json b9c7c1f4-1b90-4a7a-8161-34276bb2ed10
{
    "er_physical_interface": {
        "connected_ese_port_id": "f4c3a1bf-3b61-48ba-a548-422036849465",
        "description": "",
        "device_id": "2d056865-47a9-45cf-a890-ed10e3b5912a",
        "id": "b9c7c1f4-1b90-4a7a-8161-34276bb2ed10",
        "name": "ae0",
        "operational_state": "UP",
        "orchestration_state": "CREATE_COMPLETE",
        "status": "ACTIVE",
        "tenant_id": "c583ce78843344adbe5fd20f13620274"
    }
}

#####################################################
### checking heat-stack (er_physical_interfaces) ####
#####################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/er_physical_interfaces/b9c7c1f4-1b90-4a7a-8161-34276bb2ed10
[localhost] local: heat stack-show er_physical_interface_b9c7c1f4-1b90-4a7a-8161-34276bb2ed10
+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                               |
+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                                  |
| creation_time         | 2018-04-09T04:47:49Z                                                                                                                                                                                |
| description           | Physical port template                                                                                                                                                                              |
| disable_rollback      | True                                                                                                                                                                                                |
| id                    | 6aa1108c-bb2d-4a0f-a7e0-835e3581ed20                                                                                                                                                                |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/c583ce78843344adbe5fd20f13620274/stacks/er_physical_interface_b9c7c1f4-1b90-4a7a-8161-34276bb2ed10/6aa1108c-bb2d-4a0f-a7e0-835e3581ed20 |
| notification_topics   | []                                                                                                                                                                                                  |
| outputs               | [                                                                                                                                                                                                   |
|                       |   {                                                                                                                                                                                                 |
|                       |     "output_value": "17d442df-0ac4-4c5e-bbef-34fc7e4c4b06",                                                                                                                                         |
|                       |     "description": "Monitoring Target ID",                                                                                                                                                          |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                                            |
|                       |   },                                                                                                                                                                                                |
|                       |   {                                                                                                                                                                                                 |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/17d442df-0ac4-4c5e-bbef-34fc7e4c4b06",                                                                |
|                       |     "description": "Monitoring Process Link",                                                                                                                                                       |
|                       |     "output_key": "monitoring_link"                                                                                                                                                                 |
|                       |   }                                                                                                                                                                                                 |
|                       | ]                                                                                                                                                                                                   |
| parameters            | {                                                                                                                                                                                                   |
|                       |   "OS::stack_id": "6aa1108c-bb2d-4a0f-a7e0-835e3581ed20",                                                                                                                                           |
|                       |   "OS::stack_name": "er_physical_interface_b9c7c1f4-1b90-4a7a-8161-34276bb2ed10",                                                                                                                   |
|                       |   "tenant_id": "c583ce78843344adbe5fd20f13620274",                                                                                                                                                  |
|                       |   "device_ip": "10.79.5.184",                                                                                                                                                                       |
|                       |   "if_name": "ae0",                                                                                                                                                                                 |
|                       |   "version": "1",                                                                                                                                                                                   |
|                       |   "gohan_id": "b9c7c1f4-1b90-4a7a-8161-34276bb2ed10"                                                                                                                                                |
|                       | }                                                                                                                                                                                                   |
| parent                | None                                                                                                                                                                                                |
| stack_name            | er_physical_interface_b9c7c1f4-1b90-4a7a-8161-34276bb2ed10                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                               |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                                     |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                                 |
| stack_user_project_id | c583ce78843344adbe5fd20f13620274                                                                                                                                                                    |
| template_description  | Physical port template                                                                                                                                                                              |
| timeout_mins          | 3                                                                                                                                                                                                   |
| updated_time          | None                                                                                                                                                                                                |
+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show er_physical_interface_b9c7c1f4-1b90-4a7a-8161-34276bb2ed10
description: 'Physical port template

  '
heat_template_version: '2013-05-23'
outputs:
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [interface_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: interface_monitor}
parameters:
  device_ip: {description: Device IP Address, label: Device IP Address, type: string}
  gohan_id: {description: UUID of the ER Physical Interface, label: Gohan resource
      ID, type: string}
  if_name: {description: Name of the ER Physical Interface, label: Interface Name,
    type: string}
  tenant_id: {label: Tenant ID, type: string}
  version: {label: Config version, type: number}
resources:
  interface_monitor:
    properties:
      field_name: interface
      properties:
        community_name: EDGE_ROUTER_COMMUNITY
        device_ip: {get_param: device_ip}
        if_name: {get_param: if_name}
      resource_id: {get_param: gohan_id}
      resource_type: er_physical_interfaces
      syncer_properties:
        etcd:
          status: {key: interface}
      tenant_id: {get_param: tenant_id}
      type: snmp_ports_status
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget

### Create Ha Interface ###
name:[sample-ha-router-downlink], id:[16f6433d-0864-4d24-809d-c1b8e878280c]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
04:48:53.409386  04:48:54.053485  0.644099        POST     201    PENDING_CREATE
04:48:54.054288  04:48:54.134893  0.080605         GET     200    PENDING_CREATE
04:48:55.136298  04:48:55.209497  0.073199         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 1.800111

[localhost] local: gohan client ha_interface show --output-format json 16f6433d-0864-4d24-809d-c1b8e878280c
{
    "ha_interface": {
        "admin_state_up": true,
        "available_be_bandwidth": 0,
        "available_ga_bandwidth": 0,
        "description": "",
        "gateway_instances_count": 0,
        "ha_router_id": "e16529c4-ffb8-4346-b850-af3c93564604",
        "id": "16f6433d-0864-4d24-809d-c1b8e878280c",
        "link_type": "downlink",
        "maximum_be_bandwidth": 0,
        "maximum_ga_bandwidth": 0,
        "name": "sample-ha-router-downlink",
        "primary_interface_id": "c2576120-00b0-461e-a2ae-f7bbff9465d0",
        "restricted_vlans": "0-1024,4094",
        "secondary_interface_id": "b9c7c1f4-1b90-4a7a-8161-34276bb2ed10",
        "status": "ACTIVE",
        "tenant_id": "c583ce78843344adbe5fd20f13620274",
        "vlan_ids_available": 3069,
        "vlan_pool_state": "//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAM="
    }
}

### Create Common Function Pool ###
name:[common_function_pool], id:[2d4a700d-bf94-4217-9a3c-4217a16c951f]
-----------------------------------------------------------------
http_request     http_response    response_time   method   code
-----------------------------------------------------------------
04:49:05.802385  04:49:05.924313  0.121928        POST     201
04:49:05.924996  04:49:06.005990  0.080994         GET     200
-----------------------------------------------------------------
Turn Around Time : 0.203605

[localhost] local: gohan client common_function_pool show --output-format json 2d4a700d-bf94-4217-9a3c-4217a16c951f
{
    "common_function_pool": {
        "common_function_pool_state": "AAD//w==",
        "description": "sample common function pool",
        "dnat_group_name": "DNAT-RULE",
        "dnat_pool_group_name": "DNAT-POOL",
        "downlink_interfaces": [
            "16f6433d-0864-4d24-809d-c1b8e878280c"
        ],
        "id": "2d4a700d-bf94-4217-9a3c-4217a16c951f",
        "link_local_cidr": "169.254.0.0/17",
        "link_local_netmask": 17,
        "logical_tunnel_interface_name": "lt-0/0/0",
        "name": "common_function_pool",
        "service_interface_name": "ms-0/2/0",
        "service_vrf_name": "SHARED-RESOURCE",
        "snapt_group_name": "SNAPT-RULE",
        "snapt_pool_group_name": "SNAPT-POOL",
        "tenant_id": "c583ce78843344adbe5fd20f13620274",
        "vrrp_config": [
            {
                "primary_ip": "169.254.1.251",
                "secondary_ip": "169.254.1.252",
                "vrid": 41
            },
            {
                "primary_ip": "169.254.1.253",
                "secondary_ip": "169.254.1.254",
                "vrid": 42
            }
        ],
        "vrrp_group_name": "IF-USER-VRRP-ACT"
    }
}

### Create Common Function ###
name:[common_function1], id:[637aa51a-f54f-4723-bc5f-9fb8942dfc8b]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
04:49:16.597522  04:49:16.780220  0.182698        POST     201    PENDING_CREATE
04:49:16.780817  04:49:16.877151  0.096334         GET     200    PENDING_CREATE
04:49:17.878518  04:49:17.951694  0.073176         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 1.354172

[localhost] local: gohan client common_function show --output-format json 637aa51a-f54f-4723-bc5f-9fb8942dfc8b
{
    "common_function": {
        "common_function_number": 1,
        "common_function_pool_id": "2d4a700d-bf94-4217-9a3c-4217a16c951f",
        "description": "",
        "ha_router_id": "e16529c4-ffb8-4346-b850-af3c93564604",
        "id": "637aa51a-f54f-4723-bc5f-9fb8942dfc8b",
        "link_local_ip_address": "169.254.1.227",
        "name": "common_function1",
        "orchestration_state": "SYNC_COMPLETE",
        "primary_vrrp_ip": "169.254.1.251",
        "secondary_vrrp_ip": "169.254.1.252",
        "shared_ip_address": "100.64.0.127",
        "status": "ACTIVE",
        "tenant_id": "c583ce78843344adbe5fd20f13620274",
        "vrid": 41
    }
}

### Create Common Function ###
name:[common_function2], id:[b7ff279d-a7ee-4714-b77c-bcd2f0e51996]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
04:49:28.528784  04:49:28.708642  0.179858        POST     201    PENDING_CREATE
04:49:28.708910  04:49:28.818948  0.110038         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 0.290164

[localhost] local: gohan client common_function show --output-format json b7ff279d-a7ee-4714-b77c-bcd2f0e51996
{
    "common_function": {
        "common_function_number": 2,
        "common_function_pool_id": "2d4a700d-bf94-4217-9a3c-4217a16c951f",
        "description": "",
        "ha_router_id": "e16529c4-ffb8-4346-b850-af3c93564604",
        "id": "b7ff279d-a7ee-4714-b77c-bcd2f0e51996",
        "link_local_ip_address": "169.254.1.228",
        "name": "common_function2",
        "orchestration_state": "SYNC_COMPLETE",
        "primary_vrrp_ip": "169.254.1.253",
        "secondary_vrrp_ip": "169.254.1.254",
        "shared_ip_address": "100.64.0.128",
        "status": "ACTIVE",
        "tenant_id": "c583ce78843344adbe5fd20f13620274",
        "vrid": 42
    }
}

### Create Nat Ip Pool ###
name:[sample-nat-ip-pool], id:[8403ebb4-d81a-486e-8ba0-75613b936e8e]
-----------------------------------------------------------------
http_request     http_response    response_time   method   code
-----------------------------------------------------------------
04:49:39.421259  04:49:39.585525  0.164266        POST     201
04:49:39.586737  04:49:39.677711  0.090974         GET     200
-----------------------------------------------------------------
Turn Around Time : 0.256452

[localhost] local: gohan client nat_ip_pool show --output-format json 8403ebb4-d81a-486e-8ba0-75613b936e8e
{
    "nat_ip_pool": {
        "common_function_pool_id": "2d4a700d-bf94-4217-9a3c-4217a16c951f",
        "description": "",
        "ha_router_id": "e16529c4-ffb8-4346-b850-af3c93564604",
        "id": "8403ebb4-d81a-486e-8ba0-75613b936e8e",
        "ip_allocation_state": "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB/8=",
        "ip_ranges": [
            {
                "end": "100.64.0.254",
                "start": "100.64.0.10"
            }
        ],
        "name": "sample-nat-ip-pool",
        "tenant_id": "c583ce78843344adbe5fd20f13620274"
    }
}

### Create Common Function Gateway ###
name:[T0011CF000], id:[f649736d-1920-41eb-96af-d4e4fe192d0e]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
04:49:50.238385  04:49:51.729258  1.490873        POST     201    PENDING_CREATE
04:49:51.730397  04:49:51.851085  0.120688         GET     200    PENDING_CREATE
04:49:52.852509  04:49:52.926839  0.074330         GET     200    PENDING_CREATE
04:49:53.928110  04:49:54.011462  0.083352         GET     200    PENDING_CREATE
04:49:55.012511  04:49:55.084970  0.072459         GET     200    PENDING_CREATE
04:49:56.086250  04:49:56.157476  0.071226         GET     200    PENDING_CREATE
04:49:57.158760  04:49:57.228512  0.069752         GET     200    PENDING_CREATE
04:49:58.229425  04:49:58.305253  0.075828         GET     200    PENDING_CREATE
04:49:59.306508  04:49:59.412955  0.106447         GET     200    PENDING_CREATE
04:50:00.414218  04:50:00.516309  0.102091         GET     200    PENDING_CREATE
04:50:01.517553  04:50:01.596056  0.078503         GET     200    PENDING_CREATE
04:50:02.596528  04:50:02.672411  0.075883         GET     200    PENDING_CREATE
04:50:03.673888  04:50:04.067748  0.393860         GET     200    PENDING_CREATE
04:50:05.069035  04:50:05.323708  0.254673         GET     200    PENDING_CREATE
04:50:06.324509  04:50:06.421270  0.096761         GET     200    PENDING_CREATE
04:50:07.421955  04:50:07.498185  0.076230         GET     200    PENDING_CREATE
04:50:08.499446  04:50:08.584097  0.084651         GET     200    PENDING_CREATE
04:50:09.584928  04:50:09.691416  0.106488         GET     200    PENDING_CREATE
04:50:10.692527  04:50:10.769115  0.076588         GET     200    PENDING_CREATE
04:50:11.770397  04:50:11.871072  0.100675         GET     200    PENDING_CREATE
04:50:12.872358  04:50:12.960863  0.088505         GET     200    PENDING_CREATE
04:50:13.962132  04:50:14.035528  0.073396         GET     200    PENDING_CREATE
04:50:15.036832  04:50:15.117162  0.080330         GET     200    PENDING_CREATE
04:50:16.118440  04:50:16.190628  0.072188         GET     200    PENDING_CREATE
04:50:17.191901  04:50:17.266052  0.074151         GET     200    PENDING_CREATE
04:50:18.267948  04:50:18.345056  0.077108         GET     200    PENDING_CREATE
04:50:19.346690  04:50:19.418625  0.071935         GET     200    PENDING_CREATE
04:50:20.419947  04:50:20.502680  0.082733         GET     200    PENDING_CREATE
04:50:21.503937  04:50:21.580680  0.076743         GET     200    PENDING_CREATE
04:50:22.581048  04:50:22.667343  0.086295         GET     200    PENDING_CREATE
04:50:23.668495  04:50:23.777358  0.108863         GET     200    PENDING_CREATE
04:50:24.779144  04:50:24.871391  0.092247         GET     200    PENDING_CREATE
04:50:25.872783  04:50:25.959415  0.086632         GET     200    PENDING_CREATE
04:50:26.960788  04:50:27.048828  0.088040         GET     200    PENDING_CREATE
04:50:28.049657  04:50:28.125102  0.075445         GET     200    PENDING_CREATE
04:50:29.126384  04:50:29.199699  0.073315         GET     200    PENDING_CREATE
04:50:30.200981  04:50:30.288179  0.087198         GET     200    PENDING_CREATE
04:50:31.289460  04:50:31.368338  0.078878         GET     200    PENDING_CREATE
04:50:32.369696  04:50:32.445959  0.076263         GET     200    PENDING_CREATE
04:50:33.447250  04:50:33.521510  0.074260         GET     200    PENDING_CREATE
04:50:34.522763  04:50:34.603023  0.080260         GET     200    PENDING_CREATE
04:50:35.604258  04:50:35.679107  0.074849         GET     200    PENDING_CREATE
04:50:36.679553  04:50:36.751721  0.072168         GET     200    PENDING_CREATE
04:50:37.752999  04:50:37.827896  0.074897         GET     200    PENDING_CREATE
04:50:38.828552  04:50:39.054752  0.226200         GET     200    PENDING_CREATE
04:50:40.056046  04:50:40.129548  0.073502         GET     200    PENDING_CREATE
04:50:41.130860  04:50:41.206207  0.075347         GET     200    PENDING_CREATE
04:50:42.207479  04:50:42.282886  0.075407         GET     200    PENDING_CREATE
04:50:43.284161  04:50:43.357614  0.073453         GET     200    PENDING_CREATE
04:50:44.358908  04:50:44.433313  0.074405         GET     200    PENDING_CREATE
04:50:45.433630  04:50:45.509695  0.076065         GET     200    PENDING_CREATE
04:50:46.511049  04:50:46.584335  0.073286         GET     200    PENDING_CREATE
04:50:47.585427  04:50:47.671751  0.086324         GET     200    PENDING_CREATE
04:50:48.673181  04:50:48.753737  0.080556         GET     200    PENDING_CREATE
04:50:49.755092  04:50:49.825431  0.070339         GET     200    PENDING_CREATE
04:50:50.826785  04:50:50.904354  0.077569         GET     200    PENDING_CREATE
04:50:51.905782  04:50:51.991138  0.085356         GET     200    PENDING_CREATE
04:50:52.992504  04:50:53.079365  0.086861         GET     200    PENDING_CREATE
04:50:54.080537  04:50:54.150939  0.070402         GET     200    PENDING_CREATE
04:50:55.151861  04:50:55.223058  0.071197         GET     200    PENDING_CREATE
04:50:56.224419  04:50:56.312481  0.088062         GET     200    PENDING_CREATE
04:50:57.313865  04:50:57.418098  0.104233         GET     200    PENDING_CREATE
04:50:58.419456  04:50:58.495219  0.075763         GET     200    PENDING_CREATE
04:50:59.496078  04:50:59.573137  0.077059         GET     200    PENDING_CREATE
04:51:00.575179  04:51:00.651040  0.075861         GET     200    PENDING_CREATE
04:51:01.652462  04:51:01.740021  0.087559         GET     200    PENDING_CREATE
04:51:02.740520  04:51:02.813153  0.072633         GET     200    PENDING_CREATE
04:51:03.814498  04:51:03.913493  0.098995         GET     200    PENDING_CREATE
04:51:04.915040  04:51:04.987887  0.072847         GET     200    PENDING_CREATE
04:51:05.989256  04:51:06.071522  0.082266         GET     200    PENDING_CREATE
04:51:07.072881  04:51:07.147860  0.074979         GET     200    PENDING_CREATE
04:51:08.148553  04:51:08.234698  0.086145         GET     200    PENDING_CREATE
04:51:09.236354  04:51:09.314949  0.078595         GET     200    PENDING_CREATE
04:51:10.316227  04:51:10.396486  0.080259         GET     200    PENDING_CREATE
04:51:11.397592  04:51:11.472184  0.074592         GET     200    PENDING_CREATE
04:51:12.474353  04:51:12.546882  0.072529         GET     200    PENDING_CREATE
04:51:13.548155  04:51:13.624866  0.076711         GET     200    PENDING_CREATE
04:51:14.626015  04:51:14.697713  0.071698         GET     200    PENDING_CREATE
04:51:15.698942  04:51:15.770837  0.071895         GET     200    PENDING_CREATE
04:51:16.772118  04:51:16.842352  0.070234         GET     200    PENDING_CREATE
04:51:17.843617  04:51:17.917946  0.074329         GET     200    PENDING_CREATE
04:51:18.919212  04:51:18.992531  0.073319         GET     200    PENDING_CREATE
04:51:19.993193  04:51:20.098285  0.105092         GET     200    PENDING_CREATE
04:51:21.099706  04:51:21.173304  0.073598         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 90.934919

[localhost] local: gohan client common_function_gateway show --output-format json f649736d-1920-41eb-96af-d4e4fe192d0e
{
    "common_function_gateway": {
        "common_function_pool_id": "2d4a700d-bf94-4217-9a3c-4217a16c951f",
        "common_functions": [
            {
                "common_function_id": "637aa51a-f54f-4723-bc5f-9fb8942dfc8b"
            },
            {
                "common_function_id": "b7ff279d-a7ee-4714-b77c-bcd2f0e51996"
            }
        ],
        "description": "",
        "downlink_interface_id": "16f6433d-0864-4d24-809d-c1b8e878280c",
        "id": "f649736d-1920-41eb-96af-d4e4fe192d0e",
        "logical_tunnel_unit_service": "11025",
        "logical_tunnel_unit_user": "1025",
        "name": "T0011CF000",
        "nat_ip": "100.64.0.10",
        "network_id": "fc8814a7-eb1e-4f59-8422-7de500e72782",
        "operational_state": "UP",
        "orchestration_state": "CREATE_COMPLETE",
        "primary_logical_interface_name": "ae0.1025",
        "secondary_logical_interface_name": "ae0.1025",
        "status": "ACTIVE",
        "subnet_id": "cf9356ae-b4e1-4a91-8193-089fdc12173d",
        "tenant_id": "c583ce78843344adbe5fd20f13620274",
        "vlan_id": "1025",
        "vrf_name": "vrf_gw_sample-ha-router-downlink_1025"
    }
}

#######################################################
### checking heat-stack (common_function_gateways) ####
#######################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/common_function_gateways/f649736d-1920-41eb-96af-d4e4fe192d0e
[localhost] local: heat stack-show common_function_gateway_f649736d-1920-41eb-96af-d4e4fe192d0e
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                                 |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                                    |
| creation_time         | 2018-04-09T04:49:59Z                                                                                                                                                                                  |
| description           | Common Function Gateway                                                                                                                                                                               |
| disable_rollback      | True                                                                                                                                                                                                  |
| id                    | 8ccc6c5d-7757-4605-b34b-665ef8858cce                                                                                                                                                                  |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/c583ce78843344adbe5fd20f13620274/stacks/common_function_gateway_f649736d-1920-41eb-96af-d4e4fe192d0e/8ccc6c5d-7757-4605-b34b-665ef8858cce |
| notification_topics   | []                                                                                                                                                                                                    |
| outputs               | [                                                                                                                                                                                                     |
|                       |   {                                                                                                                                                                                                   |
|                       |     "output_value": "cfb54c6f-43cf-4e35-aff8-e2c2ec8adc7e",                                                                                                                                           |
|                       |     "description": "Monitoring Target ID",                                                                                                                                                            |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                                              |
|                       |   },                                                                                                                                                                                                  |
|                       |   {                                                                                                                                                                                                   |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/cfb54c6f-43cf-4e35-aff8-e2c2ec8adc7e",                                                                  |
|                       |     "description": "Monitoring Process Link",                                                                                                                                                         |
|                       |     "output_key": "monitoring_link"                                                                                                                                                                   |
|                       |   }                                                                                                                                                                                                   |
|                       | ]                                                                                                                                                                                                     |
| parameters            | {                                                                                                                                                                                                     |
|                       |   "primary_device_ip": "10.79.5.185",                                                                                                                                                                 |
|                       |   "OS::stack_id": "8ccc6c5d-7757-4605-b34b-665ef8858cce",                                                                                                                                             |
|                       |   "OS::stack_name": "common_function_gateway_f649736d-1920-41eb-96af-d4e4fe192d0e",                                                                                                                   |
|                       |   "primary_device_logical_downlink_interface": "ae0.1025",                                                                                                                                            |
|                       |   "secondary_device_logical_downlink_interface": "ae0.1025",                                                                                                                                          |
|                       |   "secondary_device_port": "830",                                                                                                                                                                     |
|                       |   "secondary_device_password": "******",                                                                                                                                                              |
|                       |   "primary_device_password": "******",                                                                                                                                                                |
|                       |   "version": "1",                                                                                                                                                                                     |
|                       |   "primary_device_username": "esi",                                                                                                                                                                   |
|                       |   "primary_device_physical_downlink_interface": "ae0",                                                                                                                                                |
|                       |   "tenant_id": "c583ce78843344adbe5fd20f13620274",                                                                                                                                                    |
|                       |   "gohan_id": "f649736d-1920-41eb-96af-d4e4fe192d0e",                                                                                                                                                 |
|                       |   "primary_device_port": "830",                                                                                                                                                                       |
|                       |   "secondary_device_physical_downlink_interface": "ae0",                                                                                                                                              |
|                       |   "secondary_device_ip": "10.79.5.184",                                                                                                                                                               |
|                       |   "secondary_device_username": "esi"                                                                                                                                                                  |
|                       | }                                                                                                                                                                                                     |
| parent                | None                                                                                                                                                                                                  |
| stack_name            | common_function_gateway_f649736d-1920-41eb-96af-d4e4fe192d0e                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                                 |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                                       |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                                   |
| stack_user_project_id | c583ce78843344adbe5fd20f13620274                                                                                                                                                                      |
| template_description  | Common Function Gateway                                                                                                                                                                               |
| timeout_mins          | 60                                                                                                                                                                                                    |
| updated_time          | None                                                                                                                                                                                                  |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show common_function_gateway_f649736d-1920-41eb-96af-d4e4fe192d0e
description: 'Common Function Gateway

  '
heat_template_version: '2013-05-23'
outputs:
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [vrrp_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: vrrp_monitor}
parameters:
  gohan_id: {description: UUID of the Common Function Gateway, label: Gohan resource
      ID, type: string}
  primary_device_ip: {description: Ip address that will be used to establish ssh connection
      to the Primary Device., label: Ip address of the device., type: string}
  primary_device_logical_downlink_interface: {description: Name of the created logical
      downlink interface on the Primary device, label: Logical Interface name, type: string}
  primary_device_password: {description: Password of the user which will be used to
      log onto the Primary Device., hidden: true, label: Users password., type: string}
  primary_device_physical_downlink_interface: {description: Physical port on the Primary
      device on which the logical downlink port will be configured, label: Underlying
      physical interface, type: string}
  primary_device_port: {description: Port that will be used to establish ssh connection
      to the Primary Device., label: Port of the ssh connection., type: number}
  primary_device_username: {description: Name of the user which will be used to log
      onto the Primary Device., label: User name to log on to device., type: string}
  secondary_device_ip: {description: Ip address that will be used to establish ssh
      connection to the Secondary Device., label: Ip address of the device., type: string}
  secondary_device_logical_downlink_interface: {description: Name of the created logical
      downlink interface on the Secondary device, label: Logical Interface name, type: string}
  secondary_device_password: {description: Password of the user which will be used
      to log onto the Secondary Device., hidden: true, label: Users password., type: string}
  secondary_device_physical_downlink_interface: {description: Physical port on the
      Secondary device on which the logical downlink port will be configured, label: Underlying
      physical interface, type: string}
  secondary_device_port: {description: Port that will be used to establish ssh connection
      to the Secondary Device., label: Port of the ssh connection., type: number}
  secondary_device_username: {description: Name of the user which will be used to
      log onto the Secondary Device., label: User name to log on to device., type: string}
  tenant_id: {label: Tenant ID, type: string}
  version: {label: Config version, type: number}
resources:
  netconf_configure_primary:
    properties:
      configs:
      - config: 'nat-rules vrf_gw_sample-ha-router-downlink_1025-SNAPT;

          nat-rules vrf_gw_sample-ha-router-downlink_1025-DNAT;

          interface-service service-interface ms-0/2/0.1025;

          '
        path:
        - {config_type: tag, tag: services, xml_type: tag}
        - {config_type: named_tag, name: vrf_gw_sample-ha-router-downlink_1025, tag: service-set,
          xml_type: named_tag}
      - config: 'apply-groups SNAPT-POOL;

          address 100.64.0.10/32;

          '
        path:
        - {config_type: tag, tag: services, xml_type: tag}
        - {config_type: tag, tag: nat, xml_type: tag}
        - {config_type: named_tag, name: vrf_gw_sample-ha-router-downlink_1025-SNAPT-POOL,
          tag: pool, xml_type: named_tag}
      - config: 'apply-groups SNAPT-RULE;

          term source then translated source-pool vrf_gw_sample-ha-router-downlink_1025-SNAPT-POOL;

          '
        path:
        - {config_type: tag, tag: services, xml_type: tag}
        - {config_type: tag, tag: nat, xml_type: tag}
        - {config_type: named_tag, name: vrf_gw_sample-ha-router-downlink_1025-SNAPT,
          tag: rule, xml_type: named_tag}
      - config: 'apply-groups DNAT-POOL-1;

          '
        path:
        - {config_type: tag, tag: services, xml_type: tag}
        - {config_type: tag, tag: nat, xml_type: tag}
        - {config_type: named_tag, name: vrf_gw_sample-ha-router-downlink_1025-DNAT-POOL-1,
          tag: pool, xml_type: named_tag}
      - config: 'apply-groups DNAT-POOL-2;

          '
        path:
        - {config_type: tag, tag: services, xml_type: tag}
        - {config_type: tag, tag: nat, xml_type: tag}
        - {config_type: named_tag, name: vrf_gw_sample-ha-router-downlink_1025-DNAT-POOL-2,
          tag: pool, xml_type: named_tag}
      - config: 'apply-groups DNAT-RULE;


          term 1 then translated destination-pool vrf_gw_sample-ha-router-downlink_1025-DNAT-POOL-1;


          term 2 then translated destination-pool vrf_gw_sample-ha-router-downlink_1025-DNAT-POOL-2;

          '
        path:
        - {config_type: tag, tag: services, xml_type: tag}
        - {config_type: tag, tag: nat, xml_type: tag}
        - {config_type: named_tag, name: vrf_gw_sample-ha-router-downlink_1025-DNAT,
          tag: rule, xml_type: named_tag}
      - config: 'peer-unit 11025;

          family inet service input service-set vrf_gw_sample-ha-router-downlink_1025;

          family inet service output service-set vrf_gw_sample-ha-router-downlink_1025;

          '
        path:
        - {config_type: tag, tag: interfaces, xml_type: tag}
        - {config_type: name, name: lt-0/0/0, tag: interface, xml_type: named_tag}
        - {config_type: named_tag, name: 1025, tag: unit, xml_type: named_tag}
      - config: 'peer-unit 1025;

          '
        path:
        - {config_type: tag, tag: interfaces, xml_type: tag}
        - {config_type: name, name: lt-0/0/0, tag: interface, xml_type: named_tag}
        - {config_type: named_tag, name: 11025, tag: unit, xml_type: named_tag}
      - config: 'family inet;

          '
        path:
        - {config_type: tag, tag: interfaces, xml_type: tag}
        - {config_type: name, name: ms-0/2/0, tag: interface, xml_type: named_tag}
        - {config_type: named_tag, name: 1025, tag: unit, xml_type: named_tag}
      - config: 'apply-groups IF-USER-VRRP-ACT;

          description vrf_gw_sample-ha-router-downlink_1025;

          vlan-id 1025;

          family inet service input service-set vrf_gw_sample-ha-router-downlink_1025;

          family inet service output service-set vrf_gw_sample-ha-router-downlink_1025;

          '
        path:
        - {config_type: tag, tag: interfaces, xml_type: tag}
        - config_type: name
          name: {get_param: primary_device_physical_downlink_interface}
          tag: interface
          xml_type: named_tag
        - {config_type: named_tag, name: 1025, tag: unit, xml_type: named_tag}
      - config: ''
        path:
        - {config_type: tag, tag: routing-instances, xml_type: tag}
        - {config_type: name, name: SHARED-RESOURCE, tag: instance, xml_type: named_tag}
        - {config_type: named_tag, name: lt-0/0/0.11025, tag: interface, xml_type: named_tag}
      - config: next-hop lt-0/0/0.11025;
        path:
        - {config_type: tag, tag: routing-instances, xml_type: tag}
        - {config_type: name, name: SHARED-RESOURCE, tag: instance, xml_type: named_tag}
        - {config_type: tag, tag: routing-options, xml_type: tag}
        - {config_type: tag, tag: static, xml_type: tag}
        - {config_type: named_tag, name: 100.64.0.10/32, tag: route, xml_type: named_tag}
      - config:
          str_replace:
            params:
              $DOWNLINK_INTERFACE: {get_param: primary_device_logical_downlink_interface}
            template: 'instance-type virtual-router;

              interface lt-0/0/0.1025;

              interface ms-0/2/0.1025;

              interface $DOWNLINK_INTERFACE;

              routing-options static route 0.0.0.0/0 next-hop lt-0/0/0.1025;

              '
        path:
        - {config_type: tag, tag: routing-instances, xml_type: tag}
        - {config_type: name, name: vrf_gw_sample-ha-router-downlink_1025, tag: instance,
          xml_type: named_tag}
      device_ip: {get_param: primary_device_ip}
      lock_timeout: 3000
      password: {get_param: primary_device_password}
      port: {get_param: primary_device_port}
      username: {get_param: primary_device_username}
    type: OS::Contrail::NetconfNamedConfigs
  netconf_configure_secondary:
    depends_on: netconf_configure_primary
    properties:
      configs:
      - config: 'nat-rules vrf_gw_sample-ha-router-downlink_1025-SNAPT;

          nat-rules vrf_gw_sample-ha-router-downlink_1025-DNAT;

          interface-service service-interface ms-0/2/0.1025;

          '
        path:
        - {config_type: tag, tag: services, xml_type: tag}
        - {config_type: named_tag, name: vrf_gw_sample-ha-router-downlink_1025, tag: service-set,
          xml_type: named_tag}
      - config: 'apply-groups SNAPT-POOL;

          address 100.64.0.10/32;

          '
        path:
        - {config_type: tag, tag: services, xml_type: tag}
        - {config_type: tag, tag: nat, xml_type: tag}
        - {config_type: named_tag, name: vrf_gw_sample-ha-router-downlink_1025-SNAPT-POOL,
          tag: pool, xml_type: named_tag}
      - config: 'apply-groups SNAPT-RULE;

          term source then translated source-pool vrf_gw_sample-ha-router-downlink_1025-SNAPT-POOL;

          '
        path:
        - {config_type: tag, tag: services, xml_type: tag}
        - {config_type: tag, tag: nat, xml_type: tag}
        - {config_type: named_tag, name: vrf_gw_sample-ha-router-downlink_1025-SNAPT,
          tag: rule, xml_type: named_tag}
      - config: 'apply-groups DNAT-POOL-1;

          '
        path:
        - {config_type: tag, tag: services, xml_type: tag}
        - {config_type: tag, tag: nat, xml_type: tag}
        - {config_type: named_tag, name: vrf_gw_sample-ha-router-downlink_1025-DNAT-POOL-1,
          tag: pool, xml_type: named_tag}
      - config: 'apply-groups DNAT-POOL-2;

          '
        path:
        - {config_type: tag, tag: services, xml_type: tag}
        - {config_type: tag, tag: nat, xml_type: tag}
        - {config_type: named_tag, name: vrf_gw_sample-ha-router-downlink_1025-DNAT-POOL-2,
          tag: pool, xml_type: named_tag}
      - config: 'apply-groups DNAT-RULE;


          term 1 then translated destination-pool vrf_gw_sample-ha-router-downlink_1025-DNAT-POOL-1;


          term 2 then translated destination-pool vrf_gw_sample-ha-router-downlink_1025-DNAT-POOL-2;

          '
        path:
        - {config_type: tag, tag: services, xml_type: tag}
        - {config_type: tag, tag: nat, xml_type: tag}
        - {config_type: named_tag, name: vrf_gw_sample-ha-router-downlink_1025-DNAT,
          tag: rule, xml_type: named_tag}
      - config: 'peer-unit 11025;

          family inet service input service-set vrf_gw_sample-ha-router-downlink_1025;

          family inet service output service-set vrf_gw_sample-ha-router-downlink_1025;

          '
        path:
        - {config_type: tag, tag: interfaces, xml_type: tag}
        - {config_type: name, name: lt-0/0/0, tag: interface, xml_type: named_tag}
        - {config_type: named_tag, name: 1025, tag: unit, xml_type: named_tag}
      - config: 'peer-unit 1025;

          '
        path:
        - {config_type: tag, tag: interfaces, xml_type: tag}
        - {config_type: name, name: lt-0/0/0, tag: interface, xml_type: named_tag}
        - {config_type: named_tag, name: 11025, tag: unit, xml_type: named_tag}
      - config: 'family inet;

          '
        path:
        - {config_type: tag, tag: interfaces, xml_type: tag}
        - {config_type: name, name: ms-0/2/0, tag: interface, xml_type: named_tag}
        - {config_type: named_tag, name: 1025, tag: unit, xml_type: named_tag}
      - config: 'apply-groups IF-USER-VRRP-ACT;

          description vrf_gw_sample-ha-router-downlink_1025;

          vlan-id 1025;

          family inet service input service-set vrf_gw_sample-ha-router-downlink_1025;

          family inet service output service-set vrf_gw_sample-ha-router-downlink_1025;

          '
        path:
        - {config_type: tag, tag: interfaces, xml_type: tag}
        - config_type: name
          name: {get_param: secondary_device_physical_downlink_interface}
          tag: interface
          xml_type: named_tag
        - {config_type: named_tag, name: 1025, tag: unit, xml_type: named_tag}
      - config: ''
        path:
        - {config_type: tag, tag: routing-instances, xml_type: tag}
        - {config_type: name, name: SHARED-RESOURCE, tag: instance, xml_type: named_tag}
        - {config_type: named_tag, name: lt-0/0/0.11025, tag: interface, xml_type: named_tag}
      - config: next-hop lt-0/0/0.11025;
        path:
        - {config_type: tag, tag: routing-instances, xml_type: tag}
        - {config_type: name, name: SHARED-RESOURCE, tag: instance, xml_type: named_tag}
        - {config_type: tag, tag: routing-options, xml_type: tag}
        - {config_type: tag, tag: static, xml_type: tag}
        - {config_type: named_tag, name: 100.64.0.10/32, tag: route, xml_type: named_tag}
      - config:
          str_replace:
            params:
              $DOWNLINK_INTERFACE: {get_param: secondary_device_logical_downlink_interface}
            template: 'instance-type virtual-router;

              interface lt-0/0/0.1025;

              interface ms-0/2/0.1025;

              interface $DOWNLINK_INTERFACE;

              routing-options static route 0.0.0.0/0 next-hop lt-0/0/0.1025;

              '
        path:
        - {config_type: tag, tag: routing-instances, xml_type: tag}
        - {config_type: name, name: vrf_gw_sample-ha-router-downlink_1025, tag: instance,
          xml_type: named_tag}
      device_ip: {get_param: secondary_device_ip}
      lock_timeout: 3000
      password: {get_param: secondary_device_password}
      port: {get_param: secondary_device_port}
      username: {get_param: secondary_device_username}
    type: OS::Contrail::NetconfNamedConfigs
  vrrp_monitor:
    depends_on: netconf_configure_secondary
    properties:
      field_name: status
      properties:
        primary:
          host: {get_param: primary_device_ip}
          interface: {get_param: primary_device_logical_downlink_interface}
          login: {get_param: primary_device_username}
          password: {get_param: primary_device_password}
          port: {get_param: primary_device_port}
        secondary:
          host: {get_param: secondary_device_ip}
          interface: {get_param: secondary_device_logical_downlink_interface}
          login: {get_param: secondary_device_username}
          password: {get_param: secondary_device_password}
          port: {get_param: secondary_device_port}
        vrid: [41, 42]
      resource_id: {get_param: gohan_id}
      resource_type: common_function_gateways
      syncer_properties:
        etcd:
          hold_options:
            positive_status: {primary_vrid1: MASTER, primary_vrid2: MASTER, secondary_vrid1: BACKUP,
              secondary_vrid2: BACKUP}
            time_seconds: 360
          status: {key: status}
      tenant_id: {get_param: tenant_id}
      type: vrrp_pool
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget

[localhost] local: gohan client network list --output-format json
[localhost] local: gohan client network show --output-format json fc8814a7-eb1e-4f59-8422-7de500e72782
{
    "network": {
        "admin_state_up": true,
        "description": "",
        "id": "fc8814a7-eb1e-4f59-8422-7de500e72782",
        "name": "common_function_gw_access_f649736d-1920-41eb-96af-d4e4fe192d0e",
        "orchestration_state": "CREATE_COMPLETE",
        "plane": "data",
        "shared": false,
        "status": "ACTIVE",
        "subnets": [
            "cf9356ae-b4e1-4a91-8193-089fdc12173d"
        ],
        "tags": {},
        "tenant_id": "c583ce78843344adbe5fd20f13620274"
    }
}

#######################################
### checking heat-stack (networks) ####
#######################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/networks/fc8814a7-eb1e-4f59-8422-7de500e72782
[localhost] local: heat stack-show network_fc8814a7-eb1e-4f59-8422-7de500e72782
+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                 |
+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                    |
| creation_time         | 2018-04-09T04:49:52Z                                                                                                                                                                  |
| description           | Network template                                                                                                                                                                      |
| disable_rollback      | True                                                                                                                                                                                  |
| id                    | e2574663-12a4-4845-b95b-01cf7df978b9                                                                                                                                                  |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/c583ce78843344adbe5fd20f13620274/stacks/network_fc8814a7-eb1e-4f59-8422-7de500e72782/e2574663-12a4-4845-b95b-01cf7df978b9 |
| notification_topics   | []                                                                                                                                                                                    |
| outputs               | [                                                                                                                                                                                     |
|                       |   {                                                                                                                                                                                   |
|                       |     "output_value": [],                                                                                                                                                               |
|                       |     "description": "The name of the virtual network.",                                                                                                                                |
|                       |     "output_key": "route_targets"                                                                                                                                                     |
|                       |   },                                                                                                                                                                                  |
|                       |   {                                                                                                                                                                                   |
|                       |     "output_value": "default-domain:usertenant:fc8814a7-eb1e-4f59-8422-7de500e72782",                                                                                                 |
|                       |     "description": "The FQ name of the virtual network.",                                                                                                                             |
|                       |     "output_key": "fq_name"                                                                                                                                                           |
|                       |   },                                                                                                                                                                                  |
|                       |   {                                                                                                                                                                                   |
|                       |     "output_value": "fc8814a7-eb1e-4f59-8422-7de500e72782",                                                                                                                           |
|                       |     "description": "A unique id for the virtual network.",                                                                                                                            |
|                       |     "output_key": "id"                                                                                                                                                                |
|                       |   },                                                                                                                                                                                  |
|                       |   {                                                                                                                                                                                   |
|                       |     "output_value": "fc8814a7-eb1e-4f59-8422-7de500e72782",                                                                                                                           |
|                       |     "description": "The name of the virtual network.",                                                                                                                                |
|                       |     "output_key": "name"                                                                                                                                                              |
|                       |   }                                                                                                                                                                                   |
|                       | ]                                                                                                                                                                                     |
| parameters            | {                                                                                                                                                                                     |
|                       |   "forwarding_mode": "l2_l3",                                                                                                                                                         |
|                       |   "allow_transit": "False",                                                                                                                                                           |
|                       |   "name": "fc8814a7-eb1e-4f59-8422-7de500e72782",                                                                                                                                     |
|                       |   "OS::stack_name": "network_fc8814a7-eb1e-4f59-8422-7de500e72782",                                                                                                                   |
|                       |   "admin_state_up": "True",                                                                                                                                                           |
|                       |   "OS::stack_id": "e2574663-12a4-4845-b95b-01cf7df978b9",                                                                                                                             |
|                       |   "external": "True",                                                                                                                                                                 |
|                       |   "shared": "False",                                                                                                                                                                  |
|                       |   "route_targets": "",                                                                                                                                                                |
|                       |   "uuid": "fc8814a7-eb1e-4f59-8422-7de500e72782"                                                                                                                                      |
|                       | }                                                                                                                                                                                     |
| parent                | None                                                                                                                                                                                  |
| stack_name            | network_fc8814a7-eb1e-4f59-8422-7de500e72782                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                 |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                       |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                   |
| stack_user_project_id | c583ce78843344adbe5fd20f13620274                                                                                                                                                      |
| template_description  | Network template                                                                                                                                                                      |
| timeout_mins          | 3                                                                                                                                                                                     |
| updated_time          | None                                                                                                                                                                                  |
+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show network_fc8814a7-eb1e-4f59-8422-7de500e72782
description: 'Network template

  '
heat_template_version: '2013-05-23'
outputs:
  fq_name:
    description: The FQ name of the virtual network.
    value:
      get_attr: [network, fq_name]
  id:
    description: A unique id for the virtual network.
    value: {get_resource: network}
  name:
    description: The name of the virtual network.
    value:
      get_attr: [network, name]
  route_targets:
    description: The name of the virtual network.
    value:
      get_attr: [network, route_targets]
parameters:
  admin_state_up: {default: true, label: Admin state up, type: boolean}
  allow_transit: {default: false, label: Allow Transit, type: boolean}
  external: {default: true, label: External Network, type: boolean}
  forwarding_mode: {default: l2_l3, description: Forwarding Mode., label: Forwarding
      Mode, type: string}
  name: {description: Name of the virtual network that will be created., label: Virtual
      Network Name, type: string}
  route_targets:
    default: []
    label: Route Targets list
    type: comma_delimited_list
  shared: {default: false, label: Shared Network, type: boolean}
  uuid: {default: '', description: UUID of the virtual network that will be created.,
    label: Virtual Network UUID, type: string}
resources:
  network:
    properties:
      admin_state_up: {get_param: admin_state_up}
      forwarding_mode: {get_param: forwarding_mode}
      name: {get_param: name}
      route_targets: {get_param: route_targets}
      shared: {get_param: shared}
      uuid: {get_param: uuid}
    type: OS::Contrail::VirtualNetwork

[localhost] local: gohan client network show --output-format json fc8814a7-eb1e-4f59-8422-7de500e72782
[localhost] local: gohan client subnet show --output-format json cf9356ae-b4e1-4a91-8193-089fdc12173d
{
    "subnet": {
        "allocation_pools": [
            {
                "end": "169.254.127.254",
                "start": "169.254.0.2"
            }
        ],
        "cidr": "169.254.0.0/17",
        "description": "",
        "dhcp_server_address": "169.254.0.2",
        "dns_nameservers": [],
        "enable_dhcp": true,
        "gateway_ip": null,
        "host_routes": [],
        "id": "cf9356ae-b4e1-4a91-8193-089fdc12173d",
        "ip_version": 4,
        "ipv6_address_mode": null,
        "ipv6_ra_mode": null,
        "name": "common_function_gw_access_subnet_f649736d-1920-41eb-96af-d4e4fe192d0e",
        "network_id": "fc8814a7-eb1e-4f59-8422-7de500e72782",
        "ntp_servers": [],
        "orchestration_state": "CREATE_COMPLETE",
        "status": "ACTIVE",
        "tags": {},
        "tenant_id": "c583ce78843344adbe5fd20f13620274"
    }
}

[localhost] local: gohan client port list --output-format json
[localhost] local: gohan client port show --output-format json 33876f91-b5c9-43aa-a0e0-166e3def9133
{
    "port": {
        "admin_state_up": true,
        "allowed_address_pairs": [],
        "attached": false,
        "binding:vif_type": "vrouter",
        "description": "DHCP Server Port",
        "device_id": "cf9356ae-b4e1-4a91-8193-089fdc12173d",
        "device_owner": "network:dhcp",
        "ese_logical_port_id": null,
        "fake_delete": false,
        "fixed_ips": [
            {
                "ip_address": "169.254.0.2",
                "subnet_id": "cf9356ae-b4e1-4a91-8193-089fdc12173d"
            }
        ],
        "id": "33876f91-b5c9-43aa-a0e0-166e3def9133",
        "mac_address": "00:00:5e:00:01:00",
        "managed_by_service": false,
        "name": "dhcp-server-port",
        "network_id": "fc8814a7-eb1e-4f59-8422-7de500e72782",
        "operational_state": "",
        "orchestration_state": "SYNC_COMPLETE",
        "security_groups": [],
        "segmentation_id": null,
        "segmentation_type": null,
        "status": "ACTIVE",
        "tags": {},
        "tenant_id": "c583ce78843344adbe5fd20f13620274"
    }
}

######################################
### checking heat-stack (subnets) ####
######################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/subnets/cf9356ae-b4e1-4a91-8193-089fdc12173d
[localhost] local: heat stack-show subnet_cf9356ae-b4e1-4a91-8193-089fdc12173d
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                |
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                   |
| creation_time         | 2018-04-09T04:49:55Z                                                                                                                                                                 |
| description           | Subnet template                                                                                                                                                                      |
| disable_rollback      | True                                                                                                                                                                                 |
| id                    | 24114c92-7b42-4bad-8d3b-bc1d88ffdd3b                                                                                                                                                 |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/c583ce78843344adbe5fd20f13620274/stacks/subnet_cf9356ae-b4e1-4a91-8193-089fdc12173d/24114c92-7b42-4bad-8d3b-bc1d88ffdd3b |
| notification_topics   | []                                                                                                                                                                                   |
| outputs               | [                                                                                                                                                                                    |
|                       |   {                                                                                                                                                                                  |
|                       |     "output_value": "169.254.0.0/17",                                                                                                                                                |
|                       |     "description": "IP prefix of local subnet.",                                                                                                                                     |
|                       |     "output_key": "ip_prefix"                                                                                                                                                        |
|                       |   },                                                                                                                                                                                 |
|                       |   {                                                                                                                                                                                  |
|                       |     "output_value": "cf9356ae-b4e1-4a91-8193-089fdc12173d",                                                                                                                          |
|                       |     "description": "The name of the local subnet.",                                                                                                                                  |
|                       |     "output_key": "name"                                                                                                                                                             |
|                       |   },                                                                                                                                                                                 |
|                       |   {                                                                                                                                                                                  |
|                       |     "output_value": "0.0.0.0",                                                                                                                                                       |
|                       |     "description": "Default gateway of local subnet.",                                                                                                                               |
|                       |     "output_key": "default_gateway"                                                                                                                                                  |
|                       |   },                                                                                                                                                                                 |
|                       |   {                                                                                                                                                                                  |
|                       |     "output_value": "fc8814a7-eb1e-4f59-8422-7de500e72782",                                                                                                                          |
|                       |     "description": "A unique id for the network.",                                                                                                                                   |
|                       |     "output_key": "network_id"                                                                                                                                                       |
|                       |   },                                                                                                                                                                                 |
|                       |   {                                                                                                                                                                                  |
|                       |     "output_value": "5a79909b-2bf3-4e26-8a9c-0bf6bb175457",                                                                                                                          |
|                       |     "description": "IPAM this local subnet uses.",                                                                                                                                   |
|                       |     "output_key": "ipam"                                                                                                                                                             |
|                       |   },                                                                                                                                                                                 |
|                       |   {                                                                                                                                                                                  |
|                       |     "output_value": "8f52422a-7115-4304-99cf-fc021562c352",                                                                                                                          |
|                       |     "description": "A unique id for the local subnet.",                                                                                                                              |
|                       |     "output_key": "id"                                                                                                                                                               |
|                       |   }                                                                                                                                                                                  |
|                       | ]                                                                                                                                                                                    |
| parameters            | {                                                                                                                                                                                    |
|                       |   "OS::stack_name": "subnet_cf9356ae-b4e1-4a91-8193-089fdc12173d",                                                                                                                   |
|                       |   "enable_dhcp": "True",                                                                                                                                                             |
|                       |   "network_id": "fc8814a7-eb1e-4f59-8422-7de500e72782",                                                                                                                              |
|                       |   "ipam": "default-domain:default-project:default-network-ipam",                                                                                                                     |
|                       |   "dns_nameservers": "",                                                                                                                                                             |
|                       |   "dhcp_server_address": "169.254.0.2",                                                                                                                                              |
|                       |   "OS::stack_id": "24114c92-7b42-4bad-8d3b-bc1d88ffdd3b",                                                                                                                            |
|                       |   "ntp_servers": "",                                                                                                                                                                 |
|                       |   "allocation_pools": "[{u'start': u'169.254.0.2', u'end': u'169.254.127.254'}]",                                                                                                    |
|                       |   "gateway_ip": "0.0.0.0",                                                                                                                                                           |
|                       |   "host_routes": "[]",                                                                                                                                                               |
|                       |   "cidr": "169.254.0.0/17",                                                                                                                                                          |
|                       |   "name": "cf9356ae-b4e1-4a91-8193-089fdc12173d"                                                                                                                                     |
|                       | }                                                                                                                                                                                    |
| parent                | None                                                                                                                                                                                 |
| stack_name            | subnet_cf9356ae-b4e1-4a91-8193-089fdc12173d                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                      |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                  |
| stack_user_project_id | c583ce78843344adbe5fd20f13620274                                                                                                                                                     |
| template_description  | Subnet template                                                                                                                                                                      |
| timeout_mins          | 3                                                                                                                                                                                    |
| updated_time          | None                                                                                                                                                                                 |
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show subnet_cf9356ae-b4e1-4a91-8193-089fdc12173d
description: 'Subnet template

  '
heat_template_version: '2013-05-23'
outputs:
  default_gateway:
    description: Default gateway of local subnet.
    value:
      get_attr: [subnet, default_gateway]
  id:
    description: A unique id for the local subnet.
    value: {get_resource: subnet}
  ip_prefix:
    description: IP prefix of local subnet.
    value:
      get_attr: [subnet, ip_prefix]
  ipam:
    description: IPAM this local subnet uses.
    value:
      get_attr: [subnet, ipam]
  name:
    description: The name of the local subnet.
    value:
      get_attr: [subnet, name]
  network_id:
    description: A unique id for the network.
    value:
      get_attr: [subnet, network_id]
parameters:
  allocation_pools:
    default: []
    description: Allocation Pools
    label: Allocation Pools
    type: string
  cidr: {description: IP prefix of the local subnet that will be created., label: Local
      Subnet IP prefix, type: string}
  dhcp_server_address: {default: 0.0.0.0, description: DHCP Server address, label: DHCP
      Server address, type: string}
  dns_nameservers:
    default: []
    description: DNS Nameservers List
    label: DNS Nameservers List
    type: comma_delimited_list
  enable_dhcp: {default: true, description: Enable DHCP, label: Enable DHCP, type: boolean}
  gateway_ip: {default: 0.0.0.0, description: Default gateway for the local subnet
      that will be created., label: Default Gateway, type: string}
  host_routes:
    default: []
    description: Host Routes
    label: Host Routes
    type: json
  ipam: {default: '', description: IPAM for the local subnet that will be created.,
    label: IP Address Management, type: string}
  name: {description: Name of the local subnet that will be created., label: Local
      Subnet Name, type: string}
  network_id: {description: ID of the network for which subnet will be created., label: Network
      ID, type: string}
  ntp_servers:
    default: []
    description: NTP Nameservers List
    label: NTP Nameservers List
    type: comma_delimited_list
resources:
  subnet:
    properties:
      allocation_pools: {get_param: allocation_pools}
      default_gateway: {get_param: gateway_ip}
      dns_nameservers: {get_param: dns_nameservers}
      dns_server_address: {get_param: dhcp_server_address}
      enable_dhcp: {get_param: enable_dhcp}
      gateway_is_vrouter: false
      host_routes: {get_param: host_routes}
      ip_prefix: {get_param: cidr}
      ipam: {get_param: ipam}
      name: {get_param: name}
      network_id: {get_param: network_id}
      ntp_servers: {get_param: ntp_servers}
    type: OS::Contrail::VnSubnet

[localhost] local: gohan client ese_logical_port list --output-format json
[localhost] local: gohan client ese_logical_port show --output-format json be66c7e0-b222-4e76-bf81-af75e8cf1824
{
    "ese_logical_port": {
        "common_function_gateway_id": "f649736d-1920-41eb-96af-d4e4fe192d0e",
        "connected_resource": "common_function_gateway",
        "description": "ESE Logical port for Port f84496b5-dc56-4727-87b1-aa06e2471737",
        "ese_physical_port_id": "9451c9ca-289d-42ba-846d-359c448e910c",
        "gw_interface_id": null,
        "id": "be66c7e0-b222-4e76-bf81-af75e8cf1824",
        "name": "xe-0/0/3.1025",
        "network_id": "fc8814a7-eb1e-4f59-8422-7de500e72782",
        "operational_state": "UP",
        "orchestration_state": "CREATE_COMPLETE",
        "port_ids": [
            "f84496b5-dc56-4727-87b1-aa06e2471737"
        ],
        "status": "ACTIVE",
        "tags": {},
        "tenant_id": "c583ce78843344adbe5fd20f13620274",
        "type": "L2",
        "vlan_id": 1025
    }
}

################################################
### checking heat-stack (ese_logical_ports) ####
################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/ese_logical_ports/be66c7e0-b222-4e76-bf81-af75e8cf1824
[localhost] local: heat stack-show ese_logical_port_be66c7e0-b222-4e76-bf81-af75e8cf1824
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                          |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                             |
| creation_time         | 2018-04-09T04:50:06Z                                                                                                                                                                           |
| description           | Logical port template                                                                                                                                                                          |
| disable_rollback      | True                                                                                                                                                                                           |
| id                    | af4cb4c8-1af6-427f-9119-4b001b7e8d73                                                                                                                                                           |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/c583ce78843344adbe5fd20f13620274/stacks/ese_logical_port_be66c7e0-b222-4e76-bf81-af75e8cf1824/af4cb4c8-1af6-427f-9119-4b001b7e8d73 |
| notification_topics   | []                                                                                                                                                                                             |
| outputs               | [                                                                                                                                                                                              |
|                       |   {                                                                                                                                                                                            |
|                       |     "output_value": "bdc2f00e-073d-49d6-ac27-43782568b081",                                                                                                                                    |
|                       |     "description": "Monitoring Target ID",                                                                                                                                                     |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                                       |
|                       |   },                                                                                                                                                                                           |
|                       |   {                                                                                                                                                                                            |
|                       |     "output_value": "46b0cd68-d0fb-4d72-9def-830164f9e215",                                                                                                                                    |
|                       |     "description": "A unique id for the logical interface",                                                                                                                                    |
|                       |     "output_key": "id"                                                                                                                                                                         |
|                       |   },                                                                                                                                                                                           |
|                       |   {                                                                                                                                                                                            |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/bdc2f00e-073d-49d6-ac27-43782568b081",                                                           |
|                       |     "description": "Monitoring Process Link",                                                                                                                                                  |
|                       |     "output_key": "monitoring_link"                                                                                                                                                            |
|                       |   },                                                                                                                                                                                           |
|                       |   {                                                                                                                                                                                            |
|                       |     "output_value": "xe-0/0/38.0",                                                                                                                                                             |
|                       |     "description": "The name of the logical interface.",                                                                                                                                       |
|                       |     "output_key": "name"                                                                                                                                                                       |
|                       |   }                                                                                                                                                                                            |
|                       | ]                                                                                                                                                                                              |
| parameters            | {                                                                                                                                                                                              |
|                       |   "logical_port_type": "L2",                                                                                                                                                                   |
|                       |   "logical_port_vlan_id": "1025",                                                                                                                                                              |
|                       |   "OS::stack_name": "ese_logical_port_be66c7e0-b222-4e76-bf81-af75e8cf1824",                                                                                                                   |
|                       |   "virtual_machine_interface_ids": "f68d0924-ef20-4c1b-ac45-0e6b879af5e7",                                                                                                                     |
|                       |   "device_ip": "10.161.0.34",                                                                                                                                                                  |
|                       |   "OS::stack_id": "af4cb4c8-1af6-427f-9119-4b001b7e8d73",                                                                                                                                      |
|                       |   "version": "1",                                                                                                                                                                              |
|                       |   "tenant_id": "c583ce78843344adbe5fd20f13620274",                                                                                                                                             |
|                       |   "logical_port_name": "xe-0/0/3.1025",                                                                                                                                                        |
|                       |   "gohan_id": "be66c7e0-b222-4e76-bf81-af75e8cf1824",                                                                                                                                          |
|                       |   "physical_port_id": "06bfe521-07f0-4931-9f8c-318c3ad8114e"                                                                                                                                   |
|                       | }                                                                                                                                                                                              |
| parent                | None                                                                                                                                                                                           |
| stack_name            | ese_logical_port_be66c7e0-b222-4e76-bf81-af75e8cf1824                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                          |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                                |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                            |
| stack_user_project_id | c583ce78843344adbe5fd20f13620274                                                                                                                                                               |
| template_description  | Logical port template                                                                                                                                                                          |
| timeout_mins          | 6                                                                                                                                                                                              |
| updated_time          | None                                                                                                                                                                                           |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show ese_logical_port_be66c7e0-b222-4e76-bf81-af75e8cf1824
description: 'Logical port template

  '
heat_template_version: '2013-05-23'
outputs:
  id:
    description: A unique id for the logical interface
    value: {get_resource: logical_interface}
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [interface_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: interface_monitor}
  name:
    description: The name of the logical interface.
    value:
      get_attr: [logical_interface, name]
parameters:
  device_ip: {description: Device IP Address., label: Device IP Address, type: string}
  gohan_id: {description: UUID of the ESE Physical Port, label: Gohan resource ID,
    type: string}
  logical_port_name: {description: Name of the logical port., label: Logical Port
      Name, type: string}
  logical_port_type: {description: Type of the logical port., label: Logical Port
      Type, type: string}
  logical_port_vlan_id: {default: 0, description: VLAN id to use for logical port
      creation., label: VLAN id for Logical Port, type: number}
  physical_port_id: {description: A unique id for the Physical Interface., label: Physical
      Interface ID, type: string}
  tenant_id: {label: Tenant ID, type: string}
  version: {label: Config version, type: number}
  virtual_machine_interface_ids: {description: Virtual Machine Interface ID., label: Virtual
      Machine Interface ID, type: comma_delimited_list}
resources:
  interface_monitor:
    depends_on: logical_interface
    properties:
      field_name: logical_port
      properties:
        community_name: ESE_NODE_COMMUNITY
        device_ip: {get_param: device_ip}
        if_name: {get_param: logical_port_name}
      resource_id: {get_param: gohan_id}
      resource_type: ese_logical_ports
      syncer_properties:
        etcd:
          status: {key: logical_port}
        tsdb:
          traffic.in:
            metric: traffic.bytes
            tags:
            - direction: in
              port_id: f84496b5-dc56-4727-87b1-aa06e2471737
              resource_id: {get_param: gohan_id}
          traffic.out:
            metric: traffic.bytes
            tags:
            - direction: out
              port_id: f84496b5-dc56-4727-87b1-aa06e2471737
              resource_id: {get_param: gohan_id}
      tenant_id: {get_param: tenant_id}
      type: snmp_ports
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget
  logical_interface:
    properties:
      name: {get_param: logical_port_name}
      physical_interface: {get_param: physical_port_id}
      type: {get_param: logical_port_type}
      virtual_machine_interfaces: {get_param: virtual_machine_interface_ids}
      vlan: {get_param: logical_port_vlan_id}
    type: OS::Contrail::LogicalInterface

[localhost] local: gohan client port show --output-format json f84496b5-dc56-4727-87b1-aa06e2471737
{
    "port": {
        "admin_state_up": true,
        "allowed_address_pairs": [],
        "attached": true,
        "binding:vif_type": "vrouter",
        "description": "",
        "device_id": "f649736d-1920-41eb-96af-d4e4fe192d0e",
        "device_owner": "network:common_function_gateway",
        "ese_logical_port_id": "be66c7e0-b222-4e76-bf81-af75e8cf1824",
        "fake_delete": false,
        "fixed_ips": [
            {
                "ip_address": "169.254.0.3",
                "subnet_id": "cf9356ae-b4e1-4a91-8193-089fdc12173d"
            }
        ],
        "id": "f84496b5-dc56-4727-87b1-aa06e2471737",
        "mac_address": "fa:16:3e:82:e7:8b",
        "managed_by_service": true,
        "name": "common_function_gw_f649736d-1920-41eb-96af-d4e4fe192d0e_primary_port:9451c9ca-289d-42ba-846d-359c448e910c",
        "network_id": "fc8814a7-eb1e-4f59-8422-7de500e72782",
        "operational_state": "FAIL",
        "orchestration_state": "UPDATE_COMPLETE",
        "security_groups": [],
        "segmentation_id": 1025,
        "segmentation_type": "vlan",
        "status": "MONITORING_UNAVAILABLE",
        "tags": {},
        "tenant_id": "c583ce78843344adbe5fd20f13620274"
    }
}

########################################################
### checking heat-stack (ports) for UPDATE_COMPLETE ####
########################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/ports/f84496b5-dc56-4727-87b1-aa06e2471737
[localhost] local: heat stack-show port_f84496b5-dc56-4727-87b1-aa06e2471737
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                              |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                 |
| creation_time         | 2018-04-09T04:50:00Z                                                                                                                                                               |
| description           | Virtual Machine Interface Template                                                                                                                                                 |
| disable_rollback      | True                                                                                                                                                                               |
| id                    | 246cc687-cd1d-4e50-ad64-5c32bc226464                                                                                                                                               |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/c583ce78843344adbe5fd20f13620274/stacks/port_f84496b5-dc56-4727-87b1-aa06e2471737/246cc687-cd1d-4e50-ad64-5c32bc226464 |
| notification_topics   | []                                                                                                                                                                                 |
| outputs               | [                                                                                                                                                                                  |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": "default-domain:admin:f68d0924-ef20-4c1b-ac45-0e6b879af5e7",                                                                                                   |
|                       |     "description": "Fully Qualified Name of the VMI",                                                                                                                              |
|                       |     "output_key": "fq_name"                                                                                                                                                        |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": {                                                                                                                                                              |
|                       |       "allowed_address_pair": []                                                                                                                                                   |
|                       |     },                                                                                                                                                                             |
|                       |     "description": "Virtual machine allowed address pairs.",                                                                                                                       |
|                       |     "output_key": "allowed_address_pairs"                                                                                                                                          |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": "5b5ef6a3-7444-4443-8c6d-4c66aee1df27",                                                                                                                        |
|                       |     "description": "Monitoring Target ID",                                                                                                                                         |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                           |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": [                                                                                                                                                              |
|                       |       "fa:16:3e:f7:60:7f"                                                                                                                                                          |
|                       |     ],                                                                                                                                                                             |
|                       |     "description": "Virtual machine interface mac address.",                                                                                                                       |
|                       |     "output_key": "mac_address"                                                                                                                                                    |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": [                                                                                                                                                              |
|                       |       [                                                                                                                                                                            |
|                       |         "default-domain",                                                                                                                                                          |
|                       |         "admin",                                                                                                                                                                   |
|                       |         "b62eefe0-0872-478d-adfe-1a606320f0e7"                                                                                                                                     |
|                       |       ]                                                                                                                                                                            |
|                       |     ],                                                                                                                                                                             |
|                       |     "description": "Virtual network.",                                                                                                                                             |
|                       |     "output_key": "virtual_network"                                                                                                                                                |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": "f68d0924-ef20-4c1b-ac45-0e6b879af5e7",                                                                                                                        |
|                       |     "description": "A unique id for the virtual machine interface.",                                                                                                               |
|                       |     "output_key": "id"                                                                                                                                                             |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/5b5ef6a3-7444-4443-8c6d-4c66aee1df27",                                               |
|                       |     "description": "Monitoring Process Link",                                                                                                                                      |
|                       |     "output_key": "monitoring_link"                                                                                                                                                |
|                       |   }                                                                                                                                                                                |
|                       | ]                                                                                                                                                                                  |
| parameters            | {                                                                                                                                                                                  |
|                       |   "virtual_machine": "f649736d-1920-41eb-96af-d4e4fe192d0e",                                                                                                                       |
|                       |   "uuid": "f84496b5-dc56-4727-87b1-aa06e2471737",                                                                                                                                  |
|                       |   "OS::stack_name": "port_f84496b5-dc56-4727-87b1-aa06e2471737",                                                                                                                   |
|                       |   "admin_state_up": "True",                                                                                                                                                        |
|                       |   "tenant_id": "c583ce78843344adbe5fd20f13620274",                                                                                                                                 |
|                       |   "virtual_machine_interface_allowed_address_pairs": "null",                                                                                                                       |
|                       |   "virtual_machine_interface_mac_address": "fa:16:3e:82:e7:8b",                                                                                                                    |
|                       |   "OS::stack_id": "246cc687-cd1d-4e50-ad64-5c32bc226464",                                                                                                                          |
|                       |   "device_owner": "network:common_function_gateway",                                                                                                                               |
|                       |   "version": "2",                                                                                                                                                                  |
|                       |   "virtual_network": "fc8814a7-eb1e-4f59-8422-7de500e72782",                                                                                                                       |
|                       |   "security_groups": "[]",                                                                                                                                                         |
|                       |   "name": "f84496b5-dc56-4727-87b1-aa06e2471737"                                                                                                                                   |
|                       | }                                                                                                                                                                                  |
| parent                | None                                                                                                                                                                               |
| stack_name            | port_f84496b5-dc56-4727-87b1-aa06e2471737                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                              |
| stack_status          | UPDATE_COMPLETE                                                                                                                                                                    |
| stack_status_reason   | Stack successfully updated                                                                                                                                                         |
| stack_user_project_id | c583ce78843344adbe5fd20f13620274                                                                                                                                                   |
| template_description  | Virtual Machine Interface Template                                                                                                                                                 |
| timeout_mins          | 13                                                                                                                                                                                 |
| updated_time          | 2018-04-09T04:50:25Z                                                                                                                                                               |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show port_f84496b5-dc56-4727-87b1-aa06e2471737
description: 'Virtual Machine Interface Template

  '
heat_template_version: '2013-05-23'
outputs:
  allowed_address_pairs:
    description: Virtual machine allowed address pairs.
    value:
      get_attr: [virtual_machine_interface, virtual_machine_interface_allowed_address_pairs]
  fq_name:
    description: Fully Qualified Name of the VMI
    value:
      get_attr: [virtual_machine_interface, fq_name]
  id:
    description: A unique id for the virtual machine interface.
    value: {get_resource: virtual_machine_interface}
  mac_address:
    description: Virtual machine interface mac address.
    value:
      get_attr: [virtual_machine_interface, virtual_machine_interface_mac_addresses]
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [vmi_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: vmi_monitor}
  virtual_network:
    description: Virtual network.
    value:
      get_attr: [virtual_machine_interface, virtual_networks]
parameters:
  admin_state_up: {default: true, label: Admin state up, type: boolean}
  device_owner: {default: '', label: Device Owner, type: string}
  name: {description: A unique id for the Physical Interface., label: Physical Interface
      ID, type: string}
  security_groups:
    default: []
    description: The IDs of security groups applied to the port.
    label: Security Groups List
    type: json
  tenant_id: {label: Tenant ID, type: string}
  uuid: {description: A unique id for the Virtual Machine Interface., label: Backend
      Virtual Machine Interface UUID, type: string}
  version: {label: Config version, type: number}
  virtual_machine: {default: '', label: Virtual Machine., type: string}
  virtual_machine_interface_allowed_address_pairs: {label: Virtual machine interface
      allowed address pairs., type: json}
  virtual_machine_interface_mac_address: {default: 'fe:ff:ff:ff:ff:ff', label: Virtual
      machine interface mac address., type: string}
  virtual_network: {label: Virtual Network., type: string}
resources:
  instance_ip_0:
    properties:
      ip_address: 169.254.0.3
      name:
        str_replace:
          params:
            '%ip%': 169.254.0.3
            '%name%': {get_param: name}
            '%zone%': cf9356ae-b4e1-4a91-8193-089fdc12173d
          template: '%name%_%zone%_%ip%'
      network_id: {get_param: virtual_network}
      subnet_id: 8f52422a-7115-4304-99cf-fc021562c352
      virtual_machine_interfaces:
      - {get_resource: virtual_machine_interface}
    type: OS::Contrail::InstanceIp
  virtual_machine_interface:
    properties:
      admin_state_up: {get_param: admin_state_up}
      device_owner: {get_param: device_owner}
      name: {get_param: name}
      security_groups: {get_param: security_groups}
      uuid: {get_param: uuid}
      virtual_machine: {get_param: virtual_machine}
      virtual_machine_interface_allowed_address_pairs: {get_param: virtual_machine_interface_allowed_address_pairs}
      virtual_machine_interface_mac_addresses:
      - {get_param: virtual_machine_interface_mac_address}
      virtual_networks:
      - {get_param: virtual_network}
    type: OS::Contrail::VirtualMachineInterface
  vmi_monitor:
    depends_on: virtual_machine_interface
    properties:
      field_name: vmi
      properties:
        fq_name:
          get_attr: [virtual_machine_interface, fq_name]
      resource_id: {get_param: uuid}
      resource_type: ports
      syncer_properties:
        etcd:
          status: {key: vmi}
        tsdb:
          traffic.in:
            metric: traffic.contrail_bytes
            tags:
              direction: in
              resource_id: {get_param: uuid}
          traffic.out:
            metric: traffic.contrail_bytes
            tags:
              direction: out
              resource_id: {get_param: uuid}
      tenant_id: {get_param: tenant_id}
      type: virtual_machine_interface
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget

[localhost] local: gohan client ese_logical_port show --output-format json e8555ee6-529c-42d9-8bb1-bfbe217133b1
{
    "ese_logical_port": {
        "common_function_gateway_id": "f649736d-1920-41eb-96af-d4e4fe192d0e",
        "connected_resource": "common_function_gateway",
        "description": "ESE Logical port for Port 343b0257-512e-40e3-b063-8cc13a4b61f4",
        "ese_physical_port_id": "f4c3a1bf-3b61-48ba-a548-422036849465",
        "gw_interface_id": null,
        "id": "e8555ee6-529c-42d9-8bb1-bfbe217133b1",
        "name": "xe-0/0/4.1025",
        "network_id": "fc8814a7-eb1e-4f59-8422-7de500e72782",
        "operational_state": "UP",
        "orchestration_state": "CREATE_COMPLETE",
        "port_ids": [
            "343b0257-512e-40e3-b063-8cc13a4b61f4"
        ],
        "status": "ACTIVE",
        "tags": {},
        "tenant_id": "c583ce78843344adbe5fd20f13620274",
        "type": "L2",
        "vlan_id": 1025
    }
}

################################################
### checking heat-stack (ese_logical_ports) ####
################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/ese_logical_ports/e8555ee6-529c-42d9-8bb1-bfbe217133b1
[localhost] local: heat stack-show ese_logical_port_e8555ee6-529c-42d9-8bb1-bfbe217133b1
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                          |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                             |
| creation_time         | 2018-04-09T04:50:06Z                                                                                                                                                                           |
| description           | Logical port template                                                                                                                                                                          |
| disable_rollback      | True                                                                                                                                                                                           |
| id                    | 93209400-c90d-499f-a9db-b20cc38265be                                                                                                                                                           |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/c583ce78843344adbe5fd20f13620274/stacks/ese_logical_port_e8555ee6-529c-42d9-8bb1-bfbe217133b1/93209400-c90d-499f-a9db-b20cc38265be |
| notification_topics   | []                                                                                                                                                                                             |
| outputs               | [                                                                                                                                                                                              |
|                       |   {                                                                                                                                                                                            |
|                       |     "output_value": "7f066c44-1dc2-44b2-95f7-d59d70bd77fb",                                                                                                                                    |
|                       |     "description": "Monitoring Target ID",                                                                                                                                                     |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                                       |
|                       |   },                                                                                                                                                                                           |
|                       |   {                                                                                                                                                                                            |
|                       |     "output_value": "46b0cd68-d0fb-4d72-9def-830164f9e215",                                                                                                                                    |
|                       |     "description": "A unique id for the logical interface",                                                                                                                                    |
|                       |     "output_key": "id"                                                                                                                                                                         |
|                       |   },                                                                                                                                                                                           |
|                       |   {                                                                                                                                                                                            |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/7f066c44-1dc2-44b2-95f7-d59d70bd77fb",                                                           |
|                       |     "description": "Monitoring Process Link",                                                                                                                                                  |
|                       |     "output_key": "monitoring_link"                                                                                                                                                            |
|                       |   },                                                                                                                                                                                           |
|                       |   {                                                                                                                                                                                            |
|                       |     "output_value": "xe-0/0/38.0",                                                                                                                                                             |
|                       |     "description": "The name of the logical interface.",                                                                                                                                       |
|                       |     "output_key": "name"                                                                                                                                                                       |
|                       |   }                                                                                                                                                                                            |
|                       | ]                                                                                                                                                                                              |
| parameters            | {                                                                                                                                                                                              |
|                       |   "logical_port_type": "L2",                                                                                                                                                                   |
|                       |   "logical_port_vlan_id": "1025",                                                                                                                                                              |
|                       |   "OS::stack_name": "ese_logical_port_e8555ee6-529c-42d9-8bb1-bfbe217133b1",                                                                                                                   |
|                       |   "virtual_machine_interface_ids": "f68d0924-ef20-4c1b-ac45-0e6b879af5e7",                                                                                                                     |
|                       |   "device_ip": "10.161.0.34",                                                                                                                                                                  |
|                       |   "OS::stack_id": "93209400-c90d-499f-a9db-b20cc38265be",                                                                                                                                      |
|                       |   "version": "1",                                                                                                                                                                              |
|                       |   "tenant_id": "c583ce78843344adbe5fd20f13620274",                                                                                                                                             |
|                       |   "logical_port_name": "xe-0/0/4.1025",                                                                                                                                                        |
|                       |   "gohan_id": "e8555ee6-529c-42d9-8bb1-bfbe217133b1",                                                                                                                                          |
|                       |   "physical_port_id": "06bfe521-07f0-4931-9f8c-318c3ad8114e"                                                                                                                                   |
|                       | }                                                                                                                                                                                              |
| parent                | None                                                                                                                                                                                           |
| stack_name            | ese_logical_port_e8555ee6-529c-42d9-8bb1-bfbe217133b1                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                          |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                                |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                            |
| stack_user_project_id | c583ce78843344adbe5fd20f13620274                                                                                                                                                               |
| template_description  | Logical port template                                                                                                                                                                          |
| timeout_mins          | 6                                                                                                                                                                                              |
| updated_time          | None                                                                                                                                                                                           |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show ese_logical_port_e8555ee6-529c-42d9-8bb1-bfbe217133b1
description: 'Logical port template

  '
heat_template_version: '2013-05-23'
outputs:
  id:
    description: A unique id for the logical interface
    value: {get_resource: logical_interface}
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [interface_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: interface_monitor}
  name:
    description: The name of the logical interface.
    value:
      get_attr: [logical_interface, name]
parameters:
  device_ip: {description: Device IP Address., label: Device IP Address, type: string}
  gohan_id: {description: UUID of the ESE Physical Port, label: Gohan resource ID,
    type: string}
  logical_port_name: {description: Name of the logical port., label: Logical Port
      Name, type: string}
  logical_port_type: {description: Type of the logical port., label: Logical Port
      Type, type: string}
  logical_port_vlan_id: {default: 0, description: VLAN id to use for logical port
      creation., label: VLAN id for Logical Port, type: number}
  physical_port_id: {description: A unique id for the Physical Interface., label: Physical
      Interface ID, type: string}
  tenant_id: {label: Tenant ID, type: string}
  version: {label: Config version, type: number}
  virtual_machine_interface_ids: {description: Virtual Machine Interface ID., label: Virtual
      Machine Interface ID, type: comma_delimited_list}
resources:
  interface_monitor:
    depends_on: logical_interface
    properties:
      field_name: logical_port
      properties:
        community_name: ESE_NODE_COMMUNITY
        device_ip: {get_param: device_ip}
        if_name: {get_param: logical_port_name}
      resource_id: {get_param: gohan_id}
      resource_type: ese_logical_ports
      syncer_properties:
        etcd:
          status: {key: logical_port}
        tsdb:
          traffic.in:
            metric: traffic.bytes
            tags:
            - direction: in
              port_id: 343b0257-512e-40e3-b063-8cc13a4b61f4
              resource_id: {get_param: gohan_id}
          traffic.out:
            metric: traffic.bytes
            tags:
            - direction: out
              port_id: 343b0257-512e-40e3-b063-8cc13a4b61f4
              resource_id: {get_param: gohan_id}
      tenant_id: {get_param: tenant_id}
      type: snmp_ports
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget
  logical_interface:
    properties:
      name: {get_param: logical_port_name}
      physical_interface: {get_param: physical_port_id}
      type: {get_param: logical_port_type}
      virtual_machine_interfaces: {get_param: virtual_machine_interface_ids}
      vlan: {get_param: logical_port_vlan_id}
    type: OS::Contrail::LogicalInterface

[localhost] local: gohan client port show --output-format json 343b0257-512e-40e3-b063-8cc13a4b61f4
{
    "port": {
        "admin_state_up": true,
        "allowed_address_pairs": [],
        "attached": true,
        "binding:vif_type": "vrouter",
        "description": "",
        "device_id": "f649736d-1920-41eb-96af-d4e4fe192d0e",
        "device_owner": "network:common_function_gateway",
        "ese_logical_port_id": "e8555ee6-529c-42d9-8bb1-bfbe217133b1",
        "fake_delete": false,
        "fixed_ips": [
            {
                "ip_address": "169.254.0.4",
                "subnet_id": "cf9356ae-b4e1-4a91-8193-089fdc12173d"
            }
        ],
        "id": "343b0257-512e-40e3-b063-8cc13a4b61f4",
        "mac_address": "fa:16:3e:38:35:6a",
        "managed_by_service": true,
        "name": "common_function_gw_f649736d-1920-41eb-96af-d4e4fe192d0e_secondary_port:f4c3a1bf-3b61-48ba-a548-422036849465",
        "network_id": "fc8814a7-eb1e-4f59-8422-7de500e72782",
        "operational_state": "UP",
        "orchestration_state": "UPDATE_COMPLETE",
        "security_groups": [],
        "segmentation_id": 1025,
        "segmentation_type": "vlan",
        "status": "ACTIVE",
        "tags": {},
        "tenant_id": "c583ce78843344adbe5fd20f13620274"
    }
}

########################################################
### checking heat-stack (ports) for UPDATE_COMPLETE ####
########################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/ports/343b0257-512e-40e3-b063-8cc13a4b61f4
[localhost] local: heat stack-show port_343b0257-512e-40e3-b063-8cc13a4b61f4
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                              |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                 |
| creation_time         | 2018-04-09T04:49:59Z                                                                                                                                                               |
| description           | Virtual Machine Interface Template                                                                                                                                                 |
| disable_rollback      | True                                                                                                                                                                               |
| id                    | e196feab-f9dd-4cfd-8182-5a877f1fe00e                                                                                                                                               |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/c583ce78843344adbe5fd20f13620274/stacks/port_343b0257-512e-40e3-b063-8cc13a4b61f4/e196feab-f9dd-4cfd-8182-5a877f1fe00e |
| notification_topics   | []                                                                                                                                                                                 |
| outputs               | [                                                                                                                                                                                  |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": "default-domain:admin:f68d0924-ef20-4c1b-ac45-0e6b879af5e7",                                                                                                   |
|                       |     "description": "Fully Qualified Name of the VMI",                                                                                                                              |
|                       |     "output_key": "fq_name"                                                                                                                                                        |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": {                                                                                                                                                              |
|                       |       "allowed_address_pair": []                                                                                                                                                   |
|                       |     },                                                                                                                                                                             |
|                       |     "description": "Virtual machine allowed address pairs.",                                                                                                                       |
|                       |     "output_key": "allowed_address_pairs"                                                                                                                                          |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": "9ba38fcf-3f2e-41e5-af92-cb4603c33e62",                                                                                                                        |
|                       |     "description": "Monitoring Target ID",                                                                                                                                         |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                           |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": [                                                                                                                                                              |
|                       |       "fa:16:3e:f7:60:7f"                                                                                                                                                          |
|                       |     ],                                                                                                                                                                             |
|                       |     "description": "Virtual machine interface mac address.",                                                                                                                       |
|                       |     "output_key": "mac_address"                                                                                                                                                    |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": [                                                                                                                                                              |
|                       |       [                                                                                                                                                                            |
|                       |         "default-domain",                                                                                                                                                          |
|                       |         "admin",                                                                                                                                                                   |
|                       |         "b62eefe0-0872-478d-adfe-1a606320f0e7"                                                                                                                                     |
|                       |       ]                                                                                                                                                                            |
|                       |     ],                                                                                                                                                                             |
|                       |     "description": "Virtual network.",                                                                                                                                             |
|                       |     "output_key": "virtual_network"                                                                                                                                                |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": "f68d0924-ef20-4c1b-ac45-0e6b879af5e7",                                                                                                                        |
|                       |     "description": "A unique id for the virtual machine interface.",                                                                                                               |
|                       |     "output_key": "id"                                                                                                                                                             |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/9ba38fcf-3f2e-41e5-af92-cb4603c33e62",                                               |
|                       |     "description": "Monitoring Process Link",                                                                                                                                      |
|                       |     "output_key": "monitoring_link"                                                                                                                                                |
|                       |   }                                                                                                                                                                                |
|                       | ]                                                                                                                                                                                  |
| parameters            | {                                                                                                                                                                                  |
|                       |   "virtual_machine": "f649736d-1920-41eb-96af-d4e4fe192d0e",                                                                                                                       |
|                       |   "uuid": "343b0257-512e-40e3-b063-8cc13a4b61f4",                                                                                                                                  |
|                       |   "OS::stack_name": "port_343b0257-512e-40e3-b063-8cc13a4b61f4",                                                                                                                   |
|                       |   "admin_state_up": "True",                                                                                                                                                        |
|                       |   "tenant_id": "c583ce78843344adbe5fd20f13620274",                                                                                                                                 |
|                       |   "virtual_machine_interface_allowed_address_pairs": "null",                                                                                                                       |
|                       |   "virtual_machine_interface_mac_address": "fa:16:3e:38:35:6a",                                                                                                                    |
|                       |   "OS::stack_id": "e196feab-f9dd-4cfd-8182-5a877f1fe00e",                                                                                                                          |
|                       |   "device_owner": "network:common_function_gateway",                                                                                                                               |
|                       |   "version": "2",                                                                                                                                                                  |
|                       |   "virtual_network": "fc8814a7-eb1e-4f59-8422-7de500e72782",                                                                                                                       |
|                       |   "security_groups": "[]",                                                                                                                                                         |
|                       |   "name": "343b0257-512e-40e3-b063-8cc13a4b61f4"                                                                                                                                   |
|                       | }                                                                                                                                                                                  |
| parent                | None                                                                                                                                                                               |
| stack_name            | port_343b0257-512e-40e3-b063-8cc13a4b61f4                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                              |
| stack_status          | UPDATE_COMPLETE                                                                                                                                                                    |
| stack_status_reason   | Stack successfully updated                                                                                                                                                         |
| stack_user_project_id | c583ce78843344adbe5fd20f13620274                                                                                                                                                   |
| template_description  | Virtual Machine Interface Template                                                                                                                                                 |
| timeout_mins          | 13                                                                                                                                                                                 |
| updated_time          | 2018-04-09T04:50:24Z                                                                                                                                                               |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show port_343b0257-512e-40e3-b063-8cc13a4b61f4
description: 'Virtual Machine Interface Template

  '
heat_template_version: '2013-05-23'
outputs:
  allowed_address_pairs:
    description: Virtual machine allowed address pairs.
    value:
      get_attr: [virtual_machine_interface, virtual_machine_interface_allowed_address_pairs]
  fq_name:
    description: Fully Qualified Name of the VMI
    value:
      get_attr: [virtual_machine_interface, fq_name]
  id:
    description: A unique id for the virtual machine interface.
    value: {get_resource: virtual_machine_interface}
  mac_address:
    description: Virtual machine interface mac address.
    value:
      get_attr: [virtual_machine_interface, virtual_machine_interface_mac_addresses]
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [vmi_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: vmi_monitor}
  virtual_network:
    description: Virtual network.
    value:
      get_attr: [virtual_machine_interface, virtual_networks]
parameters:
  admin_state_up: {default: true, label: Admin state up, type: boolean}
  device_owner: {default: '', label: Device Owner, type: string}
  name: {description: A unique id for the Physical Interface., label: Physical Interface
      ID, type: string}
  security_groups:
    default: []
    description: The IDs of security groups applied to the port.
    label: Security Groups List
    type: json
  tenant_id: {label: Tenant ID, type: string}
  uuid: {description: A unique id for the Virtual Machine Interface., label: Backend
      Virtual Machine Interface UUID, type: string}
  version: {label: Config version, type: number}
  virtual_machine: {default: '', label: Virtual Machine., type: string}
  virtual_machine_interface_allowed_address_pairs: {label: Virtual machine interface
      allowed address pairs., type: json}
  virtual_machine_interface_mac_address: {default: 'fe:ff:ff:ff:ff:ff', label: Virtual
      machine interface mac address., type: string}
  virtual_network: {label: Virtual Network., type: string}
resources:
  instance_ip_0:
    properties:
      ip_address: 169.254.0.4
      name:
        str_replace:
          params:
            '%ip%': 169.254.0.4
            '%name%': {get_param: name}
            '%zone%': cf9356ae-b4e1-4a91-8193-089fdc12173d
          template: '%name%_%zone%_%ip%'
      network_id: {get_param: virtual_network}
      subnet_id: 8f52422a-7115-4304-99cf-fc021562c352
      virtual_machine_interfaces:
      - {get_resource: virtual_machine_interface}
    type: OS::Contrail::InstanceIp
  virtual_machine_interface:
    properties:
      admin_state_up: {get_param: admin_state_up}
      device_owner: {get_param: device_owner}
      name: {get_param: name}
      security_groups: {get_param: security_groups}
      uuid: {get_param: uuid}
      virtual_machine: {get_param: virtual_machine}
      virtual_machine_interface_allowed_address_pairs: {get_param: virtual_machine_interface_allowed_address_pairs}
      virtual_machine_interface_mac_addresses:
      - {get_param: virtual_machine_interface_mac_address}
      virtual_networks:
      - {get_param: virtual_network}
    type: OS::Contrail::VirtualMachineInterface
  vmi_monitor:
    depends_on: virtual_machine_interface
    properties:
      field_name: vmi
      properties:
        fq_name:
          get_attr: [virtual_machine_interface, fq_name]
      resource_id: {get_param: uuid}
      resource_type: ports
      syncer_properties:
        etcd:
          status: {key: vmi}
        tsdb:
          traffic.in:
            metric: traffic.contrail_bytes
            tags:
              direction: in
              resource_id: {get_param: uuid}
          traffic.out:
            metric: traffic.contrail_bytes
            tags:
              direction: out
              resource_id: {get_param: uuid}
      tenant_id: {get_param: tenant_id}
      type: virtual_machine_interface
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget

[localhost] local: gohan client resource_mapping list --output-format json
Command not found

[localhost] local: gohan client billing_resource list --output-format json
{
    "billing_resources": [
        {
            "config_version": 1,
            "ended": null,
            "id": "14a6bdca-a06f-49da-afbf-1439602f6496",
            "info": {},
            "parent_billing_id": null,
            "resource_id": "fc8814a7-eb1e-4f59-8422-7de500e72782",
            "resource_type": "network",
            "started": 1.523249394e+09,
            "tenant_id": "c583ce78843344adbe5fd20f13620274",
            "unique_resource_id": "fc8814a7-eb1e-4f59-8422-7de500e72782"
        }
    ]
}

root@client:/tools/rest-api-for-esi# 
root@client:/tools/rest-api-for-esi# heat stack-list
+--------------------------------------+--------------------------------------------------------------+-----------------+----------------------+
| id                                   | stack_name                                                   | stack_status    | creation_time        |
+--------------------------------------+--------------------------------------------------------------+-----------------+----------------------+
| 83145b8c-af3d-400a-a3fe-922116bd9f01 | ese_device_cc214b6a-2f09-4094-b7cd-a9590f64b854              | CREATE_COMPLETE | 2018-04-09T04:41:21Z |
| 90f0d5d9-e55d-4f3f-9fcf-f94d5aceadbe | ese_physical_port_9451c9ca-289d-42ba-846d-359c448e910c       | CREATE_COMPLETE | 2018-04-09T04:42:29Z |
| 8ec1e9db-3670-4dd5-8146-afde8984cfab | ese_physical_port_f4c3a1bf-3b61-48ba-a548-422036849465       | CREATE_COMPLETE | 2018-04-09T04:43:34Z |
| 521c324d-4685-43c7-9e51-a7153e188aae | edge_router_f4f54175-93fe-406b-ae66-dbca4df99e03             | CREATE_COMPLETE | 2018-04-09T04:44:35Z |
| 36e9b437-d8f6-412d-85c5-f8c913379c2c | edge_router_2d056865-47a9-45cf-a890-ed10e3b5912a             | CREATE_COMPLETE | 2018-04-09T04:45:39Z |
| 9dc94842-9230-446f-ae5c-26a2fe1b3f33 | er_physical_interface_c2576120-00b0-461e-a2ae-f7bbff9465d0   | CREATE_COMPLETE | 2018-04-09T04:46:45Z |
| 6aa1108c-bb2d-4a0f-a7e0-835e3581ed20 | er_physical_interface_b9c7c1f4-1b90-4a7a-8161-34276bb2ed10   | CREATE_COMPLETE | 2018-04-09T04:47:49Z |
| e2574663-12a4-4845-b95b-01cf7df978b9 | network_fc8814a7-eb1e-4f59-8422-7de500e72782                 | CREATE_COMPLETE | 2018-04-09T04:49:52Z |
| 24114c92-7b42-4bad-8d3b-bc1d88ffdd3b | subnet_cf9356ae-b4e1-4a91-8193-089fdc12173d                  | CREATE_COMPLETE | 2018-04-09T04:49:55Z |
| 8ccc6c5d-7757-4605-b34b-665ef8858cce | common_function_gateway_f649736d-1920-41eb-96af-d4e4fe192d0e | CREATE_COMPLETE | 2018-04-09T04:49:59Z |
| e196feab-f9dd-4cfd-8182-5a877f1fe00e | port_343b0257-512e-40e3-b063-8cc13a4b61f4                    | UPDATE_COMPLETE | 2018-04-09T04:49:59Z |
| 246cc687-cd1d-4e50-ad64-5c32bc226464 | port_f84496b5-dc56-4727-87b1-aa06e2471737                    | UPDATE_COMPLETE | 2018-04-09T04:50:00Z |
| 93209400-c90d-499f-a9db-b20cc38265be | ese_logical_port_e8555ee6-529c-42d9-8bb1-bfbe217133b1        | CREATE_COMPLETE | 2018-04-09T04:50:06Z |
| af4cb4c8-1af6-427f-9119-4b001b7e8d73 | ese_logical_port_be66c7e0-b222-4e76-bf81-af75e8cf1824        | CREATE_COMPLETE | 2018-04-09T04:50:06Z |
+--------------------------------------+--------------------------------------------------------------+-----------------+----------------------+
root@client:/tools/rest-api-for-esi# neutron port-list
+--------------------------------------+-------------------------------------------------------------------------------------------------------------+-------------------+------------------------------------------------------------------------------------+
| id                                   | name                                                                                                        | mac_address       | fixed_ips                                                                          |
+--------------------------------------+-------------------------------------------------------------------------------------------------------------+-------------------+------------------------------------------------------------------------------------+
| 33876f91-b5c9-43aa-a0e0-166e3def9133 | dhcp-server-port                                                                                            | 00:00:5e:00:01:00 | {"subnet_id": "cf9356ae-b4e1-4a91-8193-089fdc12173d", "ip_address": "169.254.0.2"} |
| 343b0257-512e-40e3-b063-8cc13a4b61f4 | common_function_gw_f649736d-1920-41eb-96af-d4e4fe192d0e_secondary_port:f4c3a1bf-3b61-48ba-a548-422036849465 | fa:16:3e:38:35:6a | {"subnet_id": "cf9356ae-b4e1-4a91-8193-089fdc12173d", "ip_address": "169.254.0.4"} |
| f84496b5-dc56-4727-87b1-aa06e2471737 | common_function_gw_f649736d-1920-41eb-96af-d4e4fe192d0e_primary_port:9451c9ca-289d-42ba-846d-359c448e910c   | fa:16:3e:82:e7:8b | {"subnet_id": "cf9356ae-b4e1-4a91-8193-089fdc12173d", "ip_address": "169.254.0.3"} |
+--------------------------------------+-------------------------------------------------------------------------------------------------------------+-------------------+------------------------------------------------------------------------------------+
root@client:/tools/rest-api-for-esi# neutron port-show 343b0257-512e-40e3-b063-8cc13a4b61f4
+-----------------------+-------------------------------------------------------------------------------------------------------------+
| Field                 | Value                                                                                                       |
+-----------------------+-------------------------------------------------------------------------------------------------------------+
| admin_state_up        | True                                                                                                        |
| allowed_address_pairs |                                                                                                             |
| attached              | True                                                                                                        |
| binding:vif_type      | vrouter                                                                                                     |
| description           |                                                                                                             |
| device_id             | f649736d-1920-41eb-96af-d4e4fe192d0e                                                                        |
| device_owner          | network:common_function_gateway                                                                             |
| ese_logical_port_id   | e8555ee6-529c-42d9-8bb1-bfbe217133b1                                                                        |
| fake_delete           | False                                                                                                       |
| fixed_ips             | {"subnet_id": "cf9356ae-b4e1-4a91-8193-089fdc12173d", "ip_address": "169.254.0.4"}                          |
| id                    | 343b0257-512e-40e3-b063-8cc13a4b61f4                                                                        |
| mac_address           | fa:16:3e:38:35:6a                                                                                           |
| managed_by_service    | True                                                                                                        |
| name                  | common_function_gw_f649736d-1920-41eb-96af-d4e4fe192d0e_secondary_port:f4c3a1bf-3b61-48ba-a548-422036849465 |
| network_id            | fc8814a7-eb1e-4f59-8422-7de500e72782                                                                        |
| operational_state     | FAIL                                                                                                        |
| orchestration_state   | UPDATE_COMPLETE                                                                                             |
| security_groups       |                                                                                                             |
| segmentation_id       | 1025                                                                                                        |
| segmentation_type     | vlan                                                                                                        |
| status                | MONITORING_UNAVAILABLE                                                                                      |
| tags                  | {}                                                                                                          |
| tenant_id             | c583ce78843344adbe5fd20f13620274                                                                            |
+-----------------------+-------------------------------------------------------------------------------------------------------------+
root@client:/tools/rest-api-for-esi# neutron port-show f84496b5-dc56-4727-87b1-aa06e2471737
+-----------------------+-----------------------------------------------------------------------------------------------------------+
| Field                 | Value                                                                                                     |
+-----------------------+-----------------------------------------------------------------------------------------------------------+
| admin_state_up        | True                                                                                                      |
| allowed_address_pairs |                                                                                                           |
| attached              | True                                                                                                      |
| binding:vif_type      | vrouter                                                                                                   |
| description           |                                                                                                           |
| device_id             | f649736d-1920-41eb-96af-d4e4fe192d0e                                                                      |
| device_owner          | network:common_function_gateway                                                                           |
| ese_logical_port_id   | be66c7e0-b222-4e76-bf81-af75e8cf1824                                                                      |
| fake_delete           | False                                                                                                     |
| fixed_ips             | {"subnet_id": "cf9356ae-b4e1-4a91-8193-089fdc12173d", "ip_address": "169.254.0.3"}                        |
| id                    | f84496b5-dc56-4727-87b1-aa06e2471737                                                                      |
| mac_address           | fa:16:3e:82:e7:8b                                                                                         |
| managed_by_service    | True                                                                                                      |
| name                  | common_function_gw_f649736d-1920-41eb-96af-d4e4fe192d0e_primary_port:9451c9ca-289d-42ba-846d-359c448e910c |
| network_id            | fc8814a7-eb1e-4f59-8422-7de500e72782                                                                      |
| operational_state     | UP                                                                                                        |
| orchestration_state   | UPDATE_COMPLETE                                                                                           |
| security_groups       |                                                                                                           |
| segmentation_id       | 1025                                                                                                      |
| segmentation_type     | vlan                                                                                                      |
| status                | ACTIVE                                                                                                    |
| tags                  | {}                                                                                                        |
| tenant_id             | c583ce78843344adbe5fd20f13620274                                                                          |
+-----------------------+-----------------------------------------------------------------------------------------------------------+
