2019-02-01 00:26:26,258 [1;37mINFO[0m heat_worker - Registered gohan 2-step delete flag: marked_for_deletion (resources.py - 62)
2019-02-01 00:26:26,259 [1;37mINFO[0m heat_worker - Gohan config path: /config (resources.py - 274)
2019-02-01 00:26:26,260 [1;37mINFO[0m heat_worker - Gohan state path: /state (resources.py - 298)
2019-02-01 00:26:26,387 [1;33mWARNING[0m heat_worker - Could not reach gohan. Retrying in 1s. (gohan.py - 28)
2019-02-01 00:26:27,390 [1;33mWARNING[0m heat_worker - Could not reach gohan. Retrying in 2s. (gohan.py - 28)
2019-02-01 00:26:29,396 [1;33mWARNING[0m heat_worker - Could not reach gohan. Retrying in 4s. (gohan.py - 28)
2019-02-01 00:26:33,402 [1;33mWARNING[0m heat_worker - Could not reach gohan. Retrying in 8s. (gohan.py - 28)
================================================
2019-02-01 00:26:41,521 [1;34mDEBUG[0m heat_worker - Starting worker. (etcd_worker.py - 231)
2019-02-01 00:26:41,521 [1;37mINFO[0m heat_worker - Worker started. (etcd_worker.py - 234)
2019-02-01 00:26:41,522 [1;34mDEBUG[0m heat_worker - Waiting for a job. (etcd_worker.py - 218)
2019-02-01 00:26:41,522 [1;34mDEBUG[0m heat_worker - 8 job slots available (etcd_worker.py - 213)
2019-02-01 00:27:11,548 [1;34mDEBUG[0m heat_worker - GetJob timeout. (etcd_worker.py - 227)
2019-02-01 00:27:11,549 [1;34mDEBUG[0m heat_worker - Waiting for a job. (etcd_worker.py - 218)
2019-02-01 00:27:11,549 [1;34mDEBUG[0m heat_worker - 8 job slots available (etcd_worker.py - 213)
2019-02-01 00:27:15,606 [1;37mINFO[0m heat_worker - Reserved job: create:heat_worker:ese_device:61a05e50-71f9-495d-b1cc-74382dfaec83:1:u052f using id: 17364004-38fa-4cfe-b9cd-ab463ce37b77 (job_queue.py - 245)
2019-02-01 00:27:15,608 [1;34mDEBUG[0m heat_worker - Waiting for a job. (etcd_worker.py - 218)
2019-02-01 00:27:15,608 [1;34mDEBUG[0m heat_worker - 7 job slots available (etcd_worker.py - 213)
2019-02-01 00:27:15,626 [1;34mDEBUG[0m heat_worker - ese_device:61a05e50-71f9-495d-b1cc-74382dfaec83 - Starting work on new ready job create:heat_worker:ese_device:61a05e50-71f9-495d-b1cc-74382dfaec83:1:u052f (etcd_worker.py - 108)
2019-02-01 00:27:15,627 [1;34mDEBUG[0m heat_worker - ese_device:61a05e50-71f9-495d-b1cc-74382dfaec83 - Checking job status for ese_device:61a05e50-71f9-495d-b1cc-74382dfaec83 (heat_stacks_worker.py - 44)
2019-02-01 00:27:16,145 [1;37mINFO[0m heat_worker - ese_device:61a05e50-71f9-495d-b1cc-74382dfaec83 - CREATE STARTED (heat_messenger.py - 92)
2019-02-01 00:27:16,248 [1;37mINFO[0m heat_worker - ese_device:61a05e50-71f9-495d-b1cc-74382dfaec83 - Template id ese_device_existing resolved from mapping: ACese_device_&Pexisting (resources.py - 835)
2019-02-01 00:27:16,254 [1;34mDEBUG[0m heat_worker - ese_device:61a05e50-71f9-495d-b1cc-74382dfaec83 - Heat template prepared: 
heat_template_version: 2013-05-23

description: >
  ESE Device (existing) template

parameters:
  name:
    type: string
    label: Physical Router Name
    description: Name of the physical router that will be created.
  hostname:
    type: string
    label: Hostname
    description: Name of host (vrouter) to create router on
  gohan_id:
    type: string
    label: Gohan resource ID
    description: UUID of the ESE Device
  device_ip:
    type: string
    label: Device IP Address
    description: Device IP Address.
  tenant_id:
    type: string
    label: Tenant ID
  version:
    type: number
    label: Config version

resources:
  physical_router:
    type: OS::Contrail::ExistingResource
    properties:
      fq_name:
        - "default-global-system-config"
        - { get_param: hostname }
      resource_type: "physical_router"

  device_monitor:
    type: ESI::Monitoring::MonitoringTarget
    properties:
      type: snmp_device
      resource_type: ese_devices
      resource_id: { get_param: gohan_id }
      tenant_id: { get_param: tenant_id }
      version: { get_param: version }
      field_name: switch
      properties:
        device_ip: { get_param: device_ip }
        community_name: ESE_NODE_COMMUNITY
      syncer_properties:
        etcd:
          status:
            key: switch
    depends_on: physical_router

outputs:
  id:
    description: A unique id for the physical router.
    value: { get_resource: physical_router }
  name:
    description: The name of the physical router.
    value: { get_attr: [physical_router, name] }
  fq_name:
    description: The FQ name of the physical router.
    value: { get_attr: [physical_router, fq_name] }
  monitoring_target_id:
    description: Monitoring Target ID
    value: { get_resource: device_monitor }
  monitoring_link:
    description: Monitoring Process Link
    value: { get_attr: [device_monitor, link] }
 with parameters:
{"device_ip": "10.161.0.33", "name": "sample-ese_device", "tenant_id": "4b4cb858859842a389d0b0c8eb567d59", "hostname": "QFX-NW01", "version": 1, "gohan_id": "61a05e50-71f9-495d-b1cc-74382dfaec83"}, 
 and heat timeout = 6, rollback = False, 
using this jinja parameters: 
{} (heat.py - 280)
2019-02-01 00:27:16,254 [1;37mINFO[0m heat_worker - ese_device:61a05e50-71f9-495d-b1cc-74382dfaec83 - Creating a stack ese_device_61a05e50-71f9-495d-b1cc-74382dfaec83 with parameters: {u'device_ip': u'10.161.0.33', u'name': u'sample-ese_device', u'tenant_id': u'4b4cb858859842a389d0b0c8eb567d59', u'hostname': u'QFX-NW01', u'version': 1, u'gohan_id': u'61a05e50-71f9-495d-b1cc-74382dfaec83'}, timeout_mins: 6, and template: 
heat_template_version: 2013-05-23

description: >
  ESE Device (existing) template

parameters:
  name:
    type: string
    label: Physical Router Name
    description: Name of the physical router that will be created.
  hostname:
    type: string
    label: Hostname
    description: Name of host (vrouter) to create router on
  gohan_id:
    type: string
    label: Gohan resource ID
    description: UUID of the ESE Device
  device_ip:
    type: string
    label: Device IP Address
    description: Device IP Address.
  tenant_id:
    type: string
    label: Tenant ID
  version:
    type: number
    label: Config version

resources:
  physical_router:
    type: OS::Contrail::ExistingResource
    properties:
      fq_name:
        - "default-global-system-config"
        - { get_param: hostname }
      resource_type: "physical_router"

  device_monitor:
    type: ESI::Monitoring::MonitoringTarget
    properties:
      type: snmp_device
      resource_type: ese_devices
      resource_id: { get_param: gohan_id }
      tenant_id: { get_param: tenant_id }
      version: { get_param: version }
      field_name: switch
      properties:
        device_ip: { get_param: device_ip }
        community_name: ESE_NODE_COMMUNITY
      syncer_properties:
        etcd:
          status:
            key: switch
    depends_on: physical_router

outputs:
  id:
    description: A unique id for the physical router.
    value: { get_resource: physical_router }
  name:
    description: The name of the physical router.
    value: { get_attr: [physical_router, name] }
  fq_name:
    description: The FQ name of the physical router.
    value: { get_attr: [physical_router, fq_name] }
  monitoring_target_id:
    description: Monitoring Target ID
    value: { get_resource: device_monitor }
  monitoring_link:
    description: Monitoring Process Link
    value: { get_attr: [device_monitor, link] } (heat.py - 297)
2019-02-01 00:27:16,650 [1;37mINFO[0m heat_worker - ese_device:61a05e50-71f9-495d-b1cc-74382dfaec83 - Stack "ese_device_61a05e50-71f9-495d-b1cc-74382dfaec83" in status "CREATE_IN_PROGRESS" (heat.py - 356)
2019-02-01 00:27:17,717 [1;37mINFO[0m heat_worker - ese_device:61a05e50-71f9-495d-b1cc-74382dfaec83 - Stack "ese_device_61a05e50-71f9-495d-b1cc-74382dfaec83" in status "CREATE_IN_PROGRESS" (heat.py - 356)
2019-02-01 00:27:18,795 [1;37mINFO[0m heat_worker - ese_device:61a05e50-71f9-495d-b1cc-74382dfaec83 - Stack "ese_device_61a05e50-71f9-495d-b1cc-74382dfaec83" in status "CREATE_IN_PROGRESS" (heat.py - 356)
2019-02-01 00:27:20,049 [1;37mINFO[0m heat_worker - ese_device:61a05e50-71f9-495d-b1cc-74382dfaec83 - Stack "ese_device_61a05e50-71f9-495d-b1cc-74382dfaec83" in status "CREATE_COMPLETE" (heat.py - 356)
2019-02-01 00:27:20,050 [1;37mINFO[0m heat_worker - ese_device:61a05e50-71f9-495d-b1cc-74382dfaec83 - CREATED ese_device_61a05e50-71f9-495d-b1cc-74382dfaec83 (heat.py - 414)
2019-02-01 00:27:20,495 [1;37mINFO[0m heat_worker - ese_device:61a05e50-71f9-495d-b1cc-74382dfaec83 - Job create finished with results {'heat_outputs': [{u'output_value': u'259db18a-5c51-45d5-847e-9a05da626f80', u'description': u'Monitoring Target ID', u'output_key': u'monitoring_target_id'}, {u'output_value': [u'default-global-system-config', u'NWSDP-JNPR-02'], u'description': u'The FQ name of the physical router.', u'output_key': u'fq_name'}, {u'output_value': u'7e5c78fa-71c0-427e-947f-586b1fc3c470', u'description': u'A unique id for the physical router.', u'output_key': u'id'}, {u'output_value': u'http://collector-agents-se:7070/targets/259db18a-5c51-45d5-847e-9a05da626f80', u'description': u'Monitoring Process Link', u'output_key': u'monitoring_link'}, {u'output_value': u'NWSDP-JNPR-02', u'description': u'The name of the physical router.', u'output_key': u'name'}], 'orchestration_state': u'CREATE_COMPLETE', 'error': None} (heat_stacks_worker.py - 103)
2019-02-01 00:27:20,544 [1;37mINFO[0m heat_worker - ese_device:61a05e50-71f9-495d-b1cc-74382dfaec83 - Job create:heat_worker:ese_device:61a05e50-71f9-495d-b1cc-74382dfaec83:1:u052f finished. (job_queue.py - 266)
2019-02-01 00:27:20,544 [1;37mINFO[0m heat_worker - ese_device:61a05e50-71f9-495d-b1cc-74382dfaec83 - Trying to delete internal process state for resource ese_device:61a05e50-71f9-495d-b1cc-74382dfaec83 (resources.py - 701)
2019-02-01 00:27:45,618 [1;34mDEBUG[0m heat_worker - GetJob timeout. (etcd_worker.py - 227)
2019-02-01 00:27:45,618 [1;34mDEBUG[0m heat_worker - Waiting for a job. (etcd_worker.py - 218)
2019-02-01 00:27:45,619 [1;34mDEBUG[0m heat_worker - 8 job slots available (etcd_worker.py - 213)
2019-02-01 00:28:15,632 [1;34mDEBUG[0m heat_worker - GetJob timeout. (etcd_worker.py - 227)
2019-02-01 00:28:15,633 [1;34mDEBUG[0m heat_worker - Waiting for a job. (etcd_worker.py - 218)
2019-02-01 00:28:15,633 [1;34mDEBUG[0m heat_worker - 8 job slots available (etcd_worker.py - 213)
2019-02-01 00:28:37,353 [1;37mINFO[0m heat_worker - Reserved job: create:heat_worker:ese_physical_port:0915a040-2f84-44fc-9083-1e2f719ae2eb:1:gbjt1 using id: 892a4039-5cd9-457d-9901-8b8b8ccd455c (job_queue.py - 245)
2019-02-01 00:28:37,355 [1;34mDEBUG[0m heat_worker - Waiting for a job. (etcd_worker.py - 218)
2019-02-01 00:28:37,356 [1;34mDEBUG[0m heat_worker - 7 job slots available (etcd_worker.py - 213)
2019-02-01 00:28:37,362 [1;34mDEBUG[0m heat_worker - ese_physical_port:0915a040-2f84-44fc-9083-1e2f719ae2eb - Starting work on new ready job create:heat_worker:ese_physical_port:0915a040-2f84-44fc-9083-1e2f719ae2eb:1:gbjt1 (etcd_worker.py - 108)
2019-02-01 00:28:37,362 [1;34mDEBUG[0m heat_worker - ese_physical_port:0915a040-2f84-44fc-9083-1e2f719ae2eb - Checking job status for ese_physical_port:0915a040-2f84-44fc-9083-1e2f719ae2eb (heat_stacks_worker.py - 44)
2019-02-01 00:28:37,606 [1;37mINFO[0m heat_worker - ese_physical_port:0915a040-2f84-44fc-9083-1e2f719ae2eb - CREATE STARTED (heat_messenger.py - 92)
2019-02-01 00:28:37,701 [1;37mINFO[0m heat_worker - ese_physical_port:0915a040-2f84-44fc-9083-1e2f719ae2eb - Template id ese_physical_port_existing resolved from mapping: ACese_physical_port_&Pexisting (resources.py - 835)
2019-02-01 00:28:37,705 [1;34mDEBUG[0m heat_worker - ese_physical_port:0915a040-2f84-44fc-9083-1e2f719ae2eb - Heat template prepared: 
heat_template_version: 2013-05-23

description: >
  Physical port template

parameters:
  physical_device_hostname:
    type: string
    label: Physical Device Hostname
    description: Hostname of the physical device on which physical port will be created.
  physical_port_name:
    type: string
    label: Physical Interface Name
    description: Name of the physical port.
  gohan_id:
    type: string
    label: Gohan resource ID
    description: UUID of the ESE Physical Port
  device_ip:
    type: string
    label: Device IP Address
    description: Device IP Address.
  tenant_id:
    type: string
    label: Tenant ID
  version:
    type: number
    label: Config version

resources:
  physical_interface:
    type: OS::Contrail::ExistingResource
    properties:
      fq_name:
        - "default-global-system-config"
        - { get_param: physical_device_hostname }
        - { get_param: physical_port_name }
      resource_type: "physical_interface"

  interface_monitor:
    type: ESI::Monitoring::MonitoringTarget
    properties:
      type: snmp_ports_status
      resource_type: ese_physical_ports
      resource_id: { get_param: gohan_id }
      tenant_id: { get_param: tenant_id }
      version: { get_param: version }
      field_name: port
      properties:
        device_ip: { get_param: device_ip }
        if_name: { get_param: physical_port_name }
        community_name: ESE_NODE_COMMUNITY
      syncer_properties:
        etcd:
          status:
            key: port
    depends_on: physical_interface

outputs:
  id:
    description: A unique id for the physical interface
    value: { get_resource: physical_interface }
  name:
    description: The name of the physical interface.
    value: { get_attr: [physical_interface, name] }
  monitoring_target_id:
    description: Monitoring Target ID
    value: { get_resource: interface_monitor }
  monitoring_link:
    description: Monitoring Process Link
    value: { get_attr: [interface_monitor, link] }
 with parameters:
{"physical_port_name": "xe-0/0/1", "physical_device_hostname": "QFX-NW01", "tenant_id": "4b4cb858859842a389d0b0c8eb567d59", "device_ip": "10.161.0.33", "version": 1, "gohan_id": "0915a040-2f84-44fc-9083-1e2f719ae2eb"}, 
 and heat timeout = 6, rollback = False, 
using this jinja parameters: 
{} (heat.py - 280)
2019-02-01 00:28:37,705 [1;37mINFO[0m heat_worker - ese_physical_port:0915a040-2f84-44fc-9083-1e2f719ae2eb - Creating a stack ese_physical_port_0915a040-2f84-44fc-9083-1e2f719ae2eb with parameters: {u'physical_port_name': u'xe-0/0/1', u'physical_device_hostname': u'QFX-NW01', u'tenant_id': u'4b4cb858859842a389d0b0c8eb567d59', u'device_ip': u'10.161.0.33', u'version': 1, u'gohan_id': u'0915a040-2f84-44fc-9083-1e2f719ae2eb'}, timeout_mins: 6, and template: 
heat_template_version: 2013-05-23

description: >
  Physical port template

parameters:
  physical_device_hostname:
    type: string
    label: Physical Device Hostname
    description: Hostname of the physical device on which physical port will be created.
  physical_port_name:
    type: string
    label: Physical Interface Name
    description: Name of the physical port.
  gohan_id:
    type: string
    label: Gohan resource ID
    description: UUID of the ESE Physical Port
  device_ip:
    type: string
    label: Device IP Address
    description: Device IP Address.
  tenant_id:
    type: string
    label: Tenant ID
  version:
    type: number
    label: Config version

resources:
  physical_interface:
    type: OS::Contrail::ExistingResource
    properties:
      fq_name:
        - "default-global-system-config"
        - { get_param: physical_device_hostname }
        - { get_param: physical_port_name }
      resource_type: "physical_interface"

  interface_monitor:
    type: ESI::Monitoring::MonitoringTarget
    properties:
      type: snmp_ports_status
      resource_type: ese_physical_ports
      resource_id: { get_param: gohan_id }
      tenant_id: { get_param: tenant_id }
      version: { get_param: version }
      field_name: port
      properties:
        device_ip: { get_param: device_ip }
        if_name: { get_param: physical_port_name }
        community_name: ESE_NODE_COMMUNITY
      syncer_properties:
        etcd:
          status:
            key: port
    depends_on: physical_interface

outputs:
  id:
    description: A unique id for the physical interface
    value: { get_resource: physical_interface }
  name:
    description: The name of the physical interface.
    value: { get_attr: [physical_interface, name] }
  monitoring_target_id:
    description: Monitoring Target ID
    value: { get_resource: interface_monitor }
  monitoring_link:
    description: Monitoring Process Link
    value: { get_attr: [interface_monitor, link] } (heat.py - 297)
2019-02-01 00:28:38,069 [1;37mINFO[0m heat_worker - ese_physical_port:0915a040-2f84-44fc-9083-1e2f719ae2eb - Stack "ese_physical_port_0915a040-2f84-44fc-9083-1e2f719ae2eb" in status "CREATE_IN_PROGRESS" (heat.py - 356)
2019-02-01 00:28:39,126 [1;37mINFO[0m heat_worker - ese_physical_port:0915a040-2f84-44fc-9083-1e2f719ae2eb - Stack "ese_physical_port_0915a040-2f84-44fc-9083-1e2f719ae2eb" in status "CREATE_IN_PROGRESS" (heat.py - 356)
2019-02-01 00:28:40,180 [1;37mINFO[0m heat_worker - ese_physical_port:0915a040-2f84-44fc-9083-1e2f719ae2eb - Stack "ese_physical_port_0915a040-2f84-44fc-9083-1e2f719ae2eb" in status "CREATE_IN_PROGRESS" (heat.py - 356)
2019-02-01 00:28:41,357 [1;37mINFO[0m heat_worker - ese_physical_port:0915a040-2f84-44fc-9083-1e2f719ae2eb - Stack "ese_physical_port_0915a040-2f84-44fc-9083-1e2f719ae2eb" in status "CREATE_COMPLETE" (heat.py - 356)
2019-02-01 00:28:41,357 [1;37mINFO[0m heat_worker - ese_physical_port:0915a040-2f84-44fc-9083-1e2f719ae2eb - CREATED ese_physical_port_0915a040-2f84-44fc-9083-1e2f719ae2eb (heat.py - 414)
2019-02-01 00:28:41,617 [1;37mINFO[0m heat_worker - ese_physical_port:0915a040-2f84-44fc-9083-1e2f719ae2eb - Job create finished with results {'heat_outputs': [{u'output_value': u'39ab4e06-ac66-4e84-81c5-93b888427955', u'description': u'Monitoring Target ID', u'output_key': u'monitoring_target_id'}, {u'output_value': u'5a79909b-2bf3-4e26-8a9c-0bf6bb175457', u'description': u'A unique id for the physical interface', u'output_key': u'id'}, {u'output_value': u'http://collector-agents-se:7070/targets/39ab4e06-ac66-4e84-81c5-93b888427955', u'description': u'Monitoring Process Link', u'output_key': u'monitoring_link'}, {u'output_value': u'xe-0/0/38', u'description': u'The name of the physical interface.', u'output_key': u'name'}], 'orchestration_state': u'CREATE_COMPLETE', 'error': None} (heat_stacks_worker.py - 103)
2019-02-01 00:28:41,798 [1;37mINFO[0m heat_worker - ese_physical_port:0915a040-2f84-44fc-9083-1e2f719ae2eb - Job create:heat_worker:ese_physical_port:0915a040-2f84-44fc-9083-1e2f719ae2eb:1:gbjt1 finished. (job_queue.py - 266)
2019-02-01 00:28:41,808 [1;37mINFO[0m heat_worker - ese_physical_port:0915a040-2f84-44fc-9083-1e2f719ae2eb - Trying to delete internal process state for resource ese_physical_port:0915a040-2f84-44fc-9083-1e2f719ae2eb (resources.py - 701)
2019-02-01 00:29:07,366 [1;34mDEBUG[0m heat_worker - GetJob timeout. (etcd_worker.py - 227)
2019-02-01 00:29:07,366 [1;34mDEBUG[0m heat_worker - Waiting for a job. (etcd_worker.py - 218)
2019-02-01 00:29:07,367 [1;34mDEBUG[0m heat_worker - 8 job slots available (etcd_worker.py - 213)
2019-02-01 00:29:37,379 [1;34mDEBUG[0m heat_worker - GetJob timeout. (etcd_worker.py - 227)
2019-02-01 00:29:37,380 [1;34mDEBUG[0m heat_worker - Waiting for a job. (etcd_worker.py - 218)
2019-02-01 00:29:37,380 [1;34mDEBUG[0m heat_worker - 8 job slots available (etcd_worker.py - 213)
2019-02-01 00:29:47,367 [1;37mINFO[0m heat_worker - Reserved job: create:heat_worker:network:b761b0cd-d7c3-4b7a-b596-cea1cf9cc1e1:1:5dp3q using id: 83648111-527c-428e-be53-76ccbb2bbb09 (job_queue.py - 245)
2019-02-01 00:29:47,370 [1;34mDEBUG[0m heat_worker - Waiting for a job. (etcd_worker.py - 218)
2019-02-01 00:29:47,370 [1;34mDEBUG[0m heat_worker - 7 job slots available (etcd_worker.py - 213)
2019-02-01 00:29:47,375 [1;34mDEBUG[0m heat_worker - network:b761b0cd-d7c3-4b7a-b596-cea1cf9cc1e1 - Starting work on new ready job create:heat_worker:network:b761b0cd-d7c3-4b7a-b596-cea1cf9cc1e1:1:5dp3q (etcd_worker.py - 108)
2019-02-01 00:29:47,376 [1;34mDEBUG[0m heat_worker - network:b761b0cd-d7c3-4b7a-b596-cea1cf9cc1e1 - Checking job status for network:b761b0cd-d7c3-4b7a-b596-cea1cf9cc1e1 (heat_stacks_worker.py - 44)
2019-02-01 00:29:47,612 [1;37mINFO[0m heat_worker - network:b761b0cd-d7c3-4b7a-b596-cea1cf9cc1e1 - CREATE STARTED (heat_messenger.py - 92)
2019-02-01 00:29:47,723 [1;37mINFO[0m heat_worker - network:b761b0cd-d7c3-4b7a-b596-cea1cf9cc1e1 - Template id network resolved from mapping: Cnetwork (resources.py - 835)
2019-02-01 00:29:47,727 [1;34mDEBUG[0m heat_worker - network:b761b0cd-d7c3-4b7a-b596-cea1cf9cc1e1 - Heat template prepared: 
heat_template_version: 2013-05-23

description: >
  Network template

parameters:
  uuid:
    type: string
    label: Virtual Network UUID
    description: UUID of the virtual network that will be created.
    default: ""
  name:
    type: string
    label: Virtual Network Name
    description: Name of the virtual network that will be created.
  forwarding_mode:
    type: string
    label: Forwarding Mode
    description: Forwarding Mode.
    default: 'l2_l3'
  route_targets:
    type: comma_delimited_list
    label: Route Targets list
    default: []
  shared:
    type: boolean
    label: Shared Network
    default: false
  external:
    type: boolean
    label: External Network
    default: true
  allow_transit:
    type: boolean
    label: Allow Transit
    default: false
  admin_state_up:
    type: boolean
    label: Admin state up
    default: true

resources:
  network:
    type: OS::Contrail::VirtualNetwork
    properties:
      uuid: { get_param: uuid }
      name: { get_param: name }
      forwarding_mode: { get_param: forwarding_mode }
      route_targets: { get_param: route_targets }
      shared: { get_param: shared }
      admin_state_up: { get_param: admin_state_up }

outputs:
  id:
    description: A unique id for the virtual network.
    value: { get_resource: network }
  name:
    description: The name of the virtual network.
    value: { get_attr: [network, name] }
  fq_name:
    description: The FQ name of the virtual network.
    value: { get_attr: [network, fq_name] }
  route_targets:
    description: The name of the virtual network.
    value: { get_attr: [network, route_targets] }
 with parameters:
{"admin_state_up": true, "uuid": "b761b0cd-d7c3-4b7a-b596-cea1cf9cc1e1", "name": "b761b0cd-d7c3-4b7a-b596-cea1cf9cc1e1"}, 
 and heat timeout = 3, rollback = False, 
using this jinja parameters: 
{} (heat.py - 280)
2019-02-01 00:29:47,727 [1;37mINFO[0m heat_worker - network:b761b0cd-d7c3-4b7a-b596-cea1cf9cc1e1 - Creating a stack network_b761b0cd-d7c3-4b7a-b596-cea1cf9cc1e1 with parameters: {u'admin_state_up': True, u'uuid': u'b761b0cd-d7c3-4b7a-b596-cea1cf9cc1e1', u'name': u'b761b0cd-d7c3-4b7a-b596-cea1cf9cc1e1'}, timeout_mins: 3, and template: 
heat_template_version: 2013-05-23

description: >
  Network template

parameters:
  uuid:
    type: string
    label: Virtual Network UUID
    description: UUID of the virtual network that will be created.
    default: ""
  name:
    type: string
    label: Virtual Network Name
    description: Name of the virtual network that will be created.
  forwarding_mode:
    type: string
    label: Forwarding Mode
    description: Forwarding Mode.
    default: 'l2_l3'
  route_targets:
    type: comma_delimited_list
    label: Route Targets list
    default: []
  shared:
    type: boolean
    label: Shared Network
    default: false
  external:
    type: boolean
    label: External Network
    default: true
  allow_transit:
    type: boolean
    label: Allow Transit
    default: false
  admin_state_up:
    type: boolean
    label: Admin state up
    default: true

resources:
  network:
    type: OS::Contrail::VirtualNetwork
    properties:
      uuid: { get_param: uuid }
      name: { get_param: name }
      forwarding_mode: { get_param: forwarding_mode }
      route_targets: { get_param: route_targets }
      shared: { get_param: shared }
      admin_state_up: { get_param: admin_state_up }

outputs:
  id:
    description: A unique id for the virtual network.
    value: { get_resource: network }
  name:
    description: The name of the virtual network.
    value: { get_attr: [network, name] }
  fq_name:
    description: The FQ name of the virtual network.
    value: { get_attr: [network, fq_name] }
  route_targets:
    description: The name of the virtual network.
    value: { get_attr: [network, route_targets] } (heat.py - 297)
2019-02-01 00:29:48,179 [1;37mINFO[0m heat_worker - network:b761b0cd-d7c3-4b7a-b596-cea1cf9cc1e1 - Stack "network_b761b0cd-d7c3-4b7a-b596-cea1cf9cc1e1" in status "CREATE_IN_PROGRESS" (heat.py - 356)
2019-02-01 00:29:49,234 [1;37mINFO[0m heat_worker - network:b761b0cd-d7c3-4b7a-b596-cea1cf9cc1e1 - Stack "network_b761b0cd-d7c3-4b7a-b596-cea1cf9cc1e1" in status "CREATE_IN_PROGRESS" (heat.py - 356)
2019-02-01 00:29:50,418 [1;37mINFO[0m heat_worker - network:b761b0cd-d7c3-4b7a-b596-cea1cf9cc1e1 - Stack "network_b761b0cd-d7c3-4b7a-b596-cea1cf9cc1e1" in status "CREATE_COMPLETE" (heat.py - 356)
2019-02-01 00:29:50,418 [1;37mINFO[0m heat_worker - network:b761b0cd-d7c3-4b7a-b596-cea1cf9cc1e1 - CREATED network_b761b0cd-d7c3-4b7a-b596-cea1cf9cc1e1 (heat.py - 414)
2019-02-01 00:29:50,674 [1;37mINFO[0m heat_worker - network:b761b0cd-d7c3-4b7a-b596-cea1cf9cc1e1 - Job create finished with results {'heat_outputs': [{u'output_value': [], u'description': u'The name of the virtual network.', u'output_key': u'route_targets'}, {u'output_value': u'default-domain:usertenant:b761b0cd-d7c3-4b7a-b596-cea1cf9cc1e1', u'description': u'The FQ name of the virtual network.', u'output_key': u'fq_name'}, {u'output_value': u'b761b0cd-d7c3-4b7a-b596-cea1cf9cc1e1', u'description': u'A unique id for the virtual network.', u'output_key': u'id'}, {u'output_value': u'b761b0cd-d7c3-4b7a-b596-cea1cf9cc1e1', u'description': u'The name of the virtual network.', u'output_key': u'name'}], 'orchestration_state': u'CREATE_COMPLETE', 'error': None} (heat_stacks_worker.py - 103)
2019-02-01 00:29:50,721 [1;37mINFO[0m heat_worker - network:b761b0cd-d7c3-4b7a-b596-cea1cf9cc1e1 - Job create:heat_worker:network:b761b0cd-d7c3-4b7a-b596-cea1cf9cc1e1:1:5dp3q finished. (job_queue.py - 266)
2019-02-01 00:29:50,722 [1;37mINFO[0m heat_worker - network:b761b0cd-d7c3-4b7a-b596-cea1cf9cc1e1 - Trying to delete internal process state for resource network:b761b0cd-d7c3-4b7a-b596-cea1cf9cc1e1 (resources.py - 701)
2019-02-01 00:30:00,275 [1;37mINFO[0m heat_worker - Reserved job: create:heat_worker:subnet:215cb166-b0c5-4fbb-ad5f-948cb93119fe:1:gbmz4 using id: c7eac3e2-c11d-473a-95c3-e3562e5a2c0d (job_queue.py - 245)
2019-02-01 00:30:00,277 [1;34mDEBUG[0m heat_worker - Waiting for a job. (etcd_worker.py - 218)
2019-02-01 00:30:00,277 [1;34mDEBUG[0m heat_worker - 7 job slots available (etcd_worker.py - 213)
2019-02-01 00:30:00,287 [1;34mDEBUG[0m heat_worker - subnet:215cb166-b0c5-4fbb-ad5f-948cb93119fe - Starting work on new ready job create:heat_worker:subnet:215cb166-b0c5-4fbb-ad5f-948cb93119fe:1:gbmz4 (etcd_worker.py - 108)
2019-02-01 00:30:00,288 [1;34mDEBUG[0m heat_worker - subnet:215cb166-b0c5-4fbb-ad5f-948cb93119fe - Checking job status for subnet:215cb166-b0c5-4fbb-ad5f-948cb93119fe (heat_stacks_worker.py - 44)
2019-02-01 00:30:00,577 [1;37mINFO[0m heat_worker - subnet:215cb166-b0c5-4fbb-ad5f-948cb93119fe - CREATE STARTED (heat_messenger.py - 92)
2019-02-01 00:30:00,670 [1;37mINFO[0m heat_worker - subnet:215cb166-b0c5-4fbb-ad5f-948cb93119fe - Template id subnet resolved from mapping: Csubnet (resources.py - 835)
2019-02-01 00:30:00,678 [1;34mDEBUG[0m heat_worker - subnet:215cb166-b0c5-4fbb-ad5f-948cb93119fe - Heat template prepared: 
heat_template_version: 2013-05-23

description: >
  Subnet template

parameters:
  name:
    type: string
    label: Local Subnet Name
    description: Name of the local subnet that will be created.
  network_id:
    type: string
    label: Network ID
    description: ID of the network for which subnet will be created.
  cidr:
    type: string
    label: Local Subnet IP prefix
    description: IP prefix of the local subnet that will be created.
  gateway_ip:
    default: "0.0.0.0"
    type: string
    label: Default Gateway
    description: Default gateway for the local subnet that will be created.
  ipam:
    type: string
    label: IP Address Management
    description: IPAM for the local subnet that will be created.
    default: ''
  enable_dhcp:
    type: boolean
    label: Enable DHCP
    description: Enable DHCP
    default: true
  dhcp_server_address:
    type: string
    label: DHCP Server address
    description: DHCP Server address
    default: "0.0.0.0"
  allocation_pools:
    type: string
    label: Allocation Pools
    description: Allocation Pools
    default: []
  dns_nameservers:
    type: comma_delimited_list
    label: DNS Nameservers List
    description: DNS Nameservers List
    default: []
  ntp_servers:
    type: comma_delimited_list
    label: NTP Nameservers List
    description: NTP Nameservers List
    default: []
  host_routes:
    type: json
    label: Host Routes
    description: Host Routes
    default: []

resources:
  subnet:
    type: OS::Contrail::VnSubnet
    properties:
      name: { get_param: name }
      network_id: { get_param: network_id }
      ip_prefix: { get_param: cidr }
      default_gateway: { get_param: gateway_ip }
      ipam: { get_param: ipam }
      enable_dhcp: { get_param: enable_dhcp }
      dns_server_address: { get_param: dhcp_server_address }
      dns_nameservers: { get_param: dns_nameservers }
      ntp_servers: { get_param: ntp_servers }
      host_routes: { get_param: host_routes }
      allocation_pools: { get_param: allocation_pools }
      gateway_is_vrouter: false

outputs:
  id:
    description: A unique id for the local subnet.
    value: { get_resource: subnet }
  name:
    description: The name of the local subnet.
    value: { get_attr: [subnet, name] }
  network_id:
    description: A unique id for the network.
    value: { get_attr: [subnet, network_id] }
  ip_prefix:
    description: IP prefix of local subnet.
    value: { get_attr: [subnet, ip_prefix] }
  default_gateway:
    description: Default gateway of local subnet.
    value: { get_attr: [subnet, default_gateway] }
  ipam:
    description: IPAM this local subnet uses.
    value: { get_attr: [subnet, ipam] }
 with parameters:
{"name": "215cb166-b0c5-4fbb-ad5f-948cb93119fe", "enable_dhcp": true, "network_id": "b761b0cd-d7c3-4b7a-b596-cea1cf9cc1e1", "ipam": "default-domain:default-project:default-network-ipam", "dns_nameservers": ["0.0.0.0"], "allocation_pools": [{"start": "192.168.200.2", "end": "192.168.200.254"}], "dhcp_server_address": "192.168.200.2", "ntp_servers": [], "gateway_ip": "192.168.200.1", "host_routes": [], "cidr": "192.168.200.0/24"}, 
 and heat timeout = 3, rollback = False, 
using this jinja parameters: 
{} (heat.py - 280)
2019-02-01 00:30:00,679 [1;37mINFO[0m heat_worker - subnet:215cb166-b0c5-4fbb-ad5f-948cb93119fe - Creating a stack subnet_215cb166-b0c5-4fbb-ad5f-948cb93119fe with parameters: {u'name': u'215cb166-b0c5-4fbb-ad5f-948cb93119fe', u'enable_dhcp': True, u'network_id': u'b761b0cd-d7c3-4b7a-b596-cea1cf9cc1e1', u'ipam': u'default-domain:default-project:default-network-ipam', u'dns_nameservers': [u'0.0.0.0'], u'allocation_pools': [{u'start': u'192.168.200.2', u'end': u'192.168.200.254'}], u'dhcp_server_address': u'192.168.200.2', u'ntp_servers': [], u'gateway_ip': u'192.168.200.1', u'host_routes': [], u'cidr': u'192.168.200.0/24'}, timeout_mins: 3, and template: 
heat_template_version: 2013-05-23

description: >
  Subnet template

parameters:
  name:
    type: string
    label: Local Subnet Name
    description: Name of the local subnet that will be created.
  network_id:
    type: string
    label: Network ID
    description: ID of the network for which subnet will be created.
  cidr:
    type: string
    label: Local Subnet IP prefix
    description: IP prefix of the local subnet that will be created.
  gateway_ip:
    default: "0.0.0.0"
    type: string
    label: Default Gateway
    description: Default gateway for the local subnet that will be created.
  ipam:
    type: string
    label: IP Address Management
    description: IPAM for the local subnet that will be created.
    default: ''
  enable_dhcp:
    type: boolean
    label: Enable DHCP
    description: Enable DHCP
    default: true
  dhcp_server_address:
    type: string
    label: DHCP Server address
    description: DHCP Server address
    default: "0.0.0.0"
  allocation_pools:
    type: string
    label: Allocation Pools
    description: Allocation Pools
    default: []
  dns_nameservers:
    type: comma_delimited_list
    label: DNS Nameservers List
    description: DNS Nameservers List
    default: []
  ntp_servers:
    type: comma_delimited_list
    label: NTP Nameservers List
    description: NTP Nameservers List
    default: []
  host_routes:
    type: json
    label: Host Routes
    description: Host Routes
    default: []

resources:
  subnet:
    type: OS::Contrail::VnSubnet
    properties:
      name: { get_param: name }
      network_id: { get_param: network_id }
      ip_prefix: { get_param: cidr }
      default_gateway: { get_param: gateway_ip }
      ipam: { get_param: ipam }
      enable_dhcp: { get_param: enable_dhcp }
      dns_server_address: { get_param: dhcp_server_address }
      dns_nameservers: { get_param: dns_nameservers }
      ntp_servers: { get_param: ntp_servers }
      host_routes: { get_param: host_routes }
      allocation_pools: { get_param: allocation_pools }
      gateway_is_vrouter: false

outputs:
  id:
    description: A unique id for the local subnet.
    value: { get_resource: subnet }
  name:
    description: The name of the local subnet.
    value: { get_attr: [subnet, name] }
  network_id:
    description: A unique id for the network.
    value: { get_attr: [subnet, network_id] }
  ip_prefix:
    description: IP prefix of local subnet.
    value: { get_attr: [subnet, ip_prefix] }
  default_gateway:
    description: Default gateway of local subnet.
    value: { get_attr: [subnet, default_gateway] }
  ipam:
    description: IPAM this local subnet uses.
    value: { get_attr: [subnet, ipam] } (heat.py - 297)
2019-02-01 00:30:01,055 [1;37mINFO[0m heat_worker - subnet:215cb166-b0c5-4fbb-ad5f-948cb93119fe - Stack "subnet_215cb166-b0c5-4fbb-ad5f-948cb93119fe" in status "CREATE_IN_PROGRESS" (heat.py - 356)
2019-02-01 00:30:02,109 [1;37mINFO[0m heat_worker - subnet:215cb166-b0c5-4fbb-ad5f-948cb93119fe - Stack "subnet_215cb166-b0c5-4fbb-ad5f-948cb93119fe" in status "CREATE_IN_PROGRESS" (heat.py - 356)
2019-02-01 00:30:03,386 [1;37mINFO[0m heat_worker - subnet:215cb166-b0c5-4fbb-ad5f-948cb93119fe - Stack "subnet_215cb166-b0c5-4fbb-ad5f-948cb93119fe" in status "CREATE_COMPLETE" (heat.py - 356)
2019-02-01 00:30:03,386 [1;37mINFO[0m heat_worker - subnet:215cb166-b0c5-4fbb-ad5f-948cb93119fe - CREATED subnet_215cb166-b0c5-4fbb-ad5f-948cb93119fe (heat.py - 414)
2019-02-01 00:30:03,722 [1;37mINFO[0m heat_worker - subnet:215cb166-b0c5-4fbb-ad5f-948cb93119fe - Job create finished with results {'heat_outputs': [{u'output_value': u'192.168.200.0/24', u'description': u'IP prefix of local subnet.', u'output_key': u'ip_prefix'}, {u'output_value': u'215cb166-b0c5-4fbb-ad5f-948cb93119fe', u'description': u'The name of the local subnet.', u'output_key': u'name'}, {u'output_value': u'192.168.200.1', u'description': u'Default gateway of local subnet.', u'output_key': u'default_gateway'}, {u'output_value': u'b761b0cd-d7c3-4b7a-b596-cea1cf9cc1e1', u'description': u'A unique id for the network.', u'output_key': u'network_id'}, {u'output_value': u'5a79909b-2bf3-4e26-8a9c-0bf6bb175457', u'description': u'IPAM this local subnet uses.', u'output_key': u'ipam'}, {u'output_value': u'622495a6-b651-4033-9d30-c634e4b08851', u'description': u'A unique id for the local subnet.', u'output_key': u'id'}], 'orchestration_state': u'CREATE_COMPLETE', 'error': None} (heat_stacks_worker.py - 103)
2019-02-01 00:30:03,764 [1;37mINFO[0m heat_worker - subnet:215cb166-b0c5-4fbb-ad5f-948cb93119fe - Job create:heat_worker:subnet:215cb166-b0c5-4fbb-ad5f-948cb93119fe:1:gbmz4 finished. (job_queue.py - 266)
2019-02-01 00:30:03,765 [1;37mINFO[0m heat_worker - subnet:215cb166-b0c5-4fbb-ad5f-948cb93119fe - Trying to delete internal process state for resource subnet:215cb166-b0c5-4fbb-ad5f-948cb93119fe (resources.py - 701)
2019-02-01 00:30:13,607 [1;37mINFO[0m heat_worker - Reserved job: create:heat_worker:port:3a04e6ed-68fb-4534-8822-d5162d19f35a:1:0g0mv using id: 706b89df-4221-4102-ae01-7cbe8dbdc723 (job_queue.py - 245)
2019-02-01 00:30:13,608 [1;34mDEBUG[0m heat_worker - Waiting for a job. (etcd_worker.py - 218)
2019-02-01 00:30:13,609 [1;34mDEBUG[0m heat_worker - 7 job slots available (etcd_worker.py - 213)
2019-02-01 00:30:13,615 [1;34mDEBUG[0m heat_worker - port:3a04e6ed-68fb-4534-8822-d5162d19f35a - Starting work on new ready job create:heat_worker:port:3a04e6ed-68fb-4534-8822-d5162d19f35a:1:0g0mv (etcd_worker.py - 108)
2019-02-01 00:30:13,615 [1;34mDEBUG[0m heat_worker - port:3a04e6ed-68fb-4534-8822-d5162d19f35a - Checking job status for port:3a04e6ed-68fb-4534-8822-d5162d19f35a (heat_stacks_worker.py - 44)
2019-02-01 00:30:13,869 [1;37mINFO[0m heat_worker - port:3a04e6ed-68fb-4534-8822-d5162d19f35a - CREATE STARTED (heat_messenger.py - 92)
2019-02-01 00:30:13,962 [1;37mINFO[0m heat_worker - port:3a04e6ed-68fb-4534-8822-d5162d19f35a - Template id port resolved from mapping: {u'else_mapping': {u'constant': u'port'}, u'if_mapping': {u'regexp': [{u'field': u'device_owner'}, {u'constant': u'network:dhcp|network:empty'}]}, u'then_mapping': {u'constant': None}} (resources.py - 835)
2019-02-01 00:30:13,975 [1;34mDEBUG[0m heat_worker - port:3a04e6ed-68fb-4534-8822-d5162d19f35a - Heat template prepared: 
heat_template_version: 2013-05-23

description: >
  Virtual Machine Interface Template

parameters:
  uuid:
    type: string
    label: Backend Virtual Machine Interface UUID
    description: A unique id for the Virtual Machine Interface.
  name:
    type: string
    label: Physical Interface ID
    description: A unique id for the Physical Interface.
  security_groups:
    type: json
    default: []
    label: Security Groups List
    description: The IDs of security groups applied to the port.
  virtual_machine_interface_allowed_address_pairs:
    type: json
    label: Virtual machine interface allowed address pairs.
  virtual_machine_interface_mac_address:
    type: string
    default: "fe:ff:ff:ff:ff:ff"
    label: Virtual machine interface mac address.
  virtual_network:
    type: string
    label: Virtual Network.
  virtual_machine:
    type: string
    label: Virtual Machine.
    default: ""
  device_owner:
    type: string
    label: Device Owner
    default: ""
  admin_state_up:
    type: boolean
    label: Admin state up
    default: true
  tenant_id:
    type: string
    label: Tenant ID
  version:
    type: number
    label: Config version

resources:
  virtual_machine_interface:
    type: OS::Contrail::VirtualMachineInterface
    properties:
      uuid: { get_param: uuid }
      name: { get_param: name }
      virtual_machine_interface_allowed_address_pairs: { get_param: virtual_machine_interface_allowed_address_pairs }
      virtual_machine_interface_mac_addresses: [ { get_param: virtual_machine_interface_mac_address } ]
      virtual_networks: [ { get_param: virtual_network } ]
      virtual_machine: { get_param: virtual_machine }
      device_owner: { get_param: device_owner }
      admin_state_up: { get_param: admin_state_up }
      security_groups: { get_param: security_groups }



  instance_ip_0:
    type: OS::Contrail::InstanceIp
    properties:
      name:
        str_replace:
          template: '%name%_%zone%_%ip%'
          params:
            "%name%": { get_param: name }
            "%zone%": 215cb166-b0c5-4fbb-ad5f-948cb93119fe
            "%ip%": 192.168.200.101
      ip_address: 192.168.200.101
      subnet_id: 622495a6-b651-4033-9d30-c634e4b08851
      network_id: { get_param: virtual_network }
      virtual_machine_interfaces: [ { get_resource: virtual_machine_interface } ]




outputs:
  id:
    description: A unique id for the virtual machine interface.
    value: { get_resource: virtual_machine_interface }
  mac_address:
    description: Virtual machine interface mac address.
    value: { get_attr: [virtual_machine_interface, virtual_machine_interface_mac_addresses] }
  allowed_address_pairs:
    description: Virtual machine allowed address pairs.
    value: { get_attr: [virtual_machine_interface, virtual_machine_interface_allowed_address_pairs] }
  virtual_network:
    description: Virtual network.
    value: { get_attr: [virtual_machine_interface, virtual_networks] }
  fq_name:
    description: Fully Qualified Name of the VMI
    value: { get_attr: [virtual_machine_interface, fq_name] }

 with parameters:
{"virtual_machine": "c13acfa3-6780-4f53-90da-492dfd697e69", "name": "3a04e6ed-68fb-4534-8822-d5162d19f35a", "admin_state_up": true, "tenant_id": "4b4cb858859842a389d0b0c8eb567d59", "device_owner": "physical_port", "virtual_machine_interface_allowed_address_pairs": [], "virtual_machine_interface_mac_address": "fa:16:3e:e7:7c:0f", "version": 1, "virtual_network": "b761b0cd-d7c3-4b7a-b596-cea1cf9cc1e1", "security_groups": [], "uuid": "3a04e6ed-68fb-4534-8822-d5162d19f35a"}, 
 and heat timeout = 13, rollback = False, 
using this jinja parameters: 
{u'jinja_attached': False, u'jinja_force_dependency_gw_interface': None, u'jinja_fixed_ips': [{u'subnet_id': u'215cb166-b0c5-4fbb-ad5f-948cb93119fe', u'ip_address': u'192.168.200.101'}], u'jinja_force_dependency_cfg': None, u'jinja_device_owner': u'physical_port', u'jinja_subnets': [u'622495a6-b651-4033-9d30-c634e4b08851']} (heat.py - 280)
2019-02-01 00:30:13,975 [1;37mINFO[0m heat_worker - port:3a04e6ed-68fb-4534-8822-d5162d19f35a - Creating a stack port_3a04e6ed-68fb-4534-8822-d5162d19f35a with parameters: {u'virtual_machine': u'c13acfa3-6780-4f53-90da-492dfd697e69', u'name': u'3a04e6ed-68fb-4534-8822-d5162d19f35a', u'admin_state_up': True, u'tenant_id': u'4b4cb858859842a389d0b0c8eb567d59', u'device_owner': u'physical_port', u'virtual_machine_interface_allowed_address_pairs': [], u'virtual_machine_interface_mac_address': u'fa:16:3e:e7:7c:0f', u'version': 1, u'virtual_network': u'b761b0cd-d7c3-4b7a-b596-cea1cf9cc1e1', u'security_groups': [], u'uuid': u'3a04e6ed-68fb-4534-8822-d5162d19f35a'}, timeout_mins: 13, and template: 
heat_template_version: 2013-05-23

description: >
  Virtual Machine Interface Template

parameters:
  uuid:
    type: string
    label: Backend Virtual Machine Interface UUID
    description: A unique id for the Virtual Machine Interface.
  name:
    type: string
    label: Physical Interface ID
    description: A unique id for the Physical Interface.
  security_groups:
    type: json
    default: []
    label: Security Groups List
    description: The IDs of security groups applied to the port.
  virtual_machine_interface_allowed_address_pairs:
    type: json
    label: Virtual machine interface allowed address pairs.
  virtual_machine_interface_mac_address:
    type: string
    default: "fe:ff:ff:ff:ff:ff"
    label: Virtual machine interface mac address.
  virtual_network:
    type: string
    label: Virtual Network.
  virtual_machine:
    type: string
    label: Virtual Machine.
    default: ""
  device_owner:
    type: string
    label: Device Owner
    default: ""
  admin_state_up:
    type: boolean
    label: Admin state up
    default: true
  tenant_id:
    type: string
    label: Tenant ID
  version:
    type: number
    label: Config version

resources:
  virtual_machine_interface:
    type: OS::Contrail::VirtualMachineInterface
    properties:
      uuid: { get_param: uuid }
      name: { get_param: name }
      virtual_machine_interface_allowed_address_pairs: { get_param: virtual_machine_interface_allowed_address_pairs }
      virtual_machine_interface_mac_addresses: [ { get_param: virtual_machine_interface_mac_address } ]
      virtual_networks: [ { get_param: virtual_network } ]
      virtual_machine: { get_param: virtual_machine }
      device_owner: { get_param: device_owner }
      admin_state_up: { get_param: admin_state_up }
      security_groups: { get_param: security_groups }



  instance_ip_0:
    type: OS::Contrail::InstanceIp
    properties:
      name:
        str_replace:
          template: '%name%_%zone%_%ip%'
          params:
            "%name%": { get_param: name }
            "%zone%": 215cb166-b0c5-4fbb-ad5f-948cb93119fe
            "%ip%": 192.168.200.101
      ip_address: 192.168.200.101
      subnet_id: 622495a6-b651-4033-9d30-c634e4b08851
      network_id: { get_param: virtual_network }
      virtual_machine_interfaces: [ { get_resource: virtual_machine_interface } ]




outputs:
  id:
    description: A unique id for the virtual machine interface.
    value: { get_resource: virtual_machine_interface }
  mac_address:
    description: Virtual machine interface mac address.
    value: { get_attr: [virtual_machine_interface, virtual_machine_interface_mac_addresses] }
  allowed_address_pairs:
    description: Virtual machine allowed address pairs.
    value: { get_attr: [virtual_machine_interface, virtual_machine_interface_allowed_address_pairs] }
  virtual_network:
    description: Virtual network.
    value: { get_attr: [virtual_machine_interface, virtual_networks] }
  fq_name:
    description: Fully Qualified Name of the VMI
    value: { get_attr: [virtual_machine_interface, fq_name] }
 (heat.py - 297)
2019-02-01 00:30:14,349 [1;37mINFO[0m heat_worker - port:3a04e6ed-68fb-4534-8822-d5162d19f35a - Stack "port_3a04e6ed-68fb-4534-8822-d5162d19f35a" in status "CREATE_IN_PROGRESS" (heat.py - 356)
2019-02-01 00:30:15,432 [1;37mINFO[0m heat_worker - port:3a04e6ed-68fb-4534-8822-d5162d19f35a - Stack "port_3a04e6ed-68fb-4534-8822-d5162d19f35a" in status "CREATE_IN_PROGRESS" (heat.py - 356)
2019-02-01 00:30:16,486 [1;37mINFO[0m heat_worker - port:3a04e6ed-68fb-4534-8822-d5162d19f35a - Stack "port_3a04e6ed-68fb-4534-8822-d5162d19f35a" in status "CREATE_IN_PROGRESS" (heat.py - 356)
2019-02-01 00:30:17,671 [1;37mINFO[0m heat_worker - port:3a04e6ed-68fb-4534-8822-d5162d19f35a - Stack "port_3a04e6ed-68fb-4534-8822-d5162d19f35a" in status "CREATE_COMPLETE" (heat.py - 356)
2019-02-01 00:30:17,672 [1;37mINFO[0m heat_worker - port:3a04e6ed-68fb-4534-8822-d5162d19f35a - CREATED port_3a04e6ed-68fb-4534-8822-d5162d19f35a (heat.py - 414)
2019-02-01 00:30:17,928 [1;37mINFO[0m heat_worker - port:3a04e6ed-68fb-4534-8822-d5162d19f35a - Job create finished with results {'heat_outputs': [{u'output_value': [[u'default-domain', u'admin', u'b62eefe0-0872-478d-adfe-1a606320f0e7']], u'description': u'Virtual network.', u'output_key': u'virtual_network'}, {u'output_value': u'default-domain:admin:f68d0924-ef20-4c1b-ac45-0e6b879af5e7', u'description': u'Fully Qualified Name of the VMI', u'output_key': u'fq_name'}, {u'output_value': u'f68d0924-ef20-4c1b-ac45-0e6b879af5e7', u'description': u'A unique id for the virtual machine interface.', u'output_key': u'id'}, {u'output_value': {u'allowed_address_pair': []}, u'description': u'Virtual machine allowed address pairs.', u'output_key': u'allowed_address_pairs'}, {u'output_value': [u'fa:16:3e:f7:60:7f'], u'description': u'Virtual machine interface mac address.', u'output_key': u'mac_address'}], 'orchestration_state': u'CREATE_COMPLETE', 'error': None} (heat_stacks_worker.py - 103)
2019-02-01 00:30:17,981 [1;37mINFO[0m heat_worker - port:3a04e6ed-68fb-4534-8822-d5162d19f35a - Job create:heat_worker:port:3a04e6ed-68fb-4534-8822-d5162d19f35a:1:0g0mv finished. (job_queue.py - 266)
2019-02-01 00:30:17,983 [1;37mINFO[0m heat_worker - port:3a04e6ed-68fb-4534-8822-d5162d19f35a - Trying to delete internal process state for resource port:3a04e6ed-68fb-4534-8822-d5162d19f35a (resources.py - 701)
2019-02-01 00:30:18,064 [1;37mINFO[0m heat_worker - Reserved job: create:heat_worker:ese_logical_port:74522211-c8db-41b6-8a35-4fac9656713c:1:lxiiz using id: f67ff47d-d4d8-43c2-a716-aff4cdbbe17d (job_queue.py - 245)
2019-02-01 00:30:18,067 [1;34mDEBUG[0m heat_worker - Waiting for a job. (etcd_worker.py - 218)
2019-02-01 00:30:18,067 [1;34mDEBUG[0m heat_worker - 7 job slots available (etcd_worker.py - 213)
2019-02-01 00:30:18,082 [1;34mDEBUG[0m heat_worker - ese_logical_port:74522211-c8db-41b6-8a35-4fac9656713c - Starting work on new ready job create:heat_worker:ese_logical_port:74522211-c8db-41b6-8a35-4fac9656713c:1:lxiiz (etcd_worker.py - 108)
2019-02-01 00:30:18,083 [1;34mDEBUG[0m heat_worker - ese_logical_port:74522211-c8db-41b6-8a35-4fac9656713c - Checking job status for ese_logical_port:74522211-c8db-41b6-8a35-4fac9656713c (heat_stacks_worker.py - 44)
2019-02-01 00:30:18,345 [1;37mINFO[0m heat_worker - ese_logical_port:74522211-c8db-41b6-8a35-4fac9656713c - CREATE STARTED (heat_messenger.py - 92)
2019-02-01 00:30:18,451 [1;37mINFO[0m heat_worker - ese_logical_port:74522211-c8db-41b6-8a35-4fac9656713c - Template id ese_logical_port resolved from mapping: Cese_logical_port (resources.py - 835)
2019-02-01 00:30:18,459 [1;34mDEBUG[0m heat_worker - ese_logical_port:74522211-c8db-41b6-8a35-4fac9656713c - Heat template prepared: 
heat_template_version: 2013-05-23

description: >
  Logical port template

parameters:
  physical_port_id:
    type: string
    label: Physical Interface ID
    description: A unique id for the Physical Interface.
  logical_port_name:
    type: string
    label: Logical Port Name
    description: Name of the logical port.
  logical_port_type:
    type: string
    label: Logical Port Type
    description: Type of the logical port.
  logical_port_vlan_id:
    type: number
    label: VLAN id for Logical Port
    description: VLAN id to use for logical port creation.
    default: 0
  virtual_machine_interface_ids:
    type: comma_delimited_list
    label: Virtual Machine Interface ID
    description: Virtual Machine Interface ID.
  gohan_id:
    type: string
    label: Gohan resource ID
    description: UUID of the ESE Physical Port
  device_ip:
    type: string
    label: Device IP Address
    description: Device IP Address.
  tenant_id:
    type: string
    label: Tenant ID
  version:
    type: number
    label: Config version

resources:
  logical_interface:
    type: OS::Contrail::LogicalInterface
    properties:
      name: { get_param: logical_port_name }
      physical_interface: { get_param: physical_port_id }
      virtual_machine_interfaces: { get_param: virtual_machine_interface_ids }
      type: { get_param: logical_port_type }
      vlan: { get_param: logical_port_vlan_id }

  interface_monitor:
    type: ESI::Monitoring::MonitoringTarget
    properties:
      type: snmp_ports
      resource_type: ese_logical_ports
      resource_id: { get_param: gohan_id }
      tenant_id: { get_param: tenant_id }
      version: { get_param: version }
      field_name: logical_port
      properties:
        device_ip: { get_param: device_ip }
        if_name: { get_param: logical_port_name }
        community_name: ESE_NODE_COMMUNITY
      syncer_properties:
        etcd:
          status:
            key: logical_port
          hold_options:
            positive_status:
              - UP
              - DOWN
            time_seconds: 30
        tsdb:
          traffic.in:
            metric: traffic.bytes
            tags:
              
              -  resource_id: { get_param: gohan_id }
                 port_id: 3a04e6ed-68fb-4534-8822-d5162d19f35a
                 direction: in
              
          traffic.out:
            metric: traffic.bytes
            tags:
              
              -  resource_id: { get_param: gohan_id }
                 port_id: 3a04e6ed-68fb-4534-8822-d5162d19f35a
                 direction: out
              
    depends_on: logical_interface

outputs:
  id:
    description: A unique id for the logical interface
    value: { get_resource: logical_interface }
  name:
    description: The name of the logical interface.
    value: { get_attr: [logical_interface, name] }
  monitoring_target_id:
    description: Monitoring Target ID
    value: { get_resource: interface_monitor }
  monitoring_link:
    description: Monitoring Process Link
    value: { get_attr: [interface_monitor, link] }
 with parameters:
{"logical_port_type": "L2", "logical_port_vlan_id": 1003, "tenant_id": "4b4cb858859842a389d0b0c8eb567d59", "device_ip": "10.161.0.33", "version": 1, "virtual_machine_interface_ids": ["f68d0924-ef20-4c1b-ac45-0e6b879af5e7"], "logical_port_name": "xe-0/0/1.1003", "gohan_id": "74522211-c8db-41b6-8a35-4fac9656713c", "physical_port_id": "5a79909b-2bf3-4e26-8a9c-0bf6bb175457"}, 
 and heat timeout = 6, rollback = False, 
using this jinja parameters: 
{u'jinja_port_ids': [u'3a04e6ed-68fb-4534-8822-d5162d19f35a']} (heat.py - 280)
2019-02-01 00:30:18,459 [1;37mINFO[0m heat_worker - ese_logical_port:74522211-c8db-41b6-8a35-4fac9656713c - Creating a stack ese_logical_port_74522211-c8db-41b6-8a35-4fac9656713c with parameters: {u'logical_port_type': u'L2', u'logical_port_vlan_id': 1003, u'tenant_id': u'4b4cb858859842a389d0b0c8eb567d59', u'device_ip': u'10.161.0.33', u'version': 1, u'virtual_machine_interface_ids': [u'f68d0924-ef20-4c1b-ac45-0e6b879af5e7'], u'logical_port_name': u'xe-0/0/1.1003', u'gohan_id': u'74522211-c8db-41b6-8a35-4fac9656713c', u'physical_port_id': u'5a79909b-2bf3-4e26-8a9c-0bf6bb175457'}, timeout_mins: 6, and template: 
heat_template_version: 2013-05-23

description: >
  Logical port template

parameters:
  physical_port_id:
    type: string
    label: Physical Interface ID
    description: A unique id for the Physical Interface.
  logical_port_name:
    type: string
    label: Logical Port Name
    description: Name of the logical port.
  logical_port_type:
    type: string
    label: Logical Port Type
    description: Type of the logical port.
  logical_port_vlan_id:
    type: number
    label: VLAN id for Logical Port
    description: VLAN id to use for logical port creation.
    default: 0
  virtual_machine_interface_ids:
    type: comma_delimited_list
    label: Virtual Machine Interface ID
    description: Virtual Machine Interface ID.
  gohan_id:
    type: string
    label: Gohan resource ID
    description: UUID of the ESE Physical Port
  device_ip:
    type: string
    label: Device IP Address
    description: Device IP Address.
  tenant_id:
    type: string
    label: Tenant ID
  version:
    type: number
    label: Config version

resources:
  logical_interface:
    type: OS::Contrail::LogicalInterface
    properties:
      name: { get_param: logical_port_name }
      physical_interface: { get_param: physical_port_id }
      virtual_machine_interfaces: { get_param: virtual_machine_interface_ids }
      type: { get_param: logical_port_type }
      vlan: { get_param: logical_port_vlan_id }

  interface_monitor:
    type: ESI::Monitoring::MonitoringTarget
    properties:
      type: snmp_ports
      resource_type: ese_logical_ports
      resource_id: { get_param: gohan_id }
      tenant_id: { get_param: tenant_id }
      version: { get_param: version }
      field_name: logical_port
      properties:
        device_ip: { get_param: device_ip }
        if_name: { get_param: logical_port_name }
        community_name: ESE_NODE_COMMUNITY
      syncer_properties:
        etcd:
          status:
            key: logical_port
          hold_options:
            positive_status:
              - UP
              - DOWN
            time_seconds: 30
        tsdb:
          traffic.in:
            metric: traffic.bytes
            tags:
              
              -  resource_id: { get_param: gohan_id }
                 port_id: 3a04e6ed-68fb-4534-8822-d5162d19f35a
                 direction: in
              
          traffic.out:
            metric: traffic.bytes
            tags:
              
              -  resource_id: { get_param: gohan_id }
                 port_id: 3a04e6ed-68fb-4534-8822-d5162d19f35a
                 direction: out
              
    depends_on: logical_interface

outputs:
  id:
    description: A unique id for the logical interface
    value: { get_resource: logical_interface }
  name:
    description: The name of the logical interface.
    value: { get_attr: [logical_interface, name] }
  monitoring_target_id:
    description: Monitoring Target ID
    value: { get_resource: interface_monitor }
  monitoring_link:
    description: Monitoring Process Link
    value: { get_attr: [interface_monitor, link] } (heat.py - 297)
2019-02-01 00:30:18,927 [1;37mINFO[0m heat_worker - ese_logical_port:74522211-c8db-41b6-8a35-4fac9656713c - Stack "ese_logical_port_74522211-c8db-41b6-8a35-4fac9656713c" in status "CREATE_IN_PROGRESS" (heat.py - 356)
2019-02-01 00:30:20,008 [1;37mINFO[0m heat_worker - ese_logical_port:74522211-c8db-41b6-8a35-4fac9656713c - Stack "ese_logical_port_74522211-c8db-41b6-8a35-4fac9656713c" in status "CREATE_IN_PROGRESS" (heat.py - 356)
2019-02-01 00:30:21,072 [1;37mINFO[0m heat_worker - ese_logical_port:74522211-c8db-41b6-8a35-4fac9656713c - Stack "ese_logical_port_74522211-c8db-41b6-8a35-4fac9656713c" in status "CREATE_IN_PROGRESS" (heat.py - 356)
2019-02-01 00:30:22,251 [1;37mINFO[0m heat_worker - ese_logical_port:74522211-c8db-41b6-8a35-4fac9656713c - Stack "ese_logical_port_74522211-c8db-41b6-8a35-4fac9656713c" in status "CREATE_COMPLETE" (heat.py - 356)
2019-02-01 00:30:22,252 [1;37mINFO[0m heat_worker - ese_logical_port:74522211-c8db-41b6-8a35-4fac9656713c - CREATED ese_logical_port_74522211-c8db-41b6-8a35-4fac9656713c (heat.py - 414)
2019-02-01 00:30:22,484 [1;37mINFO[0m heat_worker - ese_logical_port:74522211-c8db-41b6-8a35-4fac9656713c - Job create finished with results {'heat_outputs': [{u'output_value': u'17a787f7-e191-48c3-adaf-692a20a3768f', u'description': u'Monitoring Target ID', u'output_key': u'monitoring_target_id'}, {u'output_value': u'46b0cd68-d0fb-4d72-9def-830164f9e215', u'description': u'A unique id for the logical interface', u'output_key': u'id'}, {u'output_value': u'http://collector-agents-se:7070/targets/17a787f7-e191-48c3-adaf-692a20a3768f', u'description': u'Monitoring Process Link', u'output_key': u'monitoring_link'}, {u'output_value': u'xe-0/0/38.0', u'description': u'The name of the logical interface.', u'output_key': u'name'}], 'orchestration_state': u'CREATE_COMPLETE', 'error': None} (heat_stacks_worker.py - 103)
2019-02-01 00:30:22,528 [1;37mINFO[0m heat_worker - ese_logical_port:74522211-c8db-41b6-8a35-4fac9656713c - Job create:heat_worker:ese_logical_port:74522211-c8db-41b6-8a35-4fac9656713c:1:lxiiz finished. (job_queue.py - 266)
2019-02-01 00:30:22,529 [1;37mINFO[0m heat_worker - ese_logical_port:74522211-c8db-41b6-8a35-4fac9656713c - Trying to delete internal process state for resource ese_logical_port:74522211-c8db-41b6-8a35-4fac9656713c (resources.py - 701)
2019-02-01 00:30:22,730 [1;37mINFO[0m heat_worker - Reserved job: modify:heat_worker:port:3a04e6ed-68fb-4534-8822-d5162d19f35a:2:28a9m using id: 99c76b95-73f2-42ff-a404-85279ba8d86c (job_queue.py - 245)
2019-02-01 00:30:22,732 [1;34mDEBUG[0m heat_worker - Waiting for a job. (etcd_worker.py - 218)
2019-02-01 00:30:22,733 [1;34mDEBUG[0m heat_worker - 7 job slots available (etcd_worker.py - 213)
2019-02-01 00:30:22,764 [1;34mDEBUG[0m heat_worker - port:3a04e6ed-68fb-4534-8822-d5162d19f35a - Starting work on new ready job modify:heat_worker:port:3a04e6ed-68fb-4534-8822-d5162d19f35a:2:28a9m (etcd_worker.py - 108)
2019-02-01 00:30:22,764 [1;34mDEBUG[0m heat_worker - port:3a04e6ed-68fb-4534-8822-d5162d19f35a - Checking job status for port:3a04e6ed-68fb-4534-8822-d5162d19f35a (heat_stacks_worker.py - 44)
2019-02-01 00:30:23,268 [1;37mINFO[0m heat_worker - port:3a04e6ed-68fb-4534-8822-d5162d19f35a - Found stack with status CREATE_COMPLETE for port:3a04e6ed-68fb-4534-8822-d5162d19f35a (heat_stacks_worker.py - 55)
2019-02-01 00:30:23,268 [1;37mINFO[0m heat_worker - port:3a04e6ed-68fb-4534-8822-d5162d19f35a - MODIFY STARTED (heat_messenger.py - 123)
2019-02-01 00:30:23,865 [1;37mINFO[0m heat_worker - port:3a04e6ed-68fb-4534-8822-d5162d19f35a - Template id port resolved from mapping: {u'else_mapping': {u'constant': u'port'}, u'if_mapping': {u'regexp': [{u'field': u'device_owner'}, {u'constant': u'network:dhcp|network:empty'}]}, u'then_mapping': {u'constant': None}} (resources.py - 835)
2019-02-01 00:30:23,875 [1;34mDEBUG[0m heat_worker - port:3a04e6ed-68fb-4534-8822-d5162d19f35a - Heat template prepared: 
heat_template_version: 2013-05-23

description: >
  Virtual Machine Interface Template

parameters:
  uuid:
    type: string
    label: Backend Virtual Machine Interface UUID
    description: A unique id for the Virtual Machine Interface.
  name:
    type: string
    label: Physical Interface ID
    description: A unique id for the Physical Interface.
  security_groups:
    type: json
    default: []
    label: Security Groups List
    description: The IDs of security groups applied to the port.
  virtual_machine_interface_allowed_address_pairs:
    type: json
    label: Virtual machine interface allowed address pairs.
  virtual_machine_interface_mac_address:
    type: string
    default: "fe:ff:ff:ff:ff:ff"
    label: Virtual machine interface mac address.
  virtual_network:
    type: string
    label: Virtual Network.
  virtual_machine:
    type: string
    label: Virtual Machine.
    default: ""
  device_owner:
    type: string
    label: Device Owner
    default: ""
  admin_state_up:
    type: boolean
    label: Admin state up
    default: true
  tenant_id:
    type: string
    label: Tenant ID
  version:
    type: number
    label: Config version

resources:
  virtual_machine_interface:
    type: OS::Contrail::VirtualMachineInterface
    properties:
      uuid: { get_param: uuid }
      name: { get_param: name }
      virtual_machine_interface_allowed_address_pairs: { get_param: virtual_machine_interface_allowed_address_pairs }
      virtual_machine_interface_mac_addresses: [ { get_param: virtual_machine_interface_mac_address } ]
      virtual_networks: [ { get_param: virtual_network } ]
      virtual_machine: { get_param: virtual_machine }
      device_owner: { get_param: device_owner }
      admin_state_up: { get_param: admin_state_up }
      security_groups: { get_param: security_groups }



  instance_ip_0:
    type: OS::Contrail::InstanceIp
    properties:
      name:
        str_replace:
          template: '%name%_%zone%_%ip%'
          params:
            "%name%": { get_param: name }
            "%zone%": 215cb166-b0c5-4fbb-ad5f-948cb93119fe
            "%ip%": 192.168.200.101
      ip_address: 192.168.200.101
      subnet_id: 622495a6-b651-4033-9d30-c634e4b08851
      network_id: { get_param: virtual_network }
      virtual_machine_interfaces: [ { get_resource: virtual_machine_interface } ]



  vmi_monitor:
    type: ESI::Monitoring::MonitoringTarget
    properties:
      type: virtual_machine_interface
      resource_type: ports
      resource_id: { get_param: uuid }
      field_name: vmi
      tenant_id: { get_param: tenant_id }
      version: { get_param: version }
      properties:
        fq_name: { get_attr: [virtual_machine_interface, fq_name] }
      syncer_properties:
        etcd:
          status:
            key: vmi
          hold_options:
            positive_status:
              - UP
              - DOWN
            time_seconds: 210
        tsdb:
          traffic.in:
            metric: traffic.bps
            tags:
              resource_id: { get_param: uuid }
              direction: in
          traffic.out:
            metric: traffic.bps
            tags:
              resource_id: { get_param: uuid }
              direction: out
    depends_on: virtual_machine_interface


outputs:
  id:
    description: A unique id for the virtual machine interface.
    value: { get_resource: virtual_machine_interface }
  mac_address:
    description: Virtual machine interface mac address.
    value: { get_attr: [virtual_machine_interface, virtual_machine_interface_mac_addresses] }
  allowed_address_pairs:
    description: Virtual machine allowed address pairs.
    value: { get_attr: [virtual_machine_interface, virtual_machine_interface_allowed_address_pairs] }
  virtual_network:
    description: Virtual network.
    value: { get_attr: [virtual_machine_interface, virtual_networks] }
  fq_name:
    description: Fully Qualified Name of the VMI
    value: { get_attr: [virtual_machine_interface, fq_name] }

  monitoring_target_id:
    description: Monitoring Target ID
    value: { get_resource: vmi_monitor }
  monitoring_link:
    description: Monitoring Process Link
    value: { get_attr: [vmi_monitor, link] }

 with parameters:
{"virtual_machine": "c13acfa3-6780-4f53-90da-492dfd697e69", "name": "3a04e6ed-68fb-4534-8822-d5162d19f35a", "admin_state_up": true, "tenant_id": "4b4cb858859842a389d0b0c8eb567d59", "device_owner": "physical_port", "virtual_machine_interface_allowed_address_pairs": [], "virtual_machine_interface_mac_address": "fa:16:3e:e7:7c:0f", "version": 2, "virtual_network": "b761b0cd-d7c3-4b7a-b596-cea1cf9cc1e1", "security_groups": [], "uuid": "3a04e6ed-68fb-4534-8822-d5162d19f35a"}, 
 and heat timeout = 13, rollback = False, 
using this jinja parameters: 
{u'jinja_attached': True, u'jinja_force_dependency_gw_interface': None, u'jinja_fixed_ips': [{u'subnet_id': u'215cb166-b0c5-4fbb-ad5f-948cb93119fe', u'ip_address': u'192.168.200.101'}], u'jinja_force_dependency_cfg': None, u'jinja_device_owner': u'physical_port', u'jinja_subnets': [u'622495a6-b651-4033-9d30-c634e4b08851']} (heat.py - 280)
2019-02-01 00:30:23,876 [1;37mINFO[0m heat_worker - port:3a04e6ed-68fb-4534-8822-d5162d19f35a - Updating a stack port_3a04e6ed-68fb-4534-8822-d5162d19f35a with parameters: {u'virtual_machine': u'c13acfa3-6780-4f53-90da-492dfd697e69', u'name': u'3a04e6ed-68fb-4534-8822-d5162d19f35a', u'admin_state_up': True, u'tenant_id': u'4b4cb858859842a389d0b0c8eb567d59', u'device_owner': u'physical_port', u'virtual_machine_interface_allowed_address_pairs': [], u'virtual_machine_interface_mac_address': u'fa:16:3e:e7:7c:0f', u'version': 2, u'virtual_network': u'b761b0cd-d7c3-4b7a-b596-cea1cf9cc1e1', u'security_groups': [], u'uuid': u'3a04e6ed-68fb-4534-8822-d5162d19f35a'}, timeout_mins: 13, and template: 
heat_template_version: 2013-05-23

description: >
  Virtual Machine Interface Template

parameters:
  uuid:
    type: string
    label: Backend Virtual Machine Interface UUID
    description: A unique id for the Virtual Machine Interface.
  name:
    type: string
    label: Physical Interface ID
    description: A unique id for the Physical Interface.
  security_groups:
    type: json
    default: []
    label: Security Groups List
    description: The IDs of security groups applied to the port.
  virtual_machine_interface_allowed_address_pairs:
    type: json
    label: Virtual machine interface allowed address pairs.
  virtual_machine_interface_mac_address:
    type: string
    default: "fe:ff:ff:ff:ff:ff"
    label: Virtual machine interface mac address.
  virtual_network:
    type: string
    label: Virtual Network.
  virtual_machine:
    type: string
    label: Virtual Machine.
    default: ""
  device_owner:
    type: string
    label: Device Owner
    default: ""
  admin_state_up:
    type: boolean
    label: Admin state up
    default: true
  tenant_id:
    type: string
    label: Tenant ID
  version:
    type: number
    label: Config version

resources:
  virtual_machine_interface:
    type: OS::Contrail::VirtualMachineInterface
    properties:
      uuid: { get_param: uuid }
      name: { get_param: name }
      virtual_machine_interface_allowed_address_pairs: { get_param: virtual_machine_interface_allowed_address_pairs }
      virtual_machine_interface_mac_addresses: [ { get_param: virtual_machine_interface_mac_address } ]
      virtual_networks: [ { get_param: virtual_network } ]
      virtual_machine: { get_param: virtual_machine }
      device_owner: { get_param: device_owner }
      admin_state_up: { get_param: admin_state_up }
      security_groups: { get_param: security_groups }



  instance_ip_0:
    type: OS::Contrail::InstanceIp
    properties:
      name:
        str_replace:
          template: '%name%_%zone%_%ip%'
          params:
            "%name%": { get_param: name }
            "%zone%": 215cb166-b0c5-4fbb-ad5f-948cb93119fe
            "%ip%": 192.168.200.101
      ip_address: 192.168.200.101
      subnet_id: 622495a6-b651-4033-9d30-c634e4b08851
      network_id: { get_param: virtual_network }
      virtual_machine_interfaces: [ { get_resource: virtual_machine_interface } ]



  vmi_monitor:
    type: ESI::Monitoring::MonitoringTarget
    properties:
      type: virtual_machine_interface
      resource_type: ports
      resource_id: { get_param: uuid }
      field_name: vmi
      tenant_id: { get_param: tenant_id }
      version: { get_param: version }
      properties:
        fq_name: { get_attr: [virtual_machine_interface, fq_name] }
      syncer_properties:
        etcd:
          status:
            key: vmi
          hold_options:
            positive_status:
              - UP
              - DOWN
            time_seconds: 210
        tsdb:
          traffic.in:
            metric: traffic.bps
            tags:
              resource_id: { get_param: uuid }
              direction: in
          traffic.out:
            metric: traffic.bps
            tags:
              resource_id: { get_param: uuid }
              direction: out
    depends_on: virtual_machine_interface


outputs:
  id:
    description: A unique id for the virtual machine interface.
    value: { get_resource: virtual_machine_interface }
  mac_address:
    description: Virtual machine interface mac address.
    value: { get_attr: [virtual_machine_interface, virtual_machine_interface_mac_addresses] }
  allowed_address_pairs:
    description: Virtual machine allowed address pairs.
    value: { get_attr: [virtual_machine_interface, virtual_machine_interface_allowed_address_pairs] }
  virtual_network:
    description: Virtual network.
    value: { get_attr: [virtual_machine_interface, virtual_networks] }
  fq_name:
    description: Fully Qualified Name of the VMI
    value: { get_attr: [virtual_machine_interface, fq_name] }

  monitoring_target_id:
    description: Monitoring Target ID
    value: { get_resource: vmi_monitor }
  monitoring_link:
    description: Monitoring Process Link
    value: { get_attr: [vmi_monitor, link] }
 (heat.py - 321)
2019-02-01 00:30:24,117 [1;37mINFO[0m heat_worker - port:3a04e6ed-68fb-4534-8822-d5162d19f35a - Stack "port_3a04e6ed-68fb-4534-8822-d5162d19f35a" in status "UPDATE_IN_PROGRESS" (heat.py - 356)
2019-02-01 00:30:25,202 [1;37mINFO[0m heat_worker - port:3a04e6ed-68fb-4534-8822-d5162d19f35a - Stack "port_3a04e6ed-68fb-4534-8822-d5162d19f35a" in status "UPDATE_IN_PROGRESS" (heat.py - 356)
2019-02-01 00:30:26,263 [1;37mINFO[0m heat_worker - port:3a04e6ed-68fb-4534-8822-d5162d19f35a - Stack "port_3a04e6ed-68fb-4534-8822-d5162d19f35a" in status "UPDATE_IN_PROGRESS" (heat.py - 356)
2019-02-01 00:30:27,399 [1;37mINFO[0m heat_worker - port:3a04e6ed-68fb-4534-8822-d5162d19f35a - Stack "port_3a04e6ed-68fb-4534-8822-d5162d19f35a" in status "UPDATE_IN_PROGRESS" (heat.py - 356)
2019-02-01 00:30:28,498 [1;37mINFO[0m heat_worker - port:3a04e6ed-68fb-4534-8822-d5162d19f35a - Stack "port_3a04e6ed-68fb-4534-8822-d5162d19f35a" in status "UPDATE_IN_PROGRESS" (heat.py - 356)
2019-02-01 00:30:29,565 [1;37mINFO[0m heat_worker - port:3a04e6ed-68fb-4534-8822-d5162d19f35a - Stack "port_3a04e6ed-68fb-4534-8822-d5162d19f35a" in status "UPDATE_IN_PROGRESS" (heat.py - 356)
2019-02-01 00:30:30,622 [1;37mINFO[0m heat_worker - port:3a04e6ed-68fb-4534-8822-d5162d19f35a - Stack "port_3a04e6ed-68fb-4534-8822-d5162d19f35a" in status "UPDATE_IN_PROGRESS" (heat.py - 356)
2019-02-01 00:30:31,687 [1;37mINFO[0m heat_worker - port:3a04e6ed-68fb-4534-8822-d5162d19f35a - Stack "port_3a04e6ed-68fb-4534-8822-d5162d19f35a" in status "UPDATE_IN_PROGRESS" (heat.py - 356)
2019-02-01 00:30:32,912 [1;37mINFO[0m heat_worker - port:3a04e6ed-68fb-4534-8822-d5162d19f35a - Stack "port_3a04e6ed-68fb-4534-8822-d5162d19f35a" in status "UPDATE_COMPLETE" (heat.py - 356)
2019-02-01 00:30:32,913 [1;37mINFO[0m heat_worker - port:3a04e6ed-68fb-4534-8822-d5162d19f35a - MODIFIED port_3a04e6ed-68fb-4534-8822-d5162d19f35a (heat.py - 463)
2019-02-01 00:30:33,190 [1;37mINFO[0m heat_worker - port:3a04e6ed-68fb-4534-8822-d5162d19f35a - Job modify finished with results {'heat_outputs': [{u'output_value': u'default-domain:admin:f68d0924-ef20-4c1b-ac45-0e6b879af5e7', u'description': u'Fully Qualified Name of the VMI', u'output_key': u'fq_name'}, {u'output_value': {u'allowed_address_pair': []}, u'description': u'Virtual machine allowed address pairs.', u'output_key': u'allowed_address_pairs'}, {u'output_value': u'bb927b26-ba6b-4049-9b55-54af3e1ea997', u'description': u'Monitoring Target ID', u'output_key': u'monitoring_target_id'}, {u'output_value': [u'fa:16:3e:f7:60:7f'], u'description': u'Virtual machine interface mac address.', u'output_key': u'mac_address'}, {u'output_value': [[u'default-domain', u'admin', u'b62eefe0-0872-478d-adfe-1a606320f0e7']], u'description': u'Virtual network.', u'output_key': u'virtual_network'}, {u'output_value': u'f68d0924-ef20-4c1b-ac45-0e6b879af5e7', u'description': u'A unique id for the virtual machine interface.', u'output_key': u'id'}, {u'output_value': u'http://collector-agents-se:7070/targets/bb927b26-ba6b-4049-9b55-54af3e1ea997', u'description': u'Monitoring Process Link', u'output_key': u'monitoring_link'}], 'orchestration_state': u'UPDATE_COMPLETE', 'error': None} (heat_stacks_worker.py - 103)
2019-02-01 00:30:33,247 [1;37mINFO[0m heat_worker - port:3a04e6ed-68fb-4534-8822-d5162d19f35a - Job modify:heat_worker:port:3a04e6ed-68fb-4534-8822-d5162d19f35a:2:28a9m finished. (job_queue.py - 266)
2019-02-01 00:30:33,248 [1;37mINFO[0m heat_worker - port:3a04e6ed-68fb-4534-8822-d5162d19f35a - Trying to delete internal process state for resource port:3a04e6ed-68fb-4534-8822-d5162d19f35a (resources.py - 701)
2019-02-01 00:30:52,740 [1;34mDEBUG[0m heat_worker - GetJob timeout. (etcd_worker.py - 227)
2019-02-01 00:30:52,741 [1;34mDEBUG[0m heat_worker - Waiting for a job. (etcd_worker.py - 218)
2019-02-01 00:30:52,741 [1;34mDEBUG[0m heat_worker - 8 job slots available (etcd_worker.py - 213)
2019-02-01 00:31:22,751 [1;34mDEBUG[0m heat_worker - GetJob timeout. (etcd_worker.py - 227)
2019-02-01 00:31:22,752 [1;34mDEBUG[0m heat_worker - Waiting for a job. (etcd_worker.py - 218)
2019-02-01 00:31:22,752 [1;34mDEBUG[0m heat_worker - 8 job slots available (etcd_worker.py - 213)
2019-02-01 00:31:52,763 [1;34mDEBUG[0m heat_worker - GetJob timeout. (etcd_worker.py - 227)
2019-02-01 00:31:52,764 [1;34mDEBUG[0m heat_worker - Waiting for a job. (etcd_worker.py - 218)
2019-02-01 00:31:52,764 [1;34mDEBUG[0m heat_worker - 8 job slots available (etcd_worker.py - 213)
2019-02-01 00:32:22,776 [1;34mDEBUG[0m heat_worker - GetJob timeout. (etcd_worker.py - 227)
2019-02-01 00:32:22,777 [1;34mDEBUG[0m heat_worker - Waiting for a job. (etcd_worker.py - 218)
2019-02-01 00:32:22,777 [1;34mDEBUG[0m heat_worker - 8 job slots available (etcd_worker.py - 213)
2019-02-01 00:32:52,790 [1;34mDEBUG[0m heat_worker - GetJob timeout. (etcd_worker.py - 227)
2019-02-01 00:32:52,790 [1;34mDEBUG[0m heat_worker - Waiting for a job. (etcd_worker.py - 218)
2019-02-01 00:32:52,790 [1;34mDEBUG[0m heat_worker - 8 job slots available (etcd_worker.py - 213)
2019-02-01 00:33:22,803 [1;34mDEBUG[0m heat_worker - GetJob timeout. (etcd_worker.py - 227)
2019-02-01 00:33:22,804 [1;34mDEBUG[0m heat_worker - Waiting for a job. (etcd_worker.py - 218)
2019-02-01 00:33:22,804 [1;34mDEBUG[0m heat_worker - 8 job slots available (etcd_worker.py - 213)
2019-02-01 00:33:52,809 [1;34mDEBUG[0m heat_worker - GetJob timeout. (etcd_worker.py - 227)
2019-02-01 00:33:52,810 [1;34mDEBUG[0m heat_worker - Waiting for a job. (etcd_worker.py - 218)
2019-02-01 00:33:52,810 [1;34mDEBUG[0m heat_worker - 8 job slots available (etcd_worker.py - 213)
