root@client:/tools/rest-api-for-esi# python gohan-api-internet-gateways.py 
### Create Ese Device ###
name:[QFX-NW02], id:[a1f745c1-e6b9-45ef-94db-f33b37709fb0]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
04:23:12.820701  04:23:12.964618  0.143917        POST     201    PENDING_CREATE
04:23:12.965520  04:23:13.530011  0.564491         GET     200    PENDING_CREATE
04:23:14.531224  04:23:14.622566  0.091342         GET     200    PENDING_CREATE
04:23:15.623562  04:23:15.716672  0.093110         GET     200    PENDING_CREATE
04:23:16.717992  04:23:16.795088  0.077096         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 3.974387

[localhost] local: gohan client ese_device show --output-format json a1f745c1-e6b9-45ef-94db-f33b37709fb0
{
    "ese_device": {
        "description": "",
        "existing": "existing",
        "flavor": null,
        "hostname": "QFX-NW02",
        "id": "a1f745c1-e6b9-45ef-94db-f33b37709fb0",
        "location": null,
        "management_ip_address": "10.161.0.34",
        "name": "QFX-NW02",
        "password": "password",
        "public_ip_address": "10.161.0.34",
        "status": "ACTIVE",
        "tags": {},
        "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
        "tor_agent_names": null,
        "tsn_names": null,
        "type": "tor",
        "username": "esi"
    }
}

##########################################
### checking heat-stack (ese_devices) ####
##########################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/ese_devices/a1f745c1-e6b9-45ef-94db-f33b37709fb0
[localhost] local: heat stack-show ese_device_a1f745c1-e6b9-45ef-94db-f33b37709fb0
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                       |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                          |
| creation_time         | 2017-05-11T04:23:14Z                                                                                                                                        |
| description           | ESE Device (existing) template                                                                                                                              |
| disable_rollback      | True                                                                                                                                                        |
| id                    | 35bb07b5-3cc1-4d59-b079-b764dbfc7e3b                                                                                                                        |
| links                 | http://heat-api:8004/v1/0b576f6f4cbf414f829cd12f008bf08f/stacks/ese_device_a1f745c1-e6b9-45ef-94db-f33b37709fb0/35bb07b5-3cc1-4d59-b079-b764dbfc7e3b (self) |
| notification_topics   | []                                                                                                                                                          |
| outputs               | [                                                                                                                                                           |
|                       |   {                                                                                                                                                         |
|                       |     "output_value": [                                                                                                                                       |
|                       |       "default-global-system-config",                                                                                                                       |
|                       |       "QFX-NW02"                                                                                                                                            |
|                       |     ],                                                                                                                                                      |
|                       |     "description": "The FQ name of the physical router.",                                                                                                   |
|                       |     "output_key": "fq_name"                                                                                                                                 |
|                       |   },                                                                                                                                                        |
|                       |   {                                                                                                                                                         |
|                       |     "output_value": "physical_router",                                                                                                                      |
|                       |     "description": "A unique id for the physical router.",                                                                                                  |
|                       |     "output_key": "id"                                                                                                                                      |
|                       |   },                                                                                                                                                        |
|                       |   {                                                                                                                                                         |
|                       |     "output_value": "dummy",                                                                                                                                |
|                       |     "description": "The name of the physical router.",                                                                                                      |
|                       |     "output_key": "name"                                                                                                                                    |
|                       |   }                                                                                                                                                         |
|                       | ]                                                                                                                                                           |
| parameters            | {                                                                                                                                                           |
|                       |   "hostname": "QFX-NW02",                                                                                                                                   |
|                       |   "OS::stack_id": "35bb07b5-3cc1-4d59-b079-b764dbfc7e3b",                                                                                                   |
|                       |   "OS::stack_name": "ese_device_a1f745c1-e6b9-45ef-94db-f33b37709fb0",                                                                                      |
|                       |   "name": "QFX-NW02"                                                                                                                                        |
|                       | }                                                                                                                                                           |
| parent                | None                                                                                                                                                        |
| stack_name            | ese_device_a1f745c1-e6b9-45ef-94db-f33b37709fb0                                                                                                             |
| stack_owner           | admin                                                                                                                                                       |
| stack_status          | CREATE_COMPLETE                                                                                                                                             |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                         |
| stack_user_project_id | 0b576f6f4cbf414f829cd12f008bf08f                                                                                                                            |
| template_description  | ESE Device (existing) template                                                                                                                              |
| timeout_mins          | 10                                                                                                                                                          |
| updated_time          | None                                                                                                                                                        |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show ese_device_a1f745c1-e6b9-45ef-94db-f33b37709fb0
description: 'ESE Device (existing) template

  '
heat_template_version: '2013-05-23'
outputs:
  fq_name:
    description: The FQ name of the physical router.
    value:
      get_attr: [physical_router, fq_name]
  id:
    description: A unique id for the physical router.
    value: {get_resource: physical_router}
  name:
    description: The name of the physical router.
    value:
      get_attr: [physical_router, name]
parameters:
  hostname: {description: Name of host (vrouter) to create router on, label: Hostname,
    type: string}
  name: {description: Name of the physical router that will be created., label: Physical
      Router Name, type: string}
resources:
  physical_router:
    properties:
      fq_name:
      - default-global-system-config
      - {get_param: hostname}
      resource_type: physical_router
    type: OS::Contrail::ExistingResource

### Create Ese Physical Port ###
name:[xe-0/0/3], id:[97fcdf3a-81a4-41a5-8ae6-52c431fc5a5c]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
04:23:19.166615  04:23:19.334691  0.168076        POST     201    PENDING_CREATE
04:23:19.335192  04:23:19.437670  0.102478         GET     200    PENDING_CREATE
04:23:20.438877  04:23:20.515535  0.076658         GET     200    PENDING_CREATE
04:23:21.517128  04:23:21.637371  0.120243         GET     200    PENDING_CREATE
04:23:22.638713  04:23:22.715778  0.077065         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 3.549163

[localhost] local: gohan client ese_physical_port show --output-format json 97fcdf3a-81a4-41a5-8ae6-52c431fc5a5c
{
    "ese_physical_port": {
        "connected_port_id": "",
        "connected_port_owner": "mx_downlink",
        "description": "",
        "ese_device_id": "a1f745c1-e6b9-45ef-94db-f33b37709fb0",
        "existing": "new",
        "id": "97fcdf3a-81a4-41a5-8ae6-52c431fc5a5c",
        "name": "xe-0/0/3",
        "status": "ACTIVE",
        "tags": {},
        "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
    }
}

#################################################
### checking heat-stack (ese_physical_ports) ####
#################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/ese_physical_ports/97fcdf3a-81a4-41a5-8ae6-52c431fc5a5c
[localhost] local: heat stack-show ese_physical_port_97fcdf3a-81a4-41a5-8ae6-52c431fc5a5c
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                              |
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                 |
| creation_time         | 2017-05-11T04:23:20Z                                                                                                                                               |
| description           | Physical port template                                                                                                                                             |
| disable_rollback      | True                                                                                                                                                               |
| id                    | 50c6e654-aa32-4466-a57b-01e12813b66a                                                                                                                               |
| links                 | http://heat-api:8004/v1/0b576f6f4cbf414f829cd12f008bf08f/stacks/ese_physical_port_97fcdf3a-81a4-41a5-8ae6-52c431fc5a5c/50c6e654-aa32-4466-a57b-01e12813b66a (self) |
| notification_topics   | []                                                                                                                                                                 |
| outputs               | [                                                                                                                                                                  |
|                       |   {                                                                                                                                                                |
|                       |     "output_value": "dddddddd-dddd-dddd-dddd-dddddddddddd",                                                                                                        |
|                       |     "description": "A unique id for the physical interface",                                                                                                       |
|                       |     "output_key": "id"                                                                                                                                             |
|                       |   },                                                                                                                                                               |
|                       |   {                                                                                                                                                                |
|                       |     "output_value": null,                                                                                                                                          |
|                       |     "output_error": "'ContrailPhysicalInterface' object has no attribute 'pi_uuid'",                                                                               |
|                       |     "description": "The name of the physical interface.",                                                                                                          |
|                       |     "output_key": "name"                                                                                                                                           |
|                       |   }                                                                                                                                                                |
|                       | ]                                                                                                                                                                  |
| parameters            | {                                                                                                                                                                  |
|                       |   "physical_port_name": "xe-0/0/3",                                                                                                                                |
|                       |   "OS::stack_id": "50c6e654-aa32-4466-a57b-01e12813b66a",                                                                                                          |
|                       |   "OS::stack_name": "ese_physical_port_97fcdf3a-81a4-41a5-8ae6-52c431fc5a5c",                                                                                      |
|                       |   "physical_device": "physical_router"                                                                                                                             |
|                       | }                                                                                                                                                                  |
| parent                | None                                                                                                                                                               |
| stack_name            | ese_physical_port_97fcdf3a-81a4-41a5-8ae6-52c431fc5a5c                                                                                                             |
| stack_owner           | admin                                                                                                                                                              |
| stack_status          | CREATE_COMPLETE                                                                                                                                                    |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                |
| stack_user_project_id | 0b576f6f4cbf414f829cd12f008bf08f                                                                                                                                   |
| template_description  | Physical port template                                                                                                                                             |
| timeout_mins          | 10                                                                                                                                                                 |
| updated_time          | None                                                                                                                                                               |
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show ese_physical_port_97fcdf3a-81a4-41a5-8ae6-52c431fc5a5c
description: 'Physical port template

  '
heat_template_version: '2013-05-23'
outputs:
  id:
    description: A unique id for the physical interface
    value: {get_resource: physical_interface}
  name:
    description: The name of the physical interface.
    value:
      get_attr: [physical_interface, name]
parameters:
  physical_device: {description: Id of the physical device on which physical port
      will be created., label: Physical Device Id, type: string}
  physical_port_name: {description: Name of the physical port., label: Physical Interface
      Name, type: string}
resources:
  physical_interface:
    properties:
      name: {get_param: physical_port_name}
      physical_router: {get_param: physical_device}
    type: OS::Contrail::PhysicalInterface

### Create Ese Physical Port ###
name:[xe-0/0/4], id:[8a4bbfe0-5aae-42f5-8b94-c4c14b9e7306]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
04:23:25.030248  04:23:25.234126  0.203878        POST     201    PENDING_CREATE
04:23:25.234476  04:23:25.341094  0.106618         GET     200    PENDING_CREATE
04:23:26.342520  04:23:26.444116  0.101596         GET     200    PENDING_CREATE
04:23:27.444689  04:23:27.551268  0.106579         GET     200    PENDING_CREATE
04:23:28.552513  04:23:28.647705  0.095192         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 3.617457

[localhost] local: gohan client ese_physical_port show --output-format json 8a4bbfe0-5aae-42f5-8b94-c4c14b9e7306
{
    "ese_physical_port": {
        "connected_port_id": "",
        "connected_port_owner": "mx_downlink",
        "description": "",
        "ese_device_id": "a1f745c1-e6b9-45ef-94db-f33b37709fb0",
        "existing": "new",
        "id": "8a4bbfe0-5aae-42f5-8b94-c4c14b9e7306",
        "name": "xe-0/0/4",
        "status": "ACTIVE",
        "tags": {},
        "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
    }
}

#################################################
### checking heat-stack (ese_physical_ports) ####
#################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/ese_physical_ports/8a4bbfe0-5aae-42f5-8b94-c4c14b9e7306
[localhost] local: heat stack-show ese_physical_port_8a4bbfe0-5aae-42f5-8b94-c4c14b9e7306
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                              |
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                 |
| creation_time         | 2017-05-11T04:23:26Z                                                                                                                                               |
| description           | Physical port template                                                                                                                                             |
| disable_rollback      | True                                                                                                                                                               |
| id                    | 092b33b0-168a-4897-806d-a266936c5049                                                                                                                               |
| links                 | http://heat-api:8004/v1/0b576f6f4cbf414f829cd12f008bf08f/stacks/ese_physical_port_8a4bbfe0-5aae-42f5-8b94-c4c14b9e7306/092b33b0-168a-4897-806d-a266936c5049 (self) |
| notification_topics   | []                                                                                                                                                                 |
| outputs               | [                                                                                                                                                                  |
|                       |   {                                                                                                                                                                |
|                       |     "output_value": "dddddddd-dddd-dddd-dddd-dddddddddddd",                                                                                                        |
|                       |     "description": "A unique id for the physical interface",                                                                                                       |
|                       |     "output_key": "id"                                                                                                                                             |
|                       |   },                                                                                                                                                               |
|                       |   {                                                                                                                                                                |
|                       |     "output_value": null,                                                                                                                                          |
|                       |     "output_error": "'ContrailPhysicalInterface' object has no attribute 'pi_uuid'",                                                                               |
|                       |     "description": "The name of the physical interface.",                                                                                                          |
|                       |     "output_key": "name"                                                                                                                                           |
|                       |   }                                                                                                                                                                |
|                       | ]                                                                                                                                                                  |
| parameters            | {                                                                                                                                                                  |
|                       |   "physical_port_name": "xe-0/0/4",                                                                                                                                |
|                       |   "OS::stack_id": "092b33b0-168a-4897-806d-a266936c5049",                                                                                                          |
|                       |   "OS::stack_name": "ese_physical_port_8a4bbfe0-5aae-42f5-8b94-c4c14b9e7306",                                                                                      |
|                       |   "physical_device": "physical_router"                                                                                                                             |
|                       | }                                                                                                                                                                  |
| parent                | None                                                                                                                                                               |
| stack_name            | ese_physical_port_8a4bbfe0-5aae-42f5-8b94-c4c14b9e7306                                                                                                             |
| stack_owner           | admin                                                                                                                                                              |
| stack_status          | CREATE_COMPLETE                                                                                                                                                    |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                |
| stack_user_project_id | 0b576f6f4cbf414f829cd12f008bf08f                                                                                                                                   |
| template_description  | Physical port template                                                                                                                                             |
| timeout_mins          | 10                                                                                                                                                                 |
| updated_time          | None                                                                                                                                                               |
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show ese_physical_port_8a4bbfe0-5aae-42f5-8b94-c4c14b9e7306
description: 'Physical port template

  '
heat_template_version: '2013-05-23'
outputs:
  id:
    description: A unique id for the physical interface
    value: {get_resource: physical_interface}
  name:
    description: The name of the physical interface.
    value:
      get_attr: [physical_interface, name]
parameters:
  physical_device: {description: Id of the physical device on which physical port
      will be created., label: Physical Device Id, type: string}
  physical_port_name: {description: Name of the physical port., label: Physical Interface
      Name, type: string}
resources:
  physical_interface:
    properties:
      name: {get_param: physical_port_name}
      physical_router: {get_param: physical_device}
    type: OS::Contrail::PhysicalInterface

### Create Edge Router ###
name:[vMX-router-02], id:[9b82b55a-551e-4069-ae77-c972e30ab0cc]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
04:23:31.308097  04:23:31.416891  0.108794        POST     201    PENDING_CREATE
04:23:31.417348  04:23:31.530263  0.112915         GET     200    PENDING_CREATE
04:23:32.531507  04:23:32.618411  0.086904         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 1.310314

[localhost] local: gohan client edge_router show --output-format json 9b82b55a-551e-4069-ae77-c972e30ab0cc
{
    "edge_router": {
        "autonomous_system": "65101",
        "description": "MX80 #2",
        "id": "9b82b55a-551e-4069-ae77-c972e30ab0cc",
        "ip": "10.79.5.185",
        "login": "esi",
        "name": "vMX-router-02",
        "password": "esiesi0000",
        "ssh_port": 830,
        "status": "ACTIVE",
        "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
    }
}

### Create Edge Router ###
name:[vMX-router-01], id:[198b93f2-006e-45b6-96d3-e7ef6f759501]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
04:23:33.144918  04:23:33.251355  0.106437        POST     201    PENDING_CREATE
04:23:33.251852  04:23:33.385713  0.133861         GET     200    PENDING_CREATE
04:23:34.387011  04:23:34.478572  0.091561         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 1.333654

[localhost] local: gohan client edge_router show --output-format json 198b93f2-006e-45b6-96d3-e7ef6f759501
{
    "edge_router": {
        "autonomous_system": "65101",
        "description": "MX80 #1",
        "id": "198b93f2-006e-45b6-96d3-e7ef6f759501",
        "ip": "10.79.5.184",
        "login": "esi",
        "name": "vMX-router-01",
        "password": "esiesi0000",
        "ssh_port": 830,
        "status": "ACTIVE",
        "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
    }
}

### Create Ha Router ###
name:[sample-ha-router], id:[d4286c1d-86e7-42d3-9d84-a4d9daa3ae17]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
04:23:35.004305  04:23:35.238200  0.233895        POST     201    PENDING_CREATE
04:23:35.239092  04:23:35.354908  0.115816         GET     200    PENDING_CREATE
04:23:36.356100  04:23:36.435344  0.079244         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 1.431039

[localhost] local: gohan client ha_router show --output-format json d4286c1d-86e7-42d3-9d84-a4d9daa3ae17
{
    "ha_router": {
        "available_gateways": 500,
        "description": "sample_ha_router",
        "id": "d4286c1d-86e7-42d3-9d84-a4d9daa3ae17",
        "maximum_gateways": 500,
        "name": "sample-ha-router",
        "primary_router_id": "9b82b55a-551e-4069-ae77-c972e30ab0cc",
        "secondary_router_id": "198b93f2-006e-45b6-96d3-e7ef6f759501",
        "status": "ACTIVE",
        "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
    }
}

### Create Er Physical Interface ###
name:[ae0], id:[1fda2a88-f7e9-4982-9ce2-d65c9611aae7]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
04:23:36.918088  04:23:37.125273  0.207185        POST     201    PENDING_CREATE
04:23:37.125679  04:23:37.226893  0.101214         GET     200    PENDING_CREATE
04:23:38.228163  04:23:38.320521  0.092358         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 1.402433

[localhost] local: gohan client er_physical_interface show --output-format json 1fda2a88-f7e9-4982-9ce2-d65c9611aae7
{
    "er_physical_interface": {
        "connected_ese_port_id": "97fcdf3a-81a4-41a5-8ae6-52c431fc5a5c",
        "description": "",
        "device_id": "9b82b55a-551e-4069-ae77-c972e30ab0cc",
        "id": "1fda2a88-f7e9-4982-9ce2-d65c9611aae7",
        "name": "ae0",
        "status": "ACTIVE",
        "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
    }
}

### Create Er Physical Interface ###
name:[ae0], id:[469e4283-80e6-491c-830f-c483c1f7c695]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
04:23:39.617058  04:23:40.066196  0.449138        POST     201    PENDING_CREATE
04:23:40.066649  04:23:40.235068  0.168419         GET     200    PENDING_CREATE
04:23:41.236320  04:23:41.328978  0.092658         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 1.71192

[localhost] local: gohan client er_physical_interface show --output-format json 469e4283-80e6-491c-830f-c483c1f7c695
{
    "er_physical_interface": {
        "connected_ese_port_id": "8a4bbfe0-5aae-42f5-8b94-c4c14b9e7306",
        "description": "",
        "device_id": "198b93f2-006e-45b6-96d3-e7ef6f759501",
        "id": "469e4283-80e6-491c-830f-c483c1f7c695",
        "name": "ae0",
        "status": "ACTIVE",
        "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
    }
}

### Create Ha Interface ###
name:[sample-ha-router-downlink], id:[1205d3f2-7568-412a-a554-012340ab3172]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
04:23:41.860349  04:23:42.402125  0.541776        POST     201    PENDING_CREATE
04:23:42.403113  04:23:42.496512  0.093399         GET     200    PENDING_CREATE
04:23:43.497940  04:23:43.605444  0.107504         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 1.745095

[localhost] local: gohan client ha_interface show --output-format json 1205d3f2-7568-412a-a554-012340ab3172
{
    "ha_interface": {
        "admin_state_up": true,
        "available_be_bandwidth": 500,
        "available_ga_bandwidth": 500,
        "description": "",
        "gateway_instances_count": 0,
        "ha_router_id": "d4286c1d-86e7-42d3-9d84-a4d9daa3ae17",
        "id": "1205d3f2-7568-412a-a554-012340ab3172",
        "link_type": "downlink",
        "maximum_be_bandwidth": 500,
        "maximum_ga_bandwidth": 500,
        "name": "sample-ha-router-downlink",
        "primary_interface_id": "1fda2a88-f7e9-4982-9ce2-d65c9611aae7",
        "restricted_vlans": "0-1024,4094",
        "secondary_interface_id": "469e4283-80e6-491c-830f-c483c1f7c695",
        "status": "ACTIVE",
        "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
        "vlan_ids_available": 3069,
        "vlan_pool_state": "//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAM="
    }
}

### Create Internet Service ###
name:[sample-internet-service], id:[848e04de-733d-4f98-8971-bdb3b83e0296]
-----------------------------------------------------------------
http_request     http_response    response_time   method   code
-----------------------------------------------------------------
04:23:54.122193  04:23:54.225493  0.103300        POST     201
04:23:54.227221  04:23:54.345476  0.118255         GET     200
-----------------------------------------------------------------
Turn Around Time : 0.223283

[localhost] local: gohan client internet_service show --output-format json 848e04de-733d-4f98-8971-bdb3b83e0296
{
    "internet_service": {
        "be_forwarding_class": "FC-INET-BE",
        "default_static_routes_per_gateway": 32,
        "description": "",
        "downlink_interfaces": [
            "1205d3f2-7568-412a-a554-012340ab3172"
        ],
        "ga_forwarding_class": "FC-INET-GA",
        "id": "848e04de-733d-4f98-8971-bdb3b83e0296",
        "inet_in_filter": "INET_IN",
        "inet_out_filter": "INET_OUT",
        "minimal_submask_length": 26,
        "name": "sample-internet-service",
        "neighbour_prefix": "BGP-VIRTUAL-ROUTER-PEERS",
        "primary_ibgp_config_group": "InetGW2-RI-IBGP",
        "primary_vrrp_config_group": "InetGW1-VRRP",
        "secondary_ibgp_config_group": "InetGW1-RI-IBGP",
        "secondary_vrrp_config_group": "InetGW2-VRRP",
        "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
        "uplink_import_policy": "INSTANCE-MASTER_IN",
        "vrf_config": "",
        "vrf_export_policy": "INSTANCE-USER_OUT",
        "vrf_import_policy": "INSTANCE-USER_IN",
        "zone": "jp1-zone1"
    }
}

### Create Internet Qos Option ###
name:[10Mbps-Guaranteed], id:[e25f6309-c384-446e-bdc1-5241cb14890b]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
04:24:04.874298  04:24:05.058702  0.184404        POST     201    PENDING_CREATE
04:24:05.059955  04:24:05.189438  0.129483         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 0.31514

[localhost] local: gohan client qos_option show --output-format json e25f6309-c384-446e-bdc1-5241cb14890b
{
    "qos_option": {
        "aws_service_id": null,
        "bandwidth": "10",
        "charge_type": null,
        "description": "",
        "ha_router_id": "d4286c1d-86e7-42d3-9d84-a4d9daa3ae17",
        "id": "e25f6309-c384-446e-bdc1-5241cb14890b",
        "incoming_policer_config": "action { loss-priority high then discard; } single-rate { color-blind; committed-information-rate 10m; committed-burst-size 187500000; excess-burst-size 187500000; }",
        "incoming_policer_name": "10M-GA-UP-INET",
        "interdc_service_id": null,
        "internet_service_id": "848e04de-733d-4f98-8971-bdb3b83e0296",
        "name": "10Mbps-Guaranteed",
        "outgoing_policer_config": "if-exceeding { bandwidth-limit 10m; burst-size-limit 187500000; } then discard;",
        "outgoing_policer_name": "10M-GA-DOWN-INET",
        "qos_type": "guarantee",
        "service_type": "internet",
        "status": "ACTIVE",
        "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
        "vpn_service_id": null
    }
}

### Create Public Ip Pool ###
name:[public_ip_pool], id:[5cd14f90-cf3c-4aeb-b30a-227b3c936761]
-----------------------------------------------------------------
http_request     http_response    response_time   method   code
-----------------------------------------------------------------
04:24:05.718563  04:24:05.946793  0.228230        POST     201
04:24:05.947501  04:24:06.062618  0.115117         GET     200
-----------------------------------------------------------------
Turn Around Time : 0.344055

[localhost] local: gohan client public_ip_pool show --output-format json 5cd14f90-cf3c-4aeb-b30a-227b3c936761
{
    "public_ip_pool": {
        "addresses_available": 512,
        "ha_router_id": "d4286c1d-86e7-42d3-9d84-a4d9daa3ae17",
        "id": "5cd14f90-cf3c-4aeb-b30a-227b3c936761",
        "internet_service_id": "848e04de-733d-4f98-8971-bdb3b83e0296",
        "ip_version": 4,
        "pool_state": "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==",
        "submask_length": 23,
        "subnet_ip": "203.0.112.0",
        "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
    }
}

### Create Internet Gateway ###
name:[sample-internet-gateway], id:[429e24b5-a2f0-4fb8-b467-e335857e9476]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
04:24:06.607012  04:24:06.952864  0.345852        POST     201    PENDING_CREATE
04:24:06.954234  04:24:07.094447  0.140213         GET     200    PENDING_CREATE
04:24:08.095341  04:24:08.183403  0.088062         GET     200    PENDING_CREATE
04:24:09.184744  04:24:09.275475  0.090731         GET     200    PENDING_CREATE
04:24:10.276644  04:24:10.376947  0.100303         GET     200    PENDING_CREATE
04:24:11.377919  04:24:11.468633  0.090714         GET     200    PENDING_CREATE
04:24:12.469884  04:24:12.560269  0.090385         GET     200    PENDING_CREATE
04:24:13.561547  04:24:13.648448  0.086901         GET     200    PENDING_CREATE
04:24:14.649741  04:24:14.745264  0.095523         GET     200    PENDING_CREATE
04:24:15.746542  04:24:15.837112  0.090570         GET     200    PENDING_CREATE
04:24:16.838590  04:24:16.927261  0.088671         GET     200    PENDING_CREATE
04:24:17.928500  04:24:18.015889  0.087389         GET     200    PENDING_CREATE
04:24:19.016686  04:24:19.094021  0.077335         GET     200    PENDING_CREATE
04:24:20.095249  04:24:20.175379  0.080130         GET     200    PENDING_CREATE
04:24:21.176630  04:24:21.786488  0.609858         GET     200    PENDING_CREATE
04:24:22.787701  04:24:22.862338  0.074637         GET     200    PENDING_CREATE
04:24:23.863562  04:24:23.940130  0.076568         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 17.333118

[localhost] local: gohan client internet_gateway show --output-format json 429e24b5-a2f0-4fb8-b467-e335857e9476
{
    "internet_gateway": {
        "associated_uplink_id": null,
        "description": "Sample Internet-gateway",
        "downlink_interface_id": "1205d3f2-7568-412a-a554-012340ab3172",
        "id": "429e24b5-a2f0-4fb8-b467-e335857e9476",
        "internet_service_id": "848e04de-733d-4f98-8971-bdb3b83e0296",
        "maximum_static_routes": 32,
        "name": "sample-internet-gateway",
        "primary_logical_interface_name": "ae0.1025",
        "qos_option_id": "e25f6309-c384-446e-bdc1-5241cb14890b",
        "secondary_logical_interface_name": "ae0.1025",
        "status": "ACTIVE",
        "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
        "vlan_id": "1025",
        "vrf_name": "vrf_gw_sample-ha-router-downlink_1025"
    }
}

[localhost] local: gohan client resource_mapping list --output-format json
{
    "resource_mappings": [
        {
            "created": 1.494476663e+09,
            "deleted": null,
            "id": "075c5413-cdf3-4bb5-b7b1-6100f3cecb25",
            "mapped_id": "10.79.5.184-INET_IN-vrf_gw_sample-ha-router-downlink_1025_IN",
            "relation": "secondary_in",
            "resource_id": "429e24b5-a2f0-4fb8-b467-e335857e9476",
            "resource_type": "internet_gateway",
            "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
        },
        {
            "created": 1.494476663e+09,
            "deleted": null,
            "id": "11cb2015-fadc-4ae2-b0cf-b7ae280baebb",
            "mapped_id": "10.79.5.185-INET_OUT-vrf_gw_sample-ha-router-downlink_1025_OUT",
            "relation": "primary_out",
            "resource_id": "429e24b5-a2f0-4fb8-b467-e335857e9476",
            "resource_type": "internet_gateway",
            "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
        },
        {
            "created": 1.494476663e+09,
            "deleted": null,
            "id": "b3d2f0fb-3765-4485-a88d-44b46fe191df",
            "mapped_id": "10.79.5.184-INET_OUT-vrf_gw_sample-ha-router-downlink_1025_OUT",
            "relation": "secondary_out",
            "resource_id": "429e24b5-a2f0-4fb8-b467-e335857e9476",
            "resource_type": "internet_gateway",
            "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
        },
        {
            "created": 1.494476663e+09,
            "deleted": null,
            "id": "f3010659-2a05-4b5f-add1-0e2abc31f75a",
            "mapped_id": "10.79.5.185-INET_IN-vrf_gw_sample-ha-router-downlink_1025_IN",
            "relation": "primary_in",
            "resource_id": "429e24b5-a2f0-4fb8-b467-e335857e9476",
            "resource_type": "internet_gateway",
            "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
        }
    ]
}

[localhost] local: gohan client billing_resource list --output-format json
{
    "billing_resources": [
        {
            "config_version": 1,
            "ended": null,
            "id": "35e4ba02-217d-492d-b256-adbe19c516d5",
            "info": {
                "internet_service": "sample-internet-service"
            },
            "parent_billing_id": null,
            "resource_id": "429e24b5-a2f0-4fb8-b467-e335857e9476",
            "resource_type": "internet_gateway",
            "started": 1.494476663e+09,
            "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
            "unique_resource_id": "429e24b5-a2f0-4fb8-b467-e335857e9476"
        },
        {
            "config_version": 1,
            "ended": null,
            "id": "e32e992e-8553-448c-860f-6e63bbe30c19",
            "info": {
                "bandwidth": "10",
                "qos_type": "guarantee"
            },
            "parent_billing_id": "35e4ba02-217d-492d-b256-adbe19c516d5",
            "resource_id": "e25f6309-c384-446e-bdc1-5241cb14890b",
            "resource_type": "qos_option",
            "started": 1.494476663e+09,
            "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
            "unique_resource_id": null
        }
    ]
}

################################################
### checking heat-stack (internet_gateways) ####
################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/internet_gateways/429e24b5-a2f0-4fb8-b467-e335857e9476
[localhost] local: heat stack-show internet_gateway_429e24b5-a2f0-4fb8-b467-e335857e9476
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                             |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                |
| creation_time         | 2017-05-11T04:24:07Z                                                                                                                                              |
| description           | Internet GW Instance                                                                                                                                              |
| disable_rollback      | True                                                                                                                                                              |
| id                    | d6e8740b-3293-484e-965d-0a9b0b02328a                                                                                                                              |
| links                 | http://heat-api:8004/v1/0b576f6f4cbf414f829cd12f008bf08f/stacks/internet_gateway_429e24b5-a2f0-4fb8-b467-e335857e9476/d6e8740b-3293-484e-965d-0a9b0b02328a (self) |
| notification_topics   | []                                                                                                                                                                |
| outputs               | []                                                                                                                                                                |
| parameters            | {                                                                                                                                                                 |
|                       |   "vrf_export_policy": "INSTANCE-USER_OUT",                                                                                                                       |
|                       |   "secondary_device_physical_interface": "ae0",                                                                                                                   |
|                       |   "primary_device_username": "esi",                                                                                                                               |
|                       |   "primary_device_logical_interface": "ae0.1025",                                                                                                                 |
|                       |   "primary_device_password": "esiesi0000",                                                                                                                        |
|                       |   "vrf_import_policy": "INSTANCE-USER_IN",                                                                                                                        |
|                       |   "prefix_list_name": "vrf_gw_sample-ha-router-downlink_1025_prefix",                                                                                             |
|                       |   "output_filter_name": "FILTER_10M-GA-DOWN-INET",                                                                                                                |
|                       |   "secondary_vrrp_config_group": "InetGW2-VRRP",                                                                                                                  |
|                       |   "primary_device_ip": "10.79.5.185",                                                                                                                             |
|                       |   "inet_in_filter": "INET_IN",                                                                                                                                    |
|                       |   "secondary_device_username": "esi",                                                                                                                             |
|                       |   "secondary_device_logical_interface": "ae0.1025",                                                                                                               |
|                       |   "OS::stack_name": "internet_gateway_429e24b5-a2f0-4fb8-b467-e335857e9476",                                                                                      |
|                       |   "inet_out_filter": "INET_OUT",                                                                                                                                  |
|                       |   "vlan": "1025",                                                                                                                                                 |
|                       |   "primary_device_physical_interface": "ae0",                                                                                                                     |
|                       |   "uplink_import_policy": "INSTANCE-MASTER_IN",                                                                                                                   |
|                       |   "input_filter_name": "FILTER_10M-GA-UP-INET",                                                                                                                   |
|                       |   "filter_term_name": "vrf_gw_sample-ha-router-downlink_1025_filter",                                                                                             |
|                       |   "OS::stack_id": "d6e8740b-3293-484e-965d-0a9b0b02328a",                                                                                                         |
|                       |   "secondary_device_port": "830",                                                                                                                                 |
|                       |   "secondary_device_password": "esiesi0000",                                                                                                                      |
|                       |   "vrf_name": "vrf_gw_sample-ha-router-downlink_1025",                                                                                                            |
|                       |   "primary_vrrp_config_group": "InetGW1-VRRP",                                                                                                                    |
|                       |   "primary_device_port": "830",                                                                                                                                   |
|                       |   "secondary_device_ip": "10.79.5.184"                                                                                                                            |
|                       | }                                                                                                                                                                 |
| parent                | None                                                                                                                                                              |
| stack_name            | internet_gateway_429e24b5-a2f0-4fb8-b467-e335857e9476                                                                                                             |
| stack_owner           | admin                                                                                                                                                             |
| stack_status          | CREATE_COMPLETE                                                                                                                                                   |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                               |
| stack_user_project_id | 0b576f6f4cbf414f829cd12f008bf08f                                                                                                                                  |
| template_description  | Internet GW Instance                                                                                                                                              |
| timeout_mins          | 60                                                                                                                                                                |
| updated_time          | None                                                                                                                                                              |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show internet_gateway_429e24b5-a2f0-4fb8-b467-e335857e9476
description: 'Internet GW Instance

  '
heat_template_version: '2013-05-23'
parameters:
  filter_term_name: {label: Filter term name, type: string}
  inet_in_filter: {label: Internet Input Filter, type: string}
  inet_out_filter: {label: Internet Output Filter, type: string}
  input_filter_name: {description: Policer name to use as input policer, label: Input
      policer name, type: string}
  output_filter_name: {description: Policer name to use as output policer, label: Output
      policer name, type: string}
  prefix_list_name: {label: Prefix list name, type: string}
  primary_device_ip: {description: Ip address that will be used to establish ssh connection
      to the Primary Device., label: Ip address of the device., type: string}
  primary_device_logical_interface: {description: Name of the created logical interface
      on the Primary device, label: Logical Interface name, type: string}
  primary_device_password: {description: Password of the user which will be used to
      log onto the Primary Device., label: Users password., type: string}
  primary_device_physical_interface: {description: Physical port on the Primary device
      on which the logical port will be configured, label: Underlying physical interface,
    type: string}
  primary_device_port: {description: Port that will be used to establish ssh connection
      to the Primary Device., label: Port of the ssh connection., type: number}
  primary_device_username: {description: Name of the user which will be used to log
      onto the Primary Device., label: User name to log on to device., type: string}
  primary_vrrp_config_group: {description: Name for apply group to use for interface
      for VRRP, label: Apply group name, type: string}
  secondary_device_ip: {description: Ip address that will be used to establish ssh
      connection to the Secondary Device., label: Ip address of the device., type: string}
  secondary_device_logical_interface: {description: Name of the created logical interface
      on the Secondary device, label: Logical Interface name, type: string}
  secondary_device_password: {description: Password of the user which will be used
      to log onto the Secondary Device., label: Users password., type: string}
  secondary_device_physical_interface: {description: Physical port on the Secondary
      device on which the logical port will be configured, label: Underlying physical
      interface, type: string}
  secondary_device_port: {description: Port that will be used to establish ssh connection
      to the Secondary Device., label: Port of the ssh connection., type: number}
  secondary_device_username: {description: Name of the user which will be used to
      log onto the Secondary Device., label: User name to log on to device., type: string}
  secondary_vrrp_config_group: {description: Name for apply group to use for interface
      for VRRP, label: Apply group name, type: string}
  uplink_import_policy: {description: Uplink Import Policy for IGS, label: Uplink
      Import Policy, type: string}
  vlan: {description: vlan tag used by logical interface, label: VLAN ID, type: string}
  vrf_export_policy: {description: Export Policy for IGS, label: Export Policy, type: string}
  vrf_import_policy: {description: Import Policy for IGS, label: Import Policy, type: string}
  vrf_name: {description: Name for VRF used by logical interface, label: VRF name,
    type: string}
resources:
  netconf_configure_primary:
    properties:
      configs:
      - config:
          str_replace:
            params:
              $APPLY_GROUP: {get_param: primary_vrrp_config_group}
              $INPUT_FILTER: {get_param: input_filter_name}
              $OUTPUT_FILTER: {get_param: output_filter_name}
              $VLAN: {get_param: vlan}
            template: "apply-groups $APPLY_GROUP\nvlan-id $VLAN;\ndescription inet_gw;\n\
              family inet {\n    filter {\n        input $INPUT_FILTER;\n        output\
              \ $OUTPUT_FILTER;\n    }\n}\n"
        path:
        - {config_type: tag, tag: interfaces, xml_type: tag}
        - config_type: name
          name: {get_param: primary_device_physical_interface}
          tag: interface
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: vlan}
          tag: unit
          xml_type: named_tag
      - config:
          str_replace:
            params:
              $EXPORT_POLICY: {get_param: vrf_export_policy}
              $IMPORT_POLICY: {get_param: vrf_import_policy}
              $LIF: {get_param: primary_device_logical_interface}
            template: 'instance-type virtual-router;

              interface $LIF;

              routing-options instance-import $IMPORT_POLICY;

              routing-options instance-export $EXPORT_POLICY;

              '
        path:
        - {config_type: tag, tag: routing-instances, xml_type: tag}
        - config_type: name
          name: {get_param: vrf_name}
          tag: instance
          xml_type: named_tag
      - config:
          str_replace:
            params:
              $VRF_NAME: {get_param: vrf_name}
            template: 'from instance $VRF_NAME;

              then accept;

              '
        path:
        - {config_type: tag, tag: policy-options, xml_type: tag}
        - config_type: named_tag
          name: {get_param: uplink_import_policy}
          tag: policy-statement
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: vrf_name}
          tag: term
          xml_type: named_tag
      - config: ''
        path:
        - {config_type: tag, tag: policy-options, xml_type: tag}
        - config_type: named_tag
          name: {get_param: prefix_list_name}
          tag: prefix-list
          xml_type: named_tag
      - additional_commands:
          str_replace:
            params:
              $INET_IN: {get_param: inet_in_filter}
              $TERM_NAME: {get_param: filter_term_name}
            template: 'insert firewall family inet filter $INET_IN term $TERM_NAME
              before term all-accept

              '
        config:
          str_replace:
            params:
              $PREFIX_LIST_NAME: {get_param: prefix_list_name}
              $VRF_NAME: {get_param: vrf_name}
            template: "from {\n   destination-prefix-list {\n        $PREFIX_LIST_NAME;\n\
              \   }\n}\nthen {\n     count $VRF_NAME_IN;\n     accept;\n}\n"
        path:
        - {config_type: tag, tag: firewall, xml_type: tag}
        - {config_type: tag, tag: family, xml_type: tag}
        - {config_type: tag, tag: inet, xml_type: tag}
        - config_type: named_tag
          name: {get_param: inet_in_filter}
          tag: filter
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: filter_term_name}
          tag: term
          xml_type: named_tag
      - additional_commands:
          str_replace:
            params:
              $INET_OUT: {get_param: inet_out_filter}
              $TERM_NAME: {get_param: filter_term_name}
            template: 'insert firewall family inet filter $INET_OUT term $TERM_NAME
              before term all-accept

              '
        config:
          str_replace:
            params:
              $PREFIX_LIST_NAME: {get_param: prefix_list_name}
              $VRF_NAME: {get_param: vrf_name}
            template: "from {\n   source-prefix-list {\n        $PREFIX_LIST_NAME;\n\
              \   }\n}\nthen {\n     count $VRF_NAME_OUT;\n     accept;\n}\n"
        path:
        - {config_type: tag, tag: firewall, xml_type: tag}
        - {config_type: tag, tag: family, xml_type: tag}
        - {config_type: tag, tag: inet, xml_type: tag}
        - config_type: named_tag
          name: {get_param: inet_out_filter}
          tag: filter
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: filter_term_name}
          tag: term
          xml_type: named_tag
      device_ip: {get_param: primary_device_ip}
      lock_timeout: 3000
      on_update: merge
      password: {get_param: primary_device_password}
      port: {get_param: primary_device_port}
      username: {get_param: primary_device_username}
    type: OS::Contrail::NetconfNamedConfigs
  netconf_configure_secondary:
    properties:
      configs:
      - config:
          str_replace:
            params:
              $APPLY_GROUP: {get_param: secondary_vrrp_config_group}
              $INPUT_FILTER: {get_param: input_filter_name}
              $OUTPUT_FILTER: {get_param: output_filter_name}
              $VLAN: {get_param: vlan}
            template: "apply-groups $APPLY_GROUP\nvlan-id $VLAN;\ndescription inet_gw;\n\
              family inet {\n    filter {\n        input $INPUT_FILTER;\n        output\
              \ $OUTPUT_FILTER;\n    }\n}\n"
        path:
        - {config_type: tag, tag: interfaces, xml_type: tag}
        - config_type: name
          name: {get_param: secondary_device_physical_interface}
          tag: interface
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: vlan}
          tag: unit
          xml_type: named_tag
      - config:
          str_replace:
            params:
              $EXPORT_POLICY: {get_param: vrf_export_policy}
              $IMPORT_POLICY: {get_param: vrf_import_policy}
              $LIF: {get_param: secondary_device_logical_interface}
            template: 'instance-type virtual-router;

              interface $LIF;

              routing-options instance-import $IMPORT_POLICY;

              routing-options instance-export $EXPORT_POLICY;

              '
        path:
        - {config_type: tag, tag: routing-instances, xml_type: tag}
        - config_type: name
          name: {get_param: vrf_name}
          tag: instance
          xml_type: named_tag
      - config:
          str_replace:
            params:
              $VRF_NAME: {get_param: vrf_name}
            template: 'from instance $VRF_NAME;

              then accept;

              '
        path:
        - {config_type: tag, tag: policy-options, xml_type: tag}
        - config_type: named_tag
          name: {get_param: uplink_import_policy}
          tag: policy-statement
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: vrf_name}
          tag: term
          xml_type: named_tag
      - config: ''
        path:
        - {config_type: tag, tag: policy-options, xml_type: tag}
        - config_type: named_tag
          name: {get_param: prefix_list_name}
          tag: prefix-list
          xml_type: named_tag
      - additional_commands:
          str_replace:
            params:
              $INET_IN: {get_param: inet_in_filter}
              $TERM_NAME: {get_param: filter_term_name}
            template: 'insert firewall family inet filter $INET_IN term $TERM_NAME
              before term all-accept

              '
        config:
          str_replace:
            params:
              $PREFIX_LIST_NAME: {get_param: prefix_list_name}
              $VRF_NAME: {get_param: vrf_name}
            template: "from {\n   destination-prefix-list {\n        $PREFIX_LIST_NAME;\n\
              \   }\n}\nthen {\n     count $VRF_NAME_IN;\n     accept;\n}\n"
        path:
        - {config_type: tag, tag: firewall, xml_type: tag}
        - {config_type: tag, tag: family, xml_type: tag}
        - {config_type: tag, tag: inet, xml_type: tag}
        - config_type: named_tag
          name: {get_param: inet_in_filter}
          tag: filter
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: filter_term_name}
          tag: term
          xml_type: named_tag
      - additional_commands:
          str_replace:
            params:
              $INET_OUT: {get_param: inet_out_filter}
              $TERM_NAME: {get_param: filter_term_name}
            template: 'insert firewall family inet filter $INET_OUT term $TERM_NAME
              before term all-accept

              '
        config:
          str_replace:
            params:
              $PREFIX_LIST_NAME: {get_param: prefix_list_name}
              $VRF_NAME: {get_param: vrf_name}
            template: "from {\n   source-prefix-list {\n        $PREFIX_LIST_NAME;\n\
              \   }\n}\nthen {\n     count $VRF_NAME_OUT;\n     accept;\n}\n"
        path:
        - {config_type: tag, tag: firewall, xml_type: tag}
        - {config_type: tag, tag: family, xml_type: tag}
        - {config_type: tag, tag: inet, xml_type: tag}
        - config_type: named_tag
          name: {get_param: inet_out_filter}
          tag: filter
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: filter_term_name}
          tag: term
          xml_type: named_tag
      device_ip: {get_param: secondary_device_ip}
      lock_timeout: 3000
      on_update: merge
      password: {get_param: secondary_device_password}
      port: {get_param: secondary_device_port}
      username: {get_param: secondary_device_username}
    type: OS::Contrail::NetconfNamedConfigs

### Create Public Ip ###
name:[sample-public_ip], id:[bc6f2c6d-59be-4f56-a2d7-96ab578c0735]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
04:24:37.141703  04:24:37.335683  0.193980        POST     201    PENDING_CREATE
04:24:37.335985  04:24:37.477964  0.141979         GET     200    PENDING_CREATE
04:24:38.479284  04:24:38.571594  0.092310         GET     200    PENDING_CREATE
04:24:39.572634  04:24:39.652878  0.080244         GET     200    PENDING_CREATE
04:24:40.654078  04:24:40.776162  0.122084         GET     200    PENDING_CREATE
04:24:41.776640  04:24:41.865115  0.088475         GET     200    PENDING_CREATE
04:24:42.866455  04:24:42.962681  0.096226         GET     200    PENDING_CREATE
04:24:43.963144  04:24:44.071823  0.108679         GET     200    PENDING_CREATE
04:24:45.072642  04:24:45.181764  0.109122         GET     200    PENDING_CREATE
04:24:46.183288  04:24:46.321091  0.137803         GET     200    PENDING_CREATE
04:24:47.322471  04:24:47.425629  0.103158         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 10.283926

[localhost] local: gohan client public_ip show --output-format json bc6f2c6d-59be-4f56-a2d7-96ab578c0735
{
    "public_ip": {
        "cidr": "203.0.112.0",
        "description": "Sample Public-Ip",
        "id": "bc6f2c6d-59be-4f56-a2d7-96ab578c0735",
        "internet_gw_id": "429e24b5-a2f0-4fb8-b467-e335857e9476",
        "ip_pool_id": "5cd14f90-cf3c-4aeb-b30a-227b3c936761",
        "name": "sample-public_ip",
        "status": "ACTIVE",
        "submask_length": 28,
        "suspended_public_ip_id": null,
        "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
    }
}

[localhost] local: gohan client resource_mapping list --output-format json
{
    "resource_mappings": [
        {
            "created": 1.494476663e+09,
            "deleted": null,
            "id": "075c5413-cdf3-4bb5-b7b1-6100f3cecb25",
            "mapped_id": "10.79.5.184-INET_IN-vrf_gw_sample-ha-router-downlink_1025_IN",
            "relation": "secondary_in",
            "resource_id": "429e24b5-a2f0-4fb8-b467-e335857e9476",
            "resource_type": "internet_gateway",
            "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
        },
        {
            "created": 1.494476663e+09,
            "deleted": null,
            "id": "11cb2015-fadc-4ae2-b0cf-b7ae280baebb",
            "mapped_id": "10.79.5.185-INET_OUT-vrf_gw_sample-ha-router-downlink_1025_OUT",
            "relation": "primary_out",
            "resource_id": "429e24b5-a2f0-4fb8-b467-e335857e9476",
            "resource_type": "internet_gateway",
            "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
        },
        {
            "created": 1.494476663e+09,
            "deleted": null,
            "id": "b3d2f0fb-3765-4485-a88d-44b46fe191df",
            "mapped_id": "10.79.5.184-INET_OUT-vrf_gw_sample-ha-router-downlink_1025_OUT",
            "relation": "secondary_out",
            "resource_id": "429e24b5-a2f0-4fb8-b467-e335857e9476",
            "resource_type": "internet_gateway",
            "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
        },
        {
            "created": 1.494476663e+09,
            "deleted": null,
            "id": "f3010659-2a05-4b5f-add1-0e2abc31f75a",
            "mapped_id": "10.79.5.185-INET_IN-vrf_gw_sample-ha-router-downlink_1025_IN",
            "relation": "primary_in",
            "resource_id": "429e24b5-a2f0-4fb8-b467-e335857e9476",
            "resource_type": "internet_gateway",
            "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
        }
    ]
}

[localhost] local: gohan client billing_resource list --output-format json
{
    "billing_resources": [
        {
            "config_version": 1,
            "ended": null,
            "id": "35e4ba02-217d-492d-b256-adbe19c516d5",
            "info": {
                "internet_service": "sample-internet-service"
            },
            "parent_billing_id": null,
            "resource_id": "429e24b5-a2f0-4fb8-b467-e335857e9476",
            "resource_type": "internet_gateway",
            "started": 1.494476663e+09,
            "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
            "unique_resource_id": "429e24b5-a2f0-4fb8-b467-e335857e9476"
        },
        {
            "config_version": 1,
            "ended": null,
            "id": "6e74227c-1d04-472f-b511-81d88e219502",
            "info": {
                "cidr": "203.0.112.0",
                "submask_length": 28
            },
            "parent_billing_id": null,
            "resource_id": "bc6f2c6d-59be-4f56-a2d7-96ab578c0735",
            "resource_type": "public_ip",
            "started": 1.494476677e+09,
            "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
            "unique_resource_id": "bc6f2c6d-59be-4f56-a2d7-96ab578c0735"
        },
        {
            "config_version": 1,
            "ended": null,
            "id": "e32e992e-8553-448c-860f-6e63bbe30c19",
            "info": {
                "bandwidth": "10",
                "qos_type": "guarantee"
            },
            "parent_billing_id": "35e4ba02-217d-492d-b256-adbe19c516d5",
            "resource_id": "e25f6309-c384-446e-bdc1-5241cb14890b",
            "resource_type": "qos_option",
            "started": 1.494476663e+09,
            "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
            "unique_resource_id": null
        }
    ]
}

#########################################
### checking heat-stack (public_ips) ####
#########################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/public_ips/bc6f2c6d-59be-4f56-a2d7-96ab578c0735
[localhost] local: heat stack-show public_ip_bc6f2c6d-59be-4f56-a2d7-96ab578c0735
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                      |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                         |
| creation_time         | 2017-05-11T04:24:38Z                                                                                                                                       |
| description           | QoS Option                                                                                                                                                 |
| disable_rollback      | True                                                                                                                                                       |
| id                    | e929ecde-bd23-4e03-a261-eb994c1027f4                                                                                                                       |
| links                 | http://heat-api:8004/v1/0b576f6f4cbf414f829cd12f008bf08f/stacks/public_ip_bc6f2c6d-59be-4f56-a2d7-96ab578c0735/e929ecde-bd23-4e03-a261-eb994c1027f4 (self) |
| notification_topics   | []                                                                                                                                                         |
| outputs               | []                                                                                                                                                         |
| parameters            | {                                                                                                                                                          |
|                       |   "primary_device_ip": "10.79.5.185",                                                                                                                      |
|                       |   "OS::stack_id": "e929ecde-bd23-4e03-a261-eb994c1027f4",                                                                                                  |
|                       |   "OS::stack_name": "public_ip_bc6f2c6d-59be-4f56-a2d7-96ab578c0735",                                                                                      |
|                       |   "secondary_device_port": "830",                                                                                                                          |
|                       |   "secondary_device_password": "esiesi0000",                                                                                                               |
|                       |   "ip_mask": "28",                                                                                                                                         |
|                       |   "primary_device_password": "esiesi0000",                                                                                                                 |
|                       |   "ip_cidr": "203.0.112.0",                                                                                                                                |
|                       |   "primary_device_username": "esi",                                                                                                                        |
|                       |   "secondary_device_username": "esi",                                                                                                                      |
|                       |   "primary_device_port": "830",                                                                                                                            |
|                       |   "secondary_device_ip": "10.79.5.184",                                                                                                                    |
|                       |   "prefix_list_name": "vrf_gw_sample-ha-router-downlink_1025_prefix"                                                                                       |
|                       | }                                                                                                                                                          |
| parent                | None                                                                                                                                                       |
| stack_name            | public_ip_bc6f2c6d-59be-4f56-a2d7-96ab578c0735                                                                                                             |
| stack_owner           | admin                                                                                                                                                      |
| stack_status          | CREATE_COMPLETE                                                                                                                                            |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                        |
| stack_user_project_id | 0b576f6f4cbf414f829cd12f008bf08f                                                                                                                           |
| template_description  | QoS Option                                                                                                                                                 |
| timeout_mins          | 60                                                                                                                                                         |
| updated_time          | None                                                                                                                                                       |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show public_ip_bc6f2c6d-59be-4f56-a2d7-96ab578c0735
description: 'QoS Option

  '
heat_template_version: '2013-05-23'
parameters:
  ip_cidr: {label: Public IP CIDR, type: string}
  ip_mask: {label: Public IP CIDR, type: string}
  prefix_list_name: {label: Prefix List name., type: string}
  primary_device_ip: {description: Ip address that will be used to establish ssh connection
      to the Primary Device., label: Ip address of the device., type: string}
  primary_device_password: {description: Password of the user which will be used to
      log onto the Primary Device., label: Users password., type: string}
  primary_device_port: {description: Port that will be used to establish ssh connection
      to the Primary Device., label: Port of the ssh connection., type: number}
  primary_device_username: {description: Name of the user which will be used to log
      onto the Primary Device., label: User name to log on to device., type: string}
  secondary_device_ip: {description: Ip address that will be used to establish ssh
      connection to the Secondary Device., label: Ip address of the device., type: string}
  secondary_device_password: {description: Password of the user which will be used
      to log onto the Secondary Device., label: Users password., type: string}
  secondary_device_port: {description: Port that will be used to establish ssh connection
      to the Secondary Device., label: Port of the ssh connection., type: number}
  secondary_device_username: {description: Name of the user which will be used to
      log onto the Secondary Device., label: User name to log on to device., type: string}
resources:
  netconf_configure_primary:
    properties:
      configs:
      - config: ''
        path:
        - {config_type: tag, tag: policy-options, xml_type: tag}
        - config_type: named_tag
          name: {get_param: prefix_list_name}
          tag: prefix-list
          xml_type: named_tag
        - config_type: name
          name:
            str_replace:
              params:
                $CIDR: {get_param: ip_cidr}
                $MASK: {get_param: ip_mask}
              template: '$CIDR/$MASK

                '
          tag: prefix-list-item
          xml_type: named_tag
      device_ip: {get_param: primary_device_ip}
      lock_timeout: 3000
      password: {get_param: primary_device_password}
      port: {get_param: primary_device_port}
      username: {get_param: primary_device_username}
    type: OS::Contrail::NetconfNamedConfigs
  netconf_configure_secondary:
    properties:
      configs:
      - config: ''
        path:
        - {config_type: tag, tag: policy-options, xml_type: tag}
        - config_type: named_tag
          name: {get_param: prefix_list_name}
          tag: prefix-list
          xml_type: named_tag
        - config_type: name
          name:
            str_replace:
              params:
                $CIDR: {get_param: ip_cidr}
                $MASK: {get_param: ip_mask}
              template: '$CIDR/$MASK

                '
          tag: prefix-list-item
          xml_type: named_tag
      device_ip: {get_param: secondary_device_ip}
      lock_timeout: 3000
      password: {get_param: secondary_device_password}
      port: {get_param: secondary_device_port}
      username: {get_param: secondary_device_username}
    type: OS::Contrail::NetconfNamedConfigs

### Create Network ###
name:[sample-network], id:[52d7bef8-aa17-45c3-b63e-6a0e504603f0]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
04:25:00.856725  04:25:00.949812  0.093087        POST     201    PENDING_CREATE
04:25:00.950063  04:25:01.139002  0.188939         GET     200    PENDING_CREATE
04:25:02.140255  04:25:02.308160  0.167905         GET     200    PENDING_CREATE
04:25:03.308622  04:25:03.541589  0.232967         GET     200    PENDING_CREATE
04:25:04.542048  04:25:04.749572  0.207524         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 3.892847

[localhost] local: gohan client network show --output-format json 52d7bef8-aa17-45c3-b63e-6a0e504603f0
{
    "network": {
        "admin_state_up": true,
        "description": "Sample Network",
        "id": "52d7bef8-aa17-45c3-b63e-6a0e504603f0",
        "name": "sample-network",
        "plane": "data",
        "shared": false,
        "status": "ACTIVE",
        "subnets": [],
        "tags": {},
        "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
    }
}

[localhost] local: gohan client resource_mapping list --output-format json
{
    "resource_mappings": [
        {
            "created": 1.494476663e+09,
            "deleted": null,
            "id": "075c5413-cdf3-4bb5-b7b1-6100f3cecb25",
            "mapped_id": "10.79.5.184-INET_IN-vrf_gw_sample-ha-router-downlink_1025_IN",
            "relation": "secondary_in",
            "resource_id": "429e24b5-a2f0-4fb8-b467-e335857e9476",
            "resource_type": "internet_gateway",
            "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
        },
        {
            "created": 1.494476663e+09,
            "deleted": null,
            "id": "11cb2015-fadc-4ae2-b0cf-b7ae280baebb",
            "mapped_id": "10.79.5.185-INET_OUT-vrf_gw_sample-ha-router-downlink_1025_OUT",
            "relation": "primary_out",
            "resource_id": "429e24b5-a2f0-4fb8-b467-e335857e9476",
            "resource_type": "internet_gateway",
            "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
        },
        {
            "created": 1.494476663e+09,
            "deleted": null,
            "id": "b3d2f0fb-3765-4485-a88d-44b46fe191df",
            "mapped_id": "10.79.5.184-INET_OUT-vrf_gw_sample-ha-router-downlink_1025_OUT",
            "relation": "secondary_out",
            "resource_id": "429e24b5-a2f0-4fb8-b467-e335857e9476",
            "resource_type": "internet_gateway",
            "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
        },
        {
            "created": 1.494476663e+09,
            "deleted": null,
            "id": "f3010659-2a05-4b5f-add1-0e2abc31f75a",
            "mapped_id": "10.79.5.185-INET_IN-vrf_gw_sample-ha-router-downlink_1025_IN",
            "relation": "primary_in",
            "resource_id": "429e24b5-a2f0-4fb8-b467-e335857e9476",
            "resource_type": "internet_gateway",
            "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
        },
        {
            "created": 1.494476703e+09,
            "deleted": null,
            "id": "f6a5fc1b-695d-4921-923a-92af07f52c2b",
            "mapped_id": "52d7bef8-aa17-45c3-b63e-6a0e504603f0",
            "relation": "instance",
            "resource_id": "52d7bef8-aa17-45c3-b63e-6a0e504603f0",
            "resource_type": "network",
            "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
        }
    ]
}

[localhost] local: gohan client billing_resource list --output-format json
{
    "billing_resources": [
        {
            "config_version": 1,
            "ended": null,
            "id": "35e4ba02-217d-492d-b256-adbe19c516d5",
            "info": {
                "internet_service": "sample-internet-service"
            },
            "parent_billing_id": null,
            "resource_id": "429e24b5-a2f0-4fb8-b467-e335857e9476",
            "resource_type": "internet_gateway",
            "started": 1.494476663e+09,
            "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
            "unique_resource_id": "429e24b5-a2f0-4fb8-b467-e335857e9476"
        },
        {
            "config_version": 1,
            "ended": null,
            "id": "6e74227c-1d04-472f-b511-81d88e219502",
            "info": {
                "cidr": "203.0.112.0",
                "submask_length": 28
            },
            "parent_billing_id": null,
            "resource_id": "bc6f2c6d-59be-4f56-a2d7-96ab578c0735",
            "resource_type": "public_ip",
            "started": 1.494476677e+09,
            "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
            "unique_resource_id": "bc6f2c6d-59be-4f56-a2d7-96ab578c0735"
        },
        {
            "config_version": 1,
            "ended": null,
            "id": "b4165f07-3b67-438d-a398-4add6a499a04",
            "info": {},
            "parent_billing_id": null,
            "resource_id": "52d7bef8-aa17-45c3-b63e-6a0e504603f0",
            "resource_type": "network",
            "started": 1.494476703e+09,
            "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
            "unique_resource_id": "52d7bef8-aa17-45c3-b63e-6a0e504603f0"
        },
        {
            "config_version": 1,
            "ended": null,
            "id": "e32e992e-8553-448c-860f-6e63bbe30c19",
            "info": {
                "bandwidth": "10",
                "qos_type": "guarantee"
            },
            "parent_billing_id": "35e4ba02-217d-492d-b256-adbe19c516d5",
            "resource_id": "e25f6309-c384-446e-bdc1-5241cb14890b",
            "resource_type": "qos_option",
            "started": 1.494476663e+09,
            "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
            "unique_resource_id": null
        }
    ]
}

#######################################
### checking heat-stack (networks) ####
#######################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/networks/52d7bef8-aa17-45c3-b63e-6a0e504603f0
[localhost] local: heat stack-show network_52d7bef8-aa17-45c3-b63e-6a0e504603f0
+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                    |
+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                       |
| creation_time         | 2017-05-11T04:25:01Z                                                                                                                                     |
| description           | Network template                                                                                                                                         |
| disable_rollback      | True                                                                                                                                                     |
| id                    | 345e3601-b0c7-428b-8b7b-0787ab682615                                                                                                                     |
| links                 | http://heat-api:8004/v1/0b576f6f4cbf414f829cd12f008bf08f/stacks/network_52d7bef8-aa17-45c3-b63e-6a0e504603f0/345e3601-b0c7-428b-8b7b-0787ab682615 (self) |
| notification_topics   | []                                                                                                                                                       |
| outputs               | [                                                                                                                                                        |
|                       |   {                                                                                                                                                      |
|                       |     "output_value": "[]",                                                                                                                                |
|                       |     "description": "The name of the virtual network.",                                                                                                   |
|                       |     "output_key": "route_targets"                                                                                                                        |
|                       |   },                                                                                                                                                     |
|                       |   {                                                                                                                                                      |
|                       |     "output_value": "default-domain:admin:52d7bef8-aa17-45c3-b63e-6a0e504603f0",                                                                         |
|                       |     "description": "The FQ name of the virtual network.",                                                                                                |
|                       |     "output_key": "fq_name"                                                                                                                              |
|                       |   },                                                                                                                                                     |
|                       |   {                                                                                                                                                      |
|                       |     "output_value": "52d7bef8-aa17-45c3-b63e-6a0e504603f0",                                                                                              |
|                       |     "description": "A unique id for the virtual network.",                                                                                               |
|                       |     "output_key": "id"                                                                                                                                   |
|                       |   },                                                                                                                                                     |
|                       |   {                                                                                                                                                      |
|                       |     "output_value": "52d7bef8-aa17-45c3-b63e-6a0e504603f0",                                                                                              |
|                       |     "description": "The name of the virtual network.",                                                                                                   |
|                       |     "output_key": "name"                                                                                                                                 |
|                       |   }                                                                                                                                                      |
|                       | ]                                                                                                                                                        |
| parameters            | {                                                                                                                                                        |
|                       |   "forwarding_mode": "l2_l3",                                                                                                                            |
|                       |   "allow_transit": "False",                                                                                                                              |
|                       |   "name": "52d7bef8-aa17-45c3-b63e-6a0e504603f0",                                                                                                        |
|                       |   "OS::stack_name": "network_52d7bef8-aa17-45c3-b63e-6a0e504603f0",                                                                                      |
|                       |   "admin_state_up": "True",                                                                                                                              |
|                       |   "OS::stack_id": "345e3601-b0c7-428b-8b7b-0787ab682615",                                                                                                |
|                       |   "external": "True",                                                                                                                                    |
|                       |   "shared": "False",                                                                                                                                     |
|                       |   "route_targets": "",                                                                                                                                   |
|                       |   "uuid": "52d7bef8-aa17-45c3-b63e-6a0e504603f0"                                                                                                         |
|                       | }                                                                                                                                                        |
| parent                | None                                                                                                                                                     |
| stack_name            | network_52d7bef8-aa17-45c3-b63e-6a0e504603f0                                                                                                             |
| stack_owner           | admin                                                                                                                                                    |
| stack_status          | CREATE_COMPLETE                                                                                                                                          |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                      |
| stack_user_project_id | 0b576f6f4cbf414f829cd12f008bf08f                                                                                                                         |
| template_description  | Network template                                                                                                                                         |
| timeout_mins          | 10                                                                                                                                                       |
| updated_time          | None                                                                                                                                                     |
+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show network_52d7bef8-aa17-45c3-b63e-6a0e504603f0
description: 'Network template

  '
heat_template_version: '2013-05-23'
outputs:
  fq_name:
    description: The FQ name of the virtual network.
    value:
      get_attr: [network, fq_name]
  id:
    description: A unique id for the virtual network.
    value: {get_resource: network}
  name:
    description: The name of the virtual network.
    value:
      get_attr: [network, name]
  route_targets:
    description: The name of the virtual network.
    value:
      get_attr: [network, route_targets]
parameters:
  admin_state_up: {default: true, label: Admin state up, type: boolean}
  allow_transit: {default: false, label: Allow Transit, type: boolean}
  external: {default: true, label: External Network, type: boolean}
  forwarding_mode: {default: l2_l3, description: Forwarding Mode., label: Forwarding
      Mode, type: string}
  name: {description: Name of the virtual network that will be created., label: Virtual
      Network Name, type: string}
  route_targets:
    default: []
    label: Route Targets list
    type: comma_delimited_list
  shared: {default: false, label: Shared Network, type: boolean}
  uuid: {default: '', description: UUID of the virtual network that will be created.,
    label: Virtual Network UUID, type: string}
resources:
  network:
    properties:
      admin_state_up: {get_param: admin_state_up}
      forwarding_mode: {get_param: forwarding_mode}
      name: {get_param: name}
      route_targets: {get_param: route_targets}
      shared: {get_param: shared}
      uuid: {get_param: uuid}
    type: OS::Contrail::VirtualNetwork

### Create Subnet ###
name:[sample-subnet], id:[a510f785-7758-4ce5-8fd4-c107d11b8e40]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
04:25:18.759947  04:25:20.104485  1.344538        POST     201    PENDING_CREATE
04:25:20.105798  04:25:20.376312  0.270514         GET     200    PENDING_CREATE
04:25:21.377591  04:25:21.453401  0.075810         GET     200    PENDING_CREATE
04:25:22.454834  04:25:22.574229  0.119395         GET     200    PENDING_CREATE
04:25:23.575477  04:25:23.680119  0.104642         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 4.920172

[localhost] local: gohan client subnet show --output-format json a510f785-7758-4ce5-8fd4-c107d11b8e40
{
    "subnet": {
        "allocation_pools": [
            {
                "end": "172.16.101.254",
                "start": "172.16.101.2"
            }
        ],
        "cidr": "172.16.101.0/24",
        "description": "Sample Subnet",
        "dhcp_server_address": "172.16.101.2",
        "dns_nameservers": [],
        "enable_dhcp": true,
        "gateway_ip": "172.16.101.1",
        "host_routes": [],
        "id": "a510f785-7758-4ce5-8fd4-c107d11b8e40",
        "ip_version": 4,
        "ipv6_address_mode": null,
        "ipv6_ra_mode": null,
        "name": "sample-subnet",
        "network_id": "52d7bef8-aa17-45c3-b63e-6a0e504603f0",
        "ntp_servers": [],
        "status": "ACTIVE",
        "tags": {},
        "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
    }
}

[localhost] local: gohan client port list --output-format json
[localhost] local: gohan client port show --output-format json 0cd64eb2-32e8-4069-b5e4-9b718aa61b76
{
    "port": {
        "admin_state_up": true,
        "allowed_address_pairs": [],
        "attached": false,
        "binding:vif_type": "vrouter",
        "description": "DHCP Server Port",
        "device_id": "a510f785-7758-4ce5-8fd4-c107d11b8e40",
        "device_owner": "network:dhcp",
        "ese_logical_port_id": null,
        "fake_delete": false,
        "fixed_ips": [
            {
                "ip_address": "172.16.101.2",
                "subnet_id": "a510f785-7758-4ce5-8fd4-c107d11b8e40"
            }
        ],
        "id": "0cd64eb2-32e8-4069-b5e4-9b718aa61b76",
        "mac_address": "00:00:5e:00:01:00",
        "managed_by_service": false,
        "name": "dhcp-server-port",
        "network_id": "52d7bef8-aa17-45c3-b63e-6a0e504603f0",
        "segmentation_id": null,
        "segmentation_type": null,
        "status": "ACTIVE",
        "tags": {},
        "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
    }
}

######################################
### checking heat-stack (subnets) ####
######################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/subnets/a510f785-7758-4ce5-8fd4-c107d11b8e40
[localhost] local: heat stack-show subnet_a510f785-7758-4ce5-8fd4-c107d11b8e40
+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                   |
+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                      |
| creation_time         | 2017-05-11T04:25:21Z                                                                                                                                    |
| description           | Subnet template                                                                                                                                         |
| disable_rollback      | True                                                                                                                                                    |
| id                    | 72d3b074-b568-4254-a0e0-cf947ba944ab                                                                                                                    |
| links                 | http://heat-api:8004/v1/0b576f6f4cbf414f829cd12f008bf08f/stacks/subnet_a510f785-7758-4ce5-8fd4-c107d11b8e40/72d3b074-b568-4254-a0e0-cf947ba944ab (self) |
| notification_topics   | []                                                                                                                                                      |
| outputs               | [                                                                                                                                                       |
|                       |   {                                                                                                                                                     |
|                       |     "output_value": "172.16.101.0/24",                                                                                                                  |
|                       |     "description": "IP prefix of local subnet.",                                                                                                        |
|                       |     "output_key": "ip_prefix"                                                                                                                           |
|                       |   },                                                                                                                                                    |
|                       |   {                                                                                                                                                     |
|                       |     "output_value": "a510f785-7758-4ce5-8fd4-c107d11b8e40",                                                                                             |
|                       |     "description": "The name of the local subnet.",                                                                                                     |
|                       |     "output_key": "name"                                                                                                                                |
|                       |   },                                                                                                                                                    |
|                       |   {                                                                                                                                                     |
|                       |     "output_value": "172.16.101.1",                                                                                                                     |
|                       |     "description": "Default gateway of local subnet.",                                                                                                  |
|                       |     "output_key": "default_gateway"                                                                                                                     |
|                       |   },                                                                                                                                                    |
|                       |   {                                                                                                                                                     |
|                       |     "output_value": "52d7bef8-aa17-45c3-b63e-6a0e504603f0",                                                                                             |
|                       |     "description": "A unique id for the network.",                                                                                                      |
|                       |     "output_key": "network_id"                                                                                                                          |
|                       |   },                                                                                                                                                    |
|                       |   {                                                                                                                                                     |
|                       |     "output_value": "aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa",                                                                                             |
|                       |     "description": "IPAM this local subnet uses.",                                                                                                      |
|                       |     "output_key": "ipam"                                                                                                                                |
|                       |   },                                                                                                                                                    |
|                       |   {                                                                                                                                                     |
|                       |     "output_value": "435a94ee-ab64-4787-acbb-d2d7c95867e9",                                                                                             |
|                       |     "description": "A unique id for the local subnet.",                                                                                                 |
|                       |     "output_key": "id"                                                                                                                                  |
|                       |   }                                                                                                                                                     |
|                       | ]                                                                                                                                                       |
| parameters            | {                                                                                                                                                       |
|                       |   "OS::stack_name": "subnet_a510f785-7758-4ce5-8fd4-c107d11b8e40",                                                                                      |
|                       |   "enable_dhcp": "True",                                                                                                                                |
|                       |   "network_id": "52d7bef8-aa17-45c3-b63e-6a0e504603f0",                                                                                                 |
|                       |   "ipam": "default-domain:default-project:default-network-ipam",                                                                                        |
|                       |   "dns_nameservers": "",                                                                                                                                |
|                       |   "dhcp_server_address": "172.16.101.2",                                                                                                                |
|                       |   "OS::stack_id": "72d3b074-b568-4254-a0e0-cf947ba944ab",                                                                                               |
|                       |   "ntp_servers": "",                                                                                                                                    |
|                       |   "allocation_pools": "[{u'start': u'172.16.101.2', u'end': u'172.16.101.254'}]",                                                                       |
|                       |   "gateway_ip": "172.16.101.1",                                                                                                                         |
|                       |   "host_routes": "[]",                                                                                                                                  |
|                       |   "cidr": "172.16.101.0/24",                                                                                                                            |
|                       |   "name": "a510f785-7758-4ce5-8fd4-c107d11b8e40"                                                                                                        |
|                       | }                                                                                                                                                       |
| parent                | None                                                                                                                                                    |
| stack_name            | subnet_a510f785-7758-4ce5-8fd4-c107d11b8e40                                                                                                             |
| stack_owner           | admin                                                                                                                                                   |
| stack_status          | CREATE_COMPLETE                                                                                                                                         |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                     |
| stack_user_project_id | 0b576f6f4cbf414f829cd12f008bf08f                                                                                                                        |
| template_description  | Subnet template                                                                                                                                         |
| timeout_mins          | 10                                                                                                                                                      |
| updated_time          | None                                                                                                                                                    |
+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show subnet_a510f785-7758-4ce5-8fd4-c107d11b8e40
description: 'Subnet template

  '
heat_template_version: '2013-05-23'
outputs:
  default_gateway:
    description: Default gateway of local subnet.
    value:
      get_attr: [subnet, default_gateway]
  id:
    description: A unique id for the local subnet.
    value: {get_resource: subnet}
  ip_prefix:
    description: IP prefix of local subnet.
    value:
      get_attr: [subnet, ip_prefix]
  ipam:
    description: IPAM this local subnet uses.
    value:
      get_attr: [subnet, ipam]
  name:
    description: The name of the local subnet.
    value:
      get_attr: [subnet, name]
  network_id:
    description: A unique id for the network.
    value:
      get_attr: [subnet, network_id]
parameters:
  allocation_pools:
    default: []
    description: Allocation Pools
    label: Allocation Pools
    type: string
  cidr: {description: IP prefix of the local subnet that will be created., label: Local
      Subnet IP prefix, type: string}
  dhcp_server_address: {default: 0.0.0.0, description: DHCP Server address, label: DHCP
      Server address, type: string}
  dns_nameservers:
    default: []
    description: DNS Nameservers List
    label: DNS Nameservers List
    type: comma_delimited_list
  enable_dhcp: {default: true, description: Enable DHCP, label: Enable DHCP, type: boolean}
  gateway_ip: {default: 0.0.0.0, description: Default gateway for the local subnet
      that will be created., label: Default Gateway, type: string}
  host_routes:
    default: []
    description: Host Routes
    label: Host Routes
    type: json
  ipam: {default: '', description: IPAM for the local subnet that will be created.,
    label: IP Address Management, type: string}
  name: {description: Name of the local subnet that will be created., label: Local
      Subnet Name, type: string}
  network_id: {description: ID of the network for which subnet will be created., label: Network
      ID, type: string}
  ntp_servers:
    default: []
    description: NTP Nameservers List
    label: NTP Nameservers List
    type: comma_delimited_list
resources:
  subnet:
    properties:
      allocation_pools: {get_param: allocation_pools}
      default_gateway: {get_param: gateway_ip}
      dns_nameservers: {get_param: dns_nameservers}
      dns_server_address: {get_param: dhcp_server_address}
      enable_dhcp: {get_param: enable_dhcp}
      gateway_is_vrouter: false
      host_routes: {get_param: host_routes}
      ip_prefix: {get_param: cidr}
      ipam: {get_param: ipam}
      name: {get_param: name}
      network_id: {get_param: network_id}
      ntp_servers: {get_param: ntp_servers}
    type: OS::Contrail::VnSubnet

### Create Gw Interface ###
name:[sample-gw-interface], id:[b9618566-14ea-4505-8eae-8fdb4b6a0ec1]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
04:25:37.547008  04:25:39.178073  1.631065        POST     201    PENDING_CREATE
[localhost] local: gohan client port list --output-format json
########################################################
### checking heat-stack (ports) for CREATE_COMPLETE ####
########################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/ports/7abe783f-4837-417d-b76f-771ec4d38b97
[localhost] local: heat stack-show port_7abe783f-4837-417d-b76f-771ec4d38b97
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                 |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                    |
| creation_time         | 2017-05-11T04:25:58Z                                                                                                                                  |
| description           | Virtual Machine Interface Template                                                                                                                    |
| disable_rollback      | True                                                                                                                                                  |
| id                    | a992265b-5295-4df3-9ec0-3a205a76765f                                                                                                                  |
| links                 | http://heat-api:8004/v1/0b576f6f4cbf414f829cd12f008bf08f/stacks/port_7abe783f-4837-417d-b76f-771ec4d38b97/a992265b-5295-4df3-9ec0-3a205a76765f (self) |
| notification_topics   | []                                                                                                                                                    |
| parameters            | {                                                                                                                                                     |
|                       |   "virtual_machine": "b9618566-14ea-4505-8eae-8fdb4b6a0ec1",                                                                                          |
|                       |   "name": "7abe783f-4837-417d-b76f-771ec4d38b97",                                                                                                     |
|                       |   "OS::stack_name": "port_7abe783f-4837-417d-b76f-771ec4d38b97",                                                                                      |
|                       |   "admin_state_up": "True",                                                                                                                           |
|                       |   "virtual_machine_interface_allowed_address_pairs": "null",                                                                                          |
|                       |   "virtual_machine_interface_mac_address": "fa:16:3e:f8:45:26",                                                                                       |
|                       |   "OS::stack_id": "a992265b-5295-4df3-9ec0-3a205a76765f",                                                                                             |
|                       |   "device_owner": "network:gw_interface",                                                                                                             |
|                       |   "virtual_network": "52d7bef8-aa17-45c3-b63e-6a0e504603f0",                                                                                          |
|                       |   "uuid": "7abe783f-4837-417d-b76f-771ec4d38b97"                                                                                                      |
|                       | }                                                                                                                                                     |
| parent                | None                                                                                                                                                  |
| stack_name            | port_7abe783f-4837-417d-b76f-771ec4d38b97                                                                                                             |
| stack_owner           | admin                                                                                                                                                 |
| stack_status          | UPDATE_IN_PROGRESS                                                                                                                                    |
| stack_status_reason   | Stack UPDATE started                                                                                                                                  |
| stack_user_project_id | 0b576f6f4cbf414f829cd12f008bf08f                                                                                                                      |
| template_description  | Virtual Machine Interface Template                                                                                                                    |
| timeout_mins          | 10                                                                                                                                                    |
| updated_time          | None                                                                                                                                                  |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show port_7abe783f-4837-417d-b76f-771ec4d38b97
description: 'Virtual Machine Interface Template

  '
heat_template_version: '2013-05-23'
outputs:
  allowed_address_pairs:
    description: Virtual machine allowed address pairs.
    value:
      get_attr: [virtual_machine_interface, virtual_machine_interface_allowed_address_pairs]
  fq_name:
    description: Fully Qualified Name of the VMI
    value:
      get_attr: [virtual_machine_interface, fq_name]
  id:
    description: A unique id for the virtual machine interface.
    value: {get_resource: virtual_machine_interface}
  mac_address:
    description: Virtual machine interface mac address.
    value:
      get_attr: [virtual_machine_interface, virtual_machine_interface_mac_addresses]
  virtual_network:
    description: Virtual network.
    value:
      get_attr: [virtual_machine_interface, virtual_networks]
parameters:
  admin_state_up: {default: true, label: Admin state up, type: boolean}
  device_owner: {default: '', label: Device Owner, type: string}
  name: {description: A unique id for the Physical Interface., label: Physical Interface
      ID, type: string}
  uuid: {description: A unique id for the Virtual Machine Interface., label: Backend
      Virtual Machine Interface UUID, type: string}
  virtual_machine: {default: '', label: Virtual Machine., type: string}
  virtual_machine_interface_allowed_address_pairs: {label: Virtual machine interface
      allowed address pairs., type: json}
  virtual_machine_interface_mac_address: {default: 'fe:ff:ff:ff:ff:ff', label: Virtual
      machine interface mac address., type: string}
  virtual_network: {label: Virtual Network., type: string}
resources:
  instance_ip_0:
    properties:
      ip_address: 172.16.101.153
      name:
        str_replace:
          params:
            '%ip%': 172.16.101.153
            '%name%': {get_param: name}
            '%zone%': a510f785-7758-4ce5-8fd4-c107d11b8e40
          template: '%name%_%zone%_%ip%'
      network_id: {get_param: virtual_network}
      subnet_id: 435a94ee-ab64-4787-acbb-d2d7c95867e9
      virtual_machine_interfaces:
      - {get_resource: virtual_machine_interface}
    type: OS::Contrail::InstanceIp
  virtual_machine_interface:
    properties:
      admin_state_up: {get_param: admin_state_up}
      device_owner: {get_param: device_owner}
      name: {get_param: name}
      uuid: {get_param: uuid}
      virtual_machine: {get_param: virtual_machine}
      virtual_machine_interface_allowed_address_pairs: {get_param: virtual_machine_interface_allowed_address_pairs}
      virtual_machine_interface_mac_addresses:
      - {get_param: virtual_machine_interface_mac_address}
      virtual_networks:
      - {get_param: virtual_network}
    type: OS::Contrail::VirtualMachineInterface

########################################################
### checking heat-stack (ports) for CREATE_COMPLETE ####
########################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/ports/b411d930-df4c-4766-ae66-d0aed9d27c76
[localhost] local: heat stack-show port_b411d930-df4c-4766-ae66-d0aed9d27c76
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                 |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                    |
| creation_time         | 2017-05-11T04:25:57Z                                                                                                                                  |
| description           | Virtual Machine Interface Template                                                                                                                    |
| disable_rollback      | True                                                                                                                                                  |
| id                    | f899c74e-dec4-4c73-a7df-63baf354c811                                                                                                                  |
| links                 | http://heat-api:8004/v1/0b576f6f4cbf414f829cd12f008bf08f/stacks/port_b411d930-df4c-4766-ae66-d0aed9d27c76/f899c74e-dec4-4c73-a7df-63baf354c811 (self) |
| notification_topics   | []                                                                                                                                                    |
| parameters            | {                                                                                                                                                     |
|                       |   "virtual_machine": "b9618566-14ea-4505-8eae-8fdb4b6a0ec1",                                                                                          |
|                       |   "name": "b411d930-df4c-4766-ae66-d0aed9d27c76",                                                                                                     |
|                       |   "OS::stack_name": "port_b411d930-df4c-4766-ae66-d0aed9d27c76",                                                                                      |
|                       |   "admin_state_up": "True",                                                                                                                           |
|                       |   "virtual_machine_interface_allowed_address_pairs": "null",                                                                                          |
|                       |   "virtual_machine_interface_mac_address": "fa:16:3e:49:3c:12",                                                                                       |
|                       |   "OS::stack_id": "f899c74e-dec4-4c73-a7df-63baf354c811",                                                                                             |
|                       |   "device_owner": "network:gw_interface",                                                                                                             |
|                       |   "virtual_network": "52d7bef8-aa17-45c3-b63e-6a0e504603f0",                                                                                          |
|                       |   "uuid": "b411d930-df4c-4766-ae66-d0aed9d27c76"                                                                                                      |
|                       | }                                                                                                                                                     |
| parent                | None                                                                                                                                                  |
| stack_name            | port_b411d930-df4c-4766-ae66-d0aed9d27c76                                                                                                             |
| stack_owner           | admin                                                                                                                                                 |
| stack_status          | UPDATE_IN_PROGRESS                                                                                                                                    |
| stack_status_reason   | Stack UPDATE started                                                                                                                                  |
| stack_user_project_id | 0b576f6f4cbf414f829cd12f008bf08f                                                                                                                      |
| template_description  | Virtual Machine Interface Template                                                                                                                    |
| timeout_mins          | 10                                                                                                                                                    |
| updated_time          | None                                                                                                                                                  |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show port_b411d930-df4c-4766-ae66-d0aed9d27c76
description: 'Virtual Machine Interface Template

  '
heat_template_version: '2013-05-23'
outputs:
  allowed_address_pairs:
    description: Virtual machine allowed address pairs.
    value:
      get_attr: [virtual_machine_interface, virtual_machine_interface_allowed_address_pairs]
  fq_name:
    description: Fully Qualified Name of the VMI
    value:
      get_attr: [virtual_machine_interface, fq_name]
  id:
    description: A unique id for the virtual machine interface.
    value: {get_resource: virtual_machine_interface}
  mac_address:
    description: Virtual machine interface mac address.
    value:
      get_attr: [virtual_machine_interface, virtual_machine_interface_mac_addresses]
  virtual_network:
    description: Virtual network.
    value:
      get_attr: [virtual_machine_interface, virtual_networks]
parameters:
  admin_state_up: {default: true, label: Admin state up, type: boolean}
  device_owner: {default: '', label: Device Owner, type: string}
  name: {description: A unique id for the Physical Interface., label: Physical Interface
      ID, type: string}
  uuid: {description: A unique id for the Virtual Machine Interface., label: Backend
      Virtual Machine Interface UUID, type: string}
  virtual_machine: {default: '', label: Virtual Machine., type: string}
  virtual_machine_interface_allowed_address_pairs: {label: Virtual machine interface
      allowed address pairs., type: json}
  virtual_machine_interface_mac_address: {default: 'fe:ff:ff:ff:ff:ff', label: Virtual
      machine interface mac address., type: string}
  virtual_network: {label: Virtual Network., type: string}
resources:
  instance_ip_0:
    properties:
      ip_address: 172.16.101.151
      name:
        str_replace:
          params:
            '%ip%': 172.16.101.151
            '%name%': {get_param: name}
            '%zone%': a510f785-7758-4ce5-8fd4-c107d11b8e40
          template: '%name%_%zone%_%ip%'
      network_id: {get_param: virtual_network}
      subnet_id: 435a94ee-ab64-4787-acbb-d2d7c95867e9
      virtual_machine_interfaces:
      - {get_resource: virtual_machine_interface}
    type: OS::Contrail::InstanceIp
  instance_ip_1:
    properties:
      ip_address: 172.16.101.152
      name:
        str_replace:
          params:
            '%ip%': 172.16.101.152
            '%name%': {get_param: name}
            '%zone%': a510f785-7758-4ce5-8fd4-c107d11b8e40
          template: '%name%_%zone%_%ip%'
      network_id: {get_param: virtual_network}
      subnet_id: 435a94ee-ab64-4787-acbb-d2d7c95867e9
      virtual_machine_interfaces:
      - {get_resource: virtual_machine_interface}
    type: OS::Contrail::InstanceIp
  virtual_machine_interface:
    properties:
      admin_state_up: {get_param: admin_state_up}
      device_owner: {get_param: device_owner}
      name: {get_param: name}
      uuid: {get_param: uuid}
      virtual_machine: {get_param: virtual_machine}
      virtual_machine_interface_allowed_address_pairs: {get_param: virtual_machine_interface_allowed_address_pairs}
      virtual_machine_interface_mac_addresses:
      - {get_param: virtual_machine_interface_mac_address}
      virtual_networks:
      - {get_param: virtual_network}
    type: OS::Contrail::VirtualMachineInterface

04:26:09.456240  04:26:09.540606  0.084366         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 31.993598

[localhost] local: gohan client gw_interface show --output-format json b9618566-14ea-4505-8eae-8fdb4b6a0ec1
{
    "gw_interface": {
        "aws_gw_id": null,
        "description": "Sample Gw-interface",
        "gw_vipv4": "172.16.101.151",
        "gw_vipv6": null,
        "id": "b9618566-14ea-4505-8eae-8fdb4b6a0ec1",
        "interdc_gw_id": null,
        "internet_gw_id": "429e24b5-a2f0-4fb8-b467-e335857e9476",
        "name": "sample-gw-interface",
        "netmask": 24,
        "network_id": "52d7bef8-aa17-45c3-b63e-6a0e504603f0",
        "primary_ipv4": "172.16.101.152",
        "primary_ipv6": null,
        "public_ip_id": null,
        "secondary_ipv4": "172.16.101.153",
        "secondary_ipv6": null,
        "service_type": "internet",
        "status": "ACTIVE",
        "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
        "vpn_gw_id": null,
        "vrid": 20
    }
}

############################################
### checking heat-stack (gw_interfaces) ####
############################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/gw_interfaces/b9618566-14ea-4505-8eae-8fdb4b6a0ec1
[localhost] local: heat stack-show gw_interface_b9618566-14ea-4505-8eae-8fdb4b6a0ec1
+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                         |
+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                            |
| creation_time         | 2017-05-11T04:25:40Z                                                                                                                                          |
| description           | Inet Address                                                                                                                                                  |
| disable_rollback      | True                                                                                                                                                          |
| id                    | c9ec27ab-17d1-45ab-b494-e58217c9e3b9                                                                                                                          |
| links                 | http://heat-api:8004/v1/0b576f6f4cbf414f829cd12f008bf08f/stacks/gw_interface_b9618566-14ea-4505-8eae-8fdb4b6a0ec1/c9ec27ab-17d1-45ab-b494-e58217c9e3b9 (self) |
| notification_topics   | []                                                                                                                                                            |
| outputs               | []                                                                                                                                                            |
| parameters            | {                                                                                                                                                             |
|                       |   "secondary_device_physical_interface": "ae0",                                                                                                               |
|                       |   "secondary_ibgp_config_group": "InetGW1-RI-IBGP",                                                                                                           |
|                       |   "primary_device_password": "esiesi0000",                                                                                                                    |
|                       |   "secondary_device_gw_ip": "172.16.101.153",                                                                                                                 |
|                       |   "bgp_group_name": "inet-gw-group",                                                                                                                          |
|                       |   "gw_vip": "172.16.101.151",                                                                                                                                 |
|                       |   "primary_device_ip": "10.79.5.185",                                                                                                                         |
|                       |   "secondary_device_username": "esi",                                                                                                                         |
|                       |   "OS::stack_name": "gw_interface_b9618566-14ea-4505-8eae-8fdb4b6a0ec1",                                                                                      |
|                       |   "vlan": "1025",                                                                                                                                             |
|                       |   "vrrp_group": "20",                                                                                                                                         |
|                       |   "netmask": "24",                                                                                                                                            |
|                       |   "primary_device_physical_interface": "ae0",                                                                                                                 |
|                       |   "primary_device_priority": "105",                                                                                                                           |
|                       |   "OS::stack_id": "c9ec27ab-17d1-45ab-b494-e58217c9e3b9",                                                                                                     |
|                       |   "primary_device_gw_ip": "172.16.101.152",                                                                                                                   |
|                       |   "secondary_device_port": "830",                                                                                                                             |
|                       |   "secondary_device_password": "esiesi0000",                                                                                                                  |
|                       |   "vrf_name": "vrf_gw_sample-ha-router-downlink_1025",                                                                                                        |
|                       |   "primary_device_username": "esi",                                                                                                                           |
|                       |   "secondary_device_priority": "100",                                                                                                                         |
|                       |   "primary_ibgp_config_group": "InetGW2-RI-IBGP",                                                                                                             |
|                       |   "primary_device_port": "830",                                                                                                                               |
|                       |   "secondary_device_ip": "10.79.5.184"                                                                                                                        |
|                       | }                                                                                                                                                             |
| parent                | None                                                                                                                                                          |
| stack_name            | gw_interface_b9618566-14ea-4505-8eae-8fdb4b6a0ec1                                                                                                             |
| stack_owner           | admin                                                                                                                                                         |
| stack_status          | CREATE_COMPLETE                                                                                                                                               |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                           |
| stack_user_project_id | 0b576f6f4cbf414f829cd12f008bf08f                                                                                                                              |
| template_description  | Inet Address                                                                                                                                                  |
| timeout_mins          | 60                                                                                                                                                            |
| updated_time          | None                                                                                                                                                          |
+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show gw_interface_b9618566-14ea-4505-8eae-8fdb4b6a0ec1
description: 'Inet Address

  '
heat_template_version: '2013-05-23'
parameters:
  bgp_group_name: {label: Name of BGP Group on VRF, type: string}
  gw_vip: {description: Virtual IP configured on VRRP, label: Inet Address CIDR, type: string}
  netmask: {description: Netmask for gw_ip, label: Netmask, type: number}
  primary_device_gw_ip: {description: IP on primary device, label: Inet Address CIDR,
    type: string}
  primary_device_ip: {description: Ip address that will be used to establish ssh connection
      to the Primary Device., label: Ip address of the device., type: string}
  primary_device_password: {description: Password of the user which will be used to
      log onto the Primary Device., label: Users password., type: string}
  primary_device_physical_interface: {description: MX physical port on which logical
      interface will be created, label: Underlying physical interface, type: string}
  primary_device_port: {description: Port that will be used to establish ssh connection
      to the Primary Device., label: Port of the ssh connection., type: number}
  primary_device_priority: {label: Primary device priority, type: string}
  primary_device_username: {description: Name of the user which will be used to log
      onto the Primary Device., label: User name to log on to device., type: string}
  primary_ibgp_config_group: {description: Name for apply group to use for downlink
      interface, label: Apply group name, type: string}
  secondary_device_gw_ip: {description: IP on secondary device, label: Inet Address
      CIDR, type: string}
  secondary_device_ip: {description: Ip address that will be used to establish ssh
      connection to the Secondary Device., label: Ip address of the device., type: string}
  secondary_device_password: {description: Password of the user which will be used
      to log onto the Secondary Device., label: Users password., type: string}
  secondary_device_physical_interface: {description: MX physical port on which logical
      interface will be created, label: Underlying physical interface, type: string}
  secondary_device_port: {description: Port that will be used to establish ssh connection
      to the Secondary Device., label: Port of the ssh connection., type: number}
  secondary_device_priority: {label: Secondary device priority, type: string}
  secondary_device_username: {description: Name of the user which will be used to
      log onto the Secondary Device., label: User name to log on to device., type: string}
  secondary_ibgp_config_group: {description: Name for apply group to use for downlink
      interface, label: Apply group name, type: string}
  vlan: {description: Vlan tag for mx logical interface, label: Vlan Tag, type: string}
  vrf_name: {label: VRF, type: string}
  vrrp_group: {label: VRRP Group, type: string}
resources:
  netconf_configure_primary:
    properties:
      configs:
      - config:
          str_replace:
            params:
              $PRIORITY: {get_param: primary_device_priority}
              $VIP: {get_param: gw_vip}
              $VRRP_GROUP: {get_param: vrrp_group}
            template: "vrrp-group $VRRP_GROUP {\n    virtual-address $VIP;\n    priority\
              \ $PRIORITY;\n}\n"
        path:
        - {config_type: tag, tag: interfaces, xml_type: tag}
        - config_type: name
          name: {get_param: primary_device_physical_interface}
          tag: interface
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: vlan}
          tag: unit
          xml_type: named_tag
        - {config_type: tag, tag: family, xml_type: tag}
        - {config_type: tag, tag: inet, xml_type: tag}
        - config_type: named_tag
          name:
            str_replace:
              params:
                $DEVICE_IP: {get_param: primary_device_gw_ip}
                $NETMASK: {get_param: netmask}
              template: '$DEVICE_IP/$NETMASK

                '
          tag: address
          xml_type: named_tag
      - config:
          str_replace:
            params:
              $APPLY_GROUP: {get_param: primary_ibgp_config_group}
              $DEVICE_GW_IP: {get_param: primary_device_gw_ip}
              $NEIGHBOR_GW_IP: {get_param: secondary_device_gw_ip}
            template: 'apply-groups $APPLY_GROUP

              local-address $DEVICE_GW_IP;

              neighbor $NEIGHBOR_GW_IP;

              '
        path:
        - {config_type: tag, tag: routing-instances, xml_type: tag}
        - config_type: name
          name: {get_param: vrf_name}
          tag: instance
          xml_type: named_tag
        - {config_type: tag, tag: protocols, xml_type: tag}
        - {config_type: tag, tag: bgp, xml_type: tag}
        - config_type: named_tag
          name: {get_param: bgp_group_name}
          tag: group
          xml_type: named_tag
      device_ip: {get_param: primary_device_ip}
      lock_timeout: 3000
      password: {get_param: primary_device_password}
      port: {get_param: primary_device_port}
      username: {get_param: primary_device_username}
    type: OS::Contrail::NetconfNamedConfigs
  netconf_configure_secondary:
    properties:
      configs:
      - config:
          str_replace:
            params:
              $PRIORITY: {get_param: secondary_device_priority}
              $VIP: {get_param: gw_vip}
              $VRRP_GROUP: {get_param: vrrp_group}
            template: "vrrp-group $VRRP_GROUP {\n    virtual-address $VIP;\n    priority\
              \ $PRIORITY;\n}\n"
        path:
        - {config_type: tag, tag: interfaces, xml_type: tag}
        - config_type: name
          name: {get_param: secondary_device_physical_interface}
          tag: interface
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: vlan}
          tag: unit
          xml_type: named_tag
        - {config_type: tag, tag: family, xml_type: tag}
        - {config_type: tag, tag: inet, xml_type: tag}
        - config_type: named_tag
          name:
            str_replace:
              params:
                $DEVICE_IP: {get_param: secondary_device_gw_ip}
                $NETMASK: {get_param: netmask}
              template: '$DEVICE_IP/$NETMASK

                '
          tag: address
          xml_type: named_tag
      - config:
          str_replace:
            params:
              $APPLY_GROUP: {get_param: secondary_ibgp_config_group}
              $DEVICE_GW_IP: {get_param: secondary_device_gw_ip}
              $NEIGHBOR_GW_IP: {get_param: primary_device_gw_ip}
            template: 'apply-groups $APPLY_GROUP

              local-address $DEVICE_GW_IP;

              neighbor $NEIGHBOR_GW_IP;

              '
        path:
        - {config_type: tag, tag: routing-instances, xml_type: tag}
        - config_type: name
          name: {get_param: vrf_name}
          tag: instance
          xml_type: named_tag
        - {config_type: tag, tag: protocols, xml_type: tag}
        - {config_type: tag, tag: bgp, xml_type: tag}
        - config_type: named_tag
          name: {get_param: bgp_group_name}
          tag: group
          xml_type: named_tag
      device_ip: {get_param: secondary_device_ip}
      lock_timeout: 3000
      password: {get_param: secondary_device_password}
      port: {get_param: secondary_device_port}
      username: {get_param: secondary_device_username}
    type: OS::Contrail::NetconfNamedConfigs

[localhost] local: gohan client ese_logical_port list --output-format json
[localhost] local: gohan client ese_logical_port show --output-format json 3ce86e39-7a81-46f8-b0c4-62a4776746f1
{
    "ese_logical_port": {
        "common_function_gateway_id": null,
        "connected_resource": "gw_interface",
        "description": "ESE Logical port for Port 7abe783f-4837-417d-b76f-771ec4d38b97",
        "ese_physical_port_id": "8a4bbfe0-5aae-42f5-8b94-c4c14b9e7306",
        "gw_interface_id": "b9618566-14ea-4505-8eae-8fdb4b6a0ec1",
        "id": "3ce86e39-7a81-46f8-b0c4-62a4776746f1",
        "name": "xe-0/0/4.1025",
        "network_id": "52d7bef8-aa17-45c3-b63e-6a0e504603f0",
        "port_ids": [
            "7abe783f-4837-417d-b76f-771ec4d38b97"
        ],
        "status": "ACTIVE",
        "tags": {},
        "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
        "type": "L2",
        "vlan_id": 1025
    }
}

################################################
### checking heat-stack (ese_logical_ports) ####
################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/ese_logical_ports/3ce86e39-7a81-46f8-b0c4-62a4776746f1
[localhost] local: heat stack-show ese_logical_port_3ce86e39-7a81-46f8-b0c4-62a4776746f1
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                             |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                |
| creation_time         | 2017-05-11T04:26:01Z                                                                                                                                              |
| description           | Logical port template                                                                                                                                             |
| disable_rollback      | True                                                                                                                                                              |
| id                    | a06c3583-6d03-47be-8d33-bfd30403ad88                                                                                                                              |
| links                 | http://heat-api:8004/v1/0b576f6f4cbf414f829cd12f008bf08f/stacks/ese_logical_port_3ce86e39-7a81-46f8-b0c4-62a4776746f1/a06c3583-6d03-47be-8d33-bfd30403ad88 (self) |
| notification_topics   | []                                                                                                                                                                |
| outputs               | [                                                                                                                                                                 |
|                       |   {                                                                                                                                                               |
|                       |     "output_value": "cccccccc-cccc-cccc-cccc-cccccccccccc",                                                                                                       |
|                       |     "description": "A unique id for the logical interface",                                                                                                       |
|                       |     "output_key": "id"                                                                                                                                            |
|                       |   },                                                                                                                                                              |
|                       |   {                                                                                                                                                               |
|                       |     "output_value": null,                                                                                                                                         |
|                       |     "output_error": "'ContrailLogicalInterface' object has no attribute 'li_uuid'",                                                                               |
|                       |     "description": "The name of the logical interface.",                                                                                                          |
|                       |     "output_key": "name"                                                                                                                                          |
|                       |   }                                                                                                                                                               |
|                       | ]                                                                                                                                                                 |
| parameters            | {                                                                                                                                                                 |
|                       |   "logical_port_type": "L2",                                                                                                                                      |
|                       |   "physical_port_id": "dddddddd-dddd-dddd-dddd-dddddddddddd",                                                                                                     |
|                       |   "OS::stack_id": "a06c3583-6d03-47be-8d33-bfd30403ad88",                                                                                                         |
|                       |   "OS::stack_name": "ese_logical_port_3ce86e39-7a81-46f8-b0c4-62a4776746f1",                                                                                      |
|                       |   "virtual_machine_interface_ids": "7abe783f-4837-417d-b76f-771ec4d38b97",                                                                                        |
|                       |   "logical_port_name": "xe-0/0/4.1025",                                                                                                                           |
|                       |   "logical_port_vlan_id": "1025"                                                                                                                                  |
|                       | }                                                                                                                                                                 |
| parent                | None                                                                                                                                                              |
| stack_name            | ese_logical_port_3ce86e39-7a81-46f8-b0c4-62a4776746f1                                                                                                             |
| stack_owner           | admin                                                                                                                                                             |
| stack_status          | CREATE_COMPLETE                                                                                                                                                   |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                               |
| stack_user_project_id | 0b576f6f4cbf414f829cd12f008bf08f                                                                                                                                  |
| template_description  | Logical port template                                                                                                                                             |
| timeout_mins          | 10                                                                                                                                                                |
| updated_time          | None                                                                                                                                                              |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show ese_logical_port_3ce86e39-7a81-46f8-b0c4-62a4776746f1
description: 'Logical port template

  '
heat_template_version: '2013-05-23'
outputs:
  id:
    description: A unique id for the logical interface
    value: {get_resource: logical_interface}
  name:
    description: The name of the logical interface.
    value:
      get_attr: [logical_interface, name]
parameters:
  logical_port_name: {description: Name of the logical port., label: Logical Port
      Name, type: string}
  logical_port_type: {description: Type of the logical port., label: Logical Port
      Type, type: string}
  logical_port_vlan_id: {default: 0, description: VLAN id to use for logical port
      creation., label: VLAN id for Logical Port, type: number}
  physical_port_id: {description: A unique id for the Physical Interface., label: Physical
      Interface ID, type: string}
  virtual_machine_interface_ids: {description: Virtual Machine Interface ID., label: Virtual
      Machine Interface ID, type: comma_delimited_list}
resources:
  logical_interface:
    properties:
      name: {get_param: logical_port_name}
      physical_interface: {get_param: physical_port_id}
      type: {get_param: logical_port_type}
      virtual_machine_interfaces: {get_param: virtual_machine_interface_ids}
      vlan: {get_param: logical_port_vlan_id}
    type: OS::Contrail::LogicalInterface

[localhost] local: gohan client port show --output-format json 7abe783f-4837-417d-b76f-771ec4d38b97
{
    "port": {
        "admin_state_up": true,
        "allowed_address_pairs": [],
        "attached": true,
        "binding:vif_type": "vrouter",
        "description": "",
        "device_id": "b9618566-14ea-4505-8eae-8fdb4b6a0ec1",
        "device_owner": "network:gw_interface",
        "ese_logical_port_id": "3ce86e39-7a81-46f8-b0c4-62a4776746f1",
        "fake_delete": false,
        "fixed_ips": [
            {
                "ip_address": "172.16.101.153",
                "subnet_id": "a510f785-7758-4ce5-8fd4-c107d11b8e40"
            }
        ],
        "id": "7abe783f-4837-417d-b76f-771ec4d38b97",
        "mac_address": "fa:16:3e:f8:45:26",
        "managed_by_service": true,
        "name": "Port for : 8a4bbfe0-5aae-42f5-8b94-c4c14b9e7306",
        "network_id": "52d7bef8-aa17-45c3-b63e-6a0e504603f0",
        "segmentation_id": 1025,
        "segmentation_type": "vlan",
        "status": "ACTIVE",
        "tags": {},
        "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
    }
}

########################################################
### checking heat-stack (ports) for UPDATE_COMPLETE ####
########################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/ports/7abe783f-4837-417d-b76f-771ec4d38b97
[localhost] local: heat stack-show port_7abe783f-4837-417d-b76f-771ec4d38b97
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                 |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                    |
| creation_time         | 2017-05-11T04:25:58Z                                                                                                                                  |
| description           | Virtual Machine Interface Template                                                                                                                    |
| disable_rollback      | True                                                                                                                                                  |
| id                    | a992265b-5295-4df3-9ec0-3a205a76765f                                                                                                                  |
| links                 | http://heat-api:8004/v1/0b576f6f4cbf414f829cd12f008bf08f/stacks/port_7abe783f-4837-417d-b76f-771ec4d38b97/a992265b-5295-4df3-9ec0-3a205a76765f (self) |
| notification_topics   | []                                                                                                                                                    |
| outputs               | [                                                                                                                                                     |
|                       |   {                                                                                                                                                   |
|                       |     "output_value": "bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb",                                                                                           |
|                       |     "description": "Virtual network.",                                                                                                                |
|                       |     "output_key": "virtual_network"                                                                                                                   |
|                       |   },                                                                                                                                                  |
|                       |   {                                                                                                                                                   |
|                       |     "output_value": "default-domain:admin:7abe783f-4837-417d-b76f-771ec4d38b97",                                                                      |
|                       |     "description": "Fully Qualified Name of the VMI",                                                                                                 |
|                       |     "output_key": "fq_name"                                                                                                                           |
|                       |   },                                                                                                                                                  |
|                       |   {                                                                                                                                                   |
|                       |     "output_value": "7abe783f-4837-417d-b76f-771ec4d38b97",                                                                                           |
|                       |     "description": "A unique id for the virtual machine interface.",                                                                                  |
|                       |     "output_key": "id"                                                                                                                                |
|                       |   },                                                                                                                                                  |
|                       |   {                                                                                                                                                   |
|                       |     "output_value": "null",                                                                                                                           |
|                       |     "description": "Virtual machine allowed address pairs.",                                                                                          |
|                       |     "output_key": "allowed_address_pairs"                                                                                                             |
|                       |   },                                                                                                                                                  |
|                       |   {                                                                                                                                                   |
|                       |     "output_value": "xx:xx:xx:xx:xx:xx",                                                                                                              |
|                       |     "description": "Virtual machine interface mac address.",                                                                                          |
|                       |     "output_key": "mac_address"                                                                                                                       |
|                       |   }                                                                                                                                                   |
|                       | ]                                                                                                                                                     |
| parameters            | {                                                                                                                                                     |
|                       |   "virtual_machine": "b9618566-14ea-4505-8eae-8fdb4b6a0ec1",                                                                                          |
|                       |   "name": "7abe783f-4837-417d-b76f-771ec4d38b97",                                                                                                     |
|                       |   "OS::stack_name": "port_7abe783f-4837-417d-b76f-771ec4d38b97",                                                                                      |
|                       |   "admin_state_up": "True",                                                                                                                           |
|                       |   "virtual_machine_interface_allowed_address_pairs": "null",                                                                                          |
|                       |   "virtual_machine_interface_mac_address": "fa:16:3e:f8:45:26",                                                                                       |
|                       |   "OS::stack_id": "a992265b-5295-4df3-9ec0-3a205a76765f",                                                                                             |
|                       |   "device_owner": "network:gw_interface",                                                                                                             |
|                       |   "virtual_network": "52d7bef8-aa17-45c3-b63e-6a0e504603f0",                                                                                          |
|                       |   "uuid": "7abe783f-4837-417d-b76f-771ec4d38b97"                                                                                                      |
|                       | }                                                                                                                                                     |
| parent                | None                                                                                                                                                  |
| stack_name            | port_7abe783f-4837-417d-b76f-771ec4d38b97                                                                                                             |
| stack_owner           | admin                                                                                                                                                 |
| stack_status          | UPDATE_COMPLETE                                                                                                                                       |
| stack_status_reason   | Stack successfully updated                                                                                                                            |
| stack_user_project_id | 0b576f6f4cbf414f829cd12f008bf08f                                                                                                                      |
| template_description  | Virtual Machine Interface Template                                                                                                                    |
| timeout_mins          | 10                                                                                                                                                    |
| updated_time          | 2017-05-11T04:26:04Z                                                                                                                                  |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show port_7abe783f-4837-417d-b76f-771ec4d38b97
description: 'Virtual Machine Interface Template

  '
heat_template_version: '2013-05-23'
outputs:
  allowed_address_pairs:
    description: Virtual machine allowed address pairs.
    value:
      get_attr: [virtual_machine_interface, virtual_machine_interface_allowed_address_pairs]
  fq_name:
    description: Fully Qualified Name of the VMI
    value:
      get_attr: [virtual_machine_interface, fq_name]
  id:
    description: A unique id for the virtual machine interface.
    value: {get_resource: virtual_machine_interface}
  mac_address:
    description: Virtual machine interface mac address.
    value:
      get_attr: [virtual_machine_interface, virtual_machine_interface_mac_addresses]
  virtual_network:
    description: Virtual network.
    value:
      get_attr: [virtual_machine_interface, virtual_networks]
parameters:
  admin_state_up: {default: true, label: Admin state up, type: boolean}
  device_owner: {default: '', label: Device Owner, type: string}
  name: {description: A unique id for the Physical Interface., label: Physical Interface
      ID, type: string}
  uuid: {description: A unique id for the Virtual Machine Interface., label: Backend
      Virtual Machine Interface UUID, type: string}
  virtual_machine: {default: '', label: Virtual Machine., type: string}
  virtual_machine_interface_allowed_address_pairs: {label: Virtual machine interface
      allowed address pairs., type: json}
  virtual_machine_interface_mac_address: {default: 'fe:ff:ff:ff:ff:ff', label: Virtual
      machine interface mac address., type: string}
  virtual_network: {label: Virtual Network., type: string}
resources:
  instance_ip_0:
    properties:
      ip_address: 172.16.101.153
      name:
        str_replace:
          params:
            '%ip%': 172.16.101.153
            '%name%': {get_param: name}
            '%zone%': a510f785-7758-4ce5-8fd4-c107d11b8e40
          template: '%name%_%zone%_%ip%'
      network_id: {get_param: virtual_network}
      subnet_id: 435a94ee-ab64-4787-acbb-d2d7c95867e9
      virtual_machine_interfaces:
      - {get_resource: virtual_machine_interface}
    type: OS::Contrail::InstanceIp
  virtual_machine_interface:
    properties:
      admin_state_up: {get_param: admin_state_up}
      device_owner: {get_param: device_owner}
      name: {get_param: name}
      uuid: {get_param: uuid}
      virtual_machine: {get_param: virtual_machine}
      virtual_machine_interface_allowed_address_pairs: {get_param: virtual_machine_interface_allowed_address_pairs}
      virtual_machine_interface_mac_addresses:
      - {get_param: virtual_machine_interface_mac_address}
      virtual_networks:
      - {get_param: virtual_network}
    type: OS::Contrail::VirtualMachineInterface

[localhost] local: gohan client ese_logical_port show --output-format json b1cf2461-ecb9-4923-966e-e61211f8b03c
{
    "ese_logical_port": {
        "common_function_gateway_id": null,
        "connected_resource": "gw_interface",
        "description": "ESE Logical port for Port b411d930-df4c-4766-ae66-d0aed9d27c76",
        "ese_physical_port_id": "97fcdf3a-81a4-41a5-8ae6-52c431fc5a5c",
        "gw_interface_id": "b9618566-14ea-4505-8eae-8fdb4b6a0ec1",
        "id": "b1cf2461-ecb9-4923-966e-e61211f8b03c",
        "name": "xe-0/0/3.1025",
        "network_id": "52d7bef8-aa17-45c3-b63e-6a0e504603f0",
        "port_ids": [
            "b411d930-df4c-4766-ae66-d0aed9d27c76"
        ],
        "status": "ACTIVE",
        "tags": {},
        "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
        "type": "L2",
        "vlan_id": 1025
    }
}

################################################
### checking heat-stack (ese_logical_ports) ####
################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/ese_logical_ports/b1cf2461-ecb9-4923-966e-e61211f8b03c
[localhost] local: heat stack-show ese_logical_port_b1cf2461-ecb9-4923-966e-e61211f8b03c
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                             |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                |
| creation_time         | 2017-05-11T04:26:01Z                                                                                                                                              |
| description           | Logical port template                                                                                                                                             |
| disable_rollback      | True                                                                                                                                                              |
| id                    | 445cdcbc-0924-47a2-b811-dc87b1506129                                                                                                                              |
| links                 | http://heat-api:8004/v1/0b576f6f4cbf414f829cd12f008bf08f/stacks/ese_logical_port_b1cf2461-ecb9-4923-966e-e61211f8b03c/445cdcbc-0924-47a2-b811-dc87b1506129 (self) |
| notification_topics   | []                                                                                                                                                                |
| outputs               | [                                                                                                                                                                 |
|                       |   {                                                                                                                                                               |
|                       |     "output_value": "cccccccc-cccc-cccc-cccc-cccccccccccc",                                                                                                       |
|                       |     "description": "A unique id for the logical interface",                                                                                                       |
|                       |     "output_key": "id"                                                                                                                                            |
|                       |   },                                                                                                                                                              |
|                       |   {                                                                                                                                                               |
|                       |     "output_value": null,                                                                                                                                         |
|                       |     "output_error": "'ContrailLogicalInterface' object has no attribute 'li_uuid'",                                                                               |
|                       |     "description": "The name of the logical interface.",                                                                                                          |
|                       |     "output_key": "name"                                                                                                                                          |
|                       |   }                                                                                                                                                               |
|                       | ]                                                                                                                                                                 |
| parameters            | {                                                                                                                                                                 |
|                       |   "logical_port_type": "L2",                                                                                                                                      |
|                       |   "physical_port_id": "dddddddd-dddd-dddd-dddd-dddddddddddd",                                                                                                     |
|                       |   "OS::stack_id": "445cdcbc-0924-47a2-b811-dc87b1506129",                                                                                                         |
|                       |   "OS::stack_name": "ese_logical_port_b1cf2461-ecb9-4923-966e-e61211f8b03c",                                                                                      |
|                       |   "virtual_machine_interface_ids": "b411d930-df4c-4766-ae66-d0aed9d27c76",                                                                                        |
|                       |   "logical_port_name": "xe-0/0/3.1025",                                                                                                                           |
|                       |   "logical_port_vlan_id": "1025"                                                                                                                                  |
|                       | }                                                                                                                                                                 |
| parent                | None                                                                                                                                                              |
| stack_name            | ese_logical_port_b1cf2461-ecb9-4923-966e-e61211f8b03c                                                                                                             |
| stack_owner           | admin                                                                                                                                                             |
| stack_status          | CREATE_COMPLETE                                                                                                                                                   |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                               |
| stack_user_project_id | 0b576f6f4cbf414f829cd12f008bf08f                                                                                                                                  |
| template_description  | Logical port template                                                                                                                                             |
| timeout_mins          | 10                                                                                                                                                                |
| updated_time          | None                                                                                                                                                              |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show ese_logical_port_b1cf2461-ecb9-4923-966e-e61211f8b03c
description: 'Logical port template

  '
heat_template_version: '2013-05-23'
outputs:
  id:
    description: A unique id for the logical interface
    value: {get_resource: logical_interface}
  name:
    description: The name of the logical interface.
    value:
      get_attr: [logical_interface, name]
parameters:
  logical_port_name: {description: Name of the logical port., label: Logical Port
      Name, type: string}
  logical_port_type: {description: Type of the logical port., label: Logical Port
      Type, type: string}
  logical_port_vlan_id: {default: 0, description: VLAN id to use for logical port
      creation., label: VLAN id for Logical Port, type: number}
  physical_port_id: {description: A unique id for the Physical Interface., label: Physical
      Interface ID, type: string}
  virtual_machine_interface_ids: {description: Virtual Machine Interface ID., label: Virtual
      Machine Interface ID, type: comma_delimited_list}
resources:
  logical_interface:
    properties:
      name: {get_param: logical_port_name}
      physical_interface: {get_param: physical_port_id}
      type: {get_param: logical_port_type}
      virtual_machine_interfaces: {get_param: virtual_machine_interface_ids}
      vlan: {get_param: logical_port_vlan_id}
    type: OS::Contrail::LogicalInterface

[localhost] local: gohan client port show --output-format json b411d930-df4c-4766-ae66-d0aed9d27c76
{
    "port": {
        "admin_state_up": true,
        "allowed_address_pairs": [],
        "attached": true,
        "binding:vif_type": "vrouter",
        "description": "",
        "device_id": "b9618566-14ea-4505-8eae-8fdb4b6a0ec1",
        "device_owner": "network:gw_interface",
        "ese_logical_port_id": "b1cf2461-ecb9-4923-966e-e61211f8b03c",
        "fake_delete": false,
        "fixed_ips": [
            {
                "ip_address": "172.16.101.151",
                "subnet_id": "a510f785-7758-4ce5-8fd4-c107d11b8e40"
            },
            {
                "ip_address": "172.16.101.152",
                "subnet_id": "a510f785-7758-4ce5-8fd4-c107d11b8e40"
            }
        ],
        "id": "b411d930-df4c-4766-ae66-d0aed9d27c76",
        "mac_address": "fa:16:3e:49:3c:12",
        "managed_by_service": true,
        "name": "Port for : 97fcdf3a-81a4-41a5-8ae6-52c431fc5a5c",
        "network_id": "52d7bef8-aa17-45c3-b63e-6a0e504603f0",
        "segmentation_id": 1025,
        "segmentation_type": "vlan",
        "status": "ACTIVE",
        "tags": {},
        "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
    }
}

########################################################
### checking heat-stack (ports) for UPDATE_COMPLETE ####
########################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/ports/b411d930-df4c-4766-ae66-d0aed9d27c76
[localhost] local: heat stack-show port_b411d930-df4c-4766-ae66-d0aed9d27c76
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                 |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                    |
| creation_time         | 2017-05-11T04:25:57Z                                                                                                                                  |
| description           | Virtual Machine Interface Template                                                                                                                    |
| disable_rollback      | True                                                                                                                                                  |
| id                    | f899c74e-dec4-4c73-a7df-63baf354c811                                                                                                                  |
| links                 | http://heat-api:8004/v1/0b576f6f4cbf414f829cd12f008bf08f/stacks/port_b411d930-df4c-4766-ae66-d0aed9d27c76/f899c74e-dec4-4c73-a7df-63baf354c811 (self) |
| notification_topics   | []                                                                                                                                                    |
| outputs               | [                                                                                                                                                     |
|                       |   {                                                                                                                                                   |
|                       |     "output_value": "bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb",                                                                                           |
|                       |     "description": "Virtual network.",                                                                                                                |
|                       |     "output_key": "virtual_network"                                                                                                                   |
|                       |   },                                                                                                                                                  |
|                       |   {                                                                                                                                                   |
|                       |     "output_value": "default-domain:admin:b411d930-df4c-4766-ae66-d0aed9d27c76",                                                                      |
|                       |     "description": "Fully Qualified Name of the VMI",                                                                                                 |
|                       |     "output_key": "fq_name"                                                                                                                           |
|                       |   },                                                                                                                                                  |
|                       |   {                                                                                                                                                   |
|                       |     "output_value": "b411d930-df4c-4766-ae66-d0aed9d27c76",                                                                                           |
|                       |     "description": "A unique id for the virtual machine interface.",                                                                                  |
|                       |     "output_key": "id"                                                                                                                                |
|                       |   },                                                                                                                                                  |
|                       |   {                                                                                                                                                   |
|                       |     "output_value": "null",                                                                                                                           |
|                       |     "description": "Virtual machine allowed address pairs.",                                                                                          |
|                       |     "output_key": "allowed_address_pairs"                                                                                                             |
|                       |   },                                                                                                                                                  |
|                       |   {                                                                                                                                                   |
|                       |     "output_value": "xx:xx:xx:xx:xx:xx",                                                                                                              |
|                       |     "description": "Virtual machine interface mac address.",                                                                                          |
|                       |     "output_key": "mac_address"                                                                                                                       |
|                       |   }                                                                                                                                                   |
|                       | ]                                                                                                                                                     |
| parameters            | {                                                                                                                                                     |
|                       |   "virtual_machine": "b9618566-14ea-4505-8eae-8fdb4b6a0ec1",                                                                                          |
|                       |   "name": "b411d930-df4c-4766-ae66-d0aed9d27c76",                                                                                                     |
|                       |   "OS::stack_name": "port_b411d930-df4c-4766-ae66-d0aed9d27c76",                                                                                      |
|                       |   "admin_state_up": "True",                                                                                                                           |
|                       |   "virtual_machine_interface_allowed_address_pairs": "null",                                                                                          |
|                       |   "virtual_machine_interface_mac_address": "fa:16:3e:49:3c:12",                                                                                       |
|                       |   "OS::stack_id": "f899c74e-dec4-4c73-a7df-63baf354c811",                                                                                             |
|                       |   "device_owner": "network:gw_interface",                                                                                                             |
|                       |   "virtual_network": "52d7bef8-aa17-45c3-b63e-6a0e504603f0",                                                                                          |
|                       |   "uuid": "b411d930-df4c-4766-ae66-d0aed9d27c76"                                                                                                      |
|                       | }                                                                                                                                                     |
| parent                | None                                                                                                                                                  |
| stack_name            | port_b411d930-df4c-4766-ae66-d0aed9d27c76                                                                                                             |
| stack_owner           | admin                                                                                                                                                 |
| stack_status          | UPDATE_COMPLETE                                                                                                                                       |
| stack_status_reason   | Stack successfully updated                                                                                                                            |
| stack_user_project_id | 0b576f6f4cbf414f829cd12f008bf08f                                                                                                                      |
| template_description  | Virtual Machine Interface Template                                                                                                                    |
| timeout_mins          | 10                                                                                                                                                    |
| updated_time          | 2017-05-11T04:26:05Z                                                                                                                                  |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show port_b411d930-df4c-4766-ae66-d0aed9d27c76
description: 'Virtual Machine Interface Template

  '
heat_template_version: '2013-05-23'
outputs:
  allowed_address_pairs:
    description: Virtual machine allowed address pairs.
    value:
      get_attr: [virtual_machine_interface, virtual_machine_interface_allowed_address_pairs]
  fq_name:
    description: Fully Qualified Name of the VMI
    value:
      get_attr: [virtual_machine_interface, fq_name]
  id:
    description: A unique id for the virtual machine interface.
    value: {get_resource: virtual_machine_interface}
  mac_address:
    description: Virtual machine interface mac address.
    value:
      get_attr: [virtual_machine_interface, virtual_machine_interface_mac_addresses]
  virtual_network:
    description: Virtual network.
    value:
      get_attr: [virtual_machine_interface, virtual_networks]
parameters:
  admin_state_up: {default: true, label: Admin state up, type: boolean}
  device_owner: {default: '', label: Device Owner, type: string}
  name: {description: A unique id for the Physical Interface., label: Physical Interface
      ID, type: string}
  uuid: {description: A unique id for the Virtual Machine Interface., label: Backend
      Virtual Machine Interface UUID, type: string}
  virtual_machine: {default: '', label: Virtual Machine., type: string}
  virtual_machine_interface_allowed_address_pairs: {label: Virtual machine interface
      allowed address pairs., type: json}
  virtual_machine_interface_mac_address: {default: 'fe:ff:ff:ff:ff:ff', label: Virtual
      machine interface mac address., type: string}
  virtual_network: {label: Virtual Network., type: string}
resources:
  instance_ip_0:
    properties:
      ip_address: 172.16.101.151
      name:
        str_replace:
          params:
            '%ip%': 172.16.101.151
            '%name%': {get_param: name}
            '%zone%': a510f785-7758-4ce5-8fd4-c107d11b8e40
          template: '%name%_%zone%_%ip%'
      network_id: {get_param: virtual_network}
      subnet_id: 435a94ee-ab64-4787-acbb-d2d7c95867e9
      virtual_machine_interfaces:
      - {get_resource: virtual_machine_interface}
    type: OS::Contrail::InstanceIp
  instance_ip_1:
    properties:
      ip_address: 172.16.101.152
      name:
        str_replace:
          params:
            '%ip%': 172.16.101.152
            '%name%': {get_param: name}
            '%zone%': a510f785-7758-4ce5-8fd4-c107d11b8e40
          template: '%name%_%zone%_%ip%'
      network_id: {get_param: virtual_network}
      subnet_id: 435a94ee-ab64-4787-acbb-d2d7c95867e9
      virtual_machine_interfaces:
      - {get_resource: virtual_machine_interface}
    type: OS::Contrail::InstanceIp
  virtual_machine_interface:
    properties:
      admin_state_up: {get_param: admin_state_up}
      device_owner: {get_param: device_owner}
      name: {get_param: name}
      uuid: {get_param: uuid}
      virtual_machine: {get_param: virtual_machine}
      virtual_machine_interface_allowed_address_pairs: {get_param: virtual_machine_interface_allowed_address_pairs}
      virtual_machine_interface_mac_addresses:
      - {get_param: virtual_machine_interface_mac_address}
      virtual_networks:
      - {get_param: virtual_network}
    type: OS::Contrail::VirtualMachineInterface

[localhost] local: gohan client resource_mapping list --output-format json
{
    "resource_mappings": [
        {
            "created": 1.494476663e+09,
            "deleted": null,
            "id": "075c5413-cdf3-4bb5-b7b1-6100f3cecb25",
            "mapped_id": "10.79.5.184-INET_IN-vrf_gw_sample-ha-router-downlink_1025_IN",
            "relation": "secondary_in",
            "resource_id": "429e24b5-a2f0-4fb8-b467-e335857e9476",
            "resource_type": "internet_gateway",
            "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
        },
        {
            "created": 1.494476663e+09,
            "deleted": null,
            "id": "11cb2015-fadc-4ae2-b0cf-b7ae280baebb",
            "mapped_id": "10.79.5.185-INET_OUT-vrf_gw_sample-ha-router-downlink_1025_OUT",
            "relation": "primary_out",
            "resource_id": "429e24b5-a2f0-4fb8-b467-e335857e9476",
            "resource_type": "internet_gateway",
            "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
        },
        {
            "created": 1.494476757e+09,
            "deleted": null,
            "id": "132e577f-b4ee-4ed1-8736-9f6d95caf41a",
            "mapped_id": "10.79.5.185-ae0.1025",
            "relation": "internet_primary",
            "resource_id": "b9618566-14ea-4505-8eae-8fdb4b6a0ec1",
            "resource_type": "gw_interface",
            "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
        },
        {
            "created": 1.494476757e+09,
            "deleted": null,
            "id": "28146326-7873-403b-a4e4-dcbb88120814",
            "mapped_id": "10.79.5.184-ae0.1025",
            "relation": "internet_secondary",
            "resource_id": "b9618566-14ea-4505-8eae-8fdb4b6a0ec1",
            "resource_type": "gw_interface",
            "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
        },
        {
            "created": 1.494476763e+09,
            "deleted": null,
            "id": "5bfe4c2c-4028-4342-b7f3-5f23c7decf0f",
            "mapped_id": "10.161.0.34-xe-0/0/4.1025",
            "relation": "baremetal",
            "resource_id": "7abe783f-4837-417d-b76f-771ec4d38b97",
            "resource_type": "port",
            "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
        },
        {
            "created": 1.494476663e+09,
            "deleted": null,
            "id": "b3d2f0fb-3765-4485-a88d-44b46fe191df",
            "mapped_id": "10.79.5.184-INET_OUT-vrf_gw_sample-ha-router-downlink_1025_OUT",
            "relation": "secondary_out",
            "resource_id": "429e24b5-a2f0-4fb8-b467-e335857e9476",
            "resource_type": "internet_gateway",
            "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
        },
        {
            "created": 1.494476763e+09,
            "deleted": null,
            "id": "bba0ee42-7e4a-45ed-a6d3-49a1a7e3c706",
            "mapped_id": "10.161.0.34-xe-0/0/3.1025",
            "relation": "baremetal",
            "resource_id": "b411d930-df4c-4766-ae66-d0aed9d27c76",
            "resource_type": "port",
            "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
        },
        {
            "created": 1.494476663e+09,
            "deleted": null,
            "id": "f3010659-2a05-4b5f-add1-0e2abc31f75a",
            "mapped_id": "10.79.5.185-INET_IN-vrf_gw_sample-ha-router-downlink_1025_IN",
            "relation": "primary_in",
            "resource_id": "429e24b5-a2f0-4fb8-b467-e335857e9476",
            "resource_type": "internet_gateway",
            "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
        },
        {
            "created": 1.494476703e+09,
            "deleted": null,
            "id": "f6a5fc1b-695d-4921-923a-92af07f52c2b",
            "mapped_id": "52d7bef8-aa17-45c3-b63e-6a0e504603f0",
            "relation": "instance",
            "resource_id": "52d7bef8-aa17-45c3-b63e-6a0e504603f0",
            "resource_type": "network",
            "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
        }
    ]
}

[localhost] local: gohan client billing_resource list --output-format json
{
    "billing_resources": [
        {
            "config_version": 1,
            "ended": null,
            "id": "35e4ba02-217d-492d-b256-adbe19c516d5",
            "info": {
                "internet_service": "sample-internet-service"
            },
            "parent_billing_id": null,
            "resource_id": "429e24b5-a2f0-4fb8-b467-e335857e9476",
            "resource_type": "internet_gateway",
            "started": 1.494476663e+09,
            "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
            "unique_resource_id": "429e24b5-a2f0-4fb8-b467-e335857e9476"
        },
        {
            "config_version": 1,
            "ended": null,
            "id": "6e74227c-1d04-472f-b511-81d88e219502",
            "info": {
                "cidr": "203.0.112.0",
                "submask_length": 28
            },
            "parent_billing_id": null,
            "resource_id": "bc6f2c6d-59be-4f56-a2d7-96ab578c0735",
            "resource_type": "public_ip",
            "started": 1.494476677e+09,
            "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
            "unique_resource_id": "bc6f2c6d-59be-4f56-a2d7-96ab578c0735"
        },
        {
            "config_version": 1,
            "ended": null,
            "id": "b4165f07-3b67-438d-a398-4add6a499a04",
            "info": {},
            "parent_billing_id": null,
            "resource_id": "52d7bef8-aa17-45c3-b63e-6a0e504603f0",
            "resource_type": "network",
            "started": 1.494476703e+09,
            "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
            "unique_resource_id": "52d7bef8-aa17-45c3-b63e-6a0e504603f0"
        },
        {
            "config_version": 1,
            "ended": null,
            "id": "e32e992e-8553-448c-860f-6e63bbe30c19",
            "info": {
                "bandwidth": "10",
                "qos_type": "guarantee"
            },
            "parent_billing_id": "35e4ba02-217d-492d-b256-adbe19c516d5",
            "resource_id": "e25f6309-c384-446e-bdc1-5241cb14890b",
            "resource_type": "qos_option",
            "started": 1.494476663e+09,
            "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
            "unique_resource_id": null
        }
    ]
}

### Create Static Route ###
name:[sample-static-route], id:[2cbf727e-ac76-4c54-be9c-3f374d792ff4]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
04:26:55.317636  04:26:55.518027  0.200391        POST     201    PENDING_CREATE
04:26:55.521442  04:26:55.658196  0.136754         GET     200    PENDING_CREATE
04:26:56.659482  04:26:56.768699  0.109217         GET     200    PENDING_CREATE
04:26:57.769016  04:26:57.849550  0.080534         GET     200    PENDING_CREATE
04:26:58.850796  04:26:58.940014  0.089218         GET     200    PENDING_CREATE
04:26:59.941112  04:27:00.077605  0.136493         GET     200    PENDING_CREATE
04:27:01.078745  04:27:01.168338  0.089593         GET     200    PENDING_CREATE
04:27:02.168691  04:27:02.266997  0.098306         GET     200    PENDING_CREATE
04:27:03.268281  04:27:03.371763  0.103482         GET     200    PENDING_CREATE
04:27:04.372690  04:27:04.472976  0.100286         GET     200    PENDING_CREATE
04:27:05.474269  04:27:05.563620  0.089351         GET     200    PENDING_CREATE
04:27:06.564665  04:27:06.643191  0.078526         GET     200    PENDING_CREATE
04:27:07.644405  04:27:07.723466  0.079061         GET     200    PENDING_CREATE
04:27:08.724635  04:27:08.822942  0.098307         GET     200    PENDING_CREATE
04:27:09.824288  04:27:09.922036  0.097748         GET     200    PENDING_CREATE
04:27:10.923237  04:27:11.019918  0.096681         GET     200    PENDING_CREATE
04:27:12.021347  04:27:12.126425  0.105078         GET     200    PENDING_CREATE
04:27:13.128248  04:27:13.216998  0.088750         GET     200    PENDING_CREATE
04:27:14.218150  04:27:14.330322  0.112172         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 19.012686

[localhost] local: gohan client static_route show --output-format json 2cbf727e-ac76-4c54-be9c-3f374d792ff4
{
    "static_route": {
        "aws_gw_id": null,
        "description": "Sample Static-route",
        "destination": "203.0.112.0/28",
        "id": "2cbf727e-ac76-4c54-be9c-3f374d792ff4",
        "interdc_gw_id": null,
        "internet_gw_id": "429e24b5-a2f0-4fb8-b467-e335857e9476",
        "name": "sample-static-route",
        "nexthop": "172.16.101.1",
        "public_ip_id": "bc6f2c6d-59be-4f56-a2d7-96ab578c0735",
        "service_type": "internet",
            "status": "ACTIVE",
        "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
        "vpn_gw_id": null
    }
}

############################################
### checking heat-stack (static_routes) ####
############################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/static_routes/2cbf727e-ac76-4c54-be9c-3f374d792ff4
[localhost] local: heat stack-show static_route_2cbf727e-ac76-4c54-be9c-3f374d792ff4
+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                         |
+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                            |
| creation_time         | 2017-05-11T04:26:56Z                                                                                                                                          |
| description           | Internet Gateway Static Route                                                                                                                                 |
| disable_rollback      | True                                                                                                                                                          |
| id                    | e3ea1840-d5ec-4635-8bcd-e80d07ffe8b9                                                                                                                          |
| links                 | http://heat-api:8004/v1/0b576f6f4cbf414f829cd12f008bf08f/stacks/static_route_2cbf727e-ac76-4c54-be9c-3f374d792ff4/e3ea1840-d5ec-4635-8bcd-e80d07ffe8b9 (self) |
| notification_topics   | []                                                                                                                                                            |
| outputs               | []                                                                                                                                                            |
| parameters            | {                                                                                                                                                             |
|                       |   "primary_device_ip": "10.79.5.185",                                                                                                                         |
|                       |   "OS::stack_id": "e3ea1840-d5ec-4635-8bcd-e80d07ffe8b9",                                                                                                     |
|                       |   "OS::stack_name": "static_route_2cbf727e-ac76-4c54-be9c-3f374d792ff4",                                                                                      |
|                       |   "route": "203.0.112.0/28",                                                                                                                                  |
|                       |   "secondary_device_port": "830",                                                                                                                             |
|                       |   "secondary_device_password": "esiesi0000",                                                                                                                  |
|                       |   "primary_device_password": "esiesi0000",                                                                                                                    |
|                       |   "next_hop": "172.16.101.1",                                                                                                                                 |
|                       |   "vrf_name": "vrf_gw_sample-ha-router-downlink_1025",                                                                                                        |
|                       |   "primary_device_username": "esi",                                                                                                                           |
|                       |   "primary_device_port": "830",                                                                                                                               |
|                       |   "secondary_device_ip": "10.79.5.184",                                                                                                                       |
|                       |   "secondary_device_username": "esi"                                                                                                                          |
|                       | }                                                                                                                                                             |
| parent                | None                                                                                                                                                          |
| stack_name            | static_route_2cbf727e-ac76-4c54-be9c-3f374d792ff4                                                                                                             |
| stack_owner           | admin                                                                                                                                                         |
| stack_status          | CREATE_COMPLETE                                                                                                                                               |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                           |
| stack_user_project_id | 0b576f6f4cbf414f829cd12f008bf08f                                                                                                                              |
| template_description  | Internet Gateway Static Route                                                                                                                                 |
| timeout_mins          | 60                                                                                                                                                            |
| updated_time          | None                                                                                                                                                          |
+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show static_route_2cbf727e-ac76-4c54-be9c-3f374d792ff4
description: 'Internet Gateway Static Route

  '
heat_template_version: '2013-05-23'
parameters:
  next_hop: {description: Next hop for the static route, label: Next hop, type: string}
  primary_device_ip: {description: Ip address that will be used to establish ssh connection
      to the Primary Device., label: Ip address of the device., type: string}
  primary_device_password: {description: Password of the user which will be used to
      log onto the Primary Device., label: Users password., type: string}
  primary_device_port: {description: Port that will be used to establish ssh connection
      to the Primary Device., label: Port of the ssh connection., type: number}
  primary_device_username: {description: Name of the user which will be used to log
      onto the Primary Device., label: User name to log on to device., type: string}
  route: {description: Static Route definition, label: Route, type: string}
  secondary_device_ip: {description: Ip address that will be used to establish ssh
      connection to the Secondary Device., label: Ip address of the device., type: string}
  secondary_device_password: {description: Password of the user which will be used
      to log onto the Secondary Device., label: Users password., type: string}
  secondary_device_port: {description: Port that will be used to establish ssh connection
      to the Secondary Device., label: Port of the ssh connection., type: number}
  secondary_device_username: {description: Name of the user which will be used to
      log onto the Secondary Device., label: User name to log on to device., type: string}
  vrf_name: {description: Name of VRF to add this static route, label: VRF, type: string}
resources:
  netconf_configure_primary:
    properties:
      configs:
      - config:
          str_replace:
            params:
              $NEXT_HOP: {get_param: next_hop}
            template: 'next-hop $NEXT_HOP;

              '
        path:
        - {config_type: tag, tag: routing-instances, xml_type: tag}
        - config_type: name
          name: {get_param: vrf_name}
          tag: instance
          xml_type: named_tag
        - {config_type: tag, tag: routing-options, xml_type: tag}
        - {config_type: tag, tag: static, xml_type: tag}
        - config_type: named_tag
          name: {get_param: route}
          tag: route
          xml_type: named_tag
      device_ip: {get_param: primary_device_ip}
      lock_timeout: 3000
      password: {get_param: primary_device_password}
      port: {get_param: primary_device_port}
      username: {get_param: primary_device_username}
    type: OS::Contrail::NetconfNamedConfigs
  netconf_configure_secondary:
    properties:
      configs:
      - config:
          str_replace:
            params:
              $NEXT_HOP: {get_param: next_hop}
            template: 'next-hop $NEXT_HOP;

              '
        path:
        - {config_type: tag, tag: routing-instances, xml_type: tag}
        - config_type: name
          name: {get_param: vrf_name}
          tag: instance
          xml_type: named_tag
        - {config_type: tag, tag: routing-options, xml_type: tag}
        - {config_type: tag, tag: static, xml_type: tag}
        - config_type: named_tag
          name: {get_param: route}
          tag: route
          xml_type: named_tag
      device_ip: {get_param: secondary_device_ip}
      lock_timeout: 3000
      password: {get_param: secondary_device_password}
      port: {get_param: secondary_device_port}
      username: {get_param: secondary_device_username}
    type: OS::Contrail::NetconfNamedConfigs

root@client:/tools/rest-api-for-esi# heat stack-list
+--------------------------------------+--------------------------------------------------------+-----------------+----------------------+
| id                                   | stack_name                                             | stack_status    | creation_time        |
+--------------------------------------+--------------------------------------------------------+-----------------+----------------------+
| 35bb07b5-3cc1-4d59-b079-b764dbfc7e3b | ese_device_a1f745c1-e6b9-45ef-94db-f33b37709fb0        | CREATE_COMPLETE | 2017-05-11T04:23:14Z |
| 50c6e654-aa32-4466-a57b-01e12813b66a | ese_physical_port_97fcdf3a-81a4-41a5-8ae6-52c431fc5a5c | CREATE_COMPLETE | 2017-05-11T04:23:20Z |
| 092b33b0-168a-4897-806d-a266936c5049 | ese_physical_port_8a4bbfe0-5aae-42f5-8b94-c4c14b9e7306 | CREATE_COMPLETE | 2017-05-11T04:23:26Z |
| d6e8740b-3293-484e-965d-0a9b0b02328a | internet_gateway_429e24b5-a2f0-4fb8-b467-e335857e9476  | CREATE_COMPLETE | 2017-05-11T04:24:07Z |
| e929ecde-bd23-4e03-a261-eb994c1027f4 | public_ip_bc6f2c6d-59be-4f56-a2d7-96ab578c0735         | CREATE_COMPLETE | 2017-05-11T04:24:38Z |
| 345e3601-b0c7-428b-8b7b-0787ab682615 | network_52d7bef8-aa17-45c3-b63e-6a0e504603f0           | CREATE_COMPLETE | 2017-05-11T04:25:01Z |
| 72d3b074-b568-4254-a0e0-cf947ba944ab | subnet_a510f785-7758-4ce5-8fd4-c107d11b8e40            | CREATE_COMPLETE | 2017-05-11T04:25:21Z |
| c9ec27ab-17d1-45ab-b494-e58217c9e3b9 | gw_interface_b9618566-14ea-4505-8eae-8fdb4b6a0ec1      | CREATE_COMPLETE | 2017-05-11T04:25:40Z |
| f899c74e-dec4-4c73-a7df-63baf354c811 | port_b411d930-df4c-4766-ae66-d0aed9d27c76              | UPDATE_COMPLETE | 2017-05-11T04:25:57Z |
| a992265b-5295-4df3-9ec0-3a205a76765f | port_7abe783f-4837-417d-b76f-771ec4d38b97              | UPDATE_COMPLETE | 2017-05-11T04:25:58Z |
| 445cdcbc-0924-47a2-b811-dc87b1506129 | ese_logical_port_b1cf2461-ecb9-4923-966e-e61211f8b03c  | CREATE_COMPLETE | 2017-05-11T04:26:01Z |
| a06c3583-6d03-47be-8d33-bfd30403ad88 | ese_logical_port_3ce86e39-7a81-46f8-b0c4-62a4776746f1  | CREATE_COMPLETE | 2017-05-11T04:26:01Z |
| e3ea1840-d5ec-4635-8bcd-e80d07ffe8b9 | static_route_2cbf727e-ac76-4c54-be9c-3f374d792ff4      | CREATE_COMPLETE | 2017-05-11T04:26:56Z |
+--------------------------------------+--------------------------------------------------------+-----------------+----------------------+
root@client:/tools/rest-api-for-esi# 
