03:02:05.361 gohan.server.core INFO [0m logging initialized
03:02:05.363 gohan.schema INFO [0m Loading schema ./../etc/schema/gohan.json ...
03:02:05.376 gohan.schema INFO [0m Loading schema ./../etc/extensions/gohan_extension.yaml ...
03:02:05.376 gohan.schema INFO [0m Loading schema ./schemas/cloud_schema.yaml ...
03:02:05.424 gohan.schema INFO [0m Loading schema ./schemas/heat_worker_schema.yaml ...
03:02:05.428 gohan.schema INFO [0m Loading schema ./schemas/tenants.yaml ...
03:02:05.430 gohan.schema INFO [0m Loading schema ./schemas/policies.yaml ...
03:02:05.431 gohan.schema INFO [0m Loading schema ./schemas/common_extensions.yaml ...
03:02:05.432 gohan.schema INFO [0m Loading schema ./schemas/relation_extensions.yaml ...
03:02:05.433 gohan.schema INFO [0m Loading schema ./schemas/extensions.yaml ...
03:02:05.434 gohan.schema INFO [0m Loading schema ./schemas/sss_extensions.yaml ...
03:02:05.435 gohan.schema INFO [0m Loading schema ./schemas/monitoring_extensions.yaml ...
03:02:05.436 gohan.schema INFO [0m Loading schema ./schemas/igs_schema.yaml ...
03:02:05.540 gohan.schema INFO [0m Loading schema ./schemas/igs_extensions.yaml ...
03:02:05.543 gohan.schema INFO [0m Loading schema ./schemas/igs_policies.yaml ...
03:02:05.545 gohan.schema INFO [0m Loading schema ./schemas/vnf_schema.yaml ...
03:02:05.562 gohan.schema INFO [0m Loading schema ./schemas/vnf_policies.yaml ...
03:02:05.563 gohan.schema INFO [0m Loading schema ./schemas/vnf_extensions.yaml ...
03:02:05.563 gohan.schema INFO [0m Loading schema ./schemas/firewall_schema.yaml ...
03:02:05.577 gohan.schema INFO [0m Loading schema ./schemas/firewall_extensions.yaml ...
03:02:05.578 gohan.schema INFO [0m Loading schema ./schemas/firewall_policies.yaml ...
03:02:05.579 gohan.schema INFO [0m Loading schema ./schemas/load_balancer_schema.yaml ...
03:02:05.607 gohan.schema INFO [0m Loading schema ./schemas/load_balancer_policies.yaml ...
03:02:05.609 gohan.schema INFO [0m Loading schema ./schemas/load_balancer_extensions.yaml ...
03:02:05.610 gohan.schema INFO [0m Loading schema ./schemas/usage.yaml ...
03:02:05.611 gohan.schema INFO [0m Loading schema ./schemas/billing_extensions.yaml ...
03:02:05.612 gohan.schema INFO [0m Loading schema ./schemas/billing_resource_schema.yaml ...
03:02:05.616 gohan.schema INFO [0m Loading schema ./schemas/metrics.yaml ...
03:02:05.622 gohan.schema INFO [0m Loading schema ./schemas/vpn_admin_policies.yaml ...
03:02:05.623 gohan.schema INFO [0m Loading schema ./schemas/aws_admin_policies.yaml ...
03:02:05.624 gohan.schema INFO [0m Loading schema ./schemas/interdc_admin_policies.yaml ...
03:02:05.625 gohan.schema INFO [0m Loading schema ./schemas/interdc_member_policy.yaml ...
03:02:05.625 gohan.schema INFO [0m Loading schema ./schemas/sss_admin_policies.yaml ...
03:02:05.626 gohan.schema INFO [0m Loading schema ./schemas/colocation_schema.yaml ...
03:02:05.639 gohan.schema INFO [0m Loading schema ./schemas/colocation_policies.yaml ...
03:02:05.641 gohan.schema INFO [0m Loading schema ./schemas/colocation_extensions.yaml ...
03:02:05.641 gohan.schema INFO [0m Loading schema ./schemas/tenant_connection_schema.yaml ...
03:02:05.645 gohan.schema INFO [0m Loading schema ./schemas/tenant_connection_policies.yaml ...
03:02:05.645 gohan.schema INFO [0m Loading schema ./schemas/tenant_connection_extensions.yaml ...
03:02:05.646 gohan.schema INFO [0m Loading schema ./schemas/hosting_schema.yaml ...
03:02:05.658 gohan.schema INFO [0m Loading schema ./schemas/hosting_policies.yaml ...
03:02:05.659 gohan.schema INFO [0m Loading schema ./schemas/hosting_extensions.yaml ...
[36m03:02:05.661 gohan.db DEBUG [0m Registering schema schema
03:02:05.661 gohan.db.sql INFO [0m Creating table: create table `schemas` (`actions`text null,`description`text not null,`id`varchar(255) primary key,`metadata`text not null,`namespace`text not null,`parent`text not null,`plural`text not null,`prefix`text not null,`schema`text not null,`singular`text not null,`title`text not null);
[36m03:02:05.678 gohan.db DEBUG [0m Registering schema policy
03:02:05.678 gohan.db.sql INFO [0m Creating table: create table `policys` (`action`text null,`condition`text not null,`effect`text null,`id`varchar(255) primary key,`principal`text null,`resource`text null);
[36m03:02:05.699 gohan.db DEBUG [0m Registering schema extension
03:02:05.699 gohan.db.sql INFO [0m Creating table: create table `extensions` (`code`text not null,`code_type`text not null,`id`varchar(255) primary key,`path`text null,`url`text not null);
[36m03:02:05.720 gohan.db DEBUG [0m Registering schema event
03:02:05.720 gohan.db.sql INFO [0m Creating table: create table `events` (`body`text null,`id`integer primary key auto_increment ,`marked_for_deletion`boolean not null,`path`text not null,`timestamp`numeric not null,`type`text not null,`version`numeric null);
[36m03:02:05.734 gohan.db DEBUG [0m Registering schema namespace
03:02:05.734 gohan.db.sql INFO [0m Creating table: create table `namespaces` (`description`text not null,`id`varchar(255) primary key,`metadata`text not null,`name`text not null,`parent`text not null,`prefix`text not null,`version`text not null);
[36m03:02:05.759 gohan.db DEBUG [0m Registering schema location
03:02:05.759 gohan.db.sql INFO [0m Creating table: create table `locations` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`address`text not null,`description`text not null,`id`varchar(255) primary key,`name`text null,`tags`text not null,`tenant_id`text null,`type`text null);
[36m03:02:05.779 gohan.db DEBUG [0m Registering schema ese_device
03:02:05.779 gohan.db.sql INFO [0m Creating table: create table `ese_devices` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`description`text not null,`existing`text not null,`flavor`text null,`hostname`text null,`id`varchar(255) primary key,`location`varchar(255) null,`management_ip_address`varchar(255) null unique,`name`text not null,`password`text not null,`public_ip_address`text null,`status`text null,`tags`text not null,`tenant_id`text null,`tor_agent_names`text null,`tsn_names`text null,`type`text not null,`username`text not null,CONSTRAINT `ese_device_location_fk` FOREIGN KEY (`location`) REFERENCES `locations`(id) );
[36m03:02:05.830 gohan.db DEBUG [0m Registering schema network
03:02:05.831 gohan.db.sql INFO [0m Creating table: create table `networks` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`admin_state_up`boolean not null,`description`text not null,`id`varchar(255) primary key,`name`text not null,`plane`text not null,`shared`boolean not null,`status`text not null,`subnets`text not null,`tags`text not null,`tenant_id`text null);
[36m03:02:05.855 gohan.db DEBUG [0m Registering schema subnet
03:02:05.856 gohan.db.sql INFO [0m Creating table: create table `subnets` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`allocation_pools`text not null,`cidr`text not null,`description`text not null,`dhcp_server_address`text null,`dns_nameservers`text not null,`enable_dhcp`boolean not null,`gateway_ip`text null,`host_routes`text not null,`id`varchar(255) primary key,`ip_version`numeric not null,`ipv6_address_mode`text null,`ipv6_ra_mode`text null,`name`text not null,`network_id`varchar(255) not null,`ntp_servers`text not null,`status`text not null,`tags`text not null,`tenant_id`text null,CONSTRAINT `subnet_network_id_fk` FOREIGN KEY (`network_id`) REFERENCES `networks`(id) );
[36m03:02:05.880 gohan.db DEBUG [0m Registering schema port
03:02:05.880 gohan.db.sql INFO [0m Creating table: create table `ports` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`admin_state_up`boolean not null,`allowed_address_pairs`text not null,`attached`boolean not null,`binding:vif_type`text not null,`description`text not null,`device_id`text null,`device_owner`text null,`ese_logical_port_id`text null,`fake_delete`boolean not null,`fixed_ips`text null,`id`varchar(255) primary key,`mac_address`text null,`managed_by_service`boolean not null,`name`text not null,`network_id`varchar(255) not null,`segmentation_id`numeric null,`segmentation_type`text null,`status`text not null,`tags`text not null,`tenant_id`text null,CONSTRAINT `port_network_id_fk` FOREIGN KEY (`network_id`) REFERENCES `networks`(id) );
[36m03:02:05.899 gohan.db DEBUG [0m Registering schema ese_physical_port
03:02:05.899 gohan.db.sql INFO [0m Creating table: create table `ese_physical_ports` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`connected_port_id`text null,`connected_port_owner`text null,`description`text not null,`ese_device_id`varchar(255) not null,`existing`text not null,`id`varchar(255) primary key,`name`text not null,`status`text null,`tags`text not null,`tenant_id`text null,CONSTRAINT `ese_physical_port_ese_device_id_fk` FOREIGN KEY (`ese_device_id`) REFERENCES `ese_devices`(id) );
[36m03:02:05.920 gohan.db DEBUG [0m Registering schema ese_logical_port
03:02:05.920 gohan.db.sql INFO [0m Creating table: create table `ese_logical_ports` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`common_function_gateway_id`text null,`connected_resource`text not null,`description`text not null,`ese_physical_port_id`varchar(255) not null,`gw_interface_id`text null,`id`varchar(255) primary key,`name`text not null,`network_id`varchar(255) not null,`port_ids`text null,`status`text null,`tags`text not null,`tenant_id`text null,`type`text not null,`vlan_id`numeric not null,CONSTRAINT `ese_logical_port_ese_physical_port_id_fk` FOREIGN KEY (`ese_physical_port_id`) REFERENCES `ese_physical_ports`(id) ,CONSTRAINT `ese_logical_port_network_id_fk` FOREIGN KEY (`network_id`) REFERENCES `networks`(id) );
[36m03:02:05.956 gohan.db DEBUG [0m Registering schema local_subnet
03:02:05.957 gohan.db.sql INFO [0m Creating table: create table `local_subnets` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`cidr`text not null,`description`text not null,`ese_logical_port_id`varchar(255) not null,`id`varchar(255) primary key,`ip_version`numeric not null,`name`text not null,`network_id`varchar(255) not null,`tags`text not null,`tenant_id`text null,CONSTRAINT `local_subnet_ese_logical_port_id_fk` FOREIGN KEY (`ese_logical_port_id`) REFERENCES `ese_logical_ports`(id) ,CONSTRAINT `local_subnet_network_id_fk` FOREIGN KEY (`network_id`) REFERENCES `networks`(id) );
[36m03:02:05.983 gohan.db DEBUG [0m Registering schema server
03:02:05.983 gohan.db.sql INFO [0m Creating table: create table `servers` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`description`text not null,`flavor`text not null,`id`varchar(255) primary key,`name`text not null,`tags`text not null,`tenant_id`text null,`type`text not null);
[36m03:02:06.004 gohan.db DEBUG [0m Registering schema physical_port
03:02:06.004 gohan.db.sql INFO [0m Creating table: create table `physical_ports` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`description`text not null,`id`varchar(255) primary key,`name`text not null,`plane`text not null,`segmentation_ranges`text not null,`service_id`text null,`service_owner`text null,`status`text null,`tags`text not null,`tenant_id`text null);
[36m03:02:06.029 gohan.db DEBUG [0m Registering schema quota
03:02:06.029 gohan.db.sql INFO [0m Creating table: create table `quotas` (`aws_gateway`numeric not null,`colocation_logical_link`numeric not null,`common_function_gateway`numeric not null,`firewall`numeric not null,`hosting_logical_link`numeric not null,`hosting_physical_link_plane_storage`numeric not null,`id`varchar(255) primary key,`interdc_gateway`numeric not null,`internet_gateway`numeric not null,`load_balancer`numeric not null,`network`numeric not null,`port`numeric not null,`public_ip`numeric not null,`subnet`numeric not null,`tenant_id`varchar(255) not null unique,`vpn_gateway`numeric not null);
[36m03:02:06.047 gohan.db DEBUG [0m Registering schema reserve_address
03:02:06.047 gohan.db.sql INFO [0m Creating table: create table `reserve_addresss` (`id`varchar(255) primary key,`subnets`text not null,`tenant_id`varchar(255) not null unique);
[36m03:02:06.063 gohan.db DEBUG [0m Registering schema neutron_extension
03:02:06.063 gohan.db.sql INFO [0m Creating table: create table `neutron_extensions` (`alias`varchar(255) null unique,`description`text not null,`id`varchar(255) primary key,`links`text not null,`name`text null,`namespace`text null,`updated`text null);
[36m03:02:06.081 gohan.db DEBUG [0m Registering schema heat_template
03:02:06.081 gohan.db.sql INFO [0m Creating table: create table `heat_templates` (`handler`text null,`id`varchar(255) primary key,`parameter_mappings`text null,`template_file`text null,`tenant_id`text null,`watch`text null);
[36m03:02:06.097 gohan.db DEBUG [0m Registering schema worker_data
03:02:06.097 gohan.db.sql INFO [0m Creating table: create table `worker_datas` (`id`varchar(255) primary key,`tenant_id`text null,`value`text not null);
[36m03:02:06.119 gohan.db DEBUG [0m Registering schema tenant
03:02:06.120 gohan.db.sql INFO [0m Creating table: create table `tenants` (`delete_retries`numeric not null,`end_time`text not null,`id`varchar(255) primary key,`status`text null);
[36m03:02:06.141 gohan.db DEBUG [0m Registering schema edge_router
03:02:06.141 gohan.db.sql INFO [0m Creating table: create table `edge_routers` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`autonomous_system`text null,`description`text not null,`id`varchar(255) primary key,`ip`varchar(255) not null unique,`login`text not null,`name`text not null,`password`text not null,`ssh_port`numeric not null,`status`text null,`tenant_id`text null);
[36m03:02:06.157 gohan.db DEBUG [0m Registering schema er_physical_interface
03:02:06.157 gohan.db.sql INFO [0m Creating table: create table `er_physical_interfaces` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`connected_ese_port_id`varchar(255) null,`description`text not null,`device_id`varchar(255) not null,`id`varchar(255) primary key,`name`text not null,`status`text null,`tenant_id`text null,CONSTRAINT `er_physical_interface_connected_ese_port_id_fk` FOREIGN KEY (`connected_ese_port_id`) REFERENCES `ese_physical_ports`(id) ,CONSTRAINT `er_physical_interface_device_id_fk` FOREIGN KEY (`device_id`) REFERENCES `edge_routers`(id) );
[36m03:02:06.196 gohan.db DEBUG [0m Registering schema ha_router
03:02:06.196 gohan.db.sql INFO [0m Creating table: create table `ha_routers` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`available_gateways`numeric null,`description`text not null,`id`varchar(255) primary key,`maximum_gateways`numeric not null,`name`text not null,`primary_router_id`varchar(255) not null unique,`secondary_router_id`varchar(255) not null unique,`status`text null,`tenant_id`text null,CONSTRAINT `ha_router_primary_router_id_fk` FOREIGN KEY (`primary_router_id`) REFERENCES `edge_routers`(id) ,CONSTRAINT `ha_router_secondary_router_id_fk` FOREIGN KEY (`secondary_router_id`) REFERENCES `edge_routers`(id) );
[36m03:02:06.221 gohan.db DEBUG [0m Registering schema ha_interface
03:02:06.221 gohan.db.sql INFO [0m Creating table: create table `ha_interfaces` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`admin_state_up`boolean not null,`available_be_bandwidth`numeric null,`available_ga_bandwidth`numeric null,`description`text not null,`gateway_instances_count`numeric not null,`ha_router_id`varchar(255) not null,`id`varchar(255) primary key,`link_type`text not null,`maximum_be_bandwidth`numeric not null,`maximum_ga_bandwidth`numeric not null,`name`text not null,`primary_interface_id`varchar(255) not null unique,`restricted_vlans`text not null,`secondary_interface_id`varchar(255) not null unique,`status`text null,`tenant_id`text null,`vlan_ids_available`numeric not null,`vlan_pool_state`text not null,CONSTRAINT `ha_interface_ha_router_id_fk` FOREIGN KEY (`ha_router_id`) REFERENCES `ha_routers`(id) ,CONSTRAINT `ha_interface_primary_interface_id_fk` FOREIGN KEY (`primary_interface_id`) REFERENCES `er_physical_interfaces`(id) ,CONSTRAINT `ha_interface_secondary_interface_id_fk` FOREIGN KEY (`secondary_interface_id`) REFERENCES `er_physical_interfaces`(id) );
[36m03:02:06.254 gohan.db DEBUG [0m Registering schema internet_service
03:02:06.254 gohan.db.sql INFO [0m Creating table: create table `internet_services` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`be_forwarding_class`text not null,`default_static_routes_per_gateway`numeric not null,`description`text not null,`downlink_interfaces`text not null,`ga_forwarding_class`text not null,`id`varchar(255) primary key,`inet_in_filter`text not null,`inet_out_filter`text not null,`minimal_submask_length`numeric not null,`name`text not null,`neighbour_prefix`text not null,`primary_ibgp_config_group`text not null,`primary_vrrp_config_group`text not null,`secondary_ibgp_config_group`text not null,`secondary_vrrp_config_group`text not null,`tenant_id`text null,`uplink_import_policy`text not null,`vrf_config`text not null,`vrf_export_policy`text not null,`vrf_import_policy`text not null,`zone`text null);
[36m03:02:06.276 gohan.db DEBUG [0m Registering schema vpn_service
03:02:06.276 gohan.db.sql INFO [0m Creating table: create table `vpn_services` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`be_forwarding_class`text not null,`default_static_routes_per_gateway`numeric not null,`description`text not null,`downlink_interfaces`text not null,`ga_forwarding_class`text not null,`id`varchar(255) primary key,`name`text not null,`neighbour_prefix`text not null,`primary_downlink_vrrp_config_group`text not null,`primary_ebgp_config_group`text not null,`primary_ibgp_config_group`text not null,`secondary_downlink_vrrp_config_group`text not null,`secondary_ebgp_config_group`text not null,`secondary_ibgp_config_group`text not null,`tenant_id`text not null,`uplink_interfaces`text not null,`vrf_config`text null,`zone`text null);
[36m03:02:06.293 gohan.db DEBUG [0m Registering schema aws_service
03:02:06.293 gohan.db.sql INFO [0m Creating table: create table `aws_services` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`be_forwarding_class`text not null,`default_static_routes_per_gateway`numeric not null,`description`text not null,`downlink_interfaces`text not null,`ga_forwarding_class`text not null,`id`varchar(255) primary key,`name`text not null,`neighbour_prefix`text not null,`primary_downlink_vrrp_config_group`text not null,`primary_ebgp_config_group`text not null,`primary_ibgp_config_group`text not null,`secondary_downlink_vrrp_config_group`text not null,`secondary_ebgp_config_group`text not null,`secondary_ibgp_config_group`text not null,`tenant_id`text not null,`uplink_interfaces`text not null,`vrf_config`text null,`zone`text null);
[36m03:02:06.310 gohan.db DEBUG [0m Registering schema interdc_service
03:02:06.310 gohan.db.sql INFO [0m Creating table: create table `interdc_services` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`be_forwarding_class`text not null,`default_static_routes_per_gateway`numeric not null,`description`text not null,`downlink_interfaces`text not null,`ga_forwarding_class`text not null,`id`varchar(255) primary key,`name`text not null,`primary_downlink_vrrp_config_group`text not null,`primary_uplink_vrrp_config_group`text not null,`secondary_downlink_vrrp_config_group`text not null,`secondary_uplink_vrrp_config_group`text not null,`tenant_id`text not null,`uplink_interfaces`text not null,`vrf_config`text null,`zone`text null);
[36m03:02:06.340 gohan.db DEBUG [0m Registering schema common_function_pool
03:02:06.340 gohan.db.sql INFO [0m Creating table: create table `common_function_pools` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`common_function_pool_state`text not null,`description`text not null,`dnat_group_name`text not null,`dnat_pool_group_name`text not null,`downlink_interfaces`text not null,`id`varchar(255) primary key,`link_local_cidr`text not null,`link_local_netmask`numeric not null,`logical_tunnel_interface_name`text not null,`name`text not null,`service_interface_name`text not null,`service_vrf_name`text not null,`snapt_group_name`text not null,`snapt_pool_group_name`text not null,`tenant_id`text not null,`vrrp_config`text not null,`vrrp_group_name`text not null);
[36m03:02:06.361 gohan.db DEBUG [0m Registering schema nat_ip_pool
03:02:06.362 gohan.db.sql INFO [0m Creating table: create table `nat_ip_pools` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`common_function_pool_id`varchar(255) not null,`description`text not null,`ha_router_id`varchar(255) not null,`id`varchar(255) primary key,`ip_allocation_state`text not null,`ip_ranges`text not null,`name`text not null,`tenant_id`text not null,CONSTRAINT `nat_ip_pool_common_function_pool_id_fk` FOREIGN KEY (`common_function_pool_id`) REFERENCES `common_function_pools`(id) ,CONSTRAINT `nat_ip_pool_ha_router_id_fk` FOREIGN KEY (`ha_router_id`) REFERENCES `ha_routers`(id) );
[36m03:02:06.395 gohan.db DEBUG [0m Registering schema common_function
03:02:06.395 gohan.db.sql INFO [0m Creating table: create table `common_functions` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`common_function_number`numeric null,`common_function_pool_id`varchar(255) not null,`description`text not null,`ha_router_id`varchar(255) null,`id`varchar(255) primary key,`link_local_ip_address`text not null,`name`text not null,`primary_vrrp_ip`text null,`secondary_vrrp_ip`text null,`shared_ip_address`text not null,`status`text not null,`tenant_id`text not null,`vrid`numeric null,CONSTRAINT `common_function_common_function_pool_id_fk` FOREIGN KEY (`common_function_pool_id`) REFERENCES `common_function_pools`(id) ,CONSTRAINT `common_function_ha_router_id_fk` FOREIGN KEY (`ha_router_id`) REFERENCES `ha_routers`(id) );
[36m03:02:06.420 gohan.db DEBUG [0m Registering schema public_ip_pool
03:02:06.421 gohan.db.sql INFO [0m Creating table: create table `public_ip_pools` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`addresses_available`numeric not null,`ha_router_id`varchar(255) not null,`id`varchar(255) primary key,`internet_service_id`varchar(255) not null,`ip_version`numeric not null,`pool_state`text not null,`submask_length`numeric not null,`subnet_ip`text not null,`tenant_id`text null,CONSTRAINT `public_ip_pool_ha_router_id_fk` FOREIGN KEY (`ha_router_id`) REFERENCES `ha_routers`(id) ,CONSTRAINT `public_ip_pool_internet_service_id_fk` FOREIGN KEY (`internet_service_id`) REFERENCES `internet_services`(id) );
[36m03:02:06.450 gohan.db DEBUG [0m Registering schema suspended_public_ip
03:02:06.450 gohan.db.sql INFO [0m Creating table: create table `suspended_public_ips` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`cidr`text not null,`description`text not null,`expiry_timestamp`text null,`id`varchar(255) primary key,`ip_pool_id`varchar(255) not null,`name`text not null,`previous_tenant_id`text null,`submask_length`text not null,`tenant_id`text null,CONSTRAINT `suspended_public_ip_ip_pool_id_fk` FOREIGN KEY (`ip_pool_id`) REFERENCES `public_ip_pools`(id) );
[36m03:02:06.467 gohan.db DEBUG [0m Registering schema qos_option
03:02:06.467 gohan.db.sql INFO [0m Creating table: create table `qos_options` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`aws_service_id`varchar(255) null,`bandwidth`text not null,`charge_type`text null,`description`text not null,`ha_router_id`varchar(255) null,`id`varchar(255) primary key,`incoming_policer_config`text not null,`incoming_policer_name`text not null,`interdc_service_id`varchar(255) null,`internet_service_id`varchar(255) null,`name`text not null,`outgoing_policer_config`text not null,`outgoing_policer_name`text not null,`qos_type`text not null,`service_type`text not null,`status`text not null,`tenant_id`text null,`vpn_service_id`varchar(255) null,CONSTRAINT `qos_option_aws_service_id_fk` FOREIGN KEY (`aws_service_id`) REFERENCES `aws_services`(id) ,CONSTRAINT `qos_option_ha_router_id_fk` FOREIGN KEY (`ha_router_id`) REFERENCES `ha_routers`(id) ,CONSTRAINT `qos_option_interdc_service_id_fk` FOREIGN KEY (`interdc_service_id`) REFERENCES `interdc_services`(id) ,CONSTRAINT `qos_option_internet_service_id_fk` FOREIGN KEY (`internet_service_id`) REFERENCES `internet_services`(id) ,CONSTRAINT `qos_option_vpn_service_id_fk` FOREIGN KEY (`vpn_service_id`) REFERENCES `vpn_services`(id) );
[36m03:02:06.517 gohan.db DEBUG [0m Registering schema vpn_gateway
03:02:06.517 gohan.db.sql INFO [0m Creating table: create table `vpn_gateways` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`connected_vpn_interface`text not null,`description`text not null,`downlink_interface_id`varchar(255) null,`downlink_vlan_id`text null,`id`varchar(255) primary key,`local_as_number`text not null,`maximum_static_routes`numeric null,`name`text not null,`primary_logical_downlink_interface_name`text null,`primary_logical_uplink_interface_name`text null,`qos_option_id`varchar(255) not null,`secondary_logical_downlink_interface_name`text null,`secondary_logical_uplink_interface_name`text null,`status`text null,`tenant_id`text not null,`uplink_interface_id`varchar(255) null,`uplink_vlan_id`text not null,`vpn_service_id`varchar(255) not null,`vrf_name`text null,CONSTRAINT `vpn_gateway_downlink_interface_id_fk` FOREIGN KEY (`downlink_interface_id`) REFERENCES `ha_interfaces`(id) ,CONSTRAINT `vpn_gateway_qos_option_id_fk` FOREIGN KEY (`qos_option_id`) REFERENCES `qos_options`(id) ,CONSTRAINT `vpn_gateway_uplink_interface_id_fk` FOREIGN KEY (`uplink_interface_id`) REFERENCES `ha_interfaces`(id) ,CONSTRAINT `vpn_gateway_vpn_service_id_fk` FOREIGN KEY (`vpn_service_id`) REFERENCES `vpn_services`(id) );
[36m03:02:06.571 gohan.db DEBUG [0m Registering schema vpn_interface
03:02:06.571 gohan.db.sql INFO [0m Creating table: create table `vpn_interfaces` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`bgp_md5`text not null,`bgp_remote_as`text not null,`description`text not null,`id`varchar(255) primary key,`name`text not null,`primary`text not null,`secondary`text not null,`status`text null,`tenant_id`text not null,`vpn_gw_id`varchar(255) not null,CONSTRAINT `vpn_interface_vpn_gw_id_fk` FOREIGN KEY (`vpn_gw_id`) REFERENCES `vpn_gateways`(id) );
[36m03:02:06.589 gohan.db DEBUG [0m Registering schema aws_gateway
03:02:06.589 gohan.db.sql INFO [0m Creating table: create table `aws_gateways` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`aws_service_id`varchar(255) not null,`connected_aws_interface`text not null,`description`text not null,`downlink_interface_id`varchar(255) null,`downlink_vlan_id`text null,`id`varchar(255) primary key,`local_as_number`text not null,`maximum_static_routes`numeric null,`name`text not null,`primary_logical_downlink_interface_name`text null,`primary_logical_uplink_interface_name`text null,`qos_option_id`varchar(255) not null,`secondary_logical_downlink_interface_name`text null,`secondary_logical_uplink_interface_name`text null,`status`text null,`tenant_id`text not null,`uplink_interface_id`varchar(255) null,`uplink_vlan_id`text not null,`vrf_name`text null,CONSTRAINT `aws_gateway_aws_service_id_fk` FOREIGN KEY (`aws_service_id`) REFERENCES `aws_services`(id) ,CONSTRAINT `aws_gateway_downlink_interface_id_fk` FOREIGN KEY (`downlink_interface_id`) REFERENCES `ha_interfaces`(id) ,CONSTRAINT `aws_gateway_qos_option_id_fk` FOREIGN KEY (`qos_option_id`) REFERENCES `qos_options`(id) ,CONSTRAINT `aws_gateway_uplink_interface_id_fk` FOREIGN KEY (`uplink_interface_id`) REFERENCES `ha_interfaces`(id) );
[36m03:02:06.630 gohan.db DEBUG [0m Registering schema aws_interface
03:02:06.631 gohan.db.sql INFO [0m Creating table: create table `aws_interfaces` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`aws_gw_id`varchar(255) not null,`bgp_md5`text not null,`bgp_remote_as`text not null,`description`text not null,`id`varchar(255) primary key,`name`text not null,`primary`text not null,`secondary`text not null,`status`text null,`tenant_id`text not null,CONSTRAINT `aws_interface_aws_gw_id_fk` FOREIGN KEY (`aws_gw_id`) REFERENCES `aws_gateways`(id) );
[36m03:02:06.655 gohan.db DEBUG [0m Registering schema internet_gateway
03:02:06.655 gohan.db.sql INFO [0m Creating table: create table `internet_gateways` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`associated_uplink_id`varchar(255) null,`description`text not null,`downlink_interface_id`varchar(255) null,`id`varchar(255) primary key,`internet_service_id`varchar(255) not null,`maximum_static_routes`numeric null,`name`text not null,`primary_logical_interface_name`text null,`qos_option_id`varchar(255) not null,`secondary_logical_interface_name`text null,`status`text null,`tenant_id`text null,`vlan_id`text null,`vrf_name`text null,CONSTRAINT `internet_gateway_associated_uplink_id_fk` FOREIGN KEY (`associated_uplink_id`) REFERENCES `ha_interfaces`(id) ,CONSTRAINT `internet_gateway_downlink_interface_id_fk` FOREIGN KEY (`downlink_interface_id`) REFERENCES `ha_interfaces`(id) ,CONSTRAINT `internet_gateway_internet_service_id_fk` FOREIGN KEY (`internet_service_id`) REFERENCES `internet_services`(id) ,CONSTRAINT `internet_gateway_qos_option_id_fk` FOREIGN KEY (`qos_option_id`) REFERENCES `qos_options`(id) );
[36m03:02:06.727 gohan.db DEBUG [0m Registering schema common_function_gateway
03:02:06.727 gohan.db.sql INFO [0m Creating table: create table `common_function_gateways` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`common_function_pool_id`varchar(255) not null,`common_functions`text null,`description`text not null,`downlink_interface_id`varchar(255) null,`id`varchar(255) primary key,`logical_tunnel_unit_service`text null,`logical_tunnel_unit_user`text null,`name`text not null,`nat_ip`text null,`network_id`text null,`primary_logical_interface_name`text null,`secondary_logical_interface_name`text null,`status`text null,`subnet_id`text null,`tenant_id`text null,`vlan_id`text null,`vrf_name`text null,CONSTRAINT `common_function_gateway_common_function_pool_id_fk` FOREIGN KEY (`common_function_pool_id`) REFERENCES `common_function_pools`(id) ,CONSTRAINT `common_function_gateway_downlink_interface_id_fk` FOREIGN KEY (`downlink_interface_id`) REFERENCES `ha_interfaces`(id) );
[36m03:02:06.764 gohan.db DEBUG [0m Registering schema public_ip
03:02:06.764 gohan.db.sql INFO [0m Creating table: create table `public_ips` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`cidr`text not null,`description`text not null,`id`varchar(255) primary key,`internet_gw_id`varchar(255) not null,`ip_pool_id`varchar(255) null,`name`text not null,`status`text not null,`submask_length`numeric not null,`suspended_public_ip_id`varchar(255) null,`tenant_id`text null,CONSTRAINT `public_ip_internet_gw_id_fk` FOREIGN KEY (`internet_gw_id`) REFERENCES `internet_gateways`(id) ,CONSTRAINT `public_ip_ip_pool_id_fk` FOREIGN KEY (`ip_pool_id`) REFERENCES `public_ip_pools`(id) ,CONSTRAINT `public_ip_suspended_public_ip_id_fk` FOREIGN KEY (`suspended_public_ip_id`) REFERENCES `suspended_public_ips`(id) );
[36m03:02:06.802 gohan.db DEBUG [0m Registering schema interdc_gateway
03:02:06.802 gohan.db.sql INFO [0m Creating table: create table `interdc_gateways` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`description`text not null,`downlink_interface_id`varchar(255) null,`downlink_vlan_id`text null,`id`varchar(255) primary key,`interdc_service_id`varchar(255) not null,`maximum_static_routes`numeric null,`name`text not null,`primary_logical_downlink_interface_name`text null,`primary_logical_uplink_interface_name`text null,`qos_option_id`varchar(255) not null,`secondary_logical_downlink_interface_name`text null,`secondary_logical_uplink_interface_name`text null,`status`text null,`tenant_id`text not null,`uplink_interface_id`varchar(255) null,`uplink_vlan_id`text not null,`vrf_name`text null,CONSTRAINT `interdc_gateway_downlink_interface_id_fk` FOREIGN KEY (`downlink_interface_id`) REFERENCES `ha_interfaces`(id) ,CONSTRAINT `interdc_gateway_interdc_service_id_fk` FOREIGN KEY (`interdc_service_id`) REFERENCES `interdc_services`(id) ,CONSTRAINT `interdc_gateway_qos_option_id_fk` FOREIGN KEY (`qos_option_id`) REFERENCES `qos_options`(id) ,CONSTRAINT `interdc_gateway_uplink_interface_id_fk` FOREIGN KEY (`uplink_interface_id`) REFERENCES `ha_interfaces`(id) );
[36m03:02:06.844 gohan.db DEBUG [0m Registering schema interdc_interface
03:02:06.844 gohan.db.sql INFO [0m Creating table: create table `interdc_interfaces` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`description`text not null,`gw_vipv4`text not null,`gw_vipv6`text null,`id`varchar(255) primary key,`interdc_gw_id`varchar(255) not null unique,`name`text not null,`netmask`numeric not null,`primary_ipv4`text not null,`primary_ipv6`text null,`secondary_ipv4`text not null,`secondary_ipv6`text null,`status`text null,`tenant_id`text null,`vrid`numeric not null,CONSTRAINT `interdc_interface_interdc_gw_id_fk` FOREIGN KEY (`interdc_gw_id`) REFERENCES `interdc_gateways`(id) );
[36m03:02:06.865 gohan.db DEBUG [0m Registering schema gw_interface
03:02:06.865 gohan.db.sql INFO [0m Creating table: create table `gw_interfaces` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`aws_gw_id`varchar(255) null unique,`description`text not null,`gw_vipv4`text not null,`gw_vipv6`text null,`id`varchar(255) primary key,`interdc_gw_id`varchar(255) null unique,`internet_gw_id`varchar(255) null unique,`name`text not null,`netmask`numeric not null,`network_id`varchar(255) not null,`primary_ipv4`text not null,`primary_ipv6`text null,`public_ip_id`varchar(255) null,`secondary_ipv4`text not null,`secondary_ipv6`text null,`service_type`text not null,`status`text null,`tenant_id`text null,`vpn_gw_id`varchar(255) null unique,`vrid`numeric not null,CONSTRAINT `gw_interface_aws_gw_id_fk` FOREIGN KEY (`aws_gw_id`) REFERENCES `aws_gateways`(id) ,CONSTRAINT `gw_interface_interdc_gw_id_fk` FOREIGN KEY (`interdc_gw_id`) REFERENCES `interdc_gateways`(id) ,CONSTRAINT `gw_interface_internet_gw_id_fk` FOREIGN KEY (`internet_gw_id`) REFERENCES `internet_gateways`(id) ,CONSTRAINT `gw_interface_network_id_fk` FOREIGN KEY (`network_id`) REFERENCES `networks`(id) ,CONSTRAINT `gw_interface_public_ip_id_fk` FOREIGN KEY (`public_ip_id`) REFERENCES `public_ips`(id) ,CONSTRAINT `gw_interface_vpn_gw_id_fk` FOREIGN KEY (`vpn_gw_id`) REFERENCES `vpn_gateways`(id) );
[36m03:02:06.936 gohan.db DEBUG [0m Registering schema static_route
03:02:06.936 gohan.db.sql INFO [0m Creating table: create table `static_routes` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`aws_gw_id`varchar(255) null,`description`text not null,`destination`text not null,`id`varchar(255) primary key,`interdc_gw_id`varchar(255) null,`internet_gw_id`varchar(255) null,`name`text not null,`nexthop`text not null,`public_ip_id`varchar(255) null,`service_type`text not null,`status`text not null,`tenant_id`text null,`vpn_gw_id`varchar(255) null,CONSTRAINT `static_route_aws_gw_id_fk` FOREIGN KEY (`aws_gw_id`) REFERENCES `aws_gateways`(id) ,CONSTRAINT `static_route_interdc_gw_id_fk` FOREIGN KEY (`interdc_gw_id`) REFERENCES `interdc_gateways`(id) ,CONSTRAINT `static_route_internet_gw_id_fk` FOREIGN KEY (`internet_gw_id`) REFERENCES `internet_gateways`(id) ,CONSTRAINT `static_route_public_ip_id_fk` FOREIGN KEY (`public_ip_id`) REFERENCES `public_ips`(id) ,CONSTRAINT `static_route_vpn_gw_id_fk` FOREIGN KEY (`vpn_gw_id`) REFERENCES `vpn_gateways`(id) );
[36m03:02:06.986 gohan.db DEBUG [0m Registering schema vnf_template
03:02:06.987 gohan.db.sql INFO [0m Creating table: create table `vnf_templates` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`credentials`text not null,`description`text not null,`dummy_networks`text not null,`function`text not null,`id`varchar(255) primary key,`image`text not null,`init_config`text not null,`management_networks`text not null,`name`text not null,`security_group`text not null,`service_network_id`text null,`tenant_id`text null,`user_data_template`text not null,`vendor`text not null,`version`text not null);
[36m03:02:07.008 gohan.db DEBUG [0m Registering schema vnf_plan
03:02:07.008 gohan.db.sql INFO [0m Creating table: create table `vnf_plans` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`default_interface_number`numeric not null,`description`text not null,`flavor`text not null,`function`text not null,`id`varchar(255) primary key,`interface_limit`numeric not null,`name`text not null,`tenant_id`text null,`vendor`text not null);
[36m03:02:07.028 gohan.db DEBUG [0m Registering schema vnf_instance
03:02:07.029 gohan.db.sql INFO [0m Creating table: create table `vnf_instances` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`availability_zone`text null,`config_drive`boolean not null,`description`text null,`id`varchar(255) primary key,`management_ip`text null,`name`text null,`networks`text null,`owner_tenant_id`text null,`reboot`text not null,`status`text not null,`tenant_id`text null,`user_data`text not null,`user_data_format`text not null,`user_data_parameters`text not null,`vnf_plan_id`varchar(255) not null,`vnf_template_id`varchar(255) not null,CONSTRAINT `vnf_instance_vnf_plan_id_fk` FOREIGN KEY (`vnf_plan_id`) REFERENCES `vnf_plans`(id) ,CONSTRAINT `vnf_instance_vnf_template_id_fk` FOREIGN KEY (`vnf_template_id`) REFERENCES `vnf_templates`(id) );
[36m03:02:07.059 gohan.db DEBUG [0m Registering schema vnf_interface
03:02:07.059 gohan.db.sql INFO [0m Creating table: create table `vnf_interfaces` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`description`text null,`id`varchar(255) primary key,`ip_address`text null,`name`text null,`network_id`varchar(255) null,`port_id`varchar(255) null,`slot_number`numeric null,`status`text not null,`tenant_id`text null,`type`text null,`virtual_ip_address`text null,`virtual_ip_properties`text null,`vnf_instance_id`varchar(255) not null,CONSTRAINT `vnf_interface_network_id_fk` FOREIGN KEY (`network_id`) REFERENCES `networks`(id) ,CONSTRAINT `vnf_interface_port_id_fk` FOREIGN KEY (`port_id`) REFERENCES `ports`(id) ,CONSTRAINT `vnf_interface_vnf_instance_id_fk` FOREIGN KEY (`vnf_instance_id`) REFERENCES `vnf_instances`(id) );
[36m03:02:07.108 gohan.db DEBUG [0m Registering schema firewall_plan
03:02:07.108 gohan.db.sql INFO [0m Creating table: create table `firewall_plans` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`description`text not null,`enabled`boolean not null,`id`varchar(255) primary key,`is_public`boolean not null,`name`text not null,`tenant_id`text null,`vendor`text not null,`version`text not null,`vnf_plan_id`varchar(255) not null,`vnf_template_id`varchar(255) not null,CONSTRAINT `firewall_plan_vnf_plan_id_fk` FOREIGN KEY (`vnf_plan_id`) REFERENCES `vnf_plans`(id) ,CONSTRAINT `firewall_plan_vnf_template_id_fk` FOREIGN KEY (`vnf_template_id`) REFERENCES `vnf_templates`(id) );
[36m03:02:07.137 gohan.db DEBUG [0m Registering schema firewall
03:02:07.137 gohan.db.sql INFO [0m Creating table: create table `firewalls` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`admin_password`text not null,`admin_username`text not null,`availability_zone`text null,`default_gateway`text null,`description`text not null,`firewall_plan_id`varchar(255) not null,`id`varchar(255) primary key,`interfaces`text not null,`name`text not null,`networks`text not null,`other_password`text not null,`other_username`text not null,`status`text not null,`tenant_id`text null,`user_password`text not null,`user_username`text not null,`vnf_instance_id`varchar(255) null,CONSTRAINT `firewall_firewall_plan_id_fk` FOREIGN KEY (`firewall_plan_id`) REFERENCES `firewall_plans`(id) ,CONSTRAINT `firewall_vnf_instance_id_fk` FOREIGN KEY (`vnf_instance_id`) REFERENCES `vnf_instances`(id) );
[36m03:02:07.167 gohan.db DEBUG [0m Registering schema firewall_interface
03:02:07.167 gohan.db.sql INFO [0m Creating table: create table `firewall_interfaces` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`description`text null,`firewall_id`varchar(255) not null,`id`varchar(255) primary key,`ip_address`text null,`name`text null,`network_id`varchar(255) null,`slot_number`numeric not null,`status`text not null,`tenant_id`text null,`type`text null,`virtual_ip_address`text null,`virtual_ip_properties`text null,`vnf_interface_id`varchar(255) null,CONSTRAINT `firewall_interface_firewall_id_fk` FOREIGN KEY (`firewall_id`) REFERENCES `firewalls`(id) ,CONSTRAINT `firewall_interface_network_id_fk` FOREIGN KEY (`network_id`) REFERENCES `networks`(id) ,CONSTRAINT `firewall_interface_vnf_interface_id_fk` FOREIGN KEY (`vnf_interface_id`) REFERENCES `vnf_interfaces`(id) );
[36m03:02:07.213 gohan.db DEBUG [0m Registering schema load_balancer_plan
03:02:07.213 gohan.db.sql INFO [0m Creating table: create table `load_balancer_plans` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`description`text not null,`enabled`boolean not null,`id`varchar(255) primary key,`is_public`boolean not null,`license_code`text not null,`maximum_syslog_servers`numeric null,`model`text not null,`name`text not null,`tenant_id`text null,`vendor`text not null,`version`text not null,`vnf_plan_id`varchar(255) not null,`vnf_template_id`varchar(255) not null,CONSTRAINT `load_balancer_plan_vnf_plan_id_fk` FOREIGN KEY (`vnf_plan_id`) REFERENCES `vnf_plans`(id) ,CONSTRAINT `load_balancer_plan_vnf_template_id_fk` FOREIGN KEY (`vnf_template_id`) REFERENCES `vnf_templates`(id) );
[36m03:02:07.243 gohan.db DEBUG [0m Registering schema load_balancer_conf
03:02:07.244 gohan.db.sql INFO [0m Creating table: create table `load_balancer_confs` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`admin_password`text not null,`admin_username`text not null,`default_gateway`text null,`description`text not null,`id`varchar(255) primary key,`internet_port`text not null,`load_balancer_plan_id`varchar(255) not null,`management_gateway`text not null,`name`text not null,`networks`text not null,`other_password`text not null,`other_username`text not null,`status`text not null,`tenant_id`text null,`user_password`text not null,`user_username`text not null,`vnf_instance_id`varchar(255) null,CONSTRAINT `load_balancer_conf_load_balancer_plan_id_fk` FOREIGN KEY (`load_balancer_plan_id`) REFERENCES `load_balancer_plans`(id) ,CONSTRAINT `load_balancer_conf_vnf_instance_id_fk` FOREIGN KEY (`vnf_instance_id`) REFERENCES `vnf_instances`(id) );
[36m03:02:07.272 gohan.db DEBUG [0m Registering schema load_balancer
03:02:07.273 gohan.db.sql INFO [0m Creating table: create table `load_balancers` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`admin_password`text not null,`admin_username`text not null,`availability_zone`text null,`default_gateway`text null,`description`text not null,`id`varchar(255) primary key,`interfaces`text not null,`internet_port_id`varchar(255) null unique,`load_balancer_conf_id`varchar(255) null,`load_balancer_plan_id`varchar(255) not null,`name`text not null,`networks`text not null,`other_password`text not null,`other_username`text not null,`status`text not null,`syslog_servers`text not null,`tenant_id`text null,`user_password`text not null,`user_username`text not null,`vnf_instance_id`varchar(255) null,CONSTRAINT `load_balancer_load_balancer_conf_id_fk` FOREIGN KEY (`load_balancer_conf_id`) REFERENCES `load_balancer_confs`(id) ,CONSTRAINT `load_balancer_load_balancer_plan_id_fk` FOREIGN KEY (`load_balancer_plan_id`) REFERENCES `load_balancer_plans`(id) ,CONSTRAINT `load_balancer_vnf_instance_id_fk` FOREIGN KEY (`vnf_instance_id`) REFERENCES `vnf_instances`(id) );
[36m03:02:07.321 gohan.db DEBUG [0m Registering schema load_balancer_interface
03:02:07.322 gohan.db.sql INFO [0m Creating table: create table `load_balancer_interfaces` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`description`text null,`id`varchar(255) primary key,`ip_address`text null,`load_balancer_id`varchar(255) not null,`name`text null,`network_id`varchar(255) null,`slot_number`numeric not null,`status`text not null,`tenant_id`text null,`type`text null,`virtual_ip_address`text null,`virtual_ip_properties`text null,`vnf_interface_id`varchar(255) null,CONSTRAINT `load_balancer_interface_load_balancer_id_fk` FOREIGN KEY (`load_balancer_id`) REFERENCES `load_balancers`(id) ,CONSTRAINT `load_balancer_interface_network_id_fk` FOREIGN KEY (`network_id`) REFERENCES `networks`(id) ,CONSTRAINT `load_balancer_interface_vnf_interface_id_fk` FOREIGN KEY (`vnf_interface_id`) REFERENCES `vnf_interfaces`(id) );
[36m03:02:07.373 gohan.db DEBUG [0m Registering schema load_balancer_syslog_server
03:02:07.373 gohan.db.sql INFO [0m Creating table: create table `load_balancer_syslog_servers` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`acl_logging`text not null,`appflow_logging`text not null,`comment`text not null,`date_format`text not null,`description`text null,`id`varchar(255) primary key,`ip_address`text not null,`load_balancer_id`varchar(255) not null,`log_facility`text not null,`log_level`text not null,`name`text not null,`port_number`numeric not null,`priority`numeric not null,`status`text not null,`tcp_logging`text not null,`tenant_id`text null,`time_zone`text not null,`transport_type`text not null,`user_configurable_log_messages`text not null,`vserver_ip_address`text not null,`vserver_port_id`text not null,CONSTRAINT `load_balancer_syslog_server_load_balancer_id_fk` FOREIGN KEY (`load_balancer_id`) REFERENCES `load_balancers`(id) );
[36m03:02:07.393 gohan.db DEBUG [0m Registering schema billing_usage
03:02:07.393 gohan.db.sql INFO [0m Creating table: create table `billing_usages` (`id`varchar(255) primary key,`tenant_id`varchar(255) not null,CONSTRAINT `billing_usage_tenant_id_fk` FOREIGN KEY (`tenant_id`) REFERENCES `tenants`(id) );
[36m03:02:07.414 gohan.db DEBUG [0m Registering schema billing_resource
03:02:07.414 gohan.db.sql INFO [0m Creating table: create table `billing_resources` (`config_version`numeric null,`ended`numeric null,`id`varchar(255) primary key,`info`text not null,`parent_billing_id`varchar(255) null,`resource_id`text not null,`resource_type`text not null,`started`numeric null,`tenant_id`text not null,`unique_resource_id`varchar(255) null unique,CONSTRAINT `billing_resource_parent_billing_id_fk` FOREIGN KEY (`parent_billing_id`) REFERENCES `billing_resources`(id) );
[36m03:02:07.473 gohan.db DEBUG [0m Registering schema monitoring
03:02:07.473 gohan.db.sql INFO [0m Creating table: create table `monitorings` (`id`varchar(255) primary key);
[36m03:02:07.498 gohan.db DEBUG [0m Registering schema resource_mapping
03:02:07.498 gohan.db.sql INFO [0m Creating table: create table `resource_mappings` (`created`numeric null,`deleted`numeric null,`id`varchar(255) primary key,`mapped_id`text null,`relation`text null,`resource_id`text null,`resource_type`text null,`tenant_id`text null);
[36m03:02:07.520 gohan.db DEBUG [0m Registering schema colocation_space
03:02:07.520 gohan.db.sql INFO [0m Creating table: create table `colocation_spaces` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`connectable_device_ids`text not null,`description`text not null,`id`varchar(255) primary key,`name`text not null,`plane`text not null,`tenant_id`text null);
[36m03:02:07.541 gohan.db DEBUG [0m Registering schema colocation_physical_link
03:02:07.542 gohan.db.sql INFO [0m Creating table: create table `colocation_physical_links` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`admin_state_up`boolean not null,`bandwidth`text not null,`colocation_space_id`varchar(255) not null,`description`text not null,`id`varchar(255) primary key,`name`text not null,`plane`text null,`segmentation_ranges`text not null,`status`text null,`tags`text not null,`tenant_id`text not null,`type_a_cross_connect_id`text not null,`type_a_ese_physical_port_id`varchar(255) not null,`type_a_physical_port_id`varchar(255) null,`type_a_rack_id`text not null,`type_b_cross_connect_id`text not null,`type_b_ese_physical_port_id`varchar(255) not null,`type_b_physical_port_id`varchar(255) null,`type_b_rack_id`text not null,CONSTRAINT `colocation_physical_link_colocation_space_id_fk` FOREIGN KEY (`colocation_space_id`) REFERENCES `colocation_spaces`(id) ,CONSTRAINT `colocation_physical_link_type_a_ese_physical_port_id_fk` FOREIGN KEY (`type_a_ese_physical_port_id`) REFERENCES `ese_physical_ports`(id) ,CONSTRAINT `colocation_physical_link_type_a_physical_port_id_fk` FOREIGN KEY (`type_a_physical_port_id`) REFERENCES `physical_ports`(id) ,CONSTRAINT `colocation_physical_link_type_b_ese_physical_port_id_fk` FOREIGN KEY (`type_b_ese_physical_port_id`) REFERENCES `ese_physical_ports`(id) ,CONSTRAINT `colocation_physical_link_type_b_physical_port_id_fk` FOREIGN KEY (`type_b_physical_port_id`) REFERENCES `physical_ports`(id) );
[36m03:02:07.594 gohan.db DEBUG [0m Registering schema colocation_logical_link
03:02:07.595 gohan.db.sql INFO [0m Creating table: create table `colocation_logical_links` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`colocation_physical_link_id`varchar(255) not null,`description`text not null,`id`varchar(255) primary key,`name`text not null,`network_id`varchar(255) not null,`status`text null,`tags`text not null,`tenant_id`text null,`type_a_port_id`varchar(255) null,`type_b_port_id`varchar(255) null,`vlan_id`numeric not null,CONSTRAINT `colocation_logical_link_colocation_physical_link_id_fk` FOREIGN KEY (`colocation_physical_link_id`) REFERENCES `colocation_physical_links`(id) ,CONSTRAINT `colocation_logical_link_network_id_fk` FOREIGN KEY (`network_id`) REFERENCES `networks`(id) ,CONSTRAINT `colocation_logical_link_type_a_port_id_fk` FOREIGN KEY (`type_a_port_id`) REFERENCES `ports`(id) ,CONSTRAINT `colocation_logical_link_type_b_port_id_fk` FOREIGN KEY (`type_b_port_id`) REFERENCES `ports`(id) );
[36m03:02:07.650 gohan.db DEBUG [0m Registering schema tenant_connection
03:02:07.650 gohan.db.sql INFO [0m Creating table: create table `tenant_connections` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`approval_request_id`text not null,`connected_interface`text not null,`connected_network`text not null,`description`text not null,`id`varchar(255) primary key,`interface_type`text not null,`name`text not null,`progress`text not null,`request_keystone_user_id`text null,`tenant_id`text null);
[36m03:02:07.670 gohan.db DEBUG [0m Registering schema hosting_physical_link
03:02:07.670 gohan.db.sql INFO [0m Creating table: create table `hosting_physical_links` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`admin_state_up`boolean not null,`bandwidth`text not null,`colocation_space_id`varchar(255) not null,`description`text not null,`id`varchar(255) primary key,`name`text not null,`plane`text null,`segmentation_ranges`text not null,`status`text null,`tags`text not null,`tenant_id`text not null,`type_a_cross_connect_id`text not null,`type_a_ese_physical_port_id`varchar(255) not null,`type_a_physical_port_id`varchar(255) null,`type_a_rack_id`text not null,`type_b_cross_connect_id`text not null,`type_b_ese_physical_port_id`varchar(255) not null,`type_b_physical_port_id`varchar(255) null,`type_b_rack_id`text not null,CONSTRAINT `hosting_physical_link_colocation_space_id_fk` FOREIGN KEY (`colocation_space_id`) REFERENCES `colocation_spaces`(id) ,CONSTRAINT `hosting_physical_link_type_a_ese_physical_port_id_fk` FOREIGN KEY (`type_a_ese_physical_port_id`) REFERENCES `ese_physical_ports`(id) ,CONSTRAINT `hosting_physical_link_type_a_physical_port_id_fk` FOREIGN KEY (`type_a_physical_port_id`) REFERENCES `physical_ports`(id) ,CONSTRAINT `hosting_physical_link_type_b_ese_physical_port_id_fk` FOREIGN KEY (`type_b_ese_physical_port_id`) REFERENCES `ese_physical_ports`(id) ,CONSTRAINT `hosting_physical_link_type_b_physical_port_id_fk` FOREIGN KEY (`type_b_physical_port_id`) REFERENCES `physical_ports`(id) );
[36m03:02:07.769 gohan.db DEBUG [0m Registering schema hosting_logical_link
03:02:07.769 gohan.db.sql INFO [0m Creating table: create table `hosting_logical_links` (`config_version`int not null default 1,`state_version`int not null default 0,`monitoring_version`int not null default 0,`state_error`text not null default '',`state`text not null default '',`state_monitoring`text not null default '',`marked_for_deletion`int not null default 0,`description`text not null,`hosting_physical_link_id`varchar(255) not null,`id`varchar(255) primary key,`name`text not null,`network_id`varchar(255) not null,`status`text null,`tags`text not null,`tenant_id`text null,`type_a_port_id`varchar(255) null,`type_b_port_id`varchar(255) null,`vlan_id`numeric not null,CONSTRAINT `hosting_logical_link_hosting_physical_link_id_fk` FOREIGN KEY (`hosting_physical_link_id`) REFERENCES `hosting_physical_links`(id) ,CONSTRAINT `hosting_logical_link_network_id_fk` FOREIGN KEY (`network_id`) REFERENCES `networks`(id) ,CONSTRAINT `hosting_logical_link_type_a_port_id_fk` FOREIGN KEY (`type_a_port_id`) REFERENCES `ports`(id) ,CONSTRAINT `hosting_logical_link_type_b_port_id_fk` FOREIGN KEY (`type_b_port_id`) REFERENCES `ports`(id) );
03:02:07.815 gohan.server.core INFO [0m Importing data from ./init/heat_templates.yaml ...
03:02:07.818 gohan.db INFO [0m Populating resources for schema schema
03:02:07.834 gohan.db INFO [0m Populating resources for schema policy
03:02:07.838 gohan.db INFO [0m Populating resources for schema extension
03:02:07.842 gohan.db INFO [0m Populating resources for schema event
03:02:07.846 gohan.db INFO [0m Populating resources for schema namespace
03:02:07.848 gohan.db INFO [0m Populating resources for schema location
03:02:07.851 gohan.db INFO [0m Populating resources for schema ese_device
03:02:07.854 gohan.db INFO [0m Populating resources for schema network
03:02:07.857 gohan.db INFO [0m Populating resources for schema subnet
03:02:07.859 gohan.db INFO [0m Populating resources for schema port
03:02:07.861 gohan.db INFO [0m Populating resources for schema ese_physical_port
03:02:07.864 gohan.db INFO [0m Populating resources for schema ese_logical_port
03:02:07.866 gohan.db INFO [0m Populating resources for schema local_subnet
03:02:07.869 gohan.db INFO [0m Populating resources for schema server
03:02:07.872 gohan.db INFO [0m Populating resources for schema physical_port
03:02:07.875 gohan.db INFO [0m Populating resources for schema quota
03:02:07.879 gohan.db INFO [0m Populating resources for schema reserve_address
03:02:07.881 gohan.db INFO [0m Populating resources for schema neutron_extension
03:02:07.883 gohan.db INFO [0m Populating resources for schema heat_template
03:02:07.886 gohan.db INFO [0m Creating resource network
03:02:07.886 gohan.db.sql INFO [0m Executing SQL query in transaction '6894f62f-4af1-4a83-be28-3dbd18f9a7e1': 'INSERT INTO `heat_templates` (`parameter_mappings`,`template_file`,`watch`,`handler`,`id`) VALUES ({"admin_state_up":"Padmin_state_up","name":"Pid","uuid":"Pid"},heat_template_version: 2013-05-23

description: >
  Network template

parameters:
  uuid:
    type: string
    label: Virtual Network UUID
    description: UUID of the virtual network that will be created.
    default: ""
  name:
    type: string
    label: Virtual Network Name
    description: Name of the virtual network that will be created.
  forwarding_mode:
    type: string
    label: Forwarding Mode
    description: Forwarding Mode.
    default: 'l2_l3'
  route_targets:
    type: comma_delimited_list
    label: Route Targets list
    default: []
  shared:
    type: boolean
    label: Shared Network
    default: false
  external:
    type: boolean
    label: External Network
    default: true
  allow_transit:
    type: boolean
    label: Allow Transit
    default: false
  admin_state_up:
    type: boolean
    label: Admin state up
    default: true

resources:
  network:
    type: OS::Contrail::VirtualNetwork
    properties:
      uuid: { get_param: uuid }
      name: { get_param: name }
      forwarding_mode: { get_param: forwarding_mode }
      route_targets: { get_param: route_targets }
      shared: { get_param: shared }
      admin_state_up: { get_param: admin_state_up }

outputs:
  id:
    description: A unique id for the virtual network.
    value: { get_resource: network }
  name:
    description: The name of the virtual network.
    value: { get_attr: [network, name] }
  fq_name:
    description: The FQ name of the virtual network.
    value: { get_attr: [network, fq_name] }
  route_targets:
    description: The name of the virtual network.
    value: { get_attr: [network, route_targets] }
,[],heat_worker,network)'
03:02:07.887 gohan.db.sql INFO [0m Executing SQL query in transaction '6894f62f-4af1-4a83-be28-3dbd18f9a7e1': 'INSERT INTO `events` (`body`,`version`,`path`,`timestamp`,`type`,`marked_for_deletion`) VALUES ("{\"handler\":\"heat_worker\",\"id\":\"network\",\"parameter_mappings\":{\"admin_state_up\":\"Padmin_state_up\",\"name\":\"Pid\",\"uuid\":\"Pid\"},\"template_file\":\"heat_template_version: 2013-05-23\\n\\ndescription: \\u003e\\n  Network template\\n\\nparameters:\\n  uuid:\\n    type: string\\n    label: Virtual Network UUID\\n    description: UUID of the virtual network that will be created.\\n    default: \\\"\\\"\\n  name:\\n    type: string\\n    label: Virtual Network Name\\n    description: Name of the virtual network that will be created.\\n  forwarding_mode:\\n    type: string\\n    label: Forwarding Mode\\n    description: Forwarding Mode.\\n    default: 'l2_l3'\\n  route_targets:\\n    type: comma_delimited_list\\n    label: Route Targets list\\n    default: []\\n  shared:\\n    type: boolean\\n    label: Shared Network\\n    default: false\\n  external:\\n    type: boolean\\n    label: External Network\\n    default: true\\n  allow_transit:\\n    type: boolean\\n    label: Allow Transit\\n    default: false\\n  admin_state_up:\\n    type: boolean\\n    label: Admin state up\\n    default: true\\n\\nresources:\\n  network:\\n    type: OS::Contrail::VirtualNetwork\\n    properties:\\n      uuid: { get_param: uuid }\\n      name: { get_param: name }\\n      forwarding_mode: { get_param: forwarding_mode }\\n      route_targets: { get_param: route_targets }\\n      shared: { get_param: shared }\\n      admin_state_up: { get_param: admin_state_up }\\n\\noutputs:\\n  id:\\n    description: A unique id for the virtual network.\\n    value: { get_resource: network }\\n  name:\\n    description: The name of the virtual network.\\n    value: { get_attr: [network, name] }\\n  fq_name:\\n    description: The FQ name of the virtual network.\\n    value: { get_attr: [network, fq_name] }\\n  route_targets:\\n    description: The name of the virtual network.\\n    value: { get_attr: [network, route_targets] }\\n\",\"watch\":[]}",1,/v2.0/heat_templates/network,1494471727,create,false)'
03:02:07.889 gohan.db INFO [0m Creating resource subnet
03:02:07.889 gohan.db.sql INFO [0m Executing SQL query in transaction '6894f62f-4af1-4a83-be28-3dbd18f9a7e1': 'INSERT INTO `heat_templates` (`id`,`parameter_mappings`,`template_file`,`watch`,`handler`) VALUES (subnet,{"allocation_pools":"Pallocation_pools","cidr":"Pcidr","dhcp_server_address":"Pdhcp_server_address","dns_nameservers":"Pdns_nameservers","enable_dhcp":"Penable_dhcp","gateway_ip":"Pgateway_ip","host_routes":"Phost_routes","ipam":"Cdefault-domain:default-project:default-network-ipam","name":"Pid","network_id":"Mnetwork:network_id:id","ntp_servers":"Pntp_servers"},heat_template_version: 2013-05-23

description: >
  Subnet template

parameters:
  name:
    type: string
    label: Local Subnet Name
    description: Name of the local subnet that will be created.
  network_id:
    type: string
    label: Network ID
    description: ID of the network for which subnet will be created.
  cidr:
    type: string
    label: Local Subnet IP prefix
    description: IP prefix of the local subnet that will be created.
  gateway_ip:
    default: "0.0.0.0"
    type: string
    label: Default Gateway
    description: Default gateway for the local subnet that will be created.
  ipam:
    type: string
    label: IP Address Management
    description: IPAM for the local subnet that will be created.
    default: ''
  enable_dhcp:
    type: boolean
    label: Enable DHCP
    description: Enable DHCP
    default: true
  dhcp_server_address:
    type: string
    label: DHCP Server address
    description: DHCP Server address
    default: "0.0.0.0"
  allocation_pools:
    type: string
    label: Allocation Pools
    description: Allocation Pools
    default: []
  dns_nameservers:
    type: comma_delimited_list
    label: DNS Nameservers List
    description: DNS Nameservers List
    default: []
  ntp_servers:
    type: comma_delimited_list
    label: NTP Nameservers List
    description: NTP Nameservers List
    default: []
  host_routes:
    type: json
    label: Host Routes
    description: Host Routes
    default: []

resources:
  subnet:
    type: OS::Contrail::VnSubnet
    properties:
      name: { get_param: name }
      network_id: { get_param: network_id }
      ip_prefix: { get_param: cidr }
      default_gateway: { get_param: gateway_ip }
      ipam: { get_param: ipam }
      enable_dhcp: { get_param: enable_dhcp }
      dns_server_address: { get_param: dhcp_server_address }
      dns_nameservers: { get_param: dns_nameservers }
      ntp_servers: { get_param: ntp_servers }
      host_routes: { get_param: host_routes }
      allocation_pools: { get_param: allocation_pools }
      gateway_is_vrouter: false

outputs:
  id:
    description: A unique id for the local subnet.
    value: { get_resource: subnet }
  name:
    description: The name of the local subnet.
    value: { get_attr: [subnet, name] }
  network_id:
    description: A unique id for the network.
    value: { get_attr: [subnet, network_id] }
  ip_prefix:
    description: IP prefix of local subnet.
    value: { get_attr: [subnet, ip_prefix] }
  default_gateway:
    description: Default gateway of local subnet.
    value: { get_attr: [subnet, default_gateway] }
  ipam:
    description: IPAM this local subnet uses.
    value: { get_attr: [subnet, ipam] }
,[],heat_worker)'
03:02:07.890 gohan.db.sql INFO [0m Executing SQL query in transaction '6894f62f-4af1-4a83-be28-3dbd18f9a7e1': 'INSERT INTO `events` (`body`,`version`,`path`,`timestamp`,`type`,`marked_for_deletion`) VALUES ("{\"handler\":\"heat_worker\",\"id\":\"subnet\",\"parameter_mappings\":{\"allocation_pools\":\"Pallocation_pools\",\"cidr\":\"Pcidr\",\"dhcp_server_address\":\"Pdhcp_server_address\",\"dns_nameservers\":\"Pdns_nameservers\",\"enable_dhcp\":\"Penable_dhcp\",\"gateway_ip\":\"Pgateway_ip\",\"host_routes\":\"Phost_routes\",\"ipam\":\"Cdefault-domain:default-project:default-network-ipam\",\"name\":\"Pid\",\"network_id\":\"Mnetwork:network_id:id\",\"ntp_servers\":\"Pntp_servers\"},\"template_file\":\"heat_template_version: 2013-05-23\\n\\ndescription: \\u003e\\n  Subnet template\\n\\nparameters:\\n  name:\\n    type: string\\n    label: Local Subnet Name\\n    description: Name of the local subnet that will be created.\\n  network_id:\\n    type: string\\n    label: Network ID\\n    description: ID of the network for which subnet will be created.\\n  cidr:\\n    type: string\\n    label: Local Subnet IP prefix\\n    description: IP prefix of the local subnet that will be created.\\n  gateway_ip:\\n    default: \\\"0.0.0.0\\\"\\n    type: string\\n    label: Default Gateway\\n    description: Default gateway for the local subnet that will be created.\\n  ipam:\\n    type: string\\n    label: IP Address Management\\n    description: IPAM for the local subnet that will be created.\\n    default: ''\\n  enable_dhcp:\\n    type: boolean\\n    label: Enable DHCP\\n    description: Enable DHCP\\n    default: true\\n  dhcp_server_address:\\n    type: string\\n    label: DHCP Server address\\n    description: DHCP Server address\\n    default: \\\"0.0.0.0\\\"\\n  allocation_pools:\\n    type: string\\n    label: Allocation Pools\\n    description: Allocation Pools\\n    default: []\\n  dns_nameservers:\\n    type: comma_delimited_list\\n    label: DNS Nameservers List\\n    description: DNS Nameservers List\\n    default: []\\n  ntp_servers:\\n    type: comma_delimited_list\\n    label: NTP Nameservers List\\n    description: NTP Nameservers List\\n    default: []\\n  host_routes:\\n    type: json\\n    label: Host Routes\\n    description: Host Routes\\n    default: []\\n\\nresources:\\n  subnet:\\n    type: OS::Contrail::VnSubnet\\n    properties:\\n      name: { get_param: name }\\n      network_id: { get_param: network_id }\\n      ip_prefix: { get_param: cidr }\\n      default_gateway: { get_param: gateway_ip }\\n      ipam: { get_param: ipam }\\n      enable_dhcp: { get_param: enable_dhcp }\\n      dns_server_address: { get_param: dhcp_server_address }\\n      dns_nameservers: { get_param: dns_nameservers }\\n      ntp_servers: { get_param: ntp_servers }\\n      host_routes: { get_param: host_routes }\\n      allocation_pools: { get_param: allocation_pools }\\n      gateway_is_vrouter: false\\n\\noutputs:\\n  id:\\n    description: A unique id for the local subnet.\\n    value: { get_resource: subnet }\\n  name:\\n    description: The name of the local subnet.\\n    value: { get_attr: [subnet, name] }\\n  network_id:\\n    description: A unique id for the network.\\n    value: { get_attr: [subnet, network_id] }\\n  ip_prefix:\\n    description: IP prefix of local subnet.\\n    value: { get_attr: [subnet, ip_prefix] }\\n  default_gateway:\\n    description: Default gateway of local subnet.\\n    value: { get_attr: [subnet, default_gateway] }\\n  ipam:\\n    description: IPAM this local subnet uses.\\n    value: { get_attr: [subnet, ipam] }\\n\",\"watch\":[]}",1,/v2.0/heat_templates/subnet,1494471727,create,false)'
03:02:07.891 gohan.db INFO [0m Creating resource port
03:02:07.891 gohan.db.sql INFO [0m Executing SQL query in transaction '6894f62f-4af1-4a83-be28-3dbd18f9a7e1': 'INSERT INTO `heat_templates` (`template_file`,`watch`,`handler`,`id`,`parameter_mappings`) VALUES (heat_template_version: 2013-05-23

description: >
  Virtual Machine Interface Template

parameters:
  uuid:
    type: string
    label: Backend Virtual Machine Interface UUID
    description: A unique id for the Virtual Machine Interface.
  name:
    type: string
    label: Physical Interface ID
    description: A unique id for the Physical Interface.
  virtual_machine_interface_allowed_address_pairs:
    type: json
    label: Virtual machine interface allowed address pairs.
  virtual_machine_interface_mac_address:
    type: string
    default: "fe:ff:ff:ff:ff:ff"
    label: Virtual machine interface mac address.
  virtual_network:
    type: string
    label: Virtual Network.
  virtual_machine:
    type: string
    label: Virtual Machine.
    default: ""
  device_owner:
    type: string
    label: Device Owner
    default: ""
  admin_state_up:
    type: boolean
    label: Admin state up
    default: true

resources:
  virtual_machine_interface:
    type: OS::Contrail::VirtualMachineInterface
    properties:
      uuid: { get_param: uuid }
      name: { get_param: name }
      virtual_machine_interface_allowed_address_pairs: { get_param: virtual_machine_interface_allowed_address_pairs }
      virtual_machine_interface_mac_addresses: [ { get_param: virtual_machine_interface_mac_address } ]
      virtual_networks: [ { get_param: virtual_network } ]
      virtual_machine: { get_param: virtual_machine }
      device_owner: { get_param: device_owner }
      admin_state_up: { get_param: admin_state_up }

{% for fixed_ip in jinja_fixed_ips %}
{% set instance_ip_id = 'instance_ip_' + (loop.index0|string) %}
  {{ instance_ip_id }}:
    type: OS::Contrail::InstanceIp
    properties:
      name:
        str_replace:
          template: '%name%_%zone%_%ip%'
          params:
            "%name%": { get_param: name }
            "%zone%": {{ fixed_ip.subnet_id }}
            "%ip%": {{ fixed_ip.ip_address }}
      ip_address: {{ fixed_ip.ip_address }}
      subnet_id: {{ jinja_subnets[loop.index0] }}
      network_id: { get_param: virtual_network }
      virtual_machine_interfaces: [ { get_resource: virtual_machine_interface } ]
{% endfor %}

outputs:
  id:
    description: A unique id for the virtual machine interface.
    value: { get_resource: virtual_machine_interface }
  mac_address:
    description: Virtual machine interface mac address.
    value: { get_attr: [virtual_machine_interface, virtual_machine_interface_mac_addresses] }
  allowed_address_pairs:
    description: Virtual machine allowed address pairs.
    value: { get_attr: [virtual_machine_interface, virtual_machine_interface_allowed_address_pairs] }
  virtual_network:
    description: Virtual network.
    value: { get_attr: [virtual_machine_interface, virtual_networks] }
  fq_name:
    description: Fully Qualified Name of the VMI
    value: { get_attr: [virtual_machine_interface, fq_name] }
,[],heat_worker,port,{"admin_state_up":"Padmin_state_up","device_owner":"Pdevice_owner","jinja_fixed_ips":"Pfixed_ips","jinja_force_dependency_cfg":{"else_mapping":{"constant":null},"if_mapping":{"equal":[{"field":"device_owner"},{"constant":"network:common_function_gateway"}]},"then_mapping":{"field":"id","ignore_missing":true,"path":[{"id":"device_id","type":"common_function_gateway"}]}},"jinja_force_dependency_gw_interface":{"else_mapping":{"constant":null},"if_mapping":{"equal":[{"field":"device_owner"},{"constant":"network:gw_interface"}]},"then_mapping":{"field":"id","path":[{"id":"device_id","type":"gw_interface"}]}},"jinja_subnets":{"for_field":"fixed_ips","for_mapping":{"output_key":"id","path":[{"id":"subnet_id","type":"subnet"}]}},"name":"Pid","uuid":"Pid","virtual_machine":"Pdevice_id","virtual_machine_interface_allowed_address_pairs":"Pallowed_address_pairs","virtual_machine_interface_mac_address":"Pmac_address","virtual_network":"Mnetwork:network_id:id"})'
03:02:07.892 gohan.db.sql INFO [0m Executing SQL query in transaction '6894f62f-4af1-4a83-be28-3dbd18f9a7e1': 'INSERT INTO `events` (`version`,`path`,`timestamp`,`type`,`marked_for_deletion`,`body`) VALUES (1,/v2.0/heat_templates/port,1494471727,create,false,"{\"handler\":\"heat_worker\",\"id\":\"port\",\"parameter_mappings\":{\"admin_state_up\":\"Padmin_state_up\",\"device_owner\":\"Pdevice_owner\",\"jinja_fixed_ips\":\"Pfixed_ips\",\"jinja_force_dependency_cfg\":{\"else_mapping\":{\"constant\":null},\"if_mapping\":{\"equal\":[{\"field\":\"device_owner\"},{\"constant\":\"network:common_function_gateway\"}]},\"then_mapping\":{\"field\":\"id\",\"ignore_missing\":true,\"path\":[{\"id\":\"device_id\",\"type\":\"common_function_gateway\"}]}},\"jinja_force_dependency_gw_interface\":{\"else_mapping\":{\"constant\":null},\"if_mapping\":{\"equal\":[{\"field\":\"device_owner\"},{\"constant\":\"network:gw_interface\"}]},\"then_mapping\":{\"field\":\"id\",\"path\":[{\"id\":\"device_id\",\"type\":\"gw_interface\"}]}},\"jinja_subnets\":{\"for_field\":\"fixed_ips\",\"for_mapping\":{\"output_key\":\"id\",\"path\":[{\"id\":\"subnet_id\",\"type\":\"subnet\"}]}},\"name\":\"Pid\",\"uuid\":\"Pid\",\"virtual_machine\":\"Pdevice_id\",\"virtual_machine_interface_allowed_address_pairs\":\"Pallowed_address_pairs\",\"virtual_machine_interface_mac_address\":\"Pmac_address\",\"virtual_network\":\"Mnetwork:network_id:id\"},\"template_file\":\"heat_template_version: 2013-05-23\\n\\ndescription: \\u003e\\n  Virtual Machine Interface Template\\n\\nparameters:\\n  uuid:\\n    type: string\\n    label: Backend Virtual Machine Interface UUID\\n    description: A unique id for the Virtual Machine Interface.\\n  name:\\n    type: string\\n    label: Physical Interface ID\\n    description: A unique id for the Physical Interface.\\n  virtual_machine_interface_allowed_address_pairs:\\n    type: json\\n    label: Virtual machine interface allowed address pairs.\\n  virtual_machine_interface_mac_address:\\n    type: string\\n    default: \\\"fe:ff:ff:ff:ff:ff\\\"\\n    label: Virtual machine interface mac address.\\n  virtual_network:\\n    type: string\\n    label: Virtual Network.\\n  virtual_machine:\\n    type: string\\n    label: Virtual Machine.\\n    default: \\\"\\\"\\n  device_owner:\\n    type: string\\n    label: Device Owner\\n    default: \\\"\\\"\\n  admin_state_up:\\n    type: boolean\\n    label: Admin state up\\n    default: true\\n\\nresources:\\n  virtual_machine_interface:\\n    type: OS::Contrail::VirtualMachineInterface\\n    properties:\\n      uuid: { get_param: uuid }\\n      name: { get_param: name }\\n      virtual_machine_interface_allowed_address_pairs: { get_param: virtual_machine_interface_allowed_address_pairs }\\n      virtual_machine_interface_mac_addresses: [ { get_param: virtual_machine_interface_mac_address } ]\\n      virtual_networks: [ { get_param: virtual_network } ]\\n      virtual_machine: { get_param: virtual_machine }\\n      device_owner: { get_param: device_owner }\\n      admin_state_up: { get_param: admin_state_up }\\n\\n{% for fixed_ip in jinja_fixed_ips %}\\n{% set instance_ip_id = 'instance_ip_' + (loop.index0|string) %}\\n  {{ instance_ip_id }}:\\n    type: OS::Contrail::InstanceIp\\n    properties:\\n      name:\\n        str_replace:\\n          template: '%name%_%zone%_%ip%'\\n          params:\\n            \\\"%name%\\\": { get_param: name }\\n            \\\"%zone%\\\": {{ fixed_ip.subnet_id }}\\n            \\\"%ip%\\\": {{ fixed_ip.ip_address }}\\n      ip_address: {{ fixed_ip.ip_address }}\\n      subnet_id: {{ jinja_subnets[loop.index0] }}\\n      network_id: { get_param: virtual_network }\\n      virtual_machine_interfaces: [ { get_resource: virtual_machine_interface } ]\\n{% endfor %}\\n\\noutputs:\\n  id:\\n    description: A unique id for the virtual machine interface.\\n    value: { get_resource: virtual_machine_interface }\\n  mac_address:\\n    description: Virtual machine interface mac address.\\n    value: { get_attr: [virtual_machine_interface, virtual_machine_interface_mac_addresses] }\\n  allowed_address_pairs:\\n    description: Virtual machine allowed address pairs.\\n    value: { get_attr: [virtual_machine_interface, virtual_machine_interface_allowed_address_pairs] }\\n  virtual_network:\\n    description: Virtual network.\\n    value: { get_attr: [virtual_machine_interface, virtual_networks] }\\n  fq_name:\\n    description: Fully Qualified Name of the VMI\\n    value: { get_attr: [virtual_machine_interface, fq_name] }\\n\",\"watch\":[]}")'
03:02:07.893 gohan.db INFO [0m Creating resource ese_physical_port_existing
03:02:07.894 gohan.db.sql INFO [0m Executing SQL query in transaction '6894f62f-4af1-4a83-be28-3dbd18f9a7e1': 'INSERT INTO `heat_templates` (`watch`,`handler`,`id`,`parameter_mappings`,`template_file`) VALUES ([],heat_worker,ese_physical_port_existing,{"physical_device_hostname":"Fese_device+ese_device_id:hostname","physical_port_name":"Pname"},heat_template_version: 2013-05-23

description: >
  Physical port template

parameters:
  physical_device_hostname:
    type: string
    label: Physical Device Hostname
    description: Hostname of the physical device on which physical port will be created.
  physical_port_name:
    type: string
    label: Physical Interface Name
    description: Name of the physical port.

resources:
  physical_interface:
    type: OS::Contrail::ExistingResource
    properties:
      fq_name:
        - "default-global-system-config"
        - { get_param: physical_device_hostname }
        - { get_param: physical_port_name }
      resource_type: "physical_interface"

outputs:
  id:
    description: A unique id for the physical interface
    value: { get_resource: physical_interface }
  name:
    description: The name of the physical interface.
    value: { get_attr: [physical_interface, name] }
)'
03:02:07.894 gohan.db.sql INFO [0m Executing SQL query in transaction '6894f62f-4af1-4a83-be28-3dbd18f9a7e1': 'INSERT INTO `events` (`body`,`version`,`path`,`timestamp`,`type`,`marked_for_deletion`) VALUES ("{\"handler\":\"heat_worker\",\"id\":\"ese_physical_port_existing\",\"parameter_mappings\":{\"physical_device_hostname\":\"Fese_device+ese_device_id:hostname\",\"physical_port_name\":\"Pname\"},\"template_file\":\"heat_template_version: 2013-05-23\\n\\ndescription: \\u003e\\n  Physical port template\\n\\nparameters:\\n  physical_device_hostname:\\n    type: string\\n    label: Physical Device Hostname\\n    description: Hostname of the physical device on which physical port will be created.\\n  physical_port_name:\\n    type: string\\n    label: Physical Interface Name\\n    description: Name of the physical port.\\n\\nresources:\\n  physical_interface:\\n    type: OS::Contrail::ExistingResource\\n    properties:\\n      fq_name:\\n        - \\\"default-global-system-config\\\"\\n        - { get_param: physical_device_hostname }\\n        - { get_param: physical_port_name }\\n      resource_type: \\\"physical_interface\\\"\\n\\noutputs:\\n  id:\\n    description: A unique id for the physical interface\\n    value: { get_resource: physical_interface }\\n  name:\\n    description: The name of the physical interface.\\n    value: { get_attr: [physical_interface, name] }\\n\",\"watch\":[]}",1,/v2.0/heat_templates/ese_physical_port_existing,1494471727,create,false)'
03:02:07.895 gohan.db INFO [0m Creating resource ese_physical_port_new
03:02:07.895 gohan.db.sql INFO [0m Executing SQL query in transaction '6894f62f-4af1-4a83-be28-3dbd18f9a7e1': 'INSERT INTO `heat_templates` (`parameter_mappings`,`template_file`,`watch`,`handler`,`id`) VALUES ({"physical_device":"Mese_device:ese_device_id:id","physical_port_name":"Pname"},heat_template_version: 2013-05-23

description: >
  Physical port template

parameters:
  physical_device:
    type: string
    label: Physical Device Id
    description: Id of the physical device on which physical port will be created.
  physical_port_name:
    type: string
    label: Physical Interface Name
    description: Name of the physical port.

resources:
  physical_interface:
    type: OS::Contrail::PhysicalInterface
    properties:
      name: { get_param: physical_port_name }
      physical_router: { get_param: physical_device }

outputs:
  id:
    description: A unique id for the physical interface
    value: { get_resource: physical_interface }
  name:
    description: The name of the physical interface.
    value: { get_attr: [physical_interface, name] }
,[],heat_worker,ese_physical_port_new)'
03:02:07.896 gohan.db.sql INFO [0m Executing SQL query in transaction '6894f62f-4af1-4a83-be28-3dbd18f9a7e1': 'INSERT INTO `events` (`path`,`timestamp`,`type`,`marked_for_deletion`,`body`,`version`) VALUES (/v2.0/heat_templates/ese_physical_port_new,1494471727,create,false,"{\"handler\":\"heat_worker\",\"id\":\"ese_physical_port_new\",\"parameter_mappings\":{\"physical_device\":\"Mese_device:ese_device_id:id\",\"physical_port_name\":\"Pname\"},\"template_file\":\"heat_template_version: 2013-05-23\\n\\ndescription: \\u003e\\n  Physical port template\\n\\nparameters:\\n  physical_device:\\n    type: string\\n    label: Physical Device Id\\n    description: Id of the physical device on which physical port will be created.\\n  physical_port_name:\\n    type: string\\n    label: Physical Interface Name\\n    description: Name of the physical port.\\n\\nresources:\\n  physical_interface:\\n    type: OS::Contrail::PhysicalInterface\\n    properties:\\n      name: { get_param: physical_port_name }\\n      physical_router: { get_param: physical_device }\\n\\noutputs:\\n  id:\\n    description: A unique id for the physical interface\\n    value: { get_resource: physical_interface }\\n  name:\\n    description: The name of the physical interface.\\n    value: { get_attr: [physical_interface, name] }\\n\",\"watch\":[]}",1)'
03:02:07.897 gohan.db INFO [0m Creating resource ese_logical_port
03:02:07.897 gohan.db.sql INFO [0m Executing SQL query in transaction '6894f62f-4af1-4a83-be28-3dbd18f9a7e1': 'INSERT INTO `heat_templates` (`template_file`,`watch`,`handler`,`id`,`parameter_mappings`) VALUES (heat_template_version: 2013-05-23

description: >
  Logical port template

parameters:
  physical_port_id:
    type: string
    label: Physical Interface ID
    description: A unique id for the Physical Interface.
  logical_port_name:
    type: string
    label: Logical Port Name
    description: Name of the logical port.
  logical_port_type:
    type: string
    label: Logical Port Type
    description: Type of the logical port.
  logical_port_vlan_id:
    type: number
    label: VLAN id for Logical Port
    description: VLAN id to use for logical port creation.
    default: 0
  virtual_machine_interface_ids:
    type: comma_delimited_list
    label: Virtual Machine Interface ID
    description: Virtual Machine Interface ID.

resources:
  logical_interface:
    type: OS::Contrail::LogicalInterface
    properties:
      name: { get_param: logical_port_name }
      physical_interface: { get_param: physical_port_id }
      virtual_machine_interfaces: { get_param: virtual_machine_interface_ids }
      type: { get_param: logical_port_type }
      vlan: { get_param: logical_port_vlan_id }

outputs:
  id:
    description: A unique id for the logical interface
    value: { get_resource: logical_interface }
  name:
    description: The name of the logical interface.
    value: { get_attr: [logical_interface, name] }
,[],heat_worker,ese_logical_port,{"logical_port_name":"Pname","logical_port_type":"Ptype","logical_port_vlan_id":"Pvlan_id","physical_port_id":"Mese_physical_port:ese_physical_port_id:id","virtual_machine_interface_ids":{"for_field":"port_ids","for_mapping":{"output_key":"id","path":[{"id":"","type":"port"}]}}})'
03:02:07.898 gohan.db.sql INFO [0m Executing SQL query in transaction '6894f62f-4af1-4a83-be28-3dbd18f9a7e1': 'INSERT INTO `events` (`path`,`timestamp`,`type`,`marked_for_deletion`,`body`,`version`) VALUES (/v2.0/heat_templates/ese_logical_port,1494471727,create,false,"{\"handler\":\"heat_worker\",\"id\":\"ese_logical_port\",\"parameter_mappings\":{\"logical_port_name\":\"Pname\",\"logical_port_type\":\"Ptype\",\"logical_port_vlan_id\":\"Pvlan_id\",\"physical_port_id\":\"Mese_physical_port:ese_physical_port_id:id\",\"virtual_machine_interface_ids\":{\"for_field\":\"port_ids\",\"for_mapping\":{\"output_key\":\"id\",\"path\":[{\"id\":\"\",\"type\":\"port\"}]}}},\"template_file\":\"heat_template_version: 2013-05-23\\n\\ndescription: \\u003e\\n  Logical port template\\n\\nparameters:\\n  physical_port_id:\\n    type: string\\n    label: Physical Interface ID\\n    description: A unique id for the Physical Interface.\\n  logical_port_name:\\n    type: string\\n    label: Logical Port Name\\n    description: Name of the logical port.\\n  logical_port_type:\\n    type: string\\n    label: Logical Port Type\\n    description: Type of the logical port.\\n  logical_port_vlan_id:\\n    type: number\\n    label: VLAN id for Logical Port\\n    description: VLAN id to use for logical port creation.\\n    default: 0\\n  virtual_machine_interface_ids:\\n    type: comma_delimited_list\\n    label: Virtual Machine Interface ID\\n    description: Virtual Machine Interface ID.\\n\\nresources:\\n  logical_interface:\\n    type: OS::Contrail::LogicalInterface\\n    properties:\\n      name: { get_param: logical_port_name }\\n      physical_interface: { get_param: physical_port_id }\\n      virtual_machine_interfaces: { get_param: virtual_machine_interface_ids }\\n      type: { get_param: logical_port_type }\\n      vlan: { get_param: logical_port_vlan_id }\\n\\noutputs:\\n  id:\\n    description: A unique id for the logical interface\\n    value: { get_resource: logical_interface }\\n  name:\\n    description: The name of the logical interface.\\n    value: { get_attr: [logical_interface, name] }\\n\",\"watch\":[]}",1)'
03:02:07.899 gohan.db INFO [0m Creating resource local_subnet
03:02:07.899 gohan.db.sql INFO [0m Executing SQL query in transaction '6894f62f-4af1-4a83-be28-3dbd18f9a7e1': 'INSERT INTO `heat_templates` (`parameter_mappings`,`template_file`,`watch`,`handler`,`id`) VALUES ({"cidr":"Pcidr","name":"Pid"},heat_template_version: 2013-05-23

description: >
  Local Subnet template

parameters:
  name:
    type: string
    label: Local Subnet Name
    description: Name of the local subnet that will be created.
  cidr:
    type: string
    label: Local Subnet IP prefix
    description: IP prefix of the local subnet that will be created.
  virtual_machine_interface_ids:
    type: comma_delimited_list
    label: Virtual Machine Interface IDs
    description: Virtual Machine Interface IDs.
    default: []

resources:
  subnet:
    type: OS::Contrail::Subnet
    properties:
      name: { get_param: name }
      ip_prefix: { get_param: cidr }
      virtual_machine_interfaces: { get_param: virtual_machine_interface_ids }

outputs:
  id:
    description: A unique id for the local subnet.
    value: { get_resource: subnet }
  name:
    description: The name of the local subnet.
    value: { get_attr: [subnet, name] }
,[],heat_worker,local_subnet)'
03:02:07.900 gohan.db.sql INFO [0m Executing SQL query in transaction '6894f62f-4af1-4a83-be28-3dbd18f9a7e1': 'INSERT INTO `events` (`type`,`marked_for_deletion`,`body`,`version`,`path`,`timestamp`) VALUES (create,false,"{\"handler\":\"heat_worker\",\"id\":\"local_subnet\",\"parameter_mappings\":{\"cidr\":\"Pcidr\",\"name\":\"Pid\"},\"template_file\":\"heat_template_version: 2013-05-23\\n\\ndescription: \\u003e\\n  Local Subnet template\\n\\nparameters:\\n  name:\\n    type: string\\n    label: Local Subnet Name\\n    description: Name of the local subnet that will be created.\\n  cidr:\\n    type: string\\n    label: Local Subnet IP prefix\\n    description: IP prefix of the local subnet that will be created.\\n  virtual_machine_interface_ids:\\n    type: comma_delimited_list\\n    label: Virtual Machine Interface IDs\\n    description: Virtual Machine Interface IDs.\\n    default: []\\n\\nresources:\\n  subnet:\\n    type: OS::Contrail::Subnet\\n    properties:\\n      name: { get_param: name }\\n      ip_prefix: { get_param: cidr }\\n      virtual_machine_interfaces: { get_param: virtual_machine_interface_ids }\\n\\noutputs:\\n  id:\\n    description: A unique id for the local subnet.\\n    value: { get_resource: subnet }\\n  name:\\n    description: The name of the local subnet.\\n    value: { get_attr: [subnet, name] }\\n\",\"watch\":[]}",1,/v2.0/heat_templates/local_subnet,1494471727)'
03:02:07.901 gohan.db INFO [0m Creating resource ese_device_existing
03:02:07.901 gohan.db.sql INFO [0m Executing SQL query in transaction '6894f62f-4af1-4a83-be28-3dbd18f9a7e1': 'INSERT INTO `heat_templates` (`parameter_mappings`,`template_file`,`watch`,`handler`,`id`) VALUES ({"hostname":"Phostname","name":"Pname"},heat_template_version: 2013-05-23

description: >
  ESE Device (existing) template

parameters:
  name:
    type: string
    label: Physical Router Name
    description: Name of the physical router that will be created.
  hostname:
    type: string
    label: Hostname
    description: Name of host (vrouter) to create router on

resources:
  physical_router:
    type: OS::Contrail::ExistingResource
    properties:
      fq_name:
        - "default-global-system-config"
        - { get_param: hostname }
      resource_type: "physical_router"
outputs:
  id:
    description: A unique id for the physical router.
    value: { get_resource: physical_router }
  name:
    description: The name of the physical router.
    value: { get_attr: [physical_router, name] }
  fq_name:
    description: The FQ name of the physical router.
    value: { get_attr: [physical_router, fq_name] }
,[],heat_worker,ese_device_existing)'
03:02:07.902 gohan.db.sql INFO [0m Executing SQL query in transaction '6894f62f-4af1-4a83-be28-3dbd18f9a7e1': 'INSERT INTO `events` (`body`,`version`,`path`,`timestamp`,`type`,`marked_for_deletion`) VALUES ("{\"handler\":\"heat_worker\",\"id\":\"ese_device_existing\",\"parameter_mappings\":{\"hostname\":\"Phostname\",\"name\":\"Pname\"},\"template_file\":\"heat_template_version: 2013-05-23\\n\\ndescription: \\u003e\\n  ESE Device (existing) template\\n\\nparameters:\\n  name:\\n    type: string\\n    label: Physical Router Name\\n    description: Name of the physical router that will be created.\\n  hostname:\\n    type: string\\n    label: Hostname\\n    description: Name of host (vrouter) to create router on\\n\\nresources:\\n  physical_router:\\n    type: OS::Contrail::ExistingResource\\n    properties:\\n      fq_name:\\n        - \\\"default-global-system-config\\\"\\n        - { get_param: hostname }\\n      resource_type: \\\"physical_router\\\"\\noutputs:\\n  id:\\n    description: A unique id for the physical router.\\n    value: { get_resource: physical_router }\\n  name:\\n    description: The name of the physical router.\\n    value: { get_attr: [physical_router, name] }\\n  fq_name:\\n    description: The FQ name of the physical router.\\n    value: { get_attr: [physical_router, fq_name] }\\n\",\"watch\":[]}",1,/v2.0/heat_templates/ese_device_existing,1494471727,create,false)'
03:02:07.903 gohan.db INFO [0m Creating resource ese_device_new
03:02:07.903 gohan.db.sql INFO [0m Executing SQL query in transaction '6894f62f-4af1-4a83-be28-3dbd18f9a7e1': 'INSERT INTO `heat_templates` (`watch`,`handler`,`id`,`parameter_mappings`,`template_file`) VALUES ([],heat_worker,ese_device_new,{"dataplane_ip":"Ppublic_ip_address","management_ip":"Pmanagement_ip_address","name":"Phostname","password":"Ppassword","product_name":"Pname","tor_agent_names":"Ptor_agent_names","tsn_names":"Ptsn_names","username":"Pusername","vendor_name":"CJuniper","vnc_managed":"CFalse"},heat_template_version: 2013-05-23

description: >
  Physical router template

parameters:
  name:
    type: string
    label: Physical Router Name
    description: Name of the physical router that will be created.
  tor_agent_names:
    type: comma_delimited_list
    label: TOR Agent Names
    description: List of virtual router names of TOR agents.
    constraints:
      - length: { min: 1 }
        description: List must not be empty.
    schema:
      '*': { type: string }
  tsn_names:
    type: comma_delimited_list
    label: TOR Service Node Names
    description: List of virtual router names of TOR service nodes.
    constraints:
      - length: { min: 1 }
        description: List must not be empty.
    schema:
      '*': { type: string }
  management_ip:
    type: string
    label: Management IP Address
    description: Management IP Address.
  dataplane_ip:
    type: string
    label: Dataplane IP Address
    description: Dataplane Address.
  vendor_name:
    type: string
    default: ""
    label: Vendor Name
    description: Vendor name of the physical router.
  product_name:
    type: string
    default: ""
    label: Product Name
    description: Product name of the physical router.
  vnc_managed:
    type: boolean
    default: False
    label: VNC managed
    description: VNC managed.
  username:
    type: string
    label: Username
    description: Username used to login to the physical router.
  password:
    type: string
    label: Password
    description: Password used to login to the physical router.

resources:
  physical_router:
    type: OS::Contrail::PhysicalRouter
    properties:
      name: { get_param: name }
      virtual_routers:
        'Fn::Split':
          - ','
          - 'Fn::Join':
            - ','
            - - 'Fn::Join': [',', get_param: tor_agent_names ]
              - 'Fn::Join': [',', get_param: tsn_names ]
      management_ip: { get_param: management_ip }
      dataplane_ip: { get_param: dataplane_ip }
      vendor_name: { get_param: vendor_name }
      product_name: { get_param: product_name }
      vnc_managed: { get_param: vnc_managed }
      user_credentials:
        username: { get_param: username }
        password: { get_param: password }

outputs:
  id:
    description: A unique id for the physical router.
    value: { get_resource: physical_router }
  name:
    description: The name of the physical router.
    value: { get_attr: [physical_router, name] }
  fq_name:
    description: The FQ name of the physical router.
    value: { get_attr: [physical_router, fq_name] }
  vendor_name:
    description: The vendor name of the physical router.
    value: { get_attr: [physical_router, vendor_name] }
  product_name:
    description: The product name of the physical router.
    value: { get_attr: [physical_router, product_name] }
  management_ip:
    description: The managment IP of the physical router.
    value: { get_attr: [physical_router, management_ip] }
  dataplane_ip:
    description: The dataplane IP of the physical router.
    value: { get_attr: [physical_router, dataplane_ip] }
  vnc_managed:
    description: Physical rotuer vnc managed.
    value: { get_attr: [physical_router, vnc_managed] }
  virtual_routers:
    description: List of virtual routers.
    value: { get_attr: [physical_router, virtual_routers] }
  physical_interfaces:
    description: List of physical interfaces attached.
    value: { get_attr: [physical_router, physical_interfaces] }
  logical_interfaces:
    description: List of logical interfaces attached.
    value: { get_attr: [physical_router, logical_interfaces] }
)'
03:02:07.904 gohan.db.sql INFO [0m Executing SQL query in transaction '6894f62f-4af1-4a83-be28-3dbd18f9a7e1': 'INSERT INTO `events` (`path`,`timestamp`,`type`,`marked_for_deletion`,`body`,`version`) VALUES (/v2.0/heat_templates/ese_device_new,1494471727,create,false,"{\"handler\":\"heat_worker\",\"id\":\"ese_device_new\",\"parameter_mappings\":{\"dataplane_ip\":\"Ppublic_ip_address\",\"management_ip\":\"Pmanagement_ip_address\",\"name\":\"Phostname\",\"password\":\"Ppassword\",\"product_name\":\"Pname\",\"tor_agent_names\":\"Ptor_agent_names\",\"tsn_names\":\"Ptsn_names\",\"username\":\"Pusername\",\"vendor_name\":\"CJuniper\",\"vnc_managed\":\"CFalse\"},\"template_file\":\"heat_template_version: 2013-05-23\\n\\ndescription: \\u003e\\n  Physical router template\\n\\nparameters:\\n  name:\\n    type: string\\n    label: Physical Router Name\\n    description: Name of the physical router that will be created.\\n  tor_agent_names:\\n    type: comma_delimited_list\\n    label: TOR Agent Names\\n    description: List of virtual router names of TOR agents.\\n    constraints:\\n      - length: { min: 1 }\\n        description: List must not be empty.\\n    schema:\\n      '*': { type: string }\\n  tsn_names:\\n    type: comma_delimited_list\\n    label: TOR Service Node Names\\n    description: List of virtual router names of TOR service nodes.\\n    constraints:\\n      - length: { min: 1 }\\n        description: List must not be empty.\\n    schema:\\n      '*': { type: string }\\n  management_ip:\\n    type: string\\n    label: Management IP Address\\n    description: Management IP Address.\\n  dataplane_ip:\\n    type: string\\n    label: Dataplane IP Address\\n    description: Dataplane Address.\\n  vendor_name:\\n    type: string\\n    default: \\\"\\\"\\n    label: Vendor Name\\n    description: Vendor name of the physical router.\\n  product_name:\\n    type: string\\n    default: \\\"\\\"\\n    label: Product Name\\n    description: Product name of the physical router.\\n  vnc_managed:\\n    type: boolean\\n    default: False\\n    label: VNC managed\\n    description: VNC managed.\\n  username:\\n    type: string\\n    label: Username\\n    description: Username used to login to the physical router.\\n  password:\\n    type: string\\n    label: Password\\n    description: Password used to login to the physical router.\\n\\nresources:\\n  physical_router:\\n    type: OS::Contrail::PhysicalRouter\\n    properties:\\n      name: { get_param: name }\\n      virtual_routers:\\n        'Fn::Split':\\n          - ','\\n          - 'Fn::Join':\\n            - ','\\n            - - 'Fn::Join': [',', get_param: tor_agent_names ]\\n              - 'Fn::Join': [',', get_param: tsn_names ]\\n      management_ip: { get_param: management_ip }\\n      dataplane_ip: { get_param: dataplane_ip }\\n      vendor_name: { get_param: vendor_name }\\n      product_name: { get_param: product_name }\\n      vnc_managed: { get_param: vnc_managed }\\n      user_credentials:\\n        username: { get_param: username }\\n        password: { get_param: password }\\n\\noutputs:\\n  id:\\n    description: A unique id for the physical router.\\n    value: { get_resource: physical_router }\\n  name:\\n    description: The name of the physical router.\\n    value: { get_attr: [physical_router, name] }\\n  fq_name:\\n    description: The FQ name of the physical router.\\n    value: { get_attr: [physical_router, fq_name] }\\n  vendor_name:\\n    description: The vendor name of the physical router.\\n    value: { get_attr: [physical_router, vendor_name] }\\n  product_name:\\n    description: The product name of the physical router.\\n    value: { get_attr: [physical_router, product_name] }\\n  management_ip:\\n    description: The managment IP of the physical router.\\n    value: { get_attr: [physical_router, management_ip] }\\n  dataplane_ip:\\n    description: The dataplane IP of the physical router.\\n    value: { get_attr: [physical_router, dataplane_ip] }\\n  vnc_managed:\\n    description: Physical rotuer vnc managed.\\n    value: { get_attr: [physical_router, vnc_managed] }\\n  virtual_routers:\\n    description: List of virtual routers.\\n    value: { get_attr: [physical_router, virtual_routers] }\\n  physical_interfaces:\\n    description: List of physical interfaces attached.\\n    value: { get_attr: [physical_router, physical_interfaces] }\\n  logical_interfaces:\\n    description: List of logical interfaces attached.\\n    value: { get_attr: [physical_router, logical_interfaces] }\\n\",\"watch\":[]}",1)'
03:02:07.905 gohan.db INFO [0m Populating resources for schema worker_data
03:02:07.906 gohan.db INFO [0m Populating resources for schema tenant
03:02:07.909 gohan.db INFO [0m Populating resources for schema edge_router
03:02:07.914 gohan.db INFO [0m Populating resources for schema er_physical_interface
03:02:07.916 gohan.db INFO [0m Populating resources for schema ha_router
03:02:07.918 gohan.db INFO [0m Populating resources for schema ha_interface
03:02:07.920 gohan.db INFO [0m Populating resources for schema internet_service
03:02:07.921 gohan.db INFO [0m Populating resources for schema vpn_service
03:02:07.923 gohan.db INFO [0m Populating resources for schema aws_service
03:02:07.925 gohan.db INFO [0m Populating resources for schema interdc_service
03:02:07.926 gohan.db INFO [0m Populating resources for schema common_function_pool
03:02:07.928 gohan.db INFO [0m Populating resources for schema nat_ip_pool
03:02:07.929 gohan.db INFO [0m Populating resources for schema common_function
03:02:07.931 gohan.db INFO [0m Populating resources for schema public_ip_pool
03:02:07.933 gohan.db INFO [0m Populating resources for schema suspended_public_ip
03:02:07.934 gohan.db INFO [0m Populating resources for schema qos_option
03:02:07.941 gohan.db INFO [0m Populating resources for schema vpn_gateway
03:02:07.943 gohan.db INFO [0m Populating resources for schema vpn_interface
03:02:07.945 gohan.db INFO [0m Populating resources for schema aws_gateway
03:02:07.946 gohan.db INFO [0m Populating resources for schema aws_interface
03:02:07.948 gohan.db INFO [0m Populating resources for schema internet_gateway
03:02:07.950 gohan.db INFO [0m Populating resources for schema common_function_gateway
03:02:07.951 gohan.db INFO [0m Populating resources for schema public_ip
03:02:07.953 gohan.db INFO [0m Populating resources for schema interdc_gateway
03:02:07.955 gohan.db INFO [0m Populating resources for schema interdc_interface
03:02:07.956 gohan.db INFO [0m Populating resources for schema gw_interface
03:02:07.958 gohan.db INFO [0m Populating resources for schema static_route
03:02:07.959 gohan.db INFO [0m Populating resources for schema vnf_template
03:02:07.961 gohan.db INFO [0m Populating resources for schema vnf_plan
03:02:07.963 gohan.db INFO [0m Populating resources for schema vnf_instance
03:02:07.965 gohan.db INFO [0m Populating resources for schema vnf_interface
03:02:07.968 gohan.db INFO [0m Populating resources for schema firewall_plan
03:02:07.971 gohan.db INFO [0m Populating resources for schema firewall
03:02:07.973 gohan.db INFO [0m Populating resources for schema firewall_interface
03:02:07.974 gohan.db INFO [0m Populating resources for schema load_balancer_plan
03:02:07.976 gohan.db INFO [0m Populating resources for schema load_balancer_conf
03:02:07.977 gohan.db INFO [0m Populating resources for schema load_balancer
03:02:07.979 gohan.db INFO [0m Populating resources for schema load_balancer_interface
03:02:07.981 gohan.db INFO [0m Populating resources for schema load_balancer_syslog_server
03:02:07.982 gohan.db INFO [0m Populating resources for schema billing_usage
03:02:07.984 gohan.db INFO [0m Populating resources for schema billing_resource
03:02:07.986 gohan.db INFO [0m Populating resources for schema monitoring
03:02:07.987 gohan.db INFO [0m Populating resources for schema resource_mapping
03:02:07.989 gohan.db INFO [0m Populating resources for schema colocation_space
03:02:07.992 gohan.db INFO [0m Populating resources for schema colocation_physical_link
03:02:07.995 gohan.db INFO [0m Populating resources for schema colocation_logical_link
03:02:07.997 gohan.db INFO [0m Populating resources for schema tenant_connection
03:02:07.999 gohan.db INFO [0m Populating resources for schema hosting_physical_link
03:02:08.000 gohan.db INFO [0m Populating resources for schema hosting_logical_link
03:02:08.016 gohan.server.core INFO [0m Importing data from ./init/monitoring_templates.yaml ...
03:02:08.021 gohan.db INFO [0m Populating resources for schema schema
03:02:08.025 gohan.db INFO [0m Populating resources for schema policy
03:02:08.029 gohan.db INFO [0m Populating resources for schema extension
03:02:08.038 gohan.db INFO [0m Populating resources for schema event
03:02:08.042 gohan.db INFO [0m Populating resources for schema namespace
03:02:08.047 gohan.db INFO [0m Populating resources for schema location
03:02:08.051 gohan.db INFO [0m Populating resources for schema ese_device
03:02:08.055 gohan.db INFO [0m Populating resources for schema network
03:02:08.061 gohan.db INFO [0m Populating resources for schema subnet
03:02:08.068 gohan.db INFO [0m Populating resources for schema port
03:02:08.073 gohan.db INFO [0m Populating resources for schema ese_physical_port
03:02:08.077 gohan.db INFO [0m Populating resources for schema ese_logical_port
03:02:08.081 gohan.db INFO [0m Populating resources for schema local_subnet
03:02:08.085 gohan.db INFO [0m Populating resources for schema server
03:02:08.094 gohan.db INFO [0m Populating resources for schema physical_port
03:02:08.098 gohan.db INFO [0m Populating resources for schema quota
03:02:08.102 gohan.db INFO [0m Populating resources for schema reserve_address
03:02:08.107 gohan.db INFO [0m Populating resources for schema neutron_extension
03:02:08.111 gohan.db INFO [0m Populating resources for schema heat_template
03:02:08.120 gohan.db INFO [0m Creating resource network_monitoring
03:02:08.120 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `heat_templates` (`parameter_mappings`,`template_file`,`watch`,`handler`,`id`) VALUES ({"fq_name":{"output_key":"fq_name"},"uuid":{"output_key":"id"}},network:
  type: virtual_network
  uuid: {{ uuid }}
  fq_name: {{ fq_name }}
db_mappings:
  - mapped_id: {{ uuid }}
    relation: 'instance'
,[],monitoring_worker,network_monitoring)'
03:02:08.120 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `events` (`type`,`marked_for_deletion`,`body`,`version`,`path`,`timestamp`) VALUES (create,false,"{\"handler\":\"monitoring_worker\",\"id\":\"network_monitoring\",\"parameter_mappings\":{\"fq_name\":{\"output_key\":\"fq_name\"},\"uuid\":{\"output_key\":\"id\"}},\"template_file\":\"network:\\n  type: virtual_network\\n  uuid: {{ uuid }}\\n  fq_name: {{ fq_name }}\\ndb_mappings:\\n  - mapped_id: {{ uuid }}\\n    relation: 'instance'\\n\",\"watch\":[]}",1,/v2.0/heat_templates/network_monitoring,1494471728)'
03:02:08.122 gohan.db INFO [0m Creating resource port_monitoring
03:02:08.122 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `heat_templates` (`parameter_mappings`,`template_file`,`watch`,`handler`,`id`) VALUES ({"attached":{"field":"attached"},"device_owner":{"field":"device_owner"},"vmi_fq_name":{"output_key":"fq_name"},"vmi_uuid":{"output_key":"id"}},{% if device_owner and attached %}
vmi:
  type: virtual_machine_interface
  uuid: {{ vmi_uuid }}
  fq_name: {{ vmi_fq_name }}
  timeout: 120
{% endif %}
{% if device_owner | match('compute') and attached %}
db_mappings:
  - mapped_id: {{ vmi_fq_name | replace(':', '-') }}
    relation: 'vmi'
{% endif %}
,[],monitoring_worker,port_monitoring)'
03:02:08.122 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `events` (`timestamp`,`type`,`marked_for_deletion`,`body`,`version`,`path`) VALUES (1494471728,create,false,"{\"handler\":\"monitoring_worker\",\"id\":\"port_monitoring\",\"parameter_mappings\":{\"attached\":{\"field\":\"attached\"},\"device_owner\":{\"field\":\"device_owner\"},\"vmi_fq_name\":{\"output_key\":\"fq_name\"},\"vmi_uuid\":{\"output_key\":\"id\"}},\"template_file\":\"{% if device_owner and attached %}\\nvmi:\\n  type: virtual_machine_interface\\n  uuid: {{ vmi_uuid }}\\n  fq_name: {{ vmi_fq_name }}\\n  timeout: 120\\n{% endif %}\\n{% if device_owner | match('compute') and attached %}\\ndb_mappings:\\n  - mapped_id: {{ vmi_fq_name | replace(':', '-') }}\\n    relation: 'vmi'\\n{% endif %}\\n\",\"watch\":[]}",1,/v2.0/heat_templates/port_monitoring)'
03:02:08.124 gohan.db INFO [0m Creating resource ese_physical_port_monitoring
03:02:08.124 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `heat_templates` (`id`,`parameter_mappings`,`template_file`,`watch`,`handler`) VALUES (ese_physical_port_monitoring,{"community_name":{"constant":"ESE_NODE_COMMUNITY"},"device_ip":{"field":"management_ip_address","path":["ese_device_id"]},"name":{"field":"name"}},port:
  type: physical_port
  community_name: {{ community_name }}
  device_ip: {{ device_ip }}
  name: {{ name }}
,[],monitoring_worker)'
03:02:08.124 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `events` (`type`,`marked_for_deletion`,`body`,`version`,`path`,`timestamp`) VALUES (create,false,"{\"handler\":\"monitoring_worker\",\"id\":\"ese_physical_port_monitoring\",\"parameter_mappings\":{\"community_name\":{\"constant\":\"ESE_NODE_COMMUNITY\"},\"device_ip\":{\"field\":\"management_ip_address\",\"path\":[\"ese_device_id\"]},\"name\":{\"field\":\"name\"}},\"template_file\":\"port:\\n  type: physical_port\\n  community_name: {{ community_name }}\\n  device_ip: {{ device_ip }}\\n  name: {{ name }}\\n\",\"watch\":[]}",1,/v2.0/heat_templates/ese_physical_port_monitoring,1494471728)'
03:02:08.125 gohan.db INFO [0m Creating resource ese_logical_port_monitoring
03:02:08.126 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `heat_templates` (`parameter_mappings`,`template_file`,`watch`,`handler`,`id`) VALUES ({"community_name":{"constant":"ESE_NODE_COMMUNITY"},"contarail_port_id":{"output_key":"id"},"device_ip":{"field":"management_ip_address","path":["ese_physical_port_id","ese_device_id"]},"id":{"field":"id"},"name":{"field":"name"},"port_ids":{"field":"port_ids"}},logical_port:
  type: logical_port
  community_name: {{ community_name }}
  device_ip: {{ device_ip }}
  name: {{ name }}
{% for port_id in port_ids %}
db_mappings:
  - mapped_id: {{ device_ip }}-{{ name }}
    resource_id: {{ port_id }}
    resource_type: port
    relation: baremetal
{% endfor %}
,[],monitoring_worker,ese_logical_port_monitoring)'
03:02:08.126 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `events` (`body`,`version`,`path`,`timestamp`,`type`,`marked_for_deletion`) VALUES ("{\"handler\":\"monitoring_worker\",\"id\":\"ese_logical_port_monitoring\",\"parameter_mappings\":{\"community_name\":{\"constant\":\"ESE_NODE_COMMUNITY\"},\"contarail_port_id\":{\"output_key\":\"id\"},\"device_ip\":{\"field\":\"management_ip_address\",\"path\":[\"ese_physical_port_id\",\"ese_device_id\"]},\"id\":{\"field\":\"id\"},\"name\":{\"field\":\"name\"},\"port_ids\":{\"field\":\"port_ids\"}},\"template_file\":\"logical_port:\\n  type: logical_port\\n  community_name: {{ community_name }}\\n  device_ip: {{ device_ip }}\\n  name: {{ name }}\\n{% for port_id in port_ids %}\\ndb_mappings:\\n  - mapped_id: {{ device_ip }}-{{ name }}\\n    resource_id: {{ port_id }}\\n    resource_type: port\\n    relation: baremetal\\n{% endfor %}\\n\",\"watch\":[]}",1,/v2.0/heat_templates/ese_logical_port_monitoring,1494471728,create,false)'
03:02:08.127 gohan.db INFO [0m Creating resource ese_device_monitoring
03:02:08.127 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `heat_templates` (`template_file`,`watch`,`handler`,`id`,`parameter_mappings`) VALUES (switch:
  type: switch
  community_name: {{ community_name }}
  ip: {{ device_ip }}
  mibs: []
,[],monitoring_worker,ese_device_monitoring,{"community_name":{"constant":"ESE_NODE_COMMUNITY"},"device_ip":{"field":"management_ip_address"}})'
03:02:08.128 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `events` (`body`,`version`,`path`,`timestamp`,`type`,`marked_for_deletion`) VALUES ("{\"handler\":\"monitoring_worker\",\"id\":\"ese_device_monitoring\",\"parameter_mappings\":{\"community_name\":{\"constant\":\"ESE_NODE_COMMUNITY\"},\"device_ip\":{\"field\":\"management_ip_address\"}},\"template_file\":\"switch:\\n  type: switch\\n  community_name: {{ community_name }}\\n  ip: {{ device_ip }}\\n  mibs: []\\n\",\"watch\":[]}",1,/v2.0/heat_templates/ese_device_monitoring,1494471728,create,false)'
03:02:08.129 gohan.db INFO [0m Creating resource edge_router_monitoring
03:02:08.129 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `heat_templates` (`template_file`,`watch`,`handler`,`id`,`parameter_mappings`) VALUES (router:
  type: router
  community_name: {{ community_name }}
  ip: {{ device_ip }}
  mibs: []
,[],monitoring_worker,edge_router_monitoring,{"community_name":{"constant":"EDGE_ROUTER_COMMUNITY"},"device_ip":{"field":"ip"}})'
03:02:08.130 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `events` (`version`,`path`,`timestamp`,`type`,`marked_for_deletion`,`body`) VALUES (1,/v2.0/heat_templates/edge_router_monitoring,1494471728,create,false,"{\"handler\":\"monitoring_worker\",\"id\":\"edge_router_monitoring\",\"parameter_mappings\":{\"community_name\":{\"constant\":\"EDGE_ROUTER_COMMUNITY\"},\"device_ip\":{\"field\":\"ip\"}},\"template_file\":\"router:\\n  type: router\\n  community_name: {{ community_name }}\\n  ip: {{ device_ip }}\\n  mibs: []\\n\",\"watch\":[]}")'
03:02:08.131 gohan.db INFO [0m Creating resource er_physical_interface_monitoring
03:02:08.131 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `heat_templates` (`parameter_mappings`,`template_file`,`watch`,`handler`,`id`) VALUES ({"community_name":{"constant":"EDGE_ROUTER_COMMUNITY"},"device_ip":{"field":"ip","path":["device_id"]},"name":{"field":"name"}},interface:
  type: physical_port
  community_name: {{ community_name }}
  device_ip: {{ device_ip }}
  name: {{ name }}
,[],monitoring_worker,er_physical_interface_monitoring)'
03:02:08.132 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `events` (`body`,`version`,`path`,`timestamp`,`type`,`marked_for_deletion`) VALUES ("{\"handler\":\"monitoring_worker\",\"id\":\"er_physical_interface_monitoring\",\"parameter_mappings\":{\"community_name\":{\"constant\":\"EDGE_ROUTER_COMMUNITY\"},\"device_ip\":{\"field\":\"ip\",\"path\":[\"device_id\"]},\"name\":{\"field\":\"name\"}},\"template_file\":\"interface:\\n  type: physical_port\\n  community_name: {{ community_name }}\\n  device_ip: {{ device_ip }}\\n  name: {{ name }}\\n\",\"watch\":[]}",1,/v2.0/heat_templates/er_physical_interface_monitoring,1494471728,create,false)'
03:02:08.133 gohan.db INFO [0m Creating resource ha_router_monitoring
03:02:08.133 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `heat_templates` (`parameter_mappings`,`template_file`,`watch`,`handler`,`id`) VALUES ({"primary_device_id":{"field":"primary_router_id"},"secondary_device_id":{"field":"secondary_router_id"}},primary:
  type: etcd_reader
  etcd_type: edge_router
  etcd_id: {{ primary_device_id }}
secondary:
  type: etcd_reader
  etcd_type: edge_router
  etcd_id: {{ secondary_device_id }}
,[],monitoring_worker,ha_router_monitoring)'
03:02:08.134 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `events` (`path`,`timestamp`,`type`,`marked_for_deletion`,`body`,`version`) VALUES (/v2.0/heat_templates/ha_router_monitoring,1494471728,create,false,"{\"handler\":\"monitoring_worker\",\"id\":\"ha_router_monitoring\",\"parameter_mappings\":{\"primary_device_id\":{\"field\":\"primary_router_id\"},\"secondary_device_id\":{\"field\":\"secondary_router_id\"}},\"template_file\":\"primary:\\n  type: etcd_reader\\n  etcd_type: edge_router\\n  etcd_id: {{ primary_device_id }}\\nsecondary:\\n  type: etcd_reader\\n  etcd_type: edge_router\\n  etcd_id: {{ secondary_device_id }}\\n\",\"watch\":[]}",1)'
03:02:08.135 gohan.db INFO [0m Creating resource ha_interface_monitoring
03:02:08.135 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `heat_templates` (`parameter_mappings`,`template_file`,`watch`,`handler`,`id`) VALUES ({"primary_interface_id":{"field":"primary_interface_id"},"secondary_interface_id":{"field":"secondary_interface_id"}},primary:
  type: etcd_reader
  etcd_type: er_physical_interface
  etcd_id: {{ primary_interface_id }}
secondary:
  type: etcd_reader
  etcd_type: er_physical_interface
  etcd_id: {{ secondary_interface_id }}
,[],monitoring_worker,ha_interface_monitoring)'
03:02:08.136 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `events` (`body`,`version`,`path`,`timestamp`,`type`,`marked_for_deletion`) VALUES ("{\"handler\":\"monitoring_worker\",\"id\":\"ha_interface_monitoring\",\"parameter_mappings\":{\"primary_interface_id\":{\"field\":\"primary_interface_id\"},\"secondary_interface_id\":{\"field\":\"secondary_interface_id\"}},\"template_file\":\"primary:\\n  type: etcd_reader\\n  etcd_type: er_physical_interface\\n  etcd_id: {{ primary_interface_id }}\\nsecondary:\\n  type: etcd_reader\\n  etcd_type: er_physical_interface\\n  etcd_id: {{ secondary_interface_id }}\\n\",\"watch\":[]}",1,/v2.0/heat_templates/ha_interface_monitoring,1494471728,create,false)'
03:02:08.137 gohan.db INFO [0m Creating resource internet_gateway_monitoring
03:02:08.137 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `heat_templates` (`parameter_mappings`,`template_file`,`watch`,`handler`,`id`) VALUES ({"counter_name_in_primary":{"concatenate":[{"field":"vrf_name"},{"constant":"_IN"}]},"counter_name_in_secondary":{"concatenate":[{"field":"vrf_name"},{"constant":"_IN"}]},"counter_name_out_primary":{"concatenate":[{"field":"vrf_name"},{"constant":"_OUT"}]},"counter_name_out_secondary":{"concatenate":[{"field":"vrf_name"},{"constant":"_OUT"}]},"downlink_interface_id":{"field":"downlink_interface_id"},"inet_in_filter":{"field":"inet_in_filter","path":["internet_service_id"]},"inet_out_filter":{"field":"inet_out_filter","path":["internet_service_id"]},"password":{"field":"password","path":["downlink_interface_id","ha_router_id","primary_router_id"]},"primary_server_ip":{"field":"ip","path":["downlink_interface_id","ha_router_id","primary_router_id"]},"secondary_server_ip":{"field":"ip","path":["downlink_interface_id","ha_router_id","secondary_router_id"]},"ssh_port":{"field":"ssh_port","path":["downlink_interface_id","ha_router_id","primary_router_id"]},"uplink_interface_id":{"field":"associated_uplink_id"},"username":{"field":"login","path":["downlink_interface_id","ha_router_id","primary_router_id"]}},uplink:
  type: etcd_reader
  etcd_type: ha_interface
  etcd_id: {{ uplink_interface_id }}
  timeout: 120
downlink:
  type: etcd_reader
  etcd_type: ha_interface
  etcd_id: {{ downlink_interface_id }}
  timeout: 120
counter_primary:
  type: kafka_messenger
  kafka_topic: monitor_igs_counter
  in_firewall_name: {{ inet_in_filter }}
  out_firewall_name: {{ inet_out_filter }}
  counter_name_in_primary: {{ counter_name_in_primary }}
  counter_name_out_primary: {{ counter_name_out_primary }}
  counter_name_in_secondary: {{ counter_name_in_secondary }}
  counter_name_out_secondary: {{ counter_name_out_secondary }}
  server_username: {{ username }}
  server_password: {{ password }}
  server_ssh_port: {{ ssh_port }}
  primary_server_ip: {{ primary_server_ip }}
  secondary_server_ip: {{ secondary_server_ip }}
db_mappings:
  - mapped_id: {{ primary_server_ip }}-{{ inet_in_filter }}-{{ counter_name_in_primary }}
    relation: primary_in
  - mapped_id: {{ primary_server_ip }}-{{ inet_out_filter }}-{{ counter_name_out_primary }}
    relation: primary_out
  - mapped_id: {{ secondary_server_ip }}-{{ inet_in_filter }}-{{ counter_name_in_secondary }}
    relation: secondary_in
  - mapped_id: {{ secondary_server_ip }}-{{ inet_out_filter }}-{{ counter_name_out_secondary }}
    relation: secondary_out
,[],monitoring_worker,internet_gateway_monitoring)'
03:02:08.138 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `events` (`path`,`timestamp`,`type`,`marked_for_deletion`,`body`,`version`) VALUES (/v2.0/heat_templates/internet_gateway_monitoring,1494471728,create,false,"{\"handler\":\"monitoring_worker\",\"id\":\"internet_gateway_monitoring\",\"parameter_mappings\":{\"counter_name_in_primary\":{\"concatenate\":[{\"field\":\"vrf_name\"},{\"constant\":\"_IN\"}]},\"counter_name_in_secondary\":{\"concatenate\":[{\"field\":\"vrf_name\"},{\"constant\":\"_IN\"}]},\"counter_name_out_primary\":{\"concatenate\":[{\"field\":\"vrf_name\"},{\"constant\":\"_OUT\"}]},\"counter_name_out_secondary\":{\"concatenate\":[{\"field\":\"vrf_name\"},{\"constant\":\"_OUT\"}]},\"downlink_interface_id\":{\"field\":\"downlink_interface_id\"},\"inet_in_filter\":{\"field\":\"inet_in_filter\",\"path\":[\"internet_service_id\"]},\"inet_out_filter\":{\"field\":\"inet_out_filter\",\"path\":[\"internet_service_id\"]},\"password\":{\"field\":\"password\",\"path\":[\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"primary_server_ip\":{\"field\":\"ip\",\"path\":[\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"secondary_server_ip\":{\"field\":\"ip\",\"path\":[\"downlink_interface_id\",\"ha_router_id\",\"secondary_router_id\"]},\"ssh_port\":{\"field\":\"ssh_port\",\"path\":[\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"uplink_interface_id\":{\"field\":\"associated_uplink_id\"},\"username\":{\"field\":\"login\",\"path\":[\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]}},\"template_file\":\"uplink:\\n  type: etcd_reader\\n  etcd_type: ha_interface\\n  etcd_id: {{ uplink_interface_id }}\\n  timeout: 120\\ndownlink:\\n  type: etcd_reader\\n  etcd_type: ha_interface\\n  etcd_id: {{ downlink_interface_id }}\\n  timeout: 120\\ncounter_primary:\\n  type: kafka_messenger\\n  kafka_topic: monitor_igs_counter\\n  in_firewall_name: {{ inet_in_filter }}\\n  out_firewall_name: {{ inet_out_filter }}\\n  counter_name_in_primary: {{ counter_name_in_primary }}\\n  counter_name_out_primary: {{ counter_name_out_primary }}\\n  counter_name_in_secondary: {{ counter_name_in_secondary }}\\n  counter_name_out_secondary: {{ counter_name_out_secondary }}\\n  server_username: {{ username }}\\n  server_password: {{ password }}\\n  server_ssh_port: {{ ssh_port }}\\n  primary_server_ip: {{ primary_server_ip }}\\n  secondary_server_ip: {{ secondary_server_ip }}\\ndb_mappings:\\n  - mapped_id: {{ primary_server_ip }}-{{ inet_in_filter }}-{{ counter_name_in_primary }}\\n    relation: primary_in\\n  - mapped_id: {{ primary_server_ip }}-{{ inet_out_filter }}-{{ counter_name_out_primary }}\\n    relation: primary_out\\n  - mapped_id: {{ secondary_server_ip }}-{{ inet_in_filter }}-{{ counter_name_in_secondary }}\\n    relation: secondary_in\\n  - mapped_id: {{ secondary_server_ip }}-{{ inet_out_filter }}-{{ counter_name_out_secondary }}\\n    relation: secondary_out\\n\",\"watch\":[]}",1)'
03:02:08.139 gohan.db INFO [0m Creating resource aws_gateway_monitoring
03:02:08.139 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `heat_templates` (`watch`,`handler`,`id`,`parameter_mappings`,`template_file`) VALUES ([],monitoring_worker,aws_gateway_monitoring,{"downlink_interface_id":{"field":"downlink_interface_id"},"primary_device_ip":{"field":"ip","path":["downlink_interface_id","ha_router_id","primary_router_id"]}},downlink:
  type: etcd_reader
  etcd_type: ha_interface
  etcd_id: {{ downlink_interface_id }}
  timeout: 120
db_mappings:
  - mapped_id: {{ primary_device_ip }}-{{ downlink_interface_id }}
    relation: instance
)'
03:02:08.140 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `events` (`body`,`version`,`path`,`timestamp`,`type`,`marked_for_deletion`) VALUES ("{\"handler\":\"monitoring_worker\",\"id\":\"aws_gateway_monitoring\",\"parameter_mappings\":{\"downlink_interface_id\":{\"field\":\"downlink_interface_id\"},\"primary_device_ip\":{\"field\":\"ip\",\"path\":[\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]}},\"template_file\":\"downlink:\\n  type: etcd_reader\\n  etcd_type: ha_interface\\n  etcd_id: {{ downlink_interface_id }}\\n  timeout: 120\\ndb_mappings:\\n  - mapped_id: {{ primary_device_ip }}-{{ downlink_interface_id }}\\n    relation: instance\\n\",\"watch\":[]}",1,/v2.0/heat_templates/aws_gateway_monitoring,1494471728,create,false)'
03:02:08.141 gohan.db INFO [0m Creating resource vpn_gateway_monitoring
03:02:08.141 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `heat_templates` (`watch`,`handler`,`id`,`parameter_mappings`,`template_file`) VALUES ([],monitoring_worker,vpn_gateway_monitoring,{"downlink_interface_id":{"field":"downlink_interface_id"},"primary_device_ip":{"field":"ip","path":["downlink_interface_id","ha_router_id","primary_router_id"]}},downlink:
  type: etcd_reader
  etcd_type: ha_interface
  etcd_id: {{ downlink_interface_id }}
  timeout: 120
db_mappings:
  - mapped_id: {{ primary_device_ip }}-{{ downlink_interface_id }}
    relation: instance
)'
03:02:08.142 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `events` (`body`,`version`,`path`,`timestamp`,`type`,`marked_for_deletion`) VALUES ("{\"handler\":\"monitoring_worker\",\"id\":\"vpn_gateway_monitoring\",\"parameter_mappings\":{\"downlink_interface_id\":{\"field\":\"downlink_interface_id\"},\"primary_device_ip\":{\"field\":\"ip\",\"path\":[\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]}},\"template_file\":\"downlink:\\n  type: etcd_reader\\n  etcd_type: ha_interface\\n  etcd_id: {{ downlink_interface_id }}\\n  timeout: 120\\ndb_mappings:\\n  - mapped_id: {{ primary_device_ip }}-{{ downlink_interface_id }}\\n    relation: instance\\n\",\"watch\":[]}",1,/v2.0/heat_templates/vpn_gateway_monitoring,1494471728,create,false)'
03:02:08.143 gohan.db INFO [0m Creating resource gw_interface_monitoring
03:02:08.143 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `heat_templates` (`parameter_mappings`,`template_file`,`watch`,`handler`,`id`) VALUES ({"primary_device_ip":{"field":"ip","path":[{"concatenate":[{"field":"service_type"},"_gw_id"]},"downlink_interface_id","ha_router_id","primary_router_id"]},"primary_device_login":{"field":"login","path":[{"concatenate":[{"field":"service_type"},"_gw_id"]},"downlink_interface_id","ha_router_id","primary_router_id"]},"primary_device_password":{"field":"password","path":[{"concatenate":[{"field":"service_type"},"_gw_id"]},"downlink_interface_id","ha_router_id","primary_router_id"]},"primary_device_port":{"field":"ssh_port","path":[{"concatenate":[{"field":"service_type"},"_gw_id"]},"downlink_interface_id","ha_router_id","primary_router_id"]},"primary_logical_interface_name":{"else_mapping":{"field":"primary_logical_downlink_interface_name","path":[{"concatenate":[{"field":"service_type"},"_gw_id"]}]},"if_mapping":{"equal":[{"field":"service_type"},"internet"]},"then_mapping":{"field":"primary_logical_interface_name","path":[{"concatenate":[{"field":"service_type"},"_gw_id"]}]}},"secondary_device_ip":{"field":"ip","path":[{"concatenate":[{"field":"service_type"},"_gw_id"]},"downlink_interface_id","ha_router_id","secondary_router_id"]},"secondary_device_login":{"field":"login","path":[{"concatenate":[{"field":"service_type"},"_gw_id"]},"downlink_interface_id","ha_router_id","secondary_router_id"]},"secondary_device_password":{"field":"password","path":[{"concatenate":[{"field":"service_type"},"_gw_id"]},"downlink_interface_id","ha_router_id","secondary_router_id"]},"secondary_device_port":{"field":"ssh_port","path":[{"concatenate":[{"field":"service_type"},"_gw_id"]},"downlink_interface_id","ha_router_id","secondary_router_id"]},"secondary_logical_interface_name":{"else_mapping":{"field":"secondary_logical_downlink_interface_name","path":[{"concatenate":[{"field":"service_type"},"_gw_id"]}]},"if_mapping":{"equal":[{"field":"service_type"},"internet"]},"then_mapping":{"field":"secondary_logical_interface_name","path":[{"concatenate":[{"field":"service_type"},"_gw_id"]}]}},"service_type":{"field":"service_type"},"vrid":{"field":"vrid"}},primary:
  type: vrrp_session
  host: {{ primary_device_ip }}
  port: {{ primary_device_port }}
  login: {{ primary_device_login }}
  password: {{ primary_device_password }}
  interface: {{ primary_logical_interface_name }}
  wanted_status: master
  vrid: {{ vrid }}
  timeout: 360
secondary:
  type: vrrp_session
  host: {{ secondary_device_ip }}
  port: {{ secondary_device_port }}
  login: {{ secondary_device_login }}
  password: {{ secondary_device_password }}
  interface: {{ secondary_logical_interface_name }}
  wanted_status: backup
  vrid: {{ vrid }}
  timeout: 360
db_mappings:
- mapped_id: {{primary_device_ip}}-{{primary_logical_interface_name}}
  relation: {{service_type}}_primary
- mapped_id: {{secondary_device_ip}}-{{secondary_logical_interface_name}}
  relation: {{service_type}}_secondary
,[],monitoring_worker,gw_interface_monitoring)'
03:02:08.144 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `events` (`version`,`path`,`timestamp`,`type`,`marked_for_deletion`,`body`) VALUES (1,/v2.0/heat_templates/gw_interface_monitoring,1494471728,create,false,"{\"handler\":\"monitoring_worker\",\"id\":\"gw_interface_monitoring\",\"parameter_mappings\":{\"primary_device_ip\":{\"field\":\"ip\",\"path\":[{\"concatenate\":[{\"field\":\"service_type\"},\"_gw_id\"]},\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"primary_device_login\":{\"field\":\"login\",\"path\":[{\"concatenate\":[{\"field\":\"service_type\"},\"_gw_id\"]},\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"primary_device_password\":{\"field\":\"password\",\"path\":[{\"concatenate\":[{\"field\":\"service_type\"},\"_gw_id\"]},\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"primary_device_port\":{\"field\":\"ssh_port\",\"path\":[{\"concatenate\":[{\"field\":\"service_type\"},\"_gw_id\"]},\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"primary_logical_interface_name\":{\"else_mapping\":{\"field\":\"primary_logical_downlink_interface_name\",\"path\":[{\"concatenate\":[{\"field\":\"service_type\"},\"_gw_id\"]}]},\"if_mapping\":{\"equal\":[{\"field\":\"service_type\"},\"internet\"]},\"then_mapping\":{\"field\":\"primary_logical_interface_name\",\"path\":[{\"concatenate\":[{\"field\":\"service_type\"},\"_gw_id\"]}]}},\"secondary_device_ip\":{\"field\":\"ip\",\"path\":[{\"concatenate\":[{\"field\":\"service_type\"},\"_gw_id\"]},\"downlink_interface_id\",\"ha_router_id\",\"secondary_router_id\"]},\"secondary_device_login\":{\"field\":\"login\",\"path\":[{\"concatenate\":[{\"field\":\"service_type\"},\"_gw_id\"]},\"downlink_interface_id\",\"ha_router_id\",\"secondary_router_id\"]},\"secondary_device_password\":{\"field\":\"password\",\"path\":[{\"concatenate\":[{\"field\":\"service_type\"},\"_gw_id\"]},\"downlink_interface_id\",\"ha_router_id\",\"secondary_router_id\"]},\"secondary_device_port\":{\"field\":\"ssh_port\",\"path\":[{\"concatenate\":[{\"field\":\"service_type\"},\"_gw_id\"]},\"downlink_interface_id\",\"ha_router_id\",\"secondary_router_id\"]},\"secondary_logical_interface_name\":{\"else_mapping\":{\"field\":\"secondary_logical_downlink_interface_name\",\"path\":[{\"concatenate\":[{\"field\":\"service_type\"},\"_gw_id\"]}]},\"if_mapping\":{\"equal\":[{\"field\":\"service_type\"},\"internet\"]},\"then_mapping\":{\"field\":\"secondary_logical_interface_name\",\"path\":[{\"concatenate\":[{\"field\":\"service_type\"},\"_gw_id\"]}]}},\"service_type\":{\"field\":\"service_type\"},\"vrid\":{\"field\":\"vrid\"}},\"template_file\":\"primary:\\n  type: vrrp_session\\n  host: {{ primary_device_ip }}\\n  port: {{ primary_device_port }}\\n  login: {{ primary_device_login }}\\n  password: {{ primary_device_password }}\\n  interface: {{ primary_logical_interface_name }}\\n  wanted_status: master\\n  vrid: {{ vrid }}\\n  timeout: 360\\nsecondary:\\n  type: vrrp_session\\n  host: {{ secondary_device_ip }}\\n  port: {{ secondary_device_port }}\\n  login: {{ secondary_device_login }}\\n  password: {{ secondary_device_password }}\\n  interface: {{ secondary_logical_interface_name }}\\n  wanted_status: backup\\n  vrid: {{ vrid }}\\n  timeout: 360\\ndb_mappings:\\n- mapped_id: {{primary_device_ip}}-{{primary_logical_interface_name}}\\n  relation: {{service_type}}_primary\\n- mapped_id: {{secondary_device_ip}}-{{secondary_logical_interface_name}}\\n  relation: {{service_type}}_secondary\\n\",\"watch\":[]}")'
03:02:08.146 gohan.db INFO [0m Creating resource aws_interface_monitoring
03:02:08.146 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `heat_templates` (`handler`,`id`,`parameter_mappings`,`template_file`,`watch`) VALUES (monitoring_worker,aws_interface_monitoring,{"community_name":{"constant":"EDGE_ROUTER_COMMUNITY"},"primary_device_ip":{"field":"ip","path":["aws_gw_id","downlink_interface_id","ha_router_id","primary_router_id"]},"primary_device_login":{"field":"login","path":["aws_gw_id","downlink_interface_id","ha_router_id","primary_router_id"]},"primary_device_password":{"field":"password","path":["aws_gw_id","downlink_interface_id","ha_router_id","primary_router_id"]},"primary_device_port":{"field":"ssh_port","path":["aws_gw_id","downlink_interface_id","ha_router_id","primary_router_id"]},"primary_peer_ip":{"nested":["primary","bgp_peer_ip"]},"primary_port":{"field":"primary_logical_uplink_interface_name","path":["aws_gw_id"]},"secondary_device_ip":{"field":"ip","path":["aws_gw_id","downlink_interface_id","ha_router_id","secondary_router_id"]},"secondary_device_login":{"field":"login","path":["aws_gw_id","downlink_interface_id","ha_router_id","secondary_router_id"]},"secondary_device_password":{"field":"password","path":["aws_gw_id","downlink_interface_id","ha_router_id","secondary_router_id"]},"secondary_device_port":{"field":"ssh_port","path":["aws_gw_id","downlink_interface_id","ha_router_id","secondary_router_id"]},"secondary_peer_ip":{"nested":["secondary","bgp_peer_ip"]},"secondary_port":{"field":"secondary_logical_uplink_interface_name","path":["aws_gw_id"]},"vrf_name":{"field":"vrf_name","path":["aws_gw_id"]}},primary:
  type: bgp_session
  host: {{ primary_device_ip }}
  port: {{ primary_device_port }}
  login: {{ primary_device_login }}
  password: {{ primary_device_password }}
  peer_address: {{ primary_peer_ip }}
  instance: {{ vrf_name }}
  timeout: 120
primary_uplink:
  type: logical_port
  community_name: {{ community_name }}
  device_ip: {{ primary_device_ip }}
  name: {{ primary_port }}
secondary:
  type: bgp_session
  host: {{ secondary_device_ip }}
  port: {{ secondary_device_port }}
  login: {{ secondary_device_login }}
  password: {{ secondary_device_password }}
  peer_address: {{ secondary_peer_ip }}
  instance: {{ vrf_name }}
  timeout: 120
secondary_uplink:
  type: logical_port
  community_name: {{ community_name }}
  device_ip: {{ secondary_device_ip }}
  name: {{ secondary_port }}
db_mappings:
  - mapped_id: {{ primary_device_ip }}-{{ primary_port }}
    relation: "primary"
  - mapped_id: {{ secondary_device_ip }}-{{ secondary_port }}
    relation: "secondary"
,[])'
03:02:08.147 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `events` (`body`,`version`,`path`,`timestamp`,`type`,`marked_for_deletion`) VALUES ("{\"handler\":\"monitoring_worker\",\"id\":\"aws_interface_monitoring\",\"parameter_mappings\":{\"community_name\":{\"constant\":\"EDGE_ROUTER_COMMUNITY\"},\"primary_device_ip\":{\"field\":\"ip\",\"path\":[\"aws_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"primary_device_login\":{\"field\":\"login\",\"path\":[\"aws_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"primary_device_password\":{\"field\":\"password\",\"path\":[\"aws_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"primary_device_port\":{\"field\":\"ssh_port\",\"path\":[\"aws_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"primary_peer_ip\":{\"nested\":[\"primary\",\"bgp_peer_ip\"]},\"primary_port\":{\"field\":\"primary_logical_uplink_interface_name\",\"path\":[\"aws_gw_id\"]},\"secondary_device_ip\":{\"field\":\"ip\",\"path\":[\"aws_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"secondary_router_id\"]},\"secondary_device_login\":{\"field\":\"login\",\"path\":[\"aws_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"secondary_router_id\"]},\"secondary_device_password\":{\"field\":\"password\",\"path\":[\"aws_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"secondary_router_id\"]},\"secondary_device_port\":{\"field\":\"ssh_port\",\"path\":[\"aws_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"secondary_router_id\"]},\"secondary_peer_ip\":{\"nested\":[\"secondary\",\"bgp_peer_ip\"]},\"secondary_port\":{\"field\":\"secondary_logical_uplink_interface_name\",\"path\":[\"aws_gw_id\"]},\"vrf_name\":{\"field\":\"vrf_name\",\"path\":[\"aws_gw_id\"]}},\"template_file\":\"primary:\\n  type: bgp_session\\n  host: {{ primary_device_ip }}\\n  port: {{ primary_device_port }}\\n  login: {{ primary_device_login }}\\n  password: {{ primary_device_password }}\\n  peer_address: {{ primary_peer_ip }}\\n  instance: {{ vrf_name }}\\n  timeout: 120\\nprimary_uplink:\\n  type: logical_port\\n  community_name: {{ community_name }}\\n  device_ip: {{ primary_device_ip }}\\n  name: {{ primary_port }}\\nsecondary:\\n  type: bgp_session\\n  host: {{ secondary_device_ip }}\\n  port: {{ secondary_device_port }}\\n  login: {{ secondary_device_login }}\\n  password: {{ secondary_device_password }}\\n  peer_address: {{ secondary_peer_ip }}\\n  instance: {{ vrf_name }}\\n  timeout: 120\\nsecondary_uplink:\\n  type: logical_port\\n  community_name: {{ community_name }}\\n  device_ip: {{ secondary_device_ip }}\\n  name: {{ secondary_port }}\\ndb_mappings:\\n  - mapped_id: {{ primary_device_ip }}-{{ primary_port }}\\n    relation: \\\"primary\\\"\\n  - mapped_id: {{ secondary_device_ip }}-{{ secondary_port }}\\n    relation: \\\"secondary\\\"\\n\",\"watch\":[]}",1,/v2.0/heat_templates/aws_interface_monitoring,1494471728,create,false)'
03:02:08.148 gohan.db INFO [0m Creating resource vpn_interface_monitoring
03:02:08.148 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `heat_templates` (`id`,`parameter_mappings`,`template_file`,`watch`,`handler`) VALUES (vpn_interface_monitoring,{"community_name":{"constant":"EDGE_ROUTER_COMMUNITY"},"primary_device_ip":{"field":"ip","path":["vpn_gw_id","downlink_interface_id","ha_router_id","primary_router_id"]},"primary_device_login":{"field":"login","path":["vpn_gw_id","downlink_interface_id","ha_router_id","primary_router_id"]},"primary_device_password":{"field":"password","path":["vpn_gw_id","downlink_interface_id","ha_router_id","primary_router_id"]},"primary_device_port":{"field":"ssh_port","path":["vpn_gw_id","downlink_interface_id","ha_router_id","primary_router_id"]},"primary_peer_ip":{"nested":["primary","bgp_peer_ip"]},"primary_port":{"field":"primary_logical_uplink_interface_name","path":["vpn_gw_id"]},"secondary_device_ip":{"field":"ip","path":["vpn_gw_id","downlink_interface_id","ha_router_id","secondary_router_id"]},"secondary_device_login":{"field":"login","path":["vpn_gw_id","downlink_interface_id","ha_router_id","secondary_router_id"]},"secondary_device_password":{"field":"password","path":["vpn_gw_id","downlink_interface_id","ha_router_id","secondary_router_id"]},"secondary_device_port":{"field":"ssh_port","path":["vpn_gw_id","downlink_interface_id","ha_router_id","secondary_router_id"]},"secondary_peer_ip":{"nested":["secondary","bgp_peer_ip"]},"secondary_port":{"field":"secondary_logical_uplink_interface_name","path":["vpn_gw_id"]},"vrf_name":{"field":"vrf_name","path":["vpn_gw_id"]}},primary:
  type: bgp_session
  host: {{ primary_device_ip }}
  port: {{ primary_device_port }}
  login: {{ primary_device_login }}
  password: {{ primary_device_password }}
  peer_address: {{ primary_peer_ip }}
  instance: {{ vrf_name }}
  timeout: 120
primary_uplink:
  type: logical_port
  community_name: {{ community_name }}
  device_ip: {{ primary_device_ip }}
  name: {{ primary_port }}
secondary:
  type: bgp_session
  host: {{ secondary_device_ip }}
  port: {{ secondary_device_port }}
  login: {{ secondary_device_login }}
  password: {{ secondary_device_password }}
  peer_address: {{ secondary_peer_ip }}
  instance: {{ vrf_name }}
  timeout: 120
secondary_uplink:
  type: logical_port
  community_name: {{ community_name }}
  device_ip: {{ secondary_device_ip }}
  name: {{ secondary_port }}
db_mappings:
  - mapped_id: {{ primary_device_ip }}-{{ primary_port }}
    relation: "primary"
  - mapped_id: {{ secondary_device_ip }}-{{ secondary_port }}
    relation: "secondary"
,[],monitoring_worker)'
03:02:08.149 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `events` (`marked_for_deletion`,`body`,`version`,`path`,`timestamp`,`type`) VALUES (false,"{\"handler\":\"monitoring_worker\",\"id\":\"vpn_interface_monitoring\",\"parameter_mappings\":{\"community_name\":{\"constant\":\"EDGE_ROUTER_COMMUNITY\"},\"primary_device_ip\":{\"field\":\"ip\",\"path\":[\"vpn_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"primary_device_login\":{\"field\":\"login\",\"path\":[\"vpn_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"primary_device_password\":{\"field\":\"password\",\"path\":[\"vpn_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"primary_device_port\":{\"field\":\"ssh_port\",\"path\":[\"vpn_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"primary_peer_ip\":{\"nested\":[\"primary\",\"bgp_peer_ip\"]},\"primary_port\":{\"field\":\"primary_logical_uplink_interface_name\",\"path\":[\"vpn_gw_id\"]},\"secondary_device_ip\":{\"field\":\"ip\",\"path\":[\"vpn_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"secondary_router_id\"]},\"secondary_device_login\":{\"field\":\"login\",\"path\":[\"vpn_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"secondary_router_id\"]},\"secondary_device_password\":{\"field\":\"password\",\"path\":[\"vpn_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"secondary_router_id\"]},\"secondary_device_port\":{\"field\":\"ssh_port\",\"path\":[\"vpn_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"secondary_router_id\"]},\"secondary_peer_ip\":{\"nested\":[\"secondary\",\"bgp_peer_ip\"]},\"secondary_port\":{\"field\":\"secondary_logical_uplink_interface_name\",\"path\":[\"vpn_gw_id\"]},\"vrf_name\":{\"field\":\"vrf_name\",\"path\":[\"vpn_gw_id\"]}},\"template_file\":\"primary:\\n  type: bgp_session\\n  host: {{ primary_device_ip }}\\n  port: {{ primary_device_port }}\\n  login: {{ primary_device_login }}\\n  password: {{ primary_device_password }}\\n  peer_address: {{ primary_peer_ip }}\\n  instance: {{ vrf_name }}\\n  timeout: 120\\nprimary_uplink:\\n  type: logical_port\\n  community_name: {{ community_name }}\\n  device_ip: {{ primary_device_ip }}\\n  name: {{ primary_port }}\\nsecondary:\\n  type: bgp_session\\n  host: {{ secondary_device_ip }}\\n  port: {{ secondary_device_port }}\\n  login: {{ secondary_device_login }}\\n  password: {{ secondary_device_password }}\\n  peer_address: {{ secondary_peer_ip }}\\n  instance: {{ vrf_name }}\\n  timeout: 120\\nsecondary_uplink:\\n  type: logical_port\\n  community_name: {{ community_name }}\\n  device_ip: {{ secondary_device_ip }}\\n  name: {{ secondary_port }}\\ndb_mappings:\\n  - mapped_id: {{ primary_device_ip }}-{{ primary_port }}\\n    relation: \\\"primary\\\"\\n  - mapped_id: {{ secondary_device_ip }}-{{ secondary_port }}\\n    relation: \\\"secondary\\\"\\n\",\"watch\":[]}",1,/v2.0/heat_templates/vpn_interface_monitoring,1494471728,create)'
03:02:08.150 gohan.db INFO [0m Creating resource common_function_gateway_monitoring
03:02:08.151 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `heat_templates` (`handler`,`id`,`parameter_mappings`,`template_file`,`watch`) VALUES (monitoring_worker,common_function_gateway_monitoring,{"jinja_vrids":{"for_field":{"field":"vrrp_config","path":["common_function_pool_id"]},"for_mapping":{"field":"vrid"}},"primary_device_ip":{"field":"ip","path":["downlink_interface_id","ha_router_id","primary_router_id"]},"primary_device_login":{"field":"login","path":["downlink_interface_id","ha_router_id","primary_router_id"]},"primary_device_password":{"field":"password","path":["downlink_interface_id","ha_router_id","primary_router_id"]},"primary_device_port":{"field":"ssh_port","path":["downlink_interface_id","ha_router_id","primary_router_id"]},"primary_logical_interface_name":{"field":"primary_logical_interface_name"},"secondary_device_ip":{"field":"ip","path":["downlink_interface_id","ha_router_id","secondary_router_id"]},"secondary_device_login":{"field":"login","path":["downlink_interface_id","ha_router_id","secondary_router_id"]},"secondary_device_password":{"field":"password","path":["downlink_interface_id","ha_router_id","secondary_router_id"]},"secondary_device_port":{"field":"ssh_port","path":["downlink_interface_id","ha_router_id","secondary_router_id"]},"secondary_logical_interface_name":{"field":"secondary_logical_interface_name"}},{% for vrid in jinja_vrids %}
primary_{{ vrid }}:
  type: vrrp_session
  host: {{ primary_device_ip }}
  port: {{ primary_device_port }}
  login: {{ primary_device_login }}
  password: {{ primary_device_password }}
  interface: {{ primary_logical_interface_name }}
  wanted_status: master
  vrid: {{ vrid }}
  timeout: 360
secondary_{{ vrid }}:
  type: vrrp_session
  host: {{ secondary_device_ip }}
  port: {{ secondary_device_port }}
  login: {{ secondary_device_login }}
  password: {{ secondary_device_password }}
  interface: {{ secondary_logical_interface_name }}
  wanted_status: backup
  vrid: {{ vrid }}
  timeout: 360
{% endfor %}
,[])'
03:02:08.151 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `events` (`body`,`version`,`path`,`timestamp`,`type`,`marked_for_deletion`) VALUES ("{\"handler\":\"monitoring_worker\",\"id\":\"common_function_gateway_monitoring\",\"parameter_mappings\":{\"jinja_vrids\":{\"for_field\":{\"field\":\"vrrp_config\",\"path\":[\"common_function_pool_id\"]},\"for_mapping\":{\"field\":\"vrid\"}},\"primary_device_ip\":{\"field\":\"ip\",\"path\":[\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"primary_device_login\":{\"field\":\"login\",\"path\":[\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"primary_device_password\":{\"field\":\"password\",\"path\":[\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"primary_device_port\":{\"field\":\"ssh_port\",\"path\":[\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"primary_logical_interface_name\":{\"field\":\"primary_logical_interface_name\"},\"secondary_device_ip\":{\"field\":\"ip\",\"path\":[\"downlink_interface_id\",\"ha_router_id\",\"secondary_router_id\"]},\"secondary_device_login\":{\"field\":\"login\",\"path\":[\"downlink_interface_id\",\"ha_router_id\",\"secondary_router_id\"]},\"secondary_device_password\":{\"field\":\"password\",\"path\":[\"downlink_interface_id\",\"ha_router_id\",\"secondary_router_id\"]},\"secondary_device_port\":{\"field\":\"ssh_port\",\"path\":[\"downlink_interface_id\",\"ha_router_id\",\"secondary_router_id\"]},\"secondary_logical_interface_name\":{\"field\":\"secondary_logical_interface_name\"}},\"template_file\":\"{% for vrid in jinja_vrids %}\\nprimary_{{ vrid }}:\\n  type: vrrp_session\\n  host: {{ primary_device_ip }}\\n  port: {{ primary_device_port }}\\n  login: {{ primary_device_login }}\\n  password: {{ primary_device_password }}\\n  interface: {{ primary_logical_interface_name }}\\n  wanted_status: master\\n  vrid: {{ vrid }}\\n  timeout: 360\\nsecondary_{{ vrid }}:\\n  type: vrrp_session\\n  host: {{ secondary_device_ip }}\\n  port: {{ secondary_device_port }}\\n  login: {{ secondary_device_login }}\\n  password: {{ secondary_device_password }}\\n  interface: {{ secondary_logical_interface_name }}\\n  wanted_status: backup\\n  vrid: {{ vrid }}\\n  timeout: 360\\n{% endfor %}\\n\",\"watch\":[]}",1,/v2.0/heat_templates/common_function_gateway_monitoring,1494471728,create,false)'
03:02:08.153 gohan.db INFO [0m Creating resource vnf_instance_monitoring
03:02:08.153 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `heat_templates` (`parameter_mappings`,`template_file`,`watch`,`handler`,`id`) VALUES ({"instance_ip":{"field":"management_ip"},"server_id":{"output_key":"server_id"}},server:
  type: nova_vm
  server_id: {{ server_id }}
,[],monitoring_worker,vnf_instance_monitoring)'
03:02:08.153 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `events` (`timestamp`,`type`,`marked_for_deletion`,`body`,`version`,`path`) VALUES (1494471728,create,false,"{\"handler\":\"monitoring_worker\",\"id\":\"vnf_instance_monitoring\",\"parameter_mappings\":{\"instance_ip\":{\"field\":\"management_ip\"},\"server_id\":{\"output_key\":\"server_id\"}},\"template_file\":\"server:\\n  type: nova_vm\\n  server_id: {{ server_id }}\\n\",\"watch\":[]}",1,/v2.0/heat_templates/vnf_instance_monitoring)'
03:02:08.155 gohan.db INFO [0m Creating resource firewall_monitoring
03:02:08.155 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `heat_templates` (`id`,`parameter_mappings`,`template_file`,`watch`,`handler`) VALUES (firewall_monitoring,{"community_name":{"constant":"FIREWALL_COMMUNITY"},"instance_ip":{"field":"management_ip","path":["vnf_instance_id"]},"vnf_instance_id":{"field":"vnf_instance_id"}},vnf_instance:
  type: etcd_reader
  etcd_type: vnf_instance
  etcd_id: {{ vnf_instance_id }}
vyatta:
  type: router
  community_name: {{ community_name }}
  ip: {{ instance_ip }}
  mibs: []
  timeout: 60
  time_between_retries: 5
db_mappings:
  - mapped_id: {{ instance_ip }}
    relation: 'instance'
,[],monitoring_worker)'
03:02:08.155 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `events` (`path`,`timestamp`,`type`,`marked_for_deletion`,`body`,`version`) VALUES (/v2.0/heat_templates/firewall_monitoring,1494471728,create,false,"{\"handler\":\"monitoring_worker\",\"id\":\"firewall_monitoring\",\"parameter_mappings\":{\"community_name\":{\"constant\":\"FIREWALL_COMMUNITY\"},\"instance_ip\":{\"field\":\"management_ip\",\"path\":[\"vnf_instance_id\"]},\"vnf_instance_id\":{\"field\":\"vnf_instance_id\"}},\"template_file\":\"vnf_instance:\\n  type: etcd_reader\\n  etcd_type: vnf_instance\\n  etcd_id: {{ vnf_instance_id }}\\nvyatta:\\n  type: router\\n  community_name: {{ community_name }}\\n  ip: {{ instance_ip }}\\n  mibs: []\\n  timeout: 60\\n  time_between_retries: 5\\ndb_mappings:\\n  - mapped_id: {{ instance_ip }}\\n    relation: 'instance'\\n\",\"watch\":[]}",1)'
03:02:08.157 gohan.db INFO [0m Creating resource firewall_interface_monitoring
03:02:08.157 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `heat_templates` (`parameter_mappings`,`template_file`,`watch`,`handler`,`id`) VALUES ({"community_name":{"constant":"FIREWALL_COMMUNITY"},"instance_ip":{"field":"management_ip","path":["firewall_id","vnf_instance_id"]},"slot_number":{"field":"slot_number"}},interface:
  type: physical_port
  community_name: {{ community_name }}
  device_ip: {{ instance_ip }}
  name: dp0s{{ slot_number + 3 }}
  timeout: 60
  time_between_retries: 5
db_mappings:
  - mapped_id: {{ instance_ip }}-dp0s{{ slot_number + 3 }}
    relation: 'instance'
,[],monitoring_worker,firewall_interface_monitoring)'
03:02:08.157 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `events` (`marked_for_deletion`,`body`,`version`,`path`,`timestamp`,`type`) VALUES (false,"{\"handler\":\"monitoring_worker\",\"id\":\"firewall_interface_monitoring\",\"parameter_mappings\":{\"community_name\":{\"constant\":\"FIREWALL_COMMUNITY\"},\"instance_ip\":{\"field\":\"management_ip\",\"path\":[\"firewall_id\",\"vnf_instance_id\"]},\"slot_number\":{\"field\":\"slot_number\"}},\"template_file\":\"interface:\\n  type: physical_port\\n  community_name: {{ community_name }}\\n  device_ip: {{ instance_ip }}\\n  name: dp0s{{ slot_number + 3 }}\\n  timeout: 60\\n  time_between_retries: 5\\ndb_mappings:\\n  - mapped_id: {{ instance_ip }}-dp0s{{ slot_number + 3 }}\\n    relation: 'instance'\\n\",\"watch\":[]}",1,/v2.0/heat_templates/firewall_interface_monitoring,1494471728,create)'
03:02:08.158 gohan.db INFO [0m Creating resource load_balancer_monitoring
03:02:08.158 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `heat_templates` (`handler`,`id`,`parameter_mappings`,`template_file`,`watch`) VALUES (monitoring_worker,load_balancer_monitoring,{"community_name":{"constant":"LOAD_BALANCER_COMMUNITY"},"instance_ip":{"field":"management_ip","path":["vnf_instance_id"]},"load_balancer_conf_id":{"field":"load_balancer_conf_id"},"load_balancer_id":{"field":"id"},"vnf_instance_id":{"field":"vnf_instance_id"}},vnf_instance:
  type: etcd_reader
  etcd_type: vnf_instance
  etcd_id: {{ vnf_instance_id }}
load_balancer_conf:
  type: etcd_reader
  etcd_type: load_balancer_conf
  etcd_id: {{ load_balancer_conf_id }}
load_balancer:
  type: router
  community_name: {{ community_name }}
  ip: {{ instance_ip }}
  mibs: [
    ["resCpuUsage", "1.3.6.1.4.1.5951.4.1.1.41.1"],
    ["resMemUsage", "1.3.6.1.4.1.5951.4.1.1.41.2"],
    ["httpTotRequests", "1.3.6.1.4.1.5951.4.1.1.48.67"],
    ["tcpCurClientConn", "1.3.6.1.4.1.5951.4.1.1.46.2"],
    ["tcpCurServerConn", "1.3.6.1.4.1.5951.4.1.1.46.1"]
  ]
  timeout: 180
  time_between_retries: 3
db_mappings:
  - mapped_id: {{ instance_ip }}
    relation: 'instance'
,[])'
03:02:08.159 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `events` (`marked_for_deletion`,`body`,`version`,`path`,`timestamp`,`type`) VALUES (false,"{\"handler\":\"monitoring_worker\",\"id\":\"load_balancer_monitoring\",\"parameter_mappings\":{\"community_name\":{\"constant\":\"LOAD_BALANCER_COMMUNITY\"},\"instance_ip\":{\"field\":\"management_ip\",\"path\":[\"vnf_instance_id\"]},\"load_balancer_conf_id\":{\"field\":\"load_balancer_conf_id\"},\"load_balancer_id\":{\"field\":\"id\"},\"vnf_instance_id\":{\"field\":\"vnf_instance_id\"}},\"template_file\":\"vnf_instance:\\n  type: etcd_reader\\n  etcd_type: vnf_instance\\n  etcd_id: {{ vnf_instance_id }}\\nload_balancer_conf:\\n  type: etcd_reader\\n  etcd_type: load_balancer_conf\\n  etcd_id: {{ load_balancer_conf_id }}\\nload_balancer:\\n  type: router\\n  community_name: {{ community_name }}\\n  ip: {{ instance_ip }}\\n  mibs: [\\n    [\\\"resCpuUsage\\\", \\\"1.3.6.1.4.1.5951.4.1.1.41.1\\\"],\\n    [\\\"resMemUsage\\\", \\\"1.3.6.1.4.1.5951.4.1.1.41.2\\\"],\\n    [\\\"httpTotRequests\\\", \\\"1.3.6.1.4.1.5951.4.1.1.48.67\\\"],\\n    [\\\"tcpCurClientConn\\\", \\\"1.3.6.1.4.1.5951.4.1.1.46.2\\\"],\\n    [\\\"tcpCurServerConn\\\", \\\"1.3.6.1.4.1.5951.4.1.1.46.1\\\"]\\n  ]\\n  timeout: 180\\n  time_between_retries: 3\\ndb_mappings:\\n  - mapped_id: {{ instance_ip }}\\n    relation: 'instance'\\n\",\"watch\":[]}",1,/v2.0/heat_templates/load_balancer_monitoring,1494471728,create)'
03:02:08.160 gohan.db INFO [0m Creating resource load_balancer_interface_monitoring
03:02:08.160 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `heat_templates` (`template_file`,`watch`,`handler`,`id`,`parameter_mappings`) VALUES (interface:
  type: physical_port
  community_name: {{ community_name }}
  device_ip: {{ instance_ip }}
  {% if slot_number == 0  %}
  name: 0/1
  {% else %}
  name: 1/{{ slot_number }}
  {% endif %}
  timeout: 180
  time_between_retries: 3
  mibs: [ ["ifHCInOctets", "1.3.6.1.2.1.31.1.1.1.6"], ["ifHCOutOctets", "1.3.6.1.2.1.31.1.1.1.10"] ]
db_mappings:
  - mapped_id: {{instance_ip}}-{% if slot_number == 0  %}0/1{% else %}1/{{ slot_number }}{% endif %}
    relation: 'instance'
,[],monitoring_worker,load_balancer_interface_monitoring,{"community_name":{"constant":"LOAD_BALANCER_COMMUNITY"},"dummy":{"field":"id","path":["load_balancer_id","load_balancer_conf_id"]},"instance_ip":{"field":"management_ip","path":["load_balancer_id","vnf_instance_id"]},"slot_number":{"field":"slot_number"}})'
03:02:08.161 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `events` (`marked_for_deletion`,`body`,`version`,`path`,`timestamp`,`type`) VALUES (false,"{\"handler\":\"monitoring_worker\",\"id\":\"load_balancer_interface_monitoring\",\"parameter_mappings\":{\"community_name\":{\"constant\":\"LOAD_BALANCER_COMMUNITY\"},\"dummy\":{\"field\":\"id\",\"path\":[\"load_balancer_id\",\"load_balancer_conf_id\"]},\"instance_ip\":{\"field\":\"management_ip\",\"path\":[\"load_balancer_id\",\"vnf_instance_id\"]},\"slot_number\":{\"field\":\"slot_number\"}},\"template_file\":\"interface:\\n  type: physical_port\\n  community_name: {{ community_name }}\\n  device_ip: {{ instance_ip }}\\n  {% if slot_number == 0  %}\\n  name: 0/1\\n  {% else %}\\n  name: 1/{{ slot_number }}\\n  {% endif %}\\n  timeout: 180\\n  time_between_retries: 3\\n  mibs: [ [\\\"ifHCInOctets\\\", \\\"1.3.6.1.2.1.31.1.1.1.6\\\"], [\\\"ifHCOutOctets\\\", \\\"1.3.6.1.2.1.31.1.1.1.10\\\"] ]\\ndb_mappings:\\n  - mapped_id: {{instance_ip}}-{% if slot_number == 0  %}0/1{% else %}1/{{ slot_number }}{% endif %}\\n    relation: 'instance'\\n\",\"watch\":[]}",1,/v2.0/heat_templates/load_balancer_interface_monitoring,1494471728,create)'
03:02:08.162 gohan.db INFO [0m Creating resource interdc_gateway_monitoring
03:02:08.162 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `heat_templates` (`parameter_mappings`,`template_file`,`watch`,`handler`,`id`) VALUES ({"downlink_interface_id":{"field":"downlink_interface_id"},"gohan_id":{"field":"id"}},downlink:
  type: etcd_reader
  etcd_type: ha_interface
  etcd_id: {{ downlink_interface_id }}
  timeout: 120
db_mappings:
  - mapped_id: {{gohan_id}}
    relation: 'instance'
,[],monitoring_worker,interdc_gateway_monitoring)'
03:02:08.162 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `events` (`body`,`version`,`path`,`timestamp`,`type`,`marked_for_deletion`) VALUES ("{\"handler\":\"monitoring_worker\",\"id\":\"interdc_gateway_monitoring\",\"parameter_mappings\":{\"downlink_interface_id\":{\"field\":\"downlink_interface_id\"},\"gohan_id\":{\"field\":\"id\"}},\"template_file\":\"downlink:\\n  type: etcd_reader\\n  etcd_type: ha_interface\\n  etcd_id: {{ downlink_interface_id }}\\n  timeout: 120\\ndb_mappings:\\n  - mapped_id: {{gohan_id}}\\n    relation: 'instance'\\n\",\"watch\":[]}",1,/v2.0/heat_templates/interdc_gateway_monitoring,1494471728,create,false)'
03:02:08.164 gohan.db INFO [0m Creating resource interdc_interface_monitoring
03:02:08.164 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `heat_templates` (`handler`,`id`,`parameter_mappings`,`template_file`,`watch`) VALUES (monitoring_worker,interdc_interface_monitoring,{"community_name":{"constant":"EDGE_ROUTER_COMMUNITY"},"primary_device_ip":{"field":"ip","path":["interdc_gw_id","downlink_interface_id","ha_router_id","primary_router_id"]},"primary_device_login":{"field":"login","path":["interdc_gw_id","downlink_interface_id","ha_router_id","primary_router_id"]},"primary_device_password":{"field":"password","path":["interdc_gw_id","downlink_interface_id","ha_router_id","primary_router_id"]},"primary_device_port":{"field":"ssh_port","path":["interdc_gw_id","downlink_interface_id","ha_router_id","primary_router_id"]},"primary_logical_interface_name":{"field":"primary_logical_uplink_interface_name","path":["interdc_gw_id"]},"secondary_device_ip":{"field":"ip","path":["interdc_gw_id","downlink_interface_id","ha_router_id","secondary_router_id"]},"secondary_device_login":{"field":"login","path":["interdc_gw_id","downlink_interface_id","ha_router_id","secondary_router_id"]},"secondary_device_password":{"field":"password","path":["interdc_gw_id","downlink_interface_id","ha_router_id","secondary_router_id"]},"secondary_device_port":{"field":"ssh_port","path":["interdc_gw_id","downlink_interface_id","ha_router_id","secondary_router_id"]},"secondary_logical_interface_name":{"field":"secondary_logical_uplink_interface_name","path":["interdc_gw_id"]},"vrid":{"field":"vrid"}},primary:
  type: vrrp_session
  host: {{ primary_device_ip }}
  port: {{ primary_device_port }}
  login: {{ primary_device_login }}
  password: {{ primary_device_password }}
  interface: {{ primary_logical_interface_name }}
  wanted_status: master
  vrid: {{ vrid }}
  timeout: 360
primary_uplink:
  type: logical_port
  community_name: {{ community_name }}
  device_ip: {{ primary_device_ip }}
  name: {{ primary_logical_interface_name }}
secondary:
  type: vrrp_session
  host: {{ secondary_device_ip }}
  port: {{ secondary_device_port }}
  login: {{ secondary_device_login }}
  password: {{ secondary_device_password }}
  interface: {{ secondary_logical_interface_name }}
  wanted_status: backup
  vrid: {{ vrid }}
  timeout: 360
secondary_uplink:
  type: logical_port
  community_name: {{ community_name }}
  device_ip: {{ secondary_device_ip }}
  name: {{ secondary_logical_interface_name }}
db_mappings:
  - mapped_id: {{ primary_device_ip }}-{{ primary_logical_interface_name }}
    relation: "primary"
  - mapped_id: {{ secondary_device_ip }}-{{ secondary_logical_interface_name }}
    relation: "secondary"
,[])'
03:02:08.164 gohan.db.sql INFO [0m Executing SQL query in transaction '31c96edd-c156-4386-9065-dce5b675ce9a': 'INSERT INTO `events` (`body`,`version`,`path`,`timestamp`,`type`,`marked_for_deletion`) VALUES ("{\"handler\":\"monitoring_worker\",\"id\":\"interdc_interface_monitoring\",\"parameter_mappings\":{\"community_name\":{\"constant\":\"EDGE_ROUTER_COMMUNITY\"},\"primary_device_ip\":{\"field\":\"ip\",\"path\":[\"interdc_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"primary_device_login\":{\"field\":\"login\",\"path\":[\"interdc_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"primary_device_password\":{\"field\":\"password\",\"path\":[\"interdc_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"primary_device_port\":{\"field\":\"ssh_port\",\"path\":[\"interdc_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"primary_logical_interface_name\":{\"field\":\"primary_logical_uplink_interface_name\",\"path\":[\"interdc_gw_id\"]},\"secondary_device_ip\":{\"field\":\"ip\",\"path\":[\"interdc_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"secondary_router_id\"]},\"secondary_device_login\":{\"field\":\"login\",\"path\":[\"interdc_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"secondary_router_id\"]},\"secondary_device_password\":{\"field\":\"password\",\"path\":[\"interdc_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"secondary_router_id\"]},\"secondary_device_port\":{\"field\":\"ssh_port\",\"path\":[\"interdc_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"secondary_router_id\"]},\"secondary_logical_interface_name\":{\"field\":\"secondary_logical_uplink_interface_name\",\"path\":[\"interdc_gw_id\"]},\"vrid\":{\"field\":\"vrid\"}},\"template_file\":\"primary:\\n  type: vrrp_session\\n  host: {{ primary_device_ip }}\\n  port: {{ primary_device_port }}\\n  login: {{ primary_device_login }}\\n  password: {{ primary_device_password }}\\n  interface: {{ primary_logical_interface_name }}\\n  wanted_status: master\\n  vrid: {{ vrid }}\\n  timeout: 360\\nprimary_uplink:\\n  type: logical_port\\n  community_name: {{ community_name }}\\n  device_ip: {{ primary_device_ip }}\\n  name: {{ primary_logical_interface_name }}\\nsecondary:\\n  type: vrrp_session\\n  host: {{ secondary_device_ip }}\\n  port: {{ secondary_device_port }}\\n  login: {{ secondary_device_login }}\\n  password: {{ secondary_device_password }}\\n  interface: {{ secondary_logical_interface_name }}\\n  wanted_status: backup\\n  vrid: {{ vrid }}\\n  timeout: 360\\nsecondary_uplink:\\n  type: logical_port\\n  community_name: {{ community_name }}\\n  device_ip: {{ secondary_device_ip }}\\n  name: {{ secondary_logical_interface_name }}\\ndb_mappings:\\n  - mapped_id: {{ primary_device_ip }}-{{ primary_logical_interface_name }}\\n    relation: \\\"primary\\\"\\n  - mapped_id: {{ secondary_device_ip }}-{{ secondary_logical_interface_name }}\\n    relation: \\\"secondary\\\"\\n\",\"watch\":[]}",1,/v2.0/heat_templates/interdc_interface_monitoring,1494471728,create,false)'
03:02:08.165 gohan.db INFO [0m Populating resources for schema worker_data
03:02:08.170 gohan.db INFO [0m Populating resources for schema tenant
03:02:08.188 gohan.db INFO [0m Populating resources for schema edge_router
03:02:08.195 gohan.db INFO [0m Populating resources for schema er_physical_interface
03:02:08.199 gohan.db INFO [0m Populating resources for schema ha_router
03:02:08.203 gohan.db INFO [0m Populating resources for schema ha_interface
03:02:08.208 gohan.db INFO [0m Populating resources for schema internet_service
03:02:08.216 gohan.db INFO [0m Populating resources for schema vpn_service
03:02:08.220 gohan.db INFO [0m Populating resources for schema aws_service
03:02:08.224 gohan.db INFO [0m Populating resources for schema interdc_service
03:02:08.228 gohan.db INFO [0m Populating resources for schema common_function_pool
03:02:08.233 gohan.db INFO [0m Populating resources for schema nat_ip_pool
03:02:08.238 gohan.db INFO [0m Populating resources for schema common_function
03:02:08.245 gohan.db INFO [0m Populating resources for schema public_ip_pool
03:02:08.249 gohan.db INFO [0m Populating resources for schema suspended_public_ip
03:02:08.254 gohan.db INFO [0m Populating resources for schema qos_option
03:02:08.258 gohan.db INFO [0m Populating resources for schema vpn_gateway
03:02:08.262 gohan.db INFO [0m Populating resources for schema vpn_interface
03:02:08.268 gohan.db INFO [0m Populating resources for schema aws_gateway
03:02:08.275 gohan.db INFO [0m Populating resources for schema aws_interface
03:02:08.279 gohan.db INFO [0m Populating resources for schema internet_gateway
03:02:08.283 gohan.db INFO [0m Populating resources for schema common_function_gateway
03:02:08.288 gohan.db INFO [0m Populating resources for schema public_ip
03:02:08.292 gohan.db INFO [0m Populating resources for schema interdc_gateway
03:02:08.299 gohan.db INFO [0m Populating resources for schema interdc_interface
03:02:08.305 gohan.db INFO [0m Populating resources for schema gw_interface
03:02:08.309 gohan.db INFO [0m Populating resources for schema static_route
03:02:08.313 gohan.db INFO [0m Populating resources for schema vnf_template
03:02:08.318 gohan.db INFO [0m Populating resources for schema vnf_plan
03:02:08.322 gohan.db INFO [0m Populating resources for schema vnf_instance
03:02:08.330 gohan.db INFO [0m Populating resources for schema vnf_interface
03:02:08.334 gohan.db INFO [0m Populating resources for schema firewall_plan
03:02:08.338 gohan.db INFO [0m Populating resources for schema firewall
03:02:08.343 gohan.db INFO [0m Populating resources for schema firewall_interface
03:02:08.347 gohan.db INFO [0m Populating resources for schema load_balancer_plan
03:02:08.352 gohan.db INFO [0m Populating resources for schema load_balancer_conf
03:02:08.360 gohan.db INFO [0m Populating resources for schema load_balancer
03:02:08.364 gohan.db INFO [0m Populating resources for schema load_balancer_interface
03:02:08.368 gohan.db INFO [0m Populating resources for schema load_balancer_syslog_server
03:02:08.373 gohan.db INFO [0m Populating resources for schema billing_usage
03:02:08.377 gohan.db INFO [0m Populating resources for schema billing_resource
03:02:08.382 gohan.db INFO [0m Populating resources for schema monitoring
03:02:08.389 gohan.db INFO [0m Populating resources for schema resource_mapping
03:02:08.394 gohan.db INFO [0m Populating resources for schema colocation_space
03:02:08.398 gohan.db INFO [0m Populating resources for schema colocation_physical_link
03:02:08.402 gohan.db INFO [0m Populating resources for schema colocation_logical_link
03:02:08.407 gohan.db INFO [0m Populating resources for schema tenant_connection
03:02:08.413 gohan.db INFO [0m Populating resources for schema hosting_physical_link
03:02:08.420 gohan.db INFO [0m Populating resources for schema hosting_logical_link
03:02:08.437 gohan.server.core INFO [0m Importing data from ./init/igs_templates.yaml ...
03:02:08.440 gohan.db INFO [0m Populating resources for schema schema
03:02:08.443 gohan.db INFO [0m Populating resources for schema policy
03:02:08.446 gohan.db INFO [0m Populating resources for schema extension
03:02:08.448 gohan.db INFO [0m Populating resources for schema event
03:02:08.451 gohan.db INFO [0m Populating resources for schema namespace
03:02:08.454 gohan.db INFO [0m Populating resources for schema location
03:02:08.458 gohan.db INFO [0m Populating resources for schema ese_device
03:02:08.461 gohan.db INFO [0m Populating resources for schema network
03:02:08.464 gohan.db INFO [0m Populating resources for schema subnet
03:02:08.466 gohan.db INFO [0m Populating resources for schema port
03:02:08.469 gohan.db INFO [0m Populating resources for schema ese_physical_port
03:02:08.471 gohan.db INFO [0m Populating resources for schema ese_logical_port
03:02:08.474 gohan.db INFO [0m Populating resources for schema local_subnet
03:02:08.476 gohan.db INFO [0m Populating resources for schema server
03:02:08.480 gohan.db INFO [0m Populating resources for schema physical_port
03:02:08.484 gohan.db INFO [0m Populating resources for schema quota
03:02:08.486 gohan.db INFO [0m Populating resources for schema reserve_address
03:02:08.489 gohan.db INFO [0m Populating resources for schema neutron_extension
03:02:08.491 gohan.db INFO [0m Populating resources for schema heat_template
03:02:08.495 gohan.db INFO [0m Creating resource internet_gateway
03:02:08.495 gohan.db.sql INFO [0m Executing SQL query in transaction '484c4dc1-6a6d-4764-a4f2-b8f0e67d923a': 'INSERT INTO `heat_templates` (`parameter_mappings`,`template_file`,`watch`,`handler`,`id`) VALUES ({"filter_term_name":"APvrf_name\u0026C_filter","heat_timeout":"C60","inet_in_filter":"Finternet_service+internet_service_id:inet_in_filter","inet_out_filter":"Finternet_service+internet_service_id:inet_out_filter","input_filter_name":"ACFILTER_\u0026Fqos_option+qos_option_id:incoming_policer_name","jinja_vrf_config":"Finternet_service+internet_service_id:vrf_config","output_filter_name":"ACFILTER_\u0026Fqos_option+qos_option_id:outgoing_policer_name","prefix_list_name":"APvrf_name\u0026C_prefix","primary_device_ip":"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip","primary_device_logical_interface":"Pprimary_logical_interface_name","primary_device_password":"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password","primary_device_physical_interface":"Fha_interface+downlink_interface_id:er_physical_interface+primary_interface_id:name","primary_device_port":"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port","primary_device_username":"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login","primary_vrrp_config_group":"Finternet_service+internet_service_id:primary_vrrp_config_group","secondary_device_ip":"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip","secondary_device_logical_interface":"Psecondary_logical_interface_name","secondary_device_password":"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password","secondary_device_physical_interface":"Fha_interface+downlink_interface_id:er_physical_interface+secondary_interface_id:name","secondary_device_port":"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port","secondary_device_username":"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login","secondary_vrrp_config_group":"Finternet_service+internet_service_id:secondary_vrrp_config_group","uplink_import_policy":"Finternet_service+internet_service_id:uplink_import_policy","vlan":"Pvlan_id","vrf_export_policy":"Finternet_service+internet_service_id:vrf_export_policy","vrf_import_policy":"Finternet_service+internet_service_id:vrf_import_policy","vrf_name":"Pvrf_name"},heat_template_version: 2013-05-23

description: >
  Internet GW Instance

parameters:
  primary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Primary Device.
    label: Ip address of the device.
    type: string
  primary_device_port:
    description: Port that will be used to establish ssh connection to the Primary Device.
    label: Port of the ssh connection.
    type: number
  primary_device_username:
    description: Name of the user which will be used to log onto the Primary Device.
    label: User name to log on to device.
    type: string
  primary_device_password:
    description: Password of the user which will be used to log onto the Primary Device.
    label: Users password.
    type: string
  secondary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Secondary Device.
    label: Ip address of the device.
    type: string
  secondary_device_port:
    description: Port that will be used to establish ssh connection to the Secondary Device.
    label: Port of the ssh connection.
    type: number
  secondary_device_username:
    description: Name of the user which will be used to log onto the Secondary Device.
    label: User name to log on to device.
    type: string
  secondary_device_password:
    description: Password of the user which will be used to log onto the Secondary Device.
    label: Users password.
    type: string
  primary_device_physical_interface:
    description: Physical port on the Primary device on which the logical port will be configured
    label: Underlying physical interface
    type: string
  primary_device_logical_interface:
    description: Name of the created logical interface on the Primary device
    label: Logical Interface name
    type: string
  secondary_device_physical_interface:
    description: Physical port on the Secondary device on which the logical port will be configured
    label: Underlying physical interface
    type: string
  secondary_device_logical_interface:
    description: Name of the created logical interface on the Secondary device
    label: Logical Interface name
    type: string
  vlan:
    description: vlan tag used by logical interface
    label: VLAN ID
    type: string
  vrf_name:
    description: Name for VRF used by logical interface
    label: VRF name
    type: string
  vrf_import_policy:
    description: Import Policy for IGS
    label: Import Policy
    type: string
  vrf_export_policy:
    description: Export Policy for IGS
    label: Export Policy
    type: string
  uplink_import_policy:
    description: Uplink Import Policy for IGS
    label: Uplink Import Policy
    type: string
  input_filter_name:
    description: Policer name to use as input policer
    label: Input policer name
    type: string
  output_filter_name:
    description: Policer name to use as output policer
    label: Output policer name
    type: string
  primary_vrrp_config_group:
    description: Name for apply group to use for interface for VRRP
    label: Apply group name
    type: string
  secondary_vrrp_config_group:
    description: Name for apply group to use for interface for VRRP
    label: Apply group name
    type: string
  inet_in_filter:
    label: Internet Input Filter
    type: string
  inet_out_filter:
    label: Internet Output Filter
    type: string
  prefix_list_name:
    label: Prefix list name
    type: string
  filter_term_name:
    label: Filter term name
    type: string

resources:
{% for device in ["primary", "secondary"] %}
  netconf_configure_{{ device }}:
    properties:
      on_update: merge
      lock_timeout: 3000
      configs:
      - config:
          str_replace:
            params:
              $APPLY_GROUP:
                get_param: {{ device }}_vrrp_config_group
              $VLAN:
                get_param: vlan
              $INPUT_FILTER:
                get_param: input_filter_name
              $OUTPUT_FILTER:
                get_param: output_filter_name
            template: |
              apply-groups $APPLY_GROUP
              vlan-id $VLAN;
              description inet_gw;
              family inet {
                  filter {
                      input $INPUT_FILTER;
                      output $OUTPUT_FILTER;
                  }
              }
        path:
          - config_type: tag
            xml_type: tag
            tag: interfaces
          - config_type: name
            xml_type: named_tag
            tag: interface
            name: { get_param: {{ device }}_device_physical_interface }
          - config_type: named_tag
            xml_type: named_tag
            tag: unit
            name: { get_param: vlan }
      - config:
          str_replace:
            params:
              $LIF:
                get_param: {{ device }}_device_logical_interface
              $IMPORT_POLICY:
                get_param: vrf_import_policy
              $EXPORT_POLICY:
                get_param: vrf_export_policy
            template: |
                instance-type virtual-router;
                interface $LIF;
                routing-options instance-import $IMPORT_POLICY;
                routing-options instance-export $EXPORT_POLICY;{% if jinja_vrf_config %}
                {{ jinja_vrf_config }}{% endif %}
        path:
          - config_type: tag
            xml_type: tag
            tag: routing-instances
          - config_type: name
            xml_type: named_tag
            tag: instance
            name: { get_param: vrf_name }
      - config:
          str_replace:
            params:
              $VRF_NAME:
                get_param: vrf_name
            template: |
              from instance $VRF_NAME;
              then accept;
        path:
          - config_type: tag
            xml_type: tag
            tag: policy-options
          - config_type: named_tag
            xml_type: named_tag
            tag: policy-statement
            name: { get_param: uplink_import_policy }
          - config_type: named_tag
            xml_type: named_tag
            tag: term
            name: { get_param: vrf_name }
      - config: ""
        path:
          - config_type: tag
            xml_type: tag
            tag: policy-options
          - config_type: named_tag
            xml_type: named_tag
            tag: prefix-list
            name: { get_param: prefix_list_name }
      - config:
          str_replace:
            params:
              $PREFIX_LIST_NAME:
                get_param: prefix_list_name
              $VRF_NAME:
                get_param: vrf_name
            template: |
               from {
                  destination-prefix-list {
                       $PREFIX_LIST_NAME;
                  }
               }
               then {
                    count $VRF_NAME_IN;
                    accept;
               }
        path:
          - config_type: tag
            xml_type: tag
            tag: firewall
          - config_type: tag
            xml_type: tag
            tag: family
          - config_type: tag
            xml_type: tag
            tag: inet
          - config_type: named_tag
            xml_type: named_tag
            tag: filter
            name: { get_param: inet_in_filter }
          - config_type: named_tag
            xml_type: named_tag
            tag: term
            name: { get_param: filter_term_name }
        additional_commands:
          str_replace:
            params:
              $TERM_NAME:
                get_param: filter_term_name
              $INET_IN:
                get_param: inet_in_filter
            template: |
              insert firewall family inet filter $INET_IN term $TERM_NAME before term all-accept
      - config:
          str_replace:
            params:
              $PREFIX_LIST_NAME:
                get_param: prefix_list_name
              $VRF_NAME:
                get_param: vrf_name
            template: |
               from {
                  source-prefix-list {
                       $PREFIX_LIST_NAME;
                  }
               }
               then {
                    count $VRF_NAME_OUT;
                    accept;
               }
        path:
          - config_type: tag
            xml_type: tag
            tag: firewall
          - config_type: tag
            xml_type: tag
            tag: family
          - config_type: tag
            xml_type: tag
            tag: inet
          - config_type: named_tag
            xml_type: named_tag
            tag: filter
            name: { get_param: inet_out_filter }
          - config_type: named_tag
            xml_type: named_tag
            tag: term
            name: { get_param: filter_term_name }
        additional_commands:
          str_replace:
            params:
              $TERM_NAME:
                get_param: filter_term_name
              $INET_OUT:
                get_param: inet_out_filter
            template: |
              insert firewall family inet filter $INET_OUT term $TERM_NAME before term all-accept
      device_ip:
        get_param: {{ device }}_device_ip
      password:
        get_param: {{ device }}_device_password
      port:
        get_param: {{ device }}_device_port
      username:
        get_param: {{ device }}_device_username
    type: OS::Contrail::NetconfNamedConfigs
{% endfor %}
,[],heat_worker,internet_gateway)'
03:02:08.496 gohan.db.sql INFO [0m Executing SQL query in transaction '484c4dc1-6a6d-4764-a4f2-b8f0e67d923a': 'INSERT INTO `events` (`marked_for_deletion`,`body`,`version`,`path`,`timestamp`,`type`) VALUES (false,"{\"handler\":\"heat_worker\",\"id\":\"internet_gateway\",\"parameter_mappings\":{\"filter_term_name\":\"APvrf_name\\u0026C_filter\",\"heat_timeout\":\"C60\",\"inet_in_filter\":\"Finternet_service+internet_service_id:inet_in_filter\",\"inet_out_filter\":\"Finternet_service+internet_service_id:inet_out_filter\",\"input_filter_name\":\"ACFILTER_\\u0026Fqos_option+qos_option_id:incoming_policer_name\",\"jinja_vrf_config\":\"Finternet_service+internet_service_id:vrf_config\",\"output_filter_name\":\"ACFILTER_\\u0026Fqos_option+qos_option_id:outgoing_policer_name\",\"prefix_list_name\":\"APvrf_name\\u0026C_prefix\",\"primary_device_ip\":\"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip\",\"primary_device_logical_interface\":\"Pprimary_logical_interface_name\",\"primary_device_password\":\"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password\",\"primary_device_physical_interface\":\"Fha_interface+downlink_interface_id:er_physical_interface+primary_interface_id:name\",\"primary_device_port\":\"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port\",\"primary_device_username\":\"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login\",\"primary_vrrp_config_group\":\"Finternet_service+internet_service_id:primary_vrrp_config_group\",\"secondary_device_ip\":\"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip\",\"secondary_device_logical_interface\":\"Psecondary_logical_interface_name\",\"secondary_device_password\":\"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password\",\"secondary_device_physical_interface\":\"Fha_interface+downlink_interface_id:er_physical_interface+secondary_interface_id:name\",\"secondary_device_port\":\"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port\",\"secondary_device_username\":\"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login\",\"secondary_vrrp_config_group\":\"Finternet_service+internet_service_id:secondary_vrrp_config_group\",\"uplink_import_policy\":\"Finternet_service+internet_service_id:uplink_import_policy\",\"vlan\":\"Pvlan_id\",\"vrf_export_policy\":\"Finternet_service+internet_service_id:vrf_export_policy\",\"vrf_import_policy\":\"Finternet_service+internet_service_id:vrf_import_policy\",\"vrf_name\":\"Pvrf_name\"},\"template_file\":\"heat_template_version: 2013-05-23\\n\\ndescription: \\u003e\\n  Internet GW Instance\\n\\nparameters:\\n  primary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\\n    label: Ip address of the device.\\n    type: string\\n  primary_device_port:\\n    description: Port that will be used to establish ssh connection to the Primary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  primary_device_username:\\n    description: Name of the user which will be used to log onto the Primary Device.\\n    label: User name to log on to device.\\n    type: string\\n  primary_device_password:\\n    description: Password of the user which will be used to log onto the Primary Device.\\n    label: Users password.\\n    type: string\\n  secondary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\\n    label: Ip address of the device.\\n    type: string\\n  secondary_device_port:\\n    description: Port that will be used to establish ssh connection to the Secondary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  secondary_device_username:\\n    description: Name of the user which will be used to log onto the Secondary Device.\\n    label: User name to log on to device.\\n    type: string\\n  secondary_device_password:\\n    description: Password of the user which will be used to log onto the Secondary Device.\\n    label: Users password.\\n    type: string\\n  primary_device_physical_interface:\\n    description: Physical port on the Primary device on which the logical port will be configured\\n    label: Underlying physical interface\\n    type: string\\n  primary_device_logical_interface:\\n    description: Name of the created logical interface on the Primary device\\n    label: Logical Interface name\\n    type: string\\n  secondary_device_physical_interface:\\n    description: Physical port on the Secondary device on which the logical port will be configured\\n    label: Underlying physical interface\\n    type: string\\n  secondary_device_logical_interface:\\n    description: Name of the created logical interface on the Secondary device\\n    label: Logical Interface name\\n    type: string\\n  vlan:\\n    description: vlan tag used by logical interface\\n    label: VLAN ID\\n    type: string\\n  vrf_name:\\n    description: Name for VRF used by logical interface\\n    label: VRF name\\n    type: string\\n  vrf_import_policy:\\n    description: Import Policy for IGS\\n    label: Import Policy\\n    type: string\\n  vrf_export_policy:\\n    description: Export Policy for IGS\\n    label: Export Policy\\n    type: string\\n  uplink_import_policy:\\n    description: Uplink Import Policy for IGS\\n    label: Uplink Import Policy\\n    type: string\\n  input_filter_name:\\n    description: Policer name to use as input policer\\n    label: Input policer name\\n    type: string\\n  output_filter_name:\\n    description: Policer name to use as output policer\\n    label: Output policer name\\n    type: string\\n  primary_vrrp_config_group:\\n    description: Name for apply group to use for interface for VRRP\\n    label: Apply group name\\n    type: string\\n  secondary_vrrp_config_group:\\n    description: Name for apply group to use for interface for VRRP\\n    label: Apply group name\\n    type: string\\n  inet_in_filter:\\n    label: Internet Input Filter\\n    type: string\\n  inet_out_filter:\\n    label: Internet Output Filter\\n    type: string\\n  prefix_list_name:\\n    label: Prefix list name\\n    type: string\\n  filter_term_name:\\n    label: Filter term name\\n    type: string\\n\\nresources:\\n{% for device in [\\\"primary\\\", \\\"secondary\\\"] %}\\n  netconf_configure_{{ device }}:\\n    properties:\\n      on_update: merge\\n      lock_timeout: 3000\\n      configs:\\n      - config:\\n          str_replace:\\n            params:\\n              $APPLY_GROUP:\\n                get_param: {{ device }}_vrrp_config_group\\n              $VLAN:\\n                get_param: vlan\\n              $INPUT_FILTER:\\n                get_param: input_filter_name\\n              $OUTPUT_FILTER:\\n                get_param: output_filter_name\\n            template: |\\n              apply-groups $APPLY_GROUP\\n              vlan-id $VLAN;\\n              description inet_gw;\\n              family inet {\\n                  filter {\\n                      input $INPUT_FILTER;\\n                      output $OUTPUT_FILTER;\\n                  }\\n              }\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: interfaces\\n          - config_type: name\\n            xml_type: named_tag\\n            tag: interface\\n            name: { get_param: {{ device }}_device_physical_interface }\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: unit\\n            name: { get_param: vlan }\\n      - config:\\n          str_replace:\\n            params:\\n              $LIF:\\n                get_param: {{ device }}_device_logical_interface\\n              $IMPORT_POLICY:\\n                get_param: vrf_import_policy\\n              $EXPORT_POLICY:\\n                get_param: vrf_export_policy\\n            template: |\\n                instance-type virtual-router;\\n                interface $LIF;\\n                routing-options instance-import $IMPORT_POLICY;\\n                routing-options instance-export $EXPORT_POLICY;{% if jinja_vrf_config %}\\n                {{ jinja_vrf_config }}{% endif %}\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: routing-instances\\n          - config_type: name\\n            xml_type: named_tag\\n            tag: instance\\n            name: { get_param: vrf_name }\\n      - config:\\n          str_replace:\\n            params:\\n              $VRF_NAME:\\n                get_param: vrf_name\\n            template: |\\n              from instance $VRF_NAME;\\n              then accept;\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: policy-options\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: policy-statement\\n            name: { get_param: uplink_import_policy }\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: term\\n            name: { get_param: vrf_name }\\n      - config: \\\"\\\"\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: policy-options\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: prefix-list\\n            name: { get_param: prefix_list_name }\\n      - config:\\n          str_replace:\\n            params:\\n              $PREFIX_LIST_NAME:\\n                get_param: prefix_list_name\\n              $VRF_NAME:\\n                get_param: vrf_name\\n            template: |\\n               from {\\n                  destination-prefix-list {\\n                       $PREFIX_LIST_NAME;\\n                  }\\n               }\\n               then {\\n                    count $VRF_NAME_IN;\\n                    accept;\\n               }\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: firewall\\n          - config_type: tag\\n            xml_type: tag\\n            tag: family\\n          - config_type: tag\\n            xml_type: tag\\n            tag: inet\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: filter\\n            name: { get_param: inet_in_filter }\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: term\\n            name: { get_param: filter_term_name }\\n        additional_commands:\\n          str_replace:\\n            params:\\n              $TERM_NAME:\\n                get_param: filter_term_name\\n              $INET_IN:\\n                get_param: inet_in_filter\\n            template: |\\n              insert firewall family inet filter $INET_IN term $TERM_NAME before term all-accept\\n      - config:\\n          str_replace:\\n            params:\\n              $PREFIX_LIST_NAME:\\n                get_param: prefix_list_name\\n              $VRF_NAME:\\n                get_param: vrf_name\\n            template: |\\n               from {\\n                  source-prefix-list {\\n                       $PREFIX_LIST_NAME;\\n                  }\\n               }\\n               then {\\n                    count $VRF_NAME_OUT;\\n                    accept;\\n               }\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: firewall\\n          - config_type: tag\\n            xml_type: tag\\n            tag: family\\n          - config_type: tag\\n            xml_type: tag\\n            tag: inet\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: filter\\n            name: { get_param: inet_out_filter }\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: term\\n            name: { get_param: filter_term_name }\\n        additional_commands:\\n          str_replace:\\n            params:\\n              $TERM_NAME:\\n                get_param: filter_term_name\\n              $INET_OUT:\\n                get_param: inet_out_filter\\n            template: |\\n              insert firewall family inet filter $INET_OUT term $TERM_NAME before term all-accept\\n      device_ip:\\n        get_param: {{ device }}_device_ip\\n      password:\\n        get_param: {{ device }}_device_password\\n      port:\\n        get_param: {{ device }}_device_port\\n      username:\\n        get_param: {{ device }}_device_username\\n    type: OS::Contrail::NetconfNamedConfigs\\n{% endfor %}\\n\",\"watch\":[]}",1,/v2.0/heat_templates/internet_gateway,1494471728,create)'
03:02:08.498 gohan.db INFO [0m Creating resource static_route_internet
03:02:08.499 gohan.db.sql INFO [0m Executing SQL query in transaction '484c4dc1-6a6d-4764-a4f2-b8f0e67d923a': 'INSERT INTO `heat_templates` (`parameter_mappings`,`template_file`,`watch`,`handler`,`id`) VALUES ({"heat_timeout":"C60","jinja_dummy_dependency":{"field":"id","ignore_missing":true,"path":[{"id":"public_ip_id","type":"public_ip"}]},"next_hop":"Pnexthop","primary_device_ip":"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip","primary_device_password":"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password","primary_device_port":"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port","primary_device_username":"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login","route":"Pdestination","secondary_device_ip":"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip","secondary_device_password":"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password","secondary_device_port":"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port","secondary_device_username":"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login","vrf_name":"Finternet_gateway+internet_gw_id:vrf_name"},heat_template_version: 2013-05-23

description: >
  Internet Gateway Static Route

parameters:
  primary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Primary Device.
    label: Ip address of the device.
    type: string
  primary_device_port:
    description: Port that will be used to establish ssh connection to the Primary Device.
    label: Port of the ssh connection.
    type: number
  primary_device_username:
    description: Name of the user which will be used to log onto the Primary Device.
    label: User name to log on to device.
    type: string
  primary_device_password:
    description: Password of the user which will be used to log onto the Primary Device.
    label: Users password.
    type: string
  secondary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Secondary Device.
    label: Ip address of the device.
    type: string
  secondary_device_port:
    description: Port that will be used to establish ssh connection to the Secondary Device.
    label: Port of the ssh connection.
    type: number
  secondary_device_username:
    description: Name of the user which will be used to log onto the Secondary Device.
    label: User name to log on to device.
    type: string
  secondary_device_password:
    description: Password of the user which will be used to log onto the Secondary Device.
    label: Users password.
    type: string
  vrf_name:
    description: Name of VRF to add this static route
    label: VRF
    type: string
  route:
    description: Static Route definition
    label: Route
    type: string
  next_hop:
    description: Next hop for the static route
    label: Next hop
    type: string

resources:
{% for device in ["primary", "secondary"] %}
  netconf_configure_{{ device }}:
    properties:
      lock_timeout: 3000
      configs:
      - config:
          str_replace:
            params:
              $NEXT_HOP:
                get_param: next_hop
            template: |
              next-hop $NEXT_HOP;
        path:
          - config_type: tag
            xml_type: tag
            tag: routing-instances
          - config_type: name
            xml_type: named_tag
            tag: instance
            name: { get_param: vrf_name }
          - config_type: tag
            xml_type: tag
            tag: routing-options
          - config_type: tag
            xml_type: tag
            tag: static
          - config_type: named_tag
            xml_type: named_tag
            tag: route
            name: { get_param: route }
      device_ip:
        get_param: {{ device }}_device_ip
      password:
        get_param: {{ device }}_device_password
      port:
        get_param: {{ device }}_device_port
      username:
        get_param: {{ device }}_device_username
    type: OS::Contrail::NetconfNamedConfigs
{% endfor %}
,[],heat_worker,static_route_internet)'
03:02:08.500 gohan.db.sql INFO [0m Executing SQL query in transaction '484c4dc1-6a6d-4764-a4f2-b8f0e67d923a': 'INSERT INTO `events` (`marked_for_deletion`,`body`,`version`,`path`,`timestamp`,`type`) VALUES (false,"{\"handler\":\"heat_worker\",\"id\":\"static_route_internet\",\"parameter_mappings\":{\"heat_timeout\":\"C60\",\"jinja_dummy_dependency\":{\"field\":\"id\",\"ignore_missing\":true,\"path\":[{\"id\":\"public_ip_id\",\"type\":\"public_ip\"}]},\"next_hop\":\"Pnexthop\",\"primary_device_ip\":\"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip\",\"primary_device_password\":\"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password\",\"primary_device_port\":\"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port\",\"primary_device_username\":\"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login\",\"route\":\"Pdestination\",\"secondary_device_ip\":\"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip\",\"secondary_device_password\":\"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password\",\"secondary_device_port\":\"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port\",\"secondary_device_username\":\"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login\",\"vrf_name\":\"Finternet_gateway+internet_gw_id:vrf_name\"},\"template_file\":\"heat_template_version: 2013-05-23\\n\\ndescription: \\u003e\\n  Internet Gateway Static Route\\n\\nparameters:\\n  primary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\\n    label: Ip address of the device.\\n    type: string\\n  primary_device_port:\\n    description: Port that will be used to establish ssh connection to the Primary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  primary_device_username:\\n    description: Name of the user which will be used to log onto the Primary Device.\\n    label: User name to log on to device.\\n    type: string\\n  primary_device_password:\\n    description: Password of the user which will be used to log onto the Primary Device.\\n    label: Users password.\\n    type: string\\n  secondary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\\n    label: Ip address of the device.\\n    type: string\\n  secondary_device_port:\\n    description: Port that will be used to establish ssh connection to the Secondary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  secondary_device_username:\\n    description: Name of the user which will be used to log onto the Secondary Device.\\n    label: User name to log on to device.\\n    type: string\\n  secondary_device_password:\\n    description: Password of the user which will be used to log onto the Secondary Device.\\n    label: Users password.\\n    type: string\\n  vrf_name:\\n    description: Name of VRF to add this static route\\n    label: VRF\\n    type: string\\n  route:\\n    description: Static Route definition\\n    label: Route\\n    type: string\\n  next_hop:\\n    description: Next hop for the static route\\n    label: Next hop\\n    type: string\\n\\nresources:\\n{% for device in [\\\"primary\\\", \\\"secondary\\\"] %}\\n  netconf_configure_{{ device }}:\\n    properties:\\n      lock_timeout: 3000\\n      configs:\\n      - config:\\n          str_replace:\\n            params:\\n              $NEXT_HOP:\\n                get_param: next_hop\\n            template: |\\n              next-hop $NEXT_HOP;\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: routing-instances\\n          - config_type: name\\n            xml_type: named_tag\\n            tag: instance\\n            name: { get_param: vrf_name }\\n          - config_type: tag\\n            xml_type: tag\\n            tag: routing-options\\n          - config_type: tag\\n            xml_type: tag\\n            tag: static\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: route\\n            name: { get_param: route }\\n      device_ip:\\n        get_param: {{ device }}_device_ip\\n      password:\\n        get_param: {{ device }}_device_password\\n      port:\\n        get_param: {{ device }}_device_port\\n      username:\\n        get_param: {{ device }}_device_username\\n    type: OS::Contrail::NetconfNamedConfigs\\n{% endfor %}\\n\",\"watch\":[]}",1,/v2.0/heat_templates/static_route_internet,1494471728,create)'
03:02:08.504 gohan.db INFO [0m Creating resource gw_interface_internet
03:02:08.504 gohan.db.sql INFO [0m Executing SQL query in transaction '484c4dc1-6a6d-4764-a4f2-b8f0e67d923a': 'INSERT INTO `heat_templates` (`parameter_mappings`,`template_file`,`watch`,`handler`,`id`) VALUES ({"bgp_group_name":"Cinet-gw-group","gw_vip":"Pgw_vipv4","heat_timeout":"C60","jinja_dummy_dependency":{"field":"id","ignore_missing":true,"path":[{"id":"public_ip_id","type":"public_ip"}]},"jinja_force_dependency":{"field":"id","path":[{"id":"network_id","type":"network"}]},"netmask":"Pnetmask","primary_device_gw_ip":"Pprimary_ipv4","primary_device_ip":"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip","primary_device_password":"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password","primary_device_physical_interface":"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:er_physical_interface+primary_interface_id:name","primary_device_port":"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port","primary_device_priority":"C105","primary_device_username":"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login","primary_ibgp_config_group":"Finternet_gateway+internet_gw_id:internet_service+internet_service_id:primary_ibgp_config_group","secondary_device_gw_ip":"Psecondary_ipv4","secondary_device_ip":"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip","secondary_device_password":"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password","secondary_device_physical_interface":"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:er_physical_interface+secondary_interface_id:name","secondary_device_port":"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port","secondary_device_priority":"C100","secondary_device_username":"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login","secondary_ibgp_config_group":"Finternet_gateway+internet_gw_id:internet_service+internet_service_id:secondary_ibgp_config_group","vlan":"Finternet_gateway+internet_gw_id:vlan_id","vrf_name":"Finternet_gateway+internet_gw_id:vrf_name","vrrp_group":"Pvrid"},heat_template_version: 2013-05-23

description: >
  Inet Address

parameters:
  primary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Primary Device.
    label: Ip address of the device.
    type: string
  primary_device_port:
    description: Port that will be used to establish ssh connection to the Primary Device.
    label: Port of the ssh connection.
    type: number
  primary_device_username:
    description: Name of the user which will be used to log onto the Primary Device.
    label: User name to log on to device.
    type: string
  primary_device_password:
    description: Password of the user which will be used to log onto the Primary Device.
    label: Users password.
    type: string
  secondary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Secondary Device.
    label: Ip address of the device.
    type: string
  secondary_device_port:
    description: Port that will be used to establish ssh connection to the Secondary Device.
    label: Port of the ssh connection.
    type: number
  secondary_device_username:
    description: Name of the user which will be used to log onto the Secondary Device.
    label: User name to log on to device.
    type: string
  secondary_device_password:
    description: Password of the user which will be used to log onto the Secondary Device.
    label: Users password.
    type: string
  primary_device_physical_interface:
    description: MX physical port on which logical interface will be created
    label: Underlying physical interface
    type: string
  secondary_device_physical_interface:
    description: MX physical port on which logical interface will be created
    label: Underlying physical interface
    type: string
  vlan:
    description: Vlan tag for mx logical interface
    label: Vlan Tag
    type: string
  gw_vip:
    description: Virtual IP configured on VRRP
    label: Inet Address CIDR
    type: string
  primary_device_gw_ip:
    description: IP on primary device
    label: Inet Address CIDR
    type: string
  secondary_device_gw_ip:
    description: IP on secondary device
    label: Inet Address CIDR
    type: string
  netmask:
    description: Netmask for gw_ip
    label: Netmask
    type: number
  vrrp_group:
    type: string
    label: VRRP Group
  primary_device_priority:
    type: string
    label: Primary device priority
  secondary_device_priority:
    type: string
    label: Secondary device priority
  vrf_name:
    type: string
    label: VRF
  bgp_group_name:
    type: string
    label: Name of BGP Group on VRF
  primary_ibgp_config_group:
    description: Name for apply group to use for downlink interface
    label: Apply group name
    type: string
  secondary_ibgp_config_group:
    description: Name for apply group to use for downlink interface
    label: Apply group name
    type: string
resources:
{% for device in ["primary", "secondary"] %}
  netconf_configure_{{ device }}:
    properties:
      lock_timeout: 3000
      configs:
      - config:
          str_replace:
            params:
              $VRRP_GROUP:
                    get_param: vrrp_group
              $PRIORITY:
                    get_param: {{ device }}_device_priority
              $VIP:
                    get_param: gw_vip
            template: |
                vrrp-group $VRRP_GROUP {
                    virtual-address $VIP;
                    priority $PRIORITY;
                }
        path:
          - config_type: tag
            xml_type: tag
            tag: interfaces
          - config_type: name
            xml_type: named_tag
            tag: interface
            name: { get_param: {{ device }}_device_physical_interface }
          - config_type: named_tag
            xml_type: named_tag
            tag: unit
            name: { get_param: vlan }
          - config_type: tag
            xml_type: tag
            tag: family
          - config_type: tag
            xml_type: tag
            tag: inet
          - config_type: named_tag
            xml_type: named_tag
            tag: address
            name:
              str_replace:
                params:
                  $DEVICE_IP:
                    get_param: {{ device }}_device_gw_ip
                  $NETMASK:
                    get_param: netmask
                template: |
                  $DEVICE_IP/$NETMASK
      - config:
          str_replace:
            params:
              $DEVICE_GW_IP:
                    get_param: {{ device }}_device_gw_ip
              $NEIGHBOR_GW_IP:
                    get_param: {% if device == "secondary" %}primary{% else %}secondary{% endif %}_device_gw_ip
              $APPLY_GROUP:
                    get_param: {{ device }}_ibgp_config_group
            template: |
              apply-groups $APPLY_GROUP
              local-address $DEVICE_GW_IP;
              neighbor $NEIGHBOR_GW_IP;
        path:
          - config_type: tag
            xml_type: tag
            tag: routing-instances
          - config_type: name
            xml_type: named_tag
            tag: instance
            name: { get_param: vrf_name }
          - config_type: tag
            xml_type: tag
            tag: protocols
          - config_type: tag
            xml_type: tag
            tag: bgp
          - config_type: named_tag
            xml_type: named_tag
            tag: group
            name: { get_param: bgp_group_name }
      device_ip:
        get_param: {{ device }}_device_ip
      password:
        get_param: {{ device }}_device_password
      port:
        get_param: {{ device }}_device_port
      username:
        get_param: {{ device }}_device_username
    type: OS::Contrail::NetconfNamedConfigs
{% endfor %}
,[],heat_worker,gw_interface_internet)'
03:02:08.506 gohan.db.sql INFO [0m Executing SQL query in transaction '484c4dc1-6a6d-4764-a4f2-b8f0e67d923a': 'INSERT INTO `events` (`timestamp`,`type`,`marked_for_deletion`,`body`,`version`,`path`) VALUES (1494471728,create,false,"{\"handler\":\"heat_worker\",\"id\":\"gw_interface_internet\",\"parameter_mappings\":{\"bgp_group_name\":\"Cinet-gw-group\",\"gw_vip\":\"Pgw_vipv4\",\"heat_timeout\":\"C60\",\"jinja_dummy_dependency\":{\"field\":\"id\",\"ignore_missing\":true,\"path\":[{\"id\":\"public_ip_id\",\"type\":\"public_ip\"}]},\"jinja_force_dependency\":{\"field\":\"id\",\"path\":[{\"id\":\"network_id\",\"type\":\"network\"}]},\"netmask\":\"Pnetmask\",\"primary_device_gw_ip\":\"Pprimary_ipv4\",\"primary_device_ip\":\"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip\",\"primary_device_password\":\"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password\",\"primary_device_physical_interface\":\"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:er_physical_interface+primary_interface_id:name\",\"primary_device_port\":\"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port\",\"primary_device_priority\":\"C105\",\"primary_device_username\":\"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login\",\"primary_ibgp_config_group\":\"Finternet_gateway+internet_gw_id:internet_service+internet_service_id:primary_ibgp_config_group\",\"secondary_device_gw_ip\":\"Psecondary_ipv4\",\"secondary_device_ip\":\"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip\",\"secondary_device_password\":\"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password\",\"secondary_device_physical_interface\":\"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:er_physical_interface+secondary_interface_id:name\",\"secondary_device_port\":\"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port\",\"secondary_device_priority\":\"C100\",\"secondary_device_username\":\"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login\",\"secondary_ibgp_config_group\":\"Finternet_gateway+internet_gw_id:internet_service+internet_service_id:secondary_ibgp_config_group\",\"vlan\":\"Finternet_gateway+internet_gw_id:vlan_id\",\"vrf_name\":\"Finternet_gateway+internet_gw_id:vrf_name\",\"vrrp_group\":\"Pvrid\"},\"template_file\":\"heat_template_version: 2013-05-23\\n\\ndescription: \\u003e\\n  Inet Address\\n\\nparameters:\\n  primary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\\n    label: Ip address of the device.\\n    type: string\\n  primary_device_port:\\n    description: Port that will be used to establish ssh connection to the Primary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  primary_device_username:\\n    description: Name of the user which will be used to log onto the Primary Device.\\n    label: User name to log on to device.\\n    type: string\\n  primary_device_password:\\n    description: Password of the user which will be used to log onto the Primary Device.\\n    label: Users password.\\n    type: string\\n  secondary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\\n    label: Ip address of the device.\\n    type: string\\n  secondary_device_port:\\n    description: Port that will be used to establish ssh connection to the Secondary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  secondary_device_username:\\n    description: Name of the user which will be used to log onto the Secondary Device.\\n    label: User name to log on to device.\\n    type: string\\n  secondary_device_password:\\n    description: Password of the user which will be used to log onto the Secondary Device.\\n    label: Users password.\\n    type: string\\n  primary_device_physical_interface:\\n    description: MX physical port on which logical interface will be created\\n    label: Underlying physical interface\\n    type: string\\n  secondary_device_physical_interface:\\n    description: MX physical port on which logical interface will be created\\n    label: Underlying physical interface\\n    type: string\\n  vlan:\\n    description: Vlan tag for mx logical interface\\n    label: Vlan Tag\\n    type: string\\n  gw_vip:\\n    description: Virtual IP configured on VRRP\\n    label: Inet Address CIDR\\n    type: string\\n  primary_device_gw_ip:\\n    description: IP on primary device\\n    label: Inet Address CIDR\\n    type: string\\n  secondary_device_gw_ip:\\n    description: IP on secondary device\\n    label: Inet Address CIDR\\n    type: string\\n  netmask:\\n    description: Netmask for gw_ip\\n    label: Netmask\\n    type: number\\n  vrrp_group:\\n    type: string\\n    label: VRRP Group\\n  primary_device_priority:\\n    type: string\\n    label: Primary device priority\\n  secondary_device_priority:\\n    type: string\\n    label: Secondary device priority\\n  vrf_name:\\n    type: string\\n    label: VRF\\n  bgp_group_name:\\n    type: string\\n    label: Name of BGP Group on VRF\\n  primary_ibgp_config_group:\\n    description: Name for apply group to use for downlink interface\\n    label: Apply group name\\n    type: string\\n  secondary_ibgp_config_group:\\n    description: Name for apply group to use for downlink interface\\n    label: Apply group name\\n    type: string\\nresources:\\n{% for device in [\\\"primary\\\", \\\"secondary\\\"] %}\\n  netconf_configure_{{ device }}:\\n    properties:\\n      lock_timeout: 3000\\n      configs:\\n      - config:\\n          str_replace:\\n            params:\\n              $VRRP_GROUP:\\n                    get_param: vrrp_group\\n              $PRIORITY:\\n                    get_param: {{ device }}_device_priority\\n              $VIP:\\n                    get_param: gw_vip\\n            template: |\\n                vrrp-group $VRRP_GROUP {\\n                    virtual-address $VIP;\\n                    priority $PRIORITY;\\n                }\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: interfaces\\n          - config_type: name\\n            xml_type: named_tag\\n            tag: interface\\n            name: { get_param: {{ device }}_device_physical_interface }\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: unit\\n            name: { get_param: vlan }\\n          - config_type: tag\\n            xml_type: tag\\n            tag: family\\n          - config_type: tag\\n            xml_type: tag\\n            tag: inet\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: address\\n            name:\\n              str_replace:\\n                params:\\n                  $DEVICE_IP:\\n                    get_param: {{ device }}_device_gw_ip\\n                  $NETMASK:\\n                    get_param: netmask\\n                template: |\\n                  $DEVICE_IP/$NETMASK\\n      - config:\\n          str_replace:\\n            params:\\n              $DEVICE_GW_IP:\\n                    get_param: {{ device }}_device_gw_ip\\n              $NEIGHBOR_GW_IP:\\n                    get_param: {% if device == \\\"secondary\\\" %}primary{% else %}secondary{% endif %}_device_gw_ip\\n              $APPLY_GROUP:\\n                    get_param: {{ device }}_ibgp_config_group\\n            template: |\\n              apply-groups $APPLY_GROUP\\n              local-address $DEVICE_GW_IP;\\n              neighbor $NEIGHBOR_GW_IP;\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: routing-instances\\n          - config_type: name\\n            xml_type: named_tag\\n            tag: instance\\n            name: { get_param: vrf_name }\\n          - config_type: tag\\n            xml_type: tag\\n            tag: protocols\\n          - config_type: tag\\n            xml_type: tag\\n            tag: bgp\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: group\\n            name: { get_param: bgp_group_name }\\n      device_ip:\\n        get_param: {{ device }}_device_ip\\n      password:\\n        get_param: {{ device }}_device_password\\n      port:\\n        get_param: {{ device }}_device_port\\n      username:\\n        get_param: {{ device }}_device_username\\n    type: OS::Contrail::NetconfNamedConfigs\\n{% endfor %}\\n\",\"watch\":[]}",1,/v2.0/heat_templates/gw_interface_internet)'
03:02:08.507 gohan.db INFO [0m Creating resource qos_option_internet
03:02:08.507 gohan.db.sql INFO [0m Executing SQL query in transaction '484c4dc1-6a6d-4764-a4f2-b8f0e67d923a': 'INSERT INTO `heat_templates` (`template_file`,`watch`,`handler`,`id`,`parameter_mappings`) VALUES (heat_template_version: 2013-05-23

description: >
  QoS Option

parameters:
  primary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Primary Device.
    label: Ip address of the device.
    type: string
  primary_device_port:
    description: Port that will be used to establish ssh connection to the Primary Device.
    label: Port of the ssh connection.
    type: number
  primary_device_username:
    description: Name of the user which will be used to log onto the Primary Device.
    label: User name to log on to device.
    type: string
  primary_device_password:
    description: Password of the user which will be used to log onto the Primary Device.
    label: Users password.
    type: string
  secondary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Secondary Device.
    label: Ip address of the device.
    type: string
  secondary_device_port:
    description: Port that will be used to establish ssh connection to the Secondary Device.
    label: Port of the ssh connection.
    type: number
  secondary_device_username:
    description: Name of the user which will be used to log onto the Secondary Device.
    label: User name to log on to device.
    type: string
  secondary_device_password:
    description: Password of the user which will be used to log onto the Secondary Device.
    label: Users password.
    type: string
  incoming_policer_name:
    description: Name of created incoming policer
    label: Incoming policer name
    type: string
  incoming_policer_config:
    description: Configuration of incoming policer
    label: Incoming policer config
    type: string
  outgoing_policer_name:
    description: Name of created outgoing policer
    label: Outgoing policer name
    type: string
  outgoing_policer_config:
    description: Configuration of outgoing policer
    label: Outgoing policer config
    type: string
  neighbour_prefix:
    description: Name of prefix list used to specify traffic source/destination
    label: Neighbour prefix
    type: string
resources:
{% for device in ["primary", "secondary"] %}
  netconf_configure_{{ device }}:
    properties:
      lock_timeout: 3000
      configs:
      - config:
          { get_param: incoming_policer_config }
        path:
          - config_type: tag
            xml_type: tag
            tag: firewall
          - config_type: named_tag
            xml_type: named_tag
            tag: three-color-policer
            name: { get_param: incoming_policer_name }
      - config:
          { get_param: outgoing_policer_config }
        path:
          - config_type: tag
            xml_type: tag
            tag: firewall
          - config_type: named_tag
            xml_type: named_tag
            tag: policer
            name: { get_param: outgoing_policer_name }
      - config:
          str_replace:
            params:
              $PREFIX:
                get_param: neighbour_prefix
              $CLASS:
                {% if jinja_type == "besteffort" %} {{ jinja_be_forwarding_class }} {% else %} {{ jinja_ga_forwarding_class }} {% endif %}
              $POLICER_NAME:
                get_param: incoming_policer_name
            template: |
               interface-specific;
               term bgp-accept {
                   from {
                       source-prefix-list {
                           $PREFIX;
                       }
                       protocol tcp;
                       port bgp;
                   }
                   then accept;
               }
               term vrrp-accept {
                   from {
                       source-prefix-list {
                           $PREFIX;
                       }
                       protocol vrrp;
                   }
                   then accept;
               }
               term qos {
                   then {
                       three-color-policer {
                           {% if jinja_type == "besteffort" %}two-rate{% else %}single-rate{% endif %} $POLICER_NAME;
                       }
                       forwarding-class $CLASS;
                       accept;
                   }
               }
        path:
          - config_type: tag
            xml_type: tag
            tag: firewall
          - config_type: tag
            xml_type: tag
            tag: family
          - config_type: tag
            xml_type: tag
            tag: inet
          - config_type: named_tag
            xml_type: named_tag
            tag: filter
            name:
              str_replace:
                params:
                  $NAME:
                    get_param: incoming_policer_name
                template: |
                  FILTER_$NAME
      - config:
          str_replace:
            params:
              $PREFIX:
                get_param: neighbour_prefix
              $POLICER_NAME:
                get_param: outgoing_policer_name
            template: |
               interface-specific;
               term bgp-accept {
                   from {
                       destination-prefix-list {
                           $PREFIX;
                       }
                       protocol tcp;
                       port bgp;
                   }
                   then accept;
               }
               term vrrp-accept {
                   from {
                       protocol vrrp;
                   }
                   then accept;
               }
               term policer {
                   then {
                       policer $POLICER_NAME;
                       accept;
                   }
               }
        path:
          - config_type: tag
            xml_type: tag
            tag: firewall
          - config_type: tag
            xml_type: tag
            tag: family
          - config_type: tag
            xml_type: tag
            tag: inet
          - config_type: named_tag
            xml_type: named_tag
            tag: filter
            name:
              str_replace:
                params:
                  $NAME:
                    get_param: outgoing_policer_name
                template: |
                  FILTER_$NAME
      device_ip:
        get_param: {{ device }}_device_ip
      password:
        get_param: {{ device }}_device_password
      port:
        get_param: {{ device }}_device_port
      username:
        get_param: {{ device }}_device_username
    type: OS::Contrail::NetconfNamedConfigs
{% endfor %}
,[],heat_worker,qos_option_internet,{"heat_timeout":"C60","incoming_policer_config":"Pincoming_policer_config","incoming_policer_name":"Pincoming_policer_name","jinja_be_forwarding_class":"Finternet_service+internet_service_id:be_forwarding_class","jinja_ga_forwarding_class":"Finternet_service+internet_service_id:ga_forwarding_class","jinja_type":"Pqos_type","neighbour_prefix":"Finternet_service+internet_service_id:neighbour_prefix","outgoing_policer_config":"Poutgoing_policer_config","outgoing_policer_name":"Poutgoing_policer_name","primary_device_ip":"Fha_router+ha_router_id:edge_router+primary_router_id:ip","primary_device_password":"Fha_router+ha_router_id:edge_router+primary_router_id:password","primary_device_port":"Fha_router+ha_router_id:edge_router+primary_router_id:ssh_port","primary_device_username":"Fha_router+ha_router_id:edge_router+primary_router_id:login","secondary_device_ip":"Fha_router+ha_router_id:edge_router+secondary_router_id:ip","secondary_device_password":"Fha_router+ha_router_id:edge_router+secondary_router_id:password","secondary_device_port":"Fha_router+ha_router_id:edge_router+secondary_router_id:ssh_port","secondary_device_username":"Fha_router+ha_router_id:edge_router+secondary_router_id:login"})'
03:02:08.508 gohan.db.sql INFO [0m Executing SQL query in transaction '484c4dc1-6a6d-4764-a4f2-b8f0e67d923a': 'INSERT INTO `events` (`body`,`version`,`path`,`timestamp`,`type`,`marked_for_deletion`) VALUES ("{\"handler\":\"heat_worker\",\"id\":\"qos_option_internet\",\"parameter_mappings\":{\"heat_timeout\":\"C60\",\"incoming_policer_config\":\"Pincoming_policer_config\",\"incoming_policer_name\":\"Pincoming_policer_name\",\"jinja_be_forwarding_class\":\"Finternet_service+internet_service_id:be_forwarding_class\",\"jinja_ga_forwarding_class\":\"Finternet_service+internet_service_id:ga_forwarding_class\",\"jinja_type\":\"Pqos_type\",\"neighbour_prefix\":\"Finternet_service+internet_service_id:neighbour_prefix\",\"outgoing_policer_config\":\"Poutgoing_policer_config\",\"outgoing_policer_name\":\"Poutgoing_policer_name\",\"primary_device_ip\":\"Fha_router+ha_router_id:edge_router+primary_router_id:ip\",\"primary_device_password\":\"Fha_router+ha_router_id:edge_router+primary_router_id:password\",\"primary_device_port\":\"Fha_router+ha_router_id:edge_router+primary_router_id:ssh_port\",\"primary_device_username\":\"Fha_router+ha_router_id:edge_router+primary_router_id:login\",\"secondary_device_ip\":\"Fha_router+ha_router_id:edge_router+secondary_router_id:ip\",\"secondary_device_password\":\"Fha_router+ha_router_id:edge_router+secondary_router_id:password\",\"secondary_device_port\":\"Fha_router+ha_router_id:edge_router+secondary_router_id:ssh_port\",\"secondary_device_username\":\"Fha_router+ha_router_id:edge_router+secondary_router_id:login\"},\"template_file\":\"heat_template_version: 2013-05-23\\n\\ndescription: \\u003e\\n  QoS Option\\n\\nparameters:\\n  primary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\\n    label: Ip address of the device.\\n    type: string\\n  primary_device_port:\\n    description: Port that will be used to establish ssh connection to the Primary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  primary_device_username:\\n    description: Name of the user which will be used to log onto the Primary Device.\\n    label: User name to log on to device.\\n    type: string\\n  primary_device_password:\\n    description: Password of the user which will be used to log onto the Primary Device.\\n    label: Users password.\\n    type: string\\n  secondary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\\n    label: Ip address of the device.\\n    type: string\\n  secondary_device_port:\\n    description: Port that will be used to establish ssh connection to the Secondary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  secondary_device_username:\\n    description: Name of the user which will be used to log onto the Secondary Device.\\n    label: User name to log on to device.\\n    type: string\\n  secondary_device_password:\\n    description: Password of the user which will be used to log onto the Secondary Device.\\n    label: Users password.\\n    type: string\\n  incoming_policer_name:\\n    description: Name of created incoming policer\\n    label: Incoming policer name\\n    type: string\\n  incoming_policer_config:\\n    description: Configuration of incoming policer\\n    label: Incoming policer config\\n    type: string\\n  outgoing_policer_name:\\n    description: Name of created outgoing policer\\n    label: Outgoing policer name\\n    type: string\\n  outgoing_policer_config:\\n    description: Configuration of outgoing policer\\n    label: Outgoing policer config\\n    type: string\\n  neighbour_prefix:\\n    description: Name of prefix list used to specify traffic source/destination\\n    label: Neighbour prefix\\n    type: string\\nresources:\\n{% for device in [\\\"primary\\\", \\\"secondary\\\"] %}\\n  netconf_configure_{{ device }}:\\n    properties:\\n      lock_timeout: 3000\\n      configs:\\n      - config:\\n          { get_param: incoming_policer_config }\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: firewall\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: three-color-policer\\n            name: { get_param: incoming_policer_name }\\n      - config:\\n          { get_param: outgoing_policer_config }\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: firewall\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: policer\\n            name: { get_param: outgoing_policer_name }\\n      - config:\\n          str_replace:\\n            params:\\n              $PREFIX:\\n                get_param: neighbour_prefix\\n              $CLASS:\\n                {% if jinja_type == \\\"besteffort\\\" %} {{ jinja_be_forwarding_class }} {% else %} {{ jinja_ga_forwarding_class }} {% endif %}\\n              $POLICER_NAME:\\n                get_param: incoming_policer_name\\n            template: |\\n               interface-specific;\\n               term bgp-accept {\\n                   from {\\n                       source-prefix-list {\\n                           $PREFIX;\\n                       }\\n                       protocol tcp;\\n                       port bgp;\\n                   }\\n                   then accept;\\n               }\\n               term vrrp-accept {\\n                   from {\\n                       source-prefix-list {\\n                           $PREFIX;\\n                       }\\n                       protocol vrrp;\\n                   }\\n                   then accept;\\n               }\\n               term qos {\\n                   then {\\n                       three-color-policer {\\n                           {% if jinja_type == \\\"besteffort\\\" %}two-rate{% else %}single-rate{% endif %} $POLICER_NAME;\\n                       }\\n                       forwarding-class $CLASS;\\n                       accept;\\n                   }\\n               }\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: firewall\\n          - config_type: tag\\n            xml_type: tag\\n            tag: family\\n          - config_type: tag\\n            xml_type: tag\\n            tag: inet\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: filter\\n            name:\\n              str_replace:\\n                params:\\n                  $NAME:\\n                    get_param: incoming_policer_name\\n                template: |\\n                  FILTER_$NAME\\n      - config:\\n          str_replace:\\n            params:\\n              $PREFIX:\\n                get_param: neighbour_prefix\\n              $POLICER_NAME:\\n                get_param: outgoing_policer_name\\n            template: |\\n               interface-specific;\\n               term bgp-accept {\\n                   from {\\n                       destination-prefix-list {\\n                           $PREFIX;\\n                       }\\n                       protocol tcp;\\n                       port bgp;\\n                   }\\n                   then accept;\\n               }\\n               term vrrp-accept {\\n                   from {\\n                       protocol vrrp;\\n                   }\\n                   then accept;\\n               }\\n               term policer {\\n                   then {\\n                       policer $POLICER_NAME;\\n                       accept;\\n                   }\\n               }\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: firewall\\n          - config_type: tag\\n            xml_type: tag\\n            tag: family\\n          - config_type: tag\\n            xml_type: tag\\n            tag: inet\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: filter\\n            name:\\n              str_replace:\\n                params:\\n                  $NAME:\\n                    get_param: outgoing_policer_name\\n                template: |\\n                  FILTER_$NAME\\n      device_ip:\\n        get_param: {{ device }}_device_ip\\n      password:\\n        get_param: {{ device }}_device_password\\n      port:\\n        get_param: {{ device }}_device_port\\n      username:\\n        get_param: {{ device }}_device_username\\n    type: OS::Contrail::NetconfNamedConfigs\\n{% endfor %}\\n\",\"watch\":[]}",1,/v2.0/heat_templates/qos_option_internet,1494471728,create,false)'
03:02:08.510 gohan.db INFO [0m Creating resource public_ip
03:02:08.510 gohan.db.sql INFO [0m Executing SQL query in transaction '484c4dc1-6a6d-4764-a4f2-b8f0e67d923a': 'INSERT INTO `heat_templates` (`id`,`parameter_mappings`,`template_file`,`watch`,`handler`) VALUES (public_ip,{"heat_timeout":"C60","ip_cidr":"Pcidr","ip_mask":"Psubmask_length","prefix_list_name":"AFinternet_gateway+internet_gw_id:vrf_name\u0026C_prefix","primary_device_ip":"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip","primary_device_password":"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password","primary_device_port":"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port","primary_device_username":"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login","secondary_device_ip":"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip","secondary_device_password":"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password","secondary_device_port":"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port","secondary_device_username":"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login"},heat_template_version: 2013-05-23

description: >
  QoS Option

parameters:
  primary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Primary Device.
    label: Ip address of the device.
    type: string
  primary_device_port:
    description: Port that will be used to establish ssh connection to the Primary Device.
    label: Port of the ssh connection.
    type: number
  primary_device_username:
    description: Name of the user which will be used to log onto the Primary Device.
    label: User name to log on to device.
    type: string
  primary_device_password:
    description: Password of the user which will be used to log onto the Primary Device.
    label: Users password.
    type: string
  secondary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Secondary Device.
    label: Ip address of the device.
    type: string
  secondary_device_port:
    description: Port that will be used to establish ssh connection to the Secondary Device.
    label: Port of the ssh connection.
    type: number
  secondary_device_username:
    description: Name of the user which will be used to log onto the Secondary Device.
    label: User name to log on to device.
    type: string
  secondary_device_password:
    description: Password of the user which will be used to log onto the Secondary Device.
    label: Users password.
    type: string
  prefix_list_name:
    label: Prefix List name.
    type: string
  ip_cidr:
    label: Public IP CIDR
    type: string
  ip_mask:
    label: Public IP CIDR
    type: string
resources:
{% for device in ["primary", "secondary"] %}
  netconf_configure_{{ device }}:
    properties:
      lock_timeout: 3000
      configs:
      - config: ""
        path:
          - config_type: tag
            xml_type: tag
            tag: policy-options
          - config_type: named_tag
            xml_type: named_tag
            tag: prefix-list
            name: { get_param: prefix_list_name }
          - config_type: name
            xml_type: named_tag
            tag: prefix-list-item
            name:
              str_replace:
                params:
                  $CIDR:
                    { get_param: ip_cidr }
                  $MASK:
                    { get_param: ip_mask }
                template: |
                  $CIDR/$MASK
      device_ip:
        get_param: {{ device }}_device_ip
      password:
        get_param: {{ device }}_device_password
      port:
        get_param: {{ device }}_device_port
      username:
        get_param: {{ device }}_device_username
    type: OS::Contrail::NetconfNamedConfigs
{% endfor %}
,[],heat_worker)'
03:02:08.511 gohan.db.sql INFO [0m Executing SQL query in transaction '484c4dc1-6a6d-4764-a4f2-b8f0e67d923a': 'INSERT INTO `events` (`path`,`timestamp`,`type`,`marked_for_deletion`,`body`,`version`) VALUES (/v2.0/heat_templates/public_ip,1494471728,create,false,"{\"handler\":\"heat_worker\",\"id\":\"public_ip\",\"parameter_mappings\":{\"heat_timeout\":\"C60\",\"ip_cidr\":\"Pcidr\",\"ip_mask\":\"Psubmask_length\",\"prefix_list_name\":\"AFinternet_gateway+internet_gw_id:vrf_name\\u0026C_prefix\",\"primary_device_ip\":\"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip\",\"primary_device_password\":\"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password\",\"primary_device_port\":\"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port\",\"primary_device_username\":\"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login\",\"secondary_device_ip\":\"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip\",\"secondary_device_password\":\"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password\",\"secondary_device_port\":\"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port\",\"secondary_device_username\":\"Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login\"},\"template_file\":\"heat_template_version: 2013-05-23\\n\\ndescription: \\u003e\\n  QoS Option\\n\\nparameters:\\n  primary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\\n    label: Ip address of the device.\\n    type: string\\n  primary_device_port:\\n    description: Port that will be used to establish ssh connection to the Primary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  primary_device_username:\\n    description: Name of the user which will be used to log onto the Primary Device.\\n    label: User name to log on to device.\\n    type: string\\n  primary_device_password:\\n    description: Password of the user which will be used to log onto the Primary Device.\\n    label: Users password.\\n    type: string\\n  secondary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\\n    label: Ip address of the device.\\n    type: string\\n  secondary_device_port:\\n    description: Port that will be used to establish ssh connection to the Secondary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  secondary_device_username:\\n    description: Name of the user which will be used to log onto the Secondary Device.\\n    label: User name to log on to device.\\n    type: string\\n  secondary_device_password:\\n    description: Password of the user which will be used to log onto the Secondary Device.\\n    label: Users password.\\n    type: string\\n  prefix_list_name:\\n    label: Prefix List name.\\n    type: string\\n  ip_cidr:\\n    label: Public IP CIDR\\n    type: string\\n  ip_mask:\\n    label: Public IP CIDR\\n    type: string\\nresources:\\n{% for device in [\\\"primary\\\", \\\"secondary\\\"] %}\\n  netconf_configure_{{ device }}:\\n    properties:\\n      lock_timeout: 3000\\n      configs:\\n      - config: \\\"\\\"\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: policy-options\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: prefix-list\\n            name: { get_param: prefix_list_name }\\n          - config_type: name\\n            xml_type: named_tag\\n            tag: prefix-list-item\\n            name:\\n              str_replace:\\n                params:\\n                  $CIDR:\\n                    { get_param: ip_cidr }\\n                  $MASK:\\n                    { get_param: ip_mask }\\n                template: |\\n                  $CIDR/$MASK\\n      device_ip:\\n        get_param: {{ device }}_device_ip\\n      password:\\n        get_param: {{ device }}_device_password\\n      port:\\n        get_param: {{ device }}_device_port\\n      username:\\n        get_param: {{ device }}_device_username\\n    type: OS::Contrail::NetconfNamedConfigs\\n{% endfor %}\\n\",\"watch\":[]}",1)'
03:02:08.512 gohan.db INFO [0m Populating resources for schema worker_data
03:02:08.514 gohan.db INFO [0m Populating resources for schema tenant
03:02:08.517 gohan.db INFO [0m Populating resources for schema edge_router
03:02:08.519 gohan.db INFO [0m Populating resources for schema er_physical_interface
03:02:08.522 gohan.db INFO [0m Populating resources for schema ha_router
03:02:08.526 gohan.db INFO [0m Populating resources for schema ha_interface
03:02:08.530 gohan.db INFO [0m Populating resources for schema internet_service
03:02:08.534 gohan.db INFO [0m Populating resources for schema vpn_service
03:02:08.537 gohan.db INFO [0m Populating resources for schema aws_service
03:02:08.539 gohan.db INFO [0m Populating resources for schema interdc_service
03:02:08.542 gohan.db INFO [0m Populating resources for schema common_function_pool
03:02:08.544 gohan.db INFO [0m Populating resources for schema nat_ip_pool
03:02:08.547 gohan.db INFO [0m Populating resources for schema common_function
03:02:08.549 gohan.db INFO [0m Populating resources for schema public_ip_pool
03:02:08.553 gohan.db INFO [0m Populating resources for schema suspended_public_ip
03:02:08.565 gohan.db INFO [0m Populating resources for schema qos_option
03:02:08.568 gohan.db INFO [0m Populating resources for schema vpn_gateway
03:02:08.570 gohan.db INFO [0m Populating resources for schema vpn_interface
03:02:08.573 gohan.db INFO [0m Populating resources for schema aws_gateway
03:02:08.575 gohan.db INFO [0m Populating resources for schema aws_interface
03:02:08.578 gohan.db INFO [0m Populating resources for schema internet_gateway
03:02:08.580 gohan.db INFO [0m Populating resources for schema common_function_gateway
03:02:08.583 gohan.db INFO [0m Populating resources for schema public_ip
03:02:08.587 gohan.db INFO [0m Populating resources for schema interdc_gateway
03:02:08.594 gohan.db INFO [0m Populating resources for schema interdc_interface
03:02:08.596 gohan.db INFO [0m Populating resources for schema gw_interface
03:02:08.599 gohan.db INFO [0m Populating resources for schema static_route
03:02:08.602 gohan.db INFO [0m Populating resources for schema vnf_template
03:02:08.604 gohan.db INFO [0m Populating resources for schema vnf_plan
03:02:08.607 gohan.db INFO [0m Populating resources for schema vnf_instance
03:02:08.609 gohan.db INFO [0m Populating resources for schema vnf_interface
03:02:08.612 gohan.db INFO [0m Populating resources for schema firewall_plan
03:02:08.615 gohan.db INFO [0m Populating resources for schema firewall
03:02:08.620 gohan.db INFO [0m Populating resources for schema firewall_interface
03:02:08.622 gohan.db INFO [0m Populating resources for schema load_balancer_plan
03:02:08.625 gohan.db INFO [0m Populating resources for schema load_balancer_conf
03:02:08.627 gohan.db INFO [0m Populating resources for schema load_balancer
03:02:08.630 gohan.db INFO [0m Populating resources for schema load_balancer_interface
03:02:08.632 gohan.db INFO [0m Populating resources for schema load_balancer_syslog_server
03:02:08.635 gohan.db INFO [0m Populating resources for schema billing_usage
03:02:08.637 gohan.db INFO [0m Populating resources for schema billing_resource
03:02:08.641 gohan.db INFO [0m Populating resources for schema monitoring
03:02:08.649 gohan.db INFO [0m Populating resources for schema resource_mapping
03:02:08.653 gohan.db INFO [0m Populating resources for schema colocation_space
03:02:08.655 gohan.db INFO [0m Populating resources for schema colocation_physical_link
03:02:08.658 gohan.db INFO [0m Populating resources for schema colocation_logical_link
03:02:08.660 gohan.db INFO [0m Populating resources for schema tenant_connection
03:02:08.669 gohan.db INFO [0m Populating resources for schema hosting_physical_link
03:02:08.672 gohan.db INFO [0m Populating resources for schema hosting_logical_link
03:02:08.706 gohan.server.core INFO [0m Importing data from ./init/vpn_templates.yaml ...
03:02:08.711 gohan.db INFO [0m Populating resources for schema schema
03:02:08.724 gohan.db INFO [0m Populating resources for schema policy
03:02:08.727 gohan.db INFO [0m Populating resources for schema extension
03:02:08.733 gohan.db INFO [0m Populating resources for schema event
03:02:08.736 gohan.db INFO [0m Populating resources for schema namespace
03:02:08.750 gohan.db INFO [0m Populating resources for schema location
03:02:08.757 gohan.db INFO [0m Populating resources for schema ese_device
03:02:08.759 gohan.db INFO [0m Populating resources for schema network
03:02:08.774 gohan.db INFO [0m Populating resources for schema subnet
03:02:08.782 gohan.db INFO [0m Populating resources for schema port
03:02:08.795 gohan.db INFO [0m Populating resources for schema ese_physical_port
03:02:08.799 gohan.db INFO [0m Populating resources for schema ese_logical_port
03:02:08.806 gohan.db INFO [0m Populating resources for schema local_subnet
03:02:08.818 gohan.db INFO [0m Populating resources for schema server
03:02:08.824 gohan.db INFO [0m Populating resources for schema physical_port
03:02:08.834 gohan.db INFO [0m Populating resources for schema quota
03:02:08.842 gohan.db INFO [0m Populating resources for schema reserve_address
03:02:08.848 gohan.db INFO [0m Populating resources for schema neutron_extension
03:02:08.859 gohan.db INFO [0m Populating resources for schema heat_template
03:02:08.868 gohan.db INFO [0m Creating resource qos_option_vpn
03:02:08.869 gohan.db.sql INFO [0m Executing SQL query in transaction 'f15e8ec3-f751-43eb-9ce3-0d4948a2cc74': 'INSERT INTO `heat_templates` (`handler`,`id`,`parameter_mappings`,`template_file`,`watch`) VALUES (heat_worker,qos_option_vpn,{"heat_timeout":"C60","incoming_policer_config":"Pincoming_policer_config","incoming_policer_name":"Pincoming_policer_name","jinja_be_forwarding_class":"Fvpn_service+vpn_service_id:be_forwarding_class","jinja_ga_forwarding_class":"Fvpn_service+vpn_service_id:ga_forwarding_class","jinja_type":"Pqos_type","neighbour_prefix":"Fvpn_service+vpn_service_id:neighbour_prefix","outgoing_policer_config":"Poutgoing_policer_config","outgoing_policer_name":"Poutgoing_policer_name","primary_device_ip":"Fha_router+ha_router_id:edge_router+primary_router_id:ip","primary_device_password":"Fha_router+ha_router_id:edge_router+primary_router_id:password","primary_device_port":"Fha_router+ha_router_id:edge_router+primary_router_id:ssh_port","primary_device_username":"Fha_router+ha_router_id:edge_router+primary_router_id:login","secondary_device_ip":"Fha_router+ha_router_id:edge_router+secondary_router_id:ip","secondary_device_password":"Fha_router+ha_router_id:edge_router+secondary_router_id:password","secondary_device_port":"Fha_router+ha_router_id:edge_router+secondary_router_id:ssh_port","secondary_device_username":"Fha_router+ha_router_id:edge_router+secondary_router_id:login"},heat_template_version: 2013-05-23

description: >
  QoS Option

parameters:
  primary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Primary Device.
    label: Ip address of the device.
    type: string
  primary_device_port:
    description: Port that will be used to establish ssh connection to the Primary Device.
    label: Port of the ssh connection.
    type: number
  primary_device_username:
    description: Name of the user which will be used to log onto the Primary Device.
    label: User name to log on to device.
    type: string
  primary_device_password:
    description: Password of the user which will be used to log onto the Primary Device.
    label: Users password.
    type: string
  secondary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Secondary Device.
    label: Ip address of the device.
    type: string
  secondary_device_port:
    description: Port that will be used to establish ssh connection to the Secondary Device.
    label: Port of the ssh connection.
    type: number
  secondary_device_username:
    description: Name of the user which will be used to log onto the Secondary Device.
    label: User name to log on to device.
    type: string
  secondary_device_password:
    description: Password of the user which will be used to log onto the Secondary Device.
    label: Users password.
    type: string
  incoming_policer_name:
    description: Name of created incoming policer
    label: Incoming policer name
    type: string
  incoming_policer_config:
    description: Configuration of incoming policer
    label: Incoming policer config
    type: string
  outgoing_policer_name:
    description: Name of created outgoing policer
    label: Outgoing policer name
    type: string
  outgoing_policer_config:
    description: Configuration of outgoing policer
    label: Outgoing policer config
    type: string
  neighbour_prefix:
    description: Name of prefix list used to specify traffic source/destination
    label: Neighbour prefix
    type: string
resources:
{% for device in ["primary", "secondary"] %}
  netconf_configure_{{ device }}:
    properties:
      lock_timeout: 3000
      configs:
      - config:
          { get_param: incoming_policer_config }
        path:
          - config_type: tag
            xml_type: tag
            tag: firewall
          - config_type: named_tag
            xml_type: named_tag
            tag: three-color-policer
            name: { get_param: incoming_policer_name }
      - config:
          { get_param: outgoing_policer_config }
        path:
          - config_type: tag
            xml_type: tag
            tag: firewall
          - config_type: named_tag
            xml_type: named_tag
            tag: policer
            name: { get_param: outgoing_policer_name }
      - config:
          str_replace:
            params:
              $PREFIX:
                get_param: neighbour_prefix
              $CLASS:
                {% if jinja_type == "besteffort" %} {{ jinja_be_forwarding_class }} {% else %} {{ jinja_ga_forwarding_class }} {% endif %}
              $POLICER_NAME:
                get_param: incoming_policer_name
            template: |
               interface-specific;
               term bgp-accept {
                   from {
                       source-prefix-list {
                           $PREFIX;
                       }
                       protocol tcp;
                       port bgp;
                   }
                   then accept;
               }
               term vrrp-accept {
                   from {
                       source-prefix-list {
                           $PREFIX;
                       }
                       protocol vrrp;
                   }
                   then accept;
               }
               term qos {
                   then {
                       three-color-policer {
                           {% if jinja_type == "besteffort" %}two-rate{% else %}single-rate{% endif %} $POLICER_NAME;
                       }
                       forwarding-class $CLASS;
                       accept;
                   }
               }
        path:
          - config_type: tag
            xml_type: tag
            tag: firewall
          - config_type: named_tag
            xml_type: named_tag
            tag: filter
            name:
              str_replace:
                params:
                  $NAME:
                    get_param: incoming_policer_name
                template: |
                  FILTER_$NAME
      - config:
          str_replace:
            params:
              $PREFIX:
                get_param: neighbour_prefix
              $POLICER_NAME:
                get_param: outgoing_policer_name
            template: |
               interface-specific;
               term bgp-accept {
                   from {
                       destination-prefix-list {
                           $PREFIX;
                       }
                       protocol tcp;
                       port bgp;
                   }
                   then accept;
               }
               term vrrp-accept {
                   from {
                       protocol vrrp;
                   }
                   then accept;
               }
               term policer {
                   then {
                       policer $POLICER_NAME;
                       accept;
                   }
               }
        path:
          - config_type: tag
            xml_type: tag
            tag: firewall
          - config_type: named_tag
            xml_type: named_tag
            tag: filter
            name:
              str_replace:
                params:
                  $NAME:
                    get_param: outgoing_policer_name
                template: |
                  FILTER_$NAME
      device_ip:
        get_param: {{ device }}_device_ip
      password:
        get_param: {{ device }}_device_password
      port:
        get_param: {{ device }}_device_port
      username:
        get_param: {{ device }}_device_username
    type: OS::Contrail::NetconfNamedConfigs
{% endfor %}
,[])'
03:02:08.870 gohan.db.sql INFO [0m Executing SQL query in transaction 'f15e8ec3-f751-43eb-9ce3-0d4948a2cc74': 'INSERT INTO `events` (`type`,`marked_for_deletion`,`body`,`version`,`path`,`timestamp`) VALUES (create,false,"{\"handler\":\"heat_worker\",\"id\":\"qos_option_vpn\",\"parameter_mappings\":{\"heat_timeout\":\"C60\",\"incoming_policer_config\":\"Pincoming_policer_config\",\"incoming_policer_name\":\"Pincoming_policer_name\",\"jinja_be_forwarding_class\":\"Fvpn_service+vpn_service_id:be_forwarding_class\",\"jinja_ga_forwarding_class\":\"Fvpn_service+vpn_service_id:ga_forwarding_class\",\"jinja_type\":\"Pqos_type\",\"neighbour_prefix\":\"Fvpn_service+vpn_service_id:neighbour_prefix\",\"outgoing_policer_config\":\"Poutgoing_policer_config\",\"outgoing_policer_name\":\"Poutgoing_policer_name\",\"primary_device_ip\":\"Fha_router+ha_router_id:edge_router+primary_router_id:ip\",\"primary_device_password\":\"Fha_router+ha_router_id:edge_router+primary_router_id:password\",\"primary_device_port\":\"Fha_router+ha_router_id:edge_router+primary_router_id:ssh_port\",\"primary_device_username\":\"Fha_router+ha_router_id:edge_router+primary_router_id:login\",\"secondary_device_ip\":\"Fha_router+ha_router_id:edge_router+secondary_router_id:ip\",\"secondary_device_password\":\"Fha_router+ha_router_id:edge_router+secondary_router_id:password\",\"secondary_device_port\":\"Fha_router+ha_router_id:edge_router+secondary_router_id:ssh_port\",\"secondary_device_username\":\"Fha_router+ha_router_id:edge_router+secondary_router_id:login\"},\"template_file\":\"heat_template_version: 2013-05-23\\n\\ndescription: \\u003e\\n  QoS Option\\n\\nparameters:\\n  primary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\\n    label: Ip address of the device.\\n    type: string\\n  primary_device_port:\\n    description: Port that will be used to establish ssh connection to the Primary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  primary_device_username:\\n    description: Name of the user which will be used to log onto the Primary Device.\\n    label: User name to log on to device.\\n    type: string\\n  primary_device_password:\\n    description: Password of the user which will be used to log onto the Primary Device.\\n    label: Users password.\\n    type: string\\n  secondary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\\n    label: Ip address of the device.\\n    type: string\\n  secondary_device_port:\\n    description: Port that will be used to establish ssh connection to the Secondary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  secondary_device_username:\\n    description: Name of the user which will be used to log onto the Secondary Device.\\n    label: User name to log on to device.\\n    type: string\\n  secondary_device_password:\\n    description: Password of the user which will be used to log onto the Secondary Device.\\n    label: Users password.\\n    type: string\\n  incoming_policer_name:\\n    description: Name of created incoming policer\\n    label: Incoming policer name\\n    type: string\\n  incoming_policer_config:\\n    description: Configuration of incoming policer\\n    label: Incoming policer config\\n    type: string\\n  outgoing_policer_name:\\n    description: Name of created outgoing policer\\n    label: Outgoing policer name\\n    type: string\\n  outgoing_policer_config:\\n    description: Configuration of outgoing policer\\n    label: Outgoing policer config\\n    type: string\\n  neighbour_prefix:\\n    description: Name of prefix list used to specify traffic source/destination\\n    label: Neighbour prefix\\n    type: string\\nresources:\\n{% for device in [\\\"primary\\\", \\\"secondary\\\"] %}\\n  netconf_configure_{{ device }}:\\n    properties:\\n      lock_timeout: 3000\\n      configs:\\n      - config:\\n          { get_param: incoming_policer_config }\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: firewall\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: three-color-policer\\n            name: { get_param: incoming_policer_name }\\n      - config:\\n          { get_param: outgoing_policer_config }\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: firewall\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: policer\\n            name: { get_param: outgoing_policer_name }\\n      - config:\\n          str_replace:\\n            params:\\n              $PREFIX:\\n                get_param: neighbour_prefix\\n              $CLASS:\\n                {% if jinja_type == \\\"besteffort\\\" %} {{ jinja_be_forwarding_class }} {% else %} {{ jinja_ga_forwarding_class }} {% endif %}\\n              $POLICER_NAME:\\n                get_param: incoming_policer_name\\n            template: |\\n               interface-specific;\\n               term bgp-accept {\\n                   from {\\n                       source-prefix-list {\\n                           $PREFIX;\\n                       }\\n                       protocol tcp;\\n                       port bgp;\\n                   }\\n                   then accept;\\n               }\\n               term vrrp-accept {\\n                   from {\\n                       source-prefix-list {\\n                           $PREFIX;\\n                       }\\n                       protocol vrrp;\\n                   }\\n                   then accept;\\n               }\\n               term qos {\\n                   then {\\n                       three-color-policer {\\n                           {% if jinja_type == \\\"besteffort\\\" %}two-rate{% else %}single-rate{% endif %} $POLICER_NAME;\\n                       }\\n                       forwarding-class $CLASS;\\n                       accept;\\n                   }\\n               }\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: firewall\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: filter\\n            name:\\n              str_replace:\\n                params:\\n                  $NAME:\\n                    get_param: incoming_policer_name\\n                template: |\\n                  FILTER_$NAME\\n      - config:\\n          str_replace:\\n            params:\\n              $PREFIX:\\n                get_param: neighbour_prefix\\n              $POLICER_NAME:\\n                get_param: outgoing_policer_name\\n            template: |\\n               interface-specific;\\n               term bgp-accept {\\n                   from {\\n                       destination-prefix-list {\\n                           $PREFIX;\\n                       }\\n                       protocol tcp;\\n                       port bgp;\\n                   }\\n                   then accept;\\n               }\\n               term vrrp-accept {\\n                   from {\\n                       protocol vrrp;\\n                   }\\n                   then accept;\\n               }\\n               term policer {\\n                   then {\\n                       policer $POLICER_NAME;\\n                       accept;\\n                   }\\n               }\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: firewall\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: filter\\n            name:\\n              str_replace:\\n                params:\\n                  $NAME:\\n                    get_param: outgoing_policer_name\\n                template: |\\n                  FILTER_$NAME\\n      device_ip:\\n        get_param: {{ device }}_device_ip\\n      password:\\n        get_param: {{ device }}_device_password\\n      port:\\n        get_param: {{ device }}_device_port\\n      username:\\n        get_param: {{ device }}_device_username\\n    type: OS::Contrail::NetconfNamedConfigs\\n{% endfor %}\\n\",\"watch\":[]}",1,/v2.0/heat_templates/qos_option_vpn,1494471728)'
03:02:08.871 gohan.db INFO [0m Creating resource vpn_gateway
03:02:08.872 gohan.db.sql INFO [0m Executing SQL query in transaction 'f15e8ec3-f751-43eb-9ce3-0d4948a2cc74': 'INSERT INTO `heat_templates` (`handler`,`id`,`parameter_mappings`,`template_file`,`watch`) VALUES (heat_worker,vpn_gateway,{"downlink_vlan":"Pdownlink_vlan_id","heat_timeout":"C60","input_filter_name":"ACFILTER_\u0026Fqos_option+qos_option_id:incoming_policer_name","output_filter_name":"ACFILTER_\u0026Fqos_option+qos_option_id:outgoing_policer_name","primary_device_ip":"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip","primary_device_logical_downlink_interface":"Pprimary_logical_downlink_interface_name","primary_device_logical_uplink_interface":"Pprimary_logical_uplink_interface_name","primary_device_password":"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password","primary_device_physical_downlink_interface":"Fha_interface+downlink_interface_id:er_physical_interface+primary_interface_id:name","primary_device_physical_uplink_interface":"Fha_interface+uplink_interface_id:er_physical_interface+primary_interface_id:name","primary_device_port":"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port","primary_device_username":"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login","primary_downlink_vrrp_config_group":"Fvpn_service+vpn_service_id:primary_downlink_vrrp_config_group","secondary_device_ip":"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip","secondary_device_logical_downlink_interface":"Psecondary_logical_downlink_interface_name","secondary_device_logical_uplink_interface":"Psecondary_logical_uplink_interface_name","secondary_device_password":"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password","secondary_device_physical_downlink_interface":"Fha_interface+downlink_interface_id:er_physical_interface+secondary_interface_id:name","secondary_device_physical_uplink_interface":"Fha_interface+uplink_interface_id:er_physical_interface+secondary_interface_id:name","secondary_device_port":"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port","secondary_device_username":"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login","secondary_downlink_vrrp_config_group":"Fvpn_service+vpn_service_id:secondary_downlink_vrrp_config_group","uplink_vlan":"Puplink_vlan_id","vrf_name":"Pvrf_name"},heat_template_version: 2013-05-23

description: >
  VPN Gateway

parameters:
  primary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Primary Device.
    label: Ip address of the device.
    type: string
  primary_device_port:
    description: Port that will be used to establish ssh connection to the Primary Device.
    label: Port of the ssh connection.
    type: number
  primary_device_username:
    description: Name of the user which will be used to log onto the Primary Device.
    label: User name to log on to device.
    type: string
  primary_device_password:
    description: Password of the user which will be used to log onto the Primary Device.
    label: Users password.
    type: string
  primary_device_logical_downlink_interface:
    description: Name of the created logical downlink interface on the Primary device
    label: Logical Interface name
    type: string
  primary_device_physical_downlink_interface:
    description: Physical port on the Primary device on which the logical downlink port will be configured
    label: Underlying physical interface
    type: string
  primary_device_logical_uplink_interface:
    description: Name of the created logical uplink interface on the Primary device
    label: Logical Interface name
    type: string
  primary_device_physical_uplink_interface:
    description: Physical port on the Primary device on which the logical uplink port will be configured
    label: Underlying physical interface
    type: string
  secondary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Secondary Device.
    label: Ip address of the device.
    type: string
  secondary_device_port:
    description: Port that will be used to establish ssh connection to the Secondary Device.
    label: Port of the ssh connection.
    type: number
  secondary_device_username:
    description: Name of the user which will be used to log onto the Secondary Device.
    label: User name to log on to device.
    type: string
  secondary_device_password:
    description: Password of the user which will be used to log onto the Secondary Device.
    label: Users password.
    type: string
  secondary_device_logical_downlink_interface:
    description: Name of the created logical downlink interface on the Secondary device
    label: Logical Interface name
    type: string
  secondary_device_physical_downlink_interface:
    description: Physical port on the Secondary device on which the logical downlink port will be configured
    label: Underlying physical interface
    type: string
  secondary_device_logical_uplink_interface:
    description: Name of the created logical uplink interface on the Secondary device
    label: Logical Interface name
    type: string
  secondary_device_physical_uplink_interface:
    description: Physical port on the Secondary device on which the logical uplink port will be configured
    label: Underlying physical interface
    type: string
  downlink_vlan:
    description: vlan tag used by logical downlink interface
    label: VLAN ID
    type: string
  uplink_vlan:
    description: vlan tag used by logical uplink interface
    label: VLAN ID
    type: string
  vrf_name:
    description: Name for VRF used by logical interfaces
    label: VRF name
    type: string
  input_filter_name:
    description: Name for policer used for input
    label: Input filter name
    type: string
  output_filter_name:
    description: Name for policer used for output
    label: Output filter name
    type: string
  primary_downlink_vrrp_config_group:
    description: Name for apply group to use for downlink interface for VRRP
    label: Apply group name
    type: string
  secondary_downlink_vrrp_config_group:
    description: Name for apply group to use for downlink interface for VRRP
    label: Apply group name
    type: string

resources:
{% for device in ["primary", "secondary"] %}
  netconf_configure_{{ device }}:
    properties:
      lock_timeout: 3000
      on_update: merge
      configs:
      - config:
          str_replace:
            params:
              $VLAN:
                get_param: downlink_vlan
              $INPUT_FILTER:
                get_param: input_filter_name
              $OUTPUT_FILTER:
                get_param: output_filter_name
              $APPLY_GROUP:
                get_param: {{ device }}_downlink_vrrp_config_group
            template: |
              apply-groups $APPLY_GROUP
              vlan-id $VLAN;
              description vpn_gw;
              family inet {
                  filter {
                      input $INPUT_FILTER;
                      output $OUTPUT_FILTER;
                  }
              }
        path:
          - config_type: tag
            xml_type: tag
            tag: interfaces
          - config_type: name
            xml_type: named_tag
            tag: interface
            name: { get_param: {{ device }}_device_physical_downlink_interface }
          - config_type: named_tag
            xml_type: named_tag
            tag: unit
            name: { get_param: downlink_vlan }
      - config:
          str_replace:
            params:
              $LIFD:
                get_param: {{ device }}_device_logical_downlink_interface
              $LIFU:
                get_param: {{ device }}_device_logical_uplink_interface
            template: |
                instance-type virtual-router;
                interface $LIFD;
                interface $LIFU;
        path:
          - config_type: tag
            xml_type: tag
            tag: routing-instances
          - config_type: name
            xml_type: named_tag
            tag: instance
            name: { get_param: vrf_name }
      - config:
          str_replace:
            params:
              $VLAN:
                get_param: uplink_vlan
            template: |
              vlan-id $VLAN;
              description CloudGW_vpn;
        path:
          - config_type: tag
            xml_type: tag
            tag: interfaces
          - config_type: name
            xml_type: named_tag
            tag: interface
            name: { get_param: {{ device }}_device_physical_uplink_interface }
          - config_type: named_tag
            xml_type: named_tag
            tag: unit
            name: { get_param: uplink_vlan }
      device_ip:
        get_param: {{ device }}_device_ip
      password:
        get_param: {{ device }}_device_password
      port:
        get_param: {{ device }}_device_port
      username:
        get_param: {{ device }}_device_username
    type: OS::Contrail::NetconfNamedConfigs
{% endfor %}
,[])'
03:02:08.873 gohan.db.sql INFO [0m Executing SQL query in transaction 'f15e8ec3-f751-43eb-9ce3-0d4948a2cc74': 'INSERT INTO `events` (`path`,`timestamp`,`type`,`marked_for_deletion`,`body`,`version`) VALUES (/v2.0/heat_templates/vpn_gateway,1494471728,create,false,"{\"handler\":\"heat_worker\",\"id\":\"vpn_gateway\",\"parameter_mappings\":{\"downlink_vlan\":\"Pdownlink_vlan_id\",\"heat_timeout\":\"C60\",\"input_filter_name\":\"ACFILTER_\\u0026Fqos_option+qos_option_id:incoming_policer_name\",\"output_filter_name\":\"ACFILTER_\\u0026Fqos_option+qos_option_id:outgoing_policer_name\",\"primary_device_ip\":\"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip\",\"primary_device_logical_downlink_interface\":\"Pprimary_logical_downlink_interface_name\",\"primary_device_logical_uplink_interface\":\"Pprimary_logical_uplink_interface_name\",\"primary_device_password\":\"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password\",\"primary_device_physical_downlink_interface\":\"Fha_interface+downlink_interface_id:er_physical_interface+primary_interface_id:name\",\"primary_device_physical_uplink_interface\":\"Fha_interface+uplink_interface_id:er_physical_interface+primary_interface_id:name\",\"primary_device_port\":\"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port\",\"primary_device_username\":\"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login\",\"primary_downlink_vrrp_config_group\":\"Fvpn_service+vpn_service_id:primary_downlink_vrrp_config_group\",\"secondary_device_ip\":\"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip\",\"secondary_device_logical_downlink_interface\":\"Psecondary_logical_downlink_interface_name\",\"secondary_device_logical_uplink_interface\":\"Psecondary_logical_uplink_interface_name\",\"secondary_device_password\":\"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password\",\"secondary_device_physical_downlink_interface\":\"Fha_interface+downlink_interface_id:er_physical_interface+secondary_interface_id:name\",\"secondary_device_physical_uplink_interface\":\"Fha_interface+uplink_interface_id:er_physical_interface+secondary_interface_id:name\",\"secondary_device_port\":\"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port\",\"secondary_device_username\":\"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login\",\"secondary_downlink_vrrp_config_group\":\"Fvpn_service+vpn_service_id:secondary_downlink_vrrp_config_group\",\"uplink_vlan\":\"Puplink_vlan_id\",\"vrf_name\":\"Pvrf_name\"},\"template_file\":\"heat_template_version: 2013-05-23\\n\\ndescription: \\u003e\\n  VPN Gateway\\n\\nparameters:\\n  primary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\\n    label: Ip address of the device.\\n    type: string\\n  primary_device_port:\\n    description: Port that will be used to establish ssh connection to the Primary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  primary_device_username:\\n    description: Name of the user which will be used to log onto the Primary Device.\\n    label: User name to log on to device.\\n    type: string\\n  primary_device_password:\\n    description: Password of the user which will be used to log onto the Primary Device.\\n    label: Users password.\\n    type: string\\n  primary_device_logical_downlink_interface:\\n    description: Name of the created logical downlink interface on the Primary device\\n    label: Logical Interface name\\n    type: string\\n  primary_device_physical_downlink_interface:\\n    description: Physical port on the Primary device on which the logical downlink port will be configured\\n    label: Underlying physical interface\\n    type: string\\n  primary_device_logical_uplink_interface:\\n    description: Name of the created logical uplink interface on the Primary device\\n    label: Logical Interface name\\n    type: string\\n  primary_device_physical_uplink_interface:\\n    description: Physical port on the Primary device on which the logical uplink port will be configured\\n    label: Underlying physical interface\\n    type: string\\n  secondary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\\n    label: Ip address of the device.\\n    type: string\\n  secondary_device_port:\\n    description: Port that will be used to establish ssh connection to the Secondary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  secondary_device_username:\\n    description: Name of the user which will be used to log onto the Secondary Device.\\n    label: User name to log on to device.\\n    type: string\\n  secondary_device_password:\\n    description: Password of the user which will be used to log onto the Secondary Device.\\n    label: Users password.\\n    type: string\\n  secondary_device_logical_downlink_interface:\\n    description: Name of the created logical downlink interface on the Secondary device\\n    label: Logical Interface name\\n    type: string\\n  secondary_device_physical_downlink_interface:\\n    description: Physical port on the Secondary device on which the logical downlink port will be configured\\n    label: Underlying physical interface\\n    type: string\\n  secondary_device_logical_uplink_interface:\\n    description: Name of the created logical uplink interface on the Secondary device\\n    label: Logical Interface name\\n    type: string\\n  secondary_device_physical_uplink_interface:\\n    description: Physical port on the Secondary device on which the logical uplink port will be configured\\n    label: Underlying physical interface\\n    type: string\\n  downlink_vlan:\\n    description: vlan tag used by logical downlink interface\\n    label: VLAN ID\\n    type: string\\n  uplink_vlan:\\n    description: vlan tag used by logical uplink interface\\n    label: VLAN ID\\n    type: string\\n  vrf_name:\\n    description: Name for VRF used by logical interfaces\\n    label: VRF name\\n    type: string\\n  input_filter_name:\\n    description: Name for policer used for input\\n    label: Input filter name\\n    type: string\\n  output_filter_name:\\n    description: Name for policer used for output\\n    label: Output filter name\\n    type: string\\n  primary_downlink_vrrp_config_group:\\n    description: Name for apply group to use for downlink interface for VRRP\\n    label: Apply group name\\n    type: string\\n  secondary_downlink_vrrp_config_group:\\n    description: Name for apply group to use for downlink interface for VRRP\\n    label: Apply group name\\n    type: string\\n\\nresources:\\n{% for device in [\\\"primary\\\", \\\"secondary\\\"] %}\\n  netconf_configure_{{ device }}:\\n    properties:\\n      lock_timeout: 3000\\n      on_update: merge\\n      configs:\\n      - config:\\n          str_replace:\\n            params:\\n              $VLAN:\\n                get_param: downlink_vlan\\n              $INPUT_FILTER:\\n                get_param: input_filter_name\\n              $OUTPUT_FILTER:\\n                get_param: output_filter_name\\n              $APPLY_GROUP:\\n                get_param: {{ device }}_downlink_vrrp_config_group\\n            template: |\\n              apply-groups $APPLY_GROUP\\n              vlan-id $VLAN;\\n              description vpn_gw;\\n              family inet {\\n                  filter {\\n                      input $INPUT_FILTER;\\n                      output $OUTPUT_FILTER;\\n                  }\\n              }\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: interfaces\\n          - config_type: name\\n            xml_type: named_tag\\n            tag: interface\\n            name: { get_param: {{ device }}_device_physical_downlink_interface }\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: unit\\n            name: { get_param: downlink_vlan }\\n      - config:\\n          str_replace:\\n            params:\\n              $LIFD:\\n                get_param: {{ device }}_device_logical_downlink_interface\\n              $LIFU:\\n                get_param: {{ device }}_device_logical_uplink_interface\\n            template: |\\n                instance-type virtual-router;\\n                interface $LIFD;\\n                interface $LIFU;\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: routing-instances\\n          - config_type: name\\n            xml_type: named_tag\\n            tag: instance\\n            name: { get_param: vrf_name }\\n      - config:\\n          str_replace:\\n            params:\\n              $VLAN:\\n                get_param: uplink_vlan\\n            template: |\\n              vlan-id $VLAN;\\n              description CloudGW_vpn;\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: interfaces\\n          - config_type: name\\n            xml_type: named_tag\\n            tag: interface\\n            name: { get_param: {{ device }}_device_physical_uplink_interface }\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: unit\\n            name: { get_param: uplink_vlan }\\n      device_ip:\\n        get_param: {{ device }}_device_ip\\n      password:\\n        get_param: {{ device }}_device_password\\n      port:\\n        get_param: {{ device }}_device_port\\n      username:\\n        get_param: {{ device }}_device_username\\n    type: OS::Contrail::NetconfNamedConfigs\\n{% endfor %}\\n\",\"watch\":[]}",1)'
03:02:08.875 gohan.db INFO [0m Creating resource gw_interface_vpn
03:02:08.875 gohan.db.sql INFO [0m Executing SQL query in transaction 'f15e8ec3-f751-43eb-9ce3-0d4948a2cc74': 'INSERT INTO `heat_templates` (`handler`,`id`,`parameter_mappings`,`template_file`,`watch`) VALUES (heat_worker,gw_interface_vpn,{"bgp_group_name":"Cinet-gw-group","downlink_vlan_id":"Fvpn_gateway+vpn_gw_id:downlink_vlan_id","gw_vip":"Pgw_vipv4","heat_timeout":"C60","jinja_force_dependency":"Fvpn_gateway+vpn_gw_id:vpn_interface+connected_vpn_interface:id","jinja_force_dependency2":{"field":"id","path":[{"id":"network_id","type":"network"}]},"local_as":"Fvpn_gateway+vpn_gw_id:local_as_number","netmask":"Pnetmask","primary_device_gw_ip":"Pprimary_ipv4","primary_device_ip":"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip","primary_device_password":"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password","primary_device_physical_interface":"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:er_physical_interface+primary_interface_id:name","primary_device_port":"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port","primary_device_priority":"C105","primary_device_username":"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login","primary_ibgp_config_group":"Fvpn_gateway+vpn_gw_id:vpn_service+vpn_service_id:primary_ibgp_config_group","secondary_device_gw_ip":"Psecondary_ipv4","secondary_device_ip":"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip","secondary_device_password":"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password","secondary_device_physical_interface":"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:er_physical_interface+secondary_interface_id:name","secondary_device_port":"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port","secondary_device_priority":"C100","secondary_device_username":"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login","secondary_ibgp_config_group":"Fvpn_gateway+vpn_gw_id:vpn_service+vpn_service_id:secondary_ibgp_config_group","vrf_name":"Fvpn_gateway+vpn_gw_id:vrf_name","vrrp_group":"Pvrid"},heat_template_version: 2013-05-23

description: >
  Inet Address

parameters:
  primary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Primary Device.
    label: Ip address of the device.
    type: string
  primary_device_port:
    description: Port that will be used to establish ssh connection to the Primary Device.
    label: Port of the ssh connection.
    type: number
  primary_device_username:
    description: Name of the user which will be used to log onto the Primary Device.
    label: User name to log on to device.
    type: string
  primary_device_password:
    description: Password of the user which will be used to log onto the Primary Device.
    label: Users password.
    type: string
  secondary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Secondary Device.
    label: Ip address of the device.
    type: string
  secondary_device_port:
    description: Port that will be used to establish ssh connection to the Secondary Device.
    label: Port of the ssh connection.
    type: number
  secondary_device_username:
    description: Name of the user which will be used to log onto the Secondary Device.
    label: User name to log on to device.
    type: string
  secondary_device_password:
    description: Password of the user which will be used to log onto the Secondary Device.
    label: Users password.
    type: string
  primary_device_physical_interface:
    description: MX physical port on which logical interface will be created
    label: Underlying physical interface
    type: string
  secondary_device_physical_interface:
    description: MX physical port on which logical interface will be created
    label: Underlying physical interface
    type: string
  downlink_vlan_id:
    description: Vlan tag for mx logical downlink interface
    label: Vlan Tag
    type: string
  gw_vip:
    description: Virtual IP configured on VRRP
    label: Inet Address CIDR
    type: string
  primary_device_gw_ip:
    description: IP on primary device
    label: Inet Address CIDR
    type: string
  secondary_device_gw_ip:
    description: IP on secondary device
    label: Inet Address CIDR
    type: string
  netmask:
    description: Netmask for gw_ip
    label: Netmask
    type: number
  vrrp_group:
    type: string
    label: VRRP Group
  primary_device_priority:
    type: string
    label: Primary device priority
  secondary_device_priority:
    type: string
    label: Secondary device priority
  vrf_name:
    type: string
    label: VRF
  bgp_group_name:
    type: string
    label: Name of BGP Group on VRF
  local_as:
    type: string
    label: Local AS Number
  primary_ibgp_config_group:
    description: Name for apply group to use for downlink interface
    label: Apply group name
    type: string
  secondary_ibgp_config_group:
    description: Name for apply group to use for downlink interface
    label: Apply group name
    type: string
resources:
{% for device in ["primary", "secondary"] %}
  netconf_configure_{{ device }}:
    properties:
      lock_timeout: 3000
      configs:
      - config:
          str_replace:
            params:
              $VRRP_GROUP:
                    get_param: vrrp_group
              $PRIORITY:
                    get_param: {{ device }}_device_priority
              $VIP:
                    get_param: gw_vip
            template: |
                vrrp-group $VRRP_GROUP {
                    virtual-address $VIP;
                    priority $PRIORITY;
                }
        path:
          - config_type: tag
            xml_type: tag
            tag: interfaces
          - config_type: name
            xml_type: named_tag
            tag: interface
            name: { get_param: {{ device }}_device_physical_interface }
          - config_type: named_tag
            xml_type: named_tag
            tag: unit
            name: { get_param: downlink_vlan_id }
          - config_type: tag
            xml_type: tag
            tag: family
          - config_type: tag
            xml_type: tag
            tag: inet
          - config_type: named_tag
            xml_type: named_tag
            tag: address
            name:
              str_replace:
                params:
                  $DEVICE_IP:
                    get_param: {{ device }}_device_gw_ip
                  $NETMASK:
                    get_param: netmask
                template: |
                  $DEVICE_IP/$NETMASK
      - config:
          str_replace:
            params:
              $DEVICE_GW_IP:
                    get_param: {{ device }}_device_gw_ip
              $NEIGHBOR_GW_IP:
                    get_param: {% if device == "secondary" %}primary{% else %}secondary{% endif %}_device_gw_ip
              $LOCAL_AS:
                    get_param: local_as
              $APPLY_GROUP:
                    get_param: {{ device }}_ibgp_config_group
            template: |
              apply-groups $APPLY_GROUP;
              local-address $DEVICE_GW_IP;
              peer-as $LOCAL_AS;
              neighbor $NEIGHBOR_GW_IP;
        path:
          - config_type: tag
            xml_type: tag
            tag: routing-instances
          - config_type: name
            xml_type: named_tag
            tag: instance
            name: { get_param: vrf_name }
          - config_type: tag
            xml_type: tag
            tag: protocols
          - config_type: tag
            xml_type: tag
            tag: bgp
          - config_type: named_tag
            xml_type: named_tag
            tag: group
            name: { get_param: bgp_group_name }
      device_ip:
        get_param: {{ device }}_device_ip
      password:
        get_param: {{ device }}_device_password
      port:
        get_param: {{ device }}_device_port
      username:
        get_param: {{ device }}_device_username
    type: OS::Contrail::NetconfNamedConfigs
{% endfor %}
,[])'
03:02:08.876 gohan.db.sql INFO [0m Executing SQL query in transaction 'f15e8ec3-f751-43eb-9ce3-0d4948a2cc74': 'INSERT INTO `events` (`body`,`version`,`path`,`timestamp`,`type`,`marked_for_deletion`) VALUES ("{\"handler\":\"heat_worker\",\"id\":\"gw_interface_vpn\",\"parameter_mappings\":{\"bgp_group_name\":\"Cinet-gw-group\",\"downlink_vlan_id\":\"Fvpn_gateway+vpn_gw_id:downlink_vlan_id\",\"gw_vip\":\"Pgw_vipv4\",\"heat_timeout\":\"C60\",\"jinja_force_dependency\":\"Fvpn_gateway+vpn_gw_id:vpn_interface+connected_vpn_interface:id\",\"jinja_force_dependency2\":{\"field\":\"id\",\"path\":[{\"id\":\"network_id\",\"type\":\"network\"}]},\"local_as\":\"Fvpn_gateway+vpn_gw_id:local_as_number\",\"netmask\":\"Pnetmask\",\"primary_device_gw_ip\":\"Pprimary_ipv4\",\"primary_device_ip\":\"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip\",\"primary_device_password\":\"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password\",\"primary_device_physical_interface\":\"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:er_physical_interface+primary_interface_id:name\",\"primary_device_port\":\"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port\",\"primary_device_priority\":\"C105\",\"primary_device_username\":\"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login\",\"primary_ibgp_config_group\":\"Fvpn_gateway+vpn_gw_id:vpn_service+vpn_service_id:primary_ibgp_config_group\",\"secondary_device_gw_ip\":\"Psecondary_ipv4\",\"secondary_device_ip\":\"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip\",\"secondary_device_password\":\"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password\",\"secondary_device_physical_interface\":\"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:er_physical_interface+secondary_interface_id:name\",\"secondary_device_port\":\"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port\",\"secondary_device_priority\":\"C100\",\"secondary_device_username\":\"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login\",\"secondary_ibgp_config_group\":\"Fvpn_gateway+vpn_gw_id:vpn_service+vpn_service_id:secondary_ibgp_config_group\",\"vrf_name\":\"Fvpn_gateway+vpn_gw_id:vrf_name\",\"vrrp_group\":\"Pvrid\"},\"template_file\":\"heat_template_version: 2013-05-23\\n\\ndescription: \\u003e\\n  Inet Address\\n\\nparameters:\\n  primary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\\n    label: Ip address of the device.\\n    type: string\\n  primary_device_port:\\n    description: Port that will be used to establish ssh connection to the Primary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  primary_device_username:\\n    description: Name of the user which will be used to log onto the Primary Device.\\n    label: User name to log on to device.\\n    type: string\\n  primary_device_password:\\n    description: Password of the user which will be used to log onto the Primary Device.\\n    label: Users password.\\n    type: string\\n  secondary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\\n    label: Ip address of the device.\\n    type: string\\n  secondary_device_port:\\n    description: Port that will be used to establish ssh connection to the Secondary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  secondary_device_username:\\n    description: Name of the user which will be used to log onto the Secondary Device.\\n    label: User name to log on to device.\\n    type: string\\n  secondary_device_password:\\n    description: Password of the user which will be used to log onto the Secondary Device.\\n    label: Users password.\\n    type: string\\n  primary_device_physical_interface:\\n    description: MX physical port on which logical interface will be created\\n    label: Underlying physical interface\\n    type: string\\n  secondary_device_physical_interface:\\n    description: MX physical port on which logical interface will be created\\n    label: Underlying physical interface\\n    type: string\\n  downlink_vlan_id:\\n    description: Vlan tag for mx logical downlink interface\\n    label: Vlan Tag\\n    type: string\\n  gw_vip:\\n    description: Virtual IP configured on VRRP\\n    label: Inet Address CIDR\\n    type: string\\n  primary_device_gw_ip:\\n    description: IP on primary device\\n    label: Inet Address CIDR\\n    type: string\\n  secondary_device_gw_ip:\\n    description: IP on secondary device\\n    label: Inet Address CIDR\\n    type: string\\n  netmask:\\n    description: Netmask for gw_ip\\n    label: Netmask\\n    type: number\\n  vrrp_group:\\n    type: string\\n    label: VRRP Group\\n  primary_device_priority:\\n    type: string\\n    label: Primary device priority\\n  secondary_device_priority:\\n    type: string\\n    label: Secondary device priority\\n  vrf_name:\\n    type: string\\n    label: VRF\\n  bgp_group_name:\\n    type: string\\n    label: Name of BGP Group on VRF\\n  local_as:\\n    type: string\\n    label: Local AS Number\\n  primary_ibgp_config_group:\\n    description: Name for apply group to use for downlink interface\\n    label: Apply group name\\n    type: string\\n  secondary_ibgp_config_group:\\n    description: Name for apply group to use for downlink interface\\n    label: Apply group name\\n    type: string\\nresources:\\n{% for device in [\\\"primary\\\", \\\"secondary\\\"] %}\\n  netconf_configure_{{ device }}:\\n    properties:\\n      lock_timeout: 3000\\n      configs:\\n      - config:\\n          str_replace:\\n            params:\\n              $VRRP_GROUP:\\n                    get_param: vrrp_group\\n              $PRIORITY:\\n                    get_param: {{ device }}_device_priority\\n              $VIP:\\n                    get_param: gw_vip\\n            template: |\\n                vrrp-group $VRRP_GROUP {\\n                    virtual-address $VIP;\\n                    priority $PRIORITY;\\n                }\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: interfaces\\n          - config_type: name\\n            xml_type: named_tag\\n            tag: interface\\n            name: { get_param: {{ device }}_device_physical_interface }\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: unit\\n            name: { get_param: downlink_vlan_id }\\n          - config_type: tag\\n            xml_type: tag\\n            tag: family\\n          - config_type: tag\\n            xml_type: tag\\n            tag: inet\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: address\\n            name:\\n              str_replace:\\n                params:\\n                  $DEVICE_IP:\\n                    get_param: {{ device }}_device_gw_ip\\n                  $NETMASK:\\n                    get_param: netmask\\n                template: |\\n                  $DEVICE_IP/$NETMASK\\n      - config:\\n          str_replace:\\n            params:\\n              $DEVICE_GW_IP:\\n                    get_param: {{ device }}_device_gw_ip\\n              $NEIGHBOR_GW_IP:\\n                    get_param: {% if device == \\\"secondary\\\" %}primary{% else %}secondary{% endif %}_device_gw_ip\\n              $LOCAL_AS:\\n                    get_param: local_as\\n              $APPLY_GROUP:\\n                    get_param: {{ device }}_ibgp_config_group\\n            template: |\\n              apply-groups $APPLY_GROUP;\\n              local-address $DEVICE_GW_IP;\\n              peer-as $LOCAL_AS;\\n              neighbor $NEIGHBOR_GW_IP;\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: routing-instances\\n          - config_type: name\\n            xml_type: named_tag\\n            tag: instance\\n            name: { get_param: vrf_name }\\n          - config_type: tag\\n            xml_type: tag\\n            tag: protocols\\n          - config_type: tag\\n            xml_type: tag\\n            tag: bgp\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: group\\n            name: { get_param: bgp_group_name }\\n      device_ip:\\n        get_param: {{ device }}_device_ip\\n      password:\\n        get_param: {{ device }}_device_password\\n      port:\\n        get_param: {{ device }}_device_port\\n      username:\\n        get_param: {{ device }}_device_username\\n    type: OS::Contrail::NetconfNamedConfigs\\n{% endfor %}\\n\",\"watch\":[]}",1,/v2.0/heat_templates/gw_interface_vpn,1494471728,create,false)'
03:02:08.878 gohan.db INFO [0m Creating resource static_route_vpn
03:02:08.878 gohan.db.sql INFO [0m Executing SQL query in transaction 'f15e8ec3-f751-43eb-9ce3-0d4948a2cc74': 'INSERT INTO `heat_templates` (`handler`,`id`,`parameter_mappings`,`template_file`,`watch`) VALUES (heat_worker,static_route_vpn,{"heat_timeout":"C60","next_hop":"Pnexthop","primary_device_ip":"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip","primary_device_password":"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password","primary_device_port":"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port","primary_device_username":"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login","route":"Pdestination","secondary_device_ip":"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip","secondary_device_password":"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password","secondary_device_port":"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port","secondary_device_username":"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login","vrf_name":"Fvpn_gateway+vpn_gw_id:vrf_name"},heat_template_version: 2013-05-23

description: >
  VPN Gateway Static Route

parameters:
  primary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Primary Device.
    label: Ip address of the device.
    type: string
  primary_device_port:
    description: Port that will be used to establish ssh connection to the Primary Device.
    label: Port of the ssh connection.
    type: number
  primary_device_username:
    description: Name of the user which will be used to log onto the Primary Device.
    label: User name to log on to device.
    type: string
  primary_device_password:
    description: Password of the user which will be used to log onto the Primary Device.
    label: Users password.
    type: string
  secondary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Secondary Device.
    label: Ip address of the device.
    type: string
  secondary_device_port:
    description: Port that will be used to establish ssh connection to the Secondary Device.
    label: Port of the ssh connection.
    type: number
  secondary_device_username:
    description: Name of the user which will be used to log onto the Secondary Device.
    label: User name to log on to device.
    type: string
  secondary_device_password:
    description: Password of the user which will be used to log onto the Secondary Device.
    label: Users password.
    type: string
  vrf_name:
    description: Name of VRF to add this static route
    label: VRF
    type: string
  route:
    description: Static Route definition
    label: Route
    type: string
  next_hop:
    description: Next hop for the static route
    label: Next hop
    type: string

resources:
{% for device in ["primary", "secondary"] %}
  netconf_configure_{{ device }}:
    properties:
      lock_timeout: 3000
      configs:
      - config:
          str_replace:
            params:
              $NEXT_HOP:
                get_param: next_hop
            template: |
              next-hop $NEXT_HOP;
        path:
          - config_type: tag
            xml_type: tag
            tag: routing-instances
          - config_type: name
            xml_type: named_tag
            tag: instance
            name: { get_param: vrf_name }
          - config_type: tag
            xml_type: tag
            tag: routing-options
          - config_type: tag
            xml_type: tag
            tag: static
          - config_type: named_tag
            xml_type: named_tag
            tag: route
            name: { get_param: route }
      device_ip:
        get_param: {{ device }}_device_ip
      password:
        get_param: {{ device }}_device_password
      port:
        get_param: {{ device }}_device_port
      username:
        get_param: {{ device }}_device_username
    type: OS::Contrail::NetconfNamedConfigs
{% endfor %}
,[])'
03:02:08.879 gohan.db.sql INFO [0m Executing SQL query in transaction 'f15e8ec3-f751-43eb-9ce3-0d4948a2cc74': 'INSERT INTO `events` (`body`,`version`,`path`,`timestamp`,`type`,`marked_for_deletion`) VALUES ("{\"handler\":\"heat_worker\",\"id\":\"static_route_vpn\",\"parameter_mappings\":{\"heat_timeout\":\"C60\",\"next_hop\":\"Pnexthop\",\"primary_device_ip\":\"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip\",\"primary_device_password\":\"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password\",\"primary_device_port\":\"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port\",\"primary_device_username\":\"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login\",\"route\":\"Pdestination\",\"secondary_device_ip\":\"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip\",\"secondary_device_password\":\"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password\",\"secondary_device_port\":\"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port\",\"secondary_device_username\":\"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login\",\"vrf_name\":\"Fvpn_gateway+vpn_gw_id:vrf_name\"},\"template_file\":\"heat_template_version: 2013-05-23\\n\\ndescription: \\u003e\\n  VPN Gateway Static Route\\n\\nparameters:\\n  primary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\\n    label: Ip address of the device.\\n    type: string\\n  primary_device_port:\\n    description: Port that will be used to establish ssh connection to the Primary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  primary_device_username:\\n    description: Name of the user which will be used to log onto the Primary Device.\\n    label: User name to log on to device.\\n    type: string\\n  primary_device_password:\\n    description: Password of the user which will be used to log onto the Primary Device.\\n    label: Users password.\\n    type: string\\n  secondary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\\n    label: Ip address of the device.\\n    type: string\\n  secondary_device_port:\\n    description: Port that will be used to establish ssh connection to the Secondary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  secondary_device_username:\\n    description: Name of the user which will be used to log onto the Secondary Device.\\n    label: User name to log on to device.\\n    type: string\\n  secondary_device_password:\\n    description: Password of the user which will be used to log onto the Secondary Device.\\n    label: Users password.\\n    type: string\\n  vrf_name:\\n    description: Name of VRF to add this static route\\n    label: VRF\\n    type: string\\n  route:\\n    description: Static Route definition\\n    label: Route\\n    type: string\\n  next_hop:\\n    description: Next hop for the static route\\n    label: Next hop\\n    type: string\\n\\nresources:\\n{% for device in [\\\"primary\\\", \\\"secondary\\\"] %}\\n  netconf_configure_{{ device }}:\\n    properties:\\n      lock_timeout: 3000\\n      configs:\\n      - config:\\n          str_replace:\\n            params:\\n              $NEXT_HOP:\\n                get_param: next_hop\\n            template: |\\n              next-hop $NEXT_HOP;\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: routing-instances\\n          - config_type: name\\n            xml_type: named_tag\\n            tag: instance\\n            name: { get_param: vrf_name }\\n          - config_type: tag\\n            xml_type: tag\\n            tag: routing-options\\n          - config_type: tag\\n            xml_type: tag\\n            tag: static\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: route\\n            name: { get_param: route }\\n      device_ip:\\n        get_param: {{ device }}_device_ip\\n      password:\\n        get_param: {{ device }}_device_password\\n      port:\\n        get_param: {{ device }}_device_port\\n      username:\\n        get_param: {{ device }}_device_username\\n    type: OS::Contrail::NetconfNamedConfigs\\n{% endfor %}\\n\",\"watch\":[]}",1,/v2.0/heat_templates/static_route_vpn,1494471728,create,false)'
03:02:08.880 gohan.db INFO [0m Creating resource vpn_interface
03:02:08.881 gohan.db.sql INFO [0m Executing SQL query in transaction 'f15e8ec3-f751-43eb-9ce3-0d4948a2cc74': 'INSERT INTO `heat_templates` (`parameter_mappings`,`template_file`,`watch`,`handler`,`id`) VALUES ({"bgp_group_name":"CCloudGW1","heat_timeout":"C60","jinja_primary_uplink_ip":"Oprimary:ip_address","jinja_secondary_uplink_ip":"Osecondary:ip_address","local_as":"Fvpn_gateway+vpn_gw_id:local_as_number","md5":"Pbgp_md5","primary_device_ip":"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip","primary_device_password":"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password","primary_device_physical_interface":"Fvpn_gateway+vpn_gw_id:ha_interface+uplink_interface_id:er_physical_interface+primary_interface_id:name","primary_device_port":"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port","primary_device_username":"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login","primary_ebgp_config_group":"Fvpn_gateway+vpn_gw_id:vpn_service+vpn_service_id:primary_ebgp_config_group","primary_peer_ip":"Oprimary:bgp_peer_ip","primary_router_id":"Oprimary:bgp_router_id","remote_as":"Pbgp_remote_as","secondary_device_ip":"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip","secondary_device_password":"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password","secondary_device_physical_interface":"Fvpn_gateway+vpn_gw_id:ha_interface+uplink_interface_id:er_physical_interface+secondary_interface_id:name","secondary_device_port":"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port","secondary_device_username":"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login","secondary_ebgp_config_group":"Fvpn_gateway+vpn_gw_id:vpn_service+vpn_service_id:secondary_ebgp_config_group","secondary_peer_ip":"Osecondary:bgp_peer_ip","secondary_router_id":"Osecondary:bgp_router_id","uplink_vlan":"Fvpn_gateway+vpn_gw_id:uplink_vlan_id","vrf_name":"Fvpn_gateway+vpn_gw_id:vrf_name"},heat_template_version: 2013-05-23

description: >
  Inet Address

parameters:
  primary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Primary Device.
    label: Ip address of the device.
    type: string
  primary_device_port:
    description: Port that will be used to establish ssh connection to the Primary Device.
    label: Port of the ssh connection.
    type: number
  primary_device_username:
    description: Name of the user which will be used to log onto the Primary Device.
    label: User name to log on to device.
    type: string
  primary_device_password:
    description: Password of the user which will be used to log onto the Primary Device.
    label: Users password.
    type: string
  secondary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Secondary Device.
    label: Ip address of the device.
    type: string
  secondary_device_port:
    description: Port that will be used to establish ssh connection to the Secondary Device.
    label: Port of the ssh connection.
    type: number
  secondary_device_username:
    description: Name of the user which will be used to log onto the Secondary Device.
    label: User name to log on to device.
    type: string
  secondary_device_password:
    description: Password of the user which will be used to log onto the Secondary Device.
    label: Users password.
    type: string
  primary_device_physical_interface:
    description: MX physical port on which logical interface will be created
    label: Underlying physical interface
    type: string
  secondary_device_physical_interface:
    description: MX physical port on which logical interface will be created
    label: Underlying physical interface
    type: string
  vrf_name:
    description: Name of VRF (routing-instance) in MX config
    label: VRF Name
    type: string
  local_as:
    type: number
    label: Local AS Number
  primary_ebgp_config_group:
    description: Name of MX config group for eBGP config
    label: eBGP config group
    type: string
  secondary_ebgp_config_group:
    description: Name of MX config group for eBGP config
    label: eBGP config group
    type: string
  uplink_vlan:
    description: VLAN ID used on uplink interfaces (same for both primary and secondary device)
    label: Uplink VLAN ID
    type: string
  primary_peer_ip:
    description: IP address of primary router eBGP neighbour
    label: Primary device BGP peer
    type: string
  secondary_peer_ip:
    description: IP address of secondary router eBGP neighbour
    label: Secondary device BGP peer
    type: string
  primary_router_id:
    description: Primary router VRF router id
    label: Primary router id
    type: string
  secondary_router_id:
    description: Secondary router VRF router id
    label: Secondary router id
    type: string
  remote_as:
    description: eBGP remote autonomous system
    label: Remote AS
    type: string
  md5:
    description: eBGP authentication key
    label: eBGP authentication key
    type: string
  bgp_group_name:
    description: Name of eBGP group
    label: eBGP group name
    type: string

resources:
{% set primary_ip_uplink_split = jinja_primary_uplink_ip.split('/') %}
{% set secondary_ip_uplink_split = jinja_secondary_uplink_ip.split('/') %}
{% for device in ["primary", "secondary"] %}
  netconf_configure_{{ device }}:
    properties:
      lock_timeout: 3000
      configs:
      - config: ""
        path:
          - config_type: tag
            xml_type: tag
            tag: interfaces
          - config_type: name
            xml_type: named_tag
            tag: interface
            name: { get_param: {{ device }}_device_physical_interface }
          - config_type: named_tag
            xml_type: named_tag
            tag: unit
            name: { get_param: uplink_vlan }
          - config_type: tag
            xml_type: tag
            tag: family
          - config_type: tag
            xml_type: tag
            tag: inet
          - config_type: named_tag
            xml_type: named_tag
            tag: address
            name: {% if device == "primary" %} {{ jinja_primary_uplink_ip }} {% else %} {{ jinja_secondary_uplink_ip }} {% endif %}
      - config:
          str_replace:
            params:
              $NEIGHBOR_IP:
                    get_param: {{ device }}_peer_ip
              $REMOTE_AS:
                    get_param: remote_as
              $APPLY_GROUP:
                    get_param: {{ device }}_ebgp_config_group
              $KEY:
                    get_param: md5
            template: |
              apply-groups $APPLY_GROUP;
              local-address {% if device == "primary" %} {{ primary_ip_uplink_split[0] }} {% else %} {{ secondary_ip_uplink_split[0] }} {% endif %};
              peer-as $REMOTE_AS;
              neighbor $NEIGHBOR_IP authentication-key $KEY;
        path:
          - config_type: tag
            xml_type: tag
            tag: routing-instances
          - config_type: name
            xml_type: named_tag
            tag: instance
            name: { get_param: vrf_name }
          - config_type: tag
            xml_type: tag
            tag: protocols
          - config_type: tag
            xml_type: tag
            tag: bgp
          - config_type: named_tag
            xml_type: named_tag
            tag: group
            name: { get_param: bgp_group_name }
      - config:
          str_replace:
            params:
              $ROUTER_ID:
                    get_param: {{device}}_router_id
              $LOCAL_AS:
                    get_param: local_as
            template: |
              router-id $ROUTER_ID;
              autonomous-system $LOCAL_AS;
        path:
          - config_type: tag
            xml_type: tag
            tag: routing-instances
          - config_type: name
            xml_type: named_tag
            tag: instance
            name: { get_param: vrf_name }
          - config_type: tag
            xml_type: tag
            tag: routing-options
      device_ip:
        get_param: {{ device }}_device_ip
      password:
        get_param: {{ device }}_device_password
      port:
        get_param: {{ device }}_device_port
      username:
        get_param: {{ device }}_device_username
    type: OS::Contrail::NetconfNamedConfigs
{% endfor %}
,[],heat_worker,vpn_interface)'
03:02:08.882 gohan.db.sql INFO [0m Executing SQL query in transaction 'f15e8ec3-f751-43eb-9ce3-0d4948a2cc74': 'INSERT INTO `events` (`body`,`version`,`path`,`timestamp`,`type`,`marked_for_deletion`) VALUES ("{\"handler\":\"heat_worker\",\"id\":\"vpn_interface\",\"parameter_mappings\":{\"bgp_group_name\":\"CCloudGW1\",\"heat_timeout\":\"C60\",\"jinja_primary_uplink_ip\":\"Oprimary:ip_address\",\"jinja_secondary_uplink_ip\":\"Osecondary:ip_address\",\"local_as\":\"Fvpn_gateway+vpn_gw_id:local_as_number\",\"md5\":\"Pbgp_md5\",\"primary_device_ip\":\"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip\",\"primary_device_password\":\"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password\",\"primary_device_physical_interface\":\"Fvpn_gateway+vpn_gw_id:ha_interface+uplink_interface_id:er_physical_interface+primary_interface_id:name\",\"primary_device_port\":\"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port\",\"primary_device_username\":\"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login\",\"primary_ebgp_config_group\":\"Fvpn_gateway+vpn_gw_id:vpn_service+vpn_service_id:primary_ebgp_config_group\",\"primary_peer_ip\":\"Oprimary:bgp_peer_ip\",\"primary_router_id\":\"Oprimary:bgp_router_id\",\"remote_as\":\"Pbgp_remote_as\",\"secondary_device_ip\":\"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip\",\"secondary_device_password\":\"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password\",\"secondary_device_physical_interface\":\"Fvpn_gateway+vpn_gw_id:ha_interface+uplink_interface_id:er_physical_interface+secondary_interface_id:name\",\"secondary_device_port\":\"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port\",\"secondary_device_username\":\"Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login\",\"secondary_ebgp_config_group\":\"Fvpn_gateway+vpn_gw_id:vpn_service+vpn_service_id:secondary_ebgp_config_group\",\"secondary_peer_ip\":\"Osecondary:bgp_peer_ip\",\"secondary_router_id\":\"Osecondary:bgp_router_id\",\"uplink_vlan\":\"Fvpn_gateway+vpn_gw_id:uplink_vlan_id\",\"vrf_name\":\"Fvpn_gateway+vpn_gw_id:vrf_name\"},\"template_file\":\"heat_template_version: 2013-05-23\\n\\ndescription: \\u003e\\n  Inet Address\\n\\nparameters:\\n  primary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\\n    label: Ip address of the device.\\n    type: string\\n  primary_device_port:\\n    description: Port that will be used to establish ssh connection to the Primary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  primary_device_username:\\n    description: Name of the user which will be used to log onto the Primary Device.\\n    label: User name to log on to device.\\n    type: string\\n  primary_device_password:\\n    description: Password of the user which will be used to log onto the Primary Device.\\n    label: Users password.\\n    type: string\\n  secondary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\\n    label: Ip address of the device.\\n    type: string\\n  secondary_device_port:\\n    description: Port that will be used to establish ssh connection to the Secondary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  secondary_device_username:\\n    description: Name of the user which will be used to log onto the Secondary Device.\\n    label: User name to log on to device.\\n    type: string\\n  secondary_device_password:\\n    description: Password of the user which will be used to log onto the Secondary Device.\\n    label: Users password.\\n    type: string\\n  primary_device_physical_interface:\\n    description: MX physical port on which logical interface will be created\\n    label: Underlying physical interface\\n    type: string\\n  secondary_device_physical_interface:\\n    description: MX physical port on which logical interface will be created\\n    label: Underlying physical interface\\n    type: string\\n  vrf_name:\\n    description: Name of VRF (routing-instance) in MX config\\n    label: VRF Name\\n    type: string\\n  local_as:\\n    type: number\\n    label: Local AS Number\\n  primary_ebgp_config_group:\\n    description: Name of MX config group for eBGP config\\n    label: eBGP config group\\n    type: string\\n  secondary_ebgp_config_group:\\n    description: Name of MX config group for eBGP config\\n    label: eBGP config group\\n    type: string\\n  uplink_vlan:\\n    description: VLAN ID used on uplink interfaces (same for both primary and secondary device)\\n    label: Uplink VLAN ID\\n    type: string\\n  primary_peer_ip:\\n    description: IP address of primary router eBGP neighbour\\n    label: Primary device BGP peer\\n    type: string\\n  secondary_peer_ip:\\n    description: IP address of secondary router eBGP neighbour\\n    label: Secondary device BGP peer\\n    type: string\\n  primary_router_id:\\n    description: Primary router VRF router id\\n    label: Primary router id\\n    type: string\\n  secondary_router_id:\\n    description: Secondary router VRF router id\\n    label: Secondary router id\\n    type: string\\n  remote_as:\\n    description: eBGP remote autonomous system\\n    label: Remote AS\\n    type: string\\n  md5:\\n    description: eBGP authentication key\\n    label: eBGP authentication key\\n    type: string\\n  bgp_group_name:\\n    description: Name of eBGP group\\n    label: eBGP group name\\n    type: string\\n\\nresources:\\n{% set primary_ip_uplink_split = jinja_primary_uplink_ip.split('/') %}\\n{% set secondary_ip_uplink_split = jinja_secondary_uplink_ip.split('/') %}\\n{% for device in [\\\"primary\\\", \\\"secondary\\\"] %}\\n  netconf_configure_{{ device }}:\\n    properties:\\n      lock_timeout: 3000\\n      configs:\\n      - config: \\\"\\\"\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: interfaces\\n          - config_type: name\\n            xml_type: named_tag\\n            tag: interface\\n            name: { get_param: {{ device }}_device_physical_interface }\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: unit\\n            name: { get_param: uplink_vlan }\\n          - config_type: tag\\n            xml_type: tag\\n            tag: family\\n          - config_type: tag\\n            xml_type: tag\\n            tag: inet\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: address\\n            name: {% if device == \\\"primary\\\" %} {{ jinja_primary_uplink_ip }} {% else %} {{ jinja_secondary_uplink_ip }} {% endif %}\\n      - config:\\n          str_replace:\\n            params:\\n              $NEIGHBOR_IP:\\n                    get_param: {{ device }}_peer_ip\\n              $REMOTE_AS:\\n                    get_param: remote_as\\n              $APPLY_GROUP:\\n                    get_param: {{ device }}_ebgp_config_group\\n              $KEY:\\n                    get_param: md5\\n            template: |\\n              apply-groups $APPLY_GROUP;\\n              local-address {% if device == \\\"primary\\\" %} {{ primary_ip_uplink_split[0] }} {% else %} {{ secondary_ip_uplink_split[0] }} {% endif %};\\n              peer-as $REMOTE_AS;\\n              neighbor $NEIGHBOR_IP authentication-key $KEY;\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: routing-instances\\n          - config_type: name\\n            xml_type: named_tag\\n            tag: instance\\n            name: { get_param: vrf_name }\\n          - config_type: tag\\n            xml_type: tag\\n            tag: protocols\\n          - config_type: tag\\n            xml_type: tag\\n            tag: bgp\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: group\\n            name: { get_param: bgp_group_name }\\n      - config:\\n          str_replace:\\n            params:\\n              $ROUTER_ID:\\n                    get_param: {{device}}_router_id\\n              $LOCAL_AS:\\n                    get_param: local_as\\n            template: |\\n              router-id $ROUTER_ID;\\n              autonomous-system $LOCAL_AS;\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: routing-instances\\n          - config_type: name\\n            xml_type: named_tag\\n            tag: instance\\n            name: { get_param: vrf_name }\\n          - config_type: tag\\n            xml_type: tag\\n            tag: routing-options\\n      device_ip:\\n        get_param: {{ device }}_device_ip\\n      password:\\n        get_param: {{ device }}_device_password\\n      port:\\n        get_param: {{ device }}_device_port\\n      username:\\n        get_param: {{ device }}_device_username\\n    type: OS::Contrail::NetconfNamedConfigs\\n{% endfor %}\\n\",\"watch\":[]}",1,/v2.0/heat_templates/vpn_interface,1494471728,create,false)'
03:02:08.886 gohan.db INFO [0m Populating resources for schema worker_data
03:02:08.893 gohan.db INFO [0m Populating resources for schema tenant
03:02:08.895 gohan.db INFO [0m Populating resources for schema edge_router
03:02:08.907 gohan.db INFO [0m Populating resources for schema er_physical_interface
03:02:08.909 gohan.db INFO [0m Populating resources for schema ha_router
03:02:08.911 gohan.db INFO [0m Populating resources for schema ha_interface
03:02:08.922 gohan.db INFO [0m Populating resources for schema internet_service
03:02:08.924 gohan.db INFO [0m Populating resources for schema vpn_service
03:02:08.926 gohan.db INFO [0m Populating resources for schema aws_service
03:02:08.943 gohan.db INFO [0m Populating resources for schema interdc_service
03:02:08.965 gohan.db INFO [0m Populating resources for schema common_function_pool
03:02:08.972 gohan.db INFO [0m Populating resources for schema nat_ip_pool
03:02:08.974 gohan.db INFO [0m Populating resources for schema common_function
03:02:08.982 gohan.db INFO [0m Populating resources for schema public_ip_pool
03:02:08.985 gohan.db INFO [0m Populating resources for schema suspended_public_ip
03:02:08.987 gohan.db INFO [0m Populating resources for schema qos_option
03:02:08.996 gohan.db INFO [0m Populating resources for schema vpn_gateway
03:02:09.003 gohan.db INFO [0m Populating resources for schema vpn_interface
03:02:09.007 gohan.db INFO [0m Populating resources for schema aws_gateway
03:02:09.011 gohan.db INFO [0m Populating resources for schema aws_interface
03:02:09.045 gohan.db INFO [0m Populating resources for schema internet_gateway
03:02:09.047 gohan.db INFO [0m Populating resources for schema common_function_gateway
03:02:09.054 gohan.db INFO [0m Populating resources for schema public_ip
03:02:09.060 gohan.db INFO [0m Populating resources for schema interdc_gateway
03:02:09.068 gohan.db INFO [0m Populating resources for schema interdc_interface
03:02:09.071 gohan.db INFO [0m Populating resources for schema gw_interface
03:02:09.073 gohan.db INFO [0m Populating resources for schema static_route
03:02:09.087 gohan.db INFO [0m Populating resources for schema vnf_template
03:02:09.091 gohan.db INFO [0m Populating resources for schema vnf_plan
03:02:09.112 gohan.db INFO [0m Populating resources for schema vnf_instance
03:02:09.117 gohan.db INFO [0m Populating resources for schema vnf_interface
03:02:09.137 gohan.db INFO [0m Populating resources for schema firewall_plan
03:02:09.139 gohan.db INFO [0m Populating resources for schema firewall
03:02:09.153 gohan.db INFO [0m Populating resources for schema firewall_interface
03:02:09.164 gohan.db INFO [0m Populating resources for schema load_balancer_plan
03:02:09.174 gohan.db INFO [0m Populating resources for schema load_balancer_conf
03:02:09.181 gohan.db INFO [0m Populating resources for schema load_balancer
03:02:09.198 gohan.db INFO [0m Populating resources for schema load_balancer_interface
03:02:09.214 gohan.db INFO [0m Populating resources for schema load_balancer_syslog_server
03:02:09.218 gohan.db INFO [0m Populating resources for schema billing_usage
03:02:09.233 gohan.db INFO [0m Populating resources for schema billing_resource
03:02:09.244 gohan.db INFO [0m Populating resources for schema monitoring
03:02:09.250 gohan.db INFO [0m Populating resources for schema resource_mapping
03:02:09.269 gohan.db INFO [0m Populating resources for schema colocation_space
03:02:09.277 gohan.db INFO [0m Populating resources for schema colocation_physical_link
03:02:09.300 gohan.db INFO [0m Populating resources for schema colocation_logical_link
03:02:09.307 gohan.db INFO [0m Populating resources for schema tenant_connection
03:02:09.327 gohan.db INFO [0m Populating resources for schema hosting_physical_link
03:02:09.333 gohan.db INFO [0m Populating resources for schema hosting_logical_link
03:02:09.357 gohan.server.core INFO [0m Importing data from ./init/aws_templates.yaml ...
03:02:09.361 gohan.db INFO [0m Populating resources for schema schema
03:02:09.369 gohan.db INFO [0m Populating resources for schema policy
03:02:09.383 gohan.db INFO [0m Populating resources for schema extension
03:02:09.398 gohan.db INFO [0m Populating resources for schema event
03:02:09.425 gohan.db INFO [0m Populating resources for schema namespace
03:02:09.429 gohan.db INFO [0m Populating resources for schema location
03:02:09.431 gohan.db INFO [0m Populating resources for schema ese_device
03:02:09.437 gohan.db INFO [0m Populating resources for schema network
03:02:09.439 gohan.db INFO [0m Populating resources for schema subnet
03:02:09.450 gohan.db INFO [0m Populating resources for schema port
03:02:09.454 gohan.db INFO [0m Populating resources for schema ese_physical_port
03:02:09.461 gohan.db INFO [0m Populating resources for schema ese_logical_port
03:02:09.464 gohan.db INFO [0m Populating resources for schema local_subnet
03:02:09.472 gohan.db INFO [0m Populating resources for schema server
03:02:09.486 gohan.db INFO [0m Populating resources for schema physical_port
03:02:09.503 gohan.db INFO [0m Populating resources for schema quota
03:02:09.511 gohan.db INFO [0m Populating resources for schema reserve_address
03:02:09.514 gohan.db INFO [0m Populating resources for schema neutron_extension
03:02:09.516 gohan.db INFO [0m Populating resources for schema heat_template
03:02:09.529 gohan.db INFO [0m Creating resource qos_option_aws
03:02:09.529 gohan.db.sql INFO [0m Executing SQL query in transaction '8daf9276-93ae-479f-82bd-18d879b188c6': 'INSERT INTO `heat_templates` (`handler`,`id`,`parameter_mappings`,`template_file`,`watch`) VALUES (heat_worker,qos_option_aws,{"heat_timeout":"C60","incoming_policer_config":"Pincoming_policer_config","incoming_policer_name":"Pincoming_policer_name","jinja_be_forwarding_class":"Faws_service+aws_service_id:be_forwarding_class","jinja_ga_forwarding_class":"Faws_service+aws_service_id:ga_forwarding_class","jinja_type":"Pqos_type","neighbour_prefix":"Faws_service+aws_service_id:neighbour_prefix","outgoing_policer_config":"Poutgoing_policer_config","outgoing_policer_name":"Poutgoing_policer_name","primary_device_ip":"Fha_router+ha_router_id:edge_router+primary_router_id:ip","primary_device_password":"Fha_router+ha_router_id:edge_router+primary_router_id:password","primary_device_port":"Fha_router+ha_router_id:edge_router+primary_router_id:ssh_port","primary_device_username":"Fha_router+ha_router_id:edge_router+primary_router_id:login","secondary_device_ip":"Fha_router+ha_router_id:edge_router+secondary_router_id:ip","secondary_device_password":"Fha_router+ha_router_id:edge_router+secondary_router_id:password","secondary_device_port":"Fha_router+ha_router_id:edge_router+secondary_router_id:ssh_port","secondary_device_username":"Fha_router+ha_router_id:edge_router+secondary_router_id:login"},heat_template_version: 2013-05-23

description: >
  QoS Option

parameters:
  primary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Primary Device.
    label: Ip address of the device.
    type: string
  primary_device_port:
    description: Port that will be used to establish ssh connection to the Primary Device.
    label: Port of the ssh connection.
    type: number
  primary_device_username:
    description: Name of the user which will be used to log onto the Primary Device.
    label: User name to log on to device.
    type: string
  primary_device_password:
    description: Password of the user which will be used to log onto the Primary Device.
    label: Users password.
    type: string
  secondary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Secondary Device.
    label: Ip address of the device.
    type: string
  secondary_device_port:
    description: Port that will be used to establish ssh connection to the Secondary Device.
    label: Port of the ssh connection.
    type: number
  secondary_device_username:
    description: Name of the user which will be used to log onto the Secondary Device.
    label: User name to log on to device.
    type: string
  secondary_device_password:
    description: Password of the user which will be used to log onto the Secondary Device.
    label: Users password.
    type: string
  incoming_policer_name:
    description: Name of created incoming policer
    label: Incoming policer name
    type: string
  incoming_policer_config:
    description: Configuration of incoming policer
    label: Incoming policer config
    type: string
  outgoing_policer_name:
    description: Name of created outgoing policer
    label: Outgoing policer name
    type: string
  outgoing_policer_config:
    description: Configuration of outgoing policer
    label: Outgoing policer config
    type: string
  neighbour_prefix:
    description: Name of prefix list used to specify traffic source/destination
    label: Neighbour prefix
    type: string
resources:
{% set forewarding_class = be_forwarding_class if qos_type == "besteffort" else ga_forwarding_class %}
{% for device in ["primary", "secondary"] %}
  netconf_configure_{{ device }}:
    type: OS::Contrail::NetconfNamedConfigs
    properties:
      lock_timeout: 3000
      device_ip:
        get_param: {{ device }}_device_ip
      password:
        get_param: {{ device }}_device_password
      port:
        get_param: {{ device }}_device_port
      username:
        get_param: {{ device }}_device_username
      configs:
      - config:
          { get_param: incoming_policer_config }
        path:
          - config_type: tag
            xml_type: tag
            tag: firewall
          - config_type: named_tag
            xml_type: named_tag
            tag: three-color-policer
            name: { get_param: incoming_policer_name }
      - config:
          { get_param: outgoing_policer_config }
        path:
          - config_type: tag
            xml_type: tag
            tag: firewall
          - config_type: named_tag
            xml_type: named_tag
            tag: policer
            name: { get_param: outgoing_policer_name }
      - config:
          str_replace:
            params:
              $PREFIX:
                get_param: neighbour_prefix
              $CLASS:
                {% if jinja_type == "besteffort" %} {{ jinja_be_forwarding_class }} {% else %} {{ jinja_ga_forwarding_class }} {% endif %}
              $POLICER_NAME:
                get_param: incoming_policer_name
            template: |
               interface-specific;
               term bgp-accept {
                   from {
                       source-prefix-list {
                           $PREFIX;
                       }
                       protocol tcp;
                       port bgp;
                   }
                   then accept;
               }
               term vrrp-accept {
                   from {
                       source-prefix-list {
                           $PREFIX;
                       }
                       protocol vrrp;
                   }
                   then policer 10K-RE;
                   then accept;
               }
               term qos {
                   then {
                       three-color-policer {
                           {% if jinja_type == "besteffort" %}two-rate{% else %}single-rate{% endif %} $POLICER_NAME;
                       }
                       forwarding-class $CLASS;
                       accept;
                   }
               }
        path:
          - config_type: tag
            xml_type: tag
            tag: firewall
          - config_type: named_tag
            xml_type: named_tag
            tag: filter
            name:
              str_replace:
                params:
                  $NAME:
                    get_param: incoming_policer_name
                template: |
                  FILTER_$NAME
      - config:
          str_replace:
            params:
              $PREFIX:
                get_param: neighbour_prefix
              $POLICER_NAME:
                get_param: outgoing_policer_name
            template: |
               interface-specific;
               term bgp-accept {
                   from {
                       destination-prefix-list {
                           $PREFIX;
                       }
                       protocol tcp;
                       port bgp;
                   }
                   then accept;
               }
               term vrrp-accept {
                   from {
                       protocol vrrp;
                   }
                   then accept;
               }
               term policer {
                   then {
                       policer $POLICER_NAME;
                       accept;
                   }
               }
        path:
          - config_type: tag
            xml_type: tag
            tag: firewall
          - config_type: named_tag
            xml_type: named_tag
            tag: filter
            name:
              str_replace:
                params:
                  $NAME:
                    get_param: outgoing_policer_name
                template: |
                  FILTER_$NAME
{% endfor %}
,[])'
03:02:09.530 gohan.db.sql INFO [0m Executing SQL query in transaction '8daf9276-93ae-479f-82bd-18d879b188c6': 'INSERT INTO `events` (`timestamp`,`type`,`marked_for_deletion`,`body`,`version`,`path`) VALUES (1494471729,create,false,"{\"handler\":\"heat_worker\",\"id\":\"qos_option_aws\",\"parameter_mappings\":{\"heat_timeout\":\"C60\",\"incoming_policer_config\":\"Pincoming_policer_config\",\"incoming_policer_name\":\"Pincoming_policer_name\",\"jinja_be_forwarding_class\":\"Faws_service+aws_service_id:be_forwarding_class\",\"jinja_ga_forwarding_class\":\"Faws_service+aws_service_id:ga_forwarding_class\",\"jinja_type\":\"Pqos_type\",\"neighbour_prefix\":\"Faws_service+aws_service_id:neighbour_prefix\",\"outgoing_policer_config\":\"Poutgoing_policer_config\",\"outgoing_policer_name\":\"Poutgoing_policer_name\",\"primary_device_ip\":\"Fha_router+ha_router_id:edge_router+primary_router_id:ip\",\"primary_device_password\":\"Fha_router+ha_router_id:edge_router+primary_router_id:password\",\"primary_device_port\":\"Fha_router+ha_router_id:edge_router+primary_router_id:ssh_port\",\"primary_device_username\":\"Fha_router+ha_router_id:edge_router+primary_router_id:login\",\"secondary_device_ip\":\"Fha_router+ha_router_id:edge_router+secondary_router_id:ip\",\"secondary_device_password\":\"Fha_router+ha_router_id:edge_router+secondary_router_id:password\",\"secondary_device_port\":\"Fha_router+ha_router_id:edge_router+secondary_router_id:ssh_port\",\"secondary_device_username\":\"Fha_router+ha_router_id:edge_router+secondary_router_id:login\"},\"template_file\":\"heat_template_version: 2013-05-23\\n\\ndescription: \\u003e\\n  QoS Option\\n\\nparameters:\\n  primary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\\n    label: Ip address of the device.\\n    type: string\\n  primary_device_port:\\n    description: Port that will be used to establish ssh connection to the Primary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  primary_device_username:\\n    description: Name of the user which will be used to log onto the Primary Device.\\n    label: User name to log on to device.\\n    type: string\\n  primary_device_password:\\n    description: Password of the user which will be used to log onto the Primary Device.\\n    label: Users password.\\n    type: string\\n  secondary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\\n    label: Ip address of the device.\\n    type: string\\n  secondary_device_port:\\n    description: Port that will be used to establish ssh connection to the Secondary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  secondary_device_username:\\n    description: Name of the user which will be used to log onto the Secondary Device.\\n    label: User name to log on to device.\\n    type: string\\n  secondary_device_password:\\n    description: Password of the user which will be used to log onto the Secondary Device.\\n    label: Users password.\\n    type: string\\n  incoming_policer_name:\\n    description: Name of created incoming policer\\n    label: Incoming policer name\\n    type: string\\n  incoming_policer_config:\\n    description: Configuration of incoming policer\\n    label: Incoming policer config\\n    type: string\\n  outgoing_policer_name:\\n    description: Name of created outgoing policer\\n    label: Outgoing policer name\\n    type: string\\n  outgoing_policer_config:\\n    description: Configuration of outgoing policer\\n    label: Outgoing policer config\\n    type: string\\n  neighbour_prefix:\\n    description: Name of prefix list used to specify traffic source/destination\\n    label: Neighbour prefix\\n    type: string\\nresources:\\n{% set forewarding_class = be_forwarding_class if qos_type == \\\"besteffort\\\" else ga_forwarding_class %}\\n{% for device in [\\\"primary\\\", \\\"secondary\\\"] %}\\n  netconf_configure_{{ device }}:\\n    type: OS::Contrail::NetconfNamedConfigs\\n    properties:\\n      lock_timeout: 3000\\n      device_ip:\\n        get_param: {{ device }}_device_ip\\n      password:\\n        get_param: {{ device }}_device_password\\n      port:\\n        get_param: {{ device }}_device_port\\n      username:\\n        get_param: {{ device }}_device_username\\n      configs:\\n      - config:\\n          { get_param: incoming_policer_config }\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: firewall\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: three-color-policer\\n            name: { get_param: incoming_policer_name }\\n      - config:\\n          { get_param: outgoing_policer_config }\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: firewall\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: policer\\n            name: { get_param: outgoing_policer_name }\\n      - config:\\n          str_replace:\\n            params:\\n              $PREFIX:\\n                get_param: neighbour_prefix\\n              $CLASS:\\n                {% if jinja_type == \\\"besteffort\\\" %} {{ jinja_be_forwarding_class }} {% else %} {{ jinja_ga_forwarding_class }} {% endif %}\\n              $POLICER_NAME:\\n                get_param: incoming_policer_name\\n            template: |\\n               interface-specific;\\n               term bgp-accept {\\n                   from {\\n                       source-prefix-list {\\n                           $PREFIX;\\n                       }\\n                       protocol tcp;\\n                       port bgp;\\n                   }\\n                   then accept;\\n               }\\n               term vrrp-accept {\\n                   from {\\n                       source-prefix-list {\\n                           $PREFIX;\\n                       }\\n                       protocol vrrp;\\n                   }\\n                   then policer 10K-RE;\\n                   then accept;\\n               }\\n               term qos {\\n                   then {\\n                       three-color-policer {\\n                           {% if jinja_type == \\\"besteffort\\\" %}two-rate{% else %}single-rate{% endif %} $POLICER_NAME;\\n                       }\\n                       forwarding-class $CLASS;\\n                       accept;\\n                   }\\n               }\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: firewall\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: filter\\n            name:\\n              str_replace:\\n                params:\\n                  $NAME:\\n                    get_param: incoming_policer_name\\n                template: |\\n                  FILTER_$NAME\\n      - config:\\n          str_replace:\\n            params:\\n              $PREFIX:\\n                get_param: neighbour_prefix\\n              $POLICER_NAME:\\n                get_param: outgoing_policer_name\\n            template: |\\n               interface-specific;\\n               term bgp-accept {\\n                   from {\\n                       destination-prefix-list {\\n                           $PREFIX;\\n                       }\\n                       protocol tcp;\\n                       port bgp;\\n                   }\\n                   then accept;\\n               }\\n               term vrrp-accept {\\n                   from {\\n                       protocol vrrp;\\n                   }\\n                   then accept;\\n               }\\n               term policer {\\n                   then {\\n                       policer $POLICER_NAME;\\n                       accept;\\n                   }\\n               }\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: firewall\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: filter\\n            name:\\n              str_replace:\\n                params:\\n                  $NAME:\\n                    get_param: outgoing_policer_name\\n                template: |\\n                  FILTER_$NAME\\n{% endfor %}\\n\",\"watch\":[]}",1,/v2.0/heat_templates/qos_option_aws)'
03:02:09.531 gohan.db INFO [0m Creating resource aws_gateway
03:02:09.531 gohan.db.sql INFO [0m Executing SQL query in transaction '8daf9276-93ae-479f-82bd-18d879b188c6': 'INSERT INTO `heat_templates` (`handler`,`id`,`parameter_mappings`,`template_file`,`watch`) VALUES (heat_worker,aws_gateway,{"downlink_vlan":"Pdownlink_vlan_id","heat_timeout":"C60","input_filter_name":"ACFILTER_\u0026Fqos_option+qos_option_id:incoming_policer_name","output_filter_name":"ACFILTER_\u0026Fqos_option+qos_option_id:outgoing_policer_name","primary_device_ip":"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip","primary_device_logical_downlink_interface":"Pprimary_logical_downlink_interface_name","primary_device_logical_uplink_interface":"Pprimary_logical_uplink_interface_name","primary_device_password":"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password","primary_device_physical_downlink_interface":"Fha_interface+downlink_interface_id:er_physical_interface+primary_interface_id:name","primary_device_physical_uplink_interface":"Fha_interface+uplink_interface_id:er_physical_interface+primary_interface_id:name","primary_device_port":"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port","primary_device_username":"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login","primary_downlink_vrrp_config_group":"Faws_service+aws_service_id:primary_downlink_vrrp_config_group","secondary_device_ip":"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip","secondary_device_logical_downlink_interface":"Psecondary_logical_downlink_interface_name","secondary_device_logical_uplink_interface":"Psecondary_logical_uplink_interface_name","secondary_device_password":"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password","secondary_device_physical_downlink_interface":"Fha_interface+downlink_interface_id:er_physical_interface+secondary_interface_id:name","secondary_device_physical_uplink_interface":"Fha_interface+uplink_interface_id:er_physical_interface+secondary_interface_id:name","secondary_device_port":"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port","secondary_device_username":"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login","secondary_downlink_vrrp_config_group":"Faws_service+aws_service_id:secondary_downlink_vrrp_config_group","uplink_vlan":"Puplink_vlan_id","vrf_name":"Pvrf_name"},heat_template_version: 2013-05-23

description: >
  AWS Gateway

parameters:
  primary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Primary Device.
    label: Ip address of the device.
    type: string
  primary_device_port:
    description: Port that will be used to establish ssh connection to the Primary Device.
    label: Port of the ssh connection.
    type: number
  primary_device_username:
    description: Name of the user which will be used to log onto the Primary Device.
    label: User name to log on to device.
    type: string
  primary_device_password:
    description: Password of the user which will be used to log onto the Primary Device.
    label: Users password.
    type: string
  primary_device_logical_downlink_interface:
    description: Name of the created logical downlink interface on the Primary device
    label: Logical Interface name
    type: string
  primary_device_physical_downlink_interface:
    description: Physical port on the Primary device on which the logical downlink port will be configured
    label: Underlying physical interface
    type: string
  primary_device_logical_uplink_interface:
    description: Name of the created logical uplink interface on the Primary device
    label: Logical Interface name
    type: string
  primary_device_physical_uplink_interface:
    description: Physical port on the Primary device on which the logical uplink port will be configured
    label: Underlying physical interface
    type: string
  secondary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Secondary Device.
    label: Ip address of the device.
    type: string
  secondary_device_port:
    description: Port that will be used to establish ssh connection to the Secondary Device.
    label: Port of the ssh connection.
    type: number
  secondary_device_username:
    description: Name of the user which will be used to log onto the Secondary Device.
    label: User name to log on to device.
    type: string
  secondary_device_password:
    description: Password of the user which will be used to log onto the Secondary Device.
    label: Users password.
    type: string
  secondary_device_logical_downlink_interface:
    description: Name of the created logical downlink interface on the Secondary device
    label: Logical Interface name
    type: string
  secondary_device_physical_downlink_interface:
    description: Physical port on the Secondary device on which the logical downlink port will be configured
    label: Underlying physical interface
    type: string
  secondary_device_logical_uplink_interface:
    description: Name of the created logical uplink interface on the Secondary device
    label: Logical Interface name
    type: string
  secondary_device_physical_uplink_interface:
    description: Physical port on the Secondary device on which the logical uplink port will be configured
    label: Underlying physical interface
    type: string
  downlink_vlan:
    description: vlan tag used by logical downlink interface
    label: VLAN ID
    type: string
  uplink_vlan:
    description: vlan tag used by logical uplink interface
    label: VLAN ID
    type: string
  vrf_name:
    description: Name for VRF used by logical interfaces
    label: VRF name
    type: string
  input_filter_name:
    description: Name for policer used for input
    label: Input filter name
    type: string
  output_filter_name:
    description: Name for policer used for output
    label: Output filter name
    type: string
  primary_downlink_vrrp_config_group:
    description: Name for apply group to use for downlink interface for VRRP
    label: Apply group name
    type: string
  secondary_downlink_vrrp_config_group:
    description: Name for apply group to use for downlink interface for VRRP
    label: Apply group name
    type: string

resources:
{% for device in ["primary", "secondary"] %}
  netconf_configure_{{ device }}:
    type: OS::Contrail::NetconfNamedConfigs
    properties:
      lock_timeout: 3000
      device_ip:
        get_param: {{ device }}_device_ip
      password:
        get_param: {{ device }}_device_password
      port:
        get_param: {{ device }}_device_port
      username:
        get_param: {{ device }}_device_username
      on_update: merge
      configs:
      - config:
          str_replace:
            params:
              $VLAN:
                get_param: downlink_vlan
              $INPUT_FILTER:
                get_param: input_filter_name
              $OUTPUT_FILTER:
                get_param: output_filter_name
              $APPLY_GROUP:
                get_param: {{ device }}_downlink_vrrp_config_group
            template: |
              apply-groups $APPLY_GROUP;
              vlan-id $VLAN;
              description AWS_Downlink;
              family inet {
                  filter {
                      input $INPUT_FILTER;
                      output $OUTPUT_FILTER;
                  }
              }
        path:
          - config_type: tag
            xml_type: tag
            tag: interfaces
          - config_type: name
            xml_type: named_tag
            tag: interface
            name: { get_param: {{ device }}_device_physical_downlink_interface }
          - config_type: named_tag
            xml_type: named_tag
            tag: unit
            name: { get_param: downlink_vlan }
      - config:
          str_replace:
            params:
              $LIFD:
                get_param: {{ device }}_device_logical_downlink_interface
              $LIFU:
                get_param: {{ device }}_device_logical_uplink_interface
            template: |
                instance-type virtual-router;
                interface $LIFD;
                interface $LIFU;
        path:
          - config_type: tag
            xml_type: tag
            tag: routing-instances
          - config_type: name
            xml_type: named_tag
            tag: instance
            name: { get_param: vrf_name }
      - config:
          str_replace:
            params:
              $VLAN:
                get_param: uplink_vlan
            template: |
              vlan-id $VLAN;
              description AWS_Uplink;
        path:
          - config_type: tag
            xml_type: tag
            tag: interfaces
          - config_type: name
            xml_type: named_tag
            tag: interface
            name: { get_param: {{ device }}_device_physical_uplink_interface }
          - config_type: named_tag
            xml_type: named_tag
            tag: unit
            name: { get_param: uplink_vlan }
{% endfor %}
,[])'
03:02:09.532 gohan.db.sql INFO [0m Executing SQL query in transaction '8daf9276-93ae-479f-82bd-18d879b188c6': 'INSERT INTO `events` (`path`,`timestamp`,`type`,`marked_for_deletion`,`body`,`version`) VALUES (/v2.0/heat_templates/aws_gateway,1494471729,create,false,"{\"handler\":\"heat_worker\",\"id\":\"aws_gateway\",\"parameter_mappings\":{\"downlink_vlan\":\"Pdownlink_vlan_id\",\"heat_timeout\":\"C60\",\"input_filter_name\":\"ACFILTER_\\u0026Fqos_option+qos_option_id:incoming_policer_name\",\"output_filter_name\":\"ACFILTER_\\u0026Fqos_option+qos_option_id:outgoing_policer_name\",\"primary_device_ip\":\"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip\",\"primary_device_logical_downlink_interface\":\"Pprimary_logical_downlink_interface_name\",\"primary_device_logical_uplink_interface\":\"Pprimary_logical_uplink_interface_name\",\"primary_device_password\":\"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password\",\"primary_device_physical_downlink_interface\":\"Fha_interface+downlink_interface_id:er_physical_interface+primary_interface_id:name\",\"primary_device_physical_uplink_interface\":\"Fha_interface+uplink_interface_id:er_physical_interface+primary_interface_id:name\",\"primary_device_port\":\"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port\",\"primary_device_username\":\"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login\",\"primary_downlink_vrrp_config_group\":\"Faws_service+aws_service_id:primary_downlink_vrrp_config_group\",\"secondary_device_ip\":\"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip\",\"secondary_device_logical_downlink_interface\":\"Psecondary_logical_downlink_interface_name\",\"secondary_device_logical_uplink_interface\":\"Psecondary_logical_uplink_interface_name\",\"secondary_device_password\":\"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password\",\"secondary_device_physical_downlink_interface\":\"Fha_interface+downlink_interface_id:er_physical_interface+secondary_interface_id:name\",\"secondary_device_physical_uplink_interface\":\"Fha_interface+uplink_interface_id:er_physical_interface+secondary_interface_id:name\",\"secondary_device_port\":\"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port\",\"secondary_device_username\":\"Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login\",\"secondary_downlink_vrrp_config_group\":\"Faws_service+aws_service_id:secondary_downlink_vrrp_config_group\",\"uplink_vlan\":\"Puplink_vlan_id\",\"vrf_name\":\"Pvrf_name\"},\"template_file\":\"heat_template_version: 2013-05-23\\n\\ndescription: \\u003e\\n  AWS Gateway\\n\\nparameters:\\n  primary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\\n    label: Ip address of the device.\\n    type: string\\n  primary_device_port:\\n    description: Port that will be used to establish ssh connection to the Primary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  primary_device_username:\\n    description: Name of the user which will be used to log onto the Primary Device.\\n    label: User name to log on to device.\\n    type: string\\n  primary_device_password:\\n    description: Password of the user which will be used to log onto the Primary Device.\\n    label: Users password.\\n    type: string\\n  primary_device_logical_downlink_interface:\\n    description: Name of the created logical downlink interface on the Primary device\\n    label: Logical Interface name\\n    type: string\\n  primary_device_physical_downlink_interface:\\n    description: Physical port on the Primary device on which the logical downlink port will be configured\\n    label: Underlying physical interface\\n    type: string\\n  primary_device_logical_uplink_interface:\\n    description: Name of the created logical uplink interface on the Primary device\\n    label: Logical Interface name\\n    type: string\\n  primary_device_physical_uplink_interface:\\n    description: Physical port on the Primary device on which the logical uplink port will be configured\\n    label: Underlying physical interface\\n    type: string\\n  secondary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\\n    label: Ip address of the device.\\n    type: string\\n  secondary_device_port:\\n    description: Port that will be used to establish ssh connection to the Secondary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  secondary_device_username:\\n    description: Name of the user which will be used to log onto the Secondary Device.\\n    label: User name to log on to device.\\n    type: string\\n  secondary_device_password:\\n    description: Password of the user which will be used to log onto the Secondary Device.\\n    label: Users password.\\n    type: string\\n  secondary_device_logical_downlink_interface:\\n    description: Name of the created logical downlink interface on the Secondary device\\n    label: Logical Interface name\\n    type: string\\n  secondary_device_physical_downlink_interface:\\n    description: Physical port on the Secondary device on which the logical downlink port will be configured\\n    label: Underlying physical interface\\n    type: string\\n  secondary_device_logical_uplink_interface:\\n    description: Name of the created logical uplink interface on the Secondary device\\n    label: Logical Interface name\\n    type: string\\n  secondary_device_physical_uplink_interface:\\n    description: Physical port on the Secondary device on which the logical uplink port will be configured\\n    label: Underlying physical interface\\n    type: string\\n  downlink_vlan:\\n    description: vlan tag used by logical downlink interface\\n    label: VLAN ID\\n    type: string\\n  uplink_vlan:\\n    description: vlan tag used by logical uplink interface\\n    label: VLAN ID\\n    type: string\\n  vrf_name:\\n    description: Name for VRF used by logical interfaces\\n    label: VRF name\\n    type: string\\n  input_filter_name:\\n    description: Name for policer used for input\\n    label: Input filter name\\n    type: string\\n  output_filter_name:\\n    description: Name for policer used for output\\n    label: Output filter name\\n    type: string\\n  primary_downlink_vrrp_config_group:\\n    description: Name for apply group to use for downlink interface for VRRP\\n    label: Apply group name\\n    type: string\\n  secondary_downlink_vrrp_config_group:\\n    description: Name for apply group to use for downlink interface for VRRP\\n    label: Apply group name\\n    type: string\\n\\nresources:\\n{% for device in [\\\"primary\\\", \\\"secondary\\\"] %}\\n  netconf_configure_{{ device }}:\\n    type: OS::Contrail::NetconfNamedConfigs\\n    properties:\\n      lock_timeout: 3000\\n      device_ip:\\n        get_param: {{ device }}_device_ip\\n      password:\\n        get_param: {{ device }}_device_password\\n      port:\\n        get_param: {{ device }}_device_port\\n      username:\\n        get_param: {{ device }}_device_username\\n      on_update: merge\\n      configs:\\n      - config:\\n          str_replace:\\n            params:\\n              $VLAN:\\n                get_param: downlink_vlan\\n              $INPUT_FILTER:\\n                get_param: input_filter_name\\n              $OUTPUT_FILTER:\\n                get_param: output_filter_name\\n              $APPLY_GROUP:\\n                get_param: {{ device }}_downlink_vrrp_config_group\\n            template: |\\n              apply-groups $APPLY_GROUP;\\n              vlan-id $VLAN;\\n              description AWS_Downlink;\\n              family inet {\\n                  filter {\\n                      input $INPUT_FILTER;\\n                      output $OUTPUT_FILTER;\\n                  }\\n              }\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: interfaces\\n          - config_type: name\\n            xml_type: named_tag\\n            tag: interface\\n            name: { get_param: {{ device }}_device_physical_downlink_interface }\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: unit\\n            name: { get_param: downlink_vlan }\\n      - config:\\n          str_replace:\\n            params:\\n              $LIFD:\\n                get_param: {{ device }}_device_logical_downlink_interface\\n              $LIFU:\\n                get_param: {{ device }}_device_logical_uplink_interface\\n            template: |\\n                instance-type virtual-router;\\n                interface $LIFD;\\n                interface $LIFU;\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: routing-instances\\n          - config_type: name\\n            xml_type: named_tag\\n            tag: instance\\n            name: { get_param: vrf_name }\\n      - config:\\n          str_replace:\\n            params:\\n              $VLAN:\\n                get_param: uplink_vlan\\n            template: |\\n              vlan-id $VLAN;\\n              description AWS_Uplink;\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: interfaces\\n          - config_type: name\\n            xml_type: named_tag\\n            tag: interface\\n            name: { get_param: {{ device }}_device_physical_uplink_interface }\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: unit\\n            name: { get_param: uplink_vlan }\\n{% endfor %}\\n\",\"watch\":[]}",1)'
03:02:09.534 gohan.db INFO [0m Creating resource gw_interface_aws
03:02:09.534 gohan.db.sql INFO [0m Executing SQL query in transaction '8daf9276-93ae-479f-82bd-18d879b188c6': 'INSERT INTO `heat_templates` (`parameter_mappings`,`template_file`,`watch`,`handler`,`id`) VALUES ({"bgp_group_name":"Cinet-gw-group","downlink_vlan_id":"Faws_gateway+aws_gw_id:downlink_vlan_id","gw_vip":"Pgw_vipv4","heat_timeout":"C60","jinja_force_dependency":"Faws_gateway+aws_gw_id:aws_interface+connected_aws_interface:id","jinja_force_dependency2":{"field":"id","path":[{"id":"network_id","type":"network"}]},"local_as":"Faws_gateway+aws_gw_id:local_as_number","netmask":"Pnetmask","primary_device_gw_ip":"Pprimary_ipv4","primary_device_ip":"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip","primary_device_password":"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password","primary_device_physical_interface":"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:er_physical_interface+primary_interface_id:name","primary_device_port":"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port","primary_device_priority":"C105","primary_device_username":"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login","primary_ibgp_config_group":"Faws_gateway+aws_gw_id:aws_service+aws_service_id:primary_ibgp_config_group","secondary_device_gw_ip":"Psecondary_ipv4","secondary_device_ip":"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip","secondary_device_password":"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password","secondary_device_physical_interface":"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:er_physical_interface+secondary_interface_id:name","secondary_device_port":"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port","secondary_device_priority":"C100","secondary_device_username":"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login","secondary_ibgp_config_group":"Faws_gateway+aws_gw_id:aws_service+aws_service_id:secondary_ibgp_config_group","vrf_name":"Faws_gateway+aws_gw_id:vrf_name","vrrp_group":"Pvrid"},heat_template_version: 2013-05-23

description: >
  Inet Address

parameters:
  primary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Primary Device.
    label: Ip address of the device.
    type: string
  primary_device_port:
    description: Port that will be used to establish ssh connection to the Primary Device.
    label: Port of the ssh connection.
    type: number
  primary_device_username:
    description: Name of the user which will be used to log onto the Primary Device.
    label: User name to log on to device.
    type: string
  primary_device_password:
    description: Password of the user which will be used to log onto the Primary Device.
    label: Users password.
    type: string
  secondary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Secondary Device.
    label: Ip address of the device.
    type: string
  secondary_device_port:
    description: Port that will be used to establish ssh connection to the Secondary Device.
    label: Port of the ssh connection.
    type: number
  secondary_device_username:
    description: Name of the user which will be used to log onto the Secondary Device.
    label: User name to log on to device.
    type: string
  secondary_device_password:
    description: Password of the user which will be used to log onto the Secondary Device.
    label: Users password.
    type: string
  primary_device_physical_interface:
    description: MX physical port on which logical interface will be created
    label: Underlying physical interface
    type: string
  secondary_device_physical_interface:
    description: MX physical port on which logical interface will be created
    label: Underlying physical interface
    type: string
  downlink_vlan_id:
    description: Vlan tag for mx logical downlink interface
    label: Vlan Tag
    type: string
  gw_vip:
    description: Virtual IP configured on VRRP
    label: Inet Address CIDR
    type: string
  primary_device_gw_ip:
    description: IP on primary device
    label: Inet Address CIDR
    type: string
  secondary_device_gw_ip:
    description: IP on secondary device
    label: Inet Address CIDR
    type: string
  netmask:
    description: Netmask for gw_ip
    label: Netmask
    type: number
  vrrp_group:
    type: string
    label: VRRP Group
  primary_device_priority:
    type: string
    label: Primary device priority
  secondary_device_priority:
    type: string
    label: Secondary device priority
  vrf_name:
    type: string
    label: VRF
  bgp_group_name:
    type: string
    label: Name of BGP Group on VRF
  local_as:
    type: string
    label: Local AS Number
  primary_ibgp_config_group:
    description: Name for apply group to use for downlink interface
    label: Apply group name
    type: string
  secondary_ibgp_config_group:
    description: Name for apply group to use for downlink interface
    label: Apply group name
    type: string
resources:
{% for device in ["primary", "secondary"] %}
  netconf_configure_{{ device }}:
    type: OS::Contrail::NetconfNamedConfigs
    properties:
      lock_timeout: 3000
      device_ip:
        get_param: {{ device }}_device_ip
      password:
        get_param: {{ device }}_device_password
      port:
        get_param: {{ device }}_device_port
      username:
        get_param: {{ device }}_device_username
      configs:
      - config:
          str_replace:
            params:
              $VRRP_GROUP:
                    get_param: vrrp_group
              $PRIORITY:
                    get_param: {{ device }}_device_priority
              $VIP:
                    get_param: gw_vip
            template: |
                vrrp-group $VRRP_GROUP {
                    virtual-address $VIP;
                    priority $PRIORITY;
                }
        path:
          - config_type: tag
            xml_type: tag
            tag: interfaces
          - config_type: name
            xml_type: named_tag
            tag: interface
            name: { get_param: {{ device }}_device_physical_interface }
          - config_type: named_tag
            xml_type: named_tag
            tag: unit
            name: { get_param: downlink_vlan_id }
          - config_type: tag
            xml_type: tag
            tag: family
          - config_type: tag
            xml_type: tag
            tag: inet
          - config_type: named_tag
            xml_type: named_tag
            tag: address
            name:
              str_replace:
                params:
                  $DEVICE_IP:
                    get_param: {{ device }}_device_gw_ip
                  $NETMASK:
                    get_param: netmask
                template: |
                  $DEVICE_IP/$NETMASK
      - config:
          str_replace:
            params:
              $DEVICE_GW_IP:
                    get_param: {{ device }}_device_gw_ip
              $NEIGHBOR_GW_IP:
                    get_param: {% if device == "secondary" %}primary{% else %}secondary{% endif %}_device_gw_ip
              $LOCAL_AS:
                    get_param: local_as
              $APPLY_GROUP:
                    get_param: {{ device }}_ibgp_config_group
            template: |
              apply-groups $APPLY_GROUP;
              local-address $DEVICE_GW_IP;
              peer-as $LOCAL_AS;
              neighbor $NEIGHBOR_GW_IP;
        path:
          - config_type: tag
            xml_type: tag
            tag: routing-instances
          - config_type: name
            xml_type: named_tag
            tag: instance
            name: { get_param: vrf_name }
          - config_type: tag
            xml_type: tag
            tag: protocols
          - config_type: tag
            xml_type: tag
            tag: bgp
          - config_type: named_tag
            xml_type: named_tag
            tag: group
            name: { get_param: bgp_group_name }
{% endfor %}
,[],heat_worker,gw_interface_aws)'
03:02:09.544 gohan.db.sql INFO [0m Executing SQL query in transaction '8daf9276-93ae-479f-82bd-18d879b188c6': 'INSERT INTO `events` (`path`,`timestamp`,`type`,`marked_for_deletion`,`body`,`version`) VALUES (/v2.0/heat_templates/gw_interface_aws,1494471729,create,false,"{\"handler\":\"heat_worker\",\"id\":\"gw_interface_aws\",\"parameter_mappings\":{\"bgp_group_name\":\"Cinet-gw-group\",\"downlink_vlan_id\":\"Faws_gateway+aws_gw_id:downlink_vlan_id\",\"gw_vip\":\"Pgw_vipv4\",\"heat_timeout\":\"C60\",\"jinja_force_dependency\":\"Faws_gateway+aws_gw_id:aws_interface+connected_aws_interface:id\",\"jinja_force_dependency2\":{\"field\":\"id\",\"path\":[{\"id\":\"network_id\",\"type\":\"network\"}]},\"local_as\":\"Faws_gateway+aws_gw_id:local_as_number\",\"netmask\":\"Pnetmask\",\"primary_device_gw_ip\":\"Pprimary_ipv4\",\"primary_device_ip\":\"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip\",\"primary_device_password\":\"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password\",\"primary_device_physical_interface\":\"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:er_physical_interface+primary_interface_id:name\",\"primary_device_port\":\"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port\",\"primary_device_priority\":\"C105\",\"primary_device_username\":\"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login\",\"primary_ibgp_config_group\":\"Faws_gateway+aws_gw_id:aws_service+aws_service_id:primary_ibgp_config_group\",\"secondary_device_gw_ip\":\"Psecondary_ipv4\",\"secondary_device_ip\":\"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip\",\"secondary_device_password\":\"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password\",\"secondary_device_physical_interface\":\"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:er_physical_interface+secondary_interface_id:name\",\"secondary_device_port\":\"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port\",\"secondary_device_priority\":\"C100\",\"secondary_device_username\":\"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login\",\"secondary_ibgp_config_group\":\"Faws_gateway+aws_gw_id:aws_service+aws_service_id:secondary_ibgp_config_group\",\"vrf_name\":\"Faws_gateway+aws_gw_id:vrf_name\",\"vrrp_group\":\"Pvrid\"},\"template_file\":\"heat_template_version: 2013-05-23\\n\\ndescription: \\u003e\\n  Inet Address\\n\\nparameters:\\n  primary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\\n    label: Ip address of the device.\\n    type: string\\n  primary_device_port:\\n    description: Port that will be used to establish ssh connection to the Primary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  primary_device_username:\\n    description: Name of the user which will be used to log onto the Primary Device.\\n    label: User name to log on to device.\\n    type: string\\n  primary_device_password:\\n    description: Password of the user which will be used to log onto the Primary Device.\\n    label: Users password.\\n    type: string\\n  secondary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\\n    label: Ip address of the device.\\n    type: string\\n  secondary_device_port:\\n    description: Port that will be used to establish ssh connection to the Secondary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  secondary_device_username:\\n    description: Name of the user which will be used to log onto the Secondary Device.\\n    label: User name to log on to device.\\n    type: string\\n  secondary_device_password:\\n    description: Password of the user which will be used to log onto the Secondary Device.\\n    label: Users password.\\n    type: string\\n  primary_device_physical_interface:\\n    description: MX physical port on which logical interface will be created\\n    label: Underlying physical interface\\n    type: string\\n  secondary_device_physical_interface:\\n    description: MX physical port on which logical interface will be created\\n    label: Underlying physical interface\\n    type: string\\n  downlink_vlan_id:\\n    description: Vlan tag for mx logical downlink interface\\n    label: Vlan Tag\\n    type: string\\n  gw_vip:\\n    description: Virtual IP configured on VRRP\\n    label: Inet Address CIDR\\n    type: string\\n  primary_device_gw_ip:\\n    description: IP on primary device\\n    label: Inet Address CIDR\\n    type: string\\n  secondary_device_gw_ip:\\n    description: IP on secondary device\\n    label: Inet Address CIDR\\n    type: string\\n  netmask:\\n    description: Netmask for gw_ip\\n    label: Netmask\\n    type: number\\n  vrrp_group:\\n    type: string\\n    label: VRRP Group\\n  primary_device_priority:\\n    type: string\\n    label: Primary device priority\\n  secondary_device_priority:\\n    type: string\\n    label: Secondary device priority\\n  vrf_name:\\n    type: string\\n    label: VRF\\n  bgp_group_name:\\n    type: string\\n    label: Name of BGP Group on VRF\\n  local_as:\\n    type: string\\n    label: Local AS Number\\n  primary_ibgp_config_group:\\n    description: Name for apply group to use for downlink interface\\n    label: Apply group name\\n    type: string\\n  secondary_ibgp_config_group:\\n    description: Name for apply group to use for downlink interface\\n    label: Apply group name\\n    type: string\\nresources:\\n{% for device in [\\\"primary\\\", \\\"secondary\\\"] %}\\n  netconf_configure_{{ device }}:\\n    type: OS::Contrail::NetconfNamedConfigs\\n    properties:\\n      lock_timeout: 3000\\n      device_ip:\\n        get_param: {{ device }}_device_ip\\n      password:\\n        get_param: {{ device }}_device_password\\n      port:\\n        get_param: {{ device }}_device_port\\n      username:\\n        get_param: {{ device }}_device_username\\n      configs:\\n      - config:\\n          str_replace:\\n            params:\\n              $VRRP_GROUP:\\n                    get_param: vrrp_group\\n              $PRIORITY:\\n                    get_param: {{ device }}_device_priority\\n              $VIP:\\n                    get_param: gw_vip\\n            template: |\\n                vrrp-group $VRRP_GROUP {\\n                    virtual-address $VIP;\\n                    priority $PRIORITY;\\n                }\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: interfaces\\n          - config_type: name\\n            xml_type: named_tag\\n            tag: interface\\n            name: { get_param: {{ device }}_device_physical_interface }\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: unit\\n            name: { get_param: downlink_vlan_id }\\n          - config_type: tag\\n            xml_type: tag\\n            tag: family\\n          - config_type: tag\\n            xml_type: tag\\n            tag: inet\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: address\\n            name:\\n              str_replace:\\n                params:\\n                  $DEVICE_IP:\\n                    get_param: {{ device }}_device_gw_ip\\n                  $NETMASK:\\n                    get_param: netmask\\n                template: |\\n                  $DEVICE_IP/$NETMASK\\n      - config:\\n          str_replace:\\n            params:\\n              $DEVICE_GW_IP:\\n                    get_param: {{ device }}_device_gw_ip\\n              $NEIGHBOR_GW_IP:\\n                    get_param: {% if device == \\\"secondary\\\" %}primary{% else %}secondary{% endif %}_device_gw_ip\\n              $LOCAL_AS:\\n                    get_param: local_as\\n              $APPLY_GROUP:\\n                    get_param: {{ device }}_ibgp_config_group\\n            template: |\\n              apply-groups $APPLY_GROUP;\\n              local-address $DEVICE_GW_IP;\\n              peer-as $LOCAL_AS;\\n              neighbor $NEIGHBOR_GW_IP;\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: routing-instances\\n          - config_type: name\\n            xml_type: named_tag\\n            tag: instance\\n            name: { get_param: vrf_name }\\n          - config_type: tag\\n            xml_type: tag\\n            tag: protocols\\n          - config_type: tag\\n            xml_type: tag\\n            tag: bgp\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: group\\n            name: { get_param: bgp_group_name }\\n{% endfor %}\\n\",\"watch\":[]}",1)'
03:02:09.546 gohan.db INFO [0m Creating resource static_route_aws
03:02:09.546 gohan.db.sql INFO [0m Executing SQL query in transaction '8daf9276-93ae-479f-82bd-18d879b188c6': 'INSERT INTO `heat_templates` (`handler`,`id`,`parameter_mappings`,`template_file`,`watch`) VALUES (heat_worker,static_route_aws,{"heat_timeout":"C60","next_hop":"Pnexthop","primary_device_ip":"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip","primary_device_password":"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password","primary_device_port":"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port","primary_device_username":"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login","route":"Pdestination","secondary_device_ip":"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip","secondary_device_password":"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password","secondary_device_port":"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port","secondary_device_username":"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login","vrf_name":"Faws_gateway+aws_gw_id:vrf_name"},heat_template_version: 2013-05-23

description: >
  AWS Gateway Static Route

parameters:
  primary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Primary Device.
    label: Ip address of the device.
    type: string
  primary_device_port:
    description: Port that will be used to establish ssh connection to the Primary Device.
    label: Port of the ssh connection.
    type: number
  primary_device_username:
    description: Name of the user which will be used to log onto the Primary Device.
    label: User name to log on to device.
    type: string
  primary_device_password:
    description: Password of the user which will be used to log onto the Primary Device.
    label: Users password.
    type: string
  secondary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Secondary Device.
    label: Ip address of the device.
    type: string
  secondary_device_port:
    description: Port that will be used to establish ssh connection to the Secondary Device.
    label: Port of the ssh connection.
    type: number
  secondary_device_username:
    description: Name of the user which will be used to log onto the Secondary Device.
    label: User name to log on to device.
    type: string
  secondary_device_password:
    description: Password of the user which will be used to log onto the Secondary Device.
    label: Users password.
    type: string
  vrf_name:
    description: Name of VRF to add this static route
    label: VRF
    type: string
  route:
    description: Static Route definition
    label: Route
    type: string
  next_hop:
    description: Next hop for the static route
    label: Next hop
    type: string

resources:
{% for device in ["primary", "secondary"] %}
  netconf_configure_{{ device }}:
    type: OS::Contrail::NetconfNamedConfigs
    properties:
      device_ip:
        get_param: {{ device }}_device_ip
      password:
        get_param: {{ device }}_device_password
      port:
        get_param: {{ device }}_device_port
      username:
        get_param: {{ device }}_device_username
      lock_timeout: 3000
      configs:
      - config:
          str_replace:
            params:
              $NEXT_HOP:
                get_param: next_hop
            template: |
              next-hop $NEXT_HOP;
        path:
          - config_type: tag
            xml_type: tag
            tag: routing-instances
          - config_type: name
            xml_type: named_tag
            tag: instance
            name: { get_param: vrf_name }
          - config_type: tag
            xml_type: tag
            tag: routing-options
          - config_type: tag
            xml_type: tag
            tag: static
          - config_type: named_tag
            xml_type: named_tag
            tag: route
            name: { get_param: route }
{% endfor %}
,[])'
03:02:09.547 gohan.db.sql INFO [0m Executing SQL query in transaction '8daf9276-93ae-479f-82bd-18d879b188c6': 'INSERT INTO `events` (`timestamp`,`type`,`marked_for_deletion`,`body`,`version`,`path`) VALUES (1494471729,create,false,"{\"handler\":\"heat_worker\",\"id\":\"static_route_aws\",\"parameter_mappings\":{\"heat_timeout\":\"C60\",\"next_hop\":\"Pnexthop\",\"primary_device_ip\":\"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip\",\"primary_device_password\":\"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password\",\"primary_device_port\":\"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port\",\"primary_device_username\":\"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login\",\"route\":\"Pdestination\",\"secondary_device_ip\":\"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip\",\"secondary_device_password\":\"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password\",\"secondary_device_port\":\"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port\",\"secondary_device_username\":\"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login\",\"vrf_name\":\"Faws_gateway+aws_gw_id:vrf_name\"},\"template_file\":\"heat_template_version: 2013-05-23\\n\\ndescription: \\u003e\\n  AWS Gateway Static Route\\n\\nparameters:\\n  primary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\\n    label: Ip address of the device.\\n    type: string\\n  primary_device_port:\\n    description: Port that will be used to establish ssh connection to the Primary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  primary_device_username:\\n    description: Name of the user which will be used to log onto the Primary Device.\\n    label: User name to log on to device.\\n    type: string\\n  primary_device_password:\\n    description: Password of the user which will be used to log onto the Primary Device.\\n    label: Users password.\\n    type: string\\n  secondary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\\n    label: Ip address of the device.\\n    type: string\\n  secondary_device_port:\\n    description: Port that will be used to establish ssh connection to the Secondary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  secondary_device_username:\\n    description: Name of the user which will be used to log onto the Secondary Device.\\n    label: User name to log on to device.\\n    type: string\\n  secondary_device_password:\\n    description: Password of the user which will be used to log onto the Secondary Device.\\n    label: Users password.\\n    type: string\\n  vrf_name:\\n    description: Name of VRF to add this static route\\n    label: VRF\\n    type: string\\n  route:\\n    description: Static Route definition\\n    label: Route\\n    type: string\\n  next_hop:\\n    description: Next hop for the static route\\n    label: Next hop\\n    type: string\\n\\nresources:\\n{% for device in [\\\"primary\\\", \\\"secondary\\\"] %}\\n  netconf_configure_{{ device }}:\\n    type: OS::Contrail::NetconfNamedConfigs\\n    properties:\\n      device_ip:\\n        get_param: {{ device }}_device_ip\\n      password:\\n        get_param: {{ device }}_device_password\\n      port:\\n        get_param: {{ device }}_device_port\\n      username:\\n        get_param: {{ device }}_device_username\\n      lock_timeout: 3000\\n      configs:\\n      - config:\\n          str_replace:\\n            params:\\n              $NEXT_HOP:\\n                get_param: next_hop\\n            template: |\\n              next-hop $NEXT_HOP;\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: routing-instances\\n          - config_type: name\\n            xml_type: named_tag\\n            tag: instance\\n            name: { get_param: vrf_name }\\n          - config_type: tag\\n            xml_type: tag\\n            tag: routing-options\\n          - config_type: tag\\n            xml_type: tag\\n            tag: static\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: route\\n            name: { get_param: route }\\n{% endfor %}\\n\",\"watch\":[]}",1,/v2.0/heat_templates/static_route_aws)'
03:02:09.549 gohan.db INFO [0m Creating resource aws_interface
03:02:09.549 gohan.db.sql INFO [0m Executing SQL query in transaction '8daf9276-93ae-479f-82bd-18d879b188c6': 'INSERT INTO `heat_templates` (`template_file`,`watch`,`handler`,`id`,`parameter_mappings`) VALUES (heat_template_version: 2013-05-23

description: >
  Inet Address

parameters:
  primary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Primary Device.
    label: Ip address of the device.
    type: string
  primary_device_port:
    description: Port that will be used to establish ssh connection to the Primary Device.
    label: Port of the ssh connection.
    type: number
  primary_device_username:
    description: Name of the user which will be used to log onto the Primary Device.
    label: User name to log on to device.
    type: string
  primary_device_password:
    description: Password of the user which will be used to log onto the Primary Device.
    label: Users password.
    type: string
  secondary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Secondary Device.
    label: Ip address of the device.
    type: string
  secondary_device_port:
    description: Port that will be used to establish ssh connection to the Secondary Device.
    label: Port of the ssh connection.
    type: number
  secondary_device_username:
    description: Name of the user which will be used to log onto the Secondary Device.
    label: User name to log on to device.
    type: string
  secondary_device_password:
    description: Password of the user which will be used to log onto the Secondary Device.
    label: Users password.
    type: string
  primary_device_physical_interface:
    description: MX physical port on which logical interface will be created
    label: Underlying physical interface
    type: string
  secondary_device_physical_interface:
    description: MX physical port on which logical interface will be created
    label: Underlying physical interface
    type: string
  vrf_name:
    description: Name of VRF (routing-instance) in MX config
    label: VRF Name
    type: string
  local_as:
    type: number
    label: Local AS Number
  primary_ebgp_config_group:
    description: Name of MX config group for eBGP config
    label: eBGP config group
    type: string
  secondary_ebgp_config_group:
    description: Name of MX config group for eBGP config
    label: eBGP config group
    type: string
  uplink_vlan:
    description: VLAN ID used on uplink interfaces (same for both primary and secondary device)
    label: Uplink VLAN ID
    type: string
  primary_peer_ip:
    description: IP address of primary router eBGP neighbour
    label: Primary device BGP peer
    type: string
  secondary_peer_ip:
    description: IP address of secondary router eBGP neighbour
    label: Secondary device BGP peer
    type: string
  primary_router_id:
    description: Primary router VRF router id
    label: Primary router id
    type: string
  secondary_router_id:
    description: Secondary router VRF router id
    label: Secondary router id
    type: string
  remote_as:
    description: eBGP remote autonomous system
    label: Remote AS
    type: string
  md5:
    description: eBGP authentication key
    label: eBGP authentication key
    type: string
  bgp_group_name:
    description: Name of eBGP group
    label: eBGP group name
    type: string

resources:
{% set primary_ip_uplink_split = jinja_primary_uplink_ip.split('/') %}
{% set secondary_ip_uplink_split = jinja_secondary_uplink_ip.split('/') %}
{% for device in ["primary", "secondary"] %}
  netconf_configure_{{ device }}:
    type: OS::Contrail::NetconfNamedConfigs
    properties:
      lock_timeout: 3000
      device_ip:
        get_param: {{ device }}_device_ip
      password:
        get_param: {{ device }}_device_password
      port:
        get_param: {{ device }}_device_port
      username:
        get_param: {{ device }}_device_username
      configs:
      - config: ""
        path:
          - config_type: tag
            xml_type: tag
            tag: interfaces
          - config_type: name
            xml_type: named_tag
            tag: interface
            name: { get_param: {{ device }}_device_physical_interface }
          - config_type: named_tag
            xml_type: named_tag
            tag: unit
            name: { get_param: uplink_vlan }
          - config_type: tag
            xml_type: tag
            tag: family
          - config_type: tag
            xml_type: tag
            tag: inet
          - config_type: named_tag
            xml_type: named_tag
            tag: address
            name: {% if device == "primary" %} {{ jinja_primary_uplink_ip }} {% else %} {{ jinja_secondary_uplink_ip }} {% endif %}
      - config:
          str_replace:
            params:
              $NEIGHBOR_IP:
                    get_param: {{ device }}_peer_ip
              $REMOTE_AS:
                    get_param: remote_as
              $APPLY_GROUP:
                    get_param: {{ device }}_ebgp_config_group
              $KEY:
                    get_param: md5
            template: |
              apply-groups $APPLY_GROUP;
              local-address {% if device == "primary" %} {{ primary_ip_uplink_split[0] }} {% else %} {{ secondary_ip_uplink_split[0] }} {% endif %};
              peer-as $REMOTE_AS;
              neighbor $NEIGHBOR_IP authentication-key $KEY;
        path:
          - config_type: tag
            xml_type: tag
            tag: routing-instances
          - config_type: name
            xml_type: named_tag
            tag: instance
            name: { get_param: vrf_name }
          - config_type: tag
            xml_type: tag
            tag: protocols
          - config_type: tag
            xml_type: tag
            tag: bgp
          - config_type: named_tag
            xml_type: named_tag
            tag: group
            name: { get_param: bgp_group_name }
      - config:
          str_replace:
            params:
              $ROUTER_ID:
                    get_param: {{device}}_router_id
              $LOCAL_AS:
                    get_param: local_as
            template: |
              router-id $ROUTER_ID;
              autonomous-system $LOCAL_AS;
        path:
          - config_type: tag
            xml_type: tag
            tag: routing-instances
          - config_type: name
            xml_type: named_tag
            tag: instance
            name: { get_param: vrf_name }
          - config_type: tag
            xml_type: tag
            tag: routing-options
{% endfor %}
,[],heat_worker,aws_interface,{"bgp_group_name":"CAWS-PE","heat_timeout":"C60","jinja_primary_uplink_ip":"Oprimary:ip_address","jinja_secondary_uplink_ip":"Osecondary:ip_address","local_as":"Faws_gateway+aws_gw_id:local_as_number","md5":"Pbgp_md5","primary_device_ip":"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip","primary_device_password":"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password","primary_device_physical_interface":"Faws_gateway+aws_gw_id:ha_interface+uplink_interface_id:er_physical_interface+primary_interface_id:name","primary_device_port":"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port","primary_device_username":"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login","primary_ebgp_config_group":"Faws_gateway+aws_gw_id:aws_service+aws_service_id:primary_ebgp_config_group","primary_peer_ip":"Oprimary:bgp_peer_ip","primary_router_id":"Oprimary:bgp_router_id","remote_as":"Pbgp_remote_as","secondary_device_ip":"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip","secondary_device_password":"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password","secondary_device_physical_interface":"Faws_gateway+aws_gw_id:ha_interface+uplink_interface_id:er_physical_interface+secondary_interface_id:name","secondary_device_port":"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port","secondary_device_username":"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login","secondary_ebgp_config_group":"Faws_gateway+aws_gw_id:aws_service+aws_service_id:secondary_ebgp_config_group","secondary_peer_ip":"Osecondary:bgp_peer_ip","secondary_router_id":"Osecondary:bgp_router_id","uplink_vlan":"Faws_gateway+aws_gw_id:uplink_vlan_id","vrf_name":"Faws_gateway+aws_gw_id:vrf_name"})'
03:02:09.550 gohan.db.sql INFO [0m Executing SQL query in transaction '8daf9276-93ae-479f-82bd-18d879b188c6': 'INSERT INTO `events` (`version`,`path`,`timestamp`,`type`,`marked_for_deletion`,`body`) VALUES (1,/v2.0/heat_templates/aws_interface,1494471729,create,false,"{\"handler\":\"heat_worker\",\"id\":\"aws_interface\",\"parameter_mappings\":{\"bgp_group_name\":\"CAWS-PE\",\"heat_timeout\":\"C60\",\"jinja_primary_uplink_ip\":\"Oprimary:ip_address\",\"jinja_secondary_uplink_ip\":\"Osecondary:ip_address\",\"local_as\":\"Faws_gateway+aws_gw_id:local_as_number\",\"md5\":\"Pbgp_md5\",\"primary_device_ip\":\"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip\",\"primary_device_password\":\"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password\",\"primary_device_physical_interface\":\"Faws_gateway+aws_gw_id:ha_interface+uplink_interface_id:er_physical_interface+primary_interface_id:name\",\"primary_device_port\":\"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port\",\"primary_device_username\":\"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login\",\"primary_ebgp_config_group\":\"Faws_gateway+aws_gw_id:aws_service+aws_service_id:primary_ebgp_config_group\",\"primary_peer_ip\":\"Oprimary:bgp_peer_ip\",\"primary_router_id\":\"Oprimary:bgp_router_id\",\"remote_as\":\"Pbgp_remote_as\",\"secondary_device_ip\":\"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip\",\"secondary_device_password\":\"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password\",\"secondary_device_physical_interface\":\"Faws_gateway+aws_gw_id:ha_interface+uplink_interface_id:er_physical_interface+secondary_interface_id:name\",\"secondary_device_port\":\"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port\",\"secondary_device_username\":\"Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login\",\"secondary_ebgp_config_group\":\"Faws_gateway+aws_gw_id:aws_service+aws_service_id:secondary_ebgp_config_group\",\"secondary_peer_ip\":\"Osecondary:bgp_peer_ip\",\"secondary_router_id\":\"Osecondary:bgp_router_id\",\"uplink_vlan\":\"Faws_gateway+aws_gw_id:uplink_vlan_id\",\"vrf_name\":\"Faws_gateway+aws_gw_id:vrf_name\"},\"template_file\":\"heat_template_version: 2013-05-23\\n\\ndescription: \\u003e\\n  Inet Address\\n\\nparameters:\\n  primary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\\n    label: Ip address of the device.\\n    type: string\\n  primary_device_port:\\n    description: Port that will be used to establish ssh connection to the Primary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  primary_device_username:\\n    description: Name of the user which will be used to log onto the Primary Device.\\n    label: User name to log on to device.\\n    type: string\\n  primary_device_password:\\n    description: Password of the user which will be used to log onto the Primary Device.\\n    label: Users password.\\n    type: string\\n  secondary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\\n    label: Ip address of the device.\\n    type: string\\n  secondary_device_port:\\n    description: Port that will be used to establish ssh connection to the Secondary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  secondary_device_username:\\n    description: Name of the user which will be used to log onto the Secondary Device.\\n    label: User name to log on to device.\\n    type: string\\n  secondary_device_password:\\n    description: Password of the user which will be used to log onto the Secondary Device.\\n    label: Users password.\\n    type: string\\n  primary_device_physical_interface:\\n    description: MX physical port on which logical interface will be created\\n    label: Underlying physical interface\\n    type: string\\n  secondary_device_physical_interface:\\n    description: MX physical port on which logical interface will be created\\n    label: Underlying physical interface\\n    type: string\\n  vrf_name:\\n    description: Name of VRF (routing-instance) in MX config\\n    label: VRF Name\\n    type: string\\n  local_as:\\n    type: number\\n    label: Local AS Number\\n  primary_ebgp_config_group:\\n    description: Name of MX config group for eBGP config\\n    label: eBGP config group\\n    type: string\\n  secondary_ebgp_config_group:\\n    description: Name of MX config group for eBGP config\\n    label: eBGP config group\\n    type: string\\n  uplink_vlan:\\n    description: VLAN ID used on uplink interfaces (same for both primary and secondary device)\\n    label: Uplink VLAN ID\\n    type: string\\n  primary_peer_ip:\\n    description: IP address of primary router eBGP neighbour\\n    label: Primary device BGP peer\\n    type: string\\n  secondary_peer_ip:\\n    description: IP address of secondary router eBGP neighbour\\n    label: Secondary device BGP peer\\n    type: string\\n  primary_router_id:\\n    description: Primary router VRF router id\\n    label: Primary router id\\n    type: string\\n  secondary_router_id:\\n    description: Secondary router VRF router id\\n    label: Secondary router id\\n    type: string\\n  remote_as:\\n    description: eBGP remote autonomous system\\n    label: Remote AS\\n    type: string\\n  md5:\\n    description: eBGP authentication key\\n    label: eBGP authentication key\\n    type: string\\n  bgp_group_name:\\n    description: Name of eBGP group\\n    label: eBGP group name\\n    type: string\\n\\nresources:\\n{% set primary_ip_uplink_split = jinja_primary_uplink_ip.split('/') %}\\n{% set secondary_ip_uplink_split = jinja_secondary_uplink_ip.split('/') %}\\n{% for device in [\\\"primary\\\", \\\"secondary\\\"] %}\\n  netconf_configure_{{ device }}:\\n    type: OS::Contrail::NetconfNamedConfigs\\n    properties:\\n      lock_timeout: 3000\\n      device_ip:\\n        get_param: {{ device }}_device_ip\\n      password:\\n        get_param: {{ device }}_device_password\\n      port:\\n        get_param: {{ device }}_device_port\\n      username:\\n        get_param: {{ device }}_device_username\\n      configs:\\n      - config: \\\"\\\"\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: interfaces\\n          - config_type: name\\n            xml_type: named_tag\\n            tag: interface\\n            name: { get_param: {{ device }}_device_physical_interface }\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: unit\\n            name: { get_param: uplink_vlan }\\n          - config_type: tag\\n            xml_type: tag\\n            tag: family\\n          - config_type: tag\\n            xml_type: tag\\n            tag: inet\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: address\\n            name: {% if device == \\\"primary\\\" %} {{ jinja_primary_uplink_ip }} {% else %} {{ jinja_secondary_uplink_ip }} {% endif %}\\n      - config:\\n          str_replace:\\n            params:\\n              $NEIGHBOR_IP:\\n                    get_param: {{ device }}_peer_ip\\n              $REMOTE_AS:\\n                    get_param: remote_as\\n              $APPLY_GROUP:\\n                    get_param: {{ device }}_ebgp_config_group\\n              $KEY:\\n                    get_param: md5\\n            template: |\\n              apply-groups $APPLY_GROUP;\\n              local-address {% if device == \\\"primary\\\" %} {{ primary_ip_uplink_split[0] }} {% else %} {{ secondary_ip_uplink_split[0] }} {% endif %};\\n              peer-as $REMOTE_AS;\\n              neighbor $NEIGHBOR_IP authentication-key $KEY;\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: routing-instances\\n          - config_type: name\\n            xml_type: named_tag\\n            tag: instance\\n            name: { get_param: vrf_name }\\n          - config_type: tag\\n            xml_type: tag\\n            tag: protocols\\n          - config_type: tag\\n            xml_type: tag\\n            tag: bgp\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: group\\n            name: { get_param: bgp_group_name }\\n      - config:\\n          str_replace:\\n            params:\\n              $ROUTER_ID:\\n                    get_param: {{device}}_router_id\\n              $LOCAL_AS:\\n                    get_param: local_as\\n            template: |\\n              router-id $ROUTER_ID;\\n              autonomous-system $LOCAL_AS;\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: routing-instances\\n          - config_type: name\\n            xml_type: named_tag\\n            tag: instance\\n            name: { get_param: vrf_name }\\n          - config_type: tag\\n            xml_type: tag\\n            tag: routing-options\\n{% endfor %}\\n\",\"watch\":[]}")'
03:02:09.551 gohan.db INFO [0m Populating resources for schema worker_data
03:02:09.553 gohan.db INFO [0m Populating resources for schema tenant
03:02:09.555 gohan.db INFO [0m Populating resources for schema edge_router
03:02:09.558 gohan.db INFO [0m Populating resources for schema er_physical_interface
03:02:09.560 gohan.db INFO [0m Populating resources for schema ha_router
03:02:09.566 gohan.db INFO [0m Populating resources for schema ha_interface
03:02:09.583 gohan.db INFO [0m Populating resources for schema internet_service
03:02:09.585 gohan.db INFO [0m Populating resources for schema vpn_service
03:02:09.588 gohan.db INFO [0m Populating resources for schema aws_service
03:02:09.595 gohan.db INFO [0m Populating resources for schema interdc_service
03:02:09.601 gohan.db INFO [0m Populating resources for schema common_function_pool
03:02:09.603 gohan.db INFO [0m Populating resources for schema nat_ip_pool
03:02:09.609 gohan.db INFO [0m Populating resources for schema common_function
03:02:09.611 gohan.db INFO [0m Populating resources for schema public_ip_pool
03:02:09.618 gohan.db INFO [0m Populating resources for schema suspended_public_ip
03:02:09.622 gohan.db INFO [0m Populating resources for schema qos_option
03:02:09.639 gohan.db INFO [0m Populating resources for schema vpn_gateway
03:02:09.645 gohan.db INFO [0m Populating resources for schema vpn_interface
03:02:09.647 gohan.db INFO [0m Populating resources for schema aws_gateway
03:02:09.654 gohan.db INFO [0m Populating resources for schema aws_interface
03:02:09.661 gohan.db INFO [0m Populating resources for schema internet_gateway
03:02:09.663 gohan.db INFO [0m Populating resources for schema common_function_gateway
03:02:09.669 gohan.db INFO [0m Populating resources for schema public_ip
03:02:09.671 gohan.db INFO [0m Populating resources for schema interdc_gateway
03:02:09.677 gohan.db INFO [0m Populating resources for schema interdc_interface
03:02:09.693 gohan.db INFO [0m Populating resources for schema gw_interface
03:02:09.696 gohan.db INFO [0m Populating resources for schema static_route
03:02:09.698 gohan.db INFO [0m Populating resources for schema vnf_template
03:02:09.706 gohan.db INFO [0m Populating resources for schema vnf_plan
03:02:09.714 gohan.db INFO [0m Populating resources for schema vnf_instance
03:02:09.720 gohan.db INFO [0m Populating resources for schema vnf_interface
03:02:09.722 gohan.db INFO [0m Populating resources for schema firewall_plan
03:02:09.729 gohan.db INFO [0m Populating resources for schema firewall
03:02:09.731 gohan.db INFO [0m Populating resources for schema firewall_interface
03:02:09.733 gohan.db INFO [0m Populating resources for schema load_balancer_plan
03:02:09.743 gohan.db INFO [0m Populating resources for schema load_balancer_conf
03:02:09.745 gohan.db INFO [0m Populating resources for schema load_balancer
03:02:09.747 gohan.db INFO [0m Populating resources for schema load_balancer_interface
03:02:09.755 gohan.db INFO [0m Populating resources for schema load_balancer_syslog_server
03:02:09.757 gohan.db INFO [0m Populating resources for schema billing_usage
03:02:09.759 gohan.db INFO [0m Populating resources for schema billing_resource
03:02:09.761 gohan.db INFO [0m Populating resources for schema monitoring
03:02:09.764 gohan.db INFO [0m Populating resources for schema resource_mapping
03:02:09.770 gohan.db INFO [0m Populating resources for schema colocation_space
03:02:09.781 gohan.db INFO [0m Populating resources for schema colocation_physical_link
03:02:09.784 gohan.db INFO [0m Populating resources for schema colocation_logical_link
03:02:09.786 gohan.db INFO [0m Populating resources for schema tenant_connection
03:02:09.793 gohan.db INFO [0m Populating resources for schema hosting_physical_link
03:02:09.795 gohan.db INFO [0m Populating resources for schema hosting_logical_link
03:02:09.807 gohan.server.core INFO [0m Importing data from ./init/common_function_templates.yaml ...
03:02:09.808 gohan.db INFO [0m Populating resources for schema schema
03:02:09.810 gohan.db INFO [0m Populating resources for schema policy
03:02:09.811 gohan.db INFO [0m Populating resources for schema extension
03:02:09.813 gohan.db INFO [0m Populating resources for schema event
03:02:09.817 gohan.db INFO [0m Populating resources for schema namespace
03:02:09.829 gohan.db INFO [0m Populating resources for schema location
03:02:09.831 gohan.db INFO [0m Populating resources for schema ese_device
03:02:09.832 gohan.db INFO [0m Populating resources for schema network
03:02:09.834 gohan.db INFO [0m Populating resources for schema subnet
03:02:09.836 gohan.db INFO [0m Populating resources for schema port
03:02:09.843 gohan.db INFO [0m Populating resources for schema ese_physical_port
03:02:09.844 gohan.db INFO [0m Populating resources for schema ese_logical_port
03:02:09.846 gohan.db INFO [0m Populating resources for schema local_subnet
03:02:09.847 gohan.db INFO [0m Populating resources for schema server
03:02:09.849 gohan.db INFO [0m Populating resources for schema physical_port
03:02:09.851 gohan.db INFO [0m Populating resources for schema quota
03:02:09.855 gohan.db INFO [0m Populating resources for schema reserve_address
03:02:09.866 gohan.db INFO [0m Populating resources for schema neutron_extension
03:02:09.867 gohan.db INFO [0m Populating resources for schema heat_template
03:02:09.872 gohan.db INFO [0m Creating resource common_function_gateway
03:02:09.873 gohan.db.sql INFO [0m Executing SQL query in transaction 'd19486be-c0ae-4d9c-be31-d3119c89403e': 'INSERT INTO `heat_templates` (`handler`,`id`,`parameter_mappings`,`template_file`,`watch`) VALUES (heat_worker,common_function_gateway,{"heat_timeout":"C60","jinja_common_service_numbers":{"for_field":"common_functions","for_mapping":{"field":"common_function_number","path":[{"id":"common_function_id","type":"common_function"}]}},"jinja_dnat_group_name":{"field":"dnat_group_name","path":["common_function_pool_id"]},"jinja_dnat_pool_group_name":{"field":"dnat_pool_group_name","path":["common_function_pool_id"]},"jinja_dummy_dependency":{"field":"id","ignore_missing":true,"path":[{"id":"subnet_id","type":"subnet"}]},"jinja_logical_tunnel_interface_name":{"field":"logical_tunnel_interface_name","path":["common_function_pool_id"]},"jinja_logical_tunnel_unit_service":{"field":"logical_tunnel_unit_service"},"jinja_logical_tunnel_unit_user":{"field":"logical_tunnel_unit_user"},"jinja_nat_ip":{"field":"nat_ip"},"jinja_service_interface_name":{"field":"service_interface_name","path":["common_function_pool_id"]},"jinja_service_vrf_name":{"field":"service_vrf_name","path":["common_function_pool_id"]},"jinja_snapt_group_name":{"field":"snapt_group_name","path":["common_function_pool_id"]},"jinja_snapt_pool_group_name":{"field":"snapt_pool_group_name","path":["common_function_pool_id"]},"jinja_vlan_id":{"field":"vlan_id"},"jinja_vrf_name":{"field":"vrf_name"},"jinja_vrrp_group_name":{"field":"vrrp_group_name","path":["common_function_pool_id"]},"primary_device_ip":{"field":"ip","path":["downlink_interface_id","ha_router_id","primary_router_id"]},"primary_device_logical_downlink_interface":{"field":"primary_logical_interface_name"},"primary_device_password":{"field":"password","path":["downlink_interface_id","ha_router_id","primary_router_id"]},"primary_device_physical_downlink_interface":{"field":"name","path":["downlink_interface_id","primary_interface_id"]},"primary_device_port":{"field":"ssh_port","path":["downlink_interface_id","ha_router_id","primary_router_id"]},"primary_device_username":{"field":"login","path":["downlink_interface_id","ha_router_id","primary_router_id"]},"secondary_device_ip":{"field":"ip","path":["downlink_interface_id","ha_router_id","secondary_router_id"]},"secondary_device_logical_downlink_interface":{"field":"secondary_logical_interface_name"},"secondary_device_password":{"field":"password","path":["downlink_interface_id","ha_router_id","secondary_router_id"]},"secondary_device_physical_downlink_interface":{"field":"name","path":["downlink_interface_id","secondary_interface_id"]},"secondary_device_port":{"field":"ssh_port","path":["downlink_interface_id","ha_router_id","secondary_router_id"]},"secondary_device_username":{"field":"login","path":["downlink_interface_id","ha_router_id","secondary_router_id"]}},heat_template_version: 2013-05-23

description: >
  Common Function Gateway

parameters:
  primary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Primary Device.
    label: Ip address of the device.
    type: string
  primary_device_port:
    description: Port that will be used to establish ssh connection to the Primary Device.
    label: Port of the ssh connection.
    type: number
  primary_device_username:
    description: Name of the user which will be used to log onto the Primary Device.
    label: User name to log on to device.
    type: string
  primary_device_password:
    description: Password of the user which will be used to log onto the Primary Device.
    label: Users password.
    type: string
  primary_device_logical_downlink_interface:
    description: Name of the created logical downlink interface on the Primary device
    label: Logical Interface name
    type: string
  primary_device_physical_downlink_interface:
    description: Physical port on the Primary device on which the logical downlink port will be configured
    label: Underlying physical interface
    type: string
  secondary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Secondary Device.
    label: Ip address of the device.
    type: string
  secondary_device_port:
    description: Port that will be used to establish ssh connection to the Secondary Device.
    label: Port of the ssh connection.
    type: number
  secondary_device_username:
    description: Name of the user which will be used to log onto the Secondary Device.
    label: User name to log on to device.
    type: string
  secondary_device_password:
    description: Password of the user which will be used to log onto the Secondary Device.
    label: Users password.
    type: string
  secondary_device_logical_downlink_interface:
    description: Name of the created logical downlink interface on the Secondary device
    label: Logical Interface name
    type: string
  secondary_device_physical_downlink_interface:
    description: Physical port on the Secondary device on which the logical downlink port will be configured
    label: Underlying physical interface
    type: string

resources:
{% for device in ["primary", "secondary"] %}
  netconf_configure_{{ device }}:
    properties:
      lock_timeout: 3000
      configs:
      - config: |
          nat-rules {{ jinja_vrf_name }}-SNAPT;
          nat-rules {{ jinja_vrf_name }}-DNAT;
          interface-service service-interface {{ jinja_service_interface_name }}.{{ jinja_vlan_id }};
        path:
          - config_type: tag
            xml_type: tag
            tag: services
          - config_type: named_tag
            xml_type: named_tag
            tag: service-set
            name: {{ jinja_vrf_name }}
      - config: |
          apply-groups {{ jinja_snapt_pool_group_name }};
          address {{ jinja_nat_ip }}/32;
        path:
          - config_type: tag
            xml_type: tag
            tag: services
          - config_type: tag
            xml_type: tag
            tag: nat
          - config_type: named_tag
            xml_type: named_tag
            tag: pool
            name: {{ jinja_vrf_name }}-SNAPT-POOL
      - config: |
          apply-groups {{ jinja_snapt_group_name }};
          term source then translated source-pool {{ jinja_vrf_name }}-SNAPT-POOL;
        path:
          - config_type: tag
            xml_type: tag
            tag: services
          - config_type: tag
            xml_type: tag
            tag: nat
          - config_type: named_tag
            xml_type: named_tag
            tag: rule
            name: {{ jinja_vrf_name }}-SNAPT
      {% for service_number in jinja_common_service_numbers %}
      - config: |
          apply-groups {{ jinja_dnat_pool_group_name }}-{{ service_number }};
        path:
          - config_type: tag
            xml_type: tag
            tag: services
          - config_type: tag
            xml_type: tag
            tag: nat
          - config_type: named_tag
            xml_type: named_tag
            tag: pool
            name: {{ jinja_vrf_name }}-{{ jinja_dnat_pool_group_name }}-{{ service_number }}
      {% endfor %}
      - config: |
          apply-groups {{ jinja_dnat_group_name }};
          {% for service_number in jinja_common_service_numbers %}
          term {{ service_number }} then translated destination-pool {{ jinja_vrf_name }}-{{ jinja_dnat_pool_group_name }}-{{ service_number }};
          {% endfor %}
        path:
          - config_type: tag
            xml_type: tag
            tag: services
          - config_type: tag
            xml_type: tag
            tag: nat
          - config_type: named_tag
            xml_type: named_tag
            tag: rule
            name: {{ jinja_vrf_name }}-DNAT
      - config: |
          peer-unit {{ jinja_logical_tunnel_unit_service }};
          family inet service input service-set {{ jinja_vrf_name }};
          family inet service output service-set {{ jinja_vrf_name }};
        path:
          - config_type: tag
            xml_type: tag
            tag: interfaces
          - config_type: name
            xml_type: named_tag
            tag: interface
            name: {{ jinja_logical_tunnel_interface_name }}
          - config_type: named_tag
            xml_type: named_tag
            tag: unit
            name: {{ jinja_logical_tunnel_unit_user }}
      - config: |
          peer-unit {{ jinja_logical_tunnel_unit_user }};
        path:
          - config_type: tag
            xml_type: tag
            tag: interfaces
          - config_type: name
            xml_type: named_tag
            tag: interface
            name: {{ jinja_logical_tunnel_interface_name }}
          - config_type: named_tag
            xml_type: named_tag
            tag: unit
            name: {{ jinja_logical_tunnel_unit_service }}
      - config: |
          family inet;
        path:
          - config_type: tag
            xml_type: tag
            tag: interfaces
          - config_type: name
            xml_type: named_tag
            tag: interface
            name: {{ jinja_service_interface_name }}
          - config_type: named_tag
            xml_type: named_tag
            tag: unit
            name: {{ jinja_vlan_id }}
      - config: |
          apply-groups {{ jinja_vrrp_group_name }};
          description {{ jinja_vrf_name }};
          vlan-id {{ jinja_vlan_id }};
          family inet service input service-set {{ jinja_vrf_name }};
          family inet service output service-set {{ jinja_vrf_name }};
        path:
          - config_type: tag
            xml_type: tag
            tag: interfaces
          - config_type: name
            xml_type: named_tag
            tag: interface
            name: { get_param: {{ device }}_device_physical_downlink_interface }
          - config_type: named_tag
            xml_type: named_tag
            tag: unit
            name: {{ jinja_vlan_id }}
      - config: ""
        path:
          - config_type: tag
            xml_type: tag
            tag: routing-instances
          - config_type: name
            xml_type: named_tag
            tag: instance
            name: {{ jinja_service_vrf_name }}
          - config_type: named_tag
            xml_type: named_tag
            tag: interface
            name: {{ jinja_logical_tunnel_interface_name }}.{{ jinja_logical_tunnel_unit_service }}
      - config:
          next-hop {{ jinja_logical_tunnel_interface_name }}.{{ jinja_logical_tunnel_unit_service }};
        path:
          - config_type: tag
            xml_type: tag
            tag: routing-instances
          - config_type: name
            xml_type: named_tag
            tag: instance
            name: {{ jinja_service_vrf_name }}
          - config_type: tag
            xml_type: tag
            tag: routing-options
          - config_type: tag
            xml_type: tag
            tag: static
          - config_type: named_tag
            xml_type: named_tag
            tag: route
            name: {{ jinja_nat_ip }}/32
      - config:
          str_replace:
            params:
              $DOWNLINK_INTERFACE:
                get_param: {{ device }}_device_logical_downlink_interface
            template: |
              instance-type virtual-router;
              interface {{ jinja_logical_tunnel_interface_name }}.{{ jinja_logical_tunnel_unit_user}};
              interface {{ jinja_service_interface_name}}.{{ jinja_vlan_id }};
              interface $DOWNLINK_INTERFACE;
              routing-options static route 0.0.0.0/0 next-hop {{ jinja_logical_tunnel_interface_name }}.{{ jinja_logical_tunnel_unit_user }};
        path:
          - config_type: tag
            xml_type: tag
            tag: routing-instances
          - config_type: name
            xml_type: named_tag
            tag: instance
            name: {{ jinja_vrf_name }}
      device_ip:
        get_param: {{ device }}_device_ip
      password:
        get_param: {{ device }}_device_password
      port:
        get_param: {{ device }}_device_port
      username:
        get_param: {{ device }}_device_username
    type: OS::Contrail::NetconfNamedConfigs
{% endfor %}
,[])'
03:02:09.874 gohan.db.sql INFO [0m Executing SQL query in transaction 'd19486be-c0ae-4d9c-be31-d3119c89403e': 'INSERT INTO `events` (`type`,`marked_for_deletion`,`body`,`version`,`path`,`timestamp`) VALUES (create,false,"{\"handler\":\"heat_worker\",\"id\":\"common_function_gateway\",\"parameter_mappings\":{\"heat_timeout\":\"C60\",\"jinja_common_service_numbers\":{\"for_field\":\"common_functions\",\"for_mapping\":{\"field\":\"common_function_number\",\"path\":[{\"id\":\"common_function_id\",\"type\":\"common_function\"}]}},\"jinja_dnat_group_name\":{\"field\":\"dnat_group_name\",\"path\":[\"common_function_pool_id\"]},\"jinja_dnat_pool_group_name\":{\"field\":\"dnat_pool_group_name\",\"path\":[\"common_function_pool_id\"]},\"jinja_dummy_dependency\":{\"field\":\"id\",\"ignore_missing\":true,\"path\":[{\"id\":\"subnet_id\",\"type\":\"subnet\"}]},\"jinja_logical_tunnel_interface_name\":{\"field\":\"logical_tunnel_interface_name\",\"path\":[\"common_function_pool_id\"]},\"jinja_logical_tunnel_unit_service\":{\"field\":\"logical_tunnel_unit_service\"},\"jinja_logical_tunnel_unit_user\":{\"field\":\"logical_tunnel_unit_user\"},\"jinja_nat_ip\":{\"field\":\"nat_ip\"},\"jinja_service_interface_name\":{\"field\":\"service_interface_name\",\"path\":[\"common_function_pool_id\"]},\"jinja_service_vrf_name\":{\"field\":\"service_vrf_name\",\"path\":[\"common_function_pool_id\"]},\"jinja_snapt_group_name\":{\"field\":\"snapt_group_name\",\"path\":[\"common_function_pool_id\"]},\"jinja_snapt_pool_group_name\":{\"field\":\"snapt_pool_group_name\",\"path\":[\"common_function_pool_id\"]},\"jinja_vlan_id\":{\"field\":\"vlan_id\"},\"jinja_vrf_name\":{\"field\":\"vrf_name\"},\"jinja_vrrp_group_name\":{\"field\":\"vrrp_group_name\",\"path\":[\"common_function_pool_id\"]},\"primary_device_ip\":{\"field\":\"ip\",\"path\":[\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"primary_device_logical_downlink_interface\":{\"field\":\"primary_logical_interface_name\"},\"primary_device_password\":{\"field\":\"password\",\"path\":[\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"primary_device_physical_downlink_interface\":{\"field\":\"name\",\"path\":[\"downlink_interface_id\",\"primary_interface_id\"]},\"primary_device_port\":{\"field\":\"ssh_port\",\"path\":[\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"primary_device_username\":{\"field\":\"login\",\"path\":[\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"secondary_device_ip\":{\"field\":\"ip\",\"path\":[\"downlink_interface_id\",\"ha_router_id\",\"secondary_router_id\"]},\"secondary_device_logical_downlink_interface\":{\"field\":\"secondary_logical_interface_name\"},\"secondary_device_password\":{\"field\":\"password\",\"path\":[\"downlink_interface_id\",\"ha_router_id\",\"secondary_router_id\"]},\"secondary_device_physical_downlink_interface\":{\"field\":\"name\",\"path\":[\"downlink_interface_id\",\"secondary_interface_id\"]},\"secondary_device_port\":{\"field\":\"ssh_port\",\"path\":[\"downlink_interface_id\",\"ha_router_id\",\"secondary_router_id\"]},\"secondary_device_username\":{\"field\":\"login\",\"path\":[\"downlink_interface_id\",\"ha_router_id\",\"secondary_router_id\"]}},\"template_file\":\"heat_template_version: 2013-05-23\\n\\ndescription: \\u003e\\n  Common Function Gateway\\n\\nparameters:\\n  primary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\\n    label: Ip address of the device.\\n    type: string\\n  primary_device_port:\\n    description: Port that will be used to establish ssh connection to the Primary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  primary_device_username:\\n    description: Name of the user which will be used to log onto the Primary Device.\\n    label: User name to log on to device.\\n    type: string\\n  primary_device_password:\\n    description: Password of the user which will be used to log onto the Primary Device.\\n    label: Users password.\\n    type: string\\n  primary_device_logical_downlink_interface:\\n    description: Name of the created logical downlink interface on the Primary device\\n    label: Logical Interface name\\n    type: string\\n  primary_device_physical_downlink_interface:\\n    description: Physical port on the Primary device on which the logical downlink port will be configured\\n    label: Underlying physical interface\\n    type: string\\n  secondary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\\n    label: Ip address of the device.\\n    type: string\\n  secondary_device_port:\\n    description: Port that will be used to establish ssh connection to the Secondary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  secondary_device_username:\\n    description: Name of the user which will be used to log onto the Secondary Device.\\n    label: User name to log on to device.\\n    type: string\\n  secondary_device_password:\\n    description: Password of the user which will be used to log onto the Secondary Device.\\n    label: Users password.\\n    type: string\\n  secondary_device_logical_downlink_interface:\\n    description: Name of the created logical downlink interface on the Secondary device\\n    label: Logical Interface name\\n    type: string\\n  secondary_device_physical_downlink_interface:\\n    description: Physical port on the Secondary device on which the logical downlink port will be configured\\n    label: Underlying physical interface\\n    type: string\\n\\nresources:\\n{% for device in [\\\"primary\\\", \\\"secondary\\\"] %}\\n  netconf_configure_{{ device }}:\\n    properties:\\n      lock_timeout: 3000\\n      configs:\\n      - config: |\\n          nat-rules {{ jinja_vrf_name }}-SNAPT;\\n          nat-rules {{ jinja_vrf_name }}-DNAT;\\n          interface-service service-interface {{ jinja_service_interface_name }}.{{ jinja_vlan_id }};\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: services\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: service-set\\n            name: {{ jinja_vrf_name }}\\n      - config: |\\n          apply-groups {{ jinja_snapt_pool_group_name }};\\n          address {{ jinja_nat_ip }}/32;\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: services\\n          - config_type: tag\\n            xml_type: tag\\n            tag: nat\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: pool\\n            name: {{ jinja_vrf_name }}-SNAPT-POOL\\n      - config: |\\n          apply-groups {{ jinja_snapt_group_name }};\\n          term source then translated source-pool {{ jinja_vrf_name }}-SNAPT-POOL;\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: services\\n          - config_type: tag\\n            xml_type: tag\\n            tag: nat\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: rule\\n            name: {{ jinja_vrf_name }}-SNAPT\\n      {% for service_number in jinja_common_service_numbers %}\\n      - config: |\\n          apply-groups {{ jinja_dnat_pool_group_name }}-{{ service_number }};\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: services\\n          - config_type: tag\\n            xml_type: tag\\n            tag: nat\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: pool\\n            name: {{ jinja_vrf_name }}-{{ jinja_dnat_pool_group_name }}-{{ service_number }}\\n      {% endfor %}\\n      - config: |\\n          apply-groups {{ jinja_dnat_group_name }};\\n          {% for service_number in jinja_common_service_numbers %}\\n          term {{ service_number }} then translated destination-pool {{ jinja_vrf_name }}-{{ jinja_dnat_pool_group_name }}-{{ service_number }};\\n          {% endfor %}\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: services\\n          - config_type: tag\\n            xml_type: tag\\n            tag: nat\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: rule\\n            name: {{ jinja_vrf_name }}-DNAT\\n      - config: |\\n          peer-unit {{ jinja_logical_tunnel_unit_service }};\\n          family inet service input service-set {{ jinja_vrf_name }};\\n          family inet service output service-set {{ jinja_vrf_name }};\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: interfaces\\n          - config_type: name\\n            xml_type: named_tag\\n            tag: interface\\n            name: {{ jinja_logical_tunnel_interface_name }}\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: unit\\n            name: {{ jinja_logical_tunnel_unit_user }}\\n      - config: |\\n          peer-unit {{ jinja_logical_tunnel_unit_user }};\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: interfaces\\n          - config_type: name\\n            xml_type: named_tag\\n            tag: interface\\n            name: {{ jinja_logical_tunnel_interface_name }}\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: unit\\n            name: {{ jinja_logical_tunnel_unit_service }}\\n      - config: |\\n          family inet;\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: interfaces\\n          - config_type: name\\n            xml_type: named_tag\\n            tag: interface\\n            name: {{ jinja_service_interface_name }}\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: unit\\n            name: {{ jinja_vlan_id }}\\n      - config: |\\n          apply-groups {{ jinja_vrrp_group_name }};\\n          description {{ jinja_vrf_name }};\\n          vlan-id {{ jinja_vlan_id }};\\n          family inet service input service-set {{ jinja_vrf_name }};\\n          family inet service output service-set {{ jinja_vrf_name }};\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: interfaces\\n          - config_type: name\\n            xml_type: named_tag\\n            tag: interface\\n            name: { get_param: {{ device }}_device_physical_downlink_interface }\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: unit\\n            name: {{ jinja_vlan_id }}\\n      - config: \\\"\\\"\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: routing-instances\\n          - config_type: name\\n            xml_type: named_tag\\n            tag: instance\\n            name: {{ jinja_service_vrf_name }}\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: interface\\n            name: {{ jinja_logical_tunnel_interface_name }}.{{ jinja_logical_tunnel_unit_service }}\\n      - config:\\n          next-hop {{ jinja_logical_tunnel_interface_name }}.{{ jinja_logical_tunnel_unit_service }};\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: routing-instances\\n          - config_type: name\\n            xml_type: named_tag\\n            tag: instance\\n            name: {{ jinja_service_vrf_name }}\\n          - config_type: tag\\n            xml_type: tag\\n            tag: routing-options\\n          - config_type: tag\\n            xml_type: tag\\n            tag: static\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: route\\n            name: {{ jinja_nat_ip }}/32\\n      - config:\\n          str_replace:\\n            params:\\n              $DOWNLINK_INTERFACE:\\n                get_param: {{ device }}_device_logical_downlink_interface\\n            template: |\\n              instance-type virtual-router;\\n              interface {{ jinja_logical_tunnel_interface_name }}.{{ jinja_logical_tunnel_unit_user}};\\n              interface {{ jinja_service_interface_name}}.{{ jinja_vlan_id }};\\n              interface $DOWNLINK_INTERFACE;\\n              routing-options static route 0.0.0.0/0 next-hop {{ jinja_logical_tunnel_interface_name }}.{{ jinja_logical_tunnel_unit_user }};\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: routing-instances\\n          - config_type: name\\n            xml_type: named_tag\\n            tag: instance\\n            name: {{ jinja_vrf_name }}\\n      device_ip:\\n        get_param: {{ device }}_device_ip\\n      password:\\n        get_param: {{ device }}_device_password\\n      port:\\n        get_param: {{ device }}_device_port\\n      username:\\n        get_param: {{ device }}_device_username\\n    type: OS::Contrail::NetconfNamedConfigs\\n{% endfor %}\\n\",\"watch\":[]}",1,/v2.0/heat_templates/common_function_gateway,1494471729)'
03:02:09.877 gohan.db INFO [0m Creating resource common_function
03:02:09.877 gohan.db.sql INFO [0m Executing SQL query in transaction 'd19486be-c0ae-4d9c-be31-d3119c89403e': 'INSERT INTO `heat_templates` (`parameter_mappings`,`template_file`,`watch`,`handler`,`id`) VALUES ({"heat_timeout":"C60","jinja_dnat_group_name":{"field":"dnat_group_name","path":["common_function_pool_id"]},"jinja_dnat_pool_group_name":{"field":"dnat_pool_group_name","path":["common_function_pool_id"]},"jinja_link_local_ip_address":{"field":"link_local_ip_address"},"jinja_service_number":{"field":"common_function_number"},"jinja_shared_ip_address":{"field":"shared_ip_address"},"jinja_vrid":{"field":"vrid"},"jinja_vrrp_group_name":{"field":"vrrp_group_name","path":["common_function_pool_id"]},"netmask":{"field":"link_local_netmask","path":["common_function_pool_id"]},"primary_device_ip":{"field":"ip","path":["ha_router_id","primary_router_id"]},"primary_device_password":{"field":"password","path":["ha_router_id","primary_router_id"]},"primary_device_port":{"field":"ssh_port","path":["ha_router_id","primary_router_id"]},"primary_device_username":{"field":"login","path":["ha_router_id","primary_router_id"]},"primary_vrrp_ip":{"field":"primary_vrrp_ip"},"secondary_device_ip":{"field":"ip","path":["ha_router_id","secondary_router_id"]},"secondary_device_password":{"field":"password","path":["ha_router_id","secondary_router_id"]},"secondary_device_port":{"field":"ssh_port","path":["ha_router_id","secondary_router_id"]},"secondary_device_username":{"field":"login","path":["ha_router_id","secondary_router_id"]},"secondary_vrrp_ip":{"field":"secondary_vrrp_ip"}},heat_template_version: 2013-05-23

description: >
  Common Function

parameters:
  primary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Primary Device.
    label: Ip address of the device.
    type: string
  primary_device_port:
    description: Port that will be used to establish ssh connection to the Primary Device.
    label: Port of the ssh connection.
    type: number
  primary_device_username:
    description: Name of the user which will be used to log onto the Primary Device.
    label: User name to log on to device.
    type: string
  primary_device_password:
    description: Password of the user which will be used to log onto the Primary Device.
    label: Users password.
    type: string
  primary_vrrp_ip:
    description: Local ip in VRRP group on primary device.
    label: Primary VRRP ip.
    type: string
  secondary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Secondary Device.
    label: Ip address of the device.
    type: string
  secondary_device_port:
    description: Port that will be used to establish ssh connection to the Secondary Device.
    label: Port of the ssh connection.
    type: number
  secondary_device_username:
    description: Name of the user which will be used to log onto the Secondary Device.
    label: User name to log on to device.
    type: string
  secondary_device_password:
    description: Password of the user which will be used to log onto the Secondary Device.
    label: Users password.
    type: string
  secondary_vrrp_ip:
    description: Local ip in VRRP group on secondary device.
    label: Secondary VRRP ip.
    type: string
  netmask:
    description: Netmask used in link local network.
    label: Link-local netmask.
    type: string

resources:
{% for device in ["primary", "secondary"] %}
  netconf_configure_{{ device }}:
    properties:
      lock_timeout: 3000
      configs:
      - config: ""
        path:
          - config_type: named_tag
            xml_type: named_tag
            tag: groups
            name: {{ jinja_vrrp_group_name }}
          - config_type: tag
            xml_type: tag
            tag: interfaces
          - config_type: name
            xml_type: named_tag
            tag: interface
            name: <*>
          - config_type: named_tag
            xml_type: named_tag
            tag: unit
            name: <*>
          - config_type: tag
            xml_type: tag
            tag: family
          - config_type: tag
            xml_type: tag
            tag: inet
          - config_type: named_tag
            xml_type: named_tag
            tag: address
            name:
              str_replace:
                params:
                  $VIP:
                    get_param: {{ device }}_vrrp_ip
                  $NETMASK:
                    get_param: netmask
                template: |
                  $VIP/$NETMASK
          - config_type: named_tag
            xml_type: named_tag
            tag: vrrp-group
            name: {{ jinja_vrid }}
          - config_type: named_tag
            xml_type: named_tag # FIXME: this is probably not true, as far as i can see we don't support that in plugin at all :(
            tag: virtual-address
            name: {{ jinja_link_local_ip_address }}
      - config: |
          from {
            destination-address {
              {{ jinja_link_local_ip_address }}/32;
            }
          }
          then {
            translated {
              translation-type {
                dnat-44;
              }
            }
          }
        path:
          - config_type: named_tag
            xml_type: named_tag
            tag: groups
            name: {{ jinja_dnat_group_name }}
          - config_type: tag
            xml_type: tag
            tag: services
          - config_type: tag
            xml_type: tag
            tag: nat
          - config_type: named_tag
            xml_type: named_tag
            tag: rule
            name: <*>
          - config_type: named_tag
            xml_type: named_tag
            tag: term
            name: {{ jinja_service_number }}
      - config: |
          services {
            nat {
              pool <*> {
                address {{ jinja_shared_ip_address }}/32;
              }
            }
          }
        path:
          - config_type: named_tag
            xml_type: named_tag
            tag: groups
            name: {{ jinja_dnat_pool_group_name }}-{{ jinja_service_number }}
      device_ip:
        get_param: {{ device }}_device_ip
      password:
        get_param: {{ device }}_device_password
      port:
        get_param: {{ device }}_device_port
      username:
        get_param: {{ device }}_device_username
    type: OS::Contrail::NetconfNamedConfigs
{% endfor %}
,[],heat_worker,common_function)'
03:02:09.878 gohan.db.sql INFO [0m Executing SQL query in transaction 'd19486be-c0ae-4d9c-be31-d3119c89403e': 'INSERT INTO `events` (`path`,`timestamp`,`type`,`marked_for_deletion`,`body`,`version`) VALUES (/v2.0/heat_templates/common_function,1494471729,create,false,"{\"handler\":\"heat_worker\",\"id\":\"common_function\",\"parameter_mappings\":{\"heat_timeout\":\"C60\",\"jinja_dnat_group_name\":{\"field\":\"dnat_group_name\",\"path\":[\"common_function_pool_id\"]},\"jinja_dnat_pool_group_name\":{\"field\":\"dnat_pool_group_name\",\"path\":[\"common_function_pool_id\"]},\"jinja_link_local_ip_address\":{\"field\":\"link_local_ip_address\"},\"jinja_service_number\":{\"field\":\"common_function_number\"},\"jinja_shared_ip_address\":{\"field\":\"shared_ip_address\"},\"jinja_vrid\":{\"field\":\"vrid\"},\"jinja_vrrp_group_name\":{\"field\":\"vrrp_group_name\",\"path\":[\"common_function_pool_id\"]},\"netmask\":{\"field\":\"link_local_netmask\",\"path\":[\"common_function_pool_id\"]},\"primary_device_ip\":{\"field\":\"ip\",\"path\":[\"ha_router_id\",\"primary_router_id\"]},\"primary_device_password\":{\"field\":\"password\",\"path\":[\"ha_router_id\",\"primary_router_id\"]},\"primary_device_port\":{\"field\":\"ssh_port\",\"path\":[\"ha_router_id\",\"primary_router_id\"]},\"primary_device_username\":{\"field\":\"login\",\"path\":[\"ha_router_id\",\"primary_router_id\"]},\"primary_vrrp_ip\":{\"field\":\"primary_vrrp_ip\"},\"secondary_device_ip\":{\"field\":\"ip\",\"path\":[\"ha_router_id\",\"secondary_router_id\"]},\"secondary_device_password\":{\"field\":\"password\",\"path\":[\"ha_router_id\",\"secondary_router_id\"]},\"secondary_device_port\":{\"field\":\"ssh_port\",\"path\":[\"ha_router_id\",\"secondary_router_id\"]},\"secondary_device_username\":{\"field\":\"login\",\"path\":[\"ha_router_id\",\"secondary_router_id\"]},\"secondary_vrrp_ip\":{\"field\":\"secondary_vrrp_ip\"}},\"template_file\":\"heat_template_version: 2013-05-23\\n\\ndescription: \\u003e\\n  Common Function\\n\\nparameters:\\n  primary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\\n    label: Ip address of the device.\\n    type: string\\n  primary_device_port:\\n    description: Port that will be used to establish ssh connection to the Primary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  primary_device_username:\\n    description: Name of the user which will be used to log onto the Primary Device.\\n    label: User name to log on to device.\\n    type: string\\n  primary_device_password:\\n    description: Password of the user which will be used to log onto the Primary Device.\\n    label: Users password.\\n    type: string\\n  primary_vrrp_ip:\\n    description: Local ip in VRRP group on primary device.\\n    label: Primary VRRP ip.\\n    type: string\\n  secondary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\\n    label: Ip address of the device.\\n    type: string\\n  secondary_device_port:\\n    description: Port that will be used to establish ssh connection to the Secondary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  secondary_device_username:\\n    description: Name of the user which will be used to log onto the Secondary Device.\\n    label: User name to log on to device.\\n    type: string\\n  secondary_device_password:\\n    description: Password of the user which will be used to log onto the Secondary Device.\\n    label: Users password.\\n    type: string\\n  secondary_vrrp_ip:\\n    description: Local ip in VRRP group on secondary device.\\n    label: Secondary VRRP ip.\\n    type: string\\n  netmask:\\n    description: Netmask used in link local network.\\n    label: Link-local netmask.\\n    type: string\\n\\nresources:\\n{% for device in [\\\"primary\\\", \\\"secondary\\\"] %}\\n  netconf_configure_{{ device }}:\\n    properties:\\n      lock_timeout: 3000\\n      configs:\\n      - config: \\\"\\\"\\n        path:\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: groups\\n            name: {{ jinja_vrrp_group_name }}\\n          - config_type: tag\\n            xml_type: tag\\n            tag: interfaces\\n          - config_type: name\\n            xml_type: named_tag\\n            tag: interface\\n            name: \\u003c*\\u003e\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: unit\\n            name: \\u003c*\\u003e\\n          - config_type: tag\\n            xml_type: tag\\n            tag: family\\n          - config_type: tag\\n            xml_type: tag\\n            tag: inet\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: address\\n            name:\\n              str_replace:\\n                params:\\n                  $VIP:\\n                    get_param: {{ device }}_vrrp_ip\\n                  $NETMASK:\\n                    get_param: netmask\\n                template: |\\n                  $VIP/$NETMASK\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: vrrp-group\\n            name: {{ jinja_vrid }}\\n          - config_type: named_tag\\n            xml_type: named_tag # FIXME: this is probably not true, as far as i can see we don't support that in plugin at all :(\\n            tag: virtual-address\\n            name: {{ jinja_link_local_ip_address }}\\n      - config: |\\n          from {\\n            destination-address {\\n              {{ jinja_link_local_ip_address }}/32;\\n            }\\n          }\\n          then {\\n            translated {\\n              translation-type {\\n                dnat-44;\\n              }\\n            }\\n          }\\n        path:\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: groups\\n            name: {{ jinja_dnat_group_name }}\\n          - config_type: tag\\n            xml_type: tag\\n            tag: services\\n          - config_type: tag\\n            xml_type: tag\\n            tag: nat\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: rule\\n            name: \\u003c*\\u003e\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: term\\n            name: {{ jinja_service_number }}\\n      - config: |\\n          services {\\n            nat {\\n              pool \\u003c*\\u003e {\\n                address {{ jinja_shared_ip_address }}/32;\\n              }\\n            }\\n          }\\n        path:\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: groups\\n            name: {{ jinja_dnat_pool_group_name }}-{{ jinja_service_number }}\\n      device_ip:\\n        get_param: {{ device }}_device_ip\\n      password:\\n        get_param: {{ device }}_device_password\\n      port:\\n        get_param: {{ device }}_device_port\\n      username:\\n        get_param: {{ device }}_device_username\\n    type: OS::Contrail::NetconfNamedConfigs\\n{% endfor %}\\n\",\"watch\":[]}",1)'
03:02:09.879 gohan.db INFO [0m Populating resources for schema worker_data
03:02:09.881 gohan.db INFO [0m Populating resources for schema tenant
03:02:09.882 gohan.db INFO [0m Populating resources for schema edge_router
03:02:09.884 gohan.db INFO [0m Populating resources for schema er_physical_interface
03:02:09.886 gohan.db INFO [0m Populating resources for schema ha_router
03:02:09.887 gohan.db INFO [0m Populating resources for schema ha_interface
03:02:09.900 gohan.db INFO [0m Populating resources for schema internet_service
03:02:09.902 gohan.db INFO [0m Populating resources for schema vpn_service
03:02:09.903 gohan.db INFO [0m Populating resources for schema aws_service
03:02:09.906 gohan.db INFO [0m Populating resources for schema interdc_service
03:02:09.908 gohan.db INFO [0m Populating resources for schema common_function_pool
03:02:09.913 gohan.db INFO [0m Populating resources for schema nat_ip_pool
03:02:09.915 gohan.db INFO [0m Populating resources for schema common_function
03:02:09.917 gohan.db INFO [0m Populating resources for schema public_ip_pool
03:02:09.919 gohan.db INFO [0m Populating resources for schema suspended_public_ip
03:02:09.920 gohan.db INFO [0m Populating resources for schema qos_option
03:02:09.922 gohan.db INFO [0m Populating resources for schema vpn_gateway
03:02:09.937 gohan.db INFO [0m Populating resources for schema vpn_interface
03:02:09.938 gohan.db INFO [0m Populating resources for schema aws_gateway
03:02:09.940 gohan.db INFO [0m Populating resources for schema aws_interface
03:02:09.942 gohan.db INFO [0m Populating resources for schema internet_gateway
03:02:09.943 gohan.db INFO [0m Populating resources for schema common_function_gateway
03:02:09.950 gohan.db INFO [0m Populating resources for schema public_ip
03:02:09.952 gohan.db INFO [0m Populating resources for schema interdc_gateway
03:02:09.953 gohan.db INFO [0m Populating resources for schema interdc_interface
03:02:09.955 gohan.db INFO [0m Populating resources for schema gw_interface
03:02:09.956 gohan.db INFO [0m Populating resources for schema static_route
03:02:09.958 gohan.db INFO [0m Populating resources for schema vnf_template
03:02:09.959 gohan.db INFO [0m Populating resources for schema vnf_plan
03:02:09.963 gohan.db INFO [0m Populating resources for schema vnf_instance
03:02:09.975 gohan.db INFO [0m Populating resources for schema vnf_interface
03:02:09.977 gohan.db INFO [0m Populating resources for schema firewall_plan
03:02:09.978 gohan.db INFO [0m Populating resources for schema firewall
03:02:09.980 gohan.db INFO [0m Populating resources for schema firewall_interface
03:02:09.987 gohan.db INFO [0m Populating resources for schema load_balancer_plan
03:02:09.988 gohan.db INFO [0m Populating resources for schema load_balancer_conf
03:02:09.990 gohan.db INFO [0m Populating resources for schema load_balancer
03:02:09.992 gohan.db INFO [0m Populating resources for schema load_balancer_interface
03:02:09.993 gohan.db INFO [0m Populating resources for schema load_balancer_syslog_server
03:02:09.995 gohan.db INFO [0m Populating resources for schema billing_usage
03:02:10.000 gohan.db INFO [0m Populating resources for schema billing_resource
03:02:10.002 gohan.db INFO [0m Populating resources for schema monitoring
03:02:10.014 gohan.db INFO [0m Populating resources for schema resource_mapping
03:02:10.015 gohan.db INFO [0m Populating resources for schema colocation_space
03:02:10.017 gohan.db INFO [0m Populating resources for schema colocation_physical_link
03:02:10.019 gohan.db INFO [0m Populating resources for schema colocation_logical_link
03:02:10.026 gohan.db INFO [0m Populating resources for schema tenant_connection
03:02:10.027 gohan.db INFO [0m Populating resources for schema hosting_physical_link
03:02:10.029 gohan.db INFO [0m Populating resources for schema hosting_logical_link
03:02:10.048 gohan.server.core INFO [0m Importing data from ./init/interdc_templates.yaml ...
03:02:10.051 gohan.db INFO [0m Populating resources for schema schema
03:02:10.054 gohan.db INFO [0m Populating resources for schema policy
03:02:10.077 gohan.db INFO [0m Populating resources for schema extension
03:02:10.087 gohan.db INFO [0m Populating resources for schema event
03:02:10.091 gohan.db INFO [0m Populating resources for schema namespace
03:02:10.094 gohan.db INFO [0m Populating resources for schema location
03:02:10.101 gohan.db INFO [0m Populating resources for schema ese_device
03:02:10.116 gohan.db INFO [0m Populating resources for schema network
03:02:10.119 gohan.db INFO [0m Populating resources for schema subnet
03:02:10.123 gohan.db INFO [0m Populating resources for schema port
03:02:10.130 gohan.db INFO [0m Populating resources for schema ese_physical_port
03:02:10.136 gohan.db INFO [0m Populating resources for schema ese_logical_port
03:02:10.142 gohan.db INFO [0m Populating resources for schema local_subnet
03:02:10.161 gohan.db INFO [0m Populating resources for schema server
03:02:10.167 gohan.db INFO [0m Populating resources for schema physical_port
03:02:10.177 gohan.db INFO [0m Populating resources for schema quota
03:02:10.182 gohan.db INFO [0m Populating resources for schema reserve_address
03:02:10.189 gohan.db INFO [0m Populating resources for schema neutron_extension
03:02:10.194 gohan.db INFO [0m Populating resources for schema heat_template
03:02:10.203 gohan.db INFO [0m Creating resource qos_option_interdc
03:02:10.203 gohan.db.sql INFO [0m Executing SQL query in transaction 'e07b8546-d10a-4b0d-b18b-edfd94eafacc': 'INSERT INTO `heat_templates` (`watch`,`handler`,`id`,`parameter_mappings`,`template_file`) VALUES ([],heat_worker,qos_option_interdc,{"incoming_policer_config":{"field":"incoming_policer_config"},"incoming_policer_name":{"field":"incoming_policer_name"},"jinja_be_forwarding_class":{"field":"be_forwarding_class","path":["interdc_service_id"]},"jinja_ga_forwarding_class":{"field":"ga_forwarding_class","path":["interdc_service_id"]},"jinja_type":{"field":"qos_type"},"outgoing_policer_config":{"field":"outgoing_policer_config"},"outgoing_policer_name":{"field":"outgoing_policer_name"},"primary_device_ip":{"field":"ip","path":["ha_router_id","primary_router_id"]},"primary_device_password":{"field":"password","path":["ha_router_id","primary_router_id"]},"primary_device_port":{"field":"ssh_port","path":["ha_router_id","primary_router_id"]},"primary_device_username":{"field":"login","path":["ha_router_id","primary_router_id"]},"secondary_device_ip":{"field":"ip","path":["ha_router_id","secondary_router_id"]},"secondary_device_password":{"field":"password","path":["ha_router_id","secondary_router_id"]},"secondary_device_port":{"field":"ssh_port","path":["ha_router_id","secondary_router_id"]},"secondary_device_username":{"field":"login","path":["ha_router_id","secondary_router_id"]}},heat_template_version: 2013-05-23

description: >
  QoS Option

parameters:
  primary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Primary Device.
    label: Ip address of the device.
    type: string
  primary_device_port:
    description: Port that will be used to establish ssh connection to the Primary Device.
    label: Port of the ssh connection.
    type: number
  primary_device_username:
    description: Name of the user which will be used to log onto the Primary Device.
    label: User name to log on to device.
    type: string
  primary_device_password:
    description: Password of the user which will be used to log onto the Primary Device.
    label: Users password.
    type: string
  secondary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Secondary Device.
    label: Ip address of the device.
    type: string
  secondary_device_port:
    description: Port that will be used to establish ssh connection to the Secondary Device.
    label: Port of the ssh connection.
    type: number
  secondary_device_username:
    description: Name of the user which will be used to log onto the Secondary Device.
    label: User name to log on to device.
    type: string
  secondary_device_password:
    description: Password of the user which will be used to log onto the Secondary Device.
    label: Users password.
    type: string
  incoming_policer_name:
    description: Name of created incoming policer
    label: Incoming policer name
    type: string
  incoming_policer_config:
    description: Configuration of incoming policer
    label: Incoming policer config
    type: string
  outgoing_policer_name:
    description: Name of created outgoing policer
    label: Outgoing policer name
    type: string
  outgoing_policer_config:
    description: Configuration of outgoing policer
    label: Outgoing policer config
    type: string
resources:
{% for device in ["primary", "secondary"] %}
  netconf_configure_{{ device }}:
    type: OS::Contrail::NetconfNamedConfigs
    properties:
      lock_timeout: 3000
      device_ip:
        get_param: {{ device }}_device_ip
      password:
        get_param: {{ device }}_device_password
      port:
        get_param: {{ device }}_device_port
      username:
        get_param: {{ device }}_device_username
      configs:
      - config:
          { get_param: incoming_policer_config }
        path:
        - config_type: tag
          xml_type: tag
          tag: firewall
        - config_type: named_tag
          xml_type: named_tag
          tag: three-color-policer
          name: { get_param: incoming_policer_name }
      - config:
          { get_param: outgoing_policer_config }
        path:
        - config_type: tag
          xml_type: tag
          tag: firewall
        - config_type: named_tag
          xml_type: named_tag
          tag: policer
          name: { get_param: outgoing_policer_name }
      - config:
          str_replace:
            params:
              $CLASS:
              {% if jinja_type == "besteffort" %}
                {{ jinja_be_forwarding_class }}
              {% else %}
                {{ jinja_ga_forwarding_class }}
              {% endif %}
              $POLICER_NAME:
                get_param: incoming_policer_name
            template: |
              interface-specific;
              term vrrp-accept {
                from {
                  protocol vrrp;
                }
                then accept;
              }
              term qos {
                then {
                  three-color-policer {
                    two-rate $POLICER_NAME;
                  }
                  forwarding-class $CLASS;
                  accept;
                }
              }
        path:
        - config_type: tag
          xml_type: tag
          tag: firewall
        - config_type: named_tag
          xml_type: named_tag
          tag: filter
          name:
            str_replace:
              params:
                $NAME:
                  get_param: incoming_policer_name
              template: |
                FILTER_$NAME
      - config:
          str_replace:
            params:
              $POLICER_NAME:
                get_param: outgoing_policer_name
            template: |
              interface-specific;
              term vrrp-accept {
                from {
                  protocol vrrp;
                }
                then accept;
              }
              term policer {
                then {
                  policer $POLICER_NAME;
                  accept;
                }
              }
        path:
        - config_type: tag
          xml_type: tag
          tag: firewall
        - config_type: named_tag
          xml_type: named_tag
          tag: filter
          name:
            str_replace:
              params:
                $NAME:
                  get_param: outgoing_policer_name
              template: |
                FILTER_$NAME
{% endfor %}
)'
03:02:10.205 gohan.db.sql INFO [0m Executing SQL query in transaction 'e07b8546-d10a-4b0d-b18b-edfd94eafacc': 'INSERT INTO `events` (`path`,`timestamp`,`type`,`marked_for_deletion`,`body`,`version`) VALUES (/v2.0/heat_templates/qos_option_interdc,1494471730,create,false,"{\"handler\":\"heat_worker\",\"id\":\"qos_option_interdc\",\"parameter_mappings\":{\"incoming_policer_config\":{\"field\":\"incoming_policer_config\"},\"incoming_policer_name\":{\"field\":\"incoming_policer_name\"},\"jinja_be_forwarding_class\":{\"field\":\"be_forwarding_class\",\"path\":[\"interdc_service_id\"]},\"jinja_ga_forwarding_class\":{\"field\":\"ga_forwarding_class\",\"path\":[\"interdc_service_id\"]},\"jinja_type\":{\"field\":\"qos_type\"},\"outgoing_policer_config\":{\"field\":\"outgoing_policer_config\"},\"outgoing_policer_name\":{\"field\":\"outgoing_policer_name\"},\"primary_device_ip\":{\"field\":\"ip\",\"path\":[\"ha_router_id\",\"primary_router_id\"]},\"primary_device_password\":{\"field\":\"password\",\"path\":[\"ha_router_id\",\"primary_router_id\"]},\"primary_device_port\":{\"field\":\"ssh_port\",\"path\":[\"ha_router_id\",\"primary_router_id\"]},\"primary_device_username\":{\"field\":\"login\",\"path\":[\"ha_router_id\",\"primary_router_id\"]},\"secondary_device_ip\":{\"field\":\"ip\",\"path\":[\"ha_router_id\",\"secondary_router_id\"]},\"secondary_device_password\":{\"field\":\"password\",\"path\":[\"ha_router_id\",\"secondary_router_id\"]},\"secondary_device_port\":{\"field\":\"ssh_port\",\"path\":[\"ha_router_id\",\"secondary_router_id\"]},\"secondary_device_username\":{\"field\":\"login\",\"path\":[\"ha_router_id\",\"secondary_router_id\"]}},\"template_file\":\"heat_template_version: 2013-05-23\\n\\ndescription: \\u003e\\n  QoS Option\\n\\nparameters:\\n  primary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\\n    label: Ip address of the device.\\n    type: string\\n  primary_device_port:\\n    description: Port that will be used to establish ssh connection to the Primary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  primary_device_username:\\n    description: Name of the user which will be used to log onto the Primary Device.\\n    label: User name to log on to device.\\n    type: string\\n  primary_device_password:\\n    description: Password of the user which will be used to log onto the Primary Device.\\n    label: Users password.\\n    type: string\\n  secondary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\\n    label: Ip address of the device.\\n    type: string\\n  secondary_device_port:\\n    description: Port that will be used to establish ssh connection to the Secondary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  secondary_device_username:\\n    description: Name of the user which will be used to log onto the Secondary Device.\\n    label: User name to log on to device.\\n    type: string\\n  secondary_device_password:\\n    description: Password of the user which will be used to log onto the Secondary Device.\\n    label: Users password.\\n    type: string\\n  incoming_policer_name:\\n    description: Name of created incoming policer\\n    label: Incoming policer name\\n    type: string\\n  incoming_policer_config:\\n    description: Configuration of incoming policer\\n    label: Incoming policer config\\n    type: string\\n  outgoing_policer_name:\\n    description: Name of created outgoing policer\\n    label: Outgoing policer name\\n    type: string\\n  outgoing_policer_config:\\n    description: Configuration of outgoing policer\\n    label: Outgoing policer config\\n    type: string\\nresources:\\n{% for device in [\\\"primary\\\", \\\"secondary\\\"] %}\\n  netconf_configure_{{ device }}:\\n    type: OS::Contrail::NetconfNamedConfigs\\n    properties:\\n      lock_timeout: 3000\\n      device_ip:\\n        get_param: {{ device }}_device_ip\\n      password:\\n        get_param: {{ device }}_device_password\\n      port:\\n        get_param: {{ device }}_device_port\\n      username:\\n        get_param: {{ device }}_device_username\\n      configs:\\n      - config:\\n          { get_param: incoming_policer_config }\\n        path:\\n        - config_type: tag\\n          xml_type: tag\\n          tag: firewall\\n        - config_type: named_tag\\n          xml_type: named_tag\\n          tag: three-color-policer\\n          name: { get_param: incoming_policer_name }\\n      - config:\\n          { get_param: outgoing_policer_config }\\n        path:\\n        - config_type: tag\\n          xml_type: tag\\n          tag: firewall\\n        - config_type: named_tag\\n          xml_type: named_tag\\n          tag: policer\\n          name: { get_param: outgoing_policer_name }\\n      - config:\\n          str_replace:\\n            params:\\n              $CLASS:\\n              {% if jinja_type == \\\"besteffort\\\" %}\\n                {{ jinja_be_forwarding_class }}\\n              {% else %}\\n                {{ jinja_ga_forwarding_class }}\\n              {% endif %}\\n              $POLICER_NAME:\\n                get_param: incoming_policer_name\\n            template: |\\n              interface-specific;\\n              term vrrp-accept {\\n                from {\\n                  protocol vrrp;\\n                }\\n                then accept;\\n              }\\n              term qos {\\n                then {\\n                  three-color-policer {\\n                    two-rate $POLICER_NAME;\\n                  }\\n                  forwarding-class $CLASS;\\n                  accept;\\n                }\\n              }\\n        path:\\n        - config_type: tag\\n          xml_type: tag\\n          tag: firewall\\n        - config_type: named_tag\\n          xml_type: named_tag\\n          tag: filter\\n          name:\\n            str_replace:\\n              params:\\n                $NAME:\\n                  get_param: incoming_policer_name\\n              template: |\\n                FILTER_$NAME\\n      - config:\\n          str_replace:\\n            params:\\n              $POLICER_NAME:\\n                get_param: outgoing_policer_name\\n            template: |\\n              interface-specific;\\n              term vrrp-accept {\\n                from {\\n                  protocol vrrp;\\n                }\\n                then accept;\\n              }\\n              term policer {\\n                then {\\n                  policer $POLICER_NAME;\\n                  accept;\\n                }\\n              }\\n        path:\\n        - config_type: tag\\n          xml_type: tag\\n          tag: firewall\\n        - config_type: named_tag\\n          xml_type: named_tag\\n          tag: filter\\n          name:\\n            str_replace:\\n              params:\\n                $NAME:\\n                  get_param: outgoing_policer_name\\n              template: |\\n                FILTER_$NAME\\n{% endfor %}\\n\",\"watch\":[]}",1)'
03:02:10.219 gohan.db INFO [0m Creating resource interdc_gateway
03:02:10.219 gohan.db.sql INFO [0m Executing SQL query in transaction 'e07b8546-d10a-4b0d-b18b-edfd94eafacc': 'INSERT INTO `heat_templates` (`handler`,`id`,`parameter_mappings`,`template_file`,`watch`) VALUES (heat_worker,interdc_gateway,{"downlink_vlan":{"field":"downlink_vlan_id"},"heat_timeout":{"constant":60},"input_filter_name":{"field":"incoming_policer_name","path":["qos_option_id"]},"output_filter_name":{"field":"outgoing_policer_name","path":["qos_option_id"]},"primary_device_ip":{"field":"ip","path":["downlink_interface_id","ha_router_id","primary_router_id"]},"primary_device_logical_downlink_interface":{"field":"primary_logical_downlink_interface_name"},"primary_device_logical_uplink_interface":{"field":"primary_logical_uplink_interface_name"},"primary_device_password":{"field":"password","path":["downlink_interface_id","ha_router_id","primary_router_id"]},"primary_device_physical_downlink_interface":{"field":"name","path":["downlink_interface_id","primary_interface_id"]},"primary_device_physical_uplink_interface":{"field":"name","path":["uplink_interface_id","primary_interface_id"]},"primary_device_port":{"field":"ssh_port","path":["downlink_interface_id","ha_router_id","primary_router_id"]},"primary_device_username":{"field":"login","path":["downlink_interface_id","ha_router_id","primary_router_id"]},"primary_downlink_vrrp_config_group":{"field":"primary_downlink_vrrp_config_group","path":["interdc_service_id"]},"primary_uplink_vrrp_config_group":{"field":"primary_uplink_vrrp_config_group","path":["interdc_service_id"]},"secondary_device_ip":{"field":"ip","path":["downlink_interface_id","ha_router_id","secondary_router_id"]},"secondary_device_logical_downlink_interface":{"field":"secondary_logical_downlink_interface_name"},"secondary_device_logical_uplink_interface":{"field":"secondary_logical_uplink_interface_name"},"secondary_device_password":{"field":"password","path":["downlink_interface_id","ha_router_id","secondary_router_id"]},"secondary_device_physical_downlink_interface":{"field":"name","path":["downlink_interface_id","secondary_interface_id"]},"secondary_device_physical_uplink_interface":{"field":"name","path":["uplink_interface_id","secondary_interface_id"]},"secondary_device_port":{"field":"ssh_port","path":["downlink_interface_id","ha_router_id","secondary_router_id"]},"secondary_device_username":{"field":"login","path":["downlink_interface_id","ha_router_id","secondary_router_id"]},"secondary_downlink_vrrp_config_group":{"field":"secondary_downlink_vrrp_config_group","path":["interdc_service_id"]},"secondary_uplink_vrrp_config_group":{"field":"secondary_uplink_vrrp_config_group","path":["interdc_service_id"]},"uplink_vlan_id":{"field":"uplink_vlan_id"},"vrf_name":{"field":"vrf_name"}},heat_template_version: 2013-05-23

description: >
  Inter DC Gateway

parameters:
  primary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Primary Device.
    label: Ip address of the device.
    type: string
  primary_device_port:
    description: Port that will be used to establish ssh connection to the Primary Device.
    label: Port of the ssh connection.
    type: number
  primary_device_username:
    description: Name of the user which will be used to log onto the Primary Device.
    label: User name to log on to device.
    type: string
  primary_device_password:
    description: Password of the user which will be used to log onto the Primary Device.
    label: Users password.
    type: string
  primary_device_physical_downlink_interface:
    description: Physical port on the Primary device on which the logical downlink port will be configured
    label: Underlying physical interface
    type: string
  primary_device_logical_downlink_interface:
    description: Name of the created logical downlink interface on the Primary device
    label: Logical Interface name
    type: string
  primary_device_physical_uplink_interface:
    description: Physical port on the Primary device on which the logical uplink port will be configured
    label: Underlying physical interface
    type: string
  primary_device_logical_uplink_interface:
    description: Name of the created logical uplink interface on the Primary device
    label: Logical Interface name
    type: string
  secondary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Secondary Device.
    label: Ip address of the device.
    type: string
  secondary_device_port:
    description: Port that will be used to establish ssh connection to the Secondary Device.
    label: Port of the ssh connection.
    type: number
  secondary_device_username:
    description: Name of the user which will be used to log onto the Secondary Device.
    label: User name to log on to device.
    type: string
  secondary_device_password:
    description: Password of the user which will be used to log onto the Secondary Device.
    label: Users password.
    type: string
  secondary_device_physical_downlink_interface:
    description: Physical port on the Secondary device on which the logical downlink port will be configured
    label: Underlying physical interface
    type: string
  secondary_device_logical_downlink_interface:
    description: Name of the created logical downlink interface on the Secondary device
    label: Logical Interface name
    type: string
  secondary_device_physical_uplink_interface:
    description: Physical port on the Secondary device on which the logical uplink port will be configured
    label: Underlying physical interface
    type: string
  secondary_device_logical_uplink_interface:
    description: Name of the created logical uplink interface on the Secondary device
    label: Logical Interface name
    type: string
  input_filter_name:
    description: Name for policer used for input
    label: Input filter name
    type: string
  output_filter_name:
    description: Name for policer used for output
    label: Output filter name
    type: string
  downlink_vlan:
    description: vlan tag used by logical downlink interface
    label: VLAN ID
    type: string
  uplink_vlan_id:
    description: vlan tag used by logical uplink interface
    label: VLAN ID
    type: string
  vrf_name:
    description: Name for VRF used by logical interfaces
    label: VRF name
    type: string
  primary_downlink_vrrp_config_group:
    description: Name for apply group to use for downlink interface for VRRP
    label: Apply group name
    type: string
  primary_uplink_vrrp_config_group:
    description: Name for apply group to use for uplink interface for VRRP
    label: Apply group name
    type: string
  secondary_downlink_vrrp_config_group:
    description: Name for apply group to use for downlink interface for VRRP
    label: Apply group name
    type: string
  secondary_uplink_vrrp_config_group:
    description: Name for apply group to use for uplink interface for VRRP
    label: Apply group name
    type: string

resources:
{% for device in ["primary", "secondary"] %}
  netconf_configure_{{ device }}:
    type: OS::Contrail::NetconfNamedConfigs
    properties:
      lock_timeout: 3000
      on_update: merge
      device_ip:
        get_param: {{ device }}_device_ip
      password:
        get_param: {{ device }}_device_password
      port:
        get_param: {{ device }}_device_port
      username:
        get_param: {{ device }}_device_username
      configs:
      - config:
          str_replace:
            params:
              $APPLY_GROUP:
                get_param: {{ device }}_downlink_vrrp_config_group
              $VLAN:
                get_param: downlink_vlan
              $INPUT_FILTER:
                get_param: input_filter_name
              $OUTPUT_FILTER:
                get_param: output_filter_name
            template: |
              apply-groups $APPLY_GROUP;
              description interdc_gw;
              vlan-id $VLAN;
              family inet {
                filter {
                  input FILTER_$INPUT_FILTER;
                  output FILTER_$OUTPUT_FILTER;
                }
              }
        path:
        - config_type: tag
          xml_type: tag
          tag: interfaces
        - config_type: name
          xml_type: named_tag
          tag: interface
          name: { get_param: {{ device }}_device_physical_downlink_interface }
        - config_type: named_tag
          xml_type: named_tag
          tag: unit
          name: { get_param: downlink_vlan }
      - config:
          str_replace:
            params:
              $LIFD:
                get_param: {{ device }}_device_logical_downlink_interface
              $LIFU:
                get_param: {{ device }}_device_logical_uplink_interface
            template: |
                instance-type virtual-router;
                interface $LIFD;
                interface $LIFU;
        path:
        - config_type: tag
          xml_type: tag
          tag: routing-instances
        - config_type: name
          xml_type: named_tag
          tag: instance
          name: { get_param: vrf_name }
      - config:
          str_replace:
            params:
              $APPLY_GROUP:
                get_param: {{ device }}_uplink_vrrp_config_group
              $VLAN:
                get_param: uplink_vlan_id
            template: |
              apply-groups $APPLY_GROUP;
              description DC10GVDX;
              vlan-id $VLAN;
        path:
        - config_type: tag
          xml_type: tag
          tag: interfaces
        - config_type: name
          xml_type: named_tag
          tag: interface
          name: { get_param: {{ device }}_device_physical_uplink_interface }
        - config_type: named_tag
          xml_type: named_tag
          tag: unit
          name: { get_param: uplink_vlan_id }
{% endfor %}
,[])'
03:02:10.221 gohan.db.sql INFO [0m Executing SQL query in transaction 'e07b8546-d10a-4b0d-b18b-edfd94eafacc': 'INSERT INTO `events` (`version`,`path`,`timestamp`,`type`,`marked_for_deletion`,`body`) VALUES (1,/v2.0/heat_templates/interdc_gateway,1494471730,create,false,"{\"handler\":\"heat_worker\",\"id\":\"interdc_gateway\",\"parameter_mappings\":{\"downlink_vlan\":{\"field\":\"downlink_vlan_id\"},\"heat_timeout\":{\"constant\":60},\"input_filter_name\":{\"field\":\"incoming_policer_name\",\"path\":[\"qos_option_id\"]},\"output_filter_name\":{\"field\":\"outgoing_policer_name\",\"path\":[\"qos_option_id\"]},\"primary_device_ip\":{\"field\":\"ip\",\"path\":[\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"primary_device_logical_downlink_interface\":{\"field\":\"primary_logical_downlink_interface_name\"},\"primary_device_logical_uplink_interface\":{\"field\":\"primary_logical_uplink_interface_name\"},\"primary_device_password\":{\"field\":\"password\",\"path\":[\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"primary_device_physical_downlink_interface\":{\"field\":\"name\",\"path\":[\"downlink_interface_id\",\"primary_interface_id\"]},\"primary_device_physical_uplink_interface\":{\"field\":\"name\",\"path\":[\"uplink_interface_id\",\"primary_interface_id\"]},\"primary_device_port\":{\"field\":\"ssh_port\",\"path\":[\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"primary_device_username\":{\"field\":\"login\",\"path\":[\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"primary_downlink_vrrp_config_group\":{\"field\":\"primary_downlink_vrrp_config_group\",\"path\":[\"interdc_service_id\"]},\"primary_uplink_vrrp_config_group\":{\"field\":\"primary_uplink_vrrp_config_group\",\"path\":[\"interdc_service_id\"]},\"secondary_device_ip\":{\"field\":\"ip\",\"path\":[\"downlink_interface_id\",\"ha_router_id\",\"secondary_router_id\"]},\"secondary_device_logical_downlink_interface\":{\"field\":\"secondary_logical_downlink_interface_name\"},\"secondary_device_logical_uplink_interface\":{\"field\":\"secondary_logical_uplink_interface_name\"},\"secondary_device_password\":{\"field\":\"password\",\"path\":[\"downlink_interface_id\",\"ha_router_id\",\"secondary_router_id\"]},\"secondary_device_physical_downlink_interface\":{\"field\":\"name\",\"path\":[\"downlink_interface_id\",\"secondary_interface_id\"]},\"secondary_device_physical_uplink_interface\":{\"field\":\"name\",\"path\":[\"uplink_interface_id\",\"secondary_interface_id\"]},\"secondary_device_port\":{\"field\":\"ssh_port\",\"path\":[\"downlink_interface_id\",\"ha_router_id\",\"secondary_router_id\"]},\"secondary_device_username\":{\"field\":\"login\",\"path\":[\"downlink_interface_id\",\"ha_router_id\",\"secondary_router_id\"]},\"secondary_downlink_vrrp_config_group\":{\"field\":\"secondary_downlink_vrrp_config_group\",\"path\":[\"interdc_service_id\"]},\"secondary_uplink_vrrp_config_group\":{\"field\":\"secondary_uplink_vrrp_config_group\",\"path\":[\"interdc_service_id\"]},\"uplink_vlan_id\":{\"field\":\"uplink_vlan_id\"},\"vrf_name\":{\"field\":\"vrf_name\"}},\"template_file\":\"heat_template_version: 2013-05-23\\n\\ndescription: \\u003e\\n  Inter DC Gateway\\n\\nparameters:\\n  primary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\\n    label: Ip address of the device.\\n    type: string\\n  primary_device_port:\\n    description: Port that will be used to establish ssh connection to the Primary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  primary_device_username:\\n    description: Name of the user which will be used to log onto the Primary Device.\\n    label: User name to log on to device.\\n    type: string\\n  primary_device_password:\\n    description: Password of the user which will be used to log onto the Primary Device.\\n    label: Users password.\\n    type: string\\n  primary_device_physical_downlink_interface:\\n    description: Physical port on the Primary device on which the logical downlink port will be configured\\n    label: Underlying physical interface\\n    type: string\\n  primary_device_logical_downlink_interface:\\n    description: Name of the created logical downlink interface on the Primary device\\n    label: Logical Interface name\\n    type: string\\n  primary_device_physical_uplink_interface:\\n    description: Physical port on the Primary device on which the logical uplink port will be configured\\n    label: Underlying physical interface\\n    type: string\\n  primary_device_logical_uplink_interface:\\n    description: Name of the created logical uplink interface on the Primary device\\n    label: Logical Interface name\\n    type: string\\n  secondary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\\n    label: Ip address of the device.\\n    type: string\\n  secondary_device_port:\\n    description: Port that will be used to establish ssh connection to the Secondary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  secondary_device_username:\\n    description: Name of the user which will be used to log onto the Secondary Device.\\n    label: User name to log on to device.\\n    type: string\\n  secondary_device_password:\\n    description: Password of the user which will be used to log onto the Secondary Device.\\n    label: Users password.\\n    type: string\\n  secondary_device_physical_downlink_interface:\\n    description: Physical port on the Secondary device on which the logical downlink port will be configured\\n    label: Underlying physical interface\\n    type: string\\n  secondary_device_logical_downlink_interface:\\n    description: Name of the created logical downlink interface on the Secondary device\\n    label: Logical Interface name\\n    type: string\\n  secondary_device_physical_uplink_interface:\\n    description: Physical port on the Secondary device on which the logical uplink port will be configured\\n    label: Underlying physical interface\\n    type: string\\n  secondary_device_logical_uplink_interface:\\n    description: Name of the created logical uplink interface on the Secondary device\\n    label: Logical Interface name\\n    type: string\\n  input_filter_name:\\n    description: Name for policer used for input\\n    label: Input filter name\\n    type: string\\n  output_filter_name:\\n    description: Name for policer used for output\\n    label: Output filter name\\n    type: string\\n  downlink_vlan:\\n    description: vlan tag used by logical downlink interface\\n    label: VLAN ID\\n    type: string\\n  uplink_vlan_id:\\n    description: vlan tag used by logical uplink interface\\n    label: VLAN ID\\n    type: string\\n  vrf_name:\\n    description: Name for VRF used by logical interfaces\\n    label: VRF name\\n    type: string\\n  primary_downlink_vrrp_config_group:\\n    description: Name for apply group to use for downlink interface for VRRP\\n    label: Apply group name\\n    type: string\\n  primary_uplink_vrrp_config_group:\\n    description: Name for apply group to use for uplink interface for VRRP\\n    label: Apply group name\\n    type: string\\n  secondary_downlink_vrrp_config_group:\\n    description: Name for apply group to use for downlink interface for VRRP\\n    label: Apply group name\\n    type: string\\n  secondary_uplink_vrrp_config_group:\\n    description: Name for apply group to use for uplink interface for VRRP\\n    label: Apply group name\\n    type: string\\n\\nresources:\\n{% for device in [\\\"primary\\\", \\\"secondary\\\"] %}\\n  netconf_configure_{{ device }}:\\n    type: OS::Contrail::NetconfNamedConfigs\\n    properties:\\n      lock_timeout: 3000\\n      on_update: merge\\n      device_ip:\\n        get_param: {{ device }}_device_ip\\n      password:\\n        get_param: {{ device }}_device_password\\n      port:\\n        get_param: {{ device }}_device_port\\n      username:\\n        get_param: {{ device }}_device_username\\n      configs:\\n      - config:\\n          str_replace:\\n            params:\\n              $APPLY_GROUP:\\n                get_param: {{ device }}_downlink_vrrp_config_group\\n              $VLAN:\\n                get_param: downlink_vlan\\n              $INPUT_FILTER:\\n                get_param: input_filter_name\\n              $OUTPUT_FILTER:\\n                get_param: output_filter_name\\n            template: |\\n              apply-groups $APPLY_GROUP;\\n              description interdc_gw;\\n              vlan-id $VLAN;\\n              family inet {\\n                filter {\\n                  input FILTER_$INPUT_FILTER;\\n                  output FILTER_$OUTPUT_FILTER;\\n                }\\n              }\\n        path:\\n        - config_type: tag\\n          xml_type: tag\\n          tag: interfaces\\n        - config_type: name\\n          xml_type: named_tag\\n          tag: interface\\n          name: { get_param: {{ device }}_device_physical_downlink_interface }\\n        - config_type: named_tag\\n          xml_type: named_tag\\n          tag: unit\\n          name: { get_param: downlink_vlan }\\n      - config:\\n          str_replace:\\n            params:\\n              $LIFD:\\n                get_param: {{ device }}_device_logical_downlink_interface\\n              $LIFU:\\n                get_param: {{ device }}_device_logical_uplink_interface\\n            template: |\\n                instance-type virtual-router;\\n                interface $LIFD;\\n                interface $LIFU;\\n        path:\\n        - config_type: tag\\n          xml_type: tag\\n          tag: routing-instances\\n        - config_type: name\\n          xml_type: named_tag\\n          tag: instance\\n          name: { get_param: vrf_name }\\n      - config:\\n          str_replace:\\n            params:\\n              $APPLY_GROUP:\\n                get_param: {{ device }}_uplink_vrrp_config_group\\n              $VLAN:\\n                get_param: uplink_vlan_id\\n            template: |\\n              apply-groups $APPLY_GROUP;\\n              description DC10GVDX;\\n              vlan-id $VLAN;\\n        path:\\n        - config_type: tag\\n          xml_type: tag\\n          tag: interfaces\\n        - config_type: name\\n          xml_type: named_tag\\n          tag: interface\\n          name: { get_param: {{ device }}_device_physical_uplink_interface }\\n        - config_type: named_tag\\n          xml_type: named_tag\\n          tag: unit\\n          name: { get_param: uplink_vlan_id }\\n{% endfor %}\\n\",\"watch\":[]}")'
03:02:10.223 gohan.db INFO [0m Creating resource interdc_interface
03:02:10.224 gohan.db.sql INFO [0m Executing SQL query in transaction 'e07b8546-d10a-4b0d-b18b-edfd94eafacc': 'INSERT INTO `heat_templates` (`template_file`,`watch`,`handler`,`id`,`parameter_mappings`) VALUES (heat_template_version: 2013-05-23

description: >
  Interdc Interface

parameters:
  primary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Primary Device.
    label: Ip address of the device.
    type: string
  primary_device_port:
    description: Port that will be used to establish ssh connection to the Primary Device.
    label: Port of the ssh connection.
    type: number
  primary_device_username:
    description: Name of the user which will be used to log onto the Primary Device.
    label: User name to log on to device.
    type: string
  primary_device_password:
    description: Password of the user which will be used to log onto the Primary Device.
    label: Users password.
    type: string
  secondary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Secondary Device.
    label: Ip address of the device.
    type: string
  secondary_device_port:
    description: Port that will be used to establish ssh connection to the Secondary Device.
    label: Port of the ssh connection.
    type: number
  secondary_device_username:
    description: Name of the user which will be used to log onto the Secondary Device.
    label: User name to log on to device.
    type: string
  secondary_device_password:
    description: Password of the user which will be used to log onto the Secondary Device.
    label: Users password.
    type: string
  primary_device_physical_interface:
    description: MX physical port on which logical interface will be created
    label: Underlying physical interface
    type: string
  primary_device_downlink_physical_interface:
    description: MX physical port on which logical downlink interface will be created
    label: Underlying physical interface
    type: string
  secondary_device_physical_interface:
    description: MX physical port on which logical interface will be created
    label: Underlying physical interface
    type: string
  secondary_device_downlink_physical_interface:
    description: MX physical port on which downlink logical interface will be created
    label: Underlying physical interface
    type: string
  primary_device_gw_ip:
    description: IP on primary device
    label: Inet Address CIDR
    type: string
  secondary_device_gw_ip:
    description: IP on secondary device
    label: Inet Address CIDR
    type: string
  primary_device_priority:
    type: string
    label: Primary device priority
  secondary_device_priority:
    type: string
    label: Secondary device priority
  vrf_name:
    description: Name of VRF (routing-instance) in MX config
    label: VRF Name
    type: string
  netmask:
    description: Netmask for gw_ip
    label: Netmask
    type: number
  uplink_vlan_id:
    description: VLAN ID used on uplink interfaces (same for both primary and secondary device)
    label: Uplink VLAN ID
    type: string
  downlink_vlan_id:
    description: VLAN ID used on downlink interfaces (same for both primary and secondary device)
    label: Downlink VLAN ID
    type: string
  gw_vip:
    description: Virtual IP configured on VRRP
    label: Inet Address CIDR
    type: string
  primary_device_gw_ip:
    description: IP on primary device
    label: Inet Address CIDR
    type: string
  secondary_device_gw_ip:
    description: IP on secondary device
    label: Inet Address CIDR
    type: string
  vrrp_group:
    type: string
    label: VRRP Group
resources:
{% for device in ["primary", "secondary"] %}
  netconf_configure_{{ device }}:
    type: OS::Contrail::NetconfNamedConfigs
    properties:
      lock_timeout: 3000
      device_ip:
        get_param: {{ device }}_device_ip
      password:
        get_param: {{ device }}_device_password
      port:
        get_param: {{ device }}_device_port
      username:
        get_param: {{ device }}_device_username
      configs:
      - config:
          str_replace:
            params:
              $VRRP_GROUP:
                get_param: vrrp_group
              $VIP:
                get_param: gw_vip
              $PRIORITY:
                get_param: {{ device }}_device_priority
              $DOWNLINK_IF:
                get_param: secondary_device_downlink_physical_interface
              $DOWNLINK_VLAN_ID:
                get_param: downlink_vlan_id
            template: |
              vrrp-group $VRRP_GROUP {
                virtual-address $VIP;
                priority $PRIORITY;
                track {
                  interface $DOWNLINK_IF.$DOWNLINK_VLAN_ID {
                    priority-cost 10;
                  }
                }
              }
        path:
        - config_type: tag
          xml_type: tag
          tag: interfaces
        - config_type: name
          xml_type: named_tag
          tag: interface
          name: { get_param: {{ device }}_device_physical_interface }
        - config_type: named_tag
          xml_type: named_tag
          tag: unit
          name: { get_param: uplink_vlan_id }
        - config_type: tag
          xml_type: tag
          tag: family
        - config_type: tag
          xml_type: tag
          tag: inet
        - config_type: named_tag
          xml_type: named_tag
          tag: address
          name:
            str_replace:
              params:
                $DEVICE_IP:
                  get_param: {{ device }}_device_gw_ip
                $NETMASK:
                  get_param: netmask
              template: |
                $DEVICE_IP/$NETMASK
{% endfor %}
,[],heat_worker,interdc_interface,{"downlink_vlan_id":{"field":"downlink_vlan_id","path":["interdc_gw_id"]},"gw_vip":{"field":"gw_vipv4"},"heat_timeout":{"constant":60},"netmask":{"field":"netmask"},"primary_device_downlink_physical_interface":{"field":"name","path":["interdc_gw_id","downlink_interface_id","primary_interface_id"]},"primary_device_gw_ip":{"field":"primary_ipv4"},"primary_device_ip":{"field":"ip","path":["interdc_gw_id","downlink_interface_id","ha_router_id","primary_router_id"]},"primary_device_password":{"field":"password","path":["interdc_gw_id","downlink_interface_id","ha_router_id","primary_router_id"]},"primary_device_physical_interface":{"field":"name","path":["interdc_gw_id","uplink_interface_id","primary_interface_id"]},"primary_device_port":{"field":"ssh_port","path":["interdc_gw_id","downlink_interface_id","ha_router_id","primary_router_id"]},"primary_device_priority":{"constant":105},"primary_device_username":{"field":"login","path":["interdc_gw_id","downlink_interface_id","ha_router_id","primary_router_id"]},"secondary_device_downlink_physical_interface":{"field":"name","path":["interdc_gw_id","downlink_interface_id","secondary_interface_id"]},"secondary_device_gw_ip":{"field":"secondary_ipv4"},"secondary_device_ip":{"field":"ip","path":["interdc_gw_id","downlink_interface_id","ha_router_id","secondary_router_id"]},"secondary_device_password":{"field":"password","path":["interdc_gw_id","downlink_interface_id","ha_router_id","secondary_router_id"]},"secondary_device_physical_interface":{"field":"name","path":["interdc_gw_id","uplink_interface_id","secondary_interface_id"]},"secondary_device_port":{"field":"ssh_port","path":["interdc_gw_id","downlink_interface_id","ha_router_id","secondary_router_id"]},"secondary_device_priority":{"constant":100},"secondary_device_username":{"field":"login","path":["interdc_gw_id","downlink_interface_id","ha_router_id","secondary_router_id"]},"uplink_vlan_id":{"field":"uplink_vlan_id","path":["interdc_gw_id"]},"vrf_name":{"field":"vrf_name","path":["interdc_gw_id"]},"vrrp_group":{"field":"vrid"}})'
03:02:10.225 gohan.db.sql INFO [0m Executing SQL query in transaction 'e07b8546-d10a-4b0d-b18b-edfd94eafacc': 'INSERT INTO `events` (`marked_for_deletion`,`body`,`version`,`path`,`timestamp`,`type`) VALUES (false,"{\"handler\":\"heat_worker\",\"id\":\"interdc_interface\",\"parameter_mappings\":{\"downlink_vlan_id\":{\"field\":\"downlink_vlan_id\",\"path\":[\"interdc_gw_id\"]},\"gw_vip\":{\"field\":\"gw_vipv4\"},\"heat_timeout\":{\"constant\":60},\"netmask\":{\"field\":\"netmask\"},\"primary_device_downlink_physical_interface\":{\"field\":\"name\",\"path\":[\"interdc_gw_id\",\"downlink_interface_id\",\"primary_interface_id\"]},\"primary_device_gw_ip\":{\"field\":\"primary_ipv4\"},\"primary_device_ip\":{\"field\":\"ip\",\"path\":[\"interdc_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"primary_device_password\":{\"field\":\"password\",\"path\":[\"interdc_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"primary_device_physical_interface\":{\"field\":\"name\",\"path\":[\"interdc_gw_id\",\"uplink_interface_id\",\"primary_interface_id\"]},\"primary_device_port\":{\"field\":\"ssh_port\",\"path\":[\"interdc_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"primary_device_priority\":{\"constant\":105},\"primary_device_username\":{\"field\":\"login\",\"path\":[\"interdc_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"secondary_device_downlink_physical_interface\":{\"field\":\"name\",\"path\":[\"interdc_gw_id\",\"downlink_interface_id\",\"secondary_interface_id\"]},\"secondary_device_gw_ip\":{\"field\":\"secondary_ipv4\"},\"secondary_device_ip\":{\"field\":\"ip\",\"path\":[\"interdc_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"secondary_router_id\"]},\"secondary_device_password\":{\"field\":\"password\",\"path\":[\"interdc_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"secondary_router_id\"]},\"secondary_device_physical_interface\":{\"field\":\"name\",\"path\":[\"interdc_gw_id\",\"uplink_interface_id\",\"secondary_interface_id\"]},\"secondary_device_port\":{\"field\":\"ssh_port\",\"path\":[\"interdc_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"secondary_router_id\"]},\"secondary_device_priority\":{\"constant\":100},\"secondary_device_username\":{\"field\":\"login\",\"path\":[\"interdc_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"secondary_router_id\"]},\"uplink_vlan_id\":{\"field\":\"uplink_vlan_id\",\"path\":[\"interdc_gw_id\"]},\"vrf_name\":{\"field\":\"vrf_name\",\"path\":[\"interdc_gw_id\"]},\"vrrp_group\":{\"field\":\"vrid\"}},\"template_file\":\"heat_template_version: 2013-05-23\\n\\ndescription: \\u003e\\n  Interdc Interface\\n\\nparameters:\\n  primary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\\n    label: Ip address of the device.\\n    type: string\\n  primary_device_port:\\n    description: Port that will be used to establish ssh connection to the Primary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  primary_device_username:\\n    description: Name of the user which will be used to log onto the Primary Device.\\n    label: User name to log on to device.\\n    type: string\\n  primary_device_password:\\n    description: Password of the user which will be used to log onto the Primary Device.\\n    label: Users password.\\n    type: string\\n  secondary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\\n    label: Ip address of the device.\\n    type: string\\n  secondary_device_port:\\n    description: Port that will be used to establish ssh connection to the Secondary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  secondary_device_username:\\n    description: Name of the user which will be used to log onto the Secondary Device.\\n    label: User name to log on to device.\\n    type: string\\n  secondary_device_password:\\n    description: Password of the user which will be used to log onto the Secondary Device.\\n    label: Users password.\\n    type: string\\n  primary_device_physical_interface:\\n    description: MX physical port on which logical interface will be created\\n    label: Underlying physical interface\\n    type: string\\n  primary_device_downlink_physical_interface:\\n    description: MX physical port on which logical downlink interface will be created\\n    label: Underlying physical interface\\n    type: string\\n  secondary_device_physical_interface:\\n    description: MX physical port on which logical interface will be created\\n    label: Underlying physical interface\\n    type: string\\n  secondary_device_downlink_physical_interface:\\n    description: MX physical port on which downlink logical interface will be created\\n    label: Underlying physical interface\\n    type: string\\n  primary_device_gw_ip:\\n    description: IP on primary device\\n    label: Inet Address CIDR\\n    type: string\\n  secondary_device_gw_ip:\\n    description: IP on secondary device\\n    label: Inet Address CIDR\\n    type: string\\n  primary_device_priority:\\n    type: string\\n    label: Primary device priority\\n  secondary_device_priority:\\n    type: string\\n    label: Secondary device priority\\n  vrf_name:\\n    description: Name of VRF (routing-instance) in MX config\\n    label: VRF Name\\n    type: string\\n  netmask:\\n    description: Netmask for gw_ip\\n    label: Netmask\\n    type: number\\n  uplink_vlan_id:\\n    description: VLAN ID used on uplink interfaces (same for both primary and secondary device)\\n    label: Uplink VLAN ID\\n    type: string\\n  downlink_vlan_id:\\n    description: VLAN ID used on downlink interfaces (same for both primary and secondary device)\\n    label: Downlink VLAN ID\\n    type: string\\n  gw_vip:\\n    description: Virtual IP configured on VRRP\\n    label: Inet Address CIDR\\n    type: string\\n  primary_device_gw_ip:\\n    description: IP on primary device\\n    label: Inet Address CIDR\\n    type: string\\n  secondary_device_gw_ip:\\n    description: IP on secondary device\\n    label: Inet Address CIDR\\n    type: string\\n  vrrp_group:\\n    type: string\\n    label: VRRP Group\\nresources:\\n{% for device in [\\\"primary\\\", \\\"secondary\\\"] %}\\n  netconf_configure_{{ device }}:\\n    type: OS::Contrail::NetconfNamedConfigs\\n    properties:\\n      lock_timeout: 3000\\n      device_ip:\\n        get_param: {{ device }}_device_ip\\n      password:\\n        get_param: {{ device }}_device_password\\n      port:\\n        get_param: {{ device }}_device_port\\n      username:\\n        get_param: {{ device }}_device_username\\n      configs:\\n      - config:\\n          str_replace:\\n            params:\\n              $VRRP_GROUP:\\n                get_param: vrrp_group\\n              $VIP:\\n                get_param: gw_vip\\n              $PRIORITY:\\n                get_param: {{ device }}_device_priority\\n              $DOWNLINK_IF:\\n                get_param: secondary_device_downlink_physical_interface\\n              $DOWNLINK_VLAN_ID:\\n                get_param: downlink_vlan_id\\n            template: |\\n              vrrp-group $VRRP_GROUP {\\n                virtual-address $VIP;\\n                priority $PRIORITY;\\n                track {\\n                  interface $DOWNLINK_IF.$DOWNLINK_VLAN_ID {\\n                    priority-cost 10;\\n                  }\\n                }\\n              }\\n        path:\\n        - config_type: tag\\n          xml_type: tag\\n          tag: interfaces\\n        - config_type: name\\n          xml_type: named_tag\\n          tag: interface\\n          name: { get_param: {{ device }}_device_physical_interface }\\n        - config_type: named_tag\\n          xml_type: named_tag\\n          tag: unit\\n          name: { get_param: uplink_vlan_id }\\n        - config_type: tag\\n          xml_type: tag\\n          tag: family\\n        - config_type: tag\\n          xml_type: tag\\n          tag: inet\\n        - config_type: named_tag\\n          xml_type: named_tag\\n          tag: address\\n          name:\\n            str_replace:\\n              params:\\n                $DEVICE_IP:\\n                  get_param: {{ device }}_device_gw_ip\\n                $NETMASK:\\n                  get_param: netmask\\n              template: |\\n                $DEVICE_IP/$NETMASK\\n{% endfor %}\\n\",\"watch\":[]}",1,/v2.0/heat_templates/interdc_interface,1494471730,create)'
03:02:10.227 gohan.db INFO [0m Creating resource gw_interface_interdc
03:02:10.228 gohan.db.sql INFO [0m Executing SQL query in transaction 'e07b8546-d10a-4b0d-b18b-edfd94eafacc': 'INSERT INTO `heat_templates` (`handler`,`id`,`parameter_mappings`,`template_file`,`watch`) VALUES (heat_worker,gw_interface_interdc,{"downlink_vlan_id":{"field":"downlink_vlan_id","path":["interdc_gw_id"]},"gw_vip":{"field":"gw_vipv4"},"heat_timeout":{"constant":60},"jinja_force_dependency1":{"field":"id","path":[{"id":"network_id","type":"network"}]},"netmask":{"field":"netmask"},"primary_device_gw_ip":{"field":"primary_ipv4"},"primary_device_ip":{"field":"ip","path":["interdc_gw_id","downlink_interface_id","ha_router_id","primary_router_id"]},"primary_device_password":{"field":"password","path":["interdc_gw_id","downlink_interface_id","ha_router_id","primary_router_id"]},"primary_device_physical_downlink_interface":{"field":"name","path":["interdc_gw_id","downlink_interface_id","primary_interface_id"]},"primary_device_physical_uplink_interface":{"field":"name","path":["interdc_gw_id","uplink_interface_id","primary_interface_id"]},"primary_device_port":{"field":"ssh_port","path":["interdc_gw_id","downlink_interface_id","ha_router_id","primary_router_id"]},"primary_device_priority":{"constant":105},"primary_device_username":{"field":"login","path":["interdc_gw_id","downlink_interface_id","ha_router_id","primary_router_id"]},"secondary_device_gw_ip":{"field":"secondary_ipv4"},"secondary_device_ip":{"field":"ip","path":["interdc_gw_id","downlink_interface_id","ha_router_id","secondary_router_id"]},"secondary_device_password":{"field":"password","path":["interdc_gw_id","downlink_interface_id","ha_router_id","secondary_router_id"]},"secondary_device_physical_downlink_interface":{"field":"name","path":["interdc_gw_id","downlink_interface_id","secondary_interface_id"]},"secondary_device_physical_uplink_interface":{"field":"name","path":["interdc_gw_id","uplink_interface_id","secondary_interface_id"]},"secondary_device_port":{"field":"ssh_port","path":["interdc_gw_id","downlink_interface_id","ha_router_id","secondary_router_id"]},"secondary_device_priority":{"constant":100},"secondary_device_username":{"field":"login","path":["interdc_gw_id","downlink_interface_id","ha_router_id","secondary_router_id"]},"uplink_vlan_id":{"field":"uplink_vlan_id","path":["interdc_gw_id"]},"vrf_name":{"field":"vrf_name","path":["interdc_gw_id"]},"vrrp_group":{"field":"vrid"}},heat_template_version: 2013-05-23

description: >
  Gateway Interface Inter DC

parameters:
  primary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Primary Device.
    label: Ip address of the device.
    type: string
  primary_device_port:
    description: Port that will be used to establish ssh connection to the Primary Device.
    label: Port of the ssh connection.
    type: number
  primary_device_username:
    description: Name of the user which will be used to log onto the Primary Device.
    label: User name to log on to device.
    type: string
  primary_device_password:
    description: Password of the user which will be used to log onto the Primary Device.
    label: Users password.
    type: string
  primary_device_physical_downlink_interface:
    description: MX physical port on which logical interface will be created
    label: Underlying physical interface
    type: string
  primary_device_physical_uplink_interface:
    description: MX physical port on which logical interface will be created
    label: Underlying physical interface
    type: string
  secondary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Secondary Device.
    label: Ip address of the device.
    type: string
  secondary_device_port:
    description: Port that will be used to establish ssh connection to the Secondary Device.
    label: Port of the ssh connection.
    type: number
  secondary_device_username:
    description: Name of the user which will be used to log onto the Secondary Device.
    label: User name to log on to device.
    type: string
  secondary_device_password:
    description: Password of the user which will be used to log onto the Secondary Device.
    label: Users password.
    type: string
  secondary_device_physical_downlink_interface:
    description: MX physical port on which logical interface will be created
    label: Underlying physical interface
    type: string
  secondary_device_physical_uplink_interface:
    description: MX physical port on which logical interface will be created
    label: Underlying physical interface
    type: string
  downlink_vlan_id:
    description: Vlan tag for mx logical downlink interface
    label: Vlan Tag
    type: string
  uplink_vlan_id:
    description: Vlan tag for mx logical uplink interface
    label: Vlan Tag
    type: string
  gw_vip:
    description: Virtual IP configured on VRRP
    label: Inet Address CIDR
    type: string
  primary_device_gw_ip:
    description: IP on primary device
    label: Inet Address CIDR
    type: string
  secondary_device_gw_ip:
    description: IP on secondary device
    label: Inet Address CIDR
    type: string
  netmask:
    description: Netmask for gw_ip
    label: Netmask
    type: number
  vrrp_group:
    type: string
    label: VRRP Group
  primary_device_priority:
    type: string
    label: Primary device priority
  secondary_device_priority:
    type: string
    label: Secondary device priority
  vrf_name:
    type: string
    label: VRF
resources:
{% for device in ["primary", "secondary"] %}
  netconf_configure_{{ device }}:
    type: OS::Contrail::NetconfNamedConfigs
    properties:
      lock_timeout: 3000
      device_ip:
        get_param: {{ device }}_device_ip
      password:
        get_param: {{ device }}_device_password
      port:
        get_param: {{ device }}_device_port
      username:
        get_param: {{ device }}_device_username
      configs:
      - config:
          str_replace:
            params:
              $VRRP_GROUP:
                get_param: vrrp_group
              $PRIORITY:
                get_param: {{ device }}_device_priority
              $VIP:
                get_param: gw_vip
              $UPLINK_IF:
                get_param: {{device}}_device_physical_uplink_interface
              $UPLINK_VLAN_ID:
                get_param: uplink_vlan_id
            template: |
              vrrp-group $VRRP_GROUP {
                virtual-address $VIP;
                priority $PRIORITY;
                track {
                  interface $UPLINK_IF.$UPLINK_VLAN_ID {
                    priority-cost 10;
                  }
                }
              }
        path:
        - config_type: tag
          xml_type: tag
          tag: interfaces
        - config_type: name
          xml_type: named_tag
          tag: interface
          name: { get_param: {{ device }}_device_physical_downlink_interface }
        - config_type: named_tag
          xml_type: named_tag
          tag: unit
          name: { get_param: downlink_vlan_id }
        - config_type: tag
          xml_type: tag
          tag: family
        - config_type: tag
          xml_type: tag
          tag: inet
        - config_type: named_tag
          xml_type: named_tag
          tag: address
          name:
            str_replace:
              params:
                $DEVICE_IP:
                  get_param: {{ device }}_device_gw_ip
                $NETMASK:
                  get_param: netmask
              template: |
                $DEVICE_IP/$NETMASK
{% endfor %}
,[])'
03:02:10.229 gohan.db.sql INFO [0m Executing SQL query in transaction 'e07b8546-d10a-4b0d-b18b-edfd94eafacc': 'INSERT INTO `events` (`path`,`timestamp`,`type`,`marked_for_deletion`,`body`,`version`) VALUES (/v2.0/heat_templates/gw_interface_interdc,1494471730,create,false,"{\"handler\":\"heat_worker\",\"id\":\"gw_interface_interdc\",\"parameter_mappings\":{\"downlink_vlan_id\":{\"field\":\"downlink_vlan_id\",\"path\":[\"interdc_gw_id\"]},\"gw_vip\":{\"field\":\"gw_vipv4\"},\"heat_timeout\":{\"constant\":60},\"jinja_force_dependency1\":{\"field\":\"id\",\"path\":[{\"id\":\"network_id\",\"type\":\"network\"}]},\"netmask\":{\"field\":\"netmask\"},\"primary_device_gw_ip\":{\"field\":\"primary_ipv4\"},\"primary_device_ip\":{\"field\":\"ip\",\"path\":[\"interdc_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"primary_device_password\":{\"field\":\"password\",\"path\":[\"interdc_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"primary_device_physical_downlink_interface\":{\"field\":\"name\",\"path\":[\"interdc_gw_id\",\"downlink_interface_id\",\"primary_interface_id\"]},\"primary_device_physical_uplink_interface\":{\"field\":\"name\",\"path\":[\"interdc_gw_id\",\"uplink_interface_id\",\"primary_interface_id\"]},\"primary_device_port\":{\"field\":\"ssh_port\",\"path\":[\"interdc_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"primary_device_priority\":{\"constant\":105},\"primary_device_username\":{\"field\":\"login\",\"path\":[\"interdc_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"secondary_device_gw_ip\":{\"field\":\"secondary_ipv4\"},\"secondary_device_ip\":{\"field\":\"ip\",\"path\":[\"interdc_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"secondary_router_id\"]},\"secondary_device_password\":{\"field\":\"password\",\"path\":[\"interdc_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"secondary_router_id\"]},\"secondary_device_physical_downlink_interface\":{\"field\":\"name\",\"path\":[\"interdc_gw_id\",\"downlink_interface_id\",\"secondary_interface_id\"]},\"secondary_device_physical_uplink_interface\":{\"field\":\"name\",\"path\":[\"interdc_gw_id\",\"uplink_interface_id\",\"secondary_interface_id\"]},\"secondary_device_port\":{\"field\":\"ssh_port\",\"path\":[\"interdc_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"secondary_router_id\"]},\"secondary_device_priority\":{\"constant\":100},\"secondary_device_username\":{\"field\":\"login\",\"path\":[\"interdc_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"secondary_router_id\"]},\"uplink_vlan_id\":{\"field\":\"uplink_vlan_id\",\"path\":[\"interdc_gw_id\"]},\"vrf_name\":{\"field\":\"vrf_name\",\"path\":[\"interdc_gw_id\"]},\"vrrp_group\":{\"field\":\"vrid\"}},\"template_file\":\"heat_template_version: 2013-05-23\\n\\ndescription: \\u003e\\n  Gateway Interface Inter DC\\n\\nparameters:\\n  primary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\\n    label: Ip address of the device.\\n    type: string\\n  primary_device_port:\\n    description: Port that will be used to establish ssh connection to the Primary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  primary_device_username:\\n    description: Name of the user which will be used to log onto the Primary Device.\\n    label: User name to log on to device.\\n    type: string\\n  primary_device_password:\\n    description: Password of the user which will be used to log onto the Primary Device.\\n    label: Users password.\\n    type: string\\n  primary_device_physical_downlink_interface:\\n    description: MX physical port on which logical interface will be created\\n    label: Underlying physical interface\\n    type: string\\n  primary_device_physical_uplink_interface:\\n    description: MX physical port on which logical interface will be created\\n    label: Underlying physical interface\\n    type: string\\n  secondary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\\n    label: Ip address of the device.\\n    type: string\\n  secondary_device_port:\\n    description: Port that will be used to establish ssh connection to the Secondary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  secondary_device_username:\\n    description: Name of the user which will be used to log onto the Secondary Device.\\n    label: User name to log on to device.\\n    type: string\\n  secondary_device_password:\\n    description: Password of the user which will be used to log onto the Secondary Device.\\n    label: Users password.\\n    type: string\\n  secondary_device_physical_downlink_interface:\\n    description: MX physical port on which logical interface will be created\\n    label: Underlying physical interface\\n    type: string\\n  secondary_device_physical_uplink_interface:\\n    description: MX physical port on which logical interface will be created\\n    label: Underlying physical interface\\n    type: string\\n  downlink_vlan_id:\\n    description: Vlan tag for mx logical downlink interface\\n    label: Vlan Tag\\n    type: string\\n  uplink_vlan_id:\\n    description: Vlan tag for mx logical uplink interface\\n    label: Vlan Tag\\n    type: string\\n  gw_vip:\\n    description: Virtual IP configured on VRRP\\n    label: Inet Address CIDR\\n    type: string\\n  primary_device_gw_ip:\\n    description: IP on primary device\\n    label: Inet Address CIDR\\n    type: string\\n  secondary_device_gw_ip:\\n    description: IP on secondary device\\n    label: Inet Address CIDR\\n    type: string\\n  netmask:\\n    description: Netmask for gw_ip\\n    label: Netmask\\n    type: number\\n  vrrp_group:\\n    type: string\\n    label: VRRP Group\\n  primary_device_priority:\\n    type: string\\n    label: Primary device priority\\n  secondary_device_priority:\\n    type: string\\n    label: Secondary device priority\\n  vrf_name:\\n    type: string\\n    label: VRF\\nresources:\\n{% for device in [\\\"primary\\\", \\\"secondary\\\"] %}\\n  netconf_configure_{{ device }}:\\n    type: OS::Contrail::NetconfNamedConfigs\\n    properties:\\n      lock_timeout: 3000\\n      device_ip:\\n        get_param: {{ device }}_device_ip\\n      password:\\n        get_param: {{ device }}_device_password\\n      port:\\n        get_param: {{ device }}_device_port\\n      username:\\n        get_param: {{ device }}_device_username\\n      configs:\\n      - config:\\n          str_replace:\\n            params:\\n              $VRRP_GROUP:\\n                get_param: vrrp_group\\n              $PRIORITY:\\n                get_param: {{ device }}_device_priority\\n              $VIP:\\n                get_param: gw_vip\\n              $UPLINK_IF:\\n                get_param: {{device}}_device_physical_uplink_interface\\n              $UPLINK_VLAN_ID:\\n                get_param: uplink_vlan_id\\n            template: |\\n              vrrp-group $VRRP_GROUP {\\n                virtual-address $VIP;\\n                priority $PRIORITY;\\n                track {\\n                  interface $UPLINK_IF.$UPLINK_VLAN_ID {\\n                    priority-cost 10;\\n                  }\\n                }\\n              }\\n        path:\\n        - config_type: tag\\n          xml_type: tag\\n          tag: interfaces\\n        - config_type: name\\n          xml_type: named_tag\\n          tag: interface\\n          name: { get_param: {{ device }}_device_physical_downlink_interface }\\n        - config_type: named_tag\\n          xml_type: named_tag\\n          tag: unit\\n          name: { get_param: downlink_vlan_id }\\n        - config_type: tag\\n          xml_type: tag\\n          tag: family\\n        - config_type: tag\\n          xml_type: tag\\n          tag: inet\\n        - config_type: named_tag\\n          xml_type: named_tag\\n          tag: address\\n          name:\\n            str_replace:\\n              params:\\n                $DEVICE_IP:\\n                  get_param: {{ device }}_device_gw_ip\\n                $NETMASK:\\n                  get_param: netmask\\n              template: |\\n                $DEVICE_IP/$NETMASK\\n{% endfor %}\\n\",\"watch\":[]}",1)'
03:02:10.232 gohan.db INFO [0m Creating resource static_route_interdc
03:02:10.232 gohan.db.sql INFO [0m Executing SQL query in transaction 'e07b8546-d10a-4b0d-b18b-edfd94eafacc': 'INSERT INTO `heat_templates` (`handler`,`id`,`parameter_mappings`,`template_file`,`watch`) VALUES (heat_worker,static_route_interdc,{"heat_timeout":{"constant":60},"next_hop":{"field":"nexthop"},"primary_device_ip":{"field":"ip","path":["interdc_gw_id","downlink_interface_id","ha_router_id","primary_router_id"]},"primary_device_password":{"field":"password","path":["interdc_gw_id","downlink_interface_id","ha_router_id","primary_router_id"]},"primary_device_port":{"field":"ssh_port","path":["interdc_gw_id","downlink_interface_id","ha_router_id","primary_router_id"]},"primary_device_username":{"field":"login","path":["interdc_gw_id","downlink_interface_id","ha_router_id","primary_router_id"]},"route":{"field":"destination"},"secondary_device_ip":{"field":"ip","path":["interdc_gw_id","downlink_interface_id","ha_router_id","secondary_router_id"]},"secondary_device_password":{"field":"password","path":["interdc_gw_id","downlink_interface_id","ha_router_id","secondary_router_id"]},"secondary_device_port":{"field":"ssh_port","path":["interdc_gw_id","downlink_interface_id","ha_router_id","secondary_router_id"]},"secondary_device_username":{"field":"login","path":["interdc_gw_id","downlink_interface_id","ha_router_id","secondary_router_id"]},"vrf_name":{"field":"vrf_name","path":["interdc_gw_id"]}},heat_template_version: 2013-05-23

description: >
  Inter DC Gateway Static Route

parameters:
  primary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Primary Device.
    label: Ip address of the device.
    type: string
  primary_device_port:
    description: Port that will be used to establish ssh connection to the Primary Device.
    label: Port of the ssh connection.
    type: number
  primary_device_username:
    description: Name of the user which will be used to log onto the Primary Device.
    label: User name to log on to device.
    type: string
  primary_device_password:
    description: Password of the user which will be used to log onto the Primary Device.
    label: Users password.
    type: string
  secondary_device_ip:
    description: Ip address that will be used to establish ssh connection to the Secondary Device.
    label: Ip address of the device.
    type: string
  secondary_device_port:
    description: Port that will be used to establish ssh connection to the Secondary Device.
    label: Port of the ssh connection.
    type: number
  secondary_device_username:
    description: Name of the user which will be used to log onto the Secondary Device.
    label: User name to log on to device.
    type: string
  secondary_device_password:
    description: Password of the user which will be used to log onto the Secondary Device.
    label: Users password.
    type: string
  vrf_name:
    description: Name of VRF to add this static route
    label: VRF
    type: string
  route:
    description: Static Route definition
    label: Route
    type: string
  next_hop:
    description: Next hop for the static route
    label: Next hop
    type: string

resources:
{% for device in ["primary", "secondary"] %}
  netconf_configure_{{ device }}:
    type: OS::Contrail::NetconfNamedConfigs
    properties:
      lock_timeout: 3000
      device_ip:
        get_param: {{ device }}_device_ip
      password:
        get_param: {{ device }}_device_password
      port:
        get_param: {{ device }}_device_port
      username:
        get_param: {{ device }}_device_username
      configs:
      - config:
          str_replace:
            params:
              $NEXT_HOP:
                get_param: next_hop
            template: |
              next-hop $NEXT_HOP;
        path:
          - config_type: tag
            xml_type: tag
            tag: routing-instances
          - config_type: name
            xml_type: named_tag
            tag: instance
            name: { get_param: vrf_name }
          - config_type: tag
            xml_type: tag
            tag: routing-options
          - config_type: tag
            xml_type: tag
            tag: static
          - config_type: named_tag
            xml_type: named_tag
            tag: route
            name: { get_param: route }
{% endfor %}
,[])'
03:02:10.233 gohan.db.sql INFO [0m Executing SQL query in transaction 'e07b8546-d10a-4b0d-b18b-edfd94eafacc': 'INSERT INTO `events` (`type`,`marked_for_deletion`,`body`,`version`,`path`,`timestamp`) VALUES (create,false,"{\"handler\":\"heat_worker\",\"id\":\"static_route_interdc\",\"parameter_mappings\":{\"heat_timeout\":{\"constant\":60},\"next_hop\":{\"field\":\"nexthop\"},\"primary_device_ip\":{\"field\":\"ip\",\"path\":[\"interdc_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"primary_device_password\":{\"field\":\"password\",\"path\":[\"interdc_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"primary_device_port\":{\"field\":\"ssh_port\",\"path\":[\"interdc_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"primary_device_username\":{\"field\":\"login\",\"path\":[\"interdc_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"primary_router_id\"]},\"route\":{\"field\":\"destination\"},\"secondary_device_ip\":{\"field\":\"ip\",\"path\":[\"interdc_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"secondary_router_id\"]},\"secondary_device_password\":{\"field\":\"password\",\"path\":[\"interdc_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"secondary_router_id\"]},\"secondary_device_port\":{\"field\":\"ssh_port\",\"path\":[\"interdc_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"secondary_router_id\"]},\"secondary_device_username\":{\"field\":\"login\",\"path\":[\"interdc_gw_id\",\"downlink_interface_id\",\"ha_router_id\",\"secondary_router_id\"]},\"vrf_name\":{\"field\":\"vrf_name\",\"path\":[\"interdc_gw_id\"]}},\"template_file\":\"heat_template_version: 2013-05-23\\n\\ndescription: \\u003e\\n  Inter DC Gateway Static Route\\n\\nparameters:\\n  primary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\\n    label: Ip address of the device.\\n    type: string\\n  primary_device_port:\\n    description: Port that will be used to establish ssh connection to the Primary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  primary_device_username:\\n    description: Name of the user which will be used to log onto the Primary Device.\\n    label: User name to log on to device.\\n    type: string\\n  primary_device_password:\\n    description: Password of the user which will be used to log onto the Primary Device.\\n    label: Users password.\\n    type: string\\n  secondary_device_ip:\\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\\n    label: Ip address of the device.\\n    type: string\\n  secondary_device_port:\\n    description: Port that will be used to establish ssh connection to the Secondary Device.\\n    label: Port of the ssh connection.\\n    type: number\\n  secondary_device_username:\\n    description: Name of the user which will be used to log onto the Secondary Device.\\n    label: User name to log on to device.\\n    type: string\\n  secondary_device_password:\\n    description: Password of the user which will be used to log onto the Secondary Device.\\n    label: Users password.\\n    type: string\\n  vrf_name:\\n    description: Name of VRF to add this static route\\n    label: VRF\\n    type: string\\n  route:\\n    description: Static Route definition\\n    label: Route\\n    type: string\\n  next_hop:\\n    description: Next hop for the static route\\n    label: Next hop\\n    type: string\\n\\nresources:\\n{% for device in [\\\"primary\\\", \\\"secondary\\\"] %}\\n  netconf_configure_{{ device }}:\\n    type: OS::Contrail::NetconfNamedConfigs\\n    properties:\\n      lock_timeout: 3000\\n      device_ip:\\n        get_param: {{ device }}_device_ip\\n      password:\\n        get_param: {{ device }}_device_password\\n      port:\\n        get_param: {{ device }}_device_port\\n      username:\\n        get_param: {{ device }}_device_username\\n      configs:\\n      - config:\\n          str_replace:\\n            params:\\n              $NEXT_HOP:\\n                get_param: next_hop\\n            template: |\\n              next-hop $NEXT_HOP;\\n        path:\\n          - config_type: tag\\n            xml_type: tag\\n            tag: routing-instances\\n          - config_type: name\\n            xml_type: named_tag\\n            tag: instance\\n            name: { get_param: vrf_name }\\n          - config_type: tag\\n            xml_type: tag\\n            tag: routing-options\\n          - config_type: tag\\n            xml_type: tag\\n            tag: static\\n          - config_type: named_tag\\n            xml_type: named_tag\\n            tag: route\\n            name: { get_param: route }\\n{% endfor %}\\n\",\"watch\":[]}",1,/v2.0/heat_templates/static_route_interdc,1494471730)'
03:02:10.234 gohan.db INFO [0m Populating resources for schema worker_data
03:02:10.237 gohan.db INFO [0m Populating resources for schema tenant
03:02:10.242 gohan.db INFO [0m Populating resources for schema edge_router
03:02:10.262 gohan.db INFO [0m Populating resources for schema er_physical_interface
03:02:10.272 gohan.db INFO [0m Populating resources for schema ha_router
03:02:10.276 gohan.db INFO [0m Populating resources for schema ha_interface
03:02:10.283 gohan.db INFO [0m Populating resources for schema internet_service
03:02:10.287 gohan.db INFO [0m Populating resources for schema vpn_service
03:02:10.307 gohan.db INFO [0m Populating resources for schema aws_service
03:02:10.311 gohan.db INFO [0m Populating resources for schema interdc_service
03:02:10.315 gohan.db INFO [0m Populating resources for schema common_function_pool
03:02:10.321 gohan.db INFO [0m Populating resources for schema nat_ip_pool
03:02:10.330 gohan.db INFO [0m Populating resources for schema common_function
03:02:10.333 gohan.db INFO [0m Populating resources for schema public_ip_pool
03:02:10.336 gohan.db INFO [0m Populating resources for schema suspended_public_ip
03:02:10.349 gohan.db INFO [0m Populating resources for schema qos_option
03:02:10.355 gohan.db INFO [0m Populating resources for schema vpn_gateway
03:02:10.362 gohan.db INFO [0m Populating resources for schema vpn_interface
03:02:10.365 gohan.db INFO [0m Populating resources for schema aws_gateway
03:02:10.369 gohan.db INFO [0m Populating resources for schema aws_interface
03:02:10.373 gohan.db INFO [0m Populating resources for schema internet_gateway
03:02:10.376 gohan.db INFO [0m Populating resources for schema common_function_gateway
03:02:10.388 gohan.db INFO [0m Populating resources for schema public_ip
03:02:10.391 gohan.db INFO [0m Populating resources for schema interdc_gateway
03:02:10.396 gohan.db INFO [0m Populating resources for schema interdc_interface
03:02:10.399 gohan.db INFO [0m Populating resources for schema gw_interface
03:02:10.402 gohan.db INFO [0m Populating resources for schema static_route
03:02:10.405 gohan.db INFO [0m Populating resources for schema vnf_template
03:02:10.415 gohan.db INFO [0m Populating resources for schema vnf_plan
03:02:10.418 gohan.db INFO [0m Populating resources for schema vnf_instance
03:02:10.422 gohan.db INFO [0m Populating resources for schema vnf_interface
03:02:10.426 gohan.db INFO [0m Populating resources for schema firewall_plan
03:02:10.429 gohan.db INFO [0m Populating resources for schema firewall
03:02:10.432 gohan.db INFO [0m Populating resources for schema firewall_interface
03:02:10.435 gohan.db INFO [0m Populating resources for schema load_balancer_plan
03:02:10.444 gohan.db INFO [0m Populating resources for schema load_balancer_conf
03:02:10.448 gohan.db INFO [0m Populating resources for schema load_balancer
03:02:10.452 gohan.db INFO [0m Populating resources for schema load_balancer_interface
03:02:10.455 gohan.db INFO [0m Populating resources for schema load_balancer_syslog_server
03:02:10.458 gohan.db INFO [0m Populating resources for schema billing_usage
03:02:10.461 gohan.db INFO [0m Populating resources for schema billing_resource
03:02:10.473 gohan.db INFO [0m Populating resources for schema monitoring
03:02:10.476 gohan.db INFO [0m Populating resources for schema resource_mapping
03:02:10.479 gohan.db INFO [0m Populating resources for schema colocation_space
03:02:10.484 gohan.db INFO [0m Populating resources for schema colocation_physical_link
03:02:10.487 gohan.db INFO [0m Populating resources for schema colocation_logical_link
03:02:10.492 gohan.db INFO [0m Populating resources for schema tenant_connection
03:02:10.496 gohan.db INFO [0m Populating resources for schema hosting_physical_link
03:02:10.505 gohan.db INFO [0m Populating resources for schema hosting_logical_link
03:02:10.526 gohan.server.core INFO [0m Importing data from ./init/quotas.yaml ...
03:02:10.526 gohan.db INFO [0m Populating resources for schema schema
03:02:10.527 gohan.db INFO [0m Populating resources for schema policy
03:02:10.527 gohan.db INFO [0m Populating resources for schema extension
03:02:10.527 gohan.db INFO [0m Populating resources for schema event
03:02:10.528 gohan.db INFO [0m Populating resources for schema namespace
03:02:10.528 gohan.db INFO [0m Populating resources for schema location
03:02:10.528 gohan.db INFO [0m Populating resources for schema ese_device
03:02:10.528 gohan.db INFO [0m Populating resources for schema network
03:02:10.529 gohan.db INFO [0m Populating resources for schema subnet
03:02:10.529 gohan.db INFO [0m Populating resources for schema port
03:02:10.530 gohan.db INFO [0m Populating resources for schema ese_physical_port
03:02:10.530 gohan.db INFO [0m Populating resources for schema ese_logical_port
03:02:10.530 gohan.db INFO [0m Populating resources for schema local_subnet
03:02:10.531 gohan.db INFO [0m Populating resources for schema server
03:02:10.531 gohan.db INFO [0m Populating resources for schema physical_port
03:02:10.531 gohan.db INFO [0m Populating resources for schema quota
03:02:10.533 gohan.db INFO [0m Creating resource default
03:02:10.533 gohan.db.sql INFO [0m Executing SQL query in transaction 'dbadeded-7d4e-4014-9c00-97c3bb301b8a': 'INSERT INTO `quotas` (`load_balancer`,`port`,`vpn_gateway`,`firewall`,`subnet`,`id`,`network`,`hosting_physical_link_plane_storage`,`common_function_gateway`,`aws_gateway`,`public_ip`,`internet_gateway`,`tenant_id`,`colocation_logical_link`,`hosting_logical_link`,`interdc_gateway`) VALUES (10000,30000,10000,10000,10000,default,10000,10000,10000,10000,10000,10000,default,10000,10000,10000)'
03:02:10.534 gohan.db.sql INFO [0m Executing SQL query in transaction 'dbadeded-7d4e-4014-9c00-97c3bb301b8a': 'INSERT INTO `events` (`body`,`version`,`path`,`timestamp`,`type`,`marked_for_deletion`) VALUES ("{\"aws_gateway\":10000,\"colocation_logical_link\":10000,\"common_function_gateway\":10000,\"firewall\":10000,\"hosting_logical_link\":10000,\"hosting_physical_link_plane_storage\":10000,\"id\":\"default\",\"interdc_gateway\":10000,\"internet_gateway\":10000,\"load_balancer\":10000,\"network\":10000,\"port\":30000,\"public_ip\":10000,\"subnet\":10000,\"tenant_id\":\"default\",\"vpn_gateway\":10000}",1,/v2.0/quotas/default,1494471730,create,false)'
03:02:10.535 gohan.db INFO [0m Populating resources for schema reserve_address
03:02:10.535 gohan.db INFO [0m Populating resources for schema neutron_extension
03:02:10.535 gohan.db INFO [0m Populating resources for schema heat_template
03:02:10.535 gohan.db INFO [0m Populating resources for schema worker_data
03:02:10.535 gohan.db INFO [0m Populating resources for schema tenant
03:02:10.536 gohan.db INFO [0m Populating resources for schema edge_router
03:02:10.536 gohan.db INFO [0m Populating resources for schema er_physical_interface
03:02:10.539 gohan.db INFO [0m Populating resources for schema ha_router
03:02:10.539 gohan.db INFO [0m Populating resources for schema ha_interface
03:02:10.539 gohan.db INFO [0m Populating resources for schema internet_service
03:02:10.539 gohan.db INFO [0m Populating resources for schema vpn_service
03:02:10.540 gohan.db INFO [0m Populating resources for schema aws_service
03:02:10.540 gohan.db INFO [0m Populating resources for schema interdc_service
03:02:10.540 gohan.db INFO [0m Populating resources for schema common_function_pool
03:02:10.540 gohan.db INFO [0m Populating resources for schema nat_ip_pool
03:02:10.540 gohan.db INFO [0m Populating resources for schema common_function
03:02:10.541 gohan.db INFO [0m Populating resources for schema public_ip_pool
03:02:10.541 gohan.db INFO [0m Populating resources for schema suspended_public_ip
03:02:10.541 gohan.db INFO [0m Populating resources for schema qos_option
03:02:10.541 gohan.db INFO [0m Populating resources for schema vpn_gateway
03:02:10.541 gohan.db INFO [0m Populating resources for schema vpn_interface
03:02:10.541 gohan.db INFO [0m Populating resources for schema aws_gateway
03:02:10.542 gohan.db INFO [0m Populating resources for schema aws_interface
03:02:10.542 gohan.db INFO [0m Populating resources for schema internet_gateway
03:02:10.542 gohan.db INFO [0m Populating resources for schema common_function_gateway
03:02:10.542 gohan.db INFO [0m Populating resources for schema public_ip
03:02:10.542 gohan.db INFO [0m Populating resources for schema interdc_gateway
03:02:10.543 gohan.db INFO [0m Populating resources for schema interdc_interface
03:02:10.543 gohan.db INFO [0m Populating resources for schema gw_interface
03:02:10.543 gohan.db INFO [0m Populating resources for schema static_route
03:02:10.543 gohan.db INFO [0m Populating resources for schema vnf_template
03:02:10.543 gohan.db INFO [0m Populating resources for schema vnf_plan
03:02:10.544 gohan.db INFO [0m Populating resources for schema vnf_instance
03:02:10.544 gohan.db INFO [0m Populating resources for schema vnf_interface
03:02:10.544 gohan.db INFO [0m Populating resources for schema firewall_plan
03:02:10.544 gohan.db INFO [0m Populating resources for schema firewall
03:02:10.544 gohan.db INFO [0m Populating resources for schema firewall_interface
03:02:10.545 gohan.db INFO [0m Populating resources for schema load_balancer_plan
03:02:10.545 gohan.db INFO [0m Populating resources for schema load_balancer_conf
03:02:10.545 gohan.db INFO [0m Populating resources for schema load_balancer
03:02:10.545 gohan.db INFO [0m Populating resources for schema load_balancer_interface
03:02:10.545 gohan.db INFO [0m Populating resources for schema load_balancer_syslog_server
03:02:10.546 gohan.db INFO [0m Populating resources for schema billing_usage
03:02:10.546 gohan.db INFO [0m Populating resources for schema billing_resource
03:02:10.546 gohan.db INFO [0m Populating resources for schema monitoring
03:02:10.546 gohan.db INFO [0m Populating resources for schema resource_mapping
03:02:10.546 gohan.db INFO [0m Populating resources for schema colocation_space
03:02:10.546 gohan.db INFO [0m Populating resources for schema colocation_physical_link
03:02:10.547 gohan.db INFO [0m Populating resources for schema colocation_logical_link
03:02:10.547 gohan.db INFO [0m Populating resources for schema tenant_connection
03:02:10.547 gohan.db INFO [0m Populating resources for schema hosting_physical_link
03:02:10.551 gohan.db INFO [0m Populating resources for schema hosting_logical_link
03:02:10.573 gohan.server.core INFO [0m Importing data from ./init/reserve_addresses.yaml ...
03:02:10.573 gohan.db INFO [0m Populating resources for schema schema
03:02:10.573 gohan.db INFO [0m Populating resources for schema policy
03:02:10.573 gohan.db INFO [0m Populating resources for schema extension
03:02:10.574 gohan.db INFO [0m Populating resources for schema event
03:02:10.574 gohan.db INFO [0m Populating resources for schema namespace
03:02:10.574 gohan.db INFO [0m Populating resources for schema location
03:02:10.574 gohan.db INFO [0m Populating resources for schema ese_device
03:02:10.574 gohan.db INFO [0m Populating resources for schema network
03:02:10.574 gohan.db INFO [0m Populating resources for schema subnet
03:02:10.574 gohan.db INFO [0m Populating resources for schema port
03:02:10.575 gohan.db INFO [0m Populating resources for schema ese_physical_port
03:02:10.575 gohan.db INFO [0m Populating resources for schema ese_logical_port
03:02:10.575 gohan.db INFO [0m Populating resources for schema local_subnet
03:02:10.575 gohan.db INFO [0m Populating resources for schema server
03:02:10.575 gohan.db INFO [0m Populating resources for schema physical_port
03:02:10.575 gohan.db INFO [0m Populating resources for schema quota
03:02:10.576 gohan.db INFO [0m Populating resources for schema reserve_address
03:02:10.577 gohan.db INFO [0m Creating resource default
03:02:10.577 gohan.db.sql INFO [0m Executing SQL query in transaction '75940891-94e7-4433-b6ec-ec9d59d20b59': 'INSERT INTO `reserve_addresss` (`subnets`,`id`,`tenant_id`) VALUES ([],default,default)'
03:02:10.577 gohan.db.sql INFO [0m Executing SQL query in transaction '75940891-94e7-4433-b6ec-ec9d59d20b59': 'INSERT INTO `events` (`body`,`version`,`path`,`timestamp`,`type`,`marked_for_deletion`) VALUES ("{\"id\":\"default\",\"subnets\":[],\"tenant_id\":\"default\"}",1,/v2.0/reserve_addresses/default,1494471730,create,false)'
03:02:10.578 gohan.db INFO [0m Populating resources for schema neutron_extension
03:02:10.578 gohan.db INFO [0m Populating resources for schema heat_template
03:02:10.578 gohan.db INFO [0m Populating resources for schema worker_data
03:02:10.578 gohan.db INFO [0m Populating resources for schema tenant
03:02:10.578 gohan.db INFO [0m Populating resources for schema edge_router
03:02:10.579 gohan.db INFO [0m Populating resources for schema er_physical_interface
03:02:10.579 gohan.db INFO [0m Populating resources for schema ha_router
03:02:10.579 gohan.db INFO [0m Populating resources for schema ha_interface
03:02:10.579 gohan.db INFO [0m Populating resources for schema internet_service
03:02:10.579 gohan.db INFO [0m Populating resources for schema vpn_service
03:02:10.579 gohan.db INFO [0m Populating resources for schema aws_service
03:02:10.579 gohan.db INFO [0m Populating resources for schema interdc_service
03:02:10.579 gohan.db INFO [0m Populating resources for schema common_function_pool
03:02:10.579 gohan.db INFO [0m Populating resources for schema nat_ip_pool
03:02:10.580 gohan.db INFO [0m Populating resources for schema common_function
03:02:10.580 gohan.db INFO [0m Populating resources for schema public_ip_pool
03:02:10.580 gohan.db INFO [0m Populating resources for schema suspended_public_ip
03:02:10.580 gohan.db INFO [0m Populating resources for schema qos_option
03:02:10.580 gohan.db INFO [0m Populating resources for schema vpn_gateway
03:02:10.582 gohan.db INFO [0m Populating resources for schema vpn_interface
03:02:10.582 gohan.db INFO [0m Populating resources for schema aws_gateway
03:02:10.582 gohan.db INFO [0m Populating resources for schema aws_interface
03:02:10.582 gohan.db INFO [0m Populating resources for schema internet_gateway
03:02:10.583 gohan.db INFO [0m Populating resources for schema common_function_gateway
03:02:10.583 gohan.db INFO [0m Populating resources for schema public_ip
03:02:10.583 gohan.db INFO [0m Populating resources for schema interdc_gateway
03:02:10.584 gohan.db INFO [0m Populating resources for schema interdc_interface
03:02:10.584 gohan.db INFO [0m Populating resources for schema gw_interface
03:02:10.584 gohan.db INFO [0m Populating resources for schema static_route
03:02:10.584 gohan.db INFO [0m Populating resources for schema vnf_template
03:02:10.584 gohan.db INFO [0m Populating resources for schema vnf_plan
03:02:10.584 gohan.db INFO [0m Populating resources for schema vnf_instance
03:02:10.584 gohan.db INFO [0m Populating resources for schema vnf_interface
03:02:10.584 gohan.db INFO [0m Populating resources for schema firewall_plan
03:02:10.585 gohan.db INFO [0m Populating resources for schema firewall
03:02:10.585 gohan.db INFO [0m Populating resources for schema firewall_interface
03:02:10.585 gohan.db INFO [0m Populating resources for schema load_balancer_plan
03:02:10.585 gohan.db INFO [0m Populating resources for schema load_balancer_conf
03:02:10.585 gohan.db INFO [0m Populating resources for schema load_balancer
03:02:10.585 gohan.db INFO [0m Populating resources for schema load_balancer_interface
03:02:10.585 gohan.db INFO [0m Populating resources for schema load_balancer_syslog_server
03:02:10.586 gohan.db INFO [0m Populating resources for schema billing_usage
03:02:10.586 gohan.db INFO [0m Populating resources for schema billing_resource
03:02:10.586 gohan.db INFO [0m Populating resources for schema monitoring
03:02:10.593 gohan.db INFO [0m Populating resources for schema resource_mapping
03:02:10.593 gohan.db INFO [0m Populating resources for schema colocation_space
03:02:10.593 gohan.db INFO [0m Populating resources for schema colocation_physical_link
03:02:10.593 gohan.db INFO [0m Populating resources for schema colocation_logical_link
03:02:10.593 gohan.db INFO [0m Populating resources for schema tenant_connection
03:02:10.593 gohan.db INFO [0m Populating resources for schema hosting_physical_link
03:02:10.594 gohan.db INFO [0m Populating resources for schema hosting_logical_link
03:02:10.609 gohan.server.core INFO [0m Importing data from ./init/vnf_templates.yaml ...
03:02:10.609 gohan.db INFO [0m Populating resources for schema schema
03:02:10.610 gohan.db INFO [0m Populating resources for schema policy
03:02:10.610 gohan.db INFO [0m Populating resources for schema extension
03:02:10.611 gohan.db INFO [0m Populating resources for schema event
03:02:10.612 gohan.db INFO [0m Populating resources for schema namespace
03:02:10.612 gohan.db INFO [0m Populating resources for schema location
03:02:10.613 gohan.db INFO [0m Populating resources for schema ese_device
03:02:10.613 gohan.db INFO [0m Populating resources for schema network
03:02:10.614 gohan.db INFO [0m Populating resources for schema subnet
03:02:10.614 gohan.db INFO [0m Populating resources for schema port
03:02:10.615 gohan.db INFO [0m Populating resources for schema ese_physical_port
03:02:10.615 gohan.db INFO [0m Populating resources for schema ese_logical_port
03:02:10.616 gohan.db INFO [0m Populating resources for schema local_subnet
03:02:10.616 gohan.db INFO [0m Populating resources for schema server
03:02:10.617 gohan.db INFO [0m Populating resources for schema physical_port
03:02:10.617 gohan.db INFO [0m Populating resources for schema quota
03:02:10.617 gohan.db INFO [0m Populating resources for schema reserve_address
03:02:10.618 gohan.db INFO [0m Populating resources for schema neutron_extension
03:02:10.618 gohan.db INFO [0m Populating resources for schema heat_template
03:02:10.625 gohan.db INFO [0m Creating resource vnf_instance
03:02:10.626 gohan.db.sql INFO [0m Executing SQL query in transaction '135f3689-546c-49ac-94cb-792d751da092': 'INSERT INTO `heat_templates` (`parameter_mappings`,`template_file`,`watch`,`handler`,`id`) VALUES ({"availability_zone":"Pavailability_zone","config_drive":"Pconfig_drive","flavor":"Fvnf_plan+vnf_plan_id:flavor","heat_timeout":"C15","image":"Fvnf_template+vnf_template_id:image","name":"Pname","networks":"Pnetworks","reboot":"Preboot","user_data":"Puser_data","user_data_format":"Puser_data_format"},heat_template_version: 2013-05-23
description: VNF Instance
parameters:
  name:
    default: ""
    type: string
  image:
    type: string
    constraints:
    - custom_constraint: glance.image
  flavor:
    type: string
    constraints:
    - custom_constraint: nova.flavor
  availability_zone:
    type: string
    default: ""
  networks:
    type: json
  reboot:
    type: string
    default: ""
  user_data:
    type: string
    default: ""
  user_data_format:
    type: string
  config_drive:
    type: boolean
resources:
  server:
    type: ESI::VNF::Instance
    properties:
      name: { get_param: name }
      flavor: { get_param: flavor }
      image: { get_param: image }
      networks: { get_param: networks }
      availability_zone: { get_param: availability_zone }
      reboot: { get_param: reboot }
      user_data: { get_param: user_data }
      user_data_format: { get_param: user_data_format }
      config_drive: { get_param: config_drive }
outputs:
  server_id:
    description: A unique id for the nova server.
    value: { get_resource: server }
,[],heat_worker,vnf_instance)'
03:02:10.626 gohan.db.sql INFO [0m Executing SQL query in transaction '135f3689-546c-49ac-94cb-792d751da092': 'INSERT INTO `events` (`type`,`marked_for_deletion`,`body`,`version`,`path`,`timestamp`) VALUES (create,false,"{\"handler\":\"heat_worker\",\"id\":\"vnf_instance\",\"parameter_mappings\":{\"availability_zone\":\"Pavailability_zone\",\"config_drive\":\"Pconfig_drive\",\"flavor\":\"Fvnf_plan+vnf_plan_id:flavor\",\"heat_timeout\":\"C15\",\"image\":\"Fvnf_template+vnf_template_id:image\",\"name\":\"Pname\",\"networks\":\"Pnetworks\",\"reboot\":\"Preboot\",\"user_data\":\"Puser_data\",\"user_data_format\":\"Puser_data_format\"},\"template_file\":\"heat_template_version: 2013-05-23\\ndescription: VNF Instance\\nparameters:\\n  name:\\n    default: \\\"\\\"\\n    type: string\\n  image:\\n    type: string\\n    constraints:\\n    - custom_constraint: glance.image\\n  flavor:\\n    type: string\\n    constraints:\\n    - custom_constraint: nova.flavor\\n  availability_zone:\\n    type: string\\n    default: \\\"\\\"\\n  networks:\\n    type: json\\n  reboot:\\n    type: string\\n    default: \\\"\\\"\\n  user_data:\\n    type: string\\n    default: \\\"\\\"\\n  user_data_format:\\n    type: string\\n  config_drive:\\n    type: boolean\\nresources:\\n  server:\\n    type: ESI::VNF::Instance\\n    properties:\\n      name: { get_param: name }\\n      flavor: { get_param: flavor }\\n      image: { get_param: image }\\n      networks: { get_param: networks }\\n      availability_zone: { get_param: availability_zone }\\n      reboot: { get_param: reboot }\\n      user_data: { get_param: user_data }\\n      user_data_format: { get_param: user_data_format }\\n      config_drive: { get_param: config_drive }\\noutputs:\\n  server_id:\\n    description: A unique id for the nova server.\\n    value: { get_resource: server }\\n\",\"watch\":[]}",1,/v2.0/heat_templates/vnf_instance,1494471730)'
03:02:10.628 gohan.db INFO [0m Creating resource firewall_config
03:02:10.628 gohan.db.sql INFO [0m Executing SQL query in transaction '135f3689-546c-49ac-94cb-792d751da092': 'INSERT INTO `heat_templates` (`parameter_mappings`,`template_file`,`watch`,`handler`,`id`) VALUES ({"admin_password":{"field":"admin_password"},"admin_username":{"field":"admin_username"},"credentials":{"field":"credentials","path":["vnf_instance_id","vnf_template_id"]},"default_gateway":{"field":"default_gateway"},"management_ip":{"field":"management_ip","path":["vnf_instance_id"]},"networks":{"field":"networks"},"other_password":{"field":"other_password"},"other_username":{"field":"other_username"},"user_password":{"field":"user_password"},"user_username":{"field":"user_username"}},heat_template_version: 2013-05-23
description: Vyatta Firewall Configuration
parameters:
  management_ip:
    type: string
  credentials:
    type: json
  default_gateway:
    type: string
    default: ""
  user_username:
    type: string
  user_password:
    type: string
    default: ""
  admin_username:
    type: string
  admin_password:
    type: string
    default: ""
  other_username:
    type: string
    default: ""
  other_password:
    type: string
    default: ""
  networks:
    type: json
resources:
  server:
    type: ESI::VNF::VyattaConfig
    properties:
      management_ip: { get_param: management_ip }
      credentials: { get_param: credentials }
      default_gateway: { get_param: default_gateway }
      user_username: { get_param: user_username }
      user_password: { get_param: user_password }
      admin_username: { get_param: admin_username }
      admin_password: { get_param: admin_password }
      other_username: { get_param: other_username }
      other_password: { get_param: other_password }
      networks: { get_param: networks }
,[],heat_worker,firewall_config)'
03:02:10.628 gohan.db.sql INFO [0m Executing SQL query in transaction '135f3689-546c-49ac-94cb-792d751da092': 'INSERT INTO `events` (`path`,`timestamp`,`type`,`marked_for_deletion`,`body`,`version`) VALUES (/v2.0/heat_templates/firewall_config,1494471730,create,false,"{\"handler\":\"heat_worker\",\"id\":\"firewall_config\",\"parameter_mappings\":{\"admin_password\":{\"field\":\"admin_password\"},\"admin_username\":{\"field\":\"admin_username\"},\"credentials\":{\"field\":\"credentials\",\"path\":[\"vnf_instance_id\",\"vnf_template_id\"]},\"default_gateway\":{\"field\":\"default_gateway\"},\"management_ip\":{\"field\":\"management_ip\",\"path\":[\"vnf_instance_id\"]},\"networks\":{\"field\":\"networks\"},\"other_password\":{\"field\":\"other_password\"},\"other_username\":{\"field\":\"other_username\"},\"user_password\":{\"field\":\"user_password\"},\"user_username\":{\"field\":\"user_username\"}},\"template_file\":\"heat_template_version: 2013-05-23\\ndescription: Vyatta Firewall Configuration\\nparameters:\\n  management_ip:\\n    type: string\\n  credentials:\\n    type: json\\n  default_gateway:\\n    type: string\\n    default: \\\"\\\"\\n  user_username:\\n    type: string\\n  user_password:\\n    type: string\\n    default: \\\"\\\"\\n  admin_username:\\n    type: string\\n  admin_password:\\n    type: string\\n    default: \\\"\\\"\\n  other_username:\\n    type: string\\n    default: \\\"\\\"\\n  other_password:\\n    type: string\\n    default: \\\"\\\"\\n  networks:\\n    type: json\\nresources:\\n  server:\\n    type: ESI::VNF::VyattaConfig\\n    properties:\\n      management_ip: { get_param: management_ip }\\n      credentials: { get_param: credentials }\\n      default_gateway: { get_param: default_gateway }\\n      user_username: { get_param: user_username }\\n      user_password: { get_param: user_password }\\n      admin_username: { get_param: admin_username }\\n      admin_password: { get_param: admin_password }\\n      other_username: { get_param: other_username }\\n      other_password: { get_param: other_password }\\n      networks: { get_param: networks }\\n\",\"watch\":[]}",1)'
03:02:10.629 gohan.db INFO [0m Populating resources for schema worker_data
03:02:10.629 gohan.db INFO [0m Populating resources for schema tenant
03:02:10.630 gohan.db INFO [0m Populating resources for schema edge_router
03:02:10.630 gohan.db INFO [0m Populating resources for schema er_physical_interface
03:02:10.630 gohan.db INFO [0m Populating resources for schema ha_router
03:02:10.631 gohan.db INFO [0m Populating resources for schema ha_interface
03:02:10.635 gohan.db INFO [0m Populating resources for schema internet_service
03:02:10.635 gohan.db INFO [0m Populating resources for schema vpn_service
03:02:10.636 gohan.db INFO [0m Populating resources for schema aws_service
03:02:10.636 gohan.db INFO [0m Populating resources for schema interdc_service
03:02:10.637 gohan.db INFO [0m Populating resources for schema common_function_pool
03:02:10.637 gohan.db INFO [0m Populating resources for schema nat_ip_pool
03:02:10.638 gohan.db INFO [0m Populating resources for schema common_function
03:02:10.638 gohan.db INFO [0m Populating resources for schema public_ip_pool
03:02:10.639 gohan.db INFO [0m Populating resources for schema suspended_public_ip
03:02:10.639 gohan.db INFO [0m Populating resources for schema qos_option
03:02:10.639 gohan.db INFO [0m Populating resources for schema vpn_gateway
03:02:10.640 gohan.db INFO [0m Populating resources for schema vpn_interface
03:02:10.640 gohan.db INFO [0m Populating resources for schema aws_gateway
03:02:10.641 gohan.db INFO [0m Populating resources for schema aws_interface
03:02:10.641 gohan.db INFO [0m Populating resources for schema internet_gateway
03:02:10.642 gohan.db INFO [0m Populating resources for schema common_function_gateway
03:02:10.642 gohan.db INFO [0m Populating resources for schema public_ip
03:02:10.642 gohan.db INFO [0m Populating resources for schema interdc_gateway
03:02:10.646 gohan.db INFO [0m Populating resources for schema interdc_interface
03:02:10.653 gohan.db INFO [0m Populating resources for schema gw_interface
03:02:10.653 gohan.db INFO [0m Populating resources for schema static_route
03:02:10.654 gohan.db INFO [0m Populating resources for schema vnf_template
03:02:10.654 gohan.db INFO [0m Populating resources for schema vnf_plan
03:02:10.655 gohan.db INFO [0m Populating resources for schema vnf_instance
03:02:10.657 gohan.db INFO [0m Populating resources for schema vnf_interface
03:02:10.657 gohan.db INFO [0m Populating resources for schema firewall_plan
03:02:10.657 gohan.db INFO [0m Populating resources for schema firewall
03:02:10.658 gohan.db INFO [0m Populating resources for schema firewall_interface
03:02:10.658 gohan.db INFO [0m Populating resources for schema load_balancer_plan
03:02:10.659 gohan.db INFO [0m Populating resources for schema load_balancer_conf
03:02:10.659 gohan.db INFO [0m Populating resources for schema load_balancer
03:02:10.668 gohan.db INFO [0m Populating resources for schema load_balancer_interface
03:02:10.669 gohan.db INFO [0m Populating resources for schema load_balancer_syslog_server
03:02:10.669 gohan.db INFO [0m Populating resources for schema billing_usage
03:02:10.670 gohan.db INFO [0m Populating resources for schema billing_resource
03:02:10.670 gohan.db INFO [0m Populating resources for schema monitoring
03:02:10.670 gohan.db INFO [0m Populating resources for schema resource_mapping
03:02:10.671 gohan.db INFO [0m Populating resources for schema colocation_space
03:02:10.671 gohan.db INFO [0m Populating resources for schema colocation_physical_link
03:02:10.672 gohan.db INFO [0m Populating resources for schema colocation_logical_link
03:02:10.672 gohan.db INFO [0m Populating resources for schema tenant_connection
03:02:10.673 gohan.db INFO [0m Populating resources for schema hosting_physical_link
03:02:10.673 gohan.db INFO [0m Populating resources for schema hosting_logical_link
03:02:10.685 gohan.server.core INFO [0m Importing data from ./init/load_balancer_templates.yaml ...
03:02:10.686 gohan.db INFO [0m Populating resources for schema schema
03:02:10.687 gohan.db INFO [0m Populating resources for schema policy
03:02:10.688 gohan.db INFO [0m Populating resources for schema extension
03:02:10.689 gohan.db INFO [0m Populating resources for schema event
03:02:10.690 gohan.db INFO [0m Populating resources for schema namespace
03:02:10.691 gohan.db INFO [0m Populating resources for schema location
03:02:10.691 gohan.db INFO [0m Populating resources for schema ese_device
03:02:10.694 gohan.db INFO [0m Populating resources for schema network
03:02:10.695 gohan.db INFO [0m Populating resources for schema subnet
03:02:10.696 gohan.db INFO [0m Populating resources for schema port
03:02:10.697 gohan.db INFO [0m Populating resources for schema ese_physical_port
03:02:10.697 gohan.db INFO [0m Populating resources for schema ese_logical_port
03:02:10.698 gohan.db INFO [0m Populating resources for schema local_subnet
03:02:10.711 gohan.db INFO [0m Populating resources for schema server
03:02:10.713 gohan.db INFO [0m Populating resources for schema physical_port
03:02:10.717 gohan.db INFO [0m Populating resources for schema quota
03:02:10.718 gohan.db INFO [0m Populating resources for schema reserve_address
03:02:10.720 gohan.db INFO [0m Populating resources for schema neutron_extension
03:02:10.729 gohan.db INFO [0m Populating resources for schema heat_template
03:02:10.730 gohan.db INFO [0m Creating resource load_balancer_conf
03:02:10.731 gohan.db.sql INFO [0m Executing SQL query in transaction '4555ff4d-78ef-4b4b-849e-d5849a663c0c': 'INSERT INTO `heat_templates` (`id`,`parameter_mappings`,`template_file`,`watch`,`handler`) VALUES (load_balancer_conf,{"admin_password":{"field":"admin_password"},"admin_username":{"field":"admin_username"},"credentials":{"field":"credentials","path":["load_balancer_plan_id","vnf_template_id"]},"default_gateway":{"field":"default_gateway"},"init_config":{"field":"init_config","path":["load_balancer_plan_id","vnf_template_id"]},"internet_port":{"field":"internet_port"},"license_code":{"field":"license_code","path":["load_balancer_plan_id"]},"management_gateway":{"field":"management_gateway"},"management_ip":{"field":"management_ip","path":["vnf_instance_id"]},"model":{"field":"model","path":["load_balancer_plan_id"]},"networks":{"field":"networks"},"other_password":{"field":"other_password"},"other_username":{"field":"other_username"},"server_id":{"output_key":"server_id","path":["vnf_instance_id"]},"user_password":{"field":"user_password"},"user_username":{"field":"user_username"}},heat_template_version: 2013-05-23
description: Load Balancer Configuration
parameters:
  management_ip:
    type: string
  management_gateway:
    type: string
  admin_username:
    type: string
  admin_password:
    type: string
  user_username:
    type: string
  user_password:
    type: string
  other_username:
    type: string
  other_password:
    type: string
  server_id:
    type: string
  license_code:
    type: string
  model:
    type: string
  init_config:
    type: string
  networks:
    type: string
  internet_port:
    type: string
  default_gateway:
    type: string
    default: ""
  credentials:
    type: string
resources:
  netscaler_configuration:
    type: ESI::VNF::NetscalerConfig
    properties:
      management_ip: { get_param: management_ip }
      management_gateway: { get_param: management_gateway }
      admin_username: { get_param: admin_username }
      admin_password: { get_param: admin_password }
      user_username: { get_param: user_username }
      user_password: { get_param: user_password }
      other_username: { get_param: other_username }
      other_password: { get_param: other_password }
      server_id: { get_param: server_id }
      license_code: { get_param: license_code }
      model: { get_param: model }
      init_config: { get_param: init_config }
      networks: { get_param: networks }
      internet_port: { get_param: internet_port }
      default_gateway: { get_param: default_gateway }
      credentials: { get_param: credentials }
,[],heat_worker)'
03:02:10.732 gohan.db.sql INFO [0m Executing SQL query in transaction '4555ff4d-78ef-4b4b-849e-d5849a663c0c': 'INSERT INTO `events` (`path`,`timestamp`,`type`,`marked_for_deletion`,`body`,`version`) VALUES (/v2.0/heat_templates/load_balancer_conf,1494471730,create,false,"{\"handler\":\"heat_worker\",\"id\":\"load_balancer_conf\",\"parameter_mappings\":{\"admin_password\":{\"field\":\"admin_password\"},\"admin_username\":{\"field\":\"admin_username\"},\"credentials\":{\"field\":\"credentials\",\"path\":[\"load_balancer_plan_id\",\"vnf_template_id\"]},\"default_gateway\":{\"field\":\"default_gateway\"},\"init_config\":{\"field\":\"init_config\",\"path\":[\"load_balancer_plan_id\",\"vnf_template_id\"]},\"internet_port\":{\"field\":\"internet_port\"},\"license_code\":{\"field\":\"license_code\",\"path\":[\"load_balancer_plan_id\"]},\"management_gateway\":{\"field\":\"management_gateway\"},\"management_ip\":{\"field\":\"management_ip\",\"path\":[\"vnf_instance_id\"]},\"model\":{\"field\":\"model\",\"path\":[\"load_balancer_plan_id\"]},\"networks\":{\"field\":\"networks\"},\"other_password\":{\"field\":\"other_password\"},\"other_username\":{\"field\":\"other_username\"},\"server_id\":{\"output_key\":\"server_id\",\"path\":[\"vnf_instance_id\"]},\"user_password\":{\"field\":\"user_password\"},\"user_username\":{\"field\":\"user_username\"}},\"template_file\":\"heat_template_version: 2013-05-23\\ndescription: Load Balancer Configuration\\nparameters:\\n  management_ip:\\n    type: string\\n  management_gateway:\\n    type: string\\n  admin_username:\\n    type: string\\n  admin_password:\\n    type: string\\n  user_username:\\n    type: string\\n  user_password:\\n    type: string\\n  other_username:\\n    type: string\\n  other_password:\\n    type: string\\n  server_id:\\n    type: string\\n  license_code:\\n    type: string\\n  model:\\n    type: string\\n  init_config:\\n    type: string\\n  networks:\\n    type: string\\n  internet_port:\\n    type: string\\n  default_gateway:\\n    type: string\\n    default: \\\"\\\"\\n  credentials:\\n    type: string\\nresources:\\n  netscaler_configuration:\\n    type: ESI::VNF::NetscalerConfig\\n    properties:\\n      management_ip: { get_param: management_ip }\\n      management_gateway: { get_param: management_gateway }\\n      admin_username: { get_param: admin_username }\\n      admin_password: { get_param: admin_password }\\n      user_username: { get_param: user_username }\\n      user_password: { get_param: user_password }\\n      other_username: { get_param: other_username }\\n      other_password: { get_param: other_password }\\n      server_id: { get_param: server_id }\\n      license_code: { get_param: license_code }\\n      model: { get_param: model }\\n      init_config: { get_param: init_config }\\n      networks: { get_param: networks }\\n      internet_port: { get_param: internet_port }\\n      default_gateway: { get_param: default_gateway }\\n      credentials: { get_param: credentials }\\n\",\"watch\":[]}",1)'
03:02:10.733 gohan.db INFO [0m Creating resource load_balancer_syslog_server
03:02:10.733 gohan.db.sql INFO [0m Executing SQL query in transaction '4555ff4d-78ef-4b4b-849e-d5849a663c0c': 'INSERT INTO `heat_templates` (`parameter_mappings`,`template_file`,`watch`,`handler`,`id`) VALUES ({"acl_logging":{"field":"acl_logging"},"appflow_logging":{"field":"appflow_logging"},"comment":{"field":"comment"},"credentials":{"field":"credentials","path":["load_balancer_id","load_balancer_plan_id","vnf_template_id"]},"date_format":{"field":"date_format"},"init_config":{"field":"init_config","path":["load_balancer_id","load_balancer_plan_id","vnf_template_id"]},"ip_address":{"field":"ip_address"},"log_facility":{"field":"log_facility"},"log_level":{"field":"log_level"},"management_ip":{"field":"management_ip","path":["load_balancer_id","vnf_instance_id"]},"name":{"field":"name"},"port_number":{"field":"port_number"},"priority":{"field":"priority"},"tcp_logging":{"field":"tcp_logging"},"time_zone":{"field":"time_zone"},"transport_type":{"field":"transport_type"},"user_configurable_log_messages":{"field":"user_configurable_log_messages"},"vserver_ip_address":{"field":"vserver_ip_address"}},heat_template_version: 2013-05-23
description: Syslog server
parameters:
  name:
    type: string
  ip_address:
    type: string
  port_number:
    type: number
  log_level:
    type: string
  log_facility:
    type: string
  tcp_logging:
    type: string
  acl_logging:
    type: string
  appflow_logging:
    type: string
  date_format:
    type: string
  time_zone:
    type: string
  user_configurable_log_messages:
    type: string
  transport_type:
    type: string
  priority:
    type: number
  vserver_ip_address:
    type: string
  comment:
    type: string
  management_ip:
    type: string
  credentials:
    type: string
  init_config:
    type: string
resources:
  load_balancer_syslog_server:
    type: ESI::VNF::NetscalerSyslogServer
    properties:
      name: { get_param: name }
      ip_address: { get_param: ip_address }
      port_number: { get_param: port_number }
      log_level: { get_param: log_level }
      log_facility: { get_param: log_facility }
      tcp_logging: { get_param: tcp_logging }
      acl_logging: { get_param: acl_logging }
      appflow_logging: { get_param: appflow_logging }
      date_format: { get_param: date_format }
      time_zone: { get_param: time_zone }
      user_configurable_log_messages: { get_param: user_configurable_log_messages }
      transport_type: { get_param: transport_type }
      priority: { get_param: priority }
      vserver_ip_address: { get_param: vserver_ip_address }
      comment: { get_param: comment }
      management_ip: { get_param: management_ip }
      credentials: { get_param: credentials }
      init_config: { get_param: init_config }
,[],heat_worker,load_balancer_syslog_server)'
03:02:10.734 gohan.db.sql INFO [0m Executing SQL query in transaction '4555ff4d-78ef-4b4b-849e-d5849a663c0c': 'INSERT INTO `events` (`type`,`marked_for_deletion`,`body`,`version`,`path`,`timestamp`) VALUES (create,false,"{\"handler\":\"heat_worker\",\"id\":\"load_balancer_syslog_server\",\"parameter_mappings\":{\"acl_logging\":{\"field\":\"acl_logging\"},\"appflow_logging\":{\"field\":\"appflow_logging\"},\"comment\":{\"field\":\"comment\"},\"credentials\":{\"field\":\"credentials\",\"path\":[\"load_balancer_id\",\"load_balancer_plan_id\",\"vnf_template_id\"]},\"date_format\":{\"field\":\"date_format\"},\"init_config\":{\"field\":\"init_config\",\"path\":[\"load_balancer_id\",\"load_balancer_plan_id\",\"vnf_template_id\"]},\"ip_address\":{\"field\":\"ip_address\"},\"log_facility\":{\"field\":\"log_facility\"},\"log_level\":{\"field\":\"log_level\"},\"management_ip\":{\"field\":\"management_ip\",\"path\":[\"load_balancer_id\",\"vnf_instance_id\"]},\"name\":{\"field\":\"name\"},\"port_number\":{\"field\":\"port_number\"},\"priority\":{\"field\":\"priority\"},\"tcp_logging\":{\"field\":\"tcp_logging\"},\"time_zone\":{\"field\":\"time_zone\"},\"transport_type\":{\"field\":\"transport_type\"},\"user_configurable_log_messages\":{\"field\":\"user_configurable_log_messages\"},\"vserver_ip_address\":{\"field\":\"vserver_ip_address\"}},\"template_file\":\"heat_template_version: 2013-05-23\\ndescription: Syslog server\\nparameters:\\n  name:\\n    type: string\\n  ip_address:\\n    type: string\\n  port_number:\\n    type: number\\n  log_level:\\n    type: string\\n  log_facility:\\n    type: string\\n  tcp_logging:\\n    type: string\\n  acl_logging:\\n    type: string\\n  appflow_logging:\\n    type: string\\n  date_format:\\n    type: string\\n  time_zone:\\n    type: string\\n  user_configurable_log_messages:\\n    type: string\\n  transport_type:\\n    type: string\\n  priority:\\n    type: number\\n  vserver_ip_address:\\n    type: string\\n  comment:\\n    type: string\\n  management_ip:\\n    type: string\\n  credentials:\\n    type: string\\n  init_config:\\n    type: string\\nresources:\\n  load_balancer_syslog_server:\\n    type: ESI::VNF::NetscalerSyslogServer\\n    properties:\\n      name: { get_param: name }\\n      ip_address: { get_param: ip_address }\\n      port_number: { get_param: port_number }\\n      log_level: { get_param: log_level }\\n      log_facility: { get_param: log_facility }\\n      tcp_logging: { get_param: tcp_logging }\\n      acl_logging: { get_param: acl_logging }\\n      appflow_logging: { get_param: appflow_logging }\\n      date_format: { get_param: date_format }\\n      time_zone: { get_param: time_zone }\\n      user_configurable_log_messages: { get_param: user_configurable_log_messages }\\n      transport_type: { get_param: transport_type }\\n      priority: { get_param: priority }\\n      vserver_ip_address: { get_param: vserver_ip_address }\\n      comment: { get_param: comment }\\n      management_ip: { get_param: management_ip }\\n      credentials: { get_param: credentials }\\n      init_config: { get_param: init_config }\\n\",\"watch\":[]}",1,/v2.0/heat_templates/load_balancer_syslog_server,1494471730)'
03:02:10.735 gohan.db INFO [0m Populating resources for schema worker_data
03:02:10.735 gohan.db INFO [0m Populating resources for schema tenant
03:02:10.736 gohan.db INFO [0m Populating resources for schema edge_router
03:02:10.737 gohan.db INFO [0m Populating resources for schema er_physical_interface
03:02:10.738 gohan.db INFO [0m Populating resources for schema ha_router
03:02:10.739 gohan.db INFO [0m Populating resources for schema ha_interface
03:02:10.739 gohan.db INFO [0m Populating resources for schema internet_service
03:02:10.740 gohan.db INFO [0m Populating resources for schema vpn_service
03:02:10.741 gohan.db INFO [0m Populating resources for schema aws_service
03:02:10.742 gohan.db INFO [0m Populating resources for schema interdc_service
03:02:10.742 gohan.db INFO [0m Populating resources for schema common_function_pool
03:02:10.743 gohan.db INFO [0m Populating resources for schema nat_ip_pool
03:02:10.744 gohan.db INFO [0m Populating resources for schema common_function
03:02:10.745 gohan.db INFO [0m Populating resources for schema public_ip_pool
03:02:10.746 gohan.db INFO [0m Populating resources for schema suspended_public_ip
03:02:10.748 gohan.db INFO [0m Populating resources for schema qos_option
03:02:10.750 gohan.db INFO [0m Populating resources for schema vpn_gateway
03:02:10.754 gohan.db INFO [0m Populating resources for schema vpn_interface
03:02:10.755 gohan.db INFO [0m Populating resources for schema aws_gateway
03:02:10.756 gohan.db INFO [0m Populating resources for schema aws_interface
03:02:10.756 gohan.db INFO [0m Populating resources for schema internet_gateway
03:02:10.757 gohan.db INFO [0m Populating resources for schema common_function_gateway
03:02:10.758 gohan.db INFO [0m Populating resources for schema public_ip
03:02:10.759 gohan.db INFO [0m Populating resources for schema interdc_gateway
03:02:10.759 gohan.db INFO [0m Populating resources for schema interdc_interface
03:02:10.760 gohan.db INFO [0m Populating resources for schema gw_interface
03:02:10.761 gohan.db INFO [0m Populating resources for schema static_route
03:02:10.762 gohan.db INFO [0m Populating resources for schema vnf_template
03:02:10.762 gohan.db INFO [0m Populating resources for schema vnf_plan
03:02:10.763 gohan.db INFO [0m Populating resources for schema vnf_instance
03:02:10.764 gohan.db INFO [0m Populating resources for schema vnf_interface
03:02:10.765 gohan.db INFO [0m Populating resources for schema firewall_plan
03:02:10.765 gohan.db INFO [0m Populating resources for schema firewall
03:02:10.766 gohan.db INFO [0m Populating resources for schema firewall_interface
03:02:10.767 gohan.db INFO [0m Populating resources for schema load_balancer_plan
03:02:10.768 gohan.db INFO [0m Populating resources for schema load_balancer_conf
03:02:10.768 gohan.db INFO [0m Populating resources for schema load_balancer
03:02:10.769 gohan.db INFO [0m Populating resources for schema load_balancer_interface
03:02:10.770 gohan.db INFO [0m Populating resources for schema load_balancer_syslog_server
03:02:10.771 gohan.db INFO [0m Populating resources for schema billing_usage
03:02:10.771 gohan.db INFO [0m Populating resources for schema billing_resource
03:02:10.772 gohan.db INFO [0m Populating resources for schema monitoring
03:02:10.774 gohan.db INFO [0m Populating resources for schema resource_mapping
03:02:10.775 gohan.db INFO [0m Populating resources for schema colocation_space
03:02:10.781 gohan.db INFO [0m Populating resources for schema colocation_physical_link
03:02:10.783 gohan.db INFO [0m Populating resources for schema colocation_logical_link
03:02:10.785 gohan.db INFO [0m Populating resources for schema tenant_connection
03:02:10.785 gohan.db INFO [0m Populating resources for schema hosting_physical_link
03:02:10.786 gohan.db INFO [0m Populating resources for schema hosting_logical_link
03:02:10.800 gohan.server.core INFO [0m Keystone backend server configured
03:02:18.593 gohan.server.core INFO [0m Loading extensions for schema 'event'
03:02:19.474 gohan.server.core INFO [0m Loading extensions for schema 'network'
03:02:20.326 gohan.server.core INFO [0m Loading extensions for schema 'local_subnet'
03:02:21.286 gohan.server.core INFO [0m Loading extensions for schema 'er_physical_interface'
03:02:22.136 gohan.server.core INFO [0m Loading extensions for schema 'suspended_public_ip'
03:02:22.907 gohan.server.core INFO [0m Loading extensions for schema 'reserve_address'
03:02:23.725 gohan.server.core INFO [0m Loading extensions for schema 'vpn_service'
03:02:24.479 gohan.server.core INFO [0m Loading extensions for schema 'vpn_interface'
03:02:25.227 gohan.server.core INFO [0m Loading extensions for schema 'location'
03:02:26.049 gohan.server.core INFO [0m Loading extensions for schema 'tenant'
03:02:26.768 gohan.server.core INFO [0m Loading extensions for schema 'vnf_interface'
03:02:27.537 gohan.server.core INFO [0m Loading extensions for schema 'heat_template'
03:02:28.408 gohan.server.core INFO [0m Loading extensions for schema 'aws_service'
03:02:29.242 gohan.server.core INFO [0m Loading extensions for schema 'interdc_interface'
03:02:30.122 gohan.server.core INFO [0m Loading extensions for schema 'hosting_physical_link'
03:02:31.045 gohan.server.core INFO [0m Loading extensions for schema 'common_function_gateway'
03:02:31.776 gohan.server.core INFO [0m Loading extensions for schema 'load_balancer_plan'
03:02:32.451 gohan.server.core INFO [0m Loading extensions for schema 'load_balancer_conf'
03:02:33.193 gohan.server.core INFO [0m Loading extensions for schema 'load_balancer_syslog_server'
03:02:33.954 gohan.server.core INFO [0m Loading extensions for schema 'colocation_space'
03:02:34.681 gohan.server.core INFO [0m Loading extensions for schema 'aws_gateway'
03:02:35.407 gohan.server.core INFO [0m Loading extensions for schema 'ese_device'
03:02:36.125 gohan.server.core INFO [0m Loading extensions for schema 'subnet'
03:02:36.834 gohan.server.core INFO [0m Loading extensions for schema 'aws_interface'
03:02:37.544 gohan.server.core INFO [0m Loading extensions for schema 'vnf_plan'
03:02:38.280 gohan.server.core INFO [0m Loading extensions for schema 'firewall_interface'
03:02:38.992 gohan.server.core INFO [0m Loading extensions for schema 'colocation_logical_link'
03:02:40.056 gohan.server.core INFO [0m Loading extensions for schema 'schema'
03:02:40.847 gohan.server.core INFO [0m Loading extensions for schema 'edge_router'
03:02:41.588 gohan.server.core INFO [0m Loading extensions for schema 'public_ip_pool'
03:02:42.629 gohan.server.core INFO [0m Loading extensions for schema 'vnf_template'
03:02:43.265 gohan.server.core INFO [0m Loading extensions for schema 'extension'
03:02:43.965 gohan.server.core INFO [0m Loading extensions for schema 'quota'
03:02:44.676 gohan.server.core INFO [0m Loading extensions for schema 'ha_router'
03:02:45.386 gohan.server.core INFO [0m Loading extensions for schema 'internet_service'
03:02:46.504 gohan.server.core INFO [0m Loading extensions for schema 'nat_ip_pool'
03:02:47.097 gohan.server.core INFO [0m Loading extensions for schema 'billing_usage'
03:02:47.848 gohan.server.core INFO [0m Loading extensions for schema 'colocation_physical_link'
03:02:48.582 gohan.server.core INFO [0m Loading extensions for schema 'ese_physical_port'
03:02:49.317 gohan.server.core INFO [0m Loading extensions for schema 'worker_data'
03:02:50.055 gohan.server.core INFO [0m Loading extensions for schema 'static_route'
03:02:51.054 gohan.server.core INFO [0m Loading extensions for schema 'neutron_extension'
03:02:51.630 gohan.server.core INFO [0m Loading extensions for schema 'resource_mapping'
03:02:52.396 gohan.server.core INFO [0m Loading extensions for schema 'policy'
03:02:53.145 gohan.server.core INFO [0m Loading extensions for schema 'namespace'
03:02:53.963 gohan.server.core INFO [0m Loading extensions for schema 'qos_option'
03:02:54.715 gohan.server.core INFO [0m Loading extensions for schema 'vpn_gateway'
03:02:55.462 gohan.server.core INFO [0m Loading extensions for schema 'vnf_instance'
03:02:56.659 gohan.server.core INFO [0m Loading extensions for schema 'firewall'
03:02:57.245 gohan.server.core INFO [0m Loading extensions for schema 'port'
03:02:57.973 gohan.server.core INFO [0m Loading extensions for schema 'physical_port'
03:02:58.871 gohan.server.core INFO [0m Loading extensions for schema 'interdc_service'
03:02:59.708 gohan.server.core INFO [0m Loading extensions for schema 'internet_gateway'
03:03:00.565 gohan.server.core INFO [0m Loading extensions for schema 'public_ip'
03:03:01.432 gohan.server.core INFO [0m Loading extensions for schema 'load_balancer'
03:03:02.354 gohan.server.core INFO [0m Loading extensions for schema 'billing_resource'
03:03:03.581 gohan.server.core INFO [0m Loading extensions for schema 'ese_logical_port'
03:03:03.965 gohan.server.core INFO [0m Loading extensions for schema 'ha_interface'
03:03:04.686 gohan.server.core INFO [0m Loading extensions for schema 'monitoring'
03:03:05.335 gohan.server.core INFO [0m Loading extensions for schema 'tenant_connection'
03:03:06.030 gohan.server.core INFO [0m Loading extensions for schema 'server'
03:03:06.858 gohan.server.core INFO [0m Loading extensions for schema 'common_function_pool'
03:03:07.664 gohan.server.core INFO [0m Loading extensions for schema 'common_function'
03:03:08.477 gohan.server.core INFO [0m Loading extensions for schema 'interdc_gateway'
03:03:09.326 gohan.server.core INFO [0m Loading extensions for schema 'gw_interface'
03:03:10.780 gohan.server.core INFO [0m Loading extensions for schema 'firewall_plan'
03:03:11.338 gohan.server.core INFO [0m Loading extensions for schema 'load_balancer_interface'
03:03:12.202 gohan.server.core INFO [0m Loading extensions for schema 'hosting_logical_link'
03:03:12.889 gohan.server INFO [0m Gohan timeout value: 45s
03:03:12.889 gohan.server INFO [0m etcd servers: [http://etcd-server:2379]
03:03:12.889 gohan.server INFO [0m Static file serving from /etc/gohan/
[36m03:03:12.890 gohan.server DEBUG [0m [Initializing Routes]
[36m03:03:12.890 gohan.server DEBUG [0m [Plural Path] /v2.0/common_function_gateways
[36m03:03:12.890 gohan.server DEBUG [0m [Singular Path] /v2.0/common_function_gateways/:id
[36m03:03:12.890 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/common_function_gateways
[36m03:03:12.890 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/common_function_gateways/:id
[36m03:03:12.890 gohan.server DEBUG [0m [Plural Path] /v2.0/load_balancer_plans
[36m03:03:12.890 gohan.server DEBUG [0m [Singular Path] /v2.0/load_balancer_plans/:id
[36m03:03:12.890 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/load_balancer_plans
[36m03:03:12.890 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/load_balancer_plans/:id
[36m03:03:12.891 gohan.server DEBUG [0m [Plural Path] /v2.0/load_balancer_confs
[36m03:03:12.891 gohan.server DEBUG [0m [Singular Path] /v2.0/load_balancer_confs/:id
[36m03:03:12.891 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/load_balancer_confs
[36m03:03:12.891 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/load_balancer_confs/:id
[36m03:03:12.891 gohan.server DEBUG [0m [Plural Path] /v2.0/load_balancer_syslog_servers
[36m03:03:12.891 gohan.server DEBUG [0m [Singular Path] /v2.0/load_balancer_syslog_servers/:id
[36m03:03:12.891 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/load_balancers/:load_balancer/load_balancer_syslog_servers
[36m03:03:12.892 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/load_balancers/:load_balancer/load_balancer_syslog_servers/:id
[36m03:03:12.892 gohan.server DEBUG [0m [Plural Path] /v2.0/colocation_spaces
[36m03:03:12.892 gohan.server DEBUG [0m [Singular Path] /v2.0/colocation_spaces/:id
[36m03:03:12.892 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/colocation_spaces
[36m03:03:12.892 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/colocation_spaces/:id
[36m03:03:12.893 gohan.server DEBUG [0m [Plural Path] /v2.0/aws_gateways
[36m03:03:12.893 gohan.server DEBUG [0m [Singular Path] /v2.0/aws_gateways/:id
[36m03:03:12.893 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/aws_gateways
[36m03:03:12.893 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/aws_gateways/:id
[36m03:03:12.893 gohan.server DEBUG [0m [Plural Path] /v2.0/ese_devices
[36m03:03:12.893 gohan.server DEBUG [0m [Singular Path] /v2.0/ese_devices/:id
[36m03:03:12.893 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/ese_devices
[36m03:03:12.893 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/ese_devices/:id
[36m03:03:12.894 gohan.server DEBUG [0m [Plural Path] /v2.0/subnets
[36m03:03:12.894 gohan.server DEBUG [0m [Singular Path] /v2.0/subnets/:id
[36m03:03:12.894 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/subnets
[36m03:03:12.894 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/subnets/:id
[36m03:03:12.894 gohan.server DEBUG [0m [Plural Path] /v2.0/aws_interfaces
[36m03:03:12.895 gohan.server DEBUG [0m [Singular Path] /v2.0/aws_interfaces/:id
[36m03:03:12.895 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/aws_interfaces
[36m03:03:12.895 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/aws_interfaces/:id
[36m03:03:12.895 gohan.server DEBUG [0m [Plural Path] /v2.0/vnf_plans
[36m03:03:12.895 gohan.server DEBUG [0m [Singular Path] /v2.0/vnf_plans/:id
[36m03:03:12.895 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/vnf_plans
[36m03:03:12.895 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/vnf_plans/:id
[36m03:03:12.896 gohan.server DEBUG [0m [Plural Path] /v2.0/firewall_interfaces
[36m03:03:12.896 gohan.server DEBUG [0m [Singular Path] /v2.0/firewall_interfaces/:id
[36m03:03:12.896 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/firewalls/:firewall/firewall_interfaces
[36m03:03:12.896 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/firewalls/:firewall/firewall_interfaces/:id
[36m03:03:12.896 gohan.server DEBUG [0m [Plural Path] /v2.0/colocation_logical_links
[36m03:03:12.896 gohan.server DEBUG [0m [Singular Path] /v2.0/colocation_logical_links/:id
[36m03:03:12.896 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/colocation_logical_links
[36m03:03:12.896 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/colocation_logical_links/:id
[36m03:03:12.897 gohan.server DEBUG [0m [Plural Path] /gohan/v0.1/schemas
[36m03:03:12.897 gohan.server DEBUG [0m [Singular Path] /gohan/v0.1/schemas/:id
[36m03:03:12.897 gohan.server DEBUG [0m [Plural Path With Parents] /gohan/v0.1/schemas
[36m03:03:12.897 gohan.server DEBUG [0m [Singular Path With Parents] /gohan/v0.1/schemas/:id
[36m03:03:12.897 gohan.server DEBUG [0m [Plural Path] /v2.0/edge_routers
[36m03:03:12.897 gohan.server DEBUG [0m [Singular Path] /v2.0/edge_routers/:id
[36m03:03:12.897 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/edge_routers
[36m03:03:12.897 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/edge_routers/:id
[36m03:03:12.898 gohan.server DEBUG [0m [Plural Path] /v2.0/public_ip_pools
[36m03:03:12.898 gohan.server DEBUG [0m [Singular Path] /v2.0/public_ip_pools/:id
[36m03:03:12.898 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/public_ip_pools
[36m03:03:12.898 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/public_ip_pools/:id
[36m03:03:12.898 gohan.server DEBUG [0m [Plural Path] /v2.0/vnf_templates
[36m03:03:12.898 gohan.server DEBUG [0m [Singular Path] /v2.0/vnf_templates/:id
[36m03:03:12.899 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/vnf_templates
[36m03:03:12.899 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/vnf_templates/:id
[36m03:03:12.899 gohan.server DEBUG [0m [Plural Path] /gohan/v0.1/extensions
[36m03:03:12.899 gohan.server DEBUG [0m [Singular Path] /gohan/v0.1/extensions/:id
[36m03:03:12.899 gohan.server DEBUG [0m [Plural Path With Parents] /gohan/v0.1/extensions
[36m03:03:12.899 gohan.server DEBUG [0m [Singular Path With Parents] /gohan/v0.1/extensions/:id
[36m03:03:12.900 gohan.server DEBUG [0m [Plural Path] /v2.0/quotas
[36m03:03:12.900 gohan.server DEBUG [0m [Singular Path] /v2.0/quotas/:id
[36m03:03:12.900 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/quotas
[36m03:03:12.900 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/quotas/:id
[36m03:03:12.900 gohan.server DEBUG [0m [Plural Path] /v2.0/ha_routers
[36m03:03:12.900 gohan.server DEBUG [0m [Singular Path] /v2.0/ha_routers/:id
[36m03:03:12.900 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/ha_routers
[36m03:03:12.900 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/ha_routers/:id
[36m03:03:12.901 gohan.server DEBUG [0m [Plural Path] /v2.0/internet_services
[36m03:03:12.901 gohan.server DEBUG [0m [Singular Path] /v2.0/internet_services/:id
[36m03:03:12.901 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/internet_services
[36m03:03:12.901 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/internet_services/:id
[36m03:03:12.901 gohan.server DEBUG [0m [Plural Path] /v2.0/nat_ip_pools
[36m03:03:12.901 gohan.server DEBUG [0m [Singular Path] /v2.0/nat_ip_pools/:id
[36m03:03:12.901 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/nat_ip_pools
[36m03:03:12.901 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/nat_ip_pools/:id
[36m03:03:12.902 gohan.server DEBUG [0m [Plural Path] /common/v1.0/usage
[36m03:03:12.902 gohan.server DEBUG [0m [Singular Path] /common/v1.0/usage/:id
[36m03:03:12.902 gohan.server DEBUG [0m [Plural Path With Parents] /common/v1.0/tenants/:tenant/usage
[36m03:03:12.902 gohan.server DEBUG [0m [Singular Path With Parents] /common/v1.0/tenants/:tenant/usage/:id
[36m03:03:12.902 gohan.server DEBUG [0m [Plural Path] /v2.0/colocation_physical_links
[36m03:03:12.902 gohan.server DEBUG [0m [Singular Path] /v2.0/colocation_physical_links/:id
[36m03:03:12.902 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/colocation_physical_links
[36m03:03:12.902 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/colocation_physical_links/:id
[36m03:03:12.903 gohan.server DEBUG [0m [Plural Path] /v2.0/ese_physical_ports
[36m03:03:12.903 gohan.server DEBUG [0m [Singular Path] /v2.0/ese_physical_ports/:id
[36m03:03:12.903 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/ese_devices/:ese_device/ese_physical_ports
[36m03:03:12.903 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/ese_devices/:ese_device/ese_physical_ports/:id
[36m03:03:12.903 gohan.server DEBUG [0m [Plural Path] /v2.0/worker_datas
[36m03:03:12.904 gohan.server DEBUG [0m [Singular Path] /v2.0/worker_datas/:id
[36m03:03:12.904 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/worker_datas
[36m03:03:12.904 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/worker_datas/:id
[36m03:03:12.904 gohan.server DEBUG [0m [Plural Path] /v2.0/static_routes
[36m03:03:12.904 gohan.server DEBUG [0m [Singular Path] /v2.0/static_routes/:id
[36m03:03:12.904 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/static_routes
[36m03:03:12.904 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/static_routes/:id
[36m03:03:12.905 gohan.server DEBUG [0m [Plural Path] /v2.0/extensions
[36m03:03:12.905 gohan.server DEBUG [0m [Singular Path] /v2.0/extensions/:id
[36m03:03:12.905 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/extensions
[36m03:03:12.905 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/extensions/:id
[36m03:03:12.905 gohan.server DEBUG [0m [Plural Path] /v1.0/resource_mappings
[36m03:03:12.905 gohan.server DEBUG [0m [Singular Path] /v1.0/resource_mappings/:id
[36m03:03:12.905 gohan.server DEBUG [0m [Plural Path With Parents] /v1.0/resource_mappings
[36m03:03:12.905 gohan.server DEBUG [0m [Singular Path With Parents] /v1.0/resource_mappings/:id
[36m03:03:12.906 gohan.server DEBUG [0m [Plural Path] /gohan/v0.1/policies
[36m03:03:12.906 gohan.server DEBUG [0m [Singular Path] /gohan/v0.1/policies/:id
[36m03:03:12.906 gohan.server DEBUG [0m [Plural Path With Parents] /gohan/v0.1/policies
[36m03:03:12.906 gohan.server DEBUG [0m [Singular Path With Parents] /gohan/v0.1/policies/:id
[36m03:03:12.906 gohan.server DEBUG [0m [Plural Path] /gohan/v0.1/namespaces
[36m03:03:12.906 gohan.server DEBUG [0m [Singular Path] /gohan/v0.1/namespaces/:id
[36m03:03:12.906 gohan.server DEBUG [0m [Plural Path With Parents] /gohan/v0.1/namespaces
[36m03:03:12.906 gohan.server DEBUG [0m [Singular Path With Parents] /gohan/v0.1/namespaces/:id
[36m03:03:12.907 gohan.server DEBUG [0m [Plural Path] /v2.0/qos_options
[36m03:03:12.907 gohan.server DEBUG [0m [Singular Path] /v2.0/qos_options/:id
[36m03:03:12.907 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/qos_options
[36m03:03:12.907 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/qos_options/:id
[36m03:03:12.907 gohan.server DEBUG [0m [Plural Path] /v2.0/vpn_gateways
[36m03:03:12.907 gohan.server DEBUG [0m [Singular Path] /v2.0/vpn_gateways/:id
[36m03:03:12.907 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/vpn_gateways
[36m03:03:12.907 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/vpn_gateways/:id
[36m03:03:12.908 gohan.server DEBUG [0m [Plural Path] /v2.0/vnf_instances
[36m03:03:12.908 gohan.server DEBUG [0m [Singular Path] /v2.0/vnf_instances/:id
[36m03:03:12.908 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/vnf_instances
[36m03:03:12.908 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/vnf_instances/:id
[36m03:03:12.908 gohan.server DEBUG [0m [Plural Path] /v2.0/firewalls
[36m03:03:12.908 gohan.server DEBUG [0m [Singular Path] /v2.0/firewalls/:id
[36m03:03:12.908 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/firewalls
[36m03:03:12.908 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/firewalls/:id
[36m03:03:12.909 gohan.server DEBUG [0m [Plural Path] /v2.0/ports
[36m03:03:12.909 gohan.server DEBUG [0m [Singular Path] /v2.0/ports/:id
[36m03:03:12.909 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/ports
[36m03:03:12.909 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/ports/:id
[36m03:03:12.909 gohan.server DEBUG [0m [Plural Path] /v2.0/physical_ports
[36m03:03:12.909 gohan.server DEBUG [0m [Singular Path] /v2.0/physical_ports/:id
[36m03:03:12.909 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/physical_ports
[36m03:03:12.909 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/physical_ports/:id
[36m03:03:12.910 gohan.server DEBUG [0m [Plural Path] /v2.0/interdc_services
[36m03:03:12.910 gohan.server DEBUG [0m [Singular Path] /v2.0/interdc_services/:id
[36m03:03:12.910 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/interdc_services
[36m03:03:12.910 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/interdc_services/:id
[36m03:03:12.910 gohan.server DEBUG [0m [Plural Path] /v2.0/internet_gateways
[36m03:03:12.910 gohan.server DEBUG [0m [Singular Path] /v2.0/internet_gateways/:id
[36m03:03:12.910 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/internet_gateways
[36m03:03:12.910 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/internet_gateways/:id
[36m03:03:12.911 gohan.server DEBUG [0m [Plural Path] /v2.0/public_ips
[36m03:03:12.911 gohan.server DEBUG [0m [Singular Path] /v2.0/public_ips/:id
[36m03:03:12.911 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/public_ips
[36m03:03:12.911 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/public_ips/:id
[36m03:03:12.911 gohan.server DEBUG [0m [Plural Path] /v2.0/load_balancers
[36m03:03:12.911 gohan.server DEBUG [0m [Singular Path] /v2.0/load_balancers/:id
[36m03:03:12.911 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/load_balancers
[36m03:03:12.911 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/load_balancers/:id
[36m03:03:12.912 gohan.server DEBUG [0m [Plural Path] /v2.0/billing_resources
[36m03:03:12.912 gohan.server DEBUG [0m [Singular Path] /v2.0/billing_resources/:id
[36m03:03:12.912 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/billing_resources
[36m03:03:12.912 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/billing_resources/:id
[36m03:03:12.913 gohan.server DEBUG [0m [Plural Path] /v2.0/ese_logical_ports
[36m03:03:12.913 gohan.server DEBUG [0m [Singular Path] /v2.0/ese_logical_ports/:id
[36m03:03:12.913 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/ese_devices/:ese_device/ese_physical_ports/:ese_physical_port/ese_logical_ports
[36m03:03:12.913 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/ese_devices/:ese_device/ese_physical_ports/:ese_physical_port/ese_logical_ports/:id
[36m03:03:12.913 gohan.server DEBUG [0m [Plural Path] /v2.0/ha_interfaces
[36m03:03:12.913 gohan.server DEBUG [0m [Singular Path] /v2.0/ha_interfaces/:id
[36m03:03:12.913 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/ha_interfaces
[36m03:03:12.913 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/ha_interfaces/:id
[36m03:03:12.914 gohan.server DEBUG [0m [Plural Path] /v1.0/monitoring
[36m03:03:12.914 gohan.server DEBUG [0m [Singular Path] /v1.0/monitoring/:id
[36m03:03:12.914 gohan.server DEBUG [0m [Plural Path With Parents] /v1.0/monitoring
[36m03:03:12.914 gohan.server DEBUG [0m [Singular Path With Parents] /v1.0/monitoring/:id
[36m03:03:12.914 gohan.server DEBUG [0m [Plural Path] /v2.0/tenant_connections
[36m03:03:12.914 gohan.server DEBUG [0m [Singular Path] /v2.0/tenant_connections/:id
[36m03:03:12.914 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/tenant_connections
[36m03:03:12.914 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/tenant_connections/:id
[36m03:03:12.915 gohan.server DEBUG [0m [Plural Path] /v2.0/servers
[36m03:03:12.915 gohan.server DEBUG [0m [Singular Path] /v2.0/servers/:id
[36m03:03:12.915 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/servers
[36m03:03:12.915 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/servers/:id
[36m03:03:12.915 gohan.server DEBUG [0m [Plural Path] /v2.0/common_function_pools
[36m03:03:12.915 gohan.server DEBUG [0m [Singular Path] /v2.0/common_function_pools/:id
[36m03:03:12.915 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/common_function_pools
[36m03:03:12.915 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/common_function_pools/:id
[36m03:03:12.916 gohan.server DEBUG [0m [Plural Path] /v2.0/common_functions
[36m03:03:12.916 gohan.server DEBUG [0m [Singular Path] /v2.0/common_functions/:id
[36m03:03:12.916 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/common_functions
[36m03:03:12.916 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/common_functions/:id
[36m03:03:12.917 gohan.server DEBUG [0m [Plural Path] /v2.0/interdc_gateways
[36m03:03:12.917 gohan.server DEBUG [0m [Singular Path] /v2.0/interdc_gateways/:id
[36m03:03:12.917 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/interdc_gateways
[36m03:03:12.917 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/interdc_gateways/:id
[36m03:03:12.917 gohan.server DEBUG [0m [Plural Path] /v2.0/gw_interfaces
[36m03:03:12.918 gohan.server DEBUG [0m [Singular Path] /v2.0/gw_interfaces/:id
[36m03:03:12.918 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/gw_interfaces
[36m03:03:12.918 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/gw_interfaces/:id
[36m03:03:12.918 gohan.server DEBUG [0m [Plural Path] /v2.0/firewall_plans
[36m03:03:12.918 gohan.server DEBUG [0m [Singular Path] /v2.0/firewall_plans/:id
[36m03:03:12.918 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/firewall_plans
[36m03:03:12.918 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/firewall_plans/:id
[36m03:03:12.919 gohan.server DEBUG [0m [Plural Path] /v2.0/load_balancer_interfaces
[36m03:03:12.919 gohan.server DEBUG [0m [Singular Path] /v2.0/load_balancer_interfaces/:id
[36m03:03:12.919 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/load_balancers/:load_balancer/load_balancer_interfaces
[36m03:03:12.919 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/load_balancers/:load_balancer/load_balancer_interfaces/:id
[36m03:03:12.919 gohan.server DEBUG [0m [Plural Path] /v2.0/hosting_logical_links
[36m03:03:12.919 gohan.server DEBUG [0m [Singular Path] /v2.0/hosting_logical_links/:id
[36m03:03:12.919 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/hosting_logical_links
[36m03:03:12.919 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/hosting_logical_links/:id
[36m03:03:12.920 gohan.server DEBUG [0m [Plural Path] /gohan/v0.1/events
[36m03:03:12.920 gohan.server DEBUG [0m [Singular Path] /gohan/v0.1/events/:id
[36m03:03:12.920 gohan.server DEBUG [0m [Plural Path With Parents] /gohan/v0.1/events
[36m03:03:12.920 gohan.server DEBUG [0m [Singular Path With Parents] /gohan/v0.1/events/:id
[36m03:03:12.920 gohan.server DEBUG [0m [Plural Path] /v2.0/networks
[36m03:03:12.920 gohan.server DEBUG [0m [Singular Path] /v2.0/networks/:id
[36m03:03:12.920 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/networks
[36m03:03:12.920 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/networks/:id
[36m03:03:12.921 gohan.server DEBUG [0m [Plural Path] /v2.0/local_subnets
[36m03:03:12.921 gohan.server DEBUG [0m [Singular Path] /v2.0/local_subnets/:id
[36m03:03:12.921 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/ese_devices/:ese_device/ese_physical_ports/:ese_physical_port/ese_logical_ports/:ese_logical_port/local_subnets
[36m03:03:12.921 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/ese_devices/:ese_device/ese_physical_ports/:ese_physical_port/ese_logical_ports/:ese_logical_port/local_subnets/:id
[36m03:03:12.922 gohan.server DEBUG [0m [Plural Path] /v2.0/er_physical_interfaces
[36m03:03:12.922 gohan.server DEBUG [0m [Singular Path] /v2.0/er_physical_interfaces/:id
[36m03:03:12.922 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/er_physical_interfaces
[36m03:03:12.922 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/er_physical_interfaces/:id
[36m03:03:12.922 gohan.server DEBUG [0m [Plural Path] /v2.0/suspended_public_ips
[36m03:03:12.922 gohan.server DEBUG [0m [Singular Path] /v2.0/suspended_public_ips/:id
[36m03:03:12.922 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/suspended_public_ips
[36m03:03:12.922 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/suspended_public_ips/:id
[36m03:03:12.923 gohan.server DEBUG [0m [Plural Path] /v2.0/reserve_addresses
[36m03:03:12.923 gohan.server DEBUG [0m [Singular Path] /v2.0/reserve_addresses/:id
[36m03:03:12.923 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/reserve_addresses
[36m03:03:12.923 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/reserve_addresses/:id
[36m03:03:12.923 gohan.server DEBUG [0m [Plural Path] /v2.0/vpn_services
[36m03:03:12.923 gohan.server DEBUG [0m [Singular Path] /v2.0/vpn_services/:id
[36m03:03:12.923 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/vpn_services
[36m03:03:12.923 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/vpn_services/:id
[36m03:03:12.924 gohan.server DEBUG [0m [Plural Path] /v2.0/vpn_interfaces
[36m03:03:12.924 gohan.server DEBUG [0m [Singular Path] /v2.0/vpn_interfaces/:id
[36m03:03:12.924 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/vpn_interfaces
[36m03:03:12.924 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/vpn_interfaces/:id
[36m03:03:12.924 gohan.server DEBUG [0m [Plural Path] /v2.0/locations
[36m03:03:12.924 gohan.server DEBUG [0m [Singular Path] /v2.0/locations/:id
[36m03:03:12.924 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/locations
[36m03:03:12.924 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/locations/:id
[36m03:03:12.925 gohan.server DEBUG [0m [Plural Path] /common/v1.0/tenants
[36m03:03:12.925 gohan.server DEBUG [0m [Singular Path] /common/v1.0/tenants/:id
[36m03:03:12.925 gohan.server DEBUG [0m [Plural Path With Parents] /common/v1.0/tenants
[36m03:03:12.925 gohan.server DEBUG [0m [Singular Path With Parents] /common/v1.0/tenants/:id
[36m03:03:12.925 gohan.server DEBUG [0m [Plural Path] /v2.0/vnf_interfaces
[36m03:03:12.925 gohan.server DEBUG [0m [Singular Path] /v2.0/vnf_interfaces/:id
[36m03:03:12.925 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/vnf_instances/:vnf_instance/vnf_interfaces
[36m03:03:12.925 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/vnf_instances/:vnf_instance/vnf_interfaces/:id
[36m03:03:12.926 gohan.server DEBUG [0m [Plural Path] /v2.0/heat_templates
[36m03:03:12.926 gohan.server DEBUG [0m [Singular Path] /v2.0/heat_templates/:id
[36m03:03:12.926 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/heat_templates
[36m03:03:12.926 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/heat_templates/:id
[36m03:03:12.926 gohan.server DEBUG [0m [Plural Path] /v2.0/aws_services
[36m03:03:12.926 gohan.server DEBUG [0m [Singular Path] /v2.0/aws_services/:id
[36m03:03:12.927 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/aws_services
[36m03:03:12.927 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/aws_services/:id
[36m03:03:12.927 gohan.server DEBUG [0m [Plural Path] /v2.0/interdc_interfaces
[36m03:03:12.927 gohan.server DEBUG [0m [Singular Path] /v2.0/interdc_interfaces/:id
[36m03:03:12.927 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/interdc_interfaces
[36m03:03:12.927 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/interdc_interfaces/:id
[36m03:03:12.928 gohan.server DEBUG [0m [Plural Path] /v2.0/hosting_physical_links
[36m03:03:12.928 gohan.server DEBUG [0m [Singular Path] /v2.0/hosting_physical_links/:id
[36m03:03:12.928 gohan.server DEBUG [0m [Plural Path With Parents] /v2.0/hosting_physical_links
[36m03:03:12.928 gohan.server DEBUG [0m [Singular Path With Parents] /v2.0/hosting_physical_links/:id
03:03:12.931 gohan.server INFO [0m Gohan no jikan desuyo (It's time for dinner!) 
03:03:12.931 gohan.server INFO [0m Starting Gohan Server...
[36m03:03:12.933 gohan.server DEBUG [0m State Watcher starts watch
03:03:12.933 gohan.server INFO [0m Started CRON process
[31m03:03:12.936 gohan.sync.etcd ERROR [0m watch error: 100: Key not found (/state) [8]
[31m03:03:12.936 gohan.server ERROR [0m sync watch error: 100: Key not found (/state) [8]
03:03:12.937 gohan.sync INFO [0m Locked gohan/cluster/sync with index 0
[36m03:03:12.945 gohan.server DEBUG [0m Monitoring Watcher starts watch
[36m03:03:12.946 gohan.server.sync DEBUG [0m Processing event 1 - create
03:03:12.946 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/network
[31m03:03:12.947 gohan.sync.etcd ERROR [0m watch error: 100: Key not found (/monitoring) [9]
[31m03:03:12.947 gohan.server ERROR [0m sync watch error: 100: Key not found (/monitoring) [9]
[36m03:03:12.953 gohan.server.sync DEBUG [0m Deleting event 1
03:03:12.954 gohan.db.sql INFO [0m Executing SQL query in transaction '1050a01a-7135-4963-9755-d21b586f00b0': 'DELETE FROM `events` WHERE id = 1'
[36m03:03:12.954 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:12.972 gohan.server.sync DEBUG [0m Processing event 2 - create
03:03:12.973 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/subnet
[36m03:03:12.977 gohan.server.sync DEBUG [0m Deleting event 2
03:03:12.978 gohan.db.sql INFO [0m Executing SQL query in transaction '4fb4fef8-9811-4483-83a8-dd5f7574195c': 'DELETE FROM `events` WHERE id = 2'
[36m03:03:12.978 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:12.990 gohan.server.sync DEBUG [0m Processing event 3 - create
03:03:12.990 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/port
[36m03:03:12.995 gohan.server.sync DEBUG [0m Deleting event 3
03:03:12.996 gohan.db.sql INFO [0m Executing SQL query in transaction 'e2f7756d-f74f-4c5a-9868-ff255ad548c0': 'DELETE FROM `events` WHERE id = 3'
[36m03:03:12.997 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.011 gohan.server.sync DEBUG [0m Processing event 4 - create
03:03:13.011 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/ese_physical_port_existing
[36m03:03:13.014 gohan.server.sync DEBUG [0m Deleting event 4
03:03:13.015 gohan.db.sql INFO [0m Executing SQL query in transaction 'a9236a39-25ae-435b-9618-d1d74baa10a7': 'DELETE FROM `events` WHERE id = 4'
[36m03:03:13.016 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.029 gohan.server.sync DEBUG [0m Processing event 5 - create
03:03:13.029 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/ese_physical_port_new
[36m03:03:13.032 gohan.server.sync DEBUG [0m Deleting event 5
03:03:13.033 gohan.db.sql INFO [0m Executing SQL query in transaction '476892a4-8013-4df8-b505-7dddbe69f549': 'DELETE FROM `events` WHERE id = 5'
[36m03:03:13.034 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.049 gohan.server.sync DEBUG [0m Processing event 6 - create
03:03:13.049 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/ese_logical_port
[36m03:03:13.050 gohan.server.sync DEBUG [0m Deleting event 6
03:03:13.053 gohan.db.sql INFO [0m Executing SQL query in transaction '90cf8007-a0a8-47e7-bd1c-d86dbed4539e': 'DELETE FROM `events` WHERE id = 6'
[36m03:03:13.054 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.071 gohan.server.sync DEBUG [0m Processing event 7 - create
03:03:13.071 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/local_subnet
[36m03:03:13.072 gohan.server.sync DEBUG [0m Deleting event 7
03:03:13.074 gohan.db.sql INFO [0m Executing SQL query in transaction '45615ff7-77f2-486e-94b5-e847aaed63a5': 'DELETE FROM `events` WHERE id = 7'
[36m03:03:13.075 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.087 gohan.server.sync DEBUG [0m Processing event 8 - create
03:03:13.087 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/ese_device_existing
[36m03:03:13.088 gohan.server.sync DEBUG [0m Deleting event 8
03:03:13.091 gohan.db.sql INFO [0m Executing SQL query in transaction 'b0fa38ff-f1fc-408c-83e4-de4acaa40dd2': 'DELETE FROM `events` WHERE id = 8'
[36m03:03:13.091 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.105 gohan.server.sync DEBUG [0m Processing event 9 - create
03:03:13.105 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/ese_device_new
[36m03:03:13.107 gohan.server.sync DEBUG [0m Deleting event 9
03:03:13.108 gohan.db.sql INFO [0m Executing SQL query in transaction '7c4393d8-4393-4ab0-9209-52e8764b08d5': 'DELETE FROM `events` WHERE id = 9'
[36m03:03:13.108 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.125 gohan.server.sync DEBUG [0m Processing event 10 - create
03:03:13.125 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/network_monitoring
[36m03:03:13.126 gohan.server.sync DEBUG [0m Deleting event 10
03:03:13.132 gohan.db.sql INFO [0m Executing SQL query in transaction 'a8b6c6cb-df03-4428-8760-e9d542aca7f7': 'DELETE FROM `events` WHERE id = 10'
[36m03:03:13.133 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.146 gohan.server.sync DEBUG [0m Processing event 11 - create
03:03:13.147 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/port_monitoring
[36m03:03:13.147 gohan.server.sync DEBUG [0m Deleting event 11
03:03:13.150 gohan.db.sql INFO [0m Executing SQL query in transaction 'ead69d9a-dba3-466f-bb0f-ab255e723283': 'DELETE FROM `events` WHERE id = 11'
[36m03:03:13.153 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.167 gohan.server.sync DEBUG [0m Processing event 12 - create
03:03:13.167 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/ese_physical_port_monitoring
[36m03:03:13.168 gohan.server.sync DEBUG [0m Deleting event 12
03:03:13.170 gohan.db.sql INFO [0m Executing SQL query in transaction 'f9d73d05-fd20-43e5-835b-099c59fc32f6': 'DELETE FROM `events` WHERE id = 12'
[36m03:03:13.170 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.185 gohan.server.sync DEBUG [0m Processing event 13 - create
03:03:13.185 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/ese_logical_port_monitoring
[36m03:03:13.187 gohan.server.sync DEBUG [0m Deleting event 13
03:03:13.187 gohan.db.sql INFO [0m Executing SQL query in transaction 'a92d039a-bd7e-4710-aae0-2af7d541e3a0': 'DELETE FROM `events` WHERE id = 13'
[36m03:03:13.188 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.206 gohan.server.sync DEBUG [0m Processing event 14 - create
03:03:13.206 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/ese_device_monitoring
[36m03:03:13.206 gohan.server.sync DEBUG [0m Deleting event 14
03:03:13.207 gohan.db.sql INFO [0m Executing SQL query in transaction 'ee444967-a904-40db-94eb-988ff6482730': 'DELETE FROM `events` WHERE id = 14'
[36m03:03:13.208 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.222 gohan.server.sync DEBUG [0m Processing event 15 - create
03:03:13.222 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/edge_router_monitoring
[36m03:03:13.222 gohan.server.sync DEBUG [0m Deleting event 15
03:03:13.224 gohan.db.sql INFO [0m Executing SQL query in transaction '85c87696-d316-4900-b54c-de9aa1b5fefb': 'DELETE FROM `events` WHERE id = 15'
[36m03:03:13.224 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.239 gohan.server.sync DEBUG [0m Processing event 16 - create
03:03:13.239 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/er_physical_interface_monitoring
[36m03:03:13.241 gohan.server.sync DEBUG [0m Deleting event 16
03:03:13.243 gohan.db.sql INFO [0m Executing SQL query in transaction '9a652691-e266-4603-b646-bd8b48c9784c': 'DELETE FROM `events` WHERE id = 16'
[36m03:03:13.243 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.259 gohan.server.sync DEBUG [0m Processing event 17 - create
03:03:13.260 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/ha_router_monitoring
[36m03:03:13.263 gohan.server.sync DEBUG [0m Deleting event 17
03:03:13.263 gohan.db.sql INFO [0m Executing SQL query in transaction '128671cc-8e4d-4b8c-b6ef-f2d2d128294d': 'DELETE FROM `events` WHERE id = 17'
[36m03:03:13.264 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.284 gohan.server.sync DEBUG [0m Processing event 18 - create
03:03:13.284 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/ha_interface_monitoring
[36m03:03:13.285 gohan.server.sync DEBUG [0m Deleting event 18
03:03:13.288 gohan.db.sql INFO [0m Executing SQL query in transaction 'c6e9357b-5ad4-4f49-bfac-85f733d71982': 'DELETE FROM `events` WHERE id = 18'
[36m03:03:13.289 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.302 gohan.server.sync DEBUG [0m Processing event 19 - create
03:03:13.302 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/internet_gateway_monitoring
[36m03:03:13.306 gohan.server.sync DEBUG [0m Deleting event 19
03:03:13.307 gohan.db.sql INFO [0m Executing SQL query in transaction 'c40c58d5-50f5-4b8f-bf6f-e7423a386f93': 'DELETE FROM `events` WHERE id = 19'
[36m03:03:13.307 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.318 gohan.server.sync DEBUG [0m Processing event 20 - create
03:03:13.318 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/aws_gateway_monitoring
[36m03:03:13.322 gohan.server.sync DEBUG [0m Deleting event 20
03:03:13.322 gohan.db.sql INFO [0m Executing SQL query in transaction 'bc157f18-f980-42b0-b78e-16981c5836d8': 'DELETE FROM `events` WHERE id = 20'
[36m03:03:13.323 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.336 gohan.server.sync DEBUG [0m Processing event 21 - create
03:03:13.336 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/vpn_gateway_monitoring
[36m03:03:13.337 gohan.server.sync DEBUG [0m Deleting event 21
03:03:13.339 gohan.db.sql INFO [0m Executing SQL query in transaction '4e0d8a06-f5be-41f9-9025-6442d6b81a9e': 'DELETE FROM `events` WHERE id = 21'
[36m03:03:13.340 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.354 gohan.server.sync DEBUG [0m Processing event 22 - create
03:03:13.354 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/gw_interface_monitoring
[36m03:03:13.356 gohan.server.sync DEBUG [0m Deleting event 22
03:03:13.359 gohan.db.sql INFO [0m Executing SQL query in transaction '55e720d9-02e5-4c6d-8e51-08964cbf3f79': 'DELETE FROM `events` WHERE id = 22'
[36m03:03:13.359 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.374 gohan.server.sync DEBUG [0m Processing event 23 - create
03:03:13.374 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/aws_interface_monitoring
[36m03:03:13.383 gohan.server.sync DEBUG [0m Deleting event 23
03:03:13.385 gohan.db.sql INFO [0m Executing SQL query in transaction 'cf98c2e7-aad1-407e-ae97-c9b6f7865506': 'DELETE FROM `events` WHERE id = 23'
[36m03:03:13.386 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.400 gohan.server.sync DEBUG [0m Processing event 24 - create
03:03:13.400 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/vpn_interface_monitoring
[36m03:03:13.402 gohan.server.sync DEBUG [0m Deleting event 24
03:03:13.404 gohan.db.sql INFO [0m Executing SQL query in transaction 'bc1ba01a-9c25-42ba-91f7-da0d4dbb51db': 'DELETE FROM `events` WHERE id = 24'
[36m03:03:13.405 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.424 gohan.server.sync DEBUG [0m Processing event 25 - create
03:03:13.424 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/common_function_gateway_monitoring
[36m03:03:13.428 gohan.server.sync DEBUG [0m Deleting event 25
03:03:13.429 gohan.db.sql INFO [0m Executing SQL query in transaction '20f0ded6-64b5-45de-aa09-1b89ac0313e3': 'DELETE FROM `events` WHERE id = 25'
[36m03:03:13.429 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.442 gohan.server.sync DEBUG [0m Processing event 26 - create
03:03:13.442 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/vnf_instance_monitoring
[36m03:03:13.445 gohan.server.sync DEBUG [0m Deleting event 26
03:03:13.446 gohan.db.sql INFO [0m Executing SQL query in transaction 'c3433804-68d5-42e5-8af0-47f9caddf3c6': 'DELETE FROM `events` WHERE id = 26'
[36m03:03:13.447 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.458 gohan.server.sync DEBUG [0m Processing event 27 - create
03:03:13.458 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/firewall_monitoring
[36m03:03:13.462 gohan.server.sync DEBUG [0m Deleting event 27
03:03:13.462 gohan.db.sql INFO [0m Executing SQL query in transaction '5fd527c6-bf37-4370-830b-55e04ee7ce73': 'DELETE FROM `events` WHERE id = 27'
[36m03:03:13.463 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.474 gohan.server.sync DEBUG [0m Processing event 28 - create
03:03:13.475 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/firewall_interface_monitoring
[36m03:03:13.477 gohan.server.sync DEBUG [0m Deleting event 28
03:03:13.478 gohan.db.sql INFO [0m Executing SQL query in transaction '69f9cd93-70d0-440c-a17a-b141525f82e0': 'DELETE FROM `events` WHERE id = 28'
[36m03:03:13.479 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
03:03:13.497 gohan.server INFO [0m New job for cron://cron_purge_billing_resources / 00 02 * * * *
[36m03:03:13.501 gohan.server.sync DEBUG [0m Processing event 29 - create
03:03:13.501 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/load_balancer_monitoring
[36m03:03:13.503 gohan.server.sync DEBUG [0m Deleting event 29
03:03:13.504 gohan.db.sql INFO [0m Executing SQL query in transaction 'd1d4bea9-c3c2-4ec0-a645-5cd7a52ff092': 'DELETE FROM `events` WHERE id = 29'
[36m03:03:13.505 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.523 gohan.server.sync DEBUG [0m Processing event 30 - create
03:03:13.523 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/load_balancer_interface_monitoring
[36m03:03:13.532 gohan.server.sync DEBUG [0m Deleting event 30
03:03:13.533 gohan.db.sql INFO [0m Executing SQL query in transaction 'a8f35072-8b4b-4eb3-b7e7-e680eba42b6f': 'DELETE FROM `events` WHERE id = 30'
[36m03:03:13.534 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.543 gohan.server.sync DEBUG [0m Processing event 31 - create
03:03:13.543 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/interdc_gateway_monitoring
[36m03:03:13.546 gohan.server.sync DEBUG [0m Deleting event 31
03:03:13.547 gohan.db.sql INFO [0m Executing SQL query in transaction '2dcdf5a7-bd1f-467b-bfc0-153e93abea69': 'DELETE FROM `events` WHERE id = 31'
[36m03:03:13.547 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.559 gohan.server.sync DEBUG [0m Processing event 32 - create
03:03:13.559 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/interdc_interface_monitoring
[36m03:03:13.563 gohan.server.sync DEBUG [0m Deleting event 32
03:03:13.564 gohan.db.sql INFO [0m Executing SQL query in transaction 'f26a730c-e70c-4494-b6c2-6936260c8fe0': 'DELETE FROM `events` WHERE id = 32'
[36m03:03:13.565 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.581 gohan.server.sync DEBUG [0m Processing event 33 - create
03:03:13.581 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/internet_gateway
[36m03:03:13.586 gohan.server.sync DEBUG [0m Deleting event 33
03:03:13.587 gohan.db.sql INFO [0m Executing SQL query in transaction '234c7ca8-682a-4f2e-9406-b87e6a252e2c': 'DELETE FROM `events` WHERE id = 33'
[36m03:03:13.588 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.603 gohan.server.sync DEBUG [0m Processing event 34 - create
03:03:13.603 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/static_route_internet
[36m03:03:13.604 gohan.server.sync DEBUG [0m Deleting event 34
03:03:13.608 gohan.db.sql INFO [0m Executing SQL query in transaction '31029814-0c2b-42a5-8e1a-cf59aff502ff': 'DELETE FROM `events` WHERE id = 34'
[36m03:03:13.608 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.619 gohan.server.sync DEBUG [0m Processing event 35 - create
03:03:13.619 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/gw_interface_internet
[36m03:03:13.625 gohan.server.sync DEBUG [0m Deleting event 35
03:03:13.626 gohan.db.sql INFO [0m Executing SQL query in transaction 'f340b329-64fe-4890-a25f-78383f2caff9': 'DELETE FROM `events` WHERE id = 35'
[36m03:03:13.626 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.635 gohan.server.sync DEBUG [0m Processing event 36 - create
03:03:13.635 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/qos_option_internet
[36m03:03:13.641 gohan.server.sync DEBUG [0m Deleting event 36
03:03:13.642 gohan.db.sql INFO [0m Executing SQL query in transaction '5909a39b-d27a-4e5e-a86f-04a328b5d20e': 'DELETE FROM `events` WHERE id = 36'
[36m03:03:13.642 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.661 gohan.server.sync DEBUG [0m Processing event 37 - create
03:03:13.661 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/public_ip
[36m03:03:13.666 gohan.server.sync DEBUG [0m Deleting event 37
03:03:13.666 gohan.db.sql INFO [0m Executing SQL query in transaction '1e622f2d-56a2-4d52-9bc7-31d647f642ff': 'DELETE FROM `events` WHERE id = 37'
[36m03:03:13.667 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.683 gohan.server.sync DEBUG [0m Processing event 38 - create
03:03:13.683 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/qos_option_vpn
[36m03:03:13.685 gohan.server.sync DEBUG [0m Deleting event 38
03:03:13.686 gohan.db.sql INFO [0m Executing SQL query in transaction 'c76ed1f8-4a95-4217-8ca6-3564879d586b': 'DELETE FROM `events` WHERE id = 38'
[36m03:03:13.687 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.703 gohan.server.sync DEBUG [0m Processing event 39 - create
03:03:13.703 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/vpn_gateway
[36m03:03:13.706 gohan.server.sync DEBUG [0m Deleting event 39
03:03:13.707 gohan.db.sql INFO [0m Executing SQL query in transaction '179db49a-00c8-4123-aebf-24d0c999cdfc': 'DELETE FROM `events` WHERE id = 39'
[36m03:03:13.707 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.719 gohan.server.sync DEBUG [0m Processing event 40 - create
03:03:13.719 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/gw_interface_vpn
[36m03:03:13.722 gohan.server.sync DEBUG [0m Deleting event 40
03:03:13.723 gohan.db.sql INFO [0m Executing SQL query in transaction 'b1164aff-ab44-4f6e-91a9-8fe5b125b8f2': 'DELETE FROM `events` WHERE id = 40'
[36m03:03:13.724 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.741 gohan.server.sync DEBUG [0m Processing event 41 - create
03:03:13.741 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/static_route_vpn
[36m03:03:13.745 gohan.server.sync DEBUG [0m Deleting event 41
03:03:13.746 gohan.db.sql INFO [0m Executing SQL query in transaction '570f741b-ab97-4826-896d-b8038e818b37': 'DELETE FROM `events` WHERE id = 41'
[36m03:03:13.747 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.763 gohan.server.sync DEBUG [0m Processing event 42 - create
03:03:13.763 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/vpn_interface
[36m03:03:13.766 gohan.server.sync DEBUG [0m Deleting event 42
03:03:13.768 gohan.db.sql INFO [0m Executing SQL query in transaction 'a20f63b1-6449-45f0-80cd-462f71dd606c': 'DELETE FROM `events` WHERE id = 42'
[36m03:03:13.768 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.783 gohan.server.sync DEBUG [0m Processing event 43 - create
03:03:13.783 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/qos_option_aws
[36m03:03:13.786 gohan.server.sync DEBUG [0m Deleting event 43
03:03:13.788 gohan.db.sql INFO [0m Executing SQL query in transaction '5f90ffc7-c552-469c-8d87-9f2c3d972a51': 'DELETE FROM `events` WHERE id = 43'
[36m03:03:13.788 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.805 gohan.server.sync DEBUG [0m Processing event 44 - create
03:03:13.805 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/aws_gateway
[36m03:03:13.809 gohan.server.sync DEBUG [0m Deleting event 44
03:03:13.812 gohan.db.sql INFO [0m Executing SQL query in transaction '32bcb67f-32d5-4ae8-bad7-c543b094f783': 'DELETE FROM `events` WHERE id = 44'
[36m03:03:13.812 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.826 gohan.server.sync DEBUG [0m Processing event 45 - create
03:03:13.826 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/gw_interface_aws
[36m03:03:13.829 gohan.server.sync DEBUG [0m Deleting event 45
03:03:13.830 gohan.db.sql INFO [0m Executing SQL query in transaction '53d1de4d-2ea2-4927-aa38-b1814c9e6c5f': 'DELETE FROM `events` WHERE id = 45'
[36m03:03:13.830 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.848 gohan.server.sync DEBUG [0m Processing event 46 - create
03:03:13.848 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/static_route_aws
[36m03:03:13.851 gohan.server.sync DEBUG [0m Deleting event 46
03:03:13.853 gohan.db.sql INFO [0m Executing SQL query in transaction 'f232eea2-51ac-44b2-83f8-1c6a48ddee48': 'DELETE FROM `events` WHERE id = 46'
[36m03:03:13.854 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.871 gohan.server.sync DEBUG [0m Processing event 47 - create
03:03:13.871 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/aws_interface
[36m03:03:13.884 gohan.server.sync DEBUG [0m Deleting event 47
03:03:13.885 gohan.db.sql INFO [0m Executing SQL query in transaction 'b783483f-433b-45d1-8bb1-295f59c75064': 'DELETE FROM `events` WHERE id = 47'
[36m03:03:13.886 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:13.902 gohan.server.sync DEBUG [0m Processing event 48 - create
03:03:13.902 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/common_function_gateway
[36m03:03:13.908 gohan.server.sync DEBUG [0m Deleting event 48
03:03:13.909 gohan.db.sql INFO [0m Executing SQL query in transaction '45d4a256-e86f-4566-b359-d5313f589295': 'DELETE FROM `events` WHERE id = 48'
[36m03:03:13.909 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:14.000 gohan.server.sync DEBUG [0m Processing event 49 - create
03:03:14.000 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/common_function
[36m03:03:14.003 gohan.server.sync DEBUG [0m Deleting event 49
03:03:14.004 gohan.db.sql INFO [0m Executing SQL query in transaction '4aa34890-38b2-4454-ac3f-19629e573c04': 'DELETE FROM `events` WHERE id = 49'
[36m03:03:14.005 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:14.036 gohan.server.sync DEBUG [0m Processing event 50 - create
03:03:14.036 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/qos_option_interdc
[36m03:03:14.039 gohan.server.sync DEBUG [0m Deleting event 50
03:03:14.040 gohan.db.sql INFO [0m Executing SQL query in transaction '5b17e08a-4ee3-42b7-8301-603b0318c972': 'DELETE FROM `events` WHERE id = 50'
[36m03:03:14.041 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:14.066 gohan.server.sync DEBUG [0m Processing event 51 - create
03:03:14.066 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/interdc_gateway
[36m03:03:14.069 gohan.server.sync DEBUG [0m Deleting event 51
03:03:14.070 gohan.db.sql INFO [0m Executing SQL query in transaction '0cba1f8e-c190-4211-8b20-ac1293bea054': 'DELETE FROM `events` WHERE id = 51'
[36m03:03:14.070 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
03:03:14.081 gohan.server INFO [0m New job for cron://cron_purge_resource_mappings / 00 03 * * * *
[36m03:03:14.098 gohan.server.sync DEBUG [0m Processing event 52 - create
03:03:14.098 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/interdc_interface
[36m03:03:14.102 gohan.server.sync DEBUG [0m Deleting event 52
03:03:14.103 gohan.db.sql INFO [0m Executing SQL query in transaction 'dea6e4f2-03d5-4e7d-8f00-3f572c785879': 'DELETE FROM `events` WHERE id = 52'
[36m03:03:14.104 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:14.128 gohan.server.sync DEBUG [0m Processing event 53 - create
03:03:14.128 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/gw_interface_interdc
[36m03:03:14.131 gohan.server.sync DEBUG [0m Deleting event 53
03:03:14.132 gohan.db.sql INFO [0m Executing SQL query in transaction '27b09a6d-241b-40a8-8c62-e8066b197b8f': 'DELETE FROM `events` WHERE id = 53'
[36m03:03:14.132 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:14.160 gohan.server.sync DEBUG [0m Processing event 54 - create
03:03:14.160 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/static_route_interdc
[36m03:03:14.165 gohan.server.sync DEBUG [0m Deleting event 54
03:03:14.166 gohan.db.sql INFO [0m Executing SQL query in transaction '58a6a45d-8640-4b02-8113-191220351b0a': 'DELETE FROM `events` WHERE id = 54'
[36m03:03:14.166 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:14.182 gohan.server.sync DEBUG [0m Processing event 55 - create
03:03:14.182 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/quotas/default
[36m03:03:14.187 gohan.server.sync DEBUG [0m Deleting event 55
03:03:14.188 gohan.db.sql INFO [0m Executing SQL query in transaction 'a8d331e8-13c1-400c-81a0-f48dc648f380': 'DELETE FROM `events` WHERE id = 55'
[36m03:03:14.188 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:14.201 gohan.server.sync DEBUG [0m Processing event 56 - create
03:03:14.201 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/reserve_addresses/default
[36m03:03:14.203 gohan.server.sync DEBUG [0m Deleting event 56
03:03:14.204 gohan.db.sql INFO [0m Executing SQL query in transaction '703b8e29-6a00-4070-9245-9c91d014d6db': 'DELETE FROM `events` WHERE id = 56'
[36m03:03:14.205 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:14.217 gohan.server.sync DEBUG [0m Processing event 57 - create
03:03:14.217 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/vnf_instance
[36m03:03:14.224 gohan.server.sync DEBUG [0m Deleting event 57
03:03:14.225 gohan.db.sql INFO [0m Executing SQL query in transaction '25599a22-2dc1-4baf-90c0-651f08b40c2c': 'DELETE FROM `events` WHERE id = 57'
[36m03:03:14.226 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:14.236 gohan.server.sync DEBUG [0m Processing event 58 - create
03:03:14.237 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/firewall_config
[36m03:03:14.238 gohan.server.sync DEBUG [0m Deleting event 58
03:03:14.239 gohan.db.sql INFO [0m Executing SQL query in transaction '4f1e2209-87bc-4238-9be2-a427fc773915': 'DELETE FROM `events` WHERE id = 58'
[36m03:03:14.239 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:14.255 gohan.server.sync DEBUG [0m Processing event 59 - create
03:03:14.255 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/load_balancer_conf
[36m03:03:14.259 gohan.server.sync DEBUG [0m Deleting event 59
03:03:14.260 gohan.db.sql INFO [0m Executing SQL query in transaction 'c455d54e-da5d-4758-a3bc-bbc45a0c426c': 'DELETE FROM `events` WHERE id = 59'
[36m03:03:14.260 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:03:14.275 gohan.server.sync DEBUG [0m Processing event 60 - create
03:03:14.275 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/heat_templates/load_balancer_syslog_server
[36m03:03:14.277 gohan.server.sync DEBUG [0m Deleting event 60
03:03:14.279 gohan.db.sql INFO [0m Executing SQL query in transaction '1d350668-25a3-49d6-8b23-c0ffb455ba2d': 'DELETE FROM `events` WHERE id = 60'
[36m03:03:14.279 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
03:03:14.741 gohan.server INFO [0m New job for cron://cron_delete_tenant / 0 */10 * * * *
03:03:15.464 gohan.server INFO [0m New job for cron://tenant_connection_create_cron / */30 * * * * *
03:03:16.133 gohan.server INFO [0m New job for cron://tenant_connection_delete_cron / */30 * * * * *
[36m03:03:17.936 gohan.server DEBUG [0m State Watcher starts watch
[31m03:03:17.937 gohan.sync.etcd ERROR [0m watch error: 100: Key not found (/state) [70]
[31m03:03:17.937 gohan.server ERROR [0m sync watch error: 100: Key not found (/state) [70]
[36m03:03:17.947 gohan.server DEBUG [0m Monitoring Watcher starts watch
[31m03:03:17.948 gohan.sync.etcd ERROR [0m watch error: 100: Key not found (/monitoring) [70]
[31m03:03:17.948 gohan.server ERROR [0m sync watch error: 100: Key not found (/monitoring) [70]
[36m03:03:22.938 gohan.server DEBUG [0m State Watcher starts watch
[31m03:03:22.939 gohan.sync.etcd ERROR [0m watch error: 100: Key not found (/state) [71]
[31m03:03:22.939 gohan.server ERROR [0m sync watch error: 100: Key not found (/state) [71]
[36m03:03:22.948 gohan.server DEBUG [0m Monitoring Watcher starts watch
[31m03:03:22.949 gohan.sync.etcd ERROR [0m watch error: 100: Key not found (/monitoring) [71]
[31m03:03:22.949 gohan.server ERROR [0m sync watch error: 100: Key not found (/monitoring) [71]
03:03:24.383 gohan.server.middleware INFO [0m Started GET /gohan/v0.1/schemas for client 172.17.0.21:41128 data: 
[36m03:03:24.383 gohan.server.middleware DEBUG [0m Request headers: map[Accept-Encoding:[gzip, deflate] Accept:[*/*] X-Auth-Token:[***] Connection:[keep-alive] User-Agent:[python-requests/2.9.1] Content-Type:[application/json]]
[36m03:03:24.383 gohan.server.middleware DEBUG [0m Request body: 
03:03:24.431 gohan.server.middleware INFO [0m Started GET /gohan/v0.1/schemas for client 172.17.0.21:41132 data: 
[36m03:03:24.431 gohan.server.middleware DEBUG [0m Request headers: map[Connection:[keep-alive] User-Agent:[python-requests/2.9.1] Content-Type:[application/json] Accept-Encoding:[gzip, deflate] Accept:[*/*] X-Auth-Token:[***]]
[36m03:03:24.431 gohan.server.middleware DEBUG [0m Request body: 
[36m03:03:24.712 gohan.server.resources DEBUG [0m List schema query: map[] started
[36m03:03:24.723 gohan.server.resources DEBUG [0m List schema query: map[] completed
[36m03:03:25.049 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] X-Total-Count:[68] Content-Length:[336182]]
[36m03:03:25.049 gohan.server.middleware DEBUG [0m Response body: {
  "schemas": [
    {
      "description": "The main metaschema",
      "id": "schema",
      "metadata": {
        "type": "metaschema"
      },
      "plural": "schemas",
      "prefix": "/gohan/v0.1/schemas",
      "schema": {
        "additionalProperties": false,
        "properties": {
          "actions": {
            "default": {},
            "description": "Resource actions",
            "patternProperties": {
              ".*": {
                "properties": {
                  "input": {
                    "type": "object"
                  },
                  "output": {
                    "type": "object"
                  }
                },
                "type": "object"
              }
            },
            "permission": [
              "create",
              "update"
            ],
            "title": "Actions",
            "type": [
              "object",
              "null"
            ]
          },
          "description": {
            "default": "",
            "description": "Description",
            "permission": [
              "create",
              "update"
            ],
            "title": "Description",
            "type": "string"
          },
          "id": {
            "description": "Schema ID",
            "permission": [
              "create"
            ],
            "title": "ID",
            "type": "string",
            "unique": true
          },
          "metadata": {
            "default": {},
            "description": "metadata for application developer",
            "format": "yaml",
            "permission": [
              "create",
              "update"
            ],
            "title": "Metadata",
            "type": "object"
          },
          "namespace": {
            "default": "",
            "description": "Namespace the schema belongs to",
            "permission": [
              "create"
            ],
            "title": "Namespace",
            "type": "string"
          },
          "parent": {
            "default": "",
            "description": "Parent of this schema",
            "permission": [
              "create",
              "update"
            ],
            "title": "Parent",
            "type": "string"
          },
          "plural": {
            "description": "Plural of this schema",
            "permission": [
              "create",
              "update"
            ],
            "title": "Plural",
            "type": "string"
          },
          "prefix": {
            "default": "",
            "description": "prefix",
            "permission": [
              "create",
              "update"
            ],
            "title": "Prefix",
            "type": "string"
          },
          "schema": {
            "default": {
              "properties": {
                "id": {
                  "permission": [
                    "create"
                  ],
                  "type": "string"
                }
              },
              "type": "object"
            },
            "description": "The inner metaschema",
            "detail_view": true,
            "permission": [
              "create",
              "update"
            ],
            "properties": {
              "additionalProperties": {
                "type": "boolean"
              },
              "dbColumnsOrder": {
                "items": {
                  "type": "string"
                },
                "title": "Database Column Order",
                "type": "array",
                "uniqueItems": true
              },
              "properties": {
                "patternProperties": {
                  "^.*$": {
                    "additionalProperties": false,
                    "properties": {
                      "additionalProperties": {
                        "title": "Additional properties",
                        "type": "boolean"
                      },
                      "default": {
                        "anyOf": [
                          {
                            "type": "array"
                          },
                          {
                            "type": "boolean"
                          },
                          {
                            "type": "integer"
                          },
                          {
                            "type": "number"
                          },
                          {
                            "type": "object"
                          },
                          {
                            "type": "string"
                          }
                        ],
                        "title": "Default"
                      },
                      "description": {
                        "title": "Description",
                        "type": "string"
                      },
                      "detail_view": {
                        "title": "Detail View Only",
                        "type": "boolean"
                      },
                      "enum": {
                        "minItems": 1,
                        "title": "Enum",
                        "type": "array",
                        "uniqueItems": true
                      },
                      "format": {
                        "title": "format",
                        "type": "string"
                      },
                      "id": {
                        "title": "ID",
                        "type": "string"
                      },
                      "items": {
                        "format": "yaml",
                        "title": "Items",
                        "type": "object"
                      },
                      "pattern": {
                        "format": "regex",
                        "title": "Pattern",
                        "type": "string"
                      },
                      "patternProperties": {
                        "format": "yaml",
                        "title": "Pattern Properties",
                        "type": "object"
                      },
                      "permission": {
                        "items": {
                          "enum": [
                            "create",
                            "update"
                          ],
                          "type": "string"
                        },
                        "title": "Permission",
                        "type": "array"
                      },
                      "properties": {
                        "format": "yaml",
                        "title": "Properties",
                        "type": "object"
                      },
                      "relation": {
                        "title": "Relation",
                        "type": "string"
                      },
                      "relation_property": {
                        "title": "Relation Property",
                        "type": "string"
                      },
                      "required": {
                        "items": {
                          "type": "string"
                        },
                        "title": "Required fields",
                        "type": "array",
                        "uniqueItems": true
                      },
                      "sql": {
                        "title": "SQL type",
                        "type": "string"
                      },
                      "title": {
                        "title": "Title",
                        "type": "string"
                      },
                      "type": {
                        "oneOf": [
                          {
                            "enum": [
                              "array",
                              "boolean",
                              "integer",
                              "null",
                              "number",
                              "object",
                 
[Trimmed 328182 bytes]
03:03:25.053 gohan.server.middleware INFO [0m Completed 200 OK in 669.957234ms
[36m03:03:25.233 gohan.server.resources DEBUG [0m List schema query: map[] started
[36m03:03:25.271 gohan.server.resources DEBUG [0m List schema query: map[] completed
[36m03:03:25.543 gohan.server.middleware DEBUG [0m Response headers: map[X-Total-Count:[68] Content-Length:[336182] Content-Type:[application/json]]
[36m03:03:25.543 gohan.server.middleware DEBUG [0m Response body: {
  "schemas": [
    {
      "description": "The main metaschema",
      "id": "schema",
      "metadata": {
        "type": "metaschema"
      },
      "plural": "schemas",
      "prefix": "/gohan/v0.1/schemas",
      "schema": {
        "additionalProperties": false,
        "properties": {
          "actions": {
            "default": {},
            "description": "Resource actions",
            "patternProperties": {
              ".*": {
                "properties": {
                  "input": {
                    "type": "object"
                  },
                  "output": {
                    "type": "object"
                  }
                },
                "type": "object"
              }
            },
            "permission": [
              "create",
              "update"
            ],
            "title": "Actions",
            "type": [
              "object",
              "null"
            ]
          },
          "description": {
            "default": "",
            "description": "Description",
            "permission": [
              "create",
              "update"
            ],
            "title": "Description",
            "type": "string"
          },
          "id": {
            "description": "Schema ID",
            "permission": [
              "create"
            ],
            "title": "ID",
            "type": "string",
            "unique": true
          },
          "metadata": {
            "default": {},
            "description": "metadata for application developer",
            "format": "yaml",
            "permission": [
              "create",
              "update"
            ],
            "title": "Metadata",
            "type": "object"
          },
          "namespace": {
            "default": "",
            "description": "Namespace the schema belongs to",
            "permission": [
              "create"
            ],
            "title": "Namespace",
            "type": "string"
          },
          "parent": {
            "default": "",
            "description": "Parent of this schema",
            "permission": [
              "create",
              "update"
            ],
            "title": "Parent",
            "type": "string"
          },
          "plural": {
            "description": "Plural of this schema",
            "permission": [
              "create",
              "update"
            ],
            "title": "Plural",
            "type": "string"
          },
          "prefix": {
            "default": "",
            "description": "prefix",
            "permission": [
              "create",
              "update"
            ],
            "title": "Prefix",
            "type": "string"
          },
          "schema": {
            "default": {
              "properties": {
                "id": {
                  "permission": [
                    "create"
                  ],
                  "type": "string"
                }
              },
              "type": "object"
            },
            "description": "The inner metaschema",
            "detail_view": true,
            "permission": [
              "create",
              "update"
            ],
            "properties": {
              "additionalProperties": {
                "type": "boolean"
              },
              "dbColumnsOrder": {
                "items": {
                  "type": "string"
                },
                "title": "Database Column Order",
                "type": "array",
                "uniqueItems": true
              },
              "properties": {
                "patternProperties": {
                  "^.*$": {
                    "additionalProperties": false,
                    "properties": {
                      "additionalProperties": {
                        "title": "Additional properties",
                        "type": "boolean"
                      },
                      "default": {
                        "anyOf": [
                          {
                            "type": "array"
                          },
                          {
                            "type": "boolean"
                          },
                          {
                            "type": "integer"
                          },
                          {
                            "type": "number"
                          },
                          {
                            "type": "object"
                          },
                          {
                            "type": "string"
                          }
                        ],
                        "title": "Default"
                      },
                      "description": {
                        "title": "Description",
                        "type": "string"
                      },
                      "detail_view": {
                        "title": "Detail View Only",
                        "type": "boolean"
                      },
                      "enum": {
                        "minItems": 1,
                        "title": "Enum",
                        "type": "array",
                        "uniqueItems": true
                      },
                      "format": {
                        "title": "format",
                        "type": "string"
                      },
                      "id": {
                        "title": "ID",
                        "type": "string"
                      },
                      "items": {
                        "format": "yaml",
                        "title": "Items",
                        "type": "object"
                      },
                      "pattern": {
                        "format": "regex",
                        "title": "Pattern",
                        "type": "string"
                      },
                      "patternProperties": {
                        "format": "yaml",
                        "title": "Pattern Properties",
                        "type": "object"
                      },
                      "permission": {
                        "items": {
                          "enum": [
                            "create",
                            "update"
                          ],
                          "type": "string"
                        },
                        "title": "Permission",
                        "type": "array"
                      },
                      "properties": {
                        "format": "yaml",
                        "title": "Properties",
                        "type": "object"
                      },
                      "relation": {
                        "title": "Relation",
                        "type": "string"
                      },
                      "relation_property": {
                        "title": "Relation Property",
                        "type": "string"
                      },
                      "required": {
                        "items": {
                          "type": "string"
                        },
                        "title": "Required fields",
                        "type": "array",
                        "uniqueItems": true
                      },
                      "sql": {
                        "title": "SQL type",
                        "type": "string"
                      },
                      "title": {
                        "title": "Title",
                        "type": "string"
                      },
                      "type": {
                        "oneOf": [
                          {
                            "enum": [
                              "array",
                              "boolean",
                              "integer",
                              "null",
                              "number",
                              "object",
                 
[Trimmed 328182 bytes]
03:03:25.543 gohan.server.middleware INFO [0m Completed 200 OK in 1.112381964s
03:03:27.659 gohan.server.middleware INFO [0m Started GET /gohan/v0.1/schemas for client 172.17.0.21:41140 data: 
[36m03:03:27.659 gohan.server.middleware DEBUG [0m Request headers: map[X-Auth-Token:[***] Connection:[keep-alive] User-Agent:[python-requests/2.9.1] Content-Type:[application/json] Accept-Encoding:[gzip, deflate] Accept:[*/*]]
[36m03:03:27.659 gohan.server.middleware DEBUG [0m Request body: 
[36m03:03:27.740 gohan.server.resources DEBUG [0m List schema query: map[] started
[36m03:03:27.751 gohan.server.resources DEBUG [0m List schema query: map[] completed
[36m03:03:27.776 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] X-Total-Count:[68] Content-Length:[336182]]
[36m03:03:27.777 gohan.server.middleware DEBUG [0m Response body: {
  "schemas": [
    {
      "description": "The main metaschema",
      "id": "schema",
      "metadata": {
        "type": "metaschema"
      },
      "plural": "schemas",
      "prefix": "/gohan/v0.1/schemas",
      "schema": {
        "additionalProperties": false,
        "properties": {
          "actions": {
            "default": {},
            "description": "Resource actions",
            "patternProperties": {
              ".*": {
                "properties": {
                  "input": {
                    "type": "object"
                  },
                  "output": {
                    "type": "object"
                  }
                },
                "type": "object"
              }
            },
            "permission": [
              "create",
              "update"
            ],
            "title": "Actions",
            "type": [
              "object",
              "null"
            ]
          },
          "description": {
            "default": "",
            "description": "Description",
            "permission": [
              "create",
              "update"
            ],
            "title": "Description",
            "type": "string"
          },
          "id": {
            "description": "Schema ID",
            "permission": [
              "create"
            ],
            "title": "ID",
            "type": "string",
            "unique": true
          },
          "metadata": {
            "default": {},
            "description": "metadata for application developer",
            "format": "yaml",
            "permission": [
              "create",
              "update"
            ],
            "title": "Metadata",
            "type": "object"
          },
          "namespace": {
            "default": "",
            "description": "Namespace the schema belongs to",
            "permission": [
              "create"
            ],
            "title": "Namespace",
            "type": "string"
          },
          "parent": {
            "default": "",
            "description": "Parent of this schema",
            "permission": [
              "create",
              "update"
            ],
            "title": "Parent",
            "type": "string"
          },
          "plural": {
            "description": "Plural of this schema",
            "permission": [
              "create",
              "update"
            ],
            "title": "Plural",
            "type": "string"
          },
          "prefix": {
            "default": "",
            "description": "prefix",
            "permission": [
              "create",
              "update"
            ],
            "title": "Prefix",
            "type": "string"
          },
          "schema": {
            "default": {
              "properties": {
                "id": {
                  "permission": [
                    "create"
                  ],
                  "type": "string"
                }
              },
              "type": "object"
            },
            "description": "The inner metaschema",
            "detail_view": true,
            "permission": [
              "create",
              "update"
            ],
            "properties": {
              "additionalProperties": {
                "type": "boolean"
              },
              "dbColumnsOrder": {
                "items": {
                  "type": "string"
                },
                "title": "Database Column Order",
                "type": "array",
                "uniqueItems": true
              },
              "properties": {
                "patternProperties": {
                  "^.*$": {
                    "additionalProperties": false,
                    "properties": {
                      "additionalProperties": {
                        "title": "Additional properties",
                        "type": "boolean"
                      },
                      "default": {
                        "anyOf": [
                          {
                            "type": "array"
                          },
                          {
                            "type": "boolean"
                          },
                          {
                            "type": "integer"
                          },
                          {
                            "type": "number"
                          },
                          {
                            "type": "object"
                          },
                          {
                            "type": "string"
                          }
                        ],
                        "title": "Default"
                      },
                      "description": {
                        "title": "Description",
                        "type": "string"
                      },
                      "detail_view": {
                        "title": "Detail View Only",
                        "type": "boolean"
                      },
                      "enum": {
                        "minItems": 1,
                        "title": "Enum",
                        "type": "array",
                        "uniqueItems": true
                      },
                      "format": {
                        "title": "format",
                        "type": "string"
                      },
                      "id": {
                        "title": "ID",
                        "type": "string"
                      },
                      "items": {
                        "format": "yaml",
                        "title": "Items",
                        "type": "object"
                      },
                      "pattern": {
                        "format": "regex",
                        "title": "Pattern",
                        "type": "string"
                      },
                      "patternProperties": {
                        "format": "yaml",
                        "title": "Pattern Properties",
                        "type": "object"
                      },
                      "permission": {
                        "items": {
                          "enum": [
                            "create",
                            "update"
                          ],
                          "type": "string"
                        },
                        "title": "Permission",
                        "type": "array"
                      },
                      "properties": {
                        "format": "yaml",
                        "title": "Properties",
                        "type": "object"
                      },
                      "relation": {
                        "title": "Relation",
                        "type": "string"
                      },
                      "relation_property": {
                        "title": "Relation Property",
                        "type": "string"
                      },
                      "required": {
                        "items": {
                          "type": "string"
                        },
                        "title": "Required fields",
                        "type": "array",
                        "uniqueItems": true
                      },
                      "sql": {
                        "title": "SQL type",
                        "type": "string"
                      },
                      "title": {
                        "title": "Title",
                        "type": "string"
                      },
                      "type": {
                        "oneOf": [
                          {
                            "enum": [
                              "array",
                              "boolean",
                              "integer",
                              "null",
                              "number",
                              "object",
                 
[Trimmed 328182 bytes]
03:03:27.777 gohan.server.middleware INFO [0m Completed 200 OK in 117.876267ms
[36m03:03:27.939 gohan.server DEBUG [0m State Watcher starts watch
[31m03:03:27.940 gohan.sync.etcd ERROR [0m watch error: 100: Key not found (/state) [72]
[31m03:03:27.940 gohan.server ERROR [0m sync watch error: 100: Key not found (/state) [72]
[36m03:03:27.949 gohan.server DEBUG [0m Monitoring Watcher starts watch
[31m03:03:27.950 gohan.sync.etcd ERROR [0m watch error: 100: Key not found (/monitoring) [72]
[31m03:03:27.950 gohan.server ERROR [0m sync watch error: 100: Key not found (/monitoring) [72]
03:03:27.963 gohan.server.middleware INFO [0m Started GET /gohan/v0.1/schemas for client 172.17.0.21:41148 data: 
[36m03:03:27.963 gohan.server.middleware DEBUG [0m Request headers: map[Connection:[keep-alive] User-Agent:[python-requests/2.9.1] Content-Type:[application/json] Accept-Encoding:[gzip, deflate] Accept:[*/*] X-Auth-Token:[***]]
[36m03:03:27.963 gohan.server.middleware DEBUG [0m Request body: 
[36m03:03:28.168 gohan.server.resources DEBUG [0m List schema query: map[] started
[36m03:03:28.195 gohan.server.resources DEBUG [0m List schema query: map[] completed
[36m03:03:28.215 gohan.server.middleware DEBUG [0m Response headers: map[Content-Length:[336182] Content-Type:[application/json] X-Total-Count:[68]]
[36m03:03:28.215 gohan.server.middleware DEBUG [0m Response body: {
  "schemas": [
    {
      "description": "The main metaschema",
      "id": "schema",
      "metadata": {
        "type": "metaschema"
      },
      "plural": "schemas",
      "prefix": "/gohan/v0.1/schemas",
      "schema": {
        "additionalProperties": false,
        "properties": {
          "actions": {
            "default": {},
            "description": "Resource actions",
            "patternProperties": {
              ".*": {
                "properties": {
                  "input": {
                    "type": "object"
                  },
                  "output": {
                    "type": "object"
                  }
                },
                "type": "object"
              }
            },
            "permission": [
              "create",
              "update"
            ],
            "title": "Actions",
            "type": [
              "object",
              "null"
            ]
          },
          "description": {
            "default": "",
            "description": "Description",
            "permission": [
              "create",
              "update"
            ],
            "title": "Description",
            "type": "string"
          },
          "id": {
            "description": "Schema ID",
            "permission": [
              "create"
            ],
            "title": "ID",
            "type": "string",
            "unique": true
          },
          "metadata": {
            "default": {},
            "description": "metadata for application developer",
            "format": "yaml",
            "permission": [
              "create",
              "update"
            ],
            "title": "Metadata",
            "type": "object"
          },
          "namespace": {
            "default": "",
            "description": "Namespace the schema belongs to",
            "permission": [
              "create"
            ],
            "title": "Namespace",
            "type": "string"
          },
          "parent": {
            "default": "",
            "description": "Parent of this schema",
            "permission": [
              "create",
              "update"
            ],
            "title": "Parent",
            "type": "string"
          },
          "plural": {
            "description": "Plural of this schema",
            "permission": [
              "create",
              "update"
            ],
            "title": "Plural",
            "type": "string"
          },
          "prefix": {
            "default": "",
            "description": "prefix",
            "permission": [
              "create",
              "update"
            ],
            "title": "Prefix",
            "type": "string"
          },
          "schema": {
            "default": {
              "properties": {
                "id": {
                  "permission": [
                    "create"
                  ],
                  "type": "string"
                }
              },
              "type": "object"
            },
            "description": "The inner metaschema",
            "detail_view": true,
            "permission": [
              "create",
              "update"
            ],
            "properties": {
              "additionalProperties": {
                "type": "boolean"
              },
              "dbColumnsOrder": {
                "items": {
                  "type": "string"
                },
                "title": "Database Column Order",
                "type": "array",
                "uniqueItems": true
              },
              "properties": {
                "patternProperties": {
                  "^.*$": {
                    "additionalProperties": false,
                    "properties": {
                      "additionalProperties": {
                        "title": "Additional properties",
                        "type": "boolean"
                      },
                      "default": {
                        "anyOf": [
                          {
                            "type": "array"
                          },
                          {
                            "type": "boolean"
                          },
                          {
                            "type": "integer"
                          },
                          {
                            "type": "number"
                          },
                          {
                            "type": "object"
                          },
                          {
                            "type": "string"
                          }
                        ],
                        "title": "Default"
                      },
                      "description": {
                        "title": "Description",
                        "type": "string"
                      },
                      "detail_view": {
                        "title": "Detail View Only",
                        "type": "boolean"
                      },
                      "enum": {
                        "minItems": 1,
                        "title": "Enum",
                        "type": "array",
                        "uniqueItems": true
                      },
                      "format": {
                        "title": "format",
                        "type": "string"
                      },
                      "id": {
                        "title": "ID",
                        "type": "string"
                      },
                      "items": {
                        "format": "yaml",
                        "title": "Items",
                        "type": "object"
                      },
                      "pattern": {
                        "format": "regex",
                        "title": "Pattern",
                        "type": "string"
                      },
                      "patternProperties": {
                        "format": "yaml",
                        "title": "Pattern Properties",
                        "type": "object"
                      },
                      "permission": {
                        "items": {
                          "enum": [
                            "create",
                            "update"
                          ],
                          "type": "string"
                        },
                        "title": "Permission",
                        "type": "array"
                      },
                      "properties": {
                        "format": "yaml",
                        "title": "Properties",
                        "type": "object"
                      },
                      "relation": {
                        "title": "Relation",
                        "type": "string"
                      },
                      "relation_property": {
                        "title": "Relation Property",
                        "type": "string"
                      },
                      "required": {
                        "items": {
                          "type": "string"
                        },
                        "title": "Required fields",
                        "type": "array",
                        "uniqueItems": true
                      },
                      "sql": {
                        "title": "SQL type",
                        "type": "string"
                      },
                      "title": {
                        "title": "Title",
                        "type": "string"
                      },
                      "type": {
                        "oneOf": [
                          {
                            "enum": [
                              "array",
                              "boolean",
                              "integer",
                              "null",
                              "number",
                              "object",
                 
[Trimmed 328182 bytes]
03:03:28.215 gohan.server.middleware INFO [0m Completed 200 OK in 252.492167ms
03:03:30.001 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
03:03:30.015 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
[36m03:03:30.136 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] started
[36m03:03:30.138 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] completed
03:03:30.140 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
[36m03:03:30.166 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] started
[36m03:03:30.168 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] completed
03:03:30.171 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
[36m03:03:32.940 gohan.server DEBUG [0m State Watcher starts watch
[36m03:03:32.941 gohan.server DEBUG [0m State event update received: get /state map[]
[36m03:03:32.941 gohan.server DEBUG [0m State event update received: get /state/v2.0 map[]
[36m03:03:32.942 gohan.server DEBUG [0m State event update received: get /state/v2.0/quotas map[]
[36m03:03:32.942 gohan.server DEBUG [0m State event update received: get /state/v2.0/quotas/default map[error: state:map[worker_state:READ_COMPLETE] version:1]
[36m03:03:32.942 gohan.server DEBUG [0m State event update received: get /state/v2.0/reserve_addresses map[]
[36m03:03:32.942 gohan.server DEBUG [0m State event update received: get /state/v2.0/reserve_addresses/default map[state:map[worker_state:READ_COMPLETE] version:1 error:]
[33m03:03:32.942 gohan.server.sync WARNING [0m Unhandled error during state update - aborting: State update on unexpected path '/v2.0/reserve_addresses/default'
[33m03:03:32.942 gohan.server.sync WARNING [0m Unhandled error during state update - aborting: State update on unexpected path '//state'
[33m03:03:32.943 gohan.server.sync WARNING [0m Unhandled error during state update - aborting: State update on unexpected path '/v2.0'
[33m03:03:32.943 gohan.server.sync WARNING [0m Unhandled error during state update - aborting: State update on unexpected path '/v2.0/quotas'
[33m03:03:32.943 gohan.server.sync WARNING [0m Unhandled error during state update - aborting: State update on unexpected path '/v2.0/quotas/default'
[33m03:03:32.943 gohan.server.sync WARNING [0m Unhandled error during state update - aborting: State update on unexpected path '/v2.0/reserve_addresses'
[36m03:03:32.950 gohan.server DEBUG [0m Monitoring Watcher starts watch
[31m03:03:32.951 gohan.sync.etcd ERROR [0m watch error: 100: Key not found (/monitoring) [85]
[31m03:03:32.951 gohan.server ERROR [0m sync watch error: 100: Key not found (/monitoring) [85]
[36m03:03:37.951 gohan.server DEBUG [0m Monitoring Watcher starts watch
[31m03:03:37.952 gohan.sync.etcd ERROR [0m watch error: 100: Key not found (/monitoring) [86]
[31m03:03:37.952 gohan.server ERROR [0m sync watch error: 100: Key not found (/monitoring) [86]
[36m03:03:42.952 gohan.server DEBUG [0m Monitoring Watcher starts watch
[31m03:03:42.953 gohan.sync.etcd ERROR [0m watch error: 100: Key not found (/monitoring) [87]
[31m03:03:42.953 gohan.server ERROR [0m sync watch error: 100: Key not found (/monitoring) [87]
[36m03:03:47.953 gohan.server DEBUG [0m Monitoring Watcher starts watch
[31m03:03:47.954 gohan.sync.etcd ERROR [0m watch error: 100: Key not found (/monitoring) [88]
[31m03:03:47.954 gohan.server ERROR [0m sync watch error: 100: Key not found (/monitoring) [88]
[36m03:03:52.954 gohan.server DEBUG [0m Monitoring Watcher starts watch
[31m03:03:52.955 gohan.sync.etcd ERROR [0m watch error: 100: Key not found (/monitoring) [89]
[31m03:03:52.955 gohan.server ERROR [0m sync watch error: 100: Key not found (/monitoring) [89]
[36m03:03:57.955 gohan.server DEBUG [0m Monitoring Watcher starts watch
[31m03:03:57.956 gohan.sync.etcd ERROR [0m watch error: 100: Key not found (/monitoring) [90]
[31m03:03:57.956 gohan.server ERROR [0m sync watch error: 100: Key not found (/monitoring) [90]
03:04:00.003 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
03:04:00.014 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
[36m03:04:00.137 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] started
[36m03:04:00.146 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] completed
03:04:00.149 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
[36m03:04:00.163 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] started
[36m03:04:00.166 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] completed
03:04:00.168 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
[36m03:04:02.956 gohan.server DEBUG [0m Monitoring Watcher starts watch
[31m03:04:02.957 gohan.sync.etcd ERROR [0m watch error: 100: Key not found (/monitoring) [98]
[31m03:04:02.957 gohan.server ERROR [0m sync watch error: 100: Key not found (/monitoring) [98]
03:04:03.342 gohan.server.middleware INFO [0m Started POST /v2.0/ese_devices for client 172.17.0.19:39494 data: 
{
"ese_device": {
"username": "esi",
"password": "password",
"public_ip_address": "10.161.0.34",
"hostname": "QFX-NW02",
"name": "QFX-NW02",
"management_ip_address": "10.161.0.34",
"type": "tor",
"existing": "existing",
"tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
}
}
[36m03:04:03.342 gohan.server.middleware DEBUG [0m Request headers: map[Accept-Encoding:[identity] Content-Length:[272] Content-Type:[application/json] X-Auth-Token:[***]]
[36m03:04:03.342 gohan.server.middleware DEBUG [0m Request body: 
{
"ese_device": {
"username": "esi",
"password": "password",
"public_ip_address": "10.161.0.34",
"hostname": "QFX-NW02",
"name": "QFX-NW02",
"management_ip_address": "10.161.0.34",
"type": "tor",
"existing": "existing",
"tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
}
}
[36m03:04:03.432 gohan.server.resources DEBUG [0m Create ese_device with data map[public_ip_address:10.161.0.34 type:tor existing:existing username:esi hostname:QFX-NW02 name:QFX-NW02 management_ip_address:10.161.0.34 tenant_id:0b576f6f4cbf414f829cd12f008bf08f password:password] started
[36m03:04:03.433 gohan.schema DEBUG [0m No properties in resource policy. Allowing all property access
03:04:03.441 gohan.db.sql INFO [0m Executing SQL query in transaction '3c6b39ea-3530-4afa-8479-9994b91371c4': 'INSERT INTO `tenants` (`status`,`end_time`,`delete_retries`,`id`) VALUES (active,,0,0b576f6f4cbf414f829cd12f008bf08f)'
03:04:03.441 gohan.db.sql INFO [0m Executing SQL query in transaction '3c6b39ea-3530-4afa-8479-9994b91371c4': 'INSERT INTO `events` (`path`,`timestamp`,`type`,`marked_for_deletion`,`body`,`version`) VALUES (/common/v1.0/tenants/0b576f6f4cbf414f829cd12f008bf08f,1494471843,create,false,"{\"delete_retries\":0,\"end_time\":\"\",\"id\":\"0b576f6f4cbf414f829cd12f008bf08f\",\"status\":\"active\"}",1)'
03:04:03.442 gohan.db.sql INFO [0m Executing SQL query in transaction '3c6b39ea-3530-4afa-8479-9994b91371c4': 'INSERT INTO `ese_devices` (`description`,`password`,`existing`,`name`,`tags`,`management_ip_address`,`tenant_id`,`id`,`type`,`public_ip_address`,`hostname`,`status`,`username`) VALUES (,password,existing,QFX-NW02,{},10.161.0.34,0b576f6f4cbf414f829cd12f008bf08f,9f05b260-26ca-46f7-98c3-ad88e411a989,tor,10.161.0.34,QFX-NW02,PENDING_CREATE,esi)'
03:04:03.443 gohan.db.sql INFO [0m Executing SQL query in transaction '3c6b39ea-3530-4afa-8479-9994b91371c4': 'INSERT INTO `events` (`version`,`path`,`timestamp`,`type`,`marked_for_deletion`,`body`) VALUES (1,/v2.0/ese_devices/9f05b260-26ca-46f7-98c3-ad88e411a989,1494471843,create,false,"{\"description\":\"\",\"existing\":\"existing\",\"hostname\":\"QFX-NW02\",\"id\":\"9f05b260-26ca-46f7-98c3-ad88e411a989\",\"management_ip_address\":\"10.161.0.34\",\"name\":\"QFX-NW02\",\"password\":\"password\",\"public_ip_address\":\"10.161.0.34\",\"status\":\"PENDING_CREATE\",\"tags\":{},\"tenant_id\":\"0b576f6f4cbf414f829cd12f008bf08f\",\"type\":\"tor\",\"username\":\"esi\"}")'
[36m03:04:03.454 gohan.server.resources DEBUG [0m Create ese_device completed: map[ese_device:map[username:esi public_ip_address:10.161.0.34 type:tor existing:existing id:9f05b260-26ca-46f7-98c3-ad88e411a989 description: password:password hostname:QFX-NW02 name:QFX-NW02 management_ip_address:10.161.0.34 tenant_id:0b576f6f4cbf414f829cd12f008bf08f status:PENDING_CREATE tags:map[]]]
[36m03:04:03.454 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[432]]
[36m03:04:03.454 gohan.server.middleware DEBUG [0m Response body: {
  "ese_device": {
    "description": "",
    "existing": "existing",
    "hostname": "QFX-NW02",
    "id": "9f05b260-26ca-46f7-98c3-ad88e411a989",
    "management_ip_address": "10.161.0.34",
    "name": "QFX-NW02",
    "password": "password",
    "public_ip_address": "10.161.0.34",
    "status": "PENDING_CREATE",
    "tags": {},
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
    "type": "tor",
    "username": "esi"
  }
}
03:04:03.454 gohan.server.middleware INFO [0m Completed 201 Created in 112.36127ms
[36m03:04:03.464 gohan.server.sync DEBUG [0m Processing event 61 - create
03:04:03.464 gohan.server.sync INFO [0m Setting config with version 1 to /config//common/v1.0/tenants/0b576f6f4cbf414f829cd12f008bf08f
[36m03:04:03.465 gohan.server.sync DEBUG [0m Deleting event 61
03:04:03.467 gohan.db.sql INFO [0m Executing SQL query in transaction '798773e9-f792-4849-b00c-e73e9b6e15fd': 'DELETE FROM `events` WHERE id = 61'
[36m03:04:03.467 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
03:04:03.469 gohan.server.middleware INFO [0m Started GET /v2.0/ese_devices/9f05b260-26ca-46f7-98c3-ad88e411a989 for client 172.17.0.19:39502 data: 
[36m03:04:03.469 gohan.server.middleware DEBUG [0m Request headers: map[X-Auth-Token:[***] Accept-Encoding:[identity] Content-Length:[0] Content-Type:[application/json]]
[36m03:04:03.472 gohan.server.middleware DEBUG [0m Request body: 
[36m03:04:03.481 gohan.server DEBUG [0m State event update received: set /state/common/v1.0/tenants/0b576f6f4cbf414f829cd12f008bf08f map[error: state:map[worker_state:READ_COMPLETE] version:1]
[33m03:04:03.482 gohan.server.sync WARNING [0m Unhandled error during state update - aborting: State update on unexpected path '/common/v1.0/tenants/0b576f6f4cbf414f829cd12f008bf08f'
[36m03:04:03.485 gohan.server.sync DEBUG [0m Processing event 62 - create
03:04:03.485 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/ese_devices/9f05b260-26ca-46f7-98c3-ad88e411a989
[36m03:04:03.493 gohan.server.sync DEBUG [0m Deleting event 62
03:04:03.496 gohan.db.sql INFO [0m Executing SQL query in transaction 'fe36f3bb-a582-4b88-8783-8e4a91f9ada4': 'DELETE FROM `events` WHERE id = 62'
[36m03:04:03.497 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:04:03.556 gohan.server.resources DEBUG [0m Show ese_device 9f05b260-26ca-46f7-98c3-ad88e411a989 started
[36m03:04:03.563 gohan.server.resources DEBUG [0m Show ese_device 9f05b260-26ca-46f7-98c3-ad88e411a989 completed: map[ese_device:map[status:PENDING_CREATE flavor:<nil> password:password existing:existing tsn_names:<nil> type:tor hostname:QFX-NW02 id:9f05b260-26ca-46f7-98c3-ad88e411a989 tor_agent_names:<nil> tags:map[] management_ip_address:10.161.0.34 username:esi description: name:QFX-NW02 location:<nil> tenant_id:0b576f6f4cbf414f829cd12f008bf08f public_ip_address:10.161.0.34]]
[36m03:04:03.563 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[526]]
[36m03:04:03.563 gohan.server.middleware DEBUG [0m Response body: {
  "ese_device": {
    "description": "",
    "existing": "existing",
    "flavor": null,
    "hostname": "QFX-NW02",
    "id": "9f05b260-26ca-46f7-98c3-ad88e411a989",
    "location": null,
    "management_ip_address": "10.161.0.34",
    "name": "QFX-NW02",
    "password": "password",
    "public_ip_address": "10.161.0.34",
    "status": "PENDING_CREATE",
    "tags": {},
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
    "tor_agent_names": null,
    "tsn_names": null,
    "type": "tor",
    "username": "esi"
  }
}
03:04:03.564 gohan.server.middleware INFO [0m Completed 200 OK in 94.163998ms
03:04:04.572 gohan.server.middleware INFO [0m Started GET /v2.0/ese_devices/9f05b260-26ca-46f7-98c3-ad88e411a989 for client 172.17.0.19:39544 data: 
[36m03:04:04.572 gohan.server.middleware DEBUG [0m Request headers: map[Accept-Encoding:[identity] Content-Length:[0] Content-Type:[application/json] X-Auth-Token:[***]]
[36m03:04:04.572 gohan.server.middleware DEBUG [0m Request body: 
[36m03:04:04.637 gohan.server.resources DEBUG [0m Show ese_device 9f05b260-26ca-46f7-98c3-ad88e411a989 started
[36m03:04:04.640 gohan.server.resources DEBUG [0m Show ese_device 9f05b260-26ca-46f7-98c3-ad88e411a989 completed: map[ese_device:map[description: location:<nil> hostname:QFX-NW02 password:password existing:existing tsn_names:<nil> tenant_id:0b576f6f4cbf414f829cd12f008bf08f type:tor public_ip_address:10.161.0.34 tor_agent_names:<nil> name:QFX-NW02 status:PENDING_CREATE tags:map[] management_ip_address:10.161.0.34 id:9f05b260-26ca-46f7-98c3-ad88e411a989 flavor:<nil> username:esi]]
[36m03:04:04.640 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[526]]
[36m03:04:04.640 gohan.server.middleware DEBUG [0m Response body: {
  "ese_device": {
    "description": "",
    "existing": "existing",
    "flavor": null,
    "hostname": "QFX-NW02",
    "id": "9f05b260-26ca-46f7-98c3-ad88e411a989",
    "location": null,
    "management_ip_address": "10.161.0.34",
    "name": "QFX-NW02",
    "password": "password",
    "public_ip_address": "10.161.0.34",
    "status": "PENDING_CREATE",
    "tags": {},
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
    "tor_agent_names": null,
    "tsn_names": null,
    "type": "tor",
    "username": "esi"
  }
}
03:04:04.640 gohan.server.middleware INFO [0m Completed 200 OK in 68.080709ms
03:04:05.648 gohan.server.middleware INFO [0m Started GET /v2.0/ese_devices/9f05b260-26ca-46f7-98c3-ad88e411a989 for client 172.17.0.19:39550 data: 
[36m03:04:05.648 gohan.server.middleware DEBUG [0m Request headers: map[X-Auth-Token:[***] Accept-Encoding:[identity] Content-Length:[0] Content-Type:[application/json]]
[36m03:04:05.648 gohan.server.middleware DEBUG [0m Request body: 
[36m03:04:05.720 gohan.server.resources DEBUG [0m Show ese_device 9f05b260-26ca-46f7-98c3-ad88e411a989 started
[36m03:04:05.723 gohan.server.resources DEBUG [0m Show ese_device 9f05b260-26ca-46f7-98c3-ad88e411a989 completed: map[ese_device:map[hostname:QFX-NW02 status:PENDING_CREATE description: management_ip_address:10.161.0.34 location:<nil> tenant_id:0b576f6f4cbf414f829cd12f008bf08f public_ip_address:10.161.0.34 tags:map[] existing:existing id:9f05b260-26ca-46f7-98c3-ad88e411a989 flavor:<nil> username:esi password:password tor_agent_names:<nil> type:tor name:QFX-NW02 tsn_names:<nil>]]
[36m03:04:05.723 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[526]]
[36m03:04:05.723 gohan.server.middleware DEBUG [0m Response body: {
  "ese_device": {
    "description": "",
    "existing": "existing",
    "flavor": null,
    "hostname": "QFX-NW02",
    "id": "9f05b260-26ca-46f7-98c3-ad88e411a989",
    "location": null,
    "management_ip_address": "10.161.0.34",
    "name": "QFX-NW02",
    "password": "password",
    "public_ip_address": "10.161.0.34",
    "status": "PENDING_CREATE",
    "tags": {},
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
    "tor_agent_names": null,
    "tsn_names": null,
    "type": "tor",
    "username": "esi"
  }
}
03:04:05.723 gohan.server.middleware INFO [0m Completed 200 OK in 74.859663ms
[36m03:04:06.008 gohan.server DEBUG [0m State event update received: set /state/v2.0/ese_devices/9f05b260-26ca-46f7-98c3-ad88e411a989 map[error: state:map[heat_outputs:[{"output_value": ["default-global-system-config", "QFX-NW02"], "description": "The FQ name of the physical router.", "output_key": "fq_name"}, {"output_value": "physical_router", "description": "A unique id for the physical router.", "output_key": "id"}, {"output_value": "dummy", "description": "The name of the physical router.", "output_key": "name"}] state_monitoring:{"switch": "ACTIVE"} worker_state:CREATE_COMPLETED] version:1]
03:04:06.008 gohan.server.sync INFO [0m StateUpdate for set /state/v2.0/ese_devices/9f05b260-26ca-46f7-98c3-ad88e411a989 map[error: state:map[heat_outputs:[{"output_value": ["default-global-system-config", "QFX-NW02"], "description": "The FQ name of the physical router.", "output_key": "fq_name"}, {"output_value": "physical_router", "description": "A unique id for the physical router.", "output_key": "id"}, {"output_value": "dummy", "description": "The name of the physical router.", "output_key": "name"}] state_monitoring:{"switch": "ACTIVE"} worker_state:CREATE_COMPLETED] version:1] started
03:04:06.015 gohan.sync INFO [0m Locked gohan/cluster/lock/state/v2.0/ese_devices/9f05b260-26ca-46f7-98c3-ad88e411a989 with index 127
03:04:06.077 gohan.db.sql INFO [0m Executing SQL query in transaction '3df2366e-4e01-4d5d-a50b-81c3b5eaa0c1': 'UPDATE `ese_devices` SET `password` = password, `tor_agent_names` = null, `existing` = existing, `name` = QFX-NW02, `tags` = {}, `description` = , `tsn_names` = null, `location` = <nil>, `management_ip_address` = 10.161.0.34, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `id` = 9f05b260-26ca-46f7-98c3-ad88e411a989, `type` = tor, `public_ip_address` = 10.161.0.34, `hostname` = QFX-NW02, `status` = PENDING_CREATE, `flavor` = <nil>, `username` = esi, `state_version` = 1, `monitoring_version` = 0, `state_error` = , `state` = {"error":"","state":{"heat_outputs":"[{\"output_value\": [\"default-global-system-config\", \"QFX-NW02\"], \"description\": \"The FQ name of the physical router.\", \"output_key\": \"fq_name\"}, {\"output_value\": \"physical_router\", \"description\": \"A unique id for the physical router.\", \"output_key\": \"id\"}, {\"output_value\": \"dummy\", \"description\": \"The name of the physical router.\", \"output_key\": \"name\"}]","state_monitoring":"{\"switch\": \"ACTIVE\"}","worker_state":"CREATE_COMPLETED"}}, `state_monitoring` = {}, `marked_for_deletion` = 0 WHERE id = 9f05b260-26ca-46f7-98c3-ad88e411a989'
03:04:06.079 gohan.extension.ese_device.post_state_update_in_transaction INFO [0m Config version: 1, State version: 1, Monitoring version: 0
03:04:06.080 gohan.extension.ese_device.post_state_update_in_transaction INFO [0m Reading monitoring data from worker state: {"switch": "ACTIVE"}
03:04:06.083 gohan.db.sql INFO [0m Executing SQL query in transaction '3df2366e-4e01-4d5d-a50b-81c3b5eaa0c1': 'UPDATE `ese_devices` SET `flavor` = <nil>, `username` = esi, `hostname` = QFX-NW02, `status` = ACTIVE, `existing` = existing, `name` = QFX-NW02, `tags` = {}, `description` = , `password` = password, `tor_agent_names` = null, `management_ip_address` = 10.161.0.34, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `tsn_names` = null, `location` = <nil>, `public_ip_address` = 10.161.0.34, `id` = 9f05b260-26ca-46f7-98c3-ad88e411a989, `type` = tor WHERE id = 9f05b260-26ca-46f7-98c3-ad88e411a989'
03:04:06.093 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/state/v2.0/ese_devices/9f05b260-26ca-46f7-98c3-ad88e411a989 with index 127
03:04:06.101 gohan.sync INFO [0m Path gohan/cluster/lock/state/v2.0/ese_devices/9f05b260-26ca-46f7-98c3-ad88e411a989 already unlocked or not locked
03:04:06.733 gohan.server.middleware INFO [0m Started GET /v2.0/ese_devices/9f05b260-26ca-46f7-98c3-ad88e411a989 for client 172.17.0.19:39578 data: 
[36m03:04:06.733 gohan.server.middleware DEBUG [0m Request headers: map[Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[identity] Content-Length:[0]]
[36m03:04:06.733 gohan.server.middleware DEBUG [0m Request body: 
[36m03:04:06.797 gohan.server.resources DEBUG [0m Show ese_device 9f05b260-26ca-46f7-98c3-ad88e411a989 started
[36m03:04:06.799 gohan.server.resources DEBUG [0m Show ese_device 9f05b260-26ca-46f7-98c3-ad88e411a989 completed: map[ese_device:map[username:esi existing:existing type:tor tsn_names:<nil> id:9f05b260-26ca-46f7-98c3-ad88e411a989 hostname:QFX-NW02 tags:map[] description: management_ip_address:10.161.0.34 tenant_id:0b576f6f4cbf414f829cd12f008bf08f public_ip_address:10.161.0.34 status:ACTIVE flavor:<nil> password:password tor_agent_names:<nil> name:QFX-NW02 location:<nil>]]
[36m03:04:06.799 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[518]]
[36m03:04:06.799 gohan.server.middleware DEBUG [0m Response body: {
  "ese_device": {
    "description": "",
    "existing": "existing",
    "flavor": null,
    "hostname": "QFX-NW02",
    "id": "9f05b260-26ca-46f7-98c3-ad88e411a989",
    "location": null,
    "management_ip_address": "10.161.0.34",
    "name": "QFX-NW02",
    "password": "password",
    "public_ip_address": "10.161.0.34",
    "status": "ACTIVE",
    "tags": {},
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
    "tor_agent_names": null,
    "tsn_names": null,
    "type": "tor",
    "username": "esi"
  }
}
03:04:06.799 gohan.server.middleware INFO [0m Completed 200 OK in 66.588251ms
03:04:07.055 gohan.server.middleware INFO [0m Started GET /gohan/v0.1/schemas for client 172.17.0.19:39586 data: 
[36m03:04:07.055 gohan.server.middleware DEBUG [0m Request headers: map[User-Agent:[gophercloud/1.0.0] Connection:[close] Accept:[application/json] X-Auth-Token:[***] Accept-Encoding:[gzip]]
[36m03:04:07.055 gohan.server.middleware DEBUG [0m Request body: 
[36m03:04:07.119 gohan.server.resources DEBUG [0m List schema query: map[] started
[36m03:04:07.136 gohan.server.resources DEBUG [0m List schema query: map[] completed
[36m03:04:07.152 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] X-Total-Count:[68] Content-Length:[336182]]
[36m03:04:07.152 gohan.server.middleware DEBUG [0m Response body: {
  "schemas": [
    {
      "description": "The main metaschema",
      "id": "schema",
      "metadata": {
        "type": "metaschema"
      },
      "plural": "schemas",
      "prefix": "/gohan/v0.1/schemas",
      "schema": {
        "additionalProperties": false,
        "properties": {
          "actions": {
            "default": {},
            "description": "Resource actions",
            "patternProperties": {
              ".*": {
                "properties": {
                  "input": {
                    "type": "object"
                  },
                  "output": {
                    "type": "object"
                  }
                },
                "type": "object"
              }
            },
            "permission": [
              "create",
              "update"
            ],
            "title": "Actions",
            "type": [
              "object",
              "null"
            ]
          },
          "description": {
            "default": "",
            "description": "Description",
            "permission": [
              "create",
              "update"
            ],
            "title": "Description",
            "type": "string"
          },
          "id": {
            "description": "Schema ID",
            "permission": [
              "create"
            ],
            "title": "ID",
            "type": "string",
            "unique": true
          },
          "metadata": {
            "default": {},
            "description": "metadata for application developer",
            "format": "yaml",
            "permission": [
              "create",
              "update"
            ],
            "title": "Metadata",
            "type": "object"
          },
          "namespace": {
            "default": "",
            "description": "Namespace the schema belongs to",
            "permission": [
              "create"
            ],
            "title": "Namespace",
            "type": "string"
          },
          "parent": {
            "default": "",
            "description": "Parent of this schema",
            "permission": [
              "create",
              "update"
            ],
            "title": "Parent",
            "type": "string"
          },
          "plural": {
            "description": "Plural of this schema",
            "permission": [
              "create",
              "update"
            ],
            "title": "Plural",
            "type": "string"
          },
          "prefix": {
            "default": "",
            "description": "prefix",
            "permission": [
              "create",
              "update"
            ],
            "title": "Prefix",
            "type": "string"
          },
          "schema": {
            "default": {
              "properties": {
                "id": {
                  "permission": [
                    "create"
                  ],
                  "type": "string"
                }
              },
              "type": "object"
            },
            "description": "The inner metaschema",
            "detail_view": true,
            "permission": [
              "create",
              "update"
            ],
            "properties": {
              "additionalProperties": {
                "type": "boolean"
              },
              "dbColumnsOrder": {
                "items": {
                  "type": "string"
                },
                "title": "Database Column Order",
                "type": "array",
                "uniqueItems": true
              },
              "properties": {
                "patternProperties": {
                  "^.*$": {
                    "additionalProperties": false,
                    "properties": {
                      "additionalProperties": {
                        "title": "Additional properties",
                        "type": "boolean"
                      },
                      "default": {
                        "anyOf": [
                          {
                            "type": "array"
                          },
                          {
                            "type": "boolean"
                          },
                          {
                            "type": "integer"
                          },
                          {
                            "type": "number"
                          },
                          {
                            "type": "object"
                          },
                          {
                            "type": "string"
                          }
                        ],
                        "title": "Default"
                      },
                      "description": {
                        "title": "Description",
                        "type": "string"
                      },
                      "detail_view": {
                        "title": "Detail View Only",
                        "type": "boolean"
                      },
                      "enum": {
                        "minItems": 1,
                        "title": "Enum",
                        "type": "array",
                        "uniqueItems": true
                      },
                      "format": {
                        "title": "format",
                        "type": "string"
                      },
                      "id": {
                        "title": "ID",
                        "type": "string"
                      },
                      "items": {
                        "format": "yaml",
                        "title": "Items",
                        "type": "object"
                      },
                      "pattern": {
                        "format": "regex",
                        "title": "Pattern",
                        "type": "string"
                      },
                      "patternProperties": {
                        "format": "yaml",
                        "title": "Pattern Properties",
                        "type": "object"
                      },
                      "permission": {
                        "items": {
                          "enum": [
                            "create",
                            "update"
                          ],
                          "type": "string"
                        },
                        "title": "Permission",
                        "type": "array"
                      },
                      "properties": {
                        "format": "yaml",
                        "title": "Properties",
                        "type": "object"
                      },
                      "relation": {
                        "title": "Relation",
                        "type": "string"
                      },
                      "relation_property": {
                        "title": "Relation Property",
                        "type": "string"
                      },
                      "required": {
                        "items": {
                          "type": "string"
                        },
                        "title": "Required fields",
                        "type": "array",
                        "uniqueItems": true
                      },
                      "sql": {
                        "title": "SQL type",
                        "type": "string"
                      },
                      "title": {
                        "title": "Title",
                        "type": "string"
                      },
                      "type": {
                        "oneOf": [
                          {
                            "enum": [
                              "array",
                              "boolean",
                              "integer",
                              "null",
                              "number",
                              "object",
                 
[Trimmed 328182 bytes]
03:04:07.152 gohan.server.middleware INFO [0m Completed 200 OK in 97.197387ms
03:04:07.200 gohan.server.middleware INFO [0m Started GET /v2.0/ese_devices/9f05b260-26ca-46f7-98c3-ad88e411a989 for client 172.17.0.19:39592 data: 
[36m03:04:07.200 gohan.server.middleware DEBUG [0m Request headers: map[Connection:[close] Accept:[application/json] X-Auth-Token:[***] Accept-Encoding:[gzip] User-Agent:[gophercloud/1.0.0]]
[36m03:04:07.200 gohan.server.middleware DEBUG [0m Request body: 
[36m03:04:07.265 gohan.server.resources DEBUG [0m Show ese_device 9f05b260-26ca-46f7-98c3-ad88e411a989 started
[36m03:04:07.267 gohan.server.resources DEBUG [0m Show ese_device 9f05b260-26ca-46f7-98c3-ad88e411a989 completed: map[ese_device:map[description: password:password flavor:<nil> existing:existing tags:map[] id:9f05b260-26ca-46f7-98c3-ad88e411a989 status:ACTIVE hostname:QFX-NW02 public_ip_address:10.161.0.34 username:esi name:QFX-NW02 management_ip_address:10.161.0.34 tenant_id:0b576f6f4cbf414f829cd12f008bf08f tsn_names:<nil> type:tor tor_agent_names:<nil> location:<nil>]]
[36m03:04:07.268 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[518]]
[36m03:04:07.268 gohan.server.middleware DEBUG [0m Response body: {
  "ese_device": {
    "description": "",
    "existing": "existing",
    "flavor": null,
    "hostname": "QFX-NW02",
    "id": "9f05b260-26ca-46f7-98c3-ad88e411a989",
    "location": null,
    "management_ip_address": "10.161.0.34",
    "name": "QFX-NW02",
    "password": "password",
    "public_ip_address": "10.161.0.34",
    "status": "ACTIVE",
    "tags": {},
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
    "tor_agent_names": null,
    "tsn_names": null,
    "type": "tor",
    "username": "esi"
  }
}
03:04:07.268 gohan.server.middleware INFO [0m Completed 200 OK in 67.456213ms
03:04:07.269 gohan.server.middleware INFO [0m Started GET /v2.0/ese_devices/9f05b260-26ca-46f7-98c3-ad88e411a989 for client 172.17.0.19:39598 data: {}
[36m03:04:07.269 gohan.server.middleware DEBUG [0m Request headers: map[Content-Length:[2] Accept:[application/json] Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[gzip] User-Agent:[gophercloud/1.0.0] Connection:[close]]
[36m03:04:07.269 gohan.server.middleware DEBUG [0m Request body: {}
[36m03:04:07.338 gohan.server.resources DEBUG [0m Show ese_device 9f05b260-26ca-46f7-98c3-ad88e411a989 started
[36m03:04:07.341 gohan.server.resources DEBUG [0m Show ese_device 9f05b260-26ca-46f7-98c3-ad88e411a989 completed: map[ese_device:map[type:tor hostname:QFX-NW02 status:ACTIVE password:password name:QFX-NW02 location:<nil> tenant_id:0b576f6f4cbf414f829cd12f008bf08f id:9f05b260-26ca-46f7-98c3-ad88e411a989 tor_agent_names:<nil> public_ip_address:10.161.0.34 existing:existing tags:map[] tsn_names:<nil> flavor:<nil> description: management_ip_address:10.161.0.34 username:esi]]
[36m03:04:07.341 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[518]]
[36m03:04:07.341 gohan.server.middleware DEBUG [0m Response body: {
  "ese_device": {
    "description": "",
    "existing": "existing",
    "flavor": null,
    "hostname": "QFX-NW02",
    "id": "9f05b260-26ca-46f7-98c3-ad88e411a989",
    "location": null,
    "management_ip_address": "10.161.0.34",
    "name": "QFX-NW02",
    "password": "password",
    "public_ip_address": "10.161.0.34",
    "status": "ACTIVE",
    "tags": {},
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
    "tor_agent_names": null,
    "tsn_names": null,
    "type": "tor",
    "username": "esi"
  }
}
03:04:07.341 gohan.server.middleware INFO [0m Completed 200 OK in 72.511877ms
[36m03:04:07.957 gohan.server DEBUG [0m Monitoring Watcher starts watch
[31m03:04:07.958 gohan.sync.etcd ERROR [0m watch error: 100: Key not found (/monitoring) [135]
[31m03:04:07.958 gohan.server ERROR [0m sync watch error: 100: Key not found (/monitoring) [135]
03:04:09.460 gohan.server.middleware INFO [0m Started POST /v2.0/ese_physical_ports for client 172.17.0.19:39620 data: 
{
"ese_physical_port": {
"name": "xe-0/0/3",
"ese_device_id": "9f05b260-26ca-46f7-98c3-ad88e411a989",
"connected_port_id": "",
"connected_port_owner": "mx_downlink",
"tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
}
}
[36m03:04:09.460 gohan.server.middleware DEBUG [0m Request headers: map[Accept-Encoding:[identity] Content-Length:[218] Content-Type:[application/json] X-Auth-Token:[***]]
[36m03:04:09.460 gohan.server.middleware DEBUG [0m Request body: 
{
"ese_physical_port": {
"name": "xe-0/0/3",
"ese_device_id": "9f05b260-26ca-46f7-98c3-ad88e411a989",
"connected_port_id": "",
"connected_port_owner": "mx_downlink",
"tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
}
}
[36m03:04:09.524 gohan.server.resources DEBUG [0m Create ese_physical_port with data map[connected_port_id: connected_port_owner:mx_downlink tenant_id:0b576f6f4cbf414f829cd12f008bf08f name:xe-0/0/3 ese_device_id:9f05b260-26ca-46f7-98c3-ad88e411a989] started
[36m03:04:09.524 gohan.schema DEBUG [0m No properties in resource policy. Allowing all property access
[36m03:04:09.584 gohan.server.resources DEBUG [0m List ese_device query: map[id:[9f05b260-26ca-46f7-98c3-ad88e411a989]] started
[36m03:04:09.586 gohan.server.resources DEBUG [0m List ese_device query: map[id:[9f05b260-26ca-46f7-98c3-ad88e411a989]] completed
03:04:09.591 gohan.db.sql INFO [0m Executing SQL query in transaction '67f16b05-c7db-4514-a8bf-d53237c6e342': 'INSERT INTO `ese_physical_ports` (`tenant_id`,`description`,`status`,`id`,`tags`,`existing`,`ese_device_id`,`connected_port_id`,`name`,`connected_port_owner`) VALUES (0b576f6f4cbf414f829cd12f008bf08f,,PENDING_CREATE,976156ef-05b4-47f4-9497-a36531563a08,{},new,9f05b260-26ca-46f7-98c3-ad88e411a989,,xe-0/0/3,mx_downlink)'
03:04:09.592 gohan.db.sql INFO [0m Executing SQL query in transaction '67f16b05-c7db-4514-a8bf-d53237c6e342': 'INSERT INTO `events` (`marked_for_deletion`,`body`,`version`,`path`,`timestamp`,`type`) VALUES (false,"{\"connected_port_id\":\"\",\"connected_port_owner\":\"mx_downlink\",\"description\":\"\",\"ese_device_id\":\"9f05b260-26ca-46f7-98c3-ad88e411a989\",\"existing\":\"new\",\"id\":\"976156ef-05b4-47f4-9497-a36531563a08\",\"name\":\"xe-0/0/3\",\"status\":\"PENDING_CREATE\",\"tags\":{},\"tenant_id\":\"0b576f6f4cbf414f829cd12f008bf08f\"}",1,/v2.0/ese_physical_ports/976156ef-05b4-47f4-9497-a36531563a08,1494471849,create)'
[36m03:04:09.611 gohan.server.resources DEBUG [0m Create ese_physical_port completed: map[ese_physical_port:map[description: tenant_id:0b576f6f4cbf414f829cd12f008bf08f ese_device_id:9f05b260-26ca-46f7-98c3-ad88e411a989 connected_port_id: connected_port_owner:mx_downlink id:976156ef-05b4-47f4-9497-a36531563a08 tags:map[] existing:new status:PENDING_CREATE name:xe-0/0/3]]
[36m03:04:09.612 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[385]]
[36m03:04:09.612 gohan.server.middleware DEBUG [0m Response body: {
  "ese_physical_port": {
    "connected_port_id": "",
    "connected_port_owner": "mx_downlink",
    "description": "",
    "ese_device_id": "9f05b260-26ca-46f7-98c3-ad88e411a989",
    "existing": "new",
    "id": "976156ef-05b4-47f4-9497-a36531563a08",
    "name": "xe-0/0/3",
    "status": "PENDING_CREATE",
    "tags": {},
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:04:09.612 gohan.server.middleware INFO [0m Completed 201 Created in 152.043368ms
[36m03:04:09.613 gohan.server.sync DEBUG [0m Processing event 63 - create
03:04:09.613 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/ese_physical_ports/976156ef-05b4-47f4-9497-a36531563a08
[36m03:04:09.619 gohan.server.sync DEBUG [0m Deleting event 63
03:04:09.620 gohan.db.sql INFO [0m Executing SQL query in transaction '7d0c99fe-aa47-4fbf-9a7c-18a622dcf320': 'DELETE FROM `events` WHERE id = 63'
[36m03:04:09.620 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
03:04:09.627 gohan.server.middleware INFO [0m Started GET /v2.0/ese_physical_ports/976156ef-05b4-47f4-9497-a36531563a08 for client 172.17.0.19:39630 data: 
[36m03:04:09.628 gohan.server.middleware DEBUG [0m Request headers: map[Accept-Encoding:[identity] Content-Length:[0] Content-Type:[application/json] X-Auth-Token:[***]]
[36m03:04:09.628 gohan.server.middleware DEBUG [0m Request body: 
[36m03:04:09.701 gohan.server.resources DEBUG [0m Show ese_physical_port 976156ef-05b4-47f4-9497-a36531563a08 started
[36m03:04:09.703 gohan.server.resources DEBUG [0m Show ese_physical_port 976156ef-05b4-47f4-9497-a36531563a08 completed: map[ese_physical_port:map[description: status:PENDING_CREATE id:976156ef-05b4-47f4-9497-a36531563a08 connected_port_owner:mx_downlink connected_port_id: tags:map[] tenant_id:0b576f6f4cbf414f829cd12f008bf08f name:xe-0/0/3 ese_device_id:9f05b260-26ca-46f7-98c3-ad88e411a989 existing:new]]
[36m03:04:09.703 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[385]]
[36m03:04:09.703 gohan.server.middleware DEBUG [0m Response body: {
  "ese_physical_port": {
    "connected_port_id": "",
    "connected_port_owner": "mx_downlink",
    "description": "",
    "ese_device_id": "9f05b260-26ca-46f7-98c3-ad88e411a989",
    "existing": "new",
    "id": "976156ef-05b4-47f4-9497-a36531563a08",
    "name": "xe-0/0/3",
    "status": "PENDING_CREATE",
    "tags": {},
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:04:09.703 gohan.server.middleware INFO [0m Completed 200 OK in 75.961255ms
03:04:10.711 gohan.server.middleware INFO [0m Started GET /v2.0/ese_physical_ports/976156ef-05b4-47f4-9497-a36531563a08 for client 172.17.0.19:39648 data: 
[36m03:04:10.711 gohan.server.middleware DEBUG [0m Request headers: map[Accept-Encoding:[identity] Content-Length:[0] Content-Type:[application/json] X-Auth-Token:[***]]
[36m03:04:10.711 gohan.server.middleware DEBUG [0m Request body: 
[36m03:04:10.778 gohan.server.resources DEBUG [0m Show ese_physical_port 976156ef-05b4-47f4-9497-a36531563a08 started
[36m03:04:10.780 gohan.server.resources DEBUG [0m Show ese_physical_port 976156ef-05b4-47f4-9497-a36531563a08 completed: map[ese_physical_port:map[ese_device_id:9f05b260-26ca-46f7-98c3-ad88e411a989 tags:map[] connected_port_id: connected_port_owner:mx_downlink description: status:PENDING_CREATE id:976156ef-05b4-47f4-9497-a36531563a08 existing:new tenant_id:0b576f6f4cbf414f829cd12f008bf08f name:xe-0/0/3]]
[36m03:04:10.780 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[385]]
[36m03:04:10.780 gohan.server.middleware DEBUG [0m Response body: {
  "ese_physical_port": {
    "connected_port_id": "",
    "connected_port_owner": "mx_downlink",
    "description": "",
    "ese_device_id": "9f05b260-26ca-46f7-98c3-ad88e411a989",
    "existing": "new",
    "id": "976156ef-05b4-47f4-9497-a36531563a08",
    "name": "xe-0/0/3",
    "status": "PENDING_CREATE",
    "tags": {},
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:04:10.780 gohan.server.middleware INFO [0m Completed 200 OK in 69.216107ms
03:04:11.791 gohan.server.middleware INFO [0m Started GET /v2.0/ese_physical_ports/976156ef-05b4-47f4-9497-a36531563a08 for client 172.17.0.19:39660 data: 
[36m03:04:11.791 gohan.server.middleware DEBUG [0m Request headers: map[Accept-Encoding:[identity] Content-Length:[0] Content-Type:[application/json] X-Auth-Token:[***]]
[36m03:04:11.792 gohan.server.middleware DEBUG [0m Request body: 
[36m03:04:11.857 gohan.server DEBUG [0m State event update received: set /state/v2.0/ese_physical_ports/976156ef-05b4-47f4-9497-a36531563a08 map[error: state:map[heat_outputs:[{"output_value": "dddddddd-dddd-dddd-dddd-dddddddddddd", "description": "A unique id for the physical interface", "output_key": "id"}, {"output_value": null, "output_error": "'ContrailPhysicalInterface' object has no attribute 'pi_uuid'", "description": "The name of the physical interface.", "output_key": "name"}] state_monitoring:{"port": "ACTIVE"} worker_state:CREATE_COMPLETED] version:1]
03:04:11.857 gohan.server.sync INFO [0m StateUpdate for set /state/v2.0/ese_physical_ports/976156ef-05b4-47f4-9497-a36531563a08 map[error: state:map[heat_outputs:[{"output_value": "dddddddd-dddd-dddd-dddd-dddddddddddd", "description": "A unique id for the physical interface", "output_key": "id"}, {"output_value": null, "output_error": "'ContrailPhysicalInterface' object has no attribute 'pi_uuid'", "description": "The name of the physical interface.", "output_key": "name"}] state_monitoring:{"port": "ACTIVE"} worker_state:CREATE_COMPLETED] version:1] started
03:04:11.869 gohan.sync INFO [0m Locked gohan/cluster/lock/state/v2.0/ese_physical_ports/976156ef-05b4-47f4-9497-a36531563a08 with index 161
[36m03:04:11.898 gohan.server.resources DEBUG [0m Show ese_physical_port 976156ef-05b4-47f4-9497-a36531563a08 started
[36m03:04:11.900 gohan.server.resources DEBUG [0m Show ese_physical_port 976156ef-05b4-47f4-9497-a36531563a08 completed: map[ese_physical_port:map[tenant_id:0b576f6f4cbf414f829cd12f008bf08f description: connected_port_id: tags:map[] existing:new name:xe-0/0/3 connected_port_owner:mx_downlink ese_device_id:9f05b260-26ca-46f7-98c3-ad88e411a989 status:PENDING_CREATE id:976156ef-05b4-47f4-9497-a36531563a08]]
[36m03:04:11.900 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[385]]
[36m03:04:11.901 gohan.server.middleware DEBUG [0m Response body: {
  "ese_physical_port": {
    "connected_port_id": "",
    "connected_port_owner": "mx_downlink",
    "description": "",
    "ese_device_id": "9f05b260-26ca-46f7-98c3-ad88e411a989",
    "existing": "new",
    "id": "976156ef-05b4-47f4-9497-a36531563a08",
    "name": "xe-0/0/3",
    "status": "PENDING_CREATE",
    "tags": {},
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:04:11.901 gohan.server.middleware INFO [0m Completed 200 OK in 109.3962ms
03:04:11.943 gohan.db.sql INFO [0m Executing SQL query in transaction '889375fa-7e0c-4f0a-8e88-b97cbc2ca9e4': 'UPDATE `ese_physical_ports` SET `connected_port_id` = , `name` = xe-0/0/3, `connected_port_owner` = mx_downlink, `ese_device_id` = 9f05b260-26ca-46f7-98c3-ad88e411a989, `description` = , `status` = PENDING_CREATE, `id` = 976156ef-05b4-47f4-9497-a36531563a08, `tags` = {}, `existing` = new, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, ese_device_id = 9f05b260-26ca-46f7-98c3-ad88e411a989, `state_version` = 1, `monitoring_version` = 0, `state_error` = , `state` = {"error":"","state":{"heat_outputs":"[{\"output_value\": \"dddddddd-dddd-dddd-dddd-dddddddddddd\", \"description\": \"A unique id for the physical interface\", \"output_key\": \"id\"}, {\"output_value\": null, \"output_error\": \"'ContrailPhysicalInterface' object has no attribute 'pi_uuid'\", \"description\": \"The name of the physical interface.\", \"output_key\": \"name\"}]","state_monitoring":"{\"port\": \"ACTIVE\"}","worker_state":"CREATE_COMPLETED"}}, `state_monitoring` = {}, `marked_for_deletion` = 0 WHERE id = 976156ef-05b4-47f4-9497-a36531563a08'
03:04:11.945 gohan.extension.ese_physical_port.post_state_update_in_transaction INFO [0m Config version: 1, State version: 1, Monitoring version: 0
03:04:11.946 gohan.extension.ese_physical_port.post_state_update_in_transaction INFO [0m Reading monitoring data from worker state: {"port": "ACTIVE"}
03:04:11.948 gohan.db.sql INFO [0m Executing SQL query in transaction '889375fa-7e0c-4f0a-8e88-b97cbc2ca9e4': 'UPDATE `ese_physical_ports` SET `name` = xe-0/0/3, `connected_port_owner` = mx_downlink, `ese_device_id` = 9f05b260-26ca-46f7-98c3-ad88e411a989, `connected_port_id` = , `tags` = {}, `existing` = new, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `description` = , `status` = ACTIVE, `id` = 976156ef-05b4-47f4-9497-a36531563a08, ese_device_id = 9f05b260-26ca-46f7-98c3-ad88e411a989 WHERE id = 976156ef-05b4-47f4-9497-a36531563a08'
03:04:11.970 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/state/v2.0/ese_physical_ports/976156ef-05b4-47f4-9497-a36531563a08 with index 161
03:04:11.977 gohan.sync INFO [0m Path gohan/cluster/lock/state/v2.0/ese_physical_ports/976156ef-05b4-47f4-9497-a36531563a08 already unlocked or not locked
03:04:12.909 gohan.server.middleware INFO [0m Started GET /v2.0/ese_physical_ports/976156ef-05b4-47f4-9497-a36531563a08 for client 172.17.0.19:39678 data: 
[36m03:04:12.909 gohan.server.middleware DEBUG [0m Request headers: map[X-Auth-Token:[***] Accept-Encoding:[identity] Content-Length:[0] Content-Type:[application/json]]
[36m03:04:12.909 gohan.server.middleware DEBUG [0m Request body: 
[36m03:04:12.958 gohan.server DEBUG [0m Monitoring Watcher starts watch
[31m03:04:12.959 gohan.sync.etcd ERROR [0m watch error: 100: Key not found (/monitoring) [169]
[31m03:04:12.959 gohan.server ERROR [0m sync watch error: 100: Key not found (/monitoring) [169]
[36m03:04:12.976 gohan.server.resources DEBUG [0m Show ese_physical_port 976156ef-05b4-47f4-9497-a36531563a08 started
[36m03:04:12.979 gohan.server.resources DEBUG [0m Show ese_physical_port 976156ef-05b4-47f4-9497-a36531563a08 completed: map[ese_physical_port:map[description: status:ACTIVE connected_port_owner:mx_downlink connected_port_id: id:976156ef-05b4-47f4-9497-a36531563a08 tags:map[] existing:new tenant_id:0b576f6f4cbf414f829cd12f008bf08f name:xe-0/0/3 ese_device_id:9f05b260-26ca-46f7-98c3-ad88e411a989]]
[36m03:04:12.979 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[377]]
[36m03:04:12.979 gohan.server.middleware DEBUG [0m Response body: {
  "ese_physical_port": {
    "connected_port_id": "",
    "connected_port_owner": "mx_downlink",
    "description": "",
    "ese_device_id": "9f05b260-26ca-46f7-98c3-ad88e411a989",
    "existing": "new",
    "id": "976156ef-05b4-47f4-9497-a36531563a08",
    "name": "xe-0/0/3",
    "status": "ACTIVE",
    "tags": {},
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:04:12.979 gohan.server.middleware INFO [0m Completed 200 OK in 70.153917ms
03:04:13.314 gohan.server.middleware INFO [0m Started GET /v2.0/ese_physical_ports/976156ef-05b4-47f4-9497-a36531563a08 for client 172.17.0.19:39686 data: 
[36m03:04:13.314 gohan.server.middleware DEBUG [0m Request headers: map[Accept:[application/json] X-Auth-Token:[***] Accept-Encoding:[gzip] User-Agent:[gophercloud/1.0.0] Connection:[close]]
[36m03:04:13.314 gohan.server.middleware DEBUG [0m Request body: 
[36m03:04:13.383 gohan.server.resources DEBUG [0m Show ese_physical_port 976156ef-05b4-47f4-9497-a36531563a08 started
[36m03:04:13.385 gohan.server.resources DEBUG [0m Show ese_physical_port 976156ef-05b4-47f4-9497-a36531563a08 completed: map[ese_physical_port:map[id:976156ef-05b4-47f4-9497-a36531563a08 connected_port_id: name:xe-0/0/3 connected_port_owner:mx_downlink ese_device_id:9f05b260-26ca-46f7-98c3-ad88e411a989 description: status:ACTIVE tags:map[] existing:new tenant_id:0b576f6f4cbf414f829cd12f008bf08f]]
[36m03:04:13.386 gohan.server.middleware DEBUG [0m Response headers: map[Content-Length:[377] Content-Type:[application/json]]
[36m03:04:13.386 gohan.server.middleware DEBUG [0m Response body: {
  "ese_physical_port": {
    "connected_port_id": "",
    "connected_port_owner": "mx_downlink",
    "description": "",
    "ese_device_id": "9f05b260-26ca-46f7-98c3-ad88e411a989",
    "existing": "new",
    "id": "976156ef-05b4-47f4-9497-a36531563a08",
    "name": "xe-0/0/3",
    "status": "ACTIVE",
    "tags": {},
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:04:13.386 gohan.server.middleware INFO [0m Completed 200 OK in 71.618629ms
03:04:13.387 gohan.server.middleware INFO [0m Started GET /v2.0/ese_physical_ports/976156ef-05b4-47f4-9497-a36531563a08 for client 172.17.0.19:39692 data: {}
[36m03:04:13.387 gohan.server.middleware DEBUG [0m Request headers: map[User-Agent:[gophercloud/1.0.0] Connection:[close] Content-Length:[2] Accept:[application/json] Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[gzip]]
[36m03:04:13.387 gohan.server.middleware DEBUG [0m Request body: {}
[36m03:04:13.456 gohan.server.resources DEBUG [0m Show ese_physical_port 976156ef-05b4-47f4-9497-a36531563a08 started
[36m03:04:13.458 gohan.server.resources DEBUG [0m Show ese_physical_port 976156ef-05b4-47f4-9497-a36531563a08 completed: map[ese_physical_port:map[connected_port_owner:mx_downlink tenant_id:0b576f6f4cbf414f829cd12f008bf08f description: status:ACTIVE id:976156ef-05b4-47f4-9497-a36531563a08 ese_device_id:9f05b260-26ca-46f7-98c3-ad88e411a989 connected_port_id: name:xe-0/0/3 tags:map[] existing:new]]
[36m03:04:13.458 gohan.server.middleware DEBUG [0m Response headers: map[Content-Length:[377] Content-Type:[application/json]]
[36m03:04:13.458 gohan.server.middleware DEBUG [0m Response body: {
  "ese_physical_port": {
    "connected_port_id": "",
    "connected_port_owner": "mx_downlink",
    "description": "",
    "ese_device_id": "9f05b260-26ca-46f7-98c3-ad88e411a989",
    "existing": "new",
    "id": "976156ef-05b4-47f4-9497-a36531563a08",
    "name": "xe-0/0/3",
    "status": "ACTIVE",
    "tags": {},
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:04:13.458 gohan.server.middleware INFO [0m Completed 200 OK in 71.557714ms
03:04:15.344 gohan.server.middleware INFO [0m Started POST /v2.0/ese_physical_ports for client 172.17.0.19:39714 data: 
{
"ese_physical_port": {
"name": "xe-0/0/4",
"ese_device_id": "9f05b260-26ca-46f7-98c3-ad88e411a989",
"connected_port_id": "",
"connected_port_owner": "mx_downlink",
"tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
}
}
[36m03:04:15.344 gohan.server.middleware DEBUG [0m Request headers: map[Content-Length:[218] Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[identity]]
[36m03:04:15.344 gohan.server.middleware DEBUG [0m Request body: 
{
"ese_physical_port": {
"name": "xe-0/0/4",
"ese_device_id": "9f05b260-26ca-46f7-98c3-ad88e411a989",
"connected_port_id": "",
"connected_port_owner": "mx_downlink",
"tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
}
}
[36m03:04:15.415 gohan.server.resources DEBUG [0m Create ese_physical_port with data map[connected_port_owner:mx_downlink tenant_id:0b576f6f4cbf414f829cd12f008bf08f name:xe-0/0/4 ese_device_id:9f05b260-26ca-46f7-98c3-ad88e411a989 connected_port_id:] started
[36m03:04:15.415 gohan.schema DEBUG [0m No properties in resource policy. Allowing all property access
[36m03:04:15.475 gohan.server.resources DEBUG [0m List ese_device query: map[id:[9f05b260-26ca-46f7-98c3-ad88e411a989]] started
[36m03:04:15.477 gohan.server.resources DEBUG [0m List ese_device query: map[id:[9f05b260-26ca-46f7-98c3-ad88e411a989]] completed
03:04:15.487 gohan.db.sql INFO [0m Executing SQL query in transaction 'faa87748-fc8a-43c6-940d-135022f65b56': 'INSERT INTO `ese_physical_ports` (`existing`,`tenant_id`,`description`,`status`,`id`,`tags`,`connected_port_owner`,`ese_device_id`,`connected_port_id`,`name`) VALUES (new,0b576f6f4cbf414f829cd12f008bf08f,,PENDING_CREATE,5b2dee2e-7420-4cd4-b270-5081eb9eb371,{},mx_downlink,9f05b260-26ca-46f7-98c3-ad88e411a989,,xe-0/0/4)'
03:04:15.487 gohan.db.sql INFO [0m Executing SQL query in transaction 'faa87748-fc8a-43c6-940d-135022f65b56': 'INSERT INTO `events` (`type`,`marked_for_deletion`,`body`,`version`,`path`,`timestamp`) VALUES (create,false,"{\"connected_port_id\":\"\",\"connected_port_owner\":\"mx_downlink\",\"description\":\"\",\"ese_device_id\":\"9f05b260-26ca-46f7-98c3-ad88e411a989\",\"existing\":\"new\",\"id\":\"5b2dee2e-7420-4cd4-b270-5081eb9eb371\",\"name\":\"xe-0/0/4\",\"status\":\"PENDING_CREATE\",\"tags\":{},\"tenant_id\":\"0b576f6f4cbf414f829cd12f008bf08f\"}",1,/v2.0/ese_physical_ports/5b2dee2e-7420-4cd4-b270-5081eb9eb371,1494471855)'
[36m03:04:15.555 gohan.server.resources DEBUG [0m Create ese_physical_port completed: map[ese_physical_port:map[description: status:PENDING_CREATE name:xe-0/0/4 tenant_id:0b576f6f4cbf414f829cd12f008bf08f id:5b2dee2e-7420-4cd4-b270-5081eb9eb371 existing:new ese_device_id:9f05b260-26ca-46f7-98c3-ad88e411a989 connected_port_id: connected_port_owner:mx_downlink tags:map[]]]
[36m03:04:15.555 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[385]]
[36m03:04:15.555 gohan.server.middleware DEBUG [0m Response body: {
  "ese_physical_port": {
    "connected_port_id": "",
    "connected_port_owner": "mx_downlink",
    "description": "",
    "ese_device_id": "9f05b260-26ca-46f7-98c3-ad88e411a989",
    "existing": "new",
    "id": "5b2dee2e-7420-4cd4-b270-5081eb9eb371",
    "name": "xe-0/0/4",
    "status": "PENDING_CREATE",
    "tags": {},
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:04:15.555 gohan.server.middleware INFO [0m Completed 201 Created in 211.561488ms
[36m03:04:15.557 gohan.server.sync DEBUG [0m Processing event 64 - create
03:04:15.557 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/ese_physical_ports/5b2dee2e-7420-4cd4-b270-5081eb9eb371
[36m03:04:15.559 gohan.server.sync DEBUG [0m Deleting event 64
03:04:15.562 gohan.db.sql INFO [0m Executing SQL query in transaction 'e608a18b-1cef-4e61-9252-82c7b610d726': 'DELETE FROM `events` WHERE id = 64'
[36m03:04:15.562 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
03:04:15.568 gohan.server.middleware INFO [0m Started GET /v2.0/ese_physical_ports/5b2dee2e-7420-4cd4-b270-5081eb9eb371 for client 172.17.0.19:39724 data: 
[36m03:04:15.568 gohan.server.middleware DEBUG [0m Request headers: map[Content-Length:[0] Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[identity]]
[36m03:04:15.568 gohan.server.middleware DEBUG [0m Request body: 
[36m03:04:15.664 gohan.server.resources DEBUG [0m Show ese_physical_port 5b2dee2e-7420-4cd4-b270-5081eb9eb371 started
[36m03:04:15.666 gohan.server.resources DEBUG [0m Show ese_physical_port 5b2dee2e-7420-4cd4-b270-5081eb9eb371 completed: map[ese_physical_port:map[tenant_id:0b576f6f4cbf414f829cd12f008bf08f description: id:5b2dee2e-7420-4cd4-b270-5081eb9eb371 existing:new connected_port_id: name:xe-0/0/4 status:PENDING_CREATE tags:map[] ese_device_id:9f05b260-26ca-46f7-98c3-ad88e411a989 connected_port_owner:mx_downlink]]
[36m03:04:15.667 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[385]]
[36m03:04:15.667 gohan.server.middleware DEBUG [0m Response body: {
  "ese_physical_port": {
    "connected_port_id": "",
    "connected_port_owner": "mx_downlink",
    "description": "",
    "ese_device_id": "9f05b260-26ca-46f7-98c3-ad88e411a989",
    "existing": "new",
    "id": "5b2dee2e-7420-4cd4-b270-5081eb9eb371",
    "name": "xe-0/0/4",
    "status": "PENDING_CREATE",
    "tags": {},
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:04:15.667 gohan.server.middleware INFO [0m Completed 200 OK in 98.516694ms
03:04:16.677 gohan.server.middleware INFO [0m Started GET /v2.0/ese_physical_ports/5b2dee2e-7420-4cd4-b270-5081eb9eb371 for client 172.17.0.19:39742 data: 
[36m03:04:16.677 gohan.server.middleware DEBUG [0m Request headers: map[Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[identity] Content-Length:[0]]
[36m03:04:16.678 gohan.server.middleware DEBUG [0m Request body: 
[36m03:04:16.760 gohan.server.resources DEBUG [0m Show ese_physical_port 5b2dee2e-7420-4cd4-b270-5081eb9eb371 started
[36m03:04:16.763 gohan.server.resources DEBUG [0m Show ese_physical_port 5b2dee2e-7420-4cd4-b270-5081eb9eb371 completed: map[ese_physical_port:map[connected_port_owner:mx_downlink ese_device_id:9f05b260-26ca-46f7-98c3-ad88e411a989 status:PENDING_CREATE tags:map[] tenant_id:0b576f6f4cbf414f829cd12f008bf08f connected_port_id: name:xe-0/0/4 existing:new description: id:5b2dee2e-7420-4cd4-b270-5081eb9eb371]]
[36m03:04:16.763 gohan.server.middleware DEBUG [0m Response headers: map[Content-Length:[385] Content-Type:[application/json]]
[36m03:04:16.763 gohan.server.middleware DEBUG [0m Response body: {
  "ese_physical_port": {
    "connected_port_id": "",
    "connected_port_owner": "mx_downlink",
    "description": "",
    "ese_device_id": "9f05b260-26ca-46f7-98c3-ad88e411a989",
    "existing": "new",
    "id": "5b2dee2e-7420-4cd4-b270-5081eb9eb371",
    "name": "xe-0/0/4",
    "status": "PENDING_CREATE",
    "tags": {},
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:04:16.763 gohan.server.middleware INFO [0m Completed 200 OK in 86.093516ms
03:04:17.773 gohan.server.middleware INFO [0m Started GET /v2.0/ese_physical_ports/5b2dee2e-7420-4cd4-b270-5081eb9eb371 for client 172.17.0.19:39754 data: 
[36m03:04:17.773 gohan.server.middleware DEBUG [0m Request headers: map[Content-Length:[0] Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[identity]]
[36m03:04:17.773 gohan.server.middleware DEBUG [0m Request body: 
[36m03:04:17.805 gohan.server DEBUG [0m State event update received: set /state/v2.0/ese_physical_ports/5b2dee2e-7420-4cd4-b270-5081eb9eb371 map[error: state:map[heat_outputs:[{"output_value": "dddddddd-dddd-dddd-dddd-dddddddddddd", "description": "A unique id for the physical interface", "output_key": "id"}, {"output_value": null, "output_error": "'ContrailPhysicalInterface' object has no attribute 'pi_uuid'", "description": "The name of the physical interface.", "output_key": "name"}] state_monitoring:{"port": "ACTIVE"} worker_state:CREATE_COMPLETED] version:1]
03:04:17.805 gohan.server.sync INFO [0m StateUpdate for set /state/v2.0/ese_physical_ports/5b2dee2e-7420-4cd4-b270-5081eb9eb371 map[version:1 error: state:map[heat_outputs:[{"output_value": "dddddddd-dddd-dddd-dddd-dddddddddddd", "description": "A unique id for the physical interface", "output_key": "id"}, {"output_value": null, "output_error": "'ContrailPhysicalInterface' object has no attribute 'pi_uuid'", "description": "The name of the physical interface.", "output_key": "name"}] state_monitoring:{"port": "ACTIVE"} worker_state:CREATE_COMPLETED]] started
03:04:17.813 gohan.sync INFO [0m Locked gohan/cluster/lock/state/v2.0/ese_physical_ports/5b2dee2e-7420-4cd4-b270-5081eb9eb371 with index 195
03:04:17.888 gohan.db.sql INFO [0m Executing SQL query in transaction 'bd6b54bf-0fd3-4eae-9de6-f02d0706c0bf': 'UPDATE `ese_physical_ports` SET `ese_device_id` = 9f05b260-26ca-46f7-98c3-ad88e411a989, `connected_port_id` = , `name` = xe-0/0/4, `connected_port_owner` = mx_downlink, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `description` = , `status` = PENDING_CREATE, `id` = 5b2dee2e-7420-4cd4-b270-5081eb9eb371, `tags` = {}, `existing` = new, ese_device_id = 9f05b260-26ca-46f7-98c3-ad88e411a989, `state_version` = 1, `monitoring_version` = 0, `state_error` = , `state` = {"error":"","state":{"heat_outputs":"[{\"output_value\": \"dddddddd-dddd-dddd-dddd-dddddddddddd\", \"description\": \"A unique id for the physical interface\", \"output_key\": \"id\"}, {\"output_value\": null, \"output_error\": \"'ContrailPhysicalInterface' object has no attribute 'pi_uuid'\", \"description\": \"The name of the physical interface.\", \"output_key\": \"name\"}]","state_monitoring":"{\"port\": \"ACTIVE\"}","worker_state":"CREATE_COMPLETED"}}, `state_monitoring` = {}, `marked_for_deletion` = 0 WHERE id = 5b2dee2e-7420-4cd4-b270-5081eb9eb371'
[36m03:04:17.889 gohan.server.resources DEBUG [0m Show ese_physical_port 5b2dee2e-7420-4cd4-b270-5081eb9eb371 started
03:04:17.889 gohan.extension.ese_physical_port.post_state_update_in_transaction INFO [0m Config version: 1, State version: 1, Monitoring version: 0
03:04:17.890 gohan.extension.ese_physical_port.post_state_update_in_transaction INFO [0m Reading monitoring data from worker state: {"port": "ACTIVE"}
[36m03:04:17.891 gohan.server.resources DEBUG [0m Show ese_physical_port 5b2dee2e-7420-4cd4-b270-5081eb9eb371 completed: map[ese_physical_port:map[name:xe-0/0/4 id:5b2dee2e-7420-4cd4-b270-5081eb9eb371 existing:new description: status:PENDING_CREATE connected_port_owner:mx_downlink ese_device_id:9f05b260-26ca-46f7-98c3-ad88e411a989 connected_port_id: tags:map[] tenant_id:0b576f6f4cbf414f829cd12f008bf08f]]
[36m03:04:17.891 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[385]]
[36m03:04:17.891 gohan.server.middleware DEBUG [0m Response body: {
  "ese_physical_port": {
    "connected_port_id": "",
    "connected_port_owner": "mx_downlink",
    "description": "",
    "ese_device_id": "9f05b260-26ca-46f7-98c3-ad88e411a989",
    "existing": "new",
    "id": "5b2dee2e-7420-4cd4-b270-5081eb9eb371",
    "name": "xe-0/0/4",
    "status": "PENDING_CREATE",
    "tags": {},
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:04:17.891 gohan.server.middleware INFO [0m Completed 200 OK in 118.389081ms
03:04:17.892 gohan.db.sql INFO [0m Executing SQL query in transaction 'bd6b54bf-0fd3-4eae-9de6-f02d0706c0bf': 'UPDATE `ese_physical_ports` SET `ese_device_id` = 9f05b260-26ca-46f7-98c3-ad88e411a989, `connected_port_id` = , `name` = xe-0/0/4, `connected_port_owner` = mx_downlink, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `description` = , `status` = ACTIVE, `id` = 5b2dee2e-7420-4cd4-b270-5081eb9eb371, `tags` = {}, `existing` = new, ese_device_id = 9f05b260-26ca-46f7-98c3-ad88e411a989 WHERE id = 5b2dee2e-7420-4cd4-b270-5081eb9eb371'
03:04:17.919 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/state/v2.0/ese_physical_ports/5b2dee2e-7420-4cd4-b270-5081eb9eb371 with index 195
03:04:17.926 gohan.sync INFO [0m Path gohan/cluster/lock/state/v2.0/ese_physical_ports/5b2dee2e-7420-4cd4-b270-5081eb9eb371 already unlocked or not locked
[36m03:04:17.959 gohan.server DEBUG [0m Monitoring Watcher starts watch
[31m03:04:17.959 gohan.sync.etcd ERROR [0m watch error: 100: Key not found (/monitoring) [203]
[31m03:04:17.960 gohan.server ERROR [0m sync watch error: 100: Key not found (/monitoring) [203]
03:04:18.900 gohan.server.middleware INFO [0m Started GET /v2.0/ese_physical_ports/5b2dee2e-7420-4cd4-b270-5081eb9eb371 for client 172.17.0.19:39774 data: 
[36m03:04:18.901 gohan.server.middleware DEBUG [0m Request headers: map[X-Auth-Token:[***] Accept-Encoding:[identity] Content-Length:[0] Content-Type:[application/json]]
[36m03:04:18.901 gohan.server.middleware DEBUG [0m Request body: 
[36m03:04:18.989 gohan.server.resources DEBUG [0m Show ese_physical_port 5b2dee2e-7420-4cd4-b270-5081eb9eb371 started
[36m03:04:18.992 gohan.server.resources DEBUG [0m Show ese_physical_port 5b2dee2e-7420-4cd4-b270-5081eb9eb371 completed: map[ese_physical_port:map[id:5b2dee2e-7420-4cd4-b270-5081eb9eb371 tenant_id:0b576f6f4cbf414f829cd12f008bf08f name:xe-0/0/4 connected_port_owner:mx_downlink ese_device_id:9f05b260-26ca-46f7-98c3-ad88e411a989 description: status:ACTIVE tags:map[] existing:new connected_port_id:]]
[36m03:04:18.992 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[377]]
[36m03:04:18.992 gohan.server.middleware DEBUG [0m Response body: {
  "ese_physical_port": {
    "connected_port_id": "",
    "connected_port_owner": "mx_downlink",
    "description": "",
    "ese_device_id": "9f05b260-26ca-46f7-98c3-ad88e411a989",
    "existing": "new",
    "id": "5b2dee2e-7420-4cd4-b270-5081eb9eb371",
    "name": "xe-0/0/4",
    "status": "ACTIVE",
    "tags": {},
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:04:18.992 gohan.server.middleware INFO [0m Completed 200 OK in 91.788399ms
03:04:19.397 gohan.server.middleware INFO [0m Started GET /v2.0/ese_physical_ports/5b2dee2e-7420-4cd4-b270-5081eb9eb371 for client 172.17.0.19:39782 data: 
[36m03:04:19.397 gohan.server.middleware DEBUG [0m Request headers: map[Accept:[application/json] X-Auth-Token:[***] Accept-Encoding:[gzip] User-Agent:[gophercloud/1.0.0] Connection:[close]]
[36m03:04:19.397 gohan.server.middleware DEBUG [0m Request body: 
[36m03:04:19.477 gohan.server.resources DEBUG [0m Show ese_physical_port 5b2dee2e-7420-4cd4-b270-5081eb9eb371 started
[36m03:04:19.480 gohan.server.resources DEBUG [0m Show ese_physical_port 5b2dee2e-7420-4cd4-b270-5081eb9eb371 completed: map[ese_physical_port:map[id:5b2dee2e-7420-4cd4-b270-5081eb9eb371 name:xe-0/0/4 tenant_id:0b576f6f4cbf414f829cd12f008bf08f description: status:ACTIVE connected_port_owner:mx_downlink ese_device_id:9f05b260-26ca-46f7-98c3-ad88e411a989 connected_port_id: tags:map[] existing:new]]
[36m03:04:19.480 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[377]]
[36m03:04:19.480 gohan.server.middleware DEBUG [0m Response body: {
  "ese_physical_port": {
    "connected_port_id": "",
    "connected_port_owner": "mx_downlink",
    "description": "",
    "ese_device_id": "9f05b260-26ca-46f7-98c3-ad88e411a989",
    "existing": "new",
    "id": "5b2dee2e-7420-4cd4-b270-5081eb9eb371",
    "name": "xe-0/0/4",
    "status": "ACTIVE",
    "tags": {},
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:04:19.481 gohan.server.middleware INFO [0m Completed 200 OK in 83.431ms
03:04:19.482 gohan.server.middleware INFO [0m Started GET /v2.0/ese_physical_ports/5b2dee2e-7420-4cd4-b270-5081eb9eb371 for client 172.17.0.19:39788 data: {}
[36m03:04:19.482 gohan.server.middleware DEBUG [0m Request headers: map[Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[gzip] User-Agent:[gophercloud/1.0.0] Connection:[close] Content-Length:[2] Accept:[application/json]]
[36m03:04:19.482 gohan.server.middleware DEBUG [0m Request body: {}
[36m03:04:19.566 gohan.server.resources DEBUG [0m Show ese_physical_port 5b2dee2e-7420-4cd4-b270-5081eb9eb371 started
[36m03:04:19.569 gohan.server.resources DEBUG [0m Show ese_physical_port 5b2dee2e-7420-4cd4-b270-5081eb9eb371 completed: map[ese_physical_port:map[connected_port_owner:mx_downlink description: id:5b2dee2e-7420-4cd4-b270-5081eb9eb371 tags:map[] existing:new name:xe-0/0/4 connected_port_id: tenant_id:0b576f6f4cbf414f829cd12f008bf08f status:ACTIVE ese_device_id:9f05b260-26ca-46f7-98c3-ad88e411a989]]
[36m03:04:19.570 gohan.server.middleware DEBUG [0m Response headers: map[Content-Length:[377] Content-Type:[application/json]]
[36m03:04:19.570 gohan.server.middleware DEBUG [0m Response body: {
  "ese_physical_port": {
    "connected_port_id": "",
    "connected_port_owner": "mx_downlink",
    "description": "",
    "ese_device_id": "9f05b260-26ca-46f7-98c3-ad88e411a989",
    "existing": "new",
    "id": "5b2dee2e-7420-4cd4-b270-5081eb9eb371",
    "name": "xe-0/0/4",
    "status": "ACTIVE",
    "tags": {},
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:04:19.570 gohan.server.middleware INFO [0m Completed 200 OK in 87.71454ms
03:04:21.795 gohan.server.middleware INFO [0m Started POST /v2.0/edge_routers for client 172.17.0.19:39808 data: 
{
"edge_router": {
"autonomous_system": "65101",
"description": "MX80 #2",
"ip": "10.79.5.185",
"name": "vMX-router-02",
"login": "esi",
"password": "esiesi0000",
"ssh_port": 830,
"tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
}
}
[36m03:04:21.795 gohan.server.middleware DEBUG [0m Request headers: map[Accept-Encoding:[identity] Content-Length:[232] Content-Type:[application/json] X-Auth-Token:[***]]
[36m03:04:21.795 gohan.server.middleware DEBUG [0m Request body: 
{
"edge_router": {
"autonomous_system": "65101",
"description": "MX80 #2",
"ip": "10.79.5.185",
"name": "vMX-router-02",
"login": "esi",
"password": "esiesi0000",
"ssh_port": 830,
"tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
}
}
[36m03:04:21.873 gohan.server.resources DEBUG [0m Create edge_router with data map[tenant_id:0b576f6f4cbf414f829cd12f008bf08f autonomous_system:65101 description:MX80 #2 ip:10.79.5.185 name:vMX-router-02 login:esi password:esiesi0000 ssh_port:830] started
[36m03:04:21.873 gohan.schema DEBUG [0m No properties in resource policy. Allowing all property access
03:04:21.879 gohan.db.sql INFO [0m Executing SQL query in transaction 'ff8e667c-0981-400e-b6fa-5ec966e049bd': 'INSERT INTO `edge_routers` (`status`,`name`,`login`,`ip`,`tenant_id`,`id`,`ssh_port`,`description`,`password`,`autonomous_system`) VALUES (PENDING_CREATE,vMX-router-02,esi,10.79.5.185,0b576f6f4cbf414f829cd12f008bf08f,8aba84f9-4675-4d22-a231-e9eabde80818,830,MX80 #2,esiesi0000,65101)'
03:04:21.879 gohan.db.sql INFO [0m Executing SQL query in transaction 'ff8e667c-0981-400e-b6fa-5ec966e049bd': 'INSERT INTO `events` (`version`,`path`,`timestamp`,`type`,`marked_for_deletion`,`body`) VALUES (1,/v2.0/edge_routers/8aba84f9-4675-4d22-a231-e9eabde80818,1494471861,create,false,"{\"autonomous_system\":\"65101\",\"description\":\"MX80 #2\",\"id\":\"8aba84f9-4675-4d22-a231-e9eabde80818\",\"ip\":\"10.79.5.185\",\"login\":\"esi\",\"name\":\"vMX-router-02\",\"password\":\"esiesi0000\",\"ssh_port\":830,\"status\":\"PENDING_CREATE\",\"tenant_id\":\"0b576f6f4cbf414f829cd12f008bf08f\"}")'
[36m03:04:21.890 gohan.server.resources DEBUG [0m Create edge_router completed: map[edge_router:map[ip:10.79.5.185 name:vMX-router-02 password:esiesi0000 ssh_port:830 tenant_id:0b576f6f4cbf414f829cd12f008bf08f id:8aba84f9-4675-4d22-a231-e9eabde80818 status:PENDING_CREATE autonomous_system:65101 description:MX80 #2 login:esi]]
[36m03:04:21.891 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[349]]
[36m03:04:21.891 gohan.server.middleware DEBUG [0m Response body: {
  "edge_router": {
    "autonomous_system": "65101",
    "description": "MX80 #2",
    "id": "8aba84f9-4675-4d22-a231-e9eabde80818",
    "ip": "10.79.5.185",
    "login": "esi",
    "name": "vMX-router-02",
    "password": "esiesi0000",
    "ssh_port": 830,
    "status": "PENDING_CREATE",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:04:21.891 gohan.server.middleware INFO [0m Completed 201 Created in 95.816114ms
[36m03:04:21.894 gohan.server.sync DEBUG [0m Processing event 65 - create
03:04:21.894 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/edge_routers/8aba84f9-4675-4d22-a231-e9eabde80818
[36m03:04:21.899 gohan.server.sync DEBUG [0m Deleting event 65
03:04:21.901 gohan.db.sql INFO [0m Executing SQL query in transaction '890bbe1c-8a8e-4abd-b452-8af8af66e3d3': 'DELETE FROM `events` WHERE id = 65'
[36m03:04:21.902 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
03:04:21.919 gohan.server.middleware INFO [0m Started GET /v2.0/edge_routers/8aba84f9-4675-4d22-a231-e9eabde80818 for client 172.17.0.19:39820 data: 
[36m03:04:21.920 gohan.server.middleware DEBUG [0m Request headers: map[Content-Length:[0] Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[identity]]
[36m03:04:21.920 gohan.server.middleware DEBUG [0m Request body: 
[36m03:04:22.024 gohan.server.resources DEBUG [0m Show edge_router 8aba84f9-4675-4d22-a231-e9eabde80818 started
[36m03:04:22.027 gohan.server.resources DEBUG [0m Show edge_router 8aba84f9-4675-4d22-a231-e9eabde80818 completed: map[edge_router:map[password:esiesi0000 ssh_port:830 tenant_id:0b576f6f4cbf414f829cd12f008bf08f id:8aba84f9-4675-4d22-a231-e9eabde80818 status:PENDING_CREATE description:MX80 #2 autonomous_system:65101 ip:10.79.5.185 name:vMX-router-02 login:esi]]
[36m03:04:22.027 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[349]]
[36m03:04:22.027 gohan.server.middleware DEBUG [0m Response body: {
  "edge_router": {
    "autonomous_system": "65101",
    "description": "MX80 #2",
    "id": "8aba84f9-4675-4d22-a231-e9eabde80818",
    "ip": "10.79.5.185",
    "login": "esi",
    "name": "vMX-router-02",
    "password": "esiesi0000",
    "ssh_port": 830,
    "status": "PENDING_CREATE",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:04:22.027 gohan.server.middleware INFO [0m Completed 200 OK in 107.576006ms
[36m03:04:22.033 gohan.server DEBUG [0m State event update received: set /state/v2.0/edge_routers/8aba84f9-4675-4d22-a231-e9eabde80818 map[error: state:map[state_monitoring:{"router": "ACTIVE"} worker_state:CREATE_COMPLETED] version:1]
03:04:22.033 gohan.server.sync INFO [0m StateUpdate for set /state/v2.0/edge_routers/8aba84f9-4675-4d22-a231-e9eabde80818 map[version:1 error: state:map[state_monitoring:{"router": "ACTIVE"} worker_state:CREATE_COMPLETED]] started
03:04:22.044 gohan.sync INFO [0m Locked gohan/cluster/lock/state/v2.0/edge_routers/8aba84f9-4675-4d22-a231-e9eabde80818 with index 216
03:04:22.125 gohan.db.sql INFO [0m Executing SQL query in transaction '9511a171-b0d3-4286-b1cf-219be17d11b5': 'UPDATE `edge_routers` SET `login` = esi, `ip` = 10.79.5.185, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `id` = 8aba84f9-4675-4d22-a231-e9eabde80818, `status` = PENDING_CREATE, `name` = vMX-router-02, `description` = MX80 #2, `password` = esiesi0000, `autonomous_system` = 65101, `ssh_port` = 830, `state_version` = 1, `monitoring_version` = 0, `state_error` = , `state` = {"error":"","state":{"state_monitoring":"{\"router\": \"ACTIVE\"}","worker_state":"CREATE_COMPLETED"}}, `state_monitoring` = {}, `marked_for_deletion` = 0 WHERE id = 8aba84f9-4675-4d22-a231-e9eabde80818'
03:04:22.127 gohan.extension.edge_router.post_state_update_in_transaction INFO [0m Config version: 1, State version: 1, Monitoring version: 0
03:04:22.127 gohan.extension.edge_router.post_state_update_in_transaction INFO [0m Reading monitoring data from worker state: {"router": "ACTIVE"}
03:04:22.128 gohan.db.sql INFO [0m Executing SQL query in transaction '9511a171-b0d3-4286-b1cf-219be17d11b5': 'UPDATE `edge_routers` SET `description` = MX80 #2, `password` = esiesi0000, `autonomous_system` = 65101, `ssh_port` = 830, `ip` = 10.79.5.185, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `id` = 8aba84f9-4675-4d22-a231-e9eabde80818, `status` = ACTIVE, `name` = vMX-router-02, `login` = esi WHERE id = 8aba84f9-4675-4d22-a231-e9eabde80818'
03:04:22.140 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/state/v2.0/edge_routers/8aba84f9-4675-4d22-a231-e9eabde80818 with index 216
03:04:22.149 gohan.sync INFO [0m Path gohan/cluster/lock/state/v2.0/edge_routers/8aba84f9-4675-4d22-a231-e9eabde80818 already unlocked or not locked
[36m03:04:22.960 gohan.server DEBUG [0m Monitoring Watcher starts watch
[31m03:04:22.960 gohan.sync.etcd ERROR [0m watch error: 100: Key not found (/monitoring) [224]
[31m03:04:22.961 gohan.server ERROR [0m sync watch error: 100: Key not found (/monitoring) [224]
03:04:23.038 gohan.server.middleware INFO [0m Started GET /v2.0/edge_routers/8aba84f9-4675-4d22-a231-e9eabde80818 for client 172.17.0.19:39844 data: 
[36m03:04:23.038 gohan.server.middleware DEBUG [0m Request headers: map[Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[identity] Content-Length:[0]]
[36m03:04:23.038 gohan.server.middleware DEBUG [0m Request body: 
[36m03:04:23.124 gohan.server.resources DEBUG [0m Show edge_router 8aba84f9-4675-4d22-a231-e9eabde80818 started
[36m03:04:23.127 gohan.server.resources DEBUG [0m Show edge_router 8aba84f9-4675-4d22-a231-e9eabde80818 completed: map[edge_router:map[password:esiesi0000 autonomous_system:65101 id:8aba84f9-4675-4d22-a231-e9eabde80818 status:ACTIVE name:vMX-router-02 ip:10.79.5.185 ssh_port:830 description:MX80 #2 tenant_id:0b576f6f4cbf414f829cd12f008bf08f login:esi]]
[36m03:04:23.127 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[341]]
[36m03:04:23.127 gohan.server.middleware DEBUG [0m Response body: {
  "edge_router": {
    "autonomous_system": "65101",
    "description": "MX80 #2",
    "id": "8aba84f9-4675-4d22-a231-e9eabde80818",
    "ip": "10.79.5.185",
    "login": "esi",
    "name": "vMX-router-02",
    "password": "esiesi0000",
    "ssh_port": 830,
    "status": "ACTIVE",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:04:23.127 gohan.server.middleware INFO [0m Completed 200 OK in 89.275811ms
03:04:23.543 gohan.server.middleware INFO [0m Started GET /v2.0/edge_routers/8aba84f9-4675-4d22-a231-e9eabde80818 for client 172.17.0.19:39852 data: 
[36m03:04:23.543 gohan.server.middleware DEBUG [0m Request headers: map[User-Agent:[gophercloud/1.0.0] Connection:[close] Accept:[application/json] X-Auth-Token:[***] Accept-Encoding:[gzip]]
[36m03:04:23.544 gohan.server.middleware DEBUG [0m Request body: 
[36m03:04:23.621 gohan.server.resources DEBUG [0m Show edge_router 8aba84f9-4675-4d22-a231-e9eabde80818 started
[36m03:04:23.623 gohan.server.resources DEBUG [0m Show edge_router 8aba84f9-4675-4d22-a231-e9eabde80818 completed: map[edge_router:map[name:vMX-router-02 ip:10.79.5.185 id:8aba84f9-4675-4d22-a231-e9eabde80818 ssh_port:830 description:MX80 #2 status:ACTIVE login:esi tenant_id:0b576f6f4cbf414f829cd12f008bf08f password:esiesi0000 autonomous_system:65101]]
[36m03:04:23.623 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[341]]
[36m03:04:23.623 gohan.server.middleware DEBUG [0m Response body: {
  "edge_router": {
    "autonomous_system": "65101",
    "description": "MX80 #2",
    "id": "8aba84f9-4675-4d22-a231-e9eabde80818",
    "ip": "10.79.5.185",
    "login": "esi",
    "name": "vMX-router-02",
    "password": "esiesi0000",
    "ssh_port": 830,
    "status": "ACTIVE",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:04:23.623 gohan.server.middleware INFO [0m Completed 200 OK in 79.923996ms
03:04:23.624 gohan.server.middleware INFO [0m Started GET /v2.0/edge_routers/8aba84f9-4675-4d22-a231-e9eabde80818 for client 172.17.0.19:39858 data: {}
[36m03:04:23.624 gohan.server.middleware DEBUG [0m Request headers: map[User-Agent:[gophercloud/1.0.0] Connection:[close] Content-Length:[2] Accept:[application/json] Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[gzip]]
[36m03:04:23.624 gohan.server.middleware DEBUG [0m Request body: {}
[36m03:04:23.686 gohan.server.resources DEBUG [0m Show edge_router 8aba84f9-4675-4d22-a231-e9eabde80818 started
[36m03:04:23.689 gohan.server.resources DEBUG [0m Show edge_router 8aba84f9-4675-4d22-a231-e9eabde80818 completed: map[edge_router:map[tenant_id:0b576f6f4cbf414f829cd12f008bf08f status:ACTIVE name:vMX-router-02 description:MX80 #2 ssh_port:830 ip:10.79.5.185 id:8aba84f9-4675-4d22-a231-e9eabde80818 password:esiesi0000 autonomous_system:65101 login:esi]]
[36m03:04:23.689 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[341]]
[36m03:04:23.689 gohan.server.middleware DEBUG [0m Response body: {
  "edge_router": {
    "autonomous_system": "65101",
    "description": "MX80 #2",
    "id": "8aba84f9-4675-4d22-a231-e9eabde80818",
    "ip": "10.79.5.185",
    "login": "esi",
    "name": "vMX-router-02",
    "password": "esiesi0000",
    "ssh_port": 830,
    "status": "ACTIVE",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:04:23.689 gohan.server.middleware INFO [0m Completed 200 OK in 64.847403ms
03:04:23.704 gohan.server.middleware INFO [0m Started POST /v2.0/edge_routers for client 172.17.0.19:39864 data: 
{
"edge_router": {
"autonomous_system": "65101",
"description": "MX80 #1",
"ip": "10.79.5.184",
"name": "vMX-router-01",
"login": "esi",
"password": "esiesi0000",
"ssh_port": 830,
"tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
}
}
[36m03:04:23.704 gohan.server.middleware DEBUG [0m Request headers: map[Accept-Encoding:[identity] Content-Length:[232] Content-Type:[application/json] X-Auth-Token:[***]]
[36m03:04:23.704 gohan.server.middleware DEBUG [0m Request body: 
{
"edge_router": {
"autonomous_system": "65101",
"description": "MX80 #1",
"ip": "10.79.5.184",
"name": "vMX-router-01",
"login": "esi",
"password": "esiesi0000",
"ssh_port": 830,
"tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
}
}
[36m03:04:23.771 gohan.server.resources DEBUG [0m Create edge_router with data map[tenant_id:0b576f6f4cbf414f829cd12f008bf08f autonomous_system:65101 description:MX80 #1 ip:10.79.5.184 name:vMX-router-01 login:esi password:esiesi0000 ssh_port:830] started
[36m03:04:23.771 gohan.schema DEBUG [0m No properties in resource policy. Allowing all property access
03:04:23.777 gohan.db.sql INFO [0m Executing SQL query in transaction '8c58724a-1d32-4a82-a9ec-4558703e614d': 'INSERT INTO `edge_routers` (`status`,`name`,`login`,`ip`,`tenant_id`,`id`,`ssh_port`,`description`,`password`,`autonomous_system`) VALUES (PENDING_CREATE,vMX-router-01,esi,10.79.5.184,0b576f6f4cbf414f829cd12f008bf08f,769b5e3b-3320-41ec-9be0-4567b50f1aab,830,MX80 #1,esiesi0000,65101)'
03:04:23.777 gohan.db.sql INFO [0m Executing SQL query in transaction '8c58724a-1d32-4a82-a9ec-4558703e614d': 'INSERT INTO `events` (`marked_for_deletion`,`body`,`version`,`path`,`timestamp`,`type`) VALUES (false,"{\"autonomous_system\":\"65101\",\"description\":\"MX80 #1\",\"id\":\"769b5e3b-3320-41ec-9be0-4567b50f1aab\",\"ip\":\"10.79.5.184\",\"login\":\"esi\",\"name\":\"vMX-router-01\",\"password\":\"esiesi0000\",\"ssh_port\":830,\"status\":\"PENDING_CREATE\",\"tenant_id\":\"0b576f6f4cbf414f829cd12f008bf08f\"}",1,/v2.0/edge_routers/769b5e3b-3320-41ec-9be0-4567b50f1aab,1494471863,create)'
[36m03:04:23.793 gohan.server.resources DEBUG [0m Create edge_router completed: map[edge_router:map[autonomous_system:65101 name:vMX-router-01 login:esi ssh_port:830 id:769b5e3b-3320-41ec-9be0-4567b50f1aab status:PENDING_CREATE description:MX80 #1 ip:10.79.5.184 password:esiesi0000 tenant_id:0b576f6f4cbf414f829cd12f008bf08f]]
[36m03:04:23.794 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[349]]
[36m03:04:23.794 gohan.server.middleware DEBUG [0m Response body: {
  "edge_router": {
    "autonomous_system": "65101",
    "description": "MX80 #1",
    "id": "769b5e3b-3320-41ec-9be0-4567b50f1aab",
    "ip": "10.79.5.184",
    "login": "esi",
    "name": "vMX-router-01",
    "password": "esiesi0000",
    "ssh_port": 830,
    "status": "PENDING_CREATE",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:04:23.794 gohan.server.middleware INFO [0m Completed 201 Created in 90.569227ms
[36m03:04:23.796 gohan.server.sync DEBUG [0m Processing event 66 - create
03:04:23.796 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/edge_routers/769b5e3b-3320-41ec-9be0-4567b50f1aab
[36m03:04:23.799 gohan.server.sync DEBUG [0m Deleting event 66
03:04:23.800 gohan.db.sql INFO [0m Executing SQL query in transaction '3975dd8b-1610-4acd-99c5-151a5cd6c606': 'DELETE FROM `events` WHERE id = 66'
[36m03:04:23.801 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
03:04:23.808 gohan.server.middleware INFO [0m Started GET /v2.0/edge_routers/769b5e3b-3320-41ec-9be0-4567b50f1aab for client 172.17.0.19:39872 data: 
[36m03:04:23.808 gohan.server.middleware DEBUG [0m Request headers: map[X-Auth-Token:[***] Accept-Encoding:[identity] Content-Length:[0] Content-Type:[application/json]]
[36m03:04:23.809 gohan.server.middleware DEBUG [0m Request body: 
[36m03:04:23.906 gohan.server DEBUG [0m State event update received: set /state/v2.0/edge_routers/769b5e3b-3320-41ec-9be0-4567b50f1aab map[error: state:map[state_monitoring:{"router": "ACTIVE"} worker_state:CREATE_COMPLETED] version:1]
03:04:23.907 gohan.server.sync INFO [0m StateUpdate for set /state/v2.0/edge_routers/769b5e3b-3320-41ec-9be0-4567b50f1aab map[error: state:map[state_monitoring:{"router": "ACTIVE"} worker_state:CREATE_COMPLETED] version:1] started
[36m03:04:23.910 gohan.server.resources DEBUG [0m Show edge_router 769b5e3b-3320-41ec-9be0-4567b50f1aab started
[36m03:04:23.912 gohan.server.resources DEBUG [0m Show edge_router 769b5e3b-3320-41ec-9be0-4567b50f1aab completed: map[edge_router:map[password:esiesi0000 id:769b5e3b-3320-41ec-9be0-4567b50f1aab status:PENDING_CREATE name:vMX-router-01 description:MX80 #1 autonomous_system:65101 ssh_port:830 ip:10.79.5.184 tenant_id:0b576f6f4cbf414f829cd12f008bf08f login:esi]]
[36m03:04:23.913 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[349]]
03:04:23.913 gohan.sync INFO [0m Locked gohan/cluster/lock/state/v2.0/edge_routers/769b5e3b-3320-41ec-9be0-4567b50f1aab with index 237
[36m03:04:23.913 gohan.server.middleware DEBUG [0m Response body: {
  "edge_router": {
    "autonomous_system": "65101",
    "description": "MX80 #1",
    "id": "769b5e3b-3320-41ec-9be0-4567b50f1aab",
    "ip": "10.79.5.184",
    "login": "esi",
    "name": "vMX-router-01",
    "password": "esiesi0000",
    "ssh_port": 830,
    "status": "PENDING_CREATE",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:04:23.913 gohan.server.middleware INFO [0m Completed 200 OK in 105.130531ms
03:04:23.990 gohan.db.sql INFO [0m Executing SQL query in transaction '0f489e2b-c6d3-402b-84c8-bd0debb61783': 'UPDATE `edge_routers` SET `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `id` = 769b5e3b-3320-41ec-9be0-4567b50f1aab, `status` = PENDING_CREATE, `name` = vMX-router-01, `login` = esi, `ip` = 10.79.5.184, `password` = esiesi0000, `autonomous_system` = 65101, `ssh_port` = 830, `description` = MX80 #1, `state_version` = 1, `monitoring_version` = 0, `state_error` = , `state` = {"error":"","state":{"state_monitoring":"{\"router\": \"ACTIVE\"}","worker_state":"CREATE_COMPLETED"}}, `state_monitoring` = {}, `marked_for_deletion` = 0 WHERE id = 769b5e3b-3320-41ec-9be0-4567b50f1aab'
03:04:23.992 gohan.extension.edge_router.post_state_update_in_transaction INFO [0m Config version: 1, State version: 1, Monitoring version: 0
03:04:23.992 gohan.extension.edge_router.post_state_update_in_transaction INFO [0m Reading monitoring data from worker state: {"router": "ACTIVE"}
03:04:23.993 gohan.db.sql INFO [0m Executing SQL query in transaction '0f489e2b-c6d3-402b-84c8-bd0debb61783': 'UPDATE `edge_routers` SET `password` = esiesi0000, `autonomous_system` = 65101, `ssh_port` = 830, `description` = MX80 #1, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `id` = 769b5e3b-3320-41ec-9be0-4567b50f1aab, `status` = ACTIVE, `name` = vMX-router-01, `login` = esi, `ip` = 10.79.5.184 WHERE id = 769b5e3b-3320-41ec-9be0-4567b50f1aab'
03:04:24.007 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/state/v2.0/edge_routers/769b5e3b-3320-41ec-9be0-4567b50f1aab with index 237
03:04:24.018 gohan.sync INFO [0m Path gohan/cluster/lock/state/v2.0/edge_routers/769b5e3b-3320-41ec-9be0-4567b50f1aab already unlocked or not locked
03:04:24.924 gohan.server.middleware INFO [0m Started GET /v2.0/edge_routers/769b5e3b-3320-41ec-9be0-4567b50f1aab for client 172.17.0.19:39894 data: 
[36m03:04:24.924 gohan.server.middleware DEBUG [0m Request headers: map[X-Auth-Token:[***] Accept-Encoding:[identity] Content-Length:[0] Content-Type:[application/json]]
[36m03:04:24.924 gohan.server.middleware DEBUG [0m Request body: 
[36m03:04:25.005 gohan.server.resources DEBUG [0m Show edge_router 769b5e3b-3320-41ec-9be0-4567b50f1aab started
[36m03:04:25.008 gohan.server.resources DEBUG [0m Show edge_router 769b5e3b-3320-41ec-9be0-4567b50f1aab completed: map[edge_router:map[autonomous_system:65101 login:esi ip:10.79.5.184 description:MX80 #1 password:esiesi0000 ssh_port:830 name:vMX-router-01 tenant_id:0b576f6f4cbf414f829cd12f008bf08f id:769b5e3b-3320-41ec-9be0-4567b50f1aab status:ACTIVE]]
[36m03:04:25.008 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[341]]
[36m03:04:25.008 gohan.server.middleware DEBUG [0m Response body: {
  "edge_router": {
    "autonomous_system": "65101",
    "description": "MX80 #1",
    "id": "769b5e3b-3320-41ec-9be0-4567b50f1aab",
    "ip": "10.79.5.184",
    "login": "esi",
    "name": "vMX-router-01",
    "password": "esiesi0000",
    "ssh_port": 830,
    "status": "ACTIVE",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:04:25.008 gohan.server.middleware INFO [0m Completed 200 OK in 83.95258ms
03:04:25.403 gohan.server.middleware INFO [0m Started GET /v2.0/edge_routers/769b5e3b-3320-41ec-9be0-4567b50f1aab for client 172.17.0.19:39902 data: 
[36m03:04:25.403 gohan.server.middleware DEBUG [0m Request headers: map[Accept:[application/json] X-Auth-Token:[***] Accept-Encoding:[gzip] User-Agent:[gophercloud/1.0.0] Connection:[close]]
[36m03:04:25.403 gohan.server.middleware DEBUG [0m Request body: 
[36m03:04:25.482 gohan.server.resources DEBUG [0m Show edge_router 769b5e3b-3320-41ec-9be0-4567b50f1aab started
[36m03:04:25.485 gohan.server.resources DEBUG [0m Show edge_router 769b5e3b-3320-41ec-9be0-4567b50f1aab completed: map[edge_router:map[password:esiesi0000 autonomous_system:65101 ssh_port:830 tenant_id:0b576f6f4cbf414f829cd12f008bf08f id:769b5e3b-3320-41ec-9be0-4567b50f1aab status:ACTIVE name:vMX-router-01 login:esi ip:10.79.5.184 description:MX80 #1]]
[36m03:04:25.485 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[341]]
[36m03:04:25.485 gohan.server.middleware DEBUG [0m Response body: {
  "edge_router": {
    "autonomous_system": "65101",
    "description": "MX80 #1",
    "id": "769b5e3b-3320-41ec-9be0-4567b50f1aab",
    "ip": "10.79.5.184",
    "login": "esi",
    "name": "vMX-router-01",
    "password": "esiesi0000",
    "ssh_port": 830,
    "status": "ACTIVE",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:04:25.485 gohan.server.middleware INFO [0m Completed 200 OK in 82.099283ms
03:04:25.487 gohan.server.middleware INFO [0m Started GET /v2.0/edge_routers/769b5e3b-3320-41ec-9be0-4567b50f1aab for client 172.17.0.19:39908 data: {}
[36m03:04:25.487 gohan.server.middleware DEBUG [0m Request headers: map[User-Agent:[gophercloud/1.0.0] Connection:[close] Content-Length:[2] Accept:[application/json] Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[gzip]]
[36m03:04:25.487 gohan.server.middleware DEBUG [0m Request body: {}
[36m03:04:25.563 gohan.server.resources DEBUG [0m Show edge_router 769b5e3b-3320-41ec-9be0-4567b50f1aab started
[36m03:04:25.566 gohan.server.resources DEBUG [0m Show edge_router 769b5e3b-3320-41ec-9be0-4567b50f1aab completed: map[edge_router:map[ip:10.79.5.184 id:769b5e3b-3320-41ec-9be0-4567b50f1aab status:ACTIVE name:vMX-router-01 login:esi tenant_id:0b576f6f4cbf414f829cd12f008bf08f description:MX80 #1 password:esiesi0000 autonomous_system:65101 ssh_port:830]]
[36m03:04:25.566 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[341]]
[36m03:04:25.566 gohan.server.middleware DEBUG [0m Response body: {
  "edge_router": {
    "autonomous_system": "65101",
    "description": "MX80 #1",
    "id": "769b5e3b-3320-41ec-9be0-4567b50f1aab",
    "ip": "10.79.5.184",
    "login": "esi",
    "name": "vMX-router-01",
    "password": "esiesi0000",
    "ssh_port": 830,
    "status": "ACTIVE",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:04:25.566 gohan.server.middleware INFO [0m Completed 200 OK in 79.840784ms
03:04:25.584 gohan.server.middleware INFO [0m Started POST /v2.0/ha_routers for client 172.17.0.19:39914 data: 
{
"ha_router": {
"description": "sample_ha_router",
"name": "sample-ha-router",
"primary_router_id": "8aba84f9-4675-4d22-a231-e9eabde80818",
"secondary_router_id": "769b5e3b-3320-41ec-9be0-4567b50f1aab",
"tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
}
}
[36m03:04:25.584 gohan.server.middleware DEBUG [0m Request headers: map[X-Auth-Token:[***] Accept-Encoding:[identity] Content-Length:[256] Content-Type:[application/json]]
[36m03:04:25.585 gohan.server.middleware DEBUG [0m Request body: 
{
"ha_router": {
"description": "sample_ha_router",
"name": "sample-ha-router",
"primary_router_id": "8aba84f9-4675-4d22-a231-e9eabde80818",
"secondary_router_id": "769b5e3b-3320-41ec-9be0-4567b50f1aab",
"tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
}
}
[36m03:04:25.661 gohan.server.resources DEBUG [0m Create ha_router with data map[description:sample_ha_router name:sample-ha-router primary_router_id:8aba84f9-4675-4d22-a231-e9eabde80818 secondary_router_id:769b5e3b-3320-41ec-9be0-4567b50f1aab tenant_id:0b576f6f4cbf414f829cd12f008bf08f] started
[36m03:04:25.661 gohan.schema DEBUG [0m No properties in resource policy. Allowing all property access
[36m03:04:25.723 gohan.server.resources DEBUG [0m List edge_router query: map[id:[769b5e3b-3320-41ec-9be0-4567b50f1aab]] started
[36m03:04:25.725 gohan.server.resources DEBUG [0m List edge_router query: map[id:[769b5e3b-3320-41ec-9be0-4567b50f1aab]] completed
[36m03:04:25.786 gohan.server.resources DEBUG [0m List edge_router query: map[id:[8aba84f9-4675-4d22-a231-e9eabde80818]] started
[36m03:04:25.788 gohan.server.resources DEBUG [0m List edge_router query: map[id:[8aba84f9-4675-4d22-a231-e9eabde80818]] completed
03:04:25.793 gohan.db.sql INFO [0m Executing SQL query in transaction '126b278f-6527-458a-aa22-f50ff02ae8e1': 'INSERT INTO `ha_routers` (`description`,`secondary_router_id`,`maximum_gateways`,`status`,`available_gateways`,`id`,`name`,`tenant_id`,`primary_router_id`) VALUES (sample_ha_router,769b5e3b-3320-41ec-9be0-4567b50f1aab,500,PENDING_CREATE,500,3a3d7a43-d749-44e8-90bc-de7b37d1d258,sample-ha-router,0b576f6f4cbf414f829cd12f008bf08f,8aba84f9-4675-4d22-a231-e9eabde80818)'
03:04:25.794 gohan.db.sql INFO [0m Executing SQL query in transaction '126b278f-6527-458a-aa22-f50ff02ae8e1': 'INSERT INTO `events` (`type`,`marked_for_deletion`,`body`,`version`,`path`,`timestamp`) VALUES (create,false,"{\"available_gateways\":500,\"description\":\"sample_ha_router\",\"id\":\"3a3d7a43-d749-44e8-90bc-de7b37d1d258\",\"maximum_gateways\":500,\"name\":\"sample-ha-router\",\"primary_router_id\":\"8aba84f9-4675-4d22-a231-e9eabde80818\",\"secondary_router_id\":\"769b5e3b-3320-41ec-9be0-4567b50f1aab\",\"status\":\"PENDING_CREATE\",\"tenant_id\":\"0b576f6f4cbf414f829cd12f008bf08f\"}",1,/v2.0/ha_routers/3a3d7a43-d749-44e8-90bc-de7b37d1d258,1494471865)'
[36m03:04:25.813 gohan.server.resources DEBUG [0m Create ha_router completed: map[ha_router:map[name:sample-ha-router primary_router_id:8aba84f9-4675-4d22-a231-e9eabde80818 secondary_router_id:769b5e3b-3320-41ec-9be0-4567b50f1aab tenant_id:0b576f6f4cbf414f829cd12f008bf08f available_gateways:500 description:sample_ha_router id:3a3d7a43-d749-44e8-90bc-de7b37d1d258 maximum_gateways:500 status:PENDING_CREATE]]
[36m03:04:25.813 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[421]]
[36m03:04:25.813 gohan.server.middleware DEBUG [0m Response body: {
  "ha_router": {
    "available_gateways": 500,
    "description": "sample_ha_router",
    "id": "3a3d7a43-d749-44e8-90bc-de7b37d1d258",
    "maximum_gateways": 500,
    "name": "sample-ha-router",
    "primary_router_id": "8aba84f9-4675-4d22-a231-e9eabde80818",
    "secondary_router_id": "769b5e3b-3320-41ec-9be0-4567b50f1aab",
    "status": "PENDING_CREATE",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:04:25.813 gohan.server.middleware INFO [0m Completed 201 Created in 229.00773ms
[36m03:04:25.815 gohan.server.sync DEBUG [0m Processing event 67 - create
03:04:25.816 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/ha_routers/3a3d7a43-d749-44e8-90bc-de7b37d1d258
[36m03:04:25.817 gohan.server.sync DEBUG [0m Deleting event 67
03:04:25.820 gohan.db.sql INFO [0m Executing SQL query in transaction '294b8481-0c6c-435a-a7bd-17fa35e6352f': 'DELETE FROM `events` WHERE id = 67'
[36m03:04:25.820 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
03:04:25.833 gohan.server.middleware INFO [0m Started GET /v2.0/ha_routers/3a3d7a43-d749-44e8-90bc-de7b37d1d258 for client 172.17.0.19:39926 data: 
[36m03:04:25.833 gohan.server.middleware DEBUG [0m Request headers: map[Content-Length:[0] Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[identity]]
[36m03:04:25.834 gohan.server.middleware DEBUG [0m Request body: 
[36m03:04:25.956 gohan.server DEBUG [0m State event update received: set /state/v2.0/ha_routers/3a3d7a43-d749-44e8-90bc-de7b37d1d258 map[error: state:map[state_monitoring:{"primary": "ACTIVE", "secondary": "ACTIVE"} worker_state:CREATE_COMPLETED] version:1]
03:04:25.957 gohan.server.sync INFO [0m StateUpdate for set /state/v2.0/ha_routers/3a3d7a43-d749-44e8-90bc-de7b37d1d258 map[error: state:map[worker_state:CREATE_COMPLETED state_monitoring:{"primary": "ACTIVE", "secondary": "ACTIVE"}] version:1] started
03:04:26.000 gohan.sync INFO [0m Locked gohan/cluster/lock/state/v2.0/ha_routers/3a3d7a43-d749-44e8-90bc-de7b37d1d258 with index 257
[36m03:04:26.119 gohan.server.resources DEBUG [0m Show ha_router 3a3d7a43-d749-44e8-90bc-de7b37d1d258 started
[36m03:04:26.168 gohan.server.resources DEBUG [0m Show ha_router 3a3d7a43-d749-44e8-90bc-de7b37d1d258 completed: map[ha_router:map[available_gateways:500 status:PENDING_CREATE name:sample-ha-router primary_router_id:8aba84f9-4675-4d22-a231-e9eabde80818 description:sample_ha_router secondary_router_id:769b5e3b-3320-41ec-9be0-4567b50f1aab maximum_gateways:500 id:3a3d7a43-d749-44e8-90bc-de7b37d1d258 tenant_id:0b576f6f4cbf414f829cd12f008bf08f]]
[36m03:04:26.170 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[421]]
[36m03:04:26.171 gohan.server.middleware DEBUG [0m Response body: {
  "ha_router": {
    "available_gateways": 500,
    "description": "sample_ha_router",
    "id": "3a3d7a43-d749-44e8-90bc-de7b37d1d258",
    "maximum_gateways": 500,
    "name": "sample-ha-router",
    "primary_router_id": "8aba84f9-4675-4d22-a231-e9eabde80818",
    "secondary_router_id": "769b5e3b-3320-41ec-9be0-4567b50f1aab",
    "status": "PENDING_CREATE",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:04:26.171 gohan.server.middleware INFO [0m Completed 200 OK in 338.09707ms
03:04:26.637 gohan.db.sql INFO [0m Executing SQL query in transaction 'b7fecf37-3cad-4632-a7eb-1b6895cbbce1': 'UPDATE `ha_routers` SET `id` = 3a3d7a43-d749-44e8-90bc-de7b37d1d258, `name` = sample-ha-router, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `primary_router_id` = 8aba84f9-4675-4d22-a231-e9eabde80818, `description` = sample_ha_router, `secondary_router_id` = 769b5e3b-3320-41ec-9be0-4567b50f1aab, `maximum_gateways` = 500, `status` = PENDING_CREATE, `available_gateways` = 500, `state_version` = 1, `monitoring_version` = 0, `state_error` = , `state` = {"error":"","state":{"state_monitoring":"{\"primary\": \"ACTIVE\", \"secondary\": \"ACTIVE\"}","worker_state":"CREATE_COMPLETED"}}, `state_monitoring` = {}, `marked_for_deletion` = 0 WHERE id = 3a3d7a43-d749-44e8-90bc-de7b37d1d258'
03:04:26.639 gohan.extension.ha_router.post_state_update_in_transaction INFO [0m Config version: 1, State version: 1, Monitoring version: 0
03:04:26.639 gohan.extension.ha_router.post_state_update_in_transaction INFO [0m Reading monitoring data from worker state: {"primary": "ACTIVE", "secondary": "ACTIVE"}
03:04:26.643 gohan.db.sql INFO [0m Executing SQL query in transaction 'b7fecf37-3cad-4632-a7eb-1b6895cbbce1': 'UPDATE `ha_routers` SET `secondary_router_id` = 769b5e3b-3320-41ec-9be0-4567b50f1aab, `maximum_gateways` = 500, `status` = ACTIVE, `available_gateways` = 500, `description` = sample_ha_router, `name` = sample-ha-router, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `primary_router_id` = 8aba84f9-4675-4d22-a231-e9eabde80818, `id` = 3a3d7a43-d749-44e8-90bc-de7b37d1d258 WHERE id = 3a3d7a43-d749-44e8-90bc-de7b37d1d258'
03:04:26.676 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/state/v2.0/ha_routers/3a3d7a43-d749-44e8-90bc-de7b37d1d258 with index 257
03:04:26.696 gohan.sync INFO [0m Path gohan/cluster/lock/state/v2.0/ha_routers/3a3d7a43-d749-44e8-90bc-de7b37d1d258 already unlocked or not locked
03:04:27.197 gohan.server.middleware INFO [0m Started GET /v2.0/ha_routers/3a3d7a43-d749-44e8-90bc-de7b37d1d258 for client 172.17.0.19:39946 data: 
[36m03:04:27.197 gohan.server.middleware DEBUG [0m Request headers: map[Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[identity] Content-Length:[0]]
[36m03:04:27.198 gohan.server.middleware DEBUG [0m Request body: 
[36m03:04:27.277 gohan.server.resources DEBUG [0m Show ha_router 3a3d7a43-d749-44e8-90bc-de7b37d1d258 started
[36m03:04:27.280 gohan.server.resources DEBUG [0m Show ha_router 3a3d7a43-d749-44e8-90bc-de7b37d1d258 completed: map[ha_router:map[status:ACTIVE available_gateways:500 id:3a3d7a43-d749-44e8-90bc-de7b37d1d258 name:sample-ha-router primary_router_id:8aba84f9-4675-4d22-a231-e9eabde80818 description:sample_ha_router secondary_router_id:769b5e3b-3320-41ec-9be0-4567b50f1aab maximum_gateways:500 tenant_id:0b576f6f4cbf414f829cd12f008bf08f]]
[36m03:04:27.280 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[413]]
[36m03:04:27.280 gohan.server.middleware DEBUG [0m Response body: {
  "ha_router": {
    "available_gateways": 500,
    "description": "sample_ha_router",
    "id": "3a3d7a43-d749-44e8-90bc-de7b37d1d258",
    "maximum_gateways": 500,
    "name": "sample-ha-router",
    "primary_router_id": "8aba84f9-4675-4d22-a231-e9eabde80818",
    "secondary_router_id": "769b5e3b-3320-41ec-9be0-4567b50f1aab",
    "status": "ACTIVE",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:04:27.280 gohan.server.middleware INFO [0m Completed 200 OK in 82.975304ms
03:04:27.659 gohan.server.middleware INFO [0m Started GET /v2.0/ha_routers/3a3d7a43-d749-44e8-90bc-de7b37d1d258 for client 172.17.0.19:39954 data: 
[36m03:04:27.659 gohan.server.middleware DEBUG [0m Request headers: map[Accept-Encoding:[gzip] User-Agent:[gophercloud/1.0.0] Connection:[close] Accept:[application/json] X-Auth-Token:[***]]
[36m03:04:27.659 gohan.server.middleware DEBUG [0m Request body: 
[36m03:04:27.725 gohan.server.resources DEBUG [0m Show ha_router 3a3d7a43-d749-44e8-90bc-de7b37d1d258 started
[36m03:04:27.728 gohan.server.resources DEBUG [0m Show ha_router 3a3d7a43-d749-44e8-90bc-de7b37d1d258 completed: map[ha_router:map[name:sample-ha-router primary_router_id:8aba84f9-4675-4d22-a231-e9eabde80818 available_gateways:500 id:3a3d7a43-d749-44e8-90bc-de7b37d1d258 tenant_id:0b576f6f4cbf414f829cd12f008bf08f description:sample_ha_router secondary_router_id:769b5e3b-3320-41ec-9be0-4567b50f1aab maximum_gateways:500 status:ACTIVE]]
[36m03:04:27.728 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[413]]
[36m03:04:27.728 gohan.server.middleware DEBUG [0m Response body: {
  "ha_router": {
    "available_gateways": 500,
    "description": "sample_ha_router",
    "id": "3a3d7a43-d749-44e8-90bc-de7b37d1d258",
    "maximum_gateways": 500,
    "name": "sample-ha-router",
    "primary_router_id": "8aba84f9-4675-4d22-a231-e9eabde80818",
    "secondary_router_id": "769b5e3b-3320-41ec-9be0-4567b50f1aab",
    "status": "ACTIVE",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:04:27.728 gohan.server.middleware INFO [0m Completed 200 OK in 69.451693ms
03:04:27.729 gohan.server.middleware INFO [0m Started GET /v2.0/ha_routers/3a3d7a43-d749-44e8-90bc-de7b37d1d258 for client 172.17.0.19:39960 data: {}
[36m03:04:27.729 gohan.server.middleware DEBUG [0m Request headers: map[Accept:[application/json] Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[gzip] User-Agent:[gophercloud/1.0.0] Connection:[close] Content-Length:[2]]
[36m03:04:27.729 gohan.server.middleware DEBUG [0m Request body: {}
[36m03:04:27.792 gohan.server.resources DEBUG [0m Show ha_router 3a3d7a43-d749-44e8-90bc-de7b37d1d258 started
[36m03:04:27.794 gohan.server.resources DEBUG [0m Show ha_router 3a3d7a43-d749-44e8-90bc-de7b37d1d258 completed: map[ha_router:map[tenant_id:0b576f6f4cbf414f829cd12f008bf08f primary_router_id:8aba84f9-4675-4d22-a231-e9eabde80818 status:ACTIVE description:sample_ha_router available_gateways:500 name:sample-ha-router id:3a3d7a43-d749-44e8-90bc-de7b37d1d258 secondary_router_id:769b5e3b-3320-41ec-9be0-4567b50f1aab maximum_gateways:500]]
[36m03:04:27.794 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[413]]
[36m03:04:27.794 gohan.server.middleware DEBUG [0m Response body: {
  "ha_router": {
    "available_gateways": 500,
    "description": "sample_ha_router",
    "id": "3a3d7a43-d749-44e8-90bc-de7b37d1d258",
    "maximum_gateways": 500,
    "name": "sample-ha-router",
    "primary_router_id": "8aba84f9-4675-4d22-a231-e9eabde80818",
    "secondary_router_id": "769b5e3b-3320-41ec-9be0-4567b50f1aab",
    "status": "ACTIVE",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:04:27.794 gohan.server.middleware INFO [0m Completed 200 OK in 65.425494ms
03:04:27.809 gohan.server.middleware INFO [0m Started POST /v2.0/er_physical_interfaces for client 172.17.0.19:39966 data: 
{
"er_physical_interface": {
"connected_ese_port_id": "976156ef-05b4-47f4-9497-a36531563a08",
"device_id": "8aba84f9-4675-4d22-a231-e9eabde80818",
"name": "ae0",
"tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
}
}
[36m03:04:27.809 gohan.server.middleware DEBUG [0m Request headers: map[Content-Length:[214] Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[identity]]
[36m03:04:27.810 gohan.server.middleware DEBUG [0m Request body: 
{
"er_physical_interface": {
"connected_ese_port_id": "976156ef-05b4-47f4-9497-a36531563a08",
"device_id": "8aba84f9-4675-4d22-a231-e9eabde80818",
"name": "ae0",
"tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
}
}
[36m03:04:27.898 gohan.server.resources DEBUG [0m Create er_physical_interface with data map[connected_ese_port_id:976156ef-05b4-47f4-9497-a36531563a08 device_id:8aba84f9-4675-4d22-a231-e9eabde80818 name:ae0 tenant_id:0b576f6f4cbf414f829cd12f008bf08f] started
[36m03:04:27.898 gohan.schema DEBUG [0m No properties in resource policy. Allowing all property access
[36m03:04:27.961 gohan.server DEBUG [0m Monitoring Watcher starts watch
[31m03:04:27.962 gohan.sync.etcd ERROR [0m watch error: 100: Key not found (/monitoring) [265]
[31m03:04:27.962 gohan.server ERROR [0m sync watch error: 100: Key not found (/monitoring) [265]
[36m03:04:27.970 gohan.server.resources DEBUG [0m List edge_router query: map[id:[8aba84f9-4675-4d22-a231-e9eabde80818]] started
[36m03:04:27.972 gohan.server.resources DEBUG [0m List edge_router query: map[id:[8aba84f9-4675-4d22-a231-e9eabde80818]] completed
[36m03:04:28.037 gohan.server.resources DEBUG [0m List ese_physical_port query: map[id:[976156ef-05b4-47f4-9497-a36531563a08]] started
[36m03:04:28.039 gohan.server.resources DEBUG [0m List ese_physical_port query: map[id:[976156ef-05b4-47f4-9497-a36531563a08]] completed
03:04:28.044 gohan.db.sql INFO [0m Executing SQL query in transaction '49dcfd65-7157-414a-9767-d5fcfa38c9cd': 'INSERT INTO `er_physical_interfaces` (`id`,`name`,`description`,`device_id`,`connected_ese_port_id`,`status`,`tenant_id`) VALUES (a752c6c0-2075-4e7f-9040-5fcefcad0252,ae0,,8aba84f9-4675-4d22-a231-e9eabde80818,976156ef-05b4-47f4-9497-a36531563a08,PENDING_CREATE,0b576f6f4cbf414f829cd12f008bf08f)'
03:04:28.045 gohan.db.sql INFO [0m Executing SQL query in transaction '49dcfd65-7157-414a-9767-d5fcfa38c9cd': 'INSERT INTO `events` (`version`,`path`,`timestamp`,`type`,`marked_for_deletion`,`body`) VALUES (1,/v2.0/er_physical_interfaces/a752c6c0-2075-4e7f-9040-5fcefcad0252,1494471868,create,false,"{\"connected_ese_port_id\":\"976156ef-05b4-47f4-9497-a36531563a08\",\"description\":\"\",\"device_id\":\"8aba84f9-4675-4d22-a231-e9eabde80818\",\"id\":\"a752c6c0-2075-4e7f-9040-5fcefcad0252\",\"name\":\"ae0\",\"status\":\"PENDING_CREATE\",\"tenant_id\":\"0b576f6f4cbf414f829cd12f008bf08f\"}")'
[36m03:04:28.055 gohan.server.resources DEBUG [0m Create er_physical_interface completed: map[er_physical_interface:map[tenant_id:0b576f6f4cbf414f829cd12f008bf08f id:a752c6c0-2075-4e7f-9040-5fcefcad0252 description: status:PENDING_CREATE connected_ese_port_id:976156ef-05b4-47f4-9497-a36531563a08 device_id:8aba84f9-4675-4d22-a231-e9eabde80818 name:ae0]]
[36m03:04:28.056 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[338]]
[36m03:04:28.056 gohan.server.middleware DEBUG [0m Response body: {
  "er_physical_interface": {
    "connected_ese_port_id": "976156ef-05b4-47f4-9497-a36531563a08",
    "description": "",
    "device_id": "8aba84f9-4675-4d22-a231-e9eabde80818",
    "id": "a752c6c0-2075-4e7f-9040-5fcefcad0252",
    "name": "ae0",
    "status": "PENDING_CREATE",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:04:28.056 gohan.server.middleware INFO [0m Completed 201 Created in 246.592646ms
[36m03:04:28.058 gohan.server.sync DEBUG [0m Processing event 68 - create
03:04:28.058 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/er_physical_interfaces/a752c6c0-2075-4e7f-9040-5fcefcad0252
03:04:28.067 gohan.server.middleware INFO [0m Started GET /v2.0/er_physical_interfaces/a752c6c0-2075-4e7f-9040-5fcefcad0252 for client 172.17.0.19:39978 data: 
[36m03:04:28.068 gohan.server.middleware DEBUG [0m Request headers: map[Accept-Encoding:[identity] Content-Length:[0] Content-Type:[application/json] X-Auth-Token:[***]]
[36m03:04:28.068 gohan.server.middleware DEBUG [0m Request body: 
[36m03:04:28.068 gohan.server.sync DEBUG [0m Deleting event 68
03:04:28.072 gohan.db.sql INFO [0m Executing SQL query in transaction 'e9d67653-fc90-4aa5-aa29-9e2348cb6383': 'DELETE FROM `events` WHERE id = 68'
[36m03:04:28.072 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:04:28.153 gohan.server.resources DEBUG [0m Show er_physical_interface a752c6c0-2075-4e7f-9040-5fcefcad0252 started
[36m03:04:28.159 gohan.server.resources DEBUG [0m Show er_physical_interface a752c6c0-2075-4e7f-9040-5fcefcad0252 completed: map[er_physical_interface:map[device_id:8aba84f9-4675-4d22-a231-e9eabde80818 connected_ese_port_id:976156ef-05b4-47f4-9497-a36531563a08 status:PENDING_CREATE tenant_id:0b576f6f4cbf414f829cd12f008bf08f id:a752c6c0-2075-4e7f-9040-5fcefcad0252 name:ae0 description:]]
[36m03:04:28.159 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[338]]
[36m03:04:28.159 gohan.server.middleware DEBUG [0m Response body: {
  "er_physical_interface": {
    "connected_ese_port_id": "976156ef-05b4-47f4-9497-a36531563a08",
    "description": "",
    "device_id": "8aba84f9-4675-4d22-a231-e9eabde80818",
    "id": "a752c6c0-2075-4e7f-9040-5fcefcad0252",
    "name": "ae0",
    "status": "PENDING_CREATE",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:04:28.159 gohan.server.middleware INFO [0m Completed 200 OK in 91.541199ms
[36m03:04:28.176 gohan.server DEBUG [0m State event update received: set /state/v2.0/er_physical_interfaces/a752c6c0-2075-4e7f-9040-5fcefcad0252 map[error: state:map[state_monitoring:{"interface": "ACTIVE"} worker_state:CREATE_COMPLETED] version:1]
03:04:28.176 gohan.server.sync INFO [0m StateUpdate for set /state/v2.0/er_physical_interfaces/a752c6c0-2075-4e7f-9040-5fcefcad0252 map[version:1 error: state:map[state_monitoring:{"interface": "ACTIVE"} worker_state:CREATE_COMPLETED]] started
03:04:28.184 gohan.sync INFO [0m Locked gohan/cluster/lock/state/v2.0/er_physical_interfaces/a752c6c0-2075-4e7f-9040-5fcefcad0252 with index 278
03:04:28.262 gohan.db.sql INFO [0m Executing SQL query in transaction 'bf4bda34-720c-48bd-8ae2-9865f361d4ae': 'UPDATE `er_physical_interfaces` SET `device_id` = 8aba84f9-4675-4d22-a231-e9eabde80818, `connected_ese_port_id` = 976156ef-05b4-47f4-9497-a36531563a08, `status` = PENDING_CREATE, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `id` = a752c6c0-2075-4e7f-9040-5fcefcad0252, `name` = ae0, `description` = , `state_version` = 1, `monitoring_version` = 0, `state_error` = , `state` = {"error":"","state":{"state_monitoring":"{\"interface\": \"ACTIVE\"}","worker_state":"CREATE_COMPLETED"}}, `state_monitoring` = {}, `marked_for_deletion` = 0 WHERE id = a752c6c0-2075-4e7f-9040-5fcefcad0252'
03:04:28.264 gohan.extension.er_physical_interface.post_state_update_in_transaction INFO [0m Config version: 1, State version: 1, Monitoring version: 0
03:04:28.264 gohan.extension.er_physical_interface.post_state_update_in_transaction INFO [0m Reading monitoring data from worker state: {"interface": "ACTIVE"}
03:04:28.265 gohan.db.sql INFO [0m Executing SQL query in transaction 'bf4bda34-720c-48bd-8ae2-9865f361d4ae': 'UPDATE `er_physical_interfaces` SET `connected_ese_port_id` = 976156ef-05b4-47f4-9497-a36531563a08, `status` = ACTIVE, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `id` = a752c6c0-2075-4e7f-9040-5fcefcad0252, `name` = ae0, `description` = , `device_id` = 8aba84f9-4675-4d22-a231-e9eabde80818 WHERE id = a752c6c0-2075-4e7f-9040-5fcefcad0252'
03:04:28.277 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/state/v2.0/er_physical_interfaces/a752c6c0-2075-4e7f-9040-5fcefcad0252 with index 278
03:04:28.283 gohan.sync INFO [0m Path gohan/cluster/lock/state/v2.0/er_physical_interfaces/a752c6c0-2075-4e7f-9040-5fcefcad0252 already unlocked or not locked
03:04:29.168 gohan.server.middleware INFO [0m Started GET /v2.0/er_physical_interfaces/a752c6c0-2075-4e7f-9040-5fcefcad0252 for client 172.17.0.19:40000 data: 
[36m03:04:29.169 gohan.server.middleware DEBUG [0m Request headers: map[Accept-Encoding:[identity] Content-Length:[0] Content-Type:[application/json] X-Auth-Token:[***]]
[36m03:04:29.169 gohan.server.middleware DEBUG [0m Request body: 
[36m03:04:29.248 gohan.server.resources DEBUG [0m Show er_physical_interface a752c6c0-2075-4e7f-9040-5fcefcad0252 started
[36m03:04:29.251 gohan.server.resources DEBUG [0m Show er_physical_interface a752c6c0-2075-4e7f-9040-5fcefcad0252 completed: map[er_physical_interface:map[id:a752c6c0-2075-4e7f-9040-5fcefcad0252 name:ae0 description: device_id:8aba84f9-4675-4d22-a231-e9eabde80818 connected_ese_port_id:976156ef-05b4-47f4-9497-a36531563a08 status:ACTIVE tenant_id:0b576f6f4cbf414f829cd12f008bf08f]]
[36m03:04:29.251 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[330]]
[36m03:04:29.251 gohan.server.middleware DEBUG [0m Response body: {
  "er_physical_interface": {
    "connected_ese_port_id": "976156ef-05b4-47f4-9497-a36531563a08",
    "description": "",
    "device_id": "8aba84f9-4675-4d22-a231-e9eabde80818",
    "id": "a752c6c0-2075-4e7f-9040-5fcefcad0252",
    "name": "ae0",
    "status": "ACTIVE",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:04:29.251 gohan.server.middleware INFO [0m Completed 200 OK in 82.940533ms
03:04:29.648 gohan.server.middleware INFO [0m Started GET /v2.0/er_physical_interfaces/a752c6c0-2075-4e7f-9040-5fcefcad0252 for client 172.17.0.19:40008 data: 
[36m03:04:29.648 gohan.server.middleware DEBUG [0m Request headers: map[Connection:[close] Accept:[application/json] X-Auth-Token:[***] Accept-Encoding:[gzip] User-Agent:[gophercloud/1.0.0]]
[36m03:04:29.648 gohan.server.middleware DEBUG [0m Request body: 
[36m03:04:29.729 gohan.server.resources DEBUG [0m Show er_physical_interface a752c6c0-2075-4e7f-9040-5fcefcad0252 started
[36m03:04:29.732 gohan.server.resources DEBUG [0m Show er_physical_interface a752c6c0-2075-4e7f-9040-5fcefcad0252 completed: map[er_physical_interface:map[id:a752c6c0-2075-4e7f-9040-5fcefcad0252 name:ae0 description: device_id:8aba84f9-4675-4d22-a231-e9eabde80818 connected_ese_port_id:976156ef-05b4-47f4-9497-a36531563a08 status:ACTIVE tenant_id:0b576f6f4cbf414f829cd12f008bf08f]]
[36m03:04:29.732 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[330]]
[36m03:04:29.732 gohan.server.middleware DEBUG [0m Response body: {
  "er_physical_interface": {
    "connected_ese_port_id": "976156ef-05b4-47f4-9497-a36531563a08",
    "description": "",
    "device_id": "8aba84f9-4675-4d22-a231-e9eabde80818",
    "id": "a752c6c0-2075-4e7f-9040-5fcefcad0252",
    "name": "ae0",
    "status": "ACTIVE",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:04:29.732 gohan.server.middleware INFO [0m Completed 200 OK in 84.385225ms
03:04:29.733 gohan.server.middleware INFO [0m Started GET /v2.0/er_physical_interfaces/a752c6c0-2075-4e7f-9040-5fcefcad0252 for client 172.17.0.19:40014 data: {}
[36m03:04:29.733 gohan.server.middleware DEBUG [0m Request headers: map[User-Agent:[gophercloud/1.0.0] Connection:[close] Content-Length:[2] Accept:[application/json] Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[gzip]]
[36m03:04:29.733 gohan.server.middleware DEBUG [0m Request body: {}
[36m03:04:29.816 gohan.server.resources DEBUG [0m Show er_physical_interface a752c6c0-2075-4e7f-9040-5fcefcad0252 started
[36m03:04:29.819 gohan.server.resources DEBUG [0m Show er_physical_interface a752c6c0-2075-4e7f-9040-5fcefcad0252 completed: map[er_physical_interface:map[description: device_id:8aba84f9-4675-4d22-a231-e9eabde80818 connected_ese_port_id:976156ef-05b4-47f4-9497-a36531563a08 status:ACTIVE tenant_id:0b576f6f4cbf414f829cd12f008bf08f id:a752c6c0-2075-4e7f-9040-5fcefcad0252 name:ae0]]
[36m03:04:29.820 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[330]]
[36m03:04:29.820 gohan.server.middleware DEBUG [0m Response body: {
  "er_physical_interface": {
    "connected_ese_port_id": "976156ef-05b4-47f4-9497-a36531563a08",
    "description": "",
    "device_id": "8aba84f9-4675-4d22-a231-e9eabde80818",
    "id": "a752c6c0-2075-4e7f-9040-5fcefcad0252",
    "name": "ae0",
    "status": "ACTIVE",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:04:29.820 gohan.server.middleware INFO [0m Completed 200 OK in 86.626418ms
03:04:29.840 gohan.server.middleware INFO [0m Started POST /v2.0/er_physical_interfaces for client 172.17.0.19:40020 data: 
{
"er_physical_interface": {
"connected_ese_port_id": "5b2dee2e-7420-4cd4-b270-5081eb9eb371",
"device_id": "769b5e3b-3320-41ec-9be0-4567b50f1aab",
"name": "ae0",
"tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
}
}
[36m03:04:29.840 gohan.server.middleware DEBUG [0m Request headers: map[Content-Length:[214] Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[identity]]
[36m03:04:29.840 gohan.server.middleware DEBUG [0m Request body: 
{
"er_physical_interface": {
"connected_ese_port_id": "5b2dee2e-7420-4cd4-b270-5081eb9eb371",
"device_id": "769b5e3b-3320-41ec-9be0-4567b50f1aab",
"name": "ae0",
"tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
}
}
[36m03:04:29.924 gohan.server.resources DEBUG [0m Create er_physical_interface with data map[connected_ese_port_id:5b2dee2e-7420-4cd4-b270-5081eb9eb371 device_id:769b5e3b-3320-41ec-9be0-4567b50f1aab name:ae0 tenant_id:0b576f6f4cbf414f829cd12f008bf08f] started
[36m03:04:29.925 gohan.schema DEBUG [0m No properties in resource policy. Allowing all property access
[36m03:04:29.993 gohan.server.resources DEBUG [0m List ese_physical_port query: map[id:[5b2dee2e-7420-4cd4-b270-5081eb9eb371]] started
[36m03:04:29.995 gohan.server.resources DEBUG [0m List ese_physical_port query: map[id:[5b2dee2e-7420-4cd4-b270-5081eb9eb371]] completed
03:04:30.005 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
03:04:30.018 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
[36m03:04:30.088 gohan.server.resources DEBUG [0m List edge_router query: map[id:[769b5e3b-3320-41ec-9be0-4567b50f1aab]] started
[36m03:04:30.090 gohan.server.resources DEBUG [0m List edge_router query: map[id:[769b5e3b-3320-41ec-9be0-4567b50f1aab]] completed
03:04:30.095 gohan.db.sql INFO [0m Executing SQL query in transaction '1c4d0dd3-4fdd-4d31-a2b1-d6db756e991c': 'INSERT INTO `er_physical_interfaces` (`connected_ese_port_id`,`status`,`tenant_id`,`id`,`name`,`description`,`device_id`) VALUES (5b2dee2e-7420-4cd4-b270-5081eb9eb371,PENDING_CREATE,0b576f6f4cbf414f829cd12f008bf08f,96c3629b-9bfb-4d54-adc1-750d024c2858,ae0,,769b5e3b-3320-41ec-9be0-4567b50f1aab)'
03:04:30.095 gohan.db.sql INFO [0m Executing SQL query in transaction '1c4d0dd3-4fdd-4d31-a2b1-d6db756e991c': 'INSERT INTO `events` (`marked_for_deletion`,`body`,`version`,`path`,`timestamp`,`type`) VALUES (false,"{\"connected_ese_port_id\":\"5b2dee2e-7420-4cd4-b270-5081eb9eb371\",\"description\":\"\",\"device_id\":\"769b5e3b-3320-41ec-9be0-4567b50f1aab\",\"id\":\"96c3629b-9bfb-4d54-adc1-750d024c2858\",\"name\":\"ae0\",\"status\":\"PENDING_CREATE\",\"tenant_id\":\"0b576f6f4cbf414f829cd12f008bf08f\"}",1,/v2.0/er_physical_interfaces/96c3629b-9bfb-4d54-adc1-750d024c2858,1494471870,create)'
[36m03:04:30.109 gohan.server.resources DEBUG [0m Create er_physical_interface completed: map[er_physical_interface:map[status:PENDING_CREATE connected_ese_port_id:5b2dee2e-7420-4cd4-b270-5081eb9eb371 device_id:769b5e3b-3320-41ec-9be0-4567b50f1aab name:ae0 tenant_id:0b576f6f4cbf414f829cd12f008bf08f id:96c3629b-9bfb-4d54-adc1-750d024c2858 description:]]
[36m03:04:30.109 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[338]]
[36m03:04:30.109 gohan.server.middleware DEBUG [0m Response body: {
  "er_physical_interface": {
    "connected_ese_port_id": "5b2dee2e-7420-4cd4-b270-5081eb9eb371",
    "description": "",
    "device_id": "769b5e3b-3320-41ec-9be0-4567b50f1aab",
    "id": "96c3629b-9bfb-4d54-adc1-750d024c2858",
    "name": "ae0",
    "status": "PENDING_CREATE",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:04:30.109 gohan.server.middleware INFO [0m Completed 201 Created in 269.253144ms
[36m03:04:30.111 gohan.server.sync DEBUG [0m Processing event 69 - create
03:04:30.111 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/er_physical_interfaces/96c3629b-9bfb-4d54-adc1-750d024c2858
[36m03:04:30.115 gohan.server.sync DEBUG [0m Deleting event 69
03:04:30.116 gohan.db.sql INFO [0m Executing SQL query in transaction '7d6ef930-b174-4b8c-b9ef-f0a3ab7a19eb': 'DELETE FROM `events` WHERE id = 69'
[36m03:04:30.117 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
03:04:30.144 gohan.server.middleware INFO [0m Started GET /v2.0/er_physical_interfaces/96c3629b-9bfb-4d54-adc1-750d024c2858 for client 172.17.0.19:40044 data: 
[36m03:04:30.144 gohan.server.middleware DEBUG [0m Request headers: map[Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[identity] Content-Length:[0]]
[36m03:04:30.145 gohan.server.middleware DEBUG [0m Request body: 
[36m03:04:30.212 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] started
[36m03:04:30.215 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] completed
03:04:30.216 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
[36m03:04:30.274 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] started
[36m03:04:30.278 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] completed
03:04:30.287 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
[36m03:04:30.310 gohan.server.resources DEBUG [0m Show er_physical_interface 96c3629b-9bfb-4d54-adc1-750d024c2858 started
[36m03:04:30.317 gohan.server.resources DEBUG [0m Show er_physical_interface 96c3629b-9bfb-4d54-adc1-750d024c2858 completed: map[er_physical_interface:map[tenant_id:0b576f6f4cbf414f829cd12f008bf08f id:96c3629b-9bfb-4d54-adc1-750d024c2858 name:ae0 description: device_id:769b5e3b-3320-41ec-9be0-4567b50f1aab connected_ese_port_id:5b2dee2e-7420-4cd4-b270-5081eb9eb371 status:PENDING_CREATE]]
[36m03:04:30.317 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[338]]
[36m03:04:30.317 gohan.server.middleware DEBUG [0m Response body: {
  "er_physical_interface": {
    "connected_ese_port_id": "5b2dee2e-7420-4cd4-b270-5081eb9eb371",
    "description": "",
    "device_id": "769b5e3b-3320-41ec-9be0-4567b50f1aab",
    "id": "96c3629b-9bfb-4d54-adc1-750d024c2858",
    "name": "ae0",
    "status": "PENDING_CREATE",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:04:30.317 gohan.server.middleware INFO [0m Completed 200 OK in 173.019846ms
[36m03:04:30.333 gohan.server DEBUG [0m State event update received: set /state/v2.0/er_physical_interfaces/96c3629b-9bfb-4d54-adc1-750d024c2858 map[error: state:map[worker_state:CREATE_COMPLETED state_monitoring:{"interface": "ACTIVE"}] version:1]
03:04:30.333 gohan.server.sync INFO [0m StateUpdate for set /state/v2.0/er_physical_interfaces/96c3629b-9bfb-4d54-adc1-750d024c2858 map[error: state:map[state_monitoring:{"interface": "ACTIVE"} worker_state:CREATE_COMPLETED] version:1] started
03:04:30.343 gohan.sync INFO [0m Locked gohan/cluster/lock/state/v2.0/er_physical_interfaces/96c3629b-9bfb-4d54-adc1-750d024c2858 with index 305
03:04:30.425 gohan.db.sql INFO [0m Executing SQL query in transaction '161aa82e-989d-478f-b509-26ac3df16531': 'UPDATE `er_physical_interfaces` SET `description` = , `device_id` = 769b5e3b-3320-41ec-9be0-4567b50f1aab, `connected_ese_port_id` = 5b2dee2e-7420-4cd4-b270-5081eb9eb371, `status` = PENDING_CREATE, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `id` = 96c3629b-9bfb-4d54-adc1-750d024c2858, `name` = ae0, `state_version` = 1, `monitoring_version` = 0, `state_error` = , `state` = {"error":"","state":{"state_monitoring":"{\"interface\": \"ACTIVE\"}","worker_state":"CREATE_COMPLETED"}}, `state_monitoring` = {}, `marked_for_deletion` = 0 WHERE id = 96c3629b-9bfb-4d54-adc1-750d024c2858'
03:04:30.428 gohan.extension.er_physical_interface.post_state_update_in_transaction INFO [0m Config version: 1, State version: 1, Monitoring version: 0
03:04:30.429 gohan.extension.er_physical_interface.post_state_update_in_transaction INFO [0m Reading monitoring data from worker state: {"interface": "ACTIVE"}
03:04:30.431 gohan.db.sql INFO [0m Executing SQL query in transaction '161aa82e-989d-478f-b509-26ac3df16531': 'UPDATE `er_physical_interfaces` SET `id` = 96c3629b-9bfb-4d54-adc1-750d024c2858, `name` = ae0, `description` = , `device_id` = 769b5e3b-3320-41ec-9be0-4567b50f1aab, `connected_ese_port_id` = 5b2dee2e-7420-4cd4-b270-5081eb9eb371, `status` = ACTIVE, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f WHERE id = 96c3629b-9bfb-4d54-adc1-750d024c2858'
03:04:30.446 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/state/v2.0/er_physical_interfaces/96c3629b-9bfb-4d54-adc1-750d024c2858 with index 305
03:04:30.453 gohan.sync INFO [0m Path gohan/cluster/lock/state/v2.0/er_physical_interfaces/96c3629b-9bfb-4d54-adc1-750d024c2858 already unlocked or not locked
03:04:31.329 gohan.server.middleware INFO [0m Started GET /v2.0/er_physical_interfaces/96c3629b-9bfb-4d54-adc1-750d024c2858 for client 172.17.0.19:40066 data: 
[36m03:04:31.329 gohan.server.middleware DEBUG [0m Request headers: map[Accept-Encoding:[identity] Content-Length:[0] Content-Type:[application/json] X-Auth-Token:[***]]
[36m03:04:31.329 gohan.server.middleware DEBUG [0m Request body: 
[36m03:04:31.419 gohan.server.resources DEBUG [0m Show er_physical_interface 96c3629b-9bfb-4d54-adc1-750d024c2858 started
[36m03:04:31.423 gohan.server.resources DEBUG [0m Show er_physical_interface 96c3629b-9bfb-4d54-adc1-750d024c2858 completed: map[er_physical_interface:map[device_id:769b5e3b-3320-41ec-9be0-4567b50f1aab connected_ese_port_id:5b2dee2e-7420-4cd4-b270-5081eb9eb371 status:ACTIVE tenant_id:0b576f6f4cbf414f829cd12f008bf08f id:96c3629b-9bfb-4d54-adc1-750d024c2858 name:ae0 description:]]
[36m03:04:31.423 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[330]]
[36m03:04:31.423 gohan.server.middleware DEBUG [0m Response body: {
  "er_physical_interface": {
    "connected_ese_port_id": "5b2dee2e-7420-4cd4-b270-5081eb9eb371",
    "description": "",
    "device_id": "769b5e3b-3320-41ec-9be0-4567b50f1aab",
    "id": "96c3629b-9bfb-4d54-adc1-750d024c2858",
    "name": "ae0",
    "status": "ACTIVE",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:04:31.423 gohan.server.middleware INFO [0m Completed 200 OK in 94.068481ms
03:04:31.821 gohan.server.middleware INFO [0m Started GET /v2.0/er_physical_interfaces/96c3629b-9bfb-4d54-adc1-750d024c2858 for client 172.17.0.19:40074 data: 
[36m03:04:31.821 gohan.server.middleware DEBUG [0m Request headers: map[X-Auth-Token:[***] Accept-Encoding:[gzip] User-Agent:[gophercloud/1.0.0] Connection:[close] Accept:[application/json]]
[36m03:04:31.822 gohan.server.middleware DEBUG [0m Request body: 
[36m03:04:31.908 gohan.server.resources DEBUG [0m Show er_physical_interface 96c3629b-9bfb-4d54-adc1-750d024c2858 started
[36m03:04:31.911 gohan.server.resources DEBUG [0m Show er_physical_interface 96c3629b-9bfb-4d54-adc1-750d024c2858 completed: map[er_physical_interface:map[device_id:769b5e3b-3320-41ec-9be0-4567b50f1aab connected_ese_port_id:5b2dee2e-7420-4cd4-b270-5081eb9eb371 status:ACTIVE tenant_id:0b576f6f4cbf414f829cd12f008bf08f id:96c3629b-9bfb-4d54-adc1-750d024c2858 name:ae0 description:]]
[36m03:04:31.911 gohan.server.middleware DEBUG [0m Response headers: map[Content-Length:[330] Content-Type:[application/json]]
[36m03:04:31.911 gohan.server.middleware DEBUG [0m Response body: {
  "er_physical_interface": {
    "connected_ese_port_id": "5b2dee2e-7420-4cd4-b270-5081eb9eb371",
    "description": "",
    "device_id": "769b5e3b-3320-41ec-9be0-4567b50f1aab",
    "id": "96c3629b-9bfb-4d54-adc1-750d024c2858",
    "name": "ae0",
    "status": "ACTIVE",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:04:31.911 gohan.server.middleware INFO [0m Completed 200 OK in 90.049026ms
03:04:31.913 gohan.server.middleware INFO [0m Started GET /v2.0/er_physical_interfaces/96c3629b-9bfb-4d54-adc1-750d024c2858 for client 172.17.0.19:40080 data: {}
[36m03:04:31.913 gohan.server.middleware DEBUG [0m Request headers: map[Accept:[application/json] Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[gzip] User-Agent:[gophercloud/1.0.0] Connection:[close] Content-Length:[2]]
[36m03:04:31.913 gohan.server.middleware DEBUG [0m Request body: {}
[36m03:04:31.994 gohan.server.resources DEBUG [0m Show er_physical_interface 96c3629b-9bfb-4d54-adc1-750d024c2858 started
[36m03:04:31.996 gohan.server.resources DEBUG [0m Show er_physical_interface 96c3629b-9bfb-4d54-adc1-750d024c2858 completed: map[er_physical_interface:map[connected_ese_port_id:5b2dee2e-7420-4cd4-b270-5081eb9eb371 status:ACTIVE tenant_id:0b576f6f4cbf414f829cd12f008bf08f id:96c3629b-9bfb-4d54-adc1-750d024c2858 name:ae0 description: device_id:769b5e3b-3320-41ec-9be0-4567b50f1aab]]
[36m03:04:31.997 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[330]]
[36m03:04:31.997 gohan.server.middleware DEBUG [0m Response body: {
  "er_physical_interface": {
    "connected_ese_port_id": "5b2dee2e-7420-4cd4-b270-5081eb9eb371",
    "description": "",
    "device_id": "769b5e3b-3320-41ec-9be0-4567b50f1aab",
    "id": "96c3629b-9bfb-4d54-adc1-750d024c2858",
    "name": "ae0",
    "status": "ACTIVE",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:04:31.997 gohan.server.middleware INFO [0m Completed 200 OK in 84.191547ms
03:04:32.018 gohan.server.middleware INFO [0m Started POST /v2.0/ha_interfaces for client 172.17.0.19:40086 data: 
{
"ha_interface": {
"ha_router_id": "3a3d7a43-d749-44e8-90bc-de7b37d1d258",
"link_type": "downlink",
"name": "sample-ha-router-downlink",
"primary_interface_id": "a752c6c0-2075-4e7f-9040-5fcefcad0252",
"secondary_interface_id": "96c3629b-9bfb-4d54-adc1-750d024c2858",
"restricted_vlans": "0-1024,4094",
"tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
}
}
[36m03:04:32.018 gohan.server.middleware DEBUG [0m Request headers: map[Accept-Encoding:[identity] Content-Length:[355] Content-Type:[application/json] X-Auth-Token:[***]]
[36m03:04:32.018 gohan.server.middleware DEBUG [0m Request body: 
{
"ha_interface": {
"ha_router_id": "3a3d7a43-d749-44e8-90bc-de7b37d1d258",
"link_type": "downlink",
"name": "sample-ha-router-downlink",
"primary_interface_id": "a752c6c0-2075-4e7f-9040-5fcefcad0252",
"secondary_interface_id": "96c3629b-9bfb-4d54-adc1-750d024c2858",
"restricted_vlans": "0-1024,4094",
"tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
}
}
[36m03:04:32.100 gohan.server.resources DEBUG [0m Create ha_interface with data map[name:sample-ha-router-downlink primary_interface_id:a752c6c0-2075-4e7f-9040-5fcefcad0252 secondary_interface_id:96c3629b-9bfb-4d54-adc1-750d024c2858 restricted_vlans:0-1024,4094 tenant_id:0b576f6f4cbf414f829cd12f008bf08f ha_router_id:3a3d7a43-d749-44e8-90bc-de7b37d1d258 link_type:downlink] started
[36m03:04:32.100 gohan.schema DEBUG [0m No properties in resource policy. Allowing all property access
[36m03:04:32.163 gohan.server.resources DEBUG [0m List er_physical_interface query: map[id:[a752c6c0-2075-4e7f-9040-5fcefcad0252]] started
[36m03:04:32.165 gohan.server.resources DEBUG [0m List er_physical_interface query: map[id:[a752c6c0-2075-4e7f-9040-5fcefcad0252]] completed
[36m03:04:32.225 gohan.server.resources DEBUG [0m List er_physical_interface query: map[id:[96c3629b-9bfb-4d54-adc1-750d024c2858]] started
[36m03:04:32.227 gohan.server.resources DEBUG [0m List er_physical_interface query: map[id:[96c3629b-9bfb-4d54-adc1-750d024c2858]] completed
[36m03:04:32.290 gohan.server.resources DEBUG [0m List ha_router query: map[id:[3a3d7a43-d749-44e8-90bc-de7b37d1d258]] started
[36m03:04:32.292 gohan.server.resources DEBUG [0m List ha_router query: map[id:[3a3d7a43-d749-44e8-90bc-de7b37d1d258]] completed
03:04:32.689 gohan.db.sql INFO [0m Executing SQL query in transaction '8fb8ae3b-6b02-4d7b-8328-e57aab15ce25': 'INSERT INTO `ha_interfaces` (`secondary_interface_id`,`name`,`admin_state_up`,`vlan_pool_state`,`maximum_be_bandwidth`,`id`,`vlan_ids_available`,`primary_interface_id`,`status`,`link_type`,`restricted_vlans`,`gateway_instances_count`,`maximum_ga_bandwidth`,`tenant_id`,`available_ga_bandwidth`,`ha_router_id`,`available_be_bandwidth`,`description`) VALUES (96c3629b-9bfb-4d54-adc1-750d024c2858,sample-ha-router-downlink,true,//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAM=,0,372ed357-e622-41fb-a613-076d332838e2,3069,a752c6c0-2075-4e7f-9040-5fcefcad0252,PENDING_CREATE,downlink,0-1024,4094,0,0,0b576f6f4cbf414f829cd12f008bf08f,0,3a3d7a43-d749-44e8-90bc-de7b37d1d258,0,)'
03:04:32.690 gohan.db.sql INFO [0m Executing SQL query in transaction '8fb8ae3b-6b02-4d7b-8328-e57aab15ce25': 'INSERT INTO `events` (`timestamp`,`type`,`marked_for_deletion`,`body`,`version`,`path`) VALUES (1494471872,create,false,"{\"admin_state_up\":true,\"available_be_bandwidth\":0,\"available_ga_bandwidth\":0,\"description\":\"\",\"gateway_instances_count\":0,\"ha_router_id\":\"3a3d7a43-d749-44e8-90bc-de7b37d1d258\",\"id\":\"372ed357-e622-41fb-a613-076d332838e2\",\"link_type\":\"downlink\",\"maximum_be_bandwidth\":0,\"maximum_ga_bandwidth\":0,\"name\":\"sample-ha-router-downlink\",\"primary_interface_id\":\"a752c6c0-2075-4e7f-9040-5fcefcad0252\",\"restricted_vlans\":\"0-1024,4094\",\"secondary_interface_id\":\"96c3629b-9bfb-4d54-adc1-750d024c2858\",\"status\":\"PENDING_CREATE\",\"tenant_id\":\"0b576f6f4cbf414f829cd12f008bf08f\",\"vlan_ids_available\":3069,\"vlan_pool_state\":\"//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAM=\"}",1,/v2.0/ha_interfaces/372ed357-e622-41fb-a613-076d332838e2)'
[36m03:04:32.705 gohan.server.resources DEBUG [0m Create ha_interface completed: map[ha_interface:map[gateway_instances_count:0 description: maximum_ga_bandwidth:0 status:PENDING_CREATE available_ga_bandwidth:0 secondary_interface_id:96c3629b-9bfb-4d54-adc1-750d024c2858 restricted_vlans:0-1024,4094 tenant_id:0b576f6f4cbf414f829cd12f008bf08f link_type:downlink name:sample-ha-router-downlink available_be_bandwidth:0 vlan_ids_available:3069 admin_state_up:true vlan_pool_state://////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAM= maximum_be_bandwidth:0 ha_router_id:3a3d7a43-d749-44e8-90bc-de7b37d1d258 primary_interface_id:a752c6c0-2075-4e7f-9040-5fcefcad0252 id:372ed357-e622-41fb-a613-076d332838e2]]
[36m03:04:32.705 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[1424]]
[36m03:04:32.706 gohan.server.middleware DEBUG [0m Response body: {
  "ha_interface": {
    "admin_state_up": true,
    "available_be_bandwidth": 0,
    "available_ga_bandwidth": 0,
    "description": "",
    "gateway_instances_count": 0,
    "ha_router_id": "3a3d7a43-d749-44e8-90bc-de7b37d1d258",
    "id": "372ed357-e622-41fb-a613-076d332838e2",
    "link_type": "downlink",
    "maximum_be_bandwidth": 0,
    "maximum_ga_bandwidth": 0,
    "name": "sample-ha-router-downlink",
    "primary_interface_id": "a752c6c0-2075-4e7f-9040-5fcefcad0252",
    "restricted_vlans": "0-1024,4094",
    "secondary_interface_id": "96c3629b-9bfb-4d54-adc1-750d024c2858",
    "status": "PENDING_CREATE",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
    "vlan_ids_available": 3069,
    "vlan_pool_state": "//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAM="
  }
}
03:04:32.706 gohan.server.middleware INFO [0m Completed 201 Created in 687.852536ms
[36m03:04:32.707 gohan.server.sync DEBUG [0m Processing event 70 - create
03:04:32.707 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/ha_interfaces/372ed357-e622-41fb-a613-076d332838e2
[36m03:04:32.714 gohan.server.sync DEBUG [0m Deleting event 70
03:04:32.715 gohan.db.sql INFO [0m Executing SQL query in transaction 'a6b4d45a-6f7a-457a-9809-7b2c25ce2488': 'DELETE FROM `events` WHERE id = 70'
[36m03:04:32.716 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
03:04:32.726 gohan.server.middleware INFO [0m Started GET /v2.0/ha_interfaces/372ed357-e622-41fb-a613-076d332838e2 for client 172.17.0.19:40100 data: 
[36m03:04:32.726 gohan.server.middleware DEBUG [0m Request headers: map[Accept-Encoding:[identity] Content-Length:[0] Content-Type:[application/json] X-Auth-Token:[***]]
[36m03:04:32.726 gohan.server.middleware DEBUG [0m Request body: 
[36m03:04:32.828 gohan.server DEBUG [0m State event update received: set /state/v2.0/ha_interfaces/372ed357-e622-41fb-a613-076d332838e2 map[state:map[state_monitoring:{"primary": "ACTIVE", "secondary": "ACTIVE"} worker_state:CREATE_COMPLETED] version:1 error:]
03:04:32.828 gohan.server.sync INFO [0m StateUpdate for set /state/v2.0/ha_interfaces/372ed357-e622-41fb-a613-076d332838e2 map[error: state:map[state_monitoring:{"primary": "ACTIVE", "secondary": "ACTIVE"} worker_state:CREATE_COMPLETED] version:1] started
[36m03:04:32.840 gohan.server.resources DEBUG [0m Show ha_interface 372ed357-e622-41fb-a613-076d332838e2 started
[36m03:04:32.842 gohan.server.resources DEBUG [0m Show ha_interface 372ed357-e622-41fb-a613-076d332838e2 completed: map[ha_interface:map[primary_interface_id:a752c6c0-2075-4e7f-9040-5fcefcad0252 id:372ed357-e622-41fb-a613-076d332838e2 ha_router_id:3a3d7a43-d749-44e8-90bc-de7b37d1d258 description: vlan_pool_state://////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAM= status:PENDING_CREATE tenant_id:0b576f6f4cbf414f829cd12f008bf08f available_ga_bandwidth:0 maximum_ga_bandwidth:0 available_be_bandwidth:0 vlan_ids_available:3069 admin_state_up:true maximum_be_bandwidth:0 restricted_vlans:0-1024,4094 secondary_interface_id:96c3629b-9bfb-4d54-adc1-750d024c2858 name:sample-ha-router-downlink link_type:downlink gateway_instances_count:0]]
[36m03:04:32.842 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[1424]]
[36m03:04:32.842 gohan.server.middleware DEBUG [0m Response body: {
  "ha_interface": {
    "admin_state_up": true,
    "available_be_bandwidth": 0,
    "available_ga_bandwidth": 0,
    "description": "",
    "gateway_instances_count": 0,
    "ha_router_id": "3a3d7a43-d749-44e8-90bc-de7b37d1d258",
    "id": "372ed357-e622-41fb-a613-076d332838e2",
    "link_type": "downlink",
    "maximum_be_bandwidth": 0,
    "maximum_ga_bandwidth": 0,
    "name": "sample-ha-router-downlink",
    "primary_interface_id": "a752c6c0-2075-4e7f-9040-5fcefcad0252",
    "restricted_vlans": "0-1024,4094",
    "secondary_interface_id": "96c3629b-9bfb-4d54-adc1-750d024c2858",
    "status": "PENDING_CREATE",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
    "vlan_ids_available": 3069,
    "vlan_pool_state": "//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAM="
  }
}
03:04:32.843 gohan.server.middleware INFO [0m Completed 200 OK in 116.380721ms
03:04:32.846 gohan.sync INFO [0m Locked gohan/cluster/lock/state/v2.0/ha_interfaces/372ed357-e622-41fb-a613-076d332838e2 with index 325
03:04:32.925 gohan.db.sql INFO [0m Executing SQL query in transaction '9c2698ca-9444-40e6-9aca-c262640a6a3c': 'UPDATE `ha_interfaces` SET `available_ga_bandwidth` = 0, `restricted_vlans` = 0-1024,4094, `gateway_instances_count` = 0, `maximum_ga_bandwidth` = 0, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `ha_router_id` = 3a3d7a43-d749-44e8-90bc-de7b37d1d258, `available_be_bandwidth` = 0, `description` = , `primary_interface_id` = a752c6c0-2075-4e7f-9040-5fcefcad0252, `secondary_interface_id` = 96c3629b-9bfb-4d54-adc1-750d024c2858, `name` = sample-ha-router-downlink, `admin_state_up` = true, `vlan_pool_state` = //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAM=, `maximum_be_bandwidth` = 0, `id` = 372ed357-e622-41fb-a613-076d332838e2, `vlan_ids_available` = 3069, `status` = PENDING_CREATE, `link_type` = downlink, `state_version` = 1, `monitoring_version` = 0, `state_error` = , `state` = {"error":"","state":{"state_monitoring":"{\"primary\": \"ACTIVE\", \"secondary\": \"ACTIVE\"}","worker_state":"CREATE_COMPLETED"}}, `state_monitoring` = {}, `marked_for_deletion` = 0 WHERE id = 372ed357-e622-41fb-a613-076d332838e2'
03:04:32.929 gohan.extension.ha_interface.post_state_update_in_transaction INFO [0m Config version: 1, State version: 1, Monitoring version: 0
03:04:32.929 gohan.extension.ha_interface.post_state_update_in_transaction INFO [0m Reading monitoring data from worker state: {"primary": "ACTIVE", "secondary": "ACTIVE"}
03:04:32.935 gohan.db.sql INFO [0m Executing SQL query in transaction '9c2698ca-9444-40e6-9aca-c262640a6a3c': 'UPDATE `ha_interfaces` SET `ha_router_id` = 3a3d7a43-d749-44e8-90bc-de7b37d1d258, `available_be_bandwidth` = 0, `description` = , `maximum_be_bandwidth` = 0, `id` = 372ed357-e622-41fb-a613-076d332838e2, `vlan_ids_available` = 3069, `primary_interface_id` = a752c6c0-2075-4e7f-9040-5fcefcad0252, `secondary_interface_id` = 96c3629b-9bfb-4d54-adc1-750d024c2858, `name` = sample-ha-router-downlink, `admin_state_up` = true, `vlan_pool_state` = //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAM=, `status` = ACTIVE, `link_type` = downlink, `maximum_ga_bandwidth` = 0, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `available_ga_bandwidth` = 0, `restricted_vlans` = 0-1024,4094, `gateway_instances_count` = 0 WHERE id = 372ed357-e622-41fb-a613-076d332838e2'
[36m03:04:32.963 gohan.server DEBUG [0m Monitoring Watcher starts watch
03:04:32.963 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/state/v2.0/ha_interfaces/372ed357-e622-41fb-a613-076d332838e2 with index 325
[31m03:04:32.963 gohan.sync.etcd ERROR [0m watch error: 100: Key not found (/monitoring) [333]
[31m03:04:32.963 gohan.server ERROR [0m sync watch error: 100: Key not found (/monitoring) [333]
03:04:32.972 gohan.sync INFO [0m Path gohan/cluster/lock/state/v2.0/ha_interfaces/372ed357-e622-41fb-a613-076d332838e2 already unlocked or not locked
03:04:33.853 gohan.server.middleware INFO [0m Started GET /v2.0/ha_interfaces/372ed357-e622-41fb-a613-076d332838e2 for client 172.17.0.19:40120 data: 
[36m03:04:33.853 gohan.server.middleware DEBUG [0m Request headers: map[Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[identity] Content-Length:[0]]
[36m03:04:33.854 gohan.server.middleware DEBUG [0m Request body: 
[36m03:04:33.937 gohan.server.resources DEBUG [0m Show ha_interface 372ed357-e622-41fb-a613-076d332838e2 started
[36m03:04:33.940 gohan.server.resources DEBUG [0m Show ha_interface 372ed357-e622-41fb-a613-076d332838e2 completed: map[ha_interface:map[vlan_pool_state://////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAM= maximum_be_bandwidth:0 id:372ed357-e622-41fb-a613-076d332838e2 ha_router_id:3a3d7a43-d749-44e8-90bc-de7b37d1d258 primary_interface_id:a752c6c0-2075-4e7f-9040-5fcefcad0252 status:ACTIVE restricted_vlans:0-1024,4094 vlan_ids_available:3069 secondary_interface_id:96c3629b-9bfb-4d54-adc1-750d024c2858 name:sample-ha-router-downlink admin_state_up:true link_type:downlink maximum_ga_bandwidth:0 tenant_id:0b576f6f4cbf414f829cd12f008bf08f available_ga_bandwidth:0 gateway_instances_count:0 available_be_bandwidth:0 description:]]
[36m03:04:33.940 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[1416]]
[36m03:04:33.941 gohan.server.middleware DEBUG [0m Response body: {
  "ha_interface": {
    "admin_state_up": true,
    "available_be_bandwidth": 0,
    "available_ga_bandwidth": 0,
    "description": "",
    "gateway_instances_count": 0,
    "ha_router_id": "3a3d7a43-d749-44e8-90bc-de7b37d1d258",
    "id": "372ed357-e622-41fb-a613-076d332838e2",
    "link_type": "downlink",
    "maximum_be_bandwidth": 0,
    "maximum_ga_bandwidth": 0,
    "name": "sample-ha-router-downlink",
    "primary_interface_id": "a752c6c0-2075-4e7f-9040-5fcefcad0252",
    "restricted_vlans": "0-1024,4094",
    "secondary_interface_id": "96c3629b-9bfb-4d54-adc1-750d024c2858",
    "status": "ACTIVE",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
    "vlan_ids_available": 3069,
    "vlan_pool_state": "//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAM="
  }
}
03:04:33.941 gohan.server.middleware INFO [0m Completed 200 OK in 87.584008ms
03:04:34.340 gohan.server.middleware INFO [0m Started GET /v2.0/ha_interfaces/372ed357-e622-41fb-a613-076d332838e2 for client 172.17.0.19:40128 data: 
[36m03:04:34.340 gohan.server.middleware DEBUG [0m Request headers: map[Accept-Encoding:[gzip] User-Agent:[gophercloud/1.0.0] Connection:[close] Accept:[application/json] X-Auth-Token:[***]]
[36m03:04:34.340 gohan.server.middleware DEBUG [0m Request body: 
[36m03:04:34.426 gohan.server.resources DEBUG [0m Show ha_interface 372ed357-e622-41fb-a613-076d332838e2 started
[36m03:04:34.429 gohan.server.resources DEBUG [0m Show ha_interface 372ed357-e622-41fb-a613-076d332838e2 completed: map[ha_interface:map[link_type:downlink restricted_vlans:0-1024,4094 available_be_bandwidth:0 description: maximum_ga_bandwidth:0 ha_router_id:3a3d7a43-d749-44e8-90bc-de7b37d1d258 name:sample-ha-router-downlink vlan_pool_state://////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAM= tenant_id:0b576f6f4cbf414f829cd12f008bf08f gateway_instances_count:0 secondary_interface_id:96c3629b-9bfb-4d54-adc1-750d024c2858 admin_state_up:true id:372ed357-e622-41fb-a613-076d332838e2 available_ga_bandwidth:0 vlan_ids_available:3069 primary_interface_id:a752c6c0-2075-4e7f-9040-5fcefcad0252 maximum_be_bandwidth:0 status:ACTIVE]]
[36m03:04:34.429 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[1416]]
[36m03:04:34.430 gohan.server.middleware DEBUG [0m Response body: {
  "ha_interface": {
    "admin_state_up": true,
    "available_be_bandwidth": 0,
    "available_ga_bandwidth": 0,
    "description": "",
    "gateway_instances_count": 0,
    "ha_router_id": "3a3d7a43-d749-44e8-90bc-de7b37d1d258",
    "id": "372ed357-e622-41fb-a613-076d332838e2",
    "link_type": "downlink",
    "maximum_be_bandwidth": 0,
    "maximum_ga_bandwidth": 0,
    "name": "sample-ha-router-downlink",
    "primary_interface_id": "a752c6c0-2075-4e7f-9040-5fcefcad0252",
    "restricted_vlans": "0-1024,4094",
    "secondary_interface_id": "96c3629b-9bfb-4d54-adc1-750d024c2858",
    "status": "ACTIVE",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
    "vlan_ids_available": 3069,
    "vlan_pool_state": "//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAM="
  }
}
03:04:34.430 gohan.server.middleware INFO [0m Completed 200 OK in 89.83601ms
03:04:34.431 gohan.server.middleware INFO [0m Started GET /v2.0/ha_interfaces/372ed357-e622-41fb-a613-076d332838e2 for client 172.17.0.19:40134 data: {}
[36m03:04:34.431 gohan.server.middleware DEBUG [0m Request headers: map[User-Agent:[gophercloud/1.0.0] Connection:[close] Content-Length:[2] Accept:[application/json] Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[gzip]]
[36m03:04:34.431 gohan.server.middleware DEBUG [0m Request body: {}
[36m03:04:34.513 gohan.server.resources DEBUG [0m Show ha_interface 372ed357-e622-41fb-a613-076d332838e2 started
[36m03:04:34.516 gohan.server.resources DEBUG [0m Show ha_interface 372ed357-e622-41fb-a613-076d332838e2 completed: map[ha_interface:map[gateway_instances_count:0 available_be_bandwidth:0 description: name:sample-ha-router-downlink admin_state_up:true vlan_pool_state://////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAM= id:372ed357-e622-41fb-a613-076d332838e2 status:ACTIVE maximum_ga_bandwidth:0 tenant_id:0b576f6f4cbf414f829cd12f008bf08f secondary_interface_id:96c3629b-9bfb-4d54-adc1-750d024c2858 vlan_ids_available:3069 primary_interface_id:a752c6c0-2075-4e7f-9040-5fcefcad0252 link_type:downlink restricted_vlans:0-1024,4094 ha_router_id:3a3d7a43-d749-44e8-90bc-de7b37d1d258 available_ga_bandwidth:0 maximum_be_bandwidth:0]]
[36m03:04:34.516 gohan.server.middleware DEBUG [0m Response headers: map[Content-Length:[1416] Content-Type:[application/json]]
[36m03:04:34.516 gohan.server.middleware DEBUG [0m Response body: {
  "ha_interface": {
    "admin_state_up": true,
    "available_be_bandwidth": 0,
    "available_ga_bandwidth": 0,
    "description": "",
    "gateway_instances_count": 0,
    "ha_router_id": "3a3d7a43-d749-44e8-90bc-de7b37d1d258",
    "id": "372ed357-e622-41fb-a613-076d332838e2",
    "link_type": "downlink",
    "maximum_be_bandwidth": 0,
    "maximum_ga_bandwidth": 0,
    "name": "sample-ha-router-downlink",
    "primary_interface_id": "a752c6c0-2075-4e7f-9040-5fcefcad0252",
    "restricted_vlans": "0-1024,4094",
    "secondary_interface_id": "96c3629b-9bfb-4d54-adc1-750d024c2858",
    "status": "ACTIVE",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
    "vlan_ids_available": 3069,
    "vlan_pool_state": "//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAM="
  }
}
03:04:34.517 gohan.server.middleware INFO [0m Completed 200 OK in 85.308854ms
[36m03:04:37.964 gohan.server DEBUG [0m Monitoring Watcher starts watch
[31m03:04:37.964 gohan.sync.etcd ERROR [0m watch error: 100: Key not found (/monitoring) [334]
[31m03:04:37.965 gohan.server ERROR [0m sync watch error: 100: Key not found (/monitoring) [334]
[36m03:04:42.965 gohan.server DEBUG [0m Monitoring Watcher starts watch
[31m03:04:42.966 gohan.sync.etcd ERROR [0m watch error: 100: Key not found (/monitoring) [335]
[31m03:04:42.966 gohan.server ERROR [0m sync watch error: 100: Key not found (/monitoring) [335]
03:04:44.540 gohan.server.middleware INFO [0m Started POST /v2.0/common_function_pools for client 172.17.0.19:40140 data: 
{
"common_function_pool": {
"description": "sample common function pool",
"dnat_group_name": "DNAT-RULE",
"dnat_pool_group_name": "DNAT-POOL",
"downlink_interfaces": [ "372ed357-e622-41fb-a613-076d332838e2" ],
"link_local_cidr": "169.254.0.0/17",
"logical_tunnel_interface_name": "lt-0/0/0",
"name": "common_function_pool",
"service_interface_name": "ms-0/2/0",
"service_vrf_name": "SHARED-RESOURCE",
"snapt_group_name": "SNAPT-RULE",
"snapt_pool_group_name": "SNAPT-POOL",
"tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
"vrrp_config": [{
"primary_ip": "169.254.1.251",
"secondary_ip": "169.254.1.252",
"vrid": 41 },{
"primary_ip": "169.254.1.253",
"secondary_ip": "169.254.1.254",
"vrid": 42}],
"vrrp_group_name": "IF-USER-VRRP-ACT"
}
}
[36m03:04:44.540 gohan.server.middleware DEBUG [0m Request headers: map[Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[identity] Content-Length:[740]]
[36m03:04:44.540 gohan.server.middleware DEBUG [0m Request body: 
{
"common_function_pool": {
"description": "sample common function pool",
"dnat_group_name": "DNAT-RULE",
"dnat_pool_group_name": "DNAT-POOL",
"downlink_interfaces": [ "372ed357-e622-41fb-a613-076d332838e2" ],
"link_local_cidr": "169.254.0.0/17",
"logical_tunnel_interface_name": "lt-0/0/0",
"name": "common_function_pool",
"service_interface_name": "ms-0/2/0",
"service_vrf_name": "SHARED-RESOURCE",
"snapt_group_name": "SNAPT-RULE",
"snapt_pool_group_name": "SNAPT-POOL",
"tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
"vrrp_config": [{
"primary_ip": "169.254.1.251",
"secondary_ip": "169.254.1.252",
"vrid": 41 },{
"primary_ip": "169.254.1.253",
"secondary_ip": "169.254.1.254",
"vrid": 42}],
"vrrp_group_name": "IF-USER-VRRP-ACT"
}
}
[36m03:04:44.621 gohan.server.resources DEBUG [0m Create common_function_pool with data map[tenant_id:0b576f6f4cbf414f829cd12f008bf08f vrrp_config:[map[primary_ip:169.254.1.251 secondary_ip:169.254.1.252 vrid:41] map[primary_ip:169.254.1.253 secondary_ip:169.254.1.254 vrid:42]] description:sample common function pool link_local_cidr:169.254.0.0/17 service_interface_name:ms-0/2/0 snapt_group_name:SNAPT-RULE vrrp_group_name:IF-USER-VRRP-ACT snapt_pool_group_name:SNAPT-POOL dnat_pool_group_name:DNAT-POOL logical_tunnel_interface_name:lt-0/0/0 service_vrf_name:SHARED-RESOURCE dnat_group_name:DNAT-RULE downlink_interfaces:[372ed357-e622-41fb-a613-076d332838e2] name:common_function_pool] started
[36m03:04:44.621 gohan.schema DEBUG [0m No properties in resource policy. Allowing all property access
03:04:44.629 gohan.db.sql INFO [0m Executing SQL query in transaction '46e30f74-90cc-4d7d-8a82-b945c2bd76ee': 'INSERT INTO `common_function_pools` (`link_local_netmask`,`name`,`dnat_pool_group_name`,`tenant_id`,`downlink_interfaces`,`vrrp_group_name`,`common_function_pool_state`,`service_interface_name`,`link_local_cidr`,`vrrp_config`,`description`,`logical_tunnel_interface_name`,`snapt_pool_group_name`,`dnat_group_name`,`service_vrf_name`,`id`,`snapt_group_name`) VALUES (17,common_function_pool,DNAT-POOL,0b576f6f4cbf414f829cd12f008bf08f,["372ed357-e622-41fb-a613-076d332838e2"],IF-USER-VRRP-ACT,AAD//w==,ms-0/2/0,169.254.0.0/17,[{"primary_ip":"169.254.1.251","secondary_ip":"169.254.1.252","vrid":41},{"primary_ip":"169.254.1.253","secondary_ip":"169.254.1.254","vrid":42}],sample common function pool,lt-0/0/0,SNAPT-POOL,DNAT-RULE,SHARED-RESOURCE,cca32fd7-2430-4acc-87e9-a7b527e9918d,SNAPT-RULE)'
03:04:44.630 gohan.db.sql INFO [0m Executing SQL query in transaction '46e30f74-90cc-4d7d-8a82-b945c2bd76ee': 'INSERT INTO `events` (`body`,`version`,`path`,`timestamp`,`type`,`marked_for_deletion`) VALUES ("{\"common_function_pool_state\":\"AAD//w==\",\"description\":\"sample common function pool\",\"dnat_group_name\":\"DNAT-RULE\",\"dnat_pool_group_name\":\"DNAT-POOL\",\"downlink_interfaces\":[\"372ed357-e622-41fb-a613-076d332838e2\"],\"id\":\"cca32fd7-2430-4acc-87e9-a7b527e9918d\",\"link_local_cidr\":\"169.254.0.0/17\",\"link_local_netmask\":17,\"logical_tunnel_interface_name\":\"lt-0/0/0\",\"name\":\"common_function_pool\",\"service_interface_name\":\"ms-0/2/0\",\"service_vrf_name\":\"SHARED-RESOURCE\",\"snapt_group_name\":\"SNAPT-RULE\",\"snapt_pool_group_name\":\"SNAPT-POOL\",\"tenant_id\":\"0b576f6f4cbf414f829cd12f008bf08f\",\"vrrp_config\":[{\"primary_ip\":\"169.254.1.251\",\"secondary_ip\":\"169.254.1.252\",\"vrid\":41},{\"primary_ip\":\"169.254.1.253\",\"secondary_ip\":\"169.254.1.254\",\"vrid\":42}],\"vrrp_group_name\":\"IF-USER-VRRP-ACT\"}",1,/v2.0/common_function_pools/cca32fd7-2430-4acc-87e9-a7b527e9918d,1494471884,create,false)'
[36m03:04:44.644 gohan.server.resources DEBUG [0m Create common_function_pool completed: map[common_function_pool:map[description:sample common function pool link_local_cidr:169.254.0.0/17 service_interface_name:ms-0/2/0 tenant_id:0b576f6f4cbf414f829cd12f008bf08f vrrp_config:[map[primary_ip:169.254.1.251 secondary_ip:169.254.1.252 vrid:41] map[secondary_ip:169.254.1.254 vrid:42 primary_ip:169.254.1.253]] snapt_group_name:SNAPT-RULE vrrp_group_name:IF-USER-VRRP-ACT common_function_pool_state:AAD//w== dnat_pool_group_name:DNAT-POOL logical_tunnel_interface_name:lt-0/0/0 service_vrf_name:SHARED-RESOURCE snapt_pool_group_name:SNAPT-POOL id:cca32fd7-2430-4acc-87e9-a7b527e9918d dnat_group_name:DNAT-RULE downlink_interfaces:[372ed357-e622-41fb-a613-076d332838e2] name:common_function_pool link_local_netmask:17]]
[36m03:04:44.646 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[1015]]
[36m03:04:44.646 gohan.server.middleware DEBUG [0m Response body: {
  "common_function_pool": {
    "common_function_pool_state": "AAD//w==",
    "description": "sample common function pool",
    "dnat_group_name": "DNAT-RULE",
    "dnat_pool_group_name": "DNAT-POOL",
    "downlink_interfaces": [
      "372ed357-e622-41fb-a613-076d332838e2"
    ],
    "id": "cca32fd7-2430-4acc-87e9-a7b527e9918d",
    "link_local_cidr": "169.254.0.0/17",
    "link_local_netmask": 17,
    "logical_tunnel_interface_name": "lt-0/0/0",
    "name": "common_function_pool",
    "service_interface_name": "ms-0/2/0",
    "service_vrf_name": "SHARED-RESOURCE",
    "snapt_group_name": "SNAPT-RULE",
    "snapt_pool_group_name": "SNAPT-POOL",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
    "vrrp_config": [
      {
        "primary_ip": "169.254.1.251",
        "secondary_ip": "169.254.1.252",
        "vrid": 41
      },
      {
        "primary_ip": "169.254.1.253",
        "secondary_ip": "169.254.1.254",
        "vrid": 42
      }
    ],
    "vrrp_group_name": "IF-USER-VRRP-ACT"
  }
}
03:04:44.646 gohan.server.middleware INFO [0m Completed 201 Created in 106.542458ms
[36m03:04:44.647 gohan.server.sync DEBUG [0m Processing event 71 - create
03:04:44.647 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/common_function_pools/cca32fd7-2430-4acc-87e9-a7b527e9918d
[36m03:04:44.655 gohan.server.sync DEBUG [0m Deleting event 71
03:04:44.660 gohan.server.middleware INFO [0m Started GET /v2.0/common_function_pools/cca32fd7-2430-4acc-87e9-a7b527e9918d for client 172.17.0.19:40148 data: 
[36m03:04:44.660 gohan.server.middleware DEBUG [0m Request headers: map[Content-Length:[0] Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[identity]]
[36m03:04:44.660 gohan.server.middleware DEBUG [0m Request body: 
[36m03:04:44.663 gohan.server DEBUG [0m State event update received: set /state/v2.0/common_function_pools/cca32fd7-2430-4acc-87e9-a7b527e9918d map[error: state:map[worker_state:READ_COMPLETE] version:1]
03:04:44.664 gohan.db.sql INFO [0m Executing SQL query in transaction '18648e96-a14e-467f-bde9-db39da07fb4e': 'DELETE FROM `events` WHERE id = 71'
03:04:44.664 gohan.server.sync INFO [0m StateUpdate for set /state/v2.0/common_function_pools/cca32fd7-2430-4acc-87e9-a7b527e9918d map[error: state:map[worker_state:READ_COMPLETE] version:1] started
[36m03:04:44.665 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
03:04:44.675 gohan.sync INFO [0m Locked gohan/cluster/lock/state/v2.0/common_function_pools/cca32fd7-2430-4acc-87e9-a7b527e9918d with index 338
03:04:44.750 gohan.db.sql INFO [0m Executing SQL query in transaction '79740087-2995-40cb-8ae9-f99cb73dd929': 'UPDATE `common_function_pools` SET `common_function_pool_state` = AAD//w==, `service_interface_name` = ms-0/2/0, `link_local_cidr` = 169.254.0.0/17, `vrrp_config` = [{"primary_ip":"169.254.1.251","secondary_ip":"169.254.1.252","vrid":41},{"primary_ip":"169.254.1.253","secondary_ip":"169.254.1.254","vrid":42}], `description` = sample common function pool, `snapt_pool_group_name` = SNAPT-POOL, `dnat_group_name` = DNAT-RULE, `service_vrf_name` = SHARED-RESOURCE, `id` = cca32fd7-2430-4acc-87e9-a7b527e9918d, `snapt_group_name` = SNAPT-RULE, `logical_tunnel_interface_name` = lt-0/0/0, `name` = common_function_pool, `dnat_pool_group_name` = DNAT-POOL, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `downlink_interfaces` = ["372ed357-e622-41fb-a613-076d332838e2"], `vrrp_group_name` = IF-USER-VRRP-ACT, `link_local_netmask` = 17, `state_version` = 1, `monitoring_version` = 0, `state_error` = , `state` = {"error":"","state":{"worker_state":"READ_COMPLETE"}}, `state_monitoring` = {}, `marked_for_deletion` = 0 WHERE id = cca32fd7-2430-4acc-87e9-a7b527e9918d'
[36m03:04:44.757 gohan.server.resources DEBUG [0m Show common_function_pool cca32fd7-2430-4acc-87e9-a7b527e9918d started
03:04:44.759 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/state/v2.0/common_function_pools/cca32fd7-2430-4acc-87e9-a7b527e9918d with index 338
[36m03:04:44.761 gohan.server.resources DEBUG [0m Show common_function_pool cca32fd7-2430-4acc-87e9-a7b527e9918d completed: map[common_function_pool:map[id:cca32fd7-2430-4acc-87e9-a7b527e9918d dnat_pool_group_name:DNAT-POOL tenant_id:0b576f6f4cbf414f829cd12f008bf08f snapt_group_name:SNAPT-RULE logical_tunnel_interface_name:lt-0/0/0 vrrp_group_name:IF-USER-VRRP-ACT link_local_netmask:17 name:common_function_pool description:sample common function pool snapt_pool_group_name:SNAPT-POOL common_function_pool_state:AAD//w== service_interface_name:ms-0/2/0 vrrp_config:[map[secondary_ip:169.254.1.252 vrid:41 primary_ip:169.254.1.251] map[primary_ip:169.254.1.253 secondary_ip:169.254.1.254 vrid:42]] dnat_group_name:DNAT-RULE service_vrf_name:SHARED-RESOURCE downlink_interfaces:[372ed357-e622-41fb-a613-076d332838e2] link_local_cidr:169.254.0.0/17]]
[36m03:04:44.761 gohan.server.middleware DEBUG [0m Response headers: map[Content-Length:[1015] Content-Type:[application/json]]
[36m03:04:44.761 gohan.server.middleware DEBUG [0m Response body: {
  "common_function_pool": {
    "common_function_pool_state": "AAD//w==",
    "description": "sample common function pool",
    "dnat_group_name": "DNAT-RULE",
    "dnat_pool_group_name": "DNAT-POOL",
    "downlink_interfaces": [
      "372ed357-e622-41fb-a613-076d332838e2"
    ],
    "id": "cca32fd7-2430-4acc-87e9-a7b527e9918d",
    "link_local_cidr": "169.254.0.0/17",
    "link_local_netmask": 17,
    "logical_tunnel_interface_name": "lt-0/0/0",
    "name": "common_function_pool",
    "service_interface_name": "ms-0/2/0",
    "service_vrf_name": "SHARED-RESOURCE",
    "snapt_group_name": "SNAPT-RULE",
    "snapt_pool_group_name": "SNAPT-POOL",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
    "vrrp_config": [
      {
        "primary_ip": "169.254.1.251",
        "secondary_ip": "169.254.1.252",
        "vrid": 41
      },
      {
        "primary_ip": "169.254.1.253",
        "secondary_ip": "169.254.1.254",
        "vrid": 42
      }
    ],
    "vrrp_group_name": "IF-USER-VRRP-ACT"
  }
}
03:04:44.761 gohan.server.middleware INFO [0m Completed 200 OK in 101.524419ms
03:04:44.772 gohan.sync INFO [0m Path gohan/cluster/lock/state/v2.0/common_function_pools/cca32fd7-2430-4acc-87e9-a7b527e9918d already unlocked or not locked
03:04:45.157 gohan.server.middleware INFO [0m Started GET /v2.0/common_function_pools/cca32fd7-2430-4acc-87e9-a7b527e9918d for client 172.17.0.19:40160 data: 
[36m03:04:45.157 gohan.server.middleware DEBUG [0m Request headers: map[User-Agent:[gophercloud/1.0.0] Connection:[close] Accept:[application/json] X-Auth-Token:[***] Accept-Encoding:[gzip]]
[36m03:04:45.157 gohan.server.middleware DEBUG [0m Request body: 
[36m03:04:45.239 gohan.server.resources DEBUG [0m Show common_function_pool cca32fd7-2430-4acc-87e9-a7b527e9918d started
[36m03:04:45.242 gohan.server.resources DEBUG [0m Show common_function_pool cca32fd7-2430-4acc-87e9-a7b527e9918d completed: map[common_function_pool:map[logical_tunnel_interface_name:lt-0/0/0 snapt_pool_group_name:SNAPT-POOL dnat_pool_group_name:DNAT-POOL service_interface_name:ms-0/2/0 tenant_id:0b576f6f4cbf414f829cd12f008bf08f description:sample common function pool snapt_group_name:SNAPT-RULE dnat_group_name:DNAT-RULE service_vrf_name:SHARED-RESOURCE id:cca32fd7-2430-4acc-87e9-a7b527e9918d name:common_function_pool downlink_interfaces:[372ed357-e622-41fb-a613-076d332838e2] common_function_pool_state:AAD//w== vrrp_group_name:IF-USER-VRRP-ACT link_local_netmask:17 link_local_cidr:169.254.0.0/17 vrrp_config:[map[secondary_ip:169.254.1.252 vrid:41 primary_ip:169.254.1.251] map[vrid:42 primary_ip:169.254.1.253 secondary_ip:169.254.1.254]]]]
[36m03:04:45.243 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[1015]]
[36m03:04:45.243 gohan.server.middleware DEBUG [0m Response body: {
  "common_function_pool": {
    "common_function_pool_state": "AAD//w==",
    "description": "sample common function pool",
    "dnat_group_name": "DNAT-RULE",
    "dnat_pool_group_name": "DNAT-POOL",
    "downlink_interfaces": [
      "372ed357-e622-41fb-a613-076d332838e2"
    ],
    "id": "cca32fd7-2430-4acc-87e9-a7b527e9918d",
    "link_local_cidr": "169.254.0.0/17",
    "link_local_netmask": 17,
    "logical_tunnel_interface_name": "lt-0/0/0",
    "name": "common_function_pool",
    "service_interface_name": "ms-0/2/0",
    "service_vrf_name": "SHARED-RESOURCE",
    "snapt_group_name": "SNAPT-RULE",
    "snapt_pool_group_name": "SNAPT-POOL",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
    "vrrp_config": [
      {
        "primary_ip": "169.254.1.251",
        "secondary_ip": "169.254.1.252",
        "vrid": 41
      },
      {
        "primary_ip": "169.254.1.253",
        "secondary_ip": "169.254.1.254",
        "vrid": 42
      }
    ],
    "vrrp_group_name": "IF-USER-VRRP-ACT"
  }
}
03:04:45.243 gohan.server.middleware INFO [0m Completed 200 OK in 85.685285ms
03:04:45.244 gohan.server.middleware INFO [0m Started GET /v2.0/common_function_pools/cca32fd7-2430-4acc-87e9-a7b527e9918d for client 172.17.0.19:40166 data: {}
[36m03:04:45.244 gohan.server.middleware DEBUG [0m Request headers: map[Accept:[application/json] Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[gzip] User-Agent:[gophercloud/1.0.0] Connection:[close] Content-Length:[2]]
[36m03:04:45.244 gohan.server.middleware DEBUG [0m Request body: {}
[36m03:04:45.327 gohan.server.resources DEBUG [0m Show common_function_pool cca32fd7-2430-4acc-87e9-a7b527e9918d started
[36m03:04:45.330 gohan.server.resources DEBUG [0m Show common_function_pool cca32fd7-2430-4acc-87e9-a7b527e9918d completed: map[common_function_pool:map[service_vrf_name:SHARED-RESOURCE snapt_pool_group_name:SNAPT-POOL description:sample common function pool dnat_pool_group_name:DNAT-POOL vrrp_group_name:IF-USER-VRRP-ACT link_local_netmask:17 link_local_cidr:169.254.0.0/17 service_interface_name:ms-0/2/0 dnat_group_name:DNAT-RULE id:cca32fd7-2430-4acc-87e9-a7b527e9918d logical_tunnel_interface_name:lt-0/0/0 name:common_function_pool common_function_pool_state:AAD//w== snapt_group_name:SNAPT-RULE tenant_id:0b576f6f4cbf414f829cd12f008bf08f downlink_interfaces:[372ed357-e622-41fb-a613-076d332838e2] vrrp_config:[map[primary_ip:169.254.1.251 secondary_ip:169.254.1.252 vrid:41] map[primary_ip:169.254.1.253 secondary_ip:169.254.1.254 vrid:42]]]]
[36m03:04:45.331 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[1015]]
[36m03:04:45.331 gohan.server.middleware DEBUG [0m Response body: {
  "common_function_pool": {
    "common_function_pool_state": "AAD//w==",
    "description": "sample common function pool",
    "dnat_group_name": "DNAT-RULE",
    "dnat_pool_group_name": "DNAT-POOL",
    "downlink_interfaces": [
      "372ed357-e622-41fb-a613-076d332838e2"
    ],
    "id": "cca32fd7-2430-4acc-87e9-a7b527e9918d",
    "link_local_cidr": "169.254.0.0/17",
    "link_local_netmask": 17,
    "logical_tunnel_interface_name": "lt-0/0/0",
    "name": "common_function_pool",
    "service_interface_name": "ms-0/2/0",
    "service_vrf_name": "SHARED-RESOURCE",
    "snapt_group_name": "SNAPT-RULE",
    "snapt_pool_group_name": "SNAPT-POOL",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
    "vrrp_config": [
      {
        "primary_ip": "169.254.1.251",
        "secondary_ip": "169.254.1.252",
        "vrid": 41
      },
      {
        "primary_ip": "169.254.1.253",
        "secondary_ip": "169.254.1.254",
        "vrid": 42
      }
    ],
    "vrrp_group_name": "IF-USER-VRRP-ACT"
  }
}
03:04:45.331 gohan.server.middleware INFO [0m Completed 200 OK in 86.749296ms
[36m03:04:47.966 gohan.server DEBUG [0m Monitoring Watcher starts watch
[31m03:04:47.967 gohan.sync.etcd ERROR [0m watch error: 100: Key not found (/monitoring) [342]
[31m03:04:47.967 gohan.server ERROR [0m sync watch error: 100: Key not found (/monitoring) [342]
[36m03:04:52.967 gohan.server DEBUG [0m Monitoring Watcher starts watch
[31m03:04:52.968 gohan.sync.etcd ERROR [0m watch error: 100: Key not found (/monitoring) [343]
[31m03:04:52.968 gohan.server ERROR [0m sync watch error: 100: Key not found (/monitoring) [343]
03:04:55.355 gohan.server.middleware INFO [0m Started POST /v2.0/common_functions for client 172.17.0.19:40178 data: 
{
"common_function": {
"common_function_pool_id": "cca32fd7-2430-4acc-87e9-a7b527e9918d",
"link_local_ip_address": "169.254.1.227",
"name": "common_function1",
"shared_ip_address": "100.64.0.127",
"tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
}
}
[36m03:04:55.356 gohan.server.middleware DEBUG [0m Request headers: map[Accept-Encoding:[identity] Content-Length:[249] Content-Type:[application/json] X-Auth-Token:[***]]
[36m03:04:55.356 gohan.server.middleware DEBUG [0m Request body: 
{
"common_function": {
"common_function_pool_id": "cca32fd7-2430-4acc-87e9-a7b527e9918d",
"link_local_ip_address": "169.254.1.227",
"name": "common_function1",
"shared_ip_address": "100.64.0.127",
"tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
}
}
[36m03:04:55.441 gohan.server.resources DEBUG [0m Create common_function with data map[common_function_pool_id:cca32fd7-2430-4acc-87e9-a7b527e9918d link_local_ip_address:169.254.1.227 name:common_function1 shared_ip_address:100.64.0.127 tenant_id:0b576f6f4cbf414f829cd12f008bf08f] started
[36m03:04:55.441 gohan.schema DEBUG [0m No properties in resource policy. Allowing all property access
[36m03:04:55.507 gohan.server.resources DEBUG [0m List common_function_pool query: map[id:[cca32fd7-2430-4acc-87e9-a7b527e9918d]] started
[36m03:04:55.509 gohan.server.resources DEBUG [0m List common_function_pool query: map[id:[cca32fd7-2430-4acc-87e9-a7b527e9918d]] completed
03:04:55.525 gohan.db.sql INFO [0m Executing SQL query in transaction '8739c4ca-9413-4efb-a7a6-1d083136649f': 'UPDATE `common_function_pools` SET `description` = sample common function pool, `link_local_cidr` = 169.254.0.0/17, `vrrp_config` = [{"primary_ip":"169.254.1.251","secondary_ip":"169.254.1.252","vrid":41},{"primary_ip":"169.254.1.253","secondary_ip":"169.254.1.254","vrid":42}], `service_vrf_name` = SHARED-RESOURCE, `id` = cca32fd7-2430-4acc-87e9-a7b527e9918d, `snapt_group_name` = SNAPT-RULE, `logical_tunnel_interface_name` = lt-0/0/0, `snapt_pool_group_name` = SNAPT-POOL, `dnat_group_name` = DNAT-RULE, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `downlink_interfaces` = ["372ed357-e622-41fb-a613-076d332838e2"], `vrrp_group_name` = IF-USER-VRRP-ACT, `link_local_netmask` = 17, `name` = common_function_pool, `dnat_pool_group_name` = DNAT-POOL, `common_function_pool_state` = gAD//w==, `service_interface_name` = ms-0/2/0, `config_version` = `config_version` + 1 WHERE id = cca32fd7-2430-4acc-87e9-a7b527e9918d'
03:04:55.527 gohan.db.sql INFO [0m Executing SQL query in transaction '8739c4ca-9413-4efb-a7a6-1d083136649f': 'INSERT INTO `events` (`path`,`timestamp`,`type`,`marked_for_deletion`,`body`,`version`) VALUES (/v2.0/common_function_pools/cca32fd7-2430-4acc-87e9-a7b527e9918d,1494471895,update,false,"{\"common_function_pool_state\":\"gAD//w==\",\"description\":\"sample common function pool\",\"dnat_group_name\":\"DNAT-RULE\",\"dnat_pool_group_name\":\"DNAT-POOL\",\"downlink_interfaces\":[\"372ed357-e622-41fb-a613-076d332838e2\"],\"id\":\"cca32fd7-2430-4acc-87e9-a7b527e9918d\",\"link_local_cidr\":\"169.254.0.0/17\",\"link_local_netmask\":17,\"logical_tunnel_interface_name\":\"lt-0/0/0\",\"name\":\"common_function_pool\",\"service_interface_name\":\"ms-0/2/0\",\"service_vrf_name\":\"SHARED-RESOURCE\",\"snapt_group_name\":\"SNAPT-RULE\",\"snapt_pool_group_name\":\"SNAPT-POOL\",\"tenant_id\":\"0b576f6f4cbf414f829cd12f008bf08f\",\"vrrp_config\":[{\"primary_ip\":\"169.254.1.251\",\"secondary_ip\":\"169.254.1.252\",\"vrid\":41},{\"primary_ip\":\"169.254.1.253\",\"secondary_ip\":\"169.254.1.254\",\"vrid\":42}],\"vrrp_group_name\":\"IF-USER-VRRP-ACT\"}",2)'
03:04:55.528 gohan.db.sql INFO [0m Executing SQL query in transaction '8739c4ca-9413-4efb-a7a6-1d083136649f': 'INSERT INTO `common_functions` (`link_local_ip_address`,`ha_router_id`,`primary_vrrp_ip`,`vrid`,`common_function_number`,`name`,`shared_ip_address`,`id`,`secondary_vrrp_ip`,`status`,`description`,`tenant_id`,`common_function_pool_id`) VALUES (169.254.1.227,3a3d7a43-d749-44e8-90bc-de7b37d1d258,169.254.1.251,41,1,common_function1,100.64.0.127,18c64ec9-78c2-43ac-ae0d-48fa9b6c0858,169.254.1.252,PENDING_CREATE,,0b576f6f4cbf414f829cd12f008bf08f,cca32fd7-2430-4acc-87e9-a7b527e9918d)'
03:04:55.528 gohan.db.sql INFO [0m Executing SQL query in transaction '8739c4ca-9413-4efb-a7a6-1d083136649f': 'INSERT INTO `events` (`body`,`version`,`path`,`timestamp`,`type`,`marked_for_deletion`) VALUES ("{\"common_function_number\":1,\"common_function_pool_id\":\"cca32fd7-2430-4acc-87e9-a7b527e9918d\",\"description\":\"\",\"ha_router_id\":\"3a3d7a43-d749-44e8-90bc-de7b37d1d258\",\"id\":\"18c64ec9-78c2-43ac-ae0d-48fa9b6c0858\",\"link_local_ip_address\":\"169.254.1.227\",\"name\":\"common_function1\",\"primary_vrrp_ip\":\"169.254.1.251\",\"secondary_vrrp_ip\":\"169.254.1.252\",\"shared_ip_address\":\"100.64.0.127\",\"status\":\"PENDING_CREATE\",\"tenant_id\":\"0b576f6f4cbf414f829cd12f008bf08f\",\"vrid\":41}",1,/v2.0/common_functions/18c64ec9-78c2-43ac-ae0d-48fa9b6c0858,1494471895,create,false)'
[36m03:04:55.541 gohan.server.resources DEBUG [0m Create common_function completed: map[common_function:map[description: ha_router_id:3a3d7a43-d749-44e8-90bc-de7b37d1d258 common_function_number:1 link_local_ip_address:169.254.1.227 name:common_function1 shared_ip_address:100.64.0.127 tenant_id:0b576f6f4cbf414f829cd12f008bf08f status:PENDING_CREATE vrid:41 primary_vrrp_ip:169.254.1.251 secondary_vrrp_ip:169.254.1.252 common_function_pool_id:cca32fd7-2430-4acc-87e9-a7b527e9918d id:18c64ec9-78c2-43ac-ae0d-48fa9b6c0858]]
[36m03:04:55.542 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[568]]
[36m03:04:55.542 gohan.server.middleware DEBUG [0m Response body: {
  "common_function": {
    "common_function_number": 1,
    "common_function_pool_id": "cca32fd7-2430-4acc-87e9-a7b527e9918d",
    "description": "",
    "ha_router_id": "3a3d7a43-d749-44e8-90bc-de7b37d1d258",
    "id": "18c64ec9-78c2-43ac-ae0d-48fa9b6c0858",
    "link_local_ip_address": "169.254.1.227",
    "name": "common_function1",
    "primary_vrrp_ip": "169.254.1.251",
    "secondary_vrrp_ip": "169.254.1.252",
    "shared_ip_address": "100.64.0.127",
    "status": "PENDING_CREATE",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
    "vrid": 41
  }
}
03:04:55.542 gohan.server.middleware INFO [0m Completed 201 Created in 186.618215ms
[36m03:04:55.545 gohan.server.sync DEBUG [0m Processing event 72 - update
03:04:55.545 gohan.server.sync INFO [0m Setting config with version 2 to /config//v2.0/common_function_pools/cca32fd7-2430-4acc-87e9-a7b527e9918d
[36m03:04:55.551 gohan.server.sync DEBUG [0m Deleting event 72
03:04:55.553 gohan.db.sql INFO [0m Executing SQL query in transaction 'c4830625-5132-46b0-b830-7c5ce5d6c00e': 'DELETE FROM `events` WHERE id = 72'
[36m03:04:55.554 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:04:55.559 gohan.server DEBUG [0m State event update received: set /state/v2.0/common_function_pools/cca32fd7-2430-4acc-87e9-a7b527e9918d map[state:map[worker_state:READ_COMPLETE] version:2 error:]
03:04:55.560 gohan.server.sync INFO [0m StateUpdate for set /state/v2.0/common_function_pools/cca32fd7-2430-4acc-87e9-a7b527e9918d map[error: state:map[worker_state:READ_COMPLETE] version:2] started
03:04:55.562 gohan.server.middleware INFO [0m Started GET /v2.0/common_functions/18c64ec9-78c2-43ac-ae0d-48fa9b6c0858 for client 172.17.0.19:40192 data: 
[36m03:04:55.563 gohan.server.middleware DEBUG [0m Request headers: map[Content-Length:[0] Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[identity]]
[36m03:04:55.563 gohan.server.middleware DEBUG [0m Request body: 
[36m03:04:55.564 gohan.server.sync DEBUG [0m Processing event 73 - create
03:04:55.564 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/common_functions/18c64ec9-78c2-43ac-ae0d-48fa9b6c0858
[36m03:04:55.574 gohan.server.sync DEBUG [0m Deleting event 73
03:04:55.574 gohan.sync INFO [0m Locked gohan/cluster/lock/state/v2.0/common_function_pools/cca32fd7-2430-4acc-87e9-a7b527e9918d with index 346
03:04:55.580 gohan.db.sql INFO [0m Executing SQL query in transaction '4c911d16-a32e-48b6-a21c-f8531de3148a': 'DELETE FROM `events` WHERE id = 73'
[36m03:04:55.583 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:04:55.585 gohan.server DEBUG [0m State event update received: set /state/v2.0/common_functions/18c64ec9-78c2-43ac-ae0d-48fa9b6c0858 map[error: state:map[worker_state:READ_COMPLETE] version:1]
03:04:55.585 gohan.server.sync INFO [0m StateUpdate for set /state/v2.0/common_functions/18c64ec9-78c2-43ac-ae0d-48fa9b6c0858 map[error: state:map[worker_state:READ_COMPLETE] version:1] started
03:04:55.594 gohan.sync INFO [0m Locked gohan/cluster/lock/state/v2.0/common_functions/18c64ec9-78c2-43ac-ae0d-48fa9b6c0858 with index 351
03:04:55.665 gohan.db.sql INFO [0m Executing SQL query in transaction '6341e2ca-4e0f-4275-bf30-c43e7184c6a3': 'UPDATE `common_function_pools` SET `description` = sample common function pool, `link_local_cidr` = 169.254.0.0/17, `vrrp_config` = [{"primary_ip":"169.254.1.251","secondary_ip":"169.254.1.252","vrid":41},{"primary_ip":"169.254.1.253","secondary_ip":"169.254.1.254","vrid":42}], `service_vrf_name` = SHARED-RESOURCE, `id` = cca32fd7-2430-4acc-87e9-a7b527e9918d, `snapt_group_name` = SNAPT-RULE, `logical_tunnel_interface_name` = lt-0/0/0, `snapt_pool_group_name` = SNAPT-POOL, `dnat_group_name` = DNAT-RULE, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `downlink_interfaces` = ["372ed357-e622-41fb-a613-076d332838e2"], `vrrp_group_name` = IF-USER-VRRP-ACT, `link_local_netmask` = 17, `name` = common_function_pool, `dnat_pool_group_name` = DNAT-POOL, `common_function_pool_state` = gAD//w==, `service_interface_name` = ms-0/2/0, `state_version` = 2, `monitoring_version` = 0, `state_error` = , `state` = {"error":"","state":{"worker_state":"READ_COMPLETE"}}, `state_monitoring` = {}, `marked_for_deletion` = 0 WHERE id = cca32fd7-2430-4acc-87e9-a7b527e9918d'
03:04:55.676 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/state/v2.0/common_function_pools/cca32fd7-2430-4acc-87e9-a7b527e9918d with index 346
03:04:55.684 gohan.sync INFO [0m Path gohan/cluster/lock/state/v2.0/common_function_pools/cca32fd7-2430-4acc-87e9-a7b527e9918d already unlocked or not locked
03:04:55.685 gohan.db.sql INFO [0m Executing SQL query in transaction '1b55990c-6cce-442b-9e7d-8c28a924ef6d': 'UPDATE `common_functions` SET `secondary_vrrp_ip` = 169.254.1.252, `status` = PENDING_CREATE, `description` = , `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `common_function_pool_id` = cca32fd7-2430-4acc-87e9-a7b527e9918d, `shared_ip_address` = 100.64.0.127, `id` = 18c64ec9-78c2-43ac-ae0d-48fa9b6c0858, `primary_vrrp_ip` = 169.254.1.251, `vrid` = 41, `common_function_number` = 1, `name` = common_function1, `link_local_ip_address` = 169.254.1.227, `ha_router_id` = 3a3d7a43-d749-44e8-90bc-de7b37d1d258, `state_version` = 1, `monitoring_version` = 0, `state_error` = , `state` = {"error":"","state":{"worker_state":"READ_COMPLETE"}}, `state_monitoring` = {}, `marked_for_deletion` = 0 WHERE id = 18c64ec9-78c2-43ac-ae0d-48fa9b6c0858'
03:04:55.687 gohan.extension.common_function.post_state_update_in_transaction INFO [0m Config version: 1, State version: 1, Monitoring version: 0
03:04:55.687 gohan.db.sql INFO [0m Executing SQL query in transaction '1b55990c-6cce-442b-9e7d-8c28a924ef6d': 'UPDATE `common_functions` SET `primary_vrrp_ip` = 169.254.1.251, `vrid` = 41, `common_function_number` = 1, `name` = common_function1, `link_local_ip_address` = 169.254.1.227, `ha_router_id` = 3a3d7a43-d749-44e8-90bc-de7b37d1d258, `secondary_vrrp_ip` = 169.254.1.252, `status` = ACTIVE, `description` = , `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `common_function_pool_id` = cca32fd7-2430-4acc-87e9-a7b527e9918d, `shared_ip_address` = 100.64.0.127, `id` = 18c64ec9-78c2-43ac-ae0d-48fa9b6c0858 WHERE id = 18c64ec9-78c2-43ac-ae0d-48fa9b6c0858'
03:04:55.704 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/state/v2.0/common_functions/18c64ec9-78c2-43ac-ae0d-48fa9b6c0858 with index 351
[36m03:04:55.710 gohan.server.resources DEBUG [0m Show common_function 18c64ec9-78c2-43ac-ae0d-48fa9b6c0858 started
03:04:55.711 gohan.sync INFO [0m Path gohan/cluster/lock/state/v2.0/common_functions/18c64ec9-78c2-43ac-ae0d-48fa9b6c0858 already unlocked or not locked
[36m03:04:55.713 gohan.server.resources DEBUG [0m Show common_function 18c64ec9-78c2-43ac-ae0d-48fa9b6c0858 completed: map[common_function:map[link_local_ip_address:169.254.1.227 ha_router_id:3a3d7a43-d749-44e8-90bc-de7b37d1d258 primary_vrrp_ip:169.254.1.251 description: common_function_pool_id:cca32fd7-2430-4acc-87e9-a7b527e9918d shared_ip_address:100.64.0.127 secondary_vrrp_ip:169.254.1.252 common_function_number:1 name:common_function1 vrid:41 tenant_id:0b576f6f4cbf414f829cd12f008bf08f id:18c64ec9-78c2-43ac-ae0d-48fa9b6c0858 status:ACTIVE]]
[36m03:04:55.713 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[560]]
[36m03:04:55.713 gohan.server.middleware DEBUG [0m Response body: {
  "common_function": {
    "common_function_number": 1,
    "common_function_pool_id": "cca32fd7-2430-4acc-87e9-a7b527e9918d",
    "description": "",
    "ha_router_id": "3a3d7a43-d749-44e8-90bc-de7b37d1d258",
    "id": "18c64ec9-78c2-43ac-ae0d-48fa9b6c0858",
    "link_local_ip_address": "169.254.1.227",
    "name": "common_function1",
    "primary_vrrp_ip": "169.254.1.251",
    "secondary_vrrp_ip": "169.254.1.252",
    "shared_ip_address": "100.64.0.127",
    "status": "ACTIVE",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
    "vrid": 41
  }
}
03:04:55.713 gohan.server.middleware INFO [0m Completed 200 OK in 150.472764ms
03:04:56.046 gohan.server.middleware INFO [0m Started GET /v2.0/common_functions/18c64ec9-78c2-43ac-ae0d-48fa9b6c0858 for client 172.17.0.19:40212 data: 
[36m03:04:56.046 gohan.server.middleware DEBUG [0m Request headers: map[User-Agent:[gophercloud/1.0.0] Connection:[close] Accept:[application/json] X-Auth-Token:[***] Accept-Encoding:[gzip]]
[36m03:04:56.046 gohan.server.middleware DEBUG [0m Request body: 
[36m03:04:56.108 gohan.server.resources DEBUG [0m Show common_function 18c64ec9-78c2-43ac-ae0d-48fa9b6c0858 started
[36m03:04:56.111 gohan.server.resources DEBUG [0m Show common_function 18c64ec9-78c2-43ac-ae0d-48fa9b6c0858 completed: map[common_function:map[id:18c64ec9-78c2-43ac-ae0d-48fa9b6c0858 status:ACTIVE description: tenant_id:0b576f6f4cbf414f829cd12f008bf08f ha_router_id:3a3d7a43-d749-44e8-90bc-de7b37d1d258 name:common_function1 common_function_number:1 shared_ip_address:100.64.0.127 secondary_vrrp_ip:169.254.1.252 common_function_pool_id:cca32fd7-2430-4acc-87e9-a7b527e9918d link_local_ip_address:169.254.1.227 primary_vrrp_ip:169.254.1.251 vrid:41]]
[36m03:04:56.111 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[560]]
[36m03:04:56.111 gohan.server.middleware DEBUG [0m Response body: {
  "common_function": {
    "common_function_number": 1,
    "common_function_pool_id": "cca32fd7-2430-4acc-87e9-a7b527e9918d",
    "description": "",
    "ha_router_id": "3a3d7a43-d749-44e8-90bc-de7b37d1d258",
    "id": "18c64ec9-78c2-43ac-ae0d-48fa9b6c0858",
    "link_local_ip_address": "169.254.1.227",
    "name": "common_function1",
    "primary_vrrp_ip": "169.254.1.251",
    "secondary_vrrp_ip": "169.254.1.252",
    "shared_ip_address": "100.64.0.127",
    "status": "ACTIVE",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
    "vrid": 41
  }
}
03:04:56.111 gohan.server.middleware INFO [0m Completed 200 OK in 65.357351ms
03:04:56.112 gohan.server.middleware INFO [0m Started GET /v2.0/common_functions/18c64ec9-78c2-43ac-ae0d-48fa9b6c0858 for client 172.17.0.19:40218 data: {}
[36m03:04:56.112 gohan.server.middleware DEBUG [0m Request headers: map[Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[gzip] User-Agent:[gophercloud/1.0.0] Connection:[close] Content-Length:[2] Accept:[application/json]]
[36m03:04:56.112 gohan.server.middleware DEBUG [0m Request body: {}
[36m03:04:56.176 gohan.server.resources DEBUG [0m Show common_function 18c64ec9-78c2-43ac-ae0d-48fa9b6c0858 started
[36m03:04:56.179 gohan.server.resources DEBUG [0m Show common_function 18c64ec9-78c2-43ac-ae0d-48fa9b6c0858 completed: map[common_function:map[name:common_function1 shared_ip_address:100.64.0.127 status:ACTIVE link_local_ip_address:169.254.1.227 primary_vrrp_ip:169.254.1.251 common_function_number:1 secondary_vrrp_ip:169.254.1.252 description: tenant_id:0b576f6f4cbf414f829cd12f008bf08f common_function_pool_id:cca32fd7-2430-4acc-87e9-a7b527e9918d ha_router_id:3a3d7a43-d749-44e8-90bc-de7b37d1d258 vrid:41 id:18c64ec9-78c2-43ac-ae0d-48fa9b6c0858]]
[36m03:04:56.179 gohan.server.middleware DEBUG [0m Response headers: map[Content-Length:[560] Content-Type:[application/json]]
[36m03:04:56.179 gohan.server.middleware DEBUG [0m Response body: {
  "common_function": {
    "common_function_number": 1,
    "common_function_pool_id": "cca32fd7-2430-4acc-87e9-a7b527e9918d",
    "description": "",
    "ha_router_id": "3a3d7a43-d749-44e8-90bc-de7b37d1d258",
    "id": "18c64ec9-78c2-43ac-ae0d-48fa9b6c0858",
    "link_local_ip_address": "169.254.1.227",
    "name": "common_function1",
    "primary_vrrp_ip": "169.254.1.251",
    "secondary_vrrp_ip": "169.254.1.252",
    "shared_ip_address": "100.64.0.127",
    "status": "ACTIVE",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
    "vrid": 41
  }
}
03:04:56.179 gohan.server.middleware INFO [0m Completed 200 OK in 66.974214ms
[36m03:04:57.968 gohan.server DEBUG [0m Monitoring Watcher starts watch
[31m03:04:57.969 gohan.sync.etcd ERROR [0m watch error: 100: Key not found (/monitoring) [356]
[31m03:04:57.969 gohan.server ERROR [0m sync watch error: 100: Key not found (/monitoring) [356]
03:05:00.003 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
03:05:00.004 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
[36m03:05:00.156 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] started
[36m03:05:00.158 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] completed
03:05:00.161 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
[36m03:05:00.179 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] started
[36m03:05:00.181 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] completed
03:05:00.182 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
[36m03:05:02.969 gohan.server DEBUG [0m Monitoring Watcher starts watch
[31m03:05:02.970 gohan.sync.etcd ERROR [0m watch error: 100: Key not found (/monitoring) [364]
[31m03:05:02.970 gohan.server ERROR [0m sync watch error: 100: Key not found (/monitoring) [364]
03:05:06.202 gohan.server.middleware INFO [0m Started POST /v2.0/common_functions for client 172.17.0.19:40238 data: 
{
"common_function": {
"common_function_pool_id": "cca32fd7-2430-4acc-87e9-a7b527e9918d",
"link_local_ip_address": "169.254.1.228",
"name": "common_function2",
"shared_ip_address": "100.64.0.128",
"tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
}
}
[36m03:05:06.202 gohan.server.middleware DEBUG [0m Request headers: map[Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[identity] Content-Length:[249]]
[36m03:05:06.203 gohan.server.middleware DEBUG [0m Request body: 
{
"common_function": {
"common_function_pool_id": "cca32fd7-2430-4acc-87e9-a7b527e9918d",
"link_local_ip_address": "169.254.1.228",
"name": "common_function2",
"shared_ip_address": "100.64.0.128",
"tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
}
}
[36m03:05:06.281 gohan.server.resources DEBUG [0m Create common_function with data map[shared_ip_address:100.64.0.128 tenant_id:0b576f6f4cbf414f829cd12f008bf08f common_function_pool_id:cca32fd7-2430-4acc-87e9-a7b527e9918d link_local_ip_address:169.254.1.228 name:common_function2] started
[36m03:05:06.281 gohan.schema DEBUG [0m No properties in resource policy. Allowing all property access
[36m03:05:06.345 gohan.server.resources DEBUG [0m List common_function_pool query: map[id:[cca32fd7-2430-4acc-87e9-a7b527e9918d]] started
[36m03:05:06.347 gohan.server.resources DEBUG [0m List common_function_pool query: map[id:[cca32fd7-2430-4acc-87e9-a7b527e9918d]] completed
03:05:06.367 gohan.db.sql INFO [0m Executing SQL query in transaction 'a622040c-d7fb-4874-b838-59f3ce518b16': 'UPDATE `common_function_pools` SET `common_function_pool_state` = wAD//w==, `service_interface_name` = ms-0/2/0, `link_local_cidr` = 169.254.0.0/17, `vrrp_config` = [{"primary_ip":"169.254.1.251","secondary_ip":"169.254.1.252","vrid":41},{"primary_ip":"169.254.1.253","secondary_ip":"169.254.1.254","vrid":42}], `description` = sample common function pool, `snapt_group_name` = SNAPT-RULE, `logical_tunnel_interface_name` = lt-0/0/0, `snapt_pool_group_name` = SNAPT-POOL, `dnat_group_name` = DNAT-RULE, `service_vrf_name` = SHARED-RESOURCE, `id` = cca32fd7-2430-4acc-87e9-a7b527e9918d, `vrrp_group_name` = IF-USER-VRRP-ACT, `link_local_netmask` = 17, `name` = common_function_pool, `dnat_pool_group_name` = DNAT-POOL, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `downlink_interfaces` = ["372ed357-e622-41fb-a613-076d332838e2"], `config_version` = `config_version` + 1 WHERE id = cca32fd7-2430-4acc-87e9-a7b527e9918d'
03:05:06.369 gohan.db.sql INFO [0m Executing SQL query in transaction 'a622040c-d7fb-4874-b838-59f3ce518b16': 'INSERT INTO `events` (`timestamp`,`type`,`marked_for_deletion`,`body`,`version`,`path`) VALUES (1494471906,update,false,"{\"common_function_pool_state\":\"wAD//w==\",\"description\":\"sample common function pool\",\"dnat_group_name\":\"DNAT-RULE\",\"dnat_pool_group_name\":\"DNAT-POOL\",\"downlink_interfaces\":[\"372ed357-e622-41fb-a613-076d332838e2\"],\"id\":\"cca32fd7-2430-4acc-87e9-a7b527e9918d\",\"link_local_cidr\":\"169.254.0.0/17\",\"link_local_netmask\":17,\"logical_tunnel_interface_name\":\"lt-0/0/0\",\"name\":\"common_function_pool\",\"service_interface_name\":\"ms-0/2/0\",\"service_vrf_name\":\"SHARED-RESOURCE\",\"snapt_group_name\":\"SNAPT-RULE\",\"snapt_pool_group_name\":\"SNAPT-POOL\",\"tenant_id\":\"0b576f6f4cbf414f829cd12f008bf08f\",\"vrrp_config\":[{\"primary_ip\":\"169.254.1.251\",\"secondary_ip\":\"169.254.1.252\",\"vrid\":41},{\"primary_ip\":\"169.254.1.253\",\"secondary_ip\":\"169.254.1.254\",\"vrid\":42}],\"vrrp_group_name\":\"IF-USER-VRRP-ACT\"}",3,/v2.0/common_function_pools/cca32fd7-2430-4acc-87e9-a7b527e9918d)'
03:05:06.370 gohan.db.sql INFO [0m Executing SQL query in transaction 'a622040c-d7fb-4874-b838-59f3ce518b16': 'INSERT INTO `common_functions` (`shared_ip_address`,`id`,`secondary_vrrp_ip`,`status`,`description`,`tenant_id`,`common_function_pool_id`,`link_local_ip_address`,`ha_router_id`,`primary_vrrp_ip`,`vrid`,`common_function_number`,`name`) VALUES (100.64.0.128,c1be08ee-7cf2-4c84-8fe7-7e891d17bc71,169.254.1.254,PENDING_CREATE,,0b576f6f4cbf414f829cd12f008bf08f,cca32fd7-2430-4acc-87e9-a7b527e9918d,169.254.1.228,3a3d7a43-d749-44e8-90bc-de7b37d1d258,169.254.1.253,42,2,common_function2)'
03:05:06.370 gohan.db.sql INFO [0m Executing SQL query in transaction 'a622040c-d7fb-4874-b838-59f3ce518b16': 'INSERT INTO `events` (`version`,`path`,`timestamp`,`type`,`marked_for_deletion`,`body`) VALUES (1,/v2.0/common_functions/c1be08ee-7cf2-4c84-8fe7-7e891d17bc71,1494471906,create,false,"{\"common_function_number\":2,\"common_function_pool_id\":\"cca32fd7-2430-4acc-87e9-a7b527e9918d\",\"description\":\"\",\"ha_router_id\":\"3a3d7a43-d749-44e8-90bc-de7b37d1d258\",\"id\":\"c1be08ee-7cf2-4c84-8fe7-7e891d17bc71\",\"link_local_ip_address\":\"169.254.1.228\",\"name\":\"common_function2\",\"primary_vrrp_ip\":\"169.254.1.253\",\"secondary_vrrp_ip\":\"169.254.1.254\",\"shared_ip_address\":\"100.64.0.128\",\"status\":\"PENDING_CREATE\",\"tenant_id\":\"0b576f6f4cbf414f829cd12f008bf08f\",\"vrid\":42}")'
[36m03:05:06.383 gohan.server.resources DEBUG [0m Create common_function completed: map[common_function:map[link_local_ip_address:169.254.1.228 tenant_id:0b576f6f4cbf414f829cd12f008bf08f status:PENDING_CREATE common_function_number:2 primary_vrrp_ip:169.254.1.253 secondary_vrrp_ip:169.254.1.254 common_function_pool_id:cca32fd7-2430-4acc-87e9-a7b527e9918d name:common_function2 shared_ip_address:100.64.0.128 id:c1be08ee-7cf2-4c84-8fe7-7e891d17bc71 description: ha_router_id:3a3d7a43-d749-44e8-90bc-de7b37d1d258 vrid:42]]
[36m03:05:06.383 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[568]]
[36m03:05:06.384 gohan.server.middleware DEBUG [0m Response body: {
  "common_function": {
    "common_function_number": 2,
    "common_function_pool_id": "cca32fd7-2430-4acc-87e9-a7b527e9918d",
    "description": "",
    "ha_router_id": "3a3d7a43-d749-44e8-90bc-de7b37d1d258",
    "id": "c1be08ee-7cf2-4c84-8fe7-7e891d17bc71",
    "link_local_ip_address": "169.254.1.228",
    "name": "common_function2",
    "primary_vrrp_ip": "169.254.1.253",
    "secondary_vrrp_ip": "169.254.1.254",
    "shared_ip_address": "100.64.0.128",
    "status": "PENDING_CREATE",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
    "vrid": 42
  }
}
03:05:06.384 gohan.server.middleware INFO [0m Completed 201 Created in 181.832128ms
[36m03:05:06.386 gohan.server.sync DEBUG [0m Processing event 74 - update
03:05:06.387 gohan.server.sync INFO [0m Setting config with version 3 to /config//v2.0/common_function_pools/cca32fd7-2430-4acc-87e9-a7b527e9918d
03:05:06.401 gohan.server.middleware INFO [0m Started GET /v2.0/common_functions/c1be08ee-7cf2-4c84-8fe7-7e891d17bc71 for client 172.17.0.19:40248 data: 
[36m03:05:06.401 gohan.server.middleware DEBUG [0m Request headers: map[Accept-Encoding:[identity] Content-Length:[0] Content-Type:[application/json] X-Auth-Token:[***]]
[36m03:05:06.401 gohan.server.middleware DEBUG [0m Request body: 
[36m03:05:06.402 gohan.server.sync DEBUG [0m Deleting event 74
[36m03:05:06.421 gohan.server DEBUG [0m State event update received: set /state/v2.0/common_function_pools/cca32fd7-2430-4acc-87e9-a7b527e9918d map[error: state:map[worker_state:READ_COMPLETE] version:3]
03:05:06.421 gohan.server.sync INFO [0m StateUpdate for set /state/v2.0/common_function_pools/cca32fd7-2430-4acc-87e9-a7b527e9918d map[error: state:map[worker_state:READ_COMPLETE] version:3] started
03:05:06.426 gohan.db.sql INFO [0m Executing SQL query in transaction '1017fdcc-2884-4f56-8972-05caa7e6c318': 'DELETE FROM `events` WHERE id = 74'
03:05:06.427 gohan.sync INFO [0m Locked gohan/cluster/lock/state/v2.0/common_function_pools/cca32fd7-2430-4acc-87e9-a7b527e9918d with index 367
[36m03:05:06.428 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:05:06.448 gohan.server.sync DEBUG [0m Processing event 75 - create
03:05:06.448 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/common_functions/c1be08ee-7cf2-4c84-8fe7-7e891d17bc71
[36m03:05:06.455 gohan.server.sync DEBUG [0m Deleting event 75
03:05:06.456 gohan.db.sql INFO [0m Executing SQL query in transaction '4db1d5c2-a744-4fcf-8257-96d243067bab': 'DELETE FROM `events` WHERE id = 75'
[36m03:05:06.457 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:05:06.464 gohan.server DEBUG [0m State event update received: set /state/v2.0/common_functions/c1be08ee-7cf2-4c84-8fe7-7e891d17bc71 map[error: state:map[worker_state:READ_COMPLETE] version:1]
03:05:06.464 gohan.server.sync INFO [0m StateUpdate for set /state/v2.0/common_functions/c1be08ee-7cf2-4c84-8fe7-7e891d17bc71 map[version:1 error: state:map[worker_state:READ_COMPLETE]] started
03:05:06.485 gohan.sync INFO [0m Locked gohan/cluster/lock/state/v2.0/common_functions/c1be08ee-7cf2-4c84-8fe7-7e891d17bc71 with index 372
[36m03:05:06.514 gohan.server.resources DEBUG [0m Show common_function c1be08ee-7cf2-4c84-8fe7-7e891d17bc71 started
[36m03:05:06.527 gohan.server.resources DEBUG [0m Show common_function c1be08ee-7cf2-4c84-8fe7-7e891d17bc71 completed: map[common_function:map[ha_router_id:3a3d7a43-d749-44e8-90bc-de7b37d1d258 primary_vrrp_ip:169.254.1.253 common_function_number:2 name:common_function2 common_function_pool_id:cca32fd7-2430-4acc-87e9-a7b527e9918d secondary_vrrp_ip:169.254.1.254 description: link_local_ip_address:169.254.1.228 shared_ip_address:100.64.0.128 id:c1be08ee-7cf2-4c84-8fe7-7e891d17bc71 status:PENDING_CREATE tenant_id:0b576f6f4cbf414f829cd12f008bf08f vrid:42]]
[36m03:05:06.527 gohan.server.middleware DEBUG [0m Response headers: map[Content-Length:[568] Content-Type:[application/json]]
[36m03:05:06.527 gohan.server.middleware DEBUG [0m Response body: {
  "common_function": {
    "common_function_number": 2,
    "common_function_pool_id": "cca32fd7-2430-4acc-87e9-a7b527e9918d",
    "description": "",
    "ha_router_id": "3a3d7a43-d749-44e8-90bc-de7b37d1d258",
    "id": "c1be08ee-7cf2-4c84-8fe7-7e891d17bc71",
    "link_local_ip_address": "169.254.1.228",
    "name": "common_function2",
    "primary_vrrp_ip": "169.254.1.253",
    "secondary_vrrp_ip": "169.254.1.254",
    "shared_ip_address": "100.64.0.128",
    "status": "PENDING_CREATE",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
    "vrid": 42
  }
}
03:05:06.527 gohan.server.middleware INFO [0m Completed 200 OK in 126.60181ms
03:05:06.538 gohan.db.sql INFO [0m Executing SQL query in transaction '88bc91b7-00be-4dd5-80ef-b3e23f4b74c7': 'UPDATE `common_function_pools` SET `link_local_cidr` = 169.254.0.0/17, `vrrp_config` = [{"primary_ip":"169.254.1.251","secondary_ip":"169.254.1.252","vrid":41},{"primary_ip":"169.254.1.253","secondary_ip":"169.254.1.254","vrid":42}], `description` = sample common function pool, `snapt_pool_group_name` = SNAPT-POOL, `dnat_group_name` = DNAT-RULE, `service_vrf_name` = SHARED-RESOURCE, `id` = cca32fd7-2430-4acc-87e9-a7b527e9918d, `snapt_group_name` = SNAPT-RULE, `logical_tunnel_interface_name` = lt-0/0/0, `name` = common_function_pool, `dnat_pool_group_name` = DNAT-POOL, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `downlink_interfaces` = ["372ed357-e622-41fb-a613-076d332838e2"], `vrrp_group_name` = IF-USER-VRRP-ACT, `link_local_netmask` = 17, `common_function_pool_state` = wAD//w==, `service_interface_name` = ms-0/2/0, `state_version` = 3, `monitoring_version` = 0, `state_error` = , `state` = {"error":"","state":{"worker_state":"READ_COMPLETE"}}, `state_monitoring` = {}, `marked_for_deletion` = 0 WHERE id = cca32fd7-2430-4acc-87e9-a7b527e9918d'
03:05:06.554 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/state/v2.0/common_function_pools/cca32fd7-2430-4acc-87e9-a7b527e9918d with index 367
03:05:06.561 gohan.sync INFO [0m Path gohan/cluster/lock/state/v2.0/common_function_pools/cca32fd7-2430-4acc-87e9-a7b527e9918d already unlocked or not locked
03:05:06.565 gohan.db.sql INFO [0m Executing SQL query in transaction '8511b6ba-5694-44b7-a449-af9d2b07b386': 'UPDATE `common_functions` SET `status` = PENDING_CREATE, `description` = , `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `common_function_pool_id` = cca32fd7-2430-4acc-87e9-a7b527e9918d, `shared_ip_address` = 100.64.0.128, `id` = c1be08ee-7cf2-4c84-8fe7-7e891d17bc71, `secondary_vrrp_ip` = 169.254.1.254, `vrid` = 42, `common_function_number` = 2, `name` = common_function2, `link_local_ip_address` = 169.254.1.228, `ha_router_id` = 3a3d7a43-d749-44e8-90bc-de7b37d1d258, `primary_vrrp_ip` = 169.254.1.253, `state_version` = 1, `monitoring_version` = 0, `state_error` = , `state` = {"error":"","state":{"worker_state":"READ_COMPLETE"}}, `state_monitoring` = {}, `marked_for_deletion` = 0 WHERE id = c1be08ee-7cf2-4c84-8fe7-7e891d17bc71'
03:05:06.567 gohan.extension.common_function.post_state_update_in_transaction INFO [0m Config version: 1, State version: 1, Monitoring version: 0
03:05:06.568 gohan.db.sql INFO [0m Executing SQL query in transaction '8511b6ba-5694-44b7-a449-af9d2b07b386': 'UPDATE `common_functions` SET `description` = , `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `common_function_pool_id` = cca32fd7-2430-4acc-87e9-a7b527e9918d, `shared_ip_address` = 100.64.0.128, `id` = c1be08ee-7cf2-4c84-8fe7-7e891d17bc71, `secondary_vrrp_ip` = 169.254.1.254, `status` = ACTIVE, `common_function_number` = 2, `name` = common_function2, `link_local_ip_address` = 169.254.1.228, `ha_router_id` = 3a3d7a43-d749-44e8-90bc-de7b37d1d258, `primary_vrrp_ip` = 169.254.1.253, `vrid` = 42 WHERE id = c1be08ee-7cf2-4c84-8fe7-7e891d17bc71'
03:05:06.581 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/state/v2.0/common_functions/c1be08ee-7cf2-4c84-8fe7-7e891d17bc71 with index 372
03:05:06.592 gohan.sync INFO [0m Path gohan/cluster/lock/state/v2.0/common_functions/c1be08ee-7cf2-4c84-8fe7-7e891d17bc71 already unlocked or not locked
03:05:07.538 gohan.server.middleware INFO [0m Started GET /v2.0/common_functions/c1be08ee-7cf2-4c84-8fe7-7e891d17bc71 for client 172.17.0.19:40266 data: 
[36m03:05:07.539 gohan.server.middleware DEBUG [0m Request headers: map[Accept-Encoding:[identity] Content-Length:[0] Content-Type:[application/json] X-Auth-Token:[***]]
[36m03:05:07.539 gohan.server.middleware DEBUG [0m Request body: 
[36m03:05:07.625 gohan.server.resources DEBUG [0m Show common_function c1be08ee-7cf2-4c84-8fe7-7e891d17bc71 started
[36m03:05:07.628 gohan.server.resources DEBUG [0m Show common_function c1be08ee-7cf2-4c84-8fe7-7e891d17bc71 completed: map[common_function:map[vrid:42 status:ACTIVE description: tenant_id:0b576f6f4cbf414f829cd12f008bf08f primary_vrrp_ip:169.254.1.253 common_function_number:2 name:common_function2 link_local_ip_address:169.254.1.228 ha_router_id:3a3d7a43-d749-44e8-90bc-de7b37d1d258 secondary_vrrp_ip:169.254.1.254 common_function_pool_id:cca32fd7-2430-4acc-87e9-a7b527e9918d shared_ip_address:100.64.0.128 id:c1be08ee-7cf2-4c84-8fe7-7e891d17bc71]]
[36m03:05:07.629 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[560]]
[36m03:05:07.629 gohan.server.middleware DEBUG [0m Response body: {
  "common_function": {
    "common_function_number": 2,
    "common_function_pool_id": "cca32fd7-2430-4acc-87e9-a7b527e9918d",
    "description": "",
    "ha_router_id": "3a3d7a43-d749-44e8-90bc-de7b37d1d258",
    "id": "c1be08ee-7cf2-4c84-8fe7-7e891d17bc71",
    "link_local_ip_address": "169.254.1.228",
    "name": "common_function2",
    "primary_vrrp_ip": "169.254.1.253",
    "secondary_vrrp_ip": "169.254.1.254",
    "shared_ip_address": "100.64.0.128",
    "status": "ACTIVE",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
    "vrid": 42
  }
}
03:05:07.629 gohan.server.middleware INFO [0m Completed 200 OK in 90.544901ms
[36m03:05:07.971 gohan.server DEBUG [0m Monitoring Watcher starts watch
[31m03:05:07.972 gohan.sync.etcd ERROR [0m watch error: 100: Key not found (/monitoring) [377]
[31m03:05:07.972 gohan.server ERROR [0m sync watch error: 100: Key not found (/monitoring) [377]
03:05:08.063 gohan.server.middleware INFO [0m Started GET /v2.0/common_functions/c1be08ee-7cf2-4c84-8fe7-7e891d17bc71 for client 172.17.0.19:40274 data: 
[36m03:05:08.063 gohan.server.middleware DEBUG [0m Request headers: map[User-Agent:[gophercloud/1.0.0] Connection:[close] Accept:[application/json] X-Auth-Token:[***] Accept-Encoding:[gzip]]
[36m03:05:08.063 gohan.server.middleware DEBUG [0m Request body: 
[36m03:05:08.535 gohan.server.resources DEBUG [0m Show common_function c1be08ee-7cf2-4c84-8fe7-7e891d17bc71 started
[36m03:05:08.541 gohan.server.resources DEBUG [0m Show common_function c1be08ee-7cf2-4c84-8fe7-7e891d17bc71 completed: map[common_function:map[id:c1be08ee-7cf2-4c84-8fe7-7e891d17bc71 secondary_vrrp_ip:169.254.1.254 status:ACTIVE description: shared_ip_address:100.64.0.128 primary_vrrp_ip:169.254.1.253 vrid:42 common_function_number:2 name:common_function2 link_local_ip_address:169.254.1.228 tenant_id:0b576f6f4cbf414f829cd12f008bf08f common_function_pool_id:cca32fd7-2430-4acc-87e9-a7b527e9918d ha_router_id:3a3d7a43-d749-44e8-90bc-de7b37d1d258]]
[36m03:05:08.544 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[560]]
[36m03:05:08.544 gohan.server.middleware DEBUG [0m Response body: {
  "common_function": {
    "common_function_number": 2,
    "common_function_pool_id": "cca32fd7-2430-4acc-87e9-a7b527e9918d",
    "description": "",
    "ha_router_id": "3a3d7a43-d749-44e8-90bc-de7b37d1d258",
    "id": "c1be08ee-7cf2-4c84-8fe7-7e891d17bc71",
    "link_local_ip_address": "169.254.1.228",
    "name": "common_function2",
    "primary_vrrp_ip": "169.254.1.253",
    "secondary_vrrp_ip": "169.254.1.254",
    "shared_ip_address": "100.64.0.128",
    "status": "ACTIVE",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
    "vrid": 42
  }
}
03:05:08.545 gohan.server.middleware INFO [0m Completed 200 OK in 482.395236ms
03:05:08.547 gohan.server.middleware INFO [0m Started GET /v2.0/common_functions/c1be08ee-7cf2-4c84-8fe7-7e891d17bc71 for client 172.17.0.19:40280 data: {}
[36m03:05:08.547 gohan.server.middleware DEBUG [0m Request headers: map[User-Agent:[gophercloud/1.0.0] Connection:[close] Content-Length:[2] Accept:[application/json] Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[gzip]]
[36m03:05:08.548 gohan.server.middleware DEBUG [0m Request body: {}
[36m03:05:09.297 gohan.server.resources DEBUG [0m Show common_function c1be08ee-7cf2-4c84-8fe7-7e891d17bc71 started
[36m03:05:09.300 gohan.server.resources DEBUG [0m Show common_function c1be08ee-7cf2-4c84-8fe7-7e891d17bc71 completed: map[common_function:map[secondary_vrrp_ip:169.254.1.254 status:ACTIVE ha_router_id:3a3d7a43-d749-44e8-90bc-de7b37d1d258 id:c1be08ee-7cf2-4c84-8fe7-7e891d17bc71 vrid:42 common_function_number:2 name:common_function2 common_function_pool_id:cca32fd7-2430-4acc-87e9-a7b527e9918d shared_ip_address:100.64.0.128 description: link_local_ip_address:169.254.1.228 primary_vrrp_ip:169.254.1.253 tenant_id:0b576f6f4cbf414f829cd12f008bf08f]]
[36m03:05:09.300 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[560]]
[36m03:05:09.300 gohan.server.middleware DEBUG [0m Response body: {
  "common_function": {
    "common_function_number": 2,
    "common_function_pool_id": "cca32fd7-2430-4acc-87e9-a7b527e9918d",
    "description": "",
    "ha_router_id": "3a3d7a43-d749-44e8-90bc-de7b37d1d258",
    "id": "c1be08ee-7cf2-4c84-8fe7-7e891d17bc71",
    "link_local_ip_address": "169.254.1.228",
    "name": "common_function2",
    "primary_vrrp_ip": "169.254.1.253",
    "secondary_vrrp_ip": "169.254.1.254",
    "shared_ip_address": "100.64.0.128",
    "status": "ACTIVE",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
    "vrid": 42
  }
}
03:05:09.300 gohan.server.middleware INFO [0m Completed 200 OK in 753.040619ms
[36m03:05:12.972 gohan.server DEBUG [0m Monitoring Watcher starts watch
[36m03:05:12.973 gohan.server DEBUG [0m Monitoring event update received: get /monitoring map[]
[36m03:05:12.973 gohan.server DEBUG [0m Monitoring event update received: get /monitoring/v2.0 map[]
[36m03:05:12.973 gohan.server DEBUG [0m Monitoring event update received: get /monitoring/v2.0/ese_devices map[]
[36m03:05:12.973 gohan.server DEBUG [0m Monitoring event update received: get /monitoring/v2.0/ese_devices/9f05b260-26ca-46f7-98c3-ad88e411a989 map[switch:UP version:1]
03:05:12.973 gohan.server.sync INFO [0m MonitoringUpdate for get /monitoring/v2.0/ese_devices/9f05b260-26ca-46f7-98c3-ad88e411a989 map[version:1 switch:UP] started
[33m03:05:12.974 gohan.server.sync WARNING [0m Unhandled error during monitoring update - aborting: State update on unexpected path '/v2.0'
03:05:12.974 gohan.server.sync INFO [0m MonitoringUpdate for get /monitoring/v2.0/ese_devices map[] started
[33m03:05:12.974 gohan.server.sync WARNING [0m Unhandled error during monitoring update - aborting: State update on unexpected path '//monitoring'
[33m03:05:12.975 gohan.server.sync WARNING [0m Unhandled error during monitoring update - aborting: No resource found
03:05:12.978 gohan.sync INFO [0m Locked gohan/cluster/lock/monitoring/v2.0/ese_devices/9f05b260-26ca-46f7-98c3-ad88e411a989 with index 379
03:05:13.028 gohan.db.sql INFO [0m Executing SQL query in transaction 'e5cc8932-7896-4a31-9991-76eae8ee653c': 'UPDATE `ese_devices` SET `management_ip_address` = 10.161.0.34, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `tsn_names` = null, `location` = <nil>, `public_ip_address` = 10.161.0.34, `id` = 9f05b260-26ca-46f7-98c3-ad88e411a989, `type` = tor, `flavor` = <nil>, `username` = esi, `hostname` = QFX-NW02, `status` = ACTIVE, `existing` = existing, `name` = QFX-NW02, `tags` = {}, `description` = , `password` = password, `tor_agent_names` = null, `state_version` = 1, `monitoring_version` = 1, `state_error` = , `state` = {"error":"","state":{"heat_outputs":"[{\"output_value\": [\"default-global-system-config\", \"QFX-NW02\"], \"description\": \"The FQ name of the physical router.\", \"output_key\": \"fq_name\"}, {\"output_value\": \"physical_router\", \"description\": \"A unique id for the physical router.\", \"output_key\": \"id\"}, {\"output_value\": \"dummy\", \"description\": \"The name of the physical router.\", \"output_key\": \"name\"}]","state_monitoring":"{\"switch\": \"ACTIVE\"}","worker_state":"CREATE_COMPLETED"}}, `state_monitoring` = {"switch":"UP"}, `marked_for_deletion` = 0 WHERE id = 9f05b260-26ca-46f7-98c3-ad88e411a989'
03:05:13.030 gohan.extension.ese_device.post_monitoring_update_in_transaction INFO [0m Config version: 1, State version: 1, Monitoring version: 1
03:05:13.030 gohan.extension.ese_device.post_monitoring_update_in_transaction INFO [0m Reading monitoring data from worker state: {"switch": "ACTIVE"}
03:05:13.031 gohan.extension.ese_device.post_monitoring_update_in_transaction INFO [0m Overriding monitoring data with data from monitoring backend: {"switch":"UP"}
03:05:13.042 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/monitoring/v2.0/ese_devices/9f05b260-26ca-46f7-98c3-ad88e411a989 with index 379
03:05:13.042 gohan.server.sync INFO [0m MonitoringUpdate for get /monitoring/v2.0/ese_devices/9f05b260-26ca-46f7-98c3-ad88e411a989 completed
03:05:13.049 gohan.sync INFO [0m Path gohan/cluster/lock/monitoring/v2.0/ese_devices/9f05b260-26ca-46f7-98c3-ad88e411a989 already unlocked or not locked
[36m03:05:14.372 gohan.server DEBUG [0m Monitoring event update received: set /monitoring/v2.0/ese_physical_ports/976156ef-05b4-47f4-9497-a36531563a08 map[port:UP version:1]
03:05:14.372 gohan.server.sync INFO [0m MonitoringUpdate for set /monitoring/v2.0/ese_physical_ports/976156ef-05b4-47f4-9497-a36531563a08 map[port:UP version:1] started
03:05:14.381 gohan.sync INFO [0m Locked gohan/cluster/lock/monitoring/v2.0/ese_physical_ports/976156ef-05b4-47f4-9497-a36531563a08 with index 384
[36m03:05:14.382 gohan.server DEBUG [0m Monitoring event update received: set /monitoring/v2.0/ese_physical_ports/5b2dee2e-7420-4cd4-b270-5081eb9eb371 map[port:UP version:1]
03:05:14.382 gohan.server.sync INFO [0m MonitoringUpdate for set /monitoring/v2.0/ese_physical_ports/5b2dee2e-7420-4cd4-b270-5081eb9eb371 map[version:1 port:UP] started
03:05:14.389 gohan.sync INFO [0m Locked gohan/cluster/lock/monitoring/v2.0/ese_physical_ports/5b2dee2e-7420-4cd4-b270-5081eb9eb371 with index 385
03:05:14.440 gohan.db.sql INFO [0m Executing SQL query in transaction 'b3b461b7-8f03-4aab-8a99-a4dc0942b077': 'UPDATE `ese_physical_ports` SET `existing` = new, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `description` = , `status` = ACTIVE, `id` = 976156ef-05b4-47f4-9497-a36531563a08, `tags` = {}, `connected_port_owner` = mx_downlink, `ese_device_id` = 9f05b260-26ca-46f7-98c3-ad88e411a989, `connected_port_id` = , `name` = xe-0/0/3, ese_device_id = 9f05b260-26ca-46f7-98c3-ad88e411a989, `state_version` = 1, `monitoring_version` = 1, `state_error` = , `state` = {"error":"","state":{"heat_outputs":"[{\"output_value\": \"dddddddd-dddd-dddd-dddd-dddddddddddd\", \"description\": \"A unique id for the physical interface\", \"output_key\": \"id\"}, {\"output_value\": null, \"output_error\": \"'ContrailPhysicalInterface' object has no attribute 'pi_uuid'\", \"description\": \"The name of the physical interface.\", \"output_key\": \"name\"}]","state_monitoring":"{\"port\": \"ACTIVE\"}","worker_state":"CREATE_COMPLETED"}}, `state_monitoring` = {"port":"UP"}, `marked_for_deletion` = 0 WHERE id = 976156ef-05b4-47f4-9497-a36531563a08'
03:05:14.441 gohan.extension.ese_physical_port.post_monitoring_update_in_transaction INFO [0m Config version: 1, State version: 1, Monitoring version: 1
03:05:14.441 gohan.extension.ese_physical_port.post_monitoring_update_in_transaction INFO [0m Reading monitoring data from worker state: {"port": "ACTIVE"}
03:05:14.442 gohan.extension.ese_physical_port.post_monitoring_update_in_transaction INFO [0m Overriding monitoring data with data from monitoring backend: {"port":"UP"}
03:05:14.462 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/monitoring/v2.0/ese_physical_ports/976156ef-05b4-47f4-9497-a36531563a08 with index 384
03:05:14.462 gohan.server.sync INFO [0m MonitoringUpdate for set /monitoring/v2.0/ese_physical_ports/976156ef-05b4-47f4-9497-a36531563a08 completed
03:05:14.467 gohan.db.sql INFO [0m Executing SQL query in transaction '5207b5d5-9b26-4354-b054-1aee75092d2a': 'UPDATE `ese_physical_ports` SET `id` = 5b2dee2e-7420-4cd4-b270-5081eb9eb371, `tags` = {}, `existing` = new, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `description` = , `status` = ACTIVE, `name` = xe-0/0/4, `connected_port_owner` = mx_downlink, `ese_device_id` = 9f05b260-26ca-46f7-98c3-ad88e411a989, `connected_port_id` = , ese_device_id = 9f05b260-26ca-46f7-98c3-ad88e411a989, `state_version` = 1, `monitoring_version` = 1, `state_error` = , `state` = {"error":"","state":{"heat_outputs":"[{\"output_value\": \"dddddddd-dddd-dddd-dddd-dddddddddddd\", \"description\": \"A unique id for the physical interface\", \"output_key\": \"id\"}, {\"output_value\": null, \"output_error\": \"'ContrailPhysicalInterface' object has no attribute 'pi_uuid'\", \"description\": \"The name of the physical interface.\", \"output_key\": \"name\"}]","state_monitoring":"{\"port\": \"ACTIVE\"}","worker_state":"CREATE_COMPLETED"}}, `state_monitoring` = {"port":"UP"}, `marked_for_deletion` = 0 WHERE id = 5b2dee2e-7420-4cd4-b270-5081eb9eb371'
03:05:14.468 gohan.extension.ese_physical_port.post_monitoring_update_in_transaction INFO [0m Config version: 1, State version: 1, Monitoring version: 1
03:05:14.469 gohan.extension.ese_physical_port.post_monitoring_update_in_transaction INFO [0m Reading monitoring data from worker state: {"port": "ACTIVE"}
03:05:14.469 gohan.extension.ese_physical_port.post_monitoring_update_in_transaction INFO [0m Overriding monitoring data with data from monitoring backend: {"port":"UP"}
03:05:14.473 gohan.sync INFO [0m Path gohan/cluster/lock/monitoring/v2.0/ese_physical_ports/976156ef-05b4-47f4-9497-a36531563a08 already unlocked or not locked
03:05:14.493 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/monitoring/v2.0/ese_physical_ports/5b2dee2e-7420-4cd4-b270-5081eb9eb371 with index 385
03:05:14.493 gohan.server.sync INFO [0m MonitoringUpdate for set /monitoring/v2.0/ese_physical_ports/5b2dee2e-7420-4cd4-b270-5081eb9eb371 completed
03:05:14.500 gohan.sync INFO [0m Path gohan/cluster/lock/monitoring/v2.0/ese_physical_ports/5b2dee2e-7420-4cd4-b270-5081eb9eb371 already unlocked or not locked
03:05:19.321 gohan.server.middleware INFO [0m Started POST /v2.0/nat_ip_pools for client 172.17.0.19:40308 data: 
{
"nat_ip_pool": {
"common_function_pool_id": "cca32fd7-2430-4acc-87e9-a7b527e9918d",
"description": "",
"ha_router_id": "3a3d7a43-d749-44e8-90bc-de7b37d1d258",
"ip_ranges": [
  {
    "end": "100.64.0.254",
    "start": "100.64.0.10"
  }
],
"name": "sample-nat-ip-pool",
"tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
}
}
[36m03:05:19.321 gohan.server.middleware DEBUG [0m Request headers: map[Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[identity] Content-Length:[323]]
[36m03:05:19.321 gohan.server.middleware DEBUG [0m Request body: 
{
"nat_ip_pool": {
"common_function_pool_id": "cca32fd7-2430-4acc-87e9-a7b527e9918d",
"description": "",
"ha_router_id": "3a3d7a43-d749-44e8-90bc-de7b37d1d258",
"ip_ranges": [
  {
    "end": "100.64.0.254",
    "start": "100.64.0.10"
  }
],
"name": "sample-nat-ip-pool",
"tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
}
}
[36m03:05:19.402 gohan.server.resources DEBUG [0m Create nat_ip_pool with data map[name:sample-nat-ip-pool tenant_id:0b576f6f4cbf414f829cd12f008bf08f common_function_pool_id:cca32fd7-2430-4acc-87e9-a7b527e9918d description: ha_router_id:3a3d7a43-d749-44e8-90bc-de7b37d1d258 ip_ranges:[map[end:100.64.0.254 start:100.64.0.10]]] started
[36m03:05:19.402 gohan.schema DEBUG [0m No properties in resource policy. Allowing all property access
[36m03:05:19.470 gohan.server.resources DEBUG [0m List ha_router query: map[id:[3a3d7a43-d749-44e8-90bc-de7b37d1d258]] started
[36m03:05:19.472 gohan.server.resources DEBUG [0m List ha_router query: map[id:[3a3d7a43-d749-44e8-90bc-de7b37d1d258]] completed
[36m03:05:19.536 gohan.server.resources DEBUG [0m List common_function_pool query: map[id:[cca32fd7-2430-4acc-87e9-a7b527e9918d]] started
[36m03:05:19.538 gohan.server.resources DEBUG [0m List common_function_pool query: map[id:[cca32fd7-2430-4acc-87e9-a7b527e9918d]] completed
03:05:19.549 gohan.db.sql INFO [0m Executing SQL query in transaction '31f5a274-4bb2-4c97-8133-6964bfa77b65': 'INSERT INTO `nat_ip_pools` (`ip_ranges`,`ip_allocation_state`,`ha_router_id`,`common_function_pool_id`,`id`,`name`,`description`,`tenant_id`) VALUES ([{"end":"100.64.0.254","start":"100.64.0.10"}],AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB/8=,3a3d7a43-d749-44e8-90bc-de7b37d1d258,cca32fd7-2430-4acc-87e9-a7b527e9918d,75733e12-47f7-49ea-9939-2819df6c8253,sample-nat-ip-pool,,0b576f6f4cbf414f829cd12f008bf08f)'
03:05:19.550 gohan.db.sql INFO [0m Executing SQL query in transaction '31f5a274-4bb2-4c97-8133-6964bfa77b65': 'INSERT INTO `events` (`body`,`version`,`path`,`timestamp`,`type`,`marked_for_deletion`) VALUES ("{\"common_function_pool_id\":\"cca32fd7-2430-4acc-87e9-a7b527e9918d\",\"description\":\"\",\"ha_router_id\":\"3a3d7a43-d749-44e8-90bc-de7b37d1d258\",\"id\":\"75733e12-47f7-49ea-9939-2819df6c8253\",\"ip_allocation_state\":\"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB/8=\",\"ip_ranges\":[{\"end\":\"100.64.0.254\",\"start\":\"100.64.0.10\"}],\"name\":\"sample-nat-ip-pool\",\"tenant_id\":\"0b576f6f4cbf414f829cd12f008bf08f\"}",1,/v2.0/nat_ip_pools/75733e12-47f7-49ea-9939-2819df6c8253,1494471919,create,false)'
[36m03:05:19.561 gohan.server.resources DEBUG [0m Create nat_ip_pool completed: map[nat_ip_pool:map[ha_router_id:3a3d7a43-d749-44e8-90bc-de7b37d1d258 ip_ranges:[map[end:100.64.0.254 start:100.64.0.10]] name:sample-nat-ip-pool tenant_id:0b576f6f4cbf414f829cd12f008bf08f id:75733e12-47f7-49ea-9939-2819df6c8253 ip_allocation_state:AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB/8= common_function_pool_id:cca32fd7-2430-4acc-87e9-a7b527e9918d description:]]
[36m03:05:19.562 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[495]]
[36m03:05:19.562 gohan.server.middleware DEBUG [0m Response body: {
  "nat_ip_pool": {
    "common_function_pool_id": "cca32fd7-2430-4acc-87e9-a7b527e9918d",
    "description": "",
    "ha_router_id": "3a3d7a43-d749-44e8-90bc-de7b37d1d258",
    "id": "75733e12-47f7-49ea-9939-2819df6c8253",
    "ip_allocation_state": "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB/8=",
    "ip_ranges": [
      {
        "end": "100.64.0.254",
        "start": "100.64.0.10"
      }
    ],
    "name": "sample-nat-ip-pool",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:05:19.562 gohan.server.middleware INFO [0m Completed 201 Created in 241.403751ms
[36m03:05:19.565 gohan.server.sync DEBUG [0m Processing event 76 - create
03:05:19.565 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/nat_ip_pools/75733e12-47f7-49ea-9939-2819df6c8253
[36m03:05:19.571 gohan.server.sync DEBUG [0m Deleting event 76
03:05:19.572 gohan.db.sql INFO [0m Executing SQL query in transaction '3daa7f19-74f8-4813-b607-ecb50d20c36c': 'DELETE FROM `events` WHERE id = 76'
[36m03:05:19.572 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
03:05:19.577 gohan.server.middleware INFO [0m Started GET /v2.0/nat_ip_pools/75733e12-47f7-49ea-9939-2819df6c8253 for client 172.17.0.19:40322 data: 
[36m03:05:19.577 gohan.server.middleware DEBUG [0m Request headers: map[Accept-Encoding:[identity] Content-Length:[0] Content-Type:[application/json] X-Auth-Token:[***]]
[36m03:05:19.577 gohan.server.middleware DEBUG [0m Request body: 
[36m03:05:19.587 gohan.server DEBUG [0m State event update received: set /state/v2.0/nat_ip_pools/75733e12-47f7-49ea-9939-2819df6c8253 map[error: state:map[worker_state:READ_COMPLETE] version:1]
03:05:19.587 gohan.server.sync INFO [0m StateUpdate for set /state/v2.0/nat_ip_pools/75733e12-47f7-49ea-9939-2819df6c8253 map[error: state:map[worker_state:READ_COMPLETE] version:1] started
03:05:19.603 gohan.sync INFO [0m Locked gohan/cluster/lock/state/v2.0/nat_ip_pools/75733e12-47f7-49ea-9939-2819df6c8253 with index 394
[36m03:05:19.666 gohan.server.resources DEBUG [0m Show nat_ip_pool 75733e12-47f7-49ea-9939-2819df6c8253 started
[36m03:05:19.669 gohan.server.resources DEBUG [0m Show nat_ip_pool 75733e12-47f7-49ea-9939-2819df6c8253 completed: map[nat_ip_pool:map[ip_allocation_state:AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB/8= ha_router_id:3a3d7a43-d749-44e8-90bc-de7b37d1d258 common_function_pool_id:cca32fd7-2430-4acc-87e9-a7b527e9918d id:75733e12-47f7-49ea-9939-2819df6c8253 name:sample-nat-ip-pool description: tenant_id:0b576f6f4cbf414f829cd12f008bf08f ip_ranges:[map[end:100.64.0.254 start:100.64.0.10]]]]
[36m03:05:19.669 gohan.server.middleware DEBUG [0m Response headers: map[Content-Length:[495] Content-Type:[application/json]]
[36m03:05:19.669 gohan.server.middleware DEBUG [0m Response body: {
  "nat_ip_pool": {
    "common_function_pool_id": "cca32fd7-2430-4acc-87e9-a7b527e9918d",
    "description": "",
    "ha_router_id": "3a3d7a43-d749-44e8-90bc-de7b37d1d258",
    "id": "75733e12-47f7-49ea-9939-2819df6c8253",
    "ip_allocation_state": "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB/8=",
    "ip_ranges": [
      {
        "end": "100.64.0.254",
        "start": "100.64.0.10"
      }
    ],
    "name": "sample-nat-ip-pool",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:05:19.669 gohan.server.middleware INFO [0m Completed 200 OK in 92.491549ms
03:05:19.674 gohan.db.sql INFO [0m Executing SQL query in transaction '7d842450-1a06-4b7d-8d8a-919248fa37f5': 'UPDATE `nat_ip_pools` SET `common_function_pool_id` = cca32fd7-2430-4acc-87e9-a7b527e9918d, `id` = 75733e12-47f7-49ea-9939-2819df6c8253, `name` = sample-nat-ip-pool, `description` = , `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `ip_ranges` = [{"end":"100.64.0.254","start":"100.64.0.10"}], `ip_allocation_state` = AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB/8=, `ha_router_id` = 3a3d7a43-d749-44e8-90bc-de7b37d1d258, `state_version` = 1, `monitoring_version` = 0, `state_error` = , `state` = {"error":"","state":{"worker_state":"READ_COMPLETE"}}, `state_monitoring` = {}, `marked_for_deletion` = 0 WHERE id = 75733e12-47f7-49ea-9939-2819df6c8253'
03:05:19.688 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/state/v2.0/nat_ip_pools/75733e12-47f7-49ea-9939-2819df6c8253 with index 394
03:05:19.698 gohan.sync INFO [0m Path gohan/cluster/lock/state/v2.0/nat_ip_pools/75733e12-47f7-49ea-9939-2819df6c8253 already unlocked or not locked
03:05:20.011 gohan.server.middleware INFO [0m Started GET /v2.0/nat_ip_pools/75733e12-47f7-49ea-9939-2819df6c8253 for client 172.17.0.19:40334 data: 
[36m03:05:20.012 gohan.server.middleware DEBUG [0m Request headers: map[User-Agent:[gophercloud/1.0.0] Connection:[close] Accept:[application/json] X-Auth-Token:[***] Accept-Encoding:[gzip]]
[36m03:05:20.012 gohan.server.middleware DEBUG [0m Request body: 
[36m03:05:20.078 gohan.server.resources DEBUG [0m Show nat_ip_pool 75733e12-47f7-49ea-9939-2819df6c8253 started
[36m03:05:20.080 gohan.server.resources DEBUG [0m Show nat_ip_pool 75733e12-47f7-49ea-9939-2819df6c8253 completed: map[nat_ip_pool:map[ip_allocation_state:AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB/8= ha_router_id:3a3d7a43-d749-44e8-90bc-de7b37d1d258 common_function_pool_id:cca32fd7-2430-4acc-87e9-a7b527e9918d id:75733e12-47f7-49ea-9939-2819df6c8253 name:sample-nat-ip-pool description: tenant_id:0b576f6f4cbf414f829cd12f008bf08f ip_ranges:[map[end:100.64.0.254 start:100.64.0.10]]]]
[36m03:05:20.081 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[495]]
[36m03:05:20.081 gohan.server.middleware DEBUG [0m Response body: {
  "nat_ip_pool": {
    "common_function_pool_id": "cca32fd7-2430-4acc-87e9-a7b527e9918d",
    "description": "",
    "ha_router_id": "3a3d7a43-d749-44e8-90bc-de7b37d1d258",
    "id": "75733e12-47f7-49ea-9939-2819df6c8253",
    "ip_allocation_state": "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB/8=",
    "ip_ranges": [
      {
        "end": "100.64.0.254",
        "start": "100.64.0.10"
      }
    ],
    "name": "sample-nat-ip-pool",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:05:20.081 gohan.server.middleware INFO [0m Completed 200 OK in 69.267709ms
03:05:20.082 gohan.server.middleware INFO [0m Started GET /v2.0/nat_ip_pools/75733e12-47f7-49ea-9939-2819df6c8253 for client 172.17.0.19:40340 data: {}
[36m03:05:20.082 gohan.server.middleware DEBUG [0m Request headers: map[User-Agent:[gophercloud/1.0.0] Connection:[close] Content-Length:[2] Accept:[application/json] Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[gzip]]
[36m03:05:20.082 gohan.server.middleware DEBUG [0m Request body: {}
[36m03:05:20.146 gohan.server.resources DEBUG [0m Show nat_ip_pool 75733e12-47f7-49ea-9939-2819df6c8253 started
[36m03:05:20.149 gohan.server.resources DEBUG [0m Show nat_ip_pool 75733e12-47f7-49ea-9939-2819df6c8253 completed: map[nat_ip_pool:map[ip_ranges:[map[end:100.64.0.254 start:100.64.0.10]] ip_allocation_state:AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB/8= ha_router_id:3a3d7a43-d749-44e8-90bc-de7b37d1d258 common_function_pool_id:cca32fd7-2430-4acc-87e9-a7b527e9918d id:75733e12-47f7-49ea-9939-2819df6c8253 name:sample-nat-ip-pool description: tenant_id:0b576f6f4cbf414f829cd12f008bf08f]]
[36m03:05:20.149 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[495]]
[36m03:05:20.149 gohan.server.middleware DEBUG [0m Response body: {
  "nat_ip_pool": {
    "common_function_pool_id": "cca32fd7-2430-4acc-87e9-a7b527e9918d",
    "description": "",
    "ha_router_id": "3a3d7a43-d749-44e8-90bc-de7b37d1d258",
    "id": "75733e12-47f7-49ea-9939-2819df6c8253",
    "ip_allocation_state": "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB/8=",
    "ip_ranges": [
      {
        "end": "100.64.0.254",
        "start": "100.64.0.10"
      }
    ],
    "name": "sample-nat-ip-pool",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:05:20.149 gohan.server.middleware INFO [0m Completed 200 OK in 67.19435ms
[36m03:05:24.356 gohan.server DEBUG [0m Monitoring event update received: set /monitoring/v2.0/edge_routers/8aba84f9-4675-4d22-a231-e9eabde80818 map[router:UP version:1]
03:05:24.357 gohan.server.sync INFO [0m MonitoringUpdate for set /monitoring/v2.0/edge_routers/8aba84f9-4675-4d22-a231-e9eabde80818 map[router:UP version:1] started
03:05:24.363 gohan.sync INFO [0m Locked gohan/cluster/lock/monitoring/v2.0/edge_routers/8aba84f9-4675-4d22-a231-e9eabde80818 with index 400
03:05:24.412 gohan.db.sql INFO [0m Executing SQL query in transaction '0f6041e4-9c14-46cd-a48e-c6a3ff9c0b6a': 'UPDATE `edge_routers` SET `autonomous_system` = 65101, `ssh_port` = 830, `description` = MX80 #2, `password` = esiesi0000, `id` = 8aba84f9-4675-4d22-a231-e9eabde80818, `status` = ACTIVE, `name` = vMX-router-02, `login` = esi, `ip` = 10.79.5.185, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `state_version` = 1, `monitoring_version` = 1, `state_error` = , `state` = {"error":"","state":{"state_monitoring":"{\"router\": \"ACTIVE\"}","worker_state":"CREATE_COMPLETED"}}, `state_monitoring` = {"router":"UP"}, `marked_for_deletion` = 0 WHERE id = 8aba84f9-4675-4d22-a231-e9eabde80818'
03:05:24.414 gohan.extension.edge_router.post_monitoring_update_in_transaction INFO [0m Config version: 1, State version: 1, Monitoring version: 1
03:05:24.414 gohan.extension.edge_router.post_monitoring_update_in_transaction INFO [0m Reading monitoring data from worker state: {"router": "ACTIVE"}
03:05:24.414 gohan.extension.edge_router.post_monitoring_update_in_transaction INFO [0m Overriding monitoring data with data from monitoring backend: {"router":"UP"}
03:05:24.423 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/monitoring/v2.0/edge_routers/8aba84f9-4675-4d22-a231-e9eabde80818 with index 400
03:05:24.423 gohan.server.sync INFO [0m MonitoringUpdate for set /monitoring/v2.0/edge_routers/8aba84f9-4675-4d22-a231-e9eabde80818 completed
03:05:24.434 gohan.sync INFO [0m Path gohan/cluster/lock/monitoring/v2.0/edge_routers/8aba84f9-4675-4d22-a231-e9eabde80818 already unlocked or not locked
[36m03:05:24.455 gohan.server DEBUG [0m Monitoring event update received: set /monitoring/v2.0/edge_routers/769b5e3b-3320-41ec-9be0-4567b50f1aab map[router:UP version:1]
03:05:24.455 gohan.server.sync INFO [0m MonitoringUpdate for set /monitoring/v2.0/edge_routers/769b5e3b-3320-41ec-9be0-4567b50f1aab map[router:UP version:1] started
03:05:24.465 gohan.sync INFO [0m Locked gohan/cluster/lock/monitoring/v2.0/edge_routers/769b5e3b-3320-41ec-9be0-4567b50f1aab with index 404
03:05:24.514 gohan.db.sql INFO [0m Executing SQL query in transaction '0a77fd5f-91b7-4a64-b90c-a908a06d3113': 'UPDATE `edge_routers` SET `password` = esiesi0000, `autonomous_system` = 65101, `ssh_port` = 830, `description` = MX80 #1, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `id` = 769b5e3b-3320-41ec-9be0-4567b50f1aab, `status` = ACTIVE, `name` = vMX-router-01, `login` = esi, `ip` = 10.79.5.184, `state_version` = 1, `monitoring_version` = 1, `state_error` = , `state` = {"error":"","state":{"state_monitoring":"{\"router\": \"ACTIVE\"}","worker_state":"CREATE_COMPLETED"}}, `state_monitoring` = {"router":"UP"}, `marked_for_deletion` = 0 WHERE id = 769b5e3b-3320-41ec-9be0-4567b50f1aab'
03:05:24.516 gohan.extension.edge_router.post_monitoring_update_in_transaction INFO [0m Config version: 1, State version: 1, Monitoring version: 1
03:05:24.517 gohan.extension.edge_router.post_monitoring_update_in_transaction INFO [0m Reading monitoring data from worker state: {"router": "ACTIVE"}
03:05:24.517 gohan.extension.edge_router.post_monitoring_update_in_transaction INFO [0m Overriding monitoring data with data from monitoring backend: {"router":"UP"}
03:05:24.532 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/monitoring/v2.0/edge_routers/769b5e3b-3320-41ec-9be0-4567b50f1aab with index 404
03:05:24.532 gohan.server.sync INFO [0m MonitoringUpdate for set /monitoring/v2.0/edge_routers/769b5e3b-3320-41ec-9be0-4567b50f1aab completed
03:05:24.539 gohan.sync INFO [0m Path gohan/cluster/lock/monitoring/v2.0/edge_routers/769b5e3b-3320-41ec-9be0-4567b50f1aab already unlocked or not locked
[36m03:05:29.394 gohan.server DEBUG [0m Monitoring event update received: set /monitoring/v2.0/er_physical_interfaces/a752c6c0-2075-4e7f-9040-5fcefcad0252 map[version:1 interface:UP]
03:05:29.395 gohan.server.sync INFO [0m MonitoringUpdate for set /monitoring/v2.0/er_physical_interfaces/a752c6c0-2075-4e7f-9040-5fcefcad0252 map[interface:UP version:1] started
03:05:29.410 gohan.sync INFO [0m Locked gohan/cluster/lock/monitoring/v2.0/er_physical_interfaces/a752c6c0-2075-4e7f-9040-5fcefcad0252 with index 410
03:05:29.450 gohan.db.sql INFO [0m Executing SQL query in transaction 'e292ff51-843b-4520-b7ca-01f88f15c13e': 'UPDATE `er_physical_interfaces` SET `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `id` = a752c6c0-2075-4e7f-9040-5fcefcad0252, `name` = ae0, `description` = , `device_id` = 8aba84f9-4675-4d22-a231-e9eabde80818, `connected_ese_port_id` = 976156ef-05b4-47f4-9497-a36531563a08, `status` = ACTIVE, `state_version` = 1, `monitoring_version` = 1, `state_error` = , `state` = {"error":"","state":{"state_monitoring":"{\"interface\": \"ACTIVE\"}","worker_state":"CREATE_COMPLETED"}}, `state_monitoring` = {"interface":"UP"}, `marked_for_deletion` = 0 WHERE id = a752c6c0-2075-4e7f-9040-5fcefcad0252'
03:05:29.451 gohan.extension.er_physical_interface.post_monitoring_update_in_transaction INFO [0m Config version: 1, State version: 1, Monitoring version: 1
03:05:29.452 gohan.extension.er_physical_interface.post_monitoring_update_in_transaction INFO [0m Reading monitoring data from worker state: {"interface": "ACTIVE"}
03:05:29.452 gohan.extension.er_physical_interface.post_monitoring_update_in_transaction INFO [0m Overriding monitoring data with data from monitoring backend: {"interface":"UP"}
03:05:29.458 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/monitoring/v2.0/er_physical_interfaces/a752c6c0-2075-4e7f-9040-5fcefcad0252 with index 410
03:05:29.458 gohan.server.sync INFO [0m MonitoringUpdate for set /monitoring/v2.0/er_physical_interfaces/a752c6c0-2075-4e7f-9040-5fcefcad0252 completed
03:05:29.466 gohan.sync INFO [0m Path gohan/cluster/lock/monitoring/v2.0/er_physical_interfaces/a752c6c0-2075-4e7f-9040-5fcefcad0252 already unlocked or not locked
03:05:30.002 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
03:05:30.015 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
[36m03:05:30.136 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] started
[36m03:05:30.140 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] completed
03:05:30.143 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
[36m03:05:30.160 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] started
[36m03:05:30.166 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] completed
03:05:30.168 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
03:05:30.173 gohan.server.middleware INFO [0m Started POST /v2.0/common_function_gateways for client 172.17.0.19:40368 data: 
{
"common_function_gateway": {
"common_function_pool_id": "cca32fd7-2430-4acc-87e9-a7b527e9918d",
"name": "T0011CF000",
"tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
}
}
[36m03:05:30.173 gohan.server.middleware DEBUG [0m Request headers: map[X-Auth-Token:[***] Accept-Encoding:[identity] Content-Length:[172] Content-Type:[application/json]]
[36m03:05:30.173 gohan.server.middleware DEBUG [0m Request body: 
{
"common_function_gateway": {
"common_function_pool_id": "cca32fd7-2430-4acc-87e9-a7b527e9918d",
"name": "T0011CF000",
"tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
}
}
[36m03:05:30.239 gohan.server.resources DEBUG [0m Create common_function_gateway with data map[common_function_pool_id:cca32fd7-2430-4acc-87e9-a7b527e9918d name:T0011CF000 tenant_id:0b576f6f4cbf414f829cd12f008bf08f] started
[36m03:05:30.239 gohan.schema DEBUG [0m No properties in resource policy. Allowing all property access
[36m03:05:30.294 gohan.server.resources DEBUG [0m List common_function_pool query: map[id:[cca32fd7-2430-4acc-87e9-a7b527e9918d]] started
[36m03:05:30.296 gohan.server.resources DEBUG [0m List common_function_pool query: map[id:[cca32fd7-2430-4acc-87e9-a7b527e9918d]] completed
03:05:30.395 gohan.db.sql INFO [0m Executing SQL query in transaction '2196ba6f-e604-48b1-94f4-1b0450dfdcfc': 'UPDATE `ha_routers` SET `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `primary_router_id` = 8aba84f9-4675-4d22-a231-e9eabde80818, `id` = 3a3d7a43-d749-44e8-90bc-de7b37d1d258, `name` = sample-ha-router, `maximum_gateways` = 500, `status` = ACTIVE, `available_gateways` = 500, `description` = sample_ha_router, `secondary_router_id` = 769b5e3b-3320-41ec-9be0-4567b50f1aab WHERE id = 3a3d7a43-d749-44e8-90bc-de7b37d1d258'
03:05:30.395 gohan.db.sql INFO [0m Executing SQL query in transaction '2196ba6f-e604-48b1-94f4-1b0450dfdcfc': 'UPDATE `ha_interfaces` SET `description` = , `name` = sample-ha-router-downlink, `admin_state_up` = true, `vlan_pool_state` = ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAM=, `maximum_be_bandwidth` = 0, `id` = 372ed357-e622-41fb-a613-076d332838e2, `vlan_ids_available` = 3068, `primary_interface_id` = a752c6c0-2075-4e7f-9040-5fcefcad0252, `secondary_interface_id` = 96c3629b-9bfb-4d54-adc1-750d024c2858, `status` = ACTIVE, `link_type` = downlink, `gateway_instances_count` = 1, `maximum_ga_bandwidth` = 0, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `available_ga_bandwidth` = 0, `restricted_vlans` = 0-1024,4094, `ha_router_id` = 3a3d7a43-d749-44e8-90bc-de7b37d1d258, `available_be_bandwidth` = 0 WHERE id = 372ed357-e622-41fb-a613-076d332838e2'
[36m03:05:30.400 gohan.extension.common_function_gateway.pre_create_in_transaction DEBUG [0m downlink logical ports names: ae0.1025, ae0.1025, VLAN ID: 1025
[36m03:05:30.401 gohan.extension.common_function_gateway.pre_create_in_transaction DEBUG [0m Downlink vrf_name: vrf_gw_sample-ha-router-downlink_1025
03:05:30.406 gohan.db.sql INFO [0m Executing SQL query in transaction '2196ba6f-e604-48b1-94f4-1b0450dfdcfc': 'UPDATE `ha_routers` SET `description` = sample_ha_router, `secondary_router_id` = 769b5e3b-3320-41ec-9be0-4567b50f1aab, `maximum_gateways` = 500, `status` = ACTIVE, `available_gateways` = 499, `id` = 3a3d7a43-d749-44e8-90bc-de7b37d1d258, `name` = sample-ha-router, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `primary_router_id` = 8aba84f9-4675-4d22-a231-e9eabde80818 WHERE id = 3a3d7a43-d749-44e8-90bc-de7b37d1d258'
03:05:30.414 gohan.db.sql INFO [0m Executing SQL query in transaction '2196ba6f-e604-48b1-94f4-1b0450dfdcfc': 'UPDATE `nat_ip_pools` SET `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `ip_ranges` = [{"end":"100.64.0.254","start":"100.64.0.10"}], `ip_allocation_state` = gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB/8=, `ha_router_id` = 3a3d7a43-d749-44e8-90bc-de7b37d1d258, `common_function_pool_id` = cca32fd7-2430-4acc-87e9-a7b527e9918d, `id` = 75733e12-47f7-49ea-9939-2819df6c8253, `name` = sample-nat-ip-pool, `description` = , `config_version` = `config_version` + 1 WHERE id = 75733e12-47f7-49ea-9939-2819df6c8253'
03:05:30.415 gohan.db.sql INFO [0m Executing SQL query in transaction '2196ba6f-e604-48b1-94f4-1b0450dfdcfc': 'INSERT INTO `events` (`version`,`path`,`timestamp`,`type`,`marked_for_deletion`,`body`) VALUES (2,/v2.0/nat_ip_pools/75733e12-47f7-49ea-9939-2819df6c8253,1494471930,update,false,"{\"common_function_pool_id\":\"cca32fd7-2430-4acc-87e9-a7b527e9918d\",\"description\":\"\",\"ha_router_id\":\"3a3d7a43-d749-44e8-90bc-de7b37d1d258\",\"id\":\"75733e12-47f7-49ea-9939-2819df6c8253\",\"ip_allocation_state\":\"gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB/8=\",\"ip_ranges\":[{\"end\":\"100.64.0.254\",\"start\":\"100.64.0.10\"}],\"name\":\"sample-nat-ip-pool\",\"tenant_id\":\"0b576f6f4cbf414f829cd12f008bf08f\"}")'
[36m03:05:30.466 gohan.server.resources DEBUG [0m Create network with data map[name:common_function_gw_access_5c241c51-2003-407a-a239-689fabd19022 tenant_id:0b576f6f4cbf414f829cd12f008bf08f] started
[36m03:05:30.466 gohan.schema DEBUG [0m No properties in resource policy. Allowing all property access
03:05:30.474 gohan.db.sql INFO [0m Executing SQL query in transaction '2196ba6f-e604-48b1-94f4-1b0450dfdcfc': 'INSERT INTO `networks` (`id`,`name`,`plane`,`status`,`tenant_id`,`description`,`shared`,`admin_state_up`,`subnets`,`tags`) VALUES (f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57,common_function_gw_access_5c241c51-2003-407a-a239-689fabd19022,data,PENDING_CREATE,0b576f6f4cbf414f829cd12f008bf08f,,false,true,[],{})'
03:05:30.475 gohan.db.sql INFO [0m Executing SQL query in transaction '2196ba6f-e604-48b1-94f4-1b0450dfdcfc': 'INSERT INTO `events` (`type`,`marked_for_deletion`,`body`,`version`,`path`,`timestamp`) VALUES (create,false,"{\"admin_state_up\":true,\"description\":\"\",\"id\":\"f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57\",\"name\":\"common_function_gw_access_5c241c51-2003-407a-a239-689fabd19022\",\"plane\":\"data\",\"shared\":false,\"status\":\"PENDING_CREATE\",\"subnets\":[],\"tags\":{},\"tenant_id\":\"0b576f6f4cbf414f829cd12f008bf08f\"}",1,/v2.0/networks/f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57,1494471930)'
03:05:30.476 gohan.extension.network.post_create_in_transaction INFO [0m Creating a billing resource: {"config_version":1,"ended":null,"id":"0613a7ba-47ff-4655-9488-54ed8912443a","info":{},"parent_billing_id":null,"resource_id":"f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57","resource_type":"network","started":null,"tenant_id":"0b576f6f4cbf414f829cd12f008bf08f","unique_resource_id":"f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57"}
03:05:30.476 gohan.db.sql INFO [0m Executing SQL query in transaction '2196ba6f-e604-48b1-94f4-1b0450dfdcfc': 'INSERT INTO `billing_resources` (`info`,`unique_resource_id`,`ended`,`id`,`tenant_id`,`started`,`parent_billing_id`,`resource_type`,`resource_id`,`config_version`) VALUES ({},f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57,<nil>,0613a7ba-47ff-4655-9488-54ed8912443a,0b576f6f4cbf414f829cd12f008bf08f,<nil>,<nil>,network,f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57,1)'
[36m03:05:30.477 gohan.server.sync DEBUG [0m Skipping event logging for schema: billing_resource
[36m03:05:30.477 gohan.server.resources DEBUG [0m Create network completed: map[network:map[name:common_function_gw_access_5c241c51-2003-407a-a239-689fabd19022 tenant_id:0b576f6f4cbf414f829cd12f008bf08f id:f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 status:PENDING_CREATE admin_state_up:true tags:map[] plane:data description: shared:false subnets:[]]]
[36m03:05:30.526 gohan.server.resources DEBUG [0m Create subnet with data map[name:common_function_gw_access_subnet_5c241c51-2003-407a-a239-689fabd19022 network_id:f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 cidr:169.254.0.0/17 tenant_id:0b576f6f4cbf414f829cd12f008bf08f gateway_ip:<nil>] started
[36m03:05:30.526 gohan.schema DEBUG [0m No properties in resource policy. Allowing all property access
[36m03:05:30.584 gohan.server.resources DEBUG [0m List network query: map[id:[f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57]] started
[36m03:05:30.635 gohan.server.resources DEBUG [0m List subnet query: map[] started
[36m03:05:30.636 gohan.server.resources DEBUG [0m List subnet query: map[] completed
[36m03:05:30.637 gohan.server.resources DEBUG [0m List network query: map[id:[f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57]] completed
03:05:30.662 gohan.db.sql INFO [0m Executing SQL query in transaction '2196ba6f-e604-48b1-94f4-1b0450dfdcfc': 'INSERT INTO `subnets` (`tags`,`ntp_servers`,`status`,`dhcp_server_address`,`gateway_ip`,`host_routes`,`cidr`,`allocation_pools`,`dns_nameservers`,`id`,`name`,`enable_dhcp`,`description`,`network_id`,`tenant_id`,`ip_version`) VALUES ({},[],PENDING_CREATE,169.254.0.2,<nil>,[],169.254.0.0/17,[{"end":"169.254.127.254","start":"169.254.0.2"}],[],e1353d56-b05a-43a9-b924-383ab0d64d7b,common_function_gw_access_subnet_5c241c51-2003-407a-a239-689fabd19022,true,,f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57,0b576f6f4cbf414f829cd12f008bf08f,4)'
03:05:30.663 gohan.db.sql INFO [0m Executing SQL query in transaction '2196ba6f-e604-48b1-94f4-1b0450dfdcfc': 'INSERT INTO `events` (`version`,`path`,`timestamp`,`type`,`marked_for_deletion`,`body`) VALUES (1,/v2.0/subnets/e1353d56-b05a-43a9-b924-383ab0d64d7b,1494471930,create,false,"{\"allocation_pools\":[{\"end\":\"169.254.127.254\",\"start\":\"169.254.0.2\"}],\"cidr\":\"169.254.0.0/17\",\"description\":\"\",\"dhcp_server_address\":\"169.254.0.2\",\"dns_nameservers\":[],\"enable_dhcp\":true,\"gateway_ip\":null,\"host_routes\":[],\"id\":\"e1353d56-b05a-43a9-b924-383ab0d64d7b\",\"ip_version\":4,\"name\":\"common_function_gw_access_subnet_5c241c51-2003-407a-a239-689fabd19022\",\"network_id\":\"f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57\",\"ntp_servers\":[],\"status\":\"PENDING_CREATE\",\"tags\":{},\"tenant_id\":\"0b576f6f4cbf414f829cd12f008bf08f\"}")'
03:05:30.669 gohan.db.sql INFO [0m Executing SQL query in transaction '2196ba6f-e604-48b1-94f4-1b0450dfdcfc': 'INSERT INTO `ports` (`device_id`,`name`,`managed_by_service`,`device_owner`,`binding:vif_type`,`mac_address`,`fake_delete`,`fixed_ips`,`network_id`,`tenant_id`,`allowed_address_pairs`,`description`,`admin_state_up`,`status`,`attached`,`id`,`tags`) VALUES (e1353d56-b05a-43a9-b924-383ab0d64d7b,dhcp-server-port,false,network:dhcp,vrouter,00:00:5e:00:01:00,false,[{"ip_address":"169.254.0.2","subnet_id":"e1353d56-b05a-43a9-b924-383ab0d64d7b"}],f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57,0b576f6f4cbf414f829cd12f008bf08f,[],DHCP Server Port,true,ACTIVE,false,bbaac433-1023-4660-88f0-ccd8c2c26c89,{})'
03:05:30.669 gohan.db.sql INFO [0m Executing SQL query in transaction '2196ba6f-e604-48b1-94f4-1b0450dfdcfc': 'INSERT INTO `events` (`body`,`version`,`path`,`timestamp`,`type`,`marked_for_deletion`) VALUES ("{\"admin_state_up\":true,\"allowed_address_pairs\":[],\"attached\":false,\"binding:vif_type\":\"vrouter\",\"description\":\"DHCP Server Port\",\"device_id\":\"e1353d56-b05a-43a9-b924-383ab0d64d7b\",\"device_owner\":\"network:dhcp\",\"fake_delete\":false,\"fixed_ips\":[{\"ip_address\":\"169.254.0.2\",\"subnet_id\":\"e1353d56-b05a-43a9-b924-383ab0d64d7b\"}],\"host_routes\":[],\"id\":\"bbaac433-1023-4660-88f0-ccd8c2c26c89\",\"mac_address\":\"00:00:5e:00:01:00\",\"managed_by_service\":false,\"name\":\"dhcp-server-port\",\"network_id\":\"f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57\",\"status\":\"ACTIVE\",\"tags\":{},\"tenant_id\":\"0b576f6f4cbf414f829cd12f008bf08f\"}",1,/v2.0/ports/bbaac433-1023-4660-88f0-ccd8c2c26c89,1494471930,create,false)'
[36m03:05:30.671 gohan.server.resources DEBUG [0m Create subnet completed: map[subnet:map[gateway_ip:<nil> ip_version:4 allocation_pools:[map[start:169.254.0.2 end:169.254.127.254]] status:PENDING_CREATE dhcp_server_address:169.254.0.2 cidr:169.254.0.0/17 tenant_id:0b576f6f4cbf414f829cd12f008bf08f name:common_function_gw_access_subnet_5c241c51-2003-407a-a239-689fabd19022 ntp_servers:[] enable_dhcp:true id:e1353d56-b05a-43a9-b924-383ab0d64d7b dns_nameservers:[] tags:map[] description: network_id:f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 host_routes:[]]]
[36m03:05:30.725 gohan.server.resources DEBUG [0m Create port with data map[managed_by_service:true tenant_id:0b576f6f4cbf414f829cd12f008bf08f name:common_function_gw_5c241c51-2003-407a-a239-689fabd19022_primary_port:976156ef-05b4-47f4-9497-a36531563a08 device_id:5c241c51-2003-407a-a239-689fabd19022 device_owner:network:common_function_gateway network_id:f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 segmentation_type:vlan segmentation_id:1025] started
[36m03:05:30.725 gohan.schema DEBUG [0m No properties in resource policy. Allowing all property access
[36m03:05:30.777 gohan.server.resources DEBUG [0m List network query: map[id:[f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57]] started
[36m03:05:30.827 gohan.server.resources DEBUG [0m List subnet query: map[] started
[36m03:05:30.828 gohan.server.resources DEBUG [0m List subnet query: map[] completed
[36m03:05:30.829 gohan.server.resources DEBUG [0m List network query: map[id:[f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57]] completed
03:05:30.840 gohan.db.sql INFO [0m Executing SQL query in transaction '2196ba6f-e604-48b1-94f4-1b0450dfdcfc': 'INSERT INTO `ports` (`device_id`,`name`,`managed_by_service`,`device_owner`,`binding:vif_type`,`fake_delete`,`fixed_ips`,`network_id`,`tenant_id`,`allowed_address_pairs`,`description`,`segmentation_id`,`mac_address`,`admin_state_up`,`status`,`segmentation_type`,`attached`,`id`,`tags`) VALUES (5c241c51-2003-407a-a239-689fabd19022,common_function_gw_5c241c51-2003-407a-a239-689fabd19022_primary_port:976156ef-05b4-47f4-9497-a36531563a08,true,network:common_function_gateway,vrouter,false,[{"ip_address":"169.254.0.3","subnet_id":"e1353d56-b05a-43a9-b924-383ab0d64d7b"}],f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57,0b576f6f4cbf414f829cd12f008bf08f,[],,1025,fa:16:3e:e5:f6:39,true,PENDING_CREATE,vlan,false,327f59b7-df38-4d8f-97db-d320defcab76,{})'
03:05:30.841 gohan.db.sql INFO [0m Executing SQL query in transaction '2196ba6f-e604-48b1-94f4-1b0450dfdcfc': 'INSERT INTO `events` (`path`,`timestamp`,`type`,`marked_for_deletion`,`body`,`version`) VALUES (/v2.0/ports/327f59b7-df38-4d8f-97db-d320defcab76,1494471930,create,false,"{\"admin_state_up\":true,\"allowed_address_pairs\":[],\"attached\":false,\"binding:vif_type\":\"vrouter\",\"description\":\"\",\"device_id\":\"5c241c51-2003-407a-a239-689fabd19022\",\"device_owner\":\"network:common_function_gateway\",\"fake_delete\":false,\"fixed_ips\":[{\"ip_address\":\"169.254.0.3\",\"subnet_id\":\"e1353d56-b05a-43a9-b924-383ab0d64d7b\"}],\"id\":\"327f59b7-df38-4d8f-97db-d320defcab76\",\"mac_address\":\"fa:16:3e:e5:f6:39\",\"managed_by_service\":true,\"name\":\"common_function_gw_5c241c51-2003-407a-a239-689fabd19022_primary_port:976156ef-05b4-47f4-9497-a36531563a08\",\"network_id\":\"f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57\",\"segmentation_id\":1025,\"segmentation_type\":\"vlan\",\"status\":\"PENDING_CREATE\",\"tags\":{},\"tenant_id\":\"0b576f6f4cbf414f829cd12f008bf08f\"}",1)'
[36m03:05:30.844 gohan.extension.port.post_create_in_transaction DEBUG [0m Creating logical port for port id='327f59b7-df38-4d8f-97db-d320defcab76'.
[36m03:05:30.893 gohan.server.resources DEBUG [0m Create ese_logical_port with data map[network_id:f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 tenant_id:0b576f6f4cbf414f829cd12f008bf08f tags:map[] connected_resource:common_function_gateway name:xe-0/0/3.1025 description:ESE Logical port for Port 327f59b7-df38-4d8f-97db-d320defcab76 ese_physical_port_id:976156ef-05b4-47f4-9497-a36531563a08 port_ids:[327f59b7-df38-4d8f-97db-d320defcab76] type:L2 vlan_id:1025 common_function_gateway_id:5c241c51-2003-407a-a239-689fabd19022] started
[36m03:05:30.893 gohan.schema DEBUG [0m No properties in resource policy. Allowing all property access
[36m03:05:30.948 gohan.server.resources DEBUG [0m List ese_physical_port query: map[id:[976156ef-05b4-47f4-9497-a36531563a08]] started
[36m03:05:30.950 gohan.server.resources DEBUG [0m List ese_physical_port query: map[id:[976156ef-05b4-47f4-9497-a36531563a08]] completed
[36m03:05:30.997 gohan.server.resources DEBUG [0m List network query: map[id:[f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57]] started
[36m03:05:31.045 gohan.server.resources DEBUG [0m List subnet query: map[] started
[36m03:05:31.046 gohan.server.resources DEBUG [0m List subnet query: map[] completed
[36m03:05:31.047 gohan.server.resources DEBUG [0m List network query: map[id:[f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57]] completed
03:05:31.057 gohan.db.sql INFO [0m Executing SQL query in transaction '2196ba6f-e604-48b1-94f4-1b0450dfdcfc': 'INSERT INTO `ese_logical_ports` (`tenant_id`,`name`,`ese_physical_port_id`,`network_id`,`description`,`connected_resource`,`common_function_gateway_id`,`id`,`vlan_id`,`port_ids`,`type`,`tags`,`status`) VALUES (0b576f6f4cbf414f829cd12f008bf08f,xe-0/0/3.1025,976156ef-05b4-47f4-9497-a36531563a08,f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57,ESE Logical port for Port 327f59b7-df38-4d8f-97db-d320defcab76,common_function_gateway,5c241c51-2003-407a-a239-689fabd19022,b04853c4-6ebf-441f-9093-ea4b844c4bc7,1025,["327f59b7-df38-4d8f-97db-d320defcab76"],L2,{},PENDING_CREATE)'
03:05:31.058 gohan.db.sql INFO [0m Executing SQL query in transaction '2196ba6f-e604-48b1-94f4-1b0450dfdcfc': 'INSERT INTO `events` (`body`,`version`,`path`,`timestamp`,`type`,`marked_for_deletion`) VALUES ("{\"common_function_gateway_id\":\"5c241c51-2003-407a-a239-689fabd19022\",\"connected_resource\":\"common_function_gateway\",\"description\":\"ESE Logical port for Port 327f59b7-df38-4d8f-97db-d320defcab76\",\"ese_physical_port_id\":\"976156ef-05b4-47f4-9497-a36531563a08\",\"id\":\"b04853c4-6ebf-441f-9093-ea4b844c4bc7\",\"name\":\"xe-0/0/3.1025\",\"network_id\":\"f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57\",\"port_ids\":[\"327f59b7-df38-4d8f-97db-d320defcab76\"],\"status\":\"PENDING_CREATE\",\"tags\":{},\"tenant_id\":\"0b576f6f4cbf414f829cd12f008bf08f\",\"type\":\"L2\",\"vlan_id\":1025}",1,/v2.0/ese_logical_ports/b04853c4-6ebf-441f-9093-ea4b844c4bc7,1494471931,create,false)'
[36m03:05:31.059 gohan.server.resources DEBUG [0m Create ese_logical_port completed: map[ese_logical_port:map[ese_physical_port_id:976156ef-05b4-47f4-9497-a36531563a08 port_ids:[327f59b7-df38-4d8f-97db-d320defcab76] type:L2 vlan_id:1025 tags:map[] connected_resource:common_function_gateway name:xe-0/0/3.1025 description:ESE Logical port for Port 327f59b7-df38-4d8f-97db-d320defcab76 common_function_gateway_id:5c241c51-2003-407a-a239-689fabd19022 status:PENDING_CREATE id:b04853c4-6ebf-441f-9093-ea4b844c4bc7 network_id:f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 tenant_id:0b576f6f4cbf414f829cd12f008bf08f]]
[36m03:05:31.059 gohan.extension.port.post_create_in_transaction DEBUG [0m ESE logical port (id='b04853c4-6ebf-441f-9093-ea4b844c4bc7') created successfully.
03:05:31.060 gohan.db.sql INFO [0m Executing SQL query in transaction '2196ba6f-e604-48b1-94f4-1b0450dfdcfc': 'UPDATE `ports` SET `device_owner` = network:common_function_gateway, `binding:vif_type` = vrouter, `network_id` = f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `allowed_address_pairs` = [], `description` = , `segmentation_id` = 1025, `mac_address` = fa:16:3e:e5:f6:39, `fake_delete` = false, `fixed_ips` = [{"ip_address":"169.254.0.3","subnet_id":"e1353d56-b05a-43a9-b924-383ab0d64d7b"}], `segmentation_type` = vlan, `admin_state_up` = true, `status` = PENDING_CREATE, `tags` = {}, `attached` = false, `id` = 327f59b7-df38-4d8f-97db-d320defcab76, `name` = common_function_gw_5c241c51-2003-407a-a239-689fabd19022_primary_port:976156ef-05b4-47f4-9497-a36531563a08, `managed_by_service` = true, `ese_logical_port_id` = b04853c4-6ebf-441f-9093-ea4b844c4bc7, `device_id` = 5c241c51-2003-407a-a239-689fabd19022 WHERE id = 327f59b7-df38-4d8f-97db-d320defcab76'
[36m03:05:31.062 gohan.server.resources DEBUG [0m Create port completed: map[port:map[mac_address:fa:16:3e:e5:f6:39 ese_logical_port_id:b04853c4-6ebf-441f-9093-ea4b844c4bc7 name:common_function_gw_5c241c51-2003-407a-a239-689fabd19022_primary_port:976156ef-05b4-47f4-9497-a36531563a08 device_id:5c241c51-2003-407a-a239-689fabd19022 segmentation_type:vlan binding:vif_type:vrouter description: fake_delete:false admin_state_up:true fixed_ips:[map[ip_address:169.254.0.3 subnet_id:e1353d56-b05a-43a9-b924-383ab0d64d7b]] segmentation_id:1025 managed_by_service:true tenant_id:0b576f6f4cbf414f829cd12f008bf08f id:327f59b7-df38-4d8f-97db-d320defcab76 tags:map[] device_owner:network:common_function_gateway allowed_address_pairs:[] status:PENDING_CREATE attached:false network_id:f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57]]
[36m03:05:31.110 gohan.server.resources DEBUG [0m Create port with data map[name:common_function_gw_5c241c51-2003-407a-a239-689fabd19022_secondary_port:5b2dee2e-7420-4cd4-b270-5081eb9eb371 device_id:5c241c51-2003-407a-a239-689fabd19022 device_owner:network:common_function_gateway network_id:f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 segmentation_type:vlan segmentation_id:1025 managed_by_service:true tenant_id:0b576f6f4cbf414f829cd12f008bf08f] started
[36m03:05:31.110 gohan.schema DEBUG [0m No properties in resource policy. Allowing all property access
[36m03:05:31.162 gohan.server.resources DEBUG [0m List network query: map[id:[f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57]] started
[36m03:05:31.211 gohan.server.resources DEBUG [0m List subnet query: map[] started
[36m03:05:31.212 gohan.server.resources DEBUG [0m List subnet query: map[] completed
[36m03:05:31.213 gohan.server.resources DEBUG [0m List network query: map[id:[f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57]] completed
03:05:31.232 gohan.db.sql INFO [0m Executing SQL query in transaction '2196ba6f-e604-48b1-94f4-1b0450dfdcfc': 'INSERT INTO `ports` (`fake_delete`,`fixed_ips`,`network_id`,`tenant_id`,`allowed_address_pairs`,`description`,`segmentation_id`,`mac_address`,`admin_state_up`,`status`,`segmentation_type`,`attached`,`id`,`tags`,`device_id`,`name`,`managed_by_service`,`device_owner`,`binding:vif_type`) VALUES (false,[{"ip_address":"169.254.0.4","subnet_id":"e1353d56-b05a-43a9-b924-383ab0d64d7b"}],f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57,0b576f6f4cbf414f829cd12f008bf08f,[],,1025,fa:16:3e:0c:b0:eb,true,PENDING_CREATE,vlan,false,a778c668-6ccb-4d46-9ec3-956693262d63,{},5c241c51-2003-407a-a239-689fabd19022,common_function_gw_5c241c51-2003-407a-a239-689fabd19022_secondary_port:5b2dee2e-7420-4cd4-b270-5081eb9eb371,true,network:common_function_gateway,vrouter)'
03:05:31.233 gohan.db.sql INFO [0m Executing SQL query in transaction '2196ba6f-e604-48b1-94f4-1b0450dfdcfc': 'INSERT INTO `events` (`path`,`timestamp`,`type`,`marked_for_deletion`,`body`,`version`) VALUES (/v2.0/ports/a778c668-6ccb-4d46-9ec3-956693262d63,1494471931,create,false,"{\"admin_state_up\":true,\"allowed_address_pairs\":[],\"attached\":false,\"binding:vif_type\":\"vrouter\",\"description\":\"\",\"device_id\":\"5c241c51-2003-407a-a239-689fabd19022\",\"device_owner\":\"network:common_function_gateway\",\"fake_delete\":false,\"fixed_ips\":[{\"ip_address\":\"169.254.0.4\",\"subnet_id\":\"e1353d56-b05a-43a9-b924-383ab0d64d7b\"}],\"id\":\"a778c668-6ccb-4d46-9ec3-956693262d63\",\"mac_address\":\"fa:16:3e:0c:b0:eb\",\"managed_by_service\":true,\"name\":\"common_function_gw_5c241c51-2003-407a-a239-689fabd19022_secondary_port:5b2dee2e-7420-4cd4-b270-5081eb9eb371\",\"network_id\":\"f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57\",\"segmentation_id\":1025,\"segmentation_type\":\"vlan\",\"status\":\"PENDING_CREATE\",\"tags\":{},\"tenant_id\":\"0b576f6f4cbf414f829cd12f008bf08f\"}",1)'
[36m03:05:31.236 gohan.extension.port.post_create_in_transaction DEBUG [0m Creating logical port for port id='a778c668-6ccb-4d46-9ec3-956693262d63'.
[36m03:05:31.284 gohan.server.resources DEBUG [0m Create ese_logical_port with data map[network_id:f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 port_ids:[a778c668-6ccb-4d46-9ec3-956693262d63] tags:map[] name:xe-0/0/4.1025 description:ESE Logical port for Port a778c668-6ccb-4d46-9ec3-956693262d63 type:L2 vlan_id:1025 connected_resource:common_function_gateway common_function_gateway_id:5c241c51-2003-407a-a239-689fabd19022 ese_physical_port_id:5b2dee2e-7420-4cd4-b270-5081eb9eb371 tenant_id:0b576f6f4cbf414f829cd12f008bf08f] started
[36m03:05:31.285 gohan.schema DEBUG [0m No properties in resource policy. Allowing all property access
[36m03:05:31.338 gohan.server.resources DEBUG [0m List ese_physical_port query: map[id:[5b2dee2e-7420-4cd4-b270-5081eb9eb371]] started
[36m03:05:31.340 gohan.server.resources DEBUG [0m List ese_physical_port query: map[id:[5b2dee2e-7420-4cd4-b270-5081eb9eb371]] completed
[36m03:05:31.389 gohan.server.resources DEBUG [0m List network query: map[id:[f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57]] started
[36m03:05:31.439 gohan.server.resources DEBUG [0m List subnet query: map[] started
[36m03:05:31.441 gohan.server.resources DEBUG [0m List subnet query: map[] completed
[36m03:05:31.443 gohan.server.resources DEBUG [0m List network query: map[id:[f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57]] completed
03:05:31.451 gohan.db.sql INFO [0m Executing SQL query in transaction '2196ba6f-e604-48b1-94f4-1b0450dfdcfc': 'INSERT INTO `ese_logical_ports` (`port_ids`,`type`,`tags`,`status`,`tenant_id`,`name`,`ese_physical_port_id`,`network_id`,`description`,`connected_resource`,`common_function_gateway_id`,`id`,`vlan_id`) VALUES (["a778c668-6ccb-4d46-9ec3-956693262d63"],L2,{},PENDING_CREATE,0b576f6f4cbf414f829cd12f008bf08f,xe-0/0/4.1025,5b2dee2e-7420-4cd4-b270-5081eb9eb371,f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57,ESE Logical port for Port a778c668-6ccb-4d46-9ec3-956693262d63,common_function_gateway,5c241c51-2003-407a-a239-689fabd19022,9c601c38-a854-459d-aec2-433873b3a4e6,1025)'
03:05:31.452 gohan.db.sql INFO [0m Executing SQL query in transaction '2196ba6f-e604-48b1-94f4-1b0450dfdcfc': 'INSERT INTO `events` (`path`,`timestamp`,`type`,`marked_for_deletion`,`body`,`version`) VALUES (/v2.0/ese_logical_ports/9c601c38-a854-459d-aec2-433873b3a4e6,1494471931,create,false,"{\"common_function_gateway_id\":\"5c241c51-2003-407a-a239-689fabd19022\",\"connected_resource\":\"common_function_gateway\",\"description\":\"ESE Logical port for Port a778c668-6ccb-4d46-9ec3-956693262d63\",\"ese_physical_port_id\":\"5b2dee2e-7420-4cd4-b270-5081eb9eb371\",\"id\":\"9c601c38-a854-459d-aec2-433873b3a4e6\",\"name\":\"xe-0/0/4.1025\",\"network_id\":\"f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57\",\"port_ids\":[\"a778c668-6ccb-4d46-9ec3-956693262d63\"],\"status\":\"PENDING_CREATE\",\"tags\":{},\"tenant_id\":\"0b576f6f4cbf414f829cd12f008bf08f\",\"type\":\"L2\",\"vlan_id\":1025}",1)'
[36m03:05:31.453 gohan.server.resources DEBUG [0m Create ese_logical_port completed: map[ese_logical_port:map[vlan_id:1025 connected_resource:common_function_gateway common_function_gateway_id:5c241c51-2003-407a-a239-689fabd19022 ese_physical_port_id:5b2dee2e-7420-4cd4-b270-5081eb9eb371 tenant_id:0b576f6f4cbf414f829cd12f008bf08f type:L2 port_ids:[a778c668-6ccb-4d46-9ec3-956693262d63] tags:map[] id:9c601c38-a854-459d-aec2-433873b3a4e6 status:PENDING_CREATE name:xe-0/0/4.1025 description:ESE Logical port for Port a778c668-6ccb-4d46-9ec3-956693262d63 network_id:f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57]]
[36m03:05:31.453 gohan.extension.port.post_create_in_transaction DEBUG [0m ESE logical port (id='9c601c38-a854-459d-aec2-433873b3a4e6') created successfully.
03:05:31.454 gohan.db.sql INFO [0m Executing SQL query in transaction '2196ba6f-e604-48b1-94f4-1b0450dfdcfc': 'UPDATE `ports` SET `device_owner` = network:common_function_gateway, `binding:vif_type` = vrouter, `network_id` = f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `allowed_address_pairs` = [], `description` = , `segmentation_id` = 1025, `mac_address` = fa:16:3e:0c:b0:eb, `fake_delete` = false, `fixed_ips` = [{"ip_address":"169.254.0.4","subnet_id":"e1353d56-b05a-43a9-b924-383ab0d64d7b"}], `segmentation_type` = vlan, `admin_state_up` = true, `status` = PENDING_CREATE, `tags` = {}, `attached` = false, `id` = a778c668-6ccb-4d46-9ec3-956693262d63, `name` = common_function_gw_5c241c51-2003-407a-a239-689fabd19022_secondary_port:5b2dee2e-7420-4cd4-b270-5081eb9eb371, `managed_by_service` = true, `ese_logical_port_id` = 9c601c38-a854-459d-aec2-433873b3a4e6, `device_id` = 5c241c51-2003-407a-a239-689fabd19022 WHERE id = a778c668-6ccb-4d46-9ec3-956693262d63'
[36m03:05:31.456 gohan.server.resources DEBUG [0m Create port completed: map[port:map[status:PENDING_CREATE device_id:5c241c51-2003-407a-a239-689fabd19022 tenant_id:0b576f6f4cbf414f829cd12f008bf08f id:a778c668-6ccb-4d46-9ec3-956693262d63 allowed_address_pairs:[] attached:false tags:map[] device_owner:network:common_function_gateway network_id:f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 managed_by_service:true binding:vif_type:vrouter segmentation_id:1025 fake_delete:false mac_address:fa:16:3e:0c:b0:eb ese_logical_port_id:9c601c38-a854-459d-aec2-433873b3a4e6 fixed_ips:[map[subnet_id:e1353d56-b05a-43a9-b924-383ab0d64d7b ip_address:169.254.0.4]] name:common_function_gw_5c241c51-2003-407a-a239-689fabd19022_secondary_port:5b2dee2e-7420-4cd4-b270-5081eb9eb371 segmentation_type:vlan description: admin_state_up:true]]
03:05:31.456 gohan.db.sql INFO [0m Executing SQL query in transaction '2196ba6f-e604-48b1-94f4-1b0450dfdcfc': 'INSERT INTO `common_function_gateways` (`nat_ip`,`downlink_interface_id`,`subnet_id`,`status`,`network_id`,`logical_tunnel_unit_service`,`vrf_name`,`tenant_id`,`description`,`common_functions`,`secondary_logical_interface_name`,`name`,`vlan_id`,`common_function_pool_id`,`primary_logical_interface_name`,`id`,`logical_tunnel_unit_user`) VALUES (100.64.0.10,372ed357-e622-41fb-a613-076d332838e2,e1353d56-b05a-43a9-b924-383ab0d64d7b,PENDING_CREATE,f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57,11025,vrf_gw_sample-ha-router-downlink_1025,0b576f6f4cbf414f829cd12f008bf08f,,[{"common_function_id":"18c64ec9-78c2-43ac-ae0d-48fa9b6c0858"},{"common_function_id":"c1be08ee-7cf2-4c84-8fe7-7e891d17bc71"}],ae0.1025,T0011CF000,1025,cca32fd7-2430-4acc-87e9-a7b527e9918d,ae0.1025,5c241c51-2003-407a-a239-689fabd19022,1025)'
03:05:31.457 gohan.db.sql INFO [0m Executing SQL query in transaction '2196ba6f-e604-48b1-94f4-1b0450dfdcfc': 'INSERT INTO `events` (`version`,`path`,`timestamp`,`type`,`marked_for_deletion`,`body`) VALUES (1,/v2.0/common_function_gateways/5c241c51-2003-407a-a239-689fabd19022,1494471931,create,false,"{\"common_function_pool_id\":\"cca32fd7-2430-4acc-87e9-a7b527e9918d\",\"common_functions\":[{\"common_function_id\":\"18c64ec9-78c2-43ac-ae0d-48fa9b6c0858\"},{\"common_function_id\":\"c1be08ee-7cf2-4c84-8fe7-7e891d17bc71\"}],\"description\":\"\",\"downlink_interface_id\":\"372ed357-e622-41fb-a613-076d332838e2\",\"id\":\"5c241c51-2003-407a-a239-689fabd19022\",\"logical_tunnel_unit_service\":\"11025\",\"logical_tunnel_unit_user\":\"1025\",\"name\":\"T0011CF000\",\"nat_ip\":\"100.64.0.10\",\"network_id\":\"f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57\",\"primary_logical_interface_name\":\"ae0.1025\",\"secondary_logical_interface_name\":\"ae0.1025\",\"status\":\"PENDING_CREATE\",\"subnet_id\":\"e1353d56-b05a-43a9-b924-383ab0d64d7b\",\"tenant_id\":\"0b576f6f4cbf414f829cd12f008bf08f\",\"vlan_id\":\"1025\",\"vrf_name\":\"vrf_gw_sample-ha-router-downlink_1025\"}")'
[36m03:05:31.467 gohan.server.resources DEBUG [0m Create common_function_gateway completed: map[common_function_gateway:map[logical_tunnel_unit_service:11025 network_id:f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 name:T0011CF000 tenant_id:0b576f6f4cbf414f829cd12f008bf08f common_functions:[map[common_function_id:18c64ec9-78c2-43ac-ae0d-48fa9b6c0858] map[common_function_id:c1be08ee-7cf2-4c84-8fe7-7e891d17bc71]] downlink_interface_id:372ed357-e622-41fb-a613-076d332838e2 secondary_logical_interface_name:ae0.1025 vlan_id:1025 subnet_id:e1353d56-b05a-43a9-b924-383ab0d64d7b common_function_pool_id:cca32fd7-2430-4acc-87e9-a7b527e9918d logical_tunnel_unit_user:1025 nat_ip:100.64.0.10 id:5c241c51-2003-407a-a239-689fabd19022 status:PENDING_CREATE description: primary_logical_interface_name:ae0.1025 vrf_name:vrf_gw_sample-ha-router-downlink_1025]]
[36m03:05:31.467 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[975]]
[36m03:05:31.467 gohan.server.middleware DEBUG [0m Response body: {
  "common_function_gateway": {
    "common_function_pool_id": "cca32fd7-2430-4acc-87e9-a7b527e9918d",
    "common_functions": [
      {
        "common_function_id": "18c64ec9-78c2-43ac-ae0d-48fa9b6c0858"
      },
      {
        "common_function_id": "c1be08ee-7cf2-4c84-8fe7-7e891d17bc71"
      }
    ],
    "description": "",
    "downlink_interface_id": "372ed357-e622-41fb-a613-076d332838e2",
    "id": "5c241c51-2003-407a-a239-689fabd19022",
    "logical_tunnel_unit_service": "11025",
    "logical_tunnel_unit_user": "1025",
    "name": "T0011CF000",
    "nat_ip": "100.64.0.10",
    "network_id": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57",
    "primary_logical_interface_name": "ae0.1025",
    "secondary_logical_interface_name": "ae0.1025",
    "status": "PENDING_CREATE",
    "subnet_id": "e1353d56-b05a-43a9-b924-383ab0d64d7b",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
    "vlan_id": "1025",
    "vrf_name": "vrf_gw_sample-ha-router-downlink_1025"
  }
}
03:05:31.467 gohan.server.middleware INFO [0m Completed 201 Created in 1.293789989s
[36m03:05:31.469 gohan.server.sync DEBUG [0m Processing event 77 - update
03:05:31.470 gohan.server.sync INFO [0m Setting config with version 2 to /config//v2.0/nat_ip_pools/75733e12-47f7-49ea-9939-2819df6c8253
[36m03:05:31.474 gohan.server.sync DEBUG [0m Deleting event 77
03:05:31.475 gohan.db.sql INFO [0m Executing SQL query in transaction 'fc221cda-968f-493a-b799-41db2a4ce07e': 'DELETE FROM `events` WHERE id = 77'
[36m03:05:31.475 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:05:31.488 gohan.server DEBUG [0m State event update received: set /state/v2.0/nat_ip_pools/75733e12-47f7-49ea-9939-2819df6c8253 map[error: state:map[worker_state:READ_COMPLETE] version:2]
03:05:31.489 gohan.server.sync INFO [0m StateUpdate for set /state/v2.0/nat_ip_pools/75733e12-47f7-49ea-9939-2819df6c8253 map[error: state:map[worker_state:READ_COMPLETE] version:2] started
[36m03:05:31.491 gohan.server.sync DEBUG [0m Processing event 78 - create
03:05:31.491 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/networks/f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57
[36m03:05:31.499 gohan.server.sync DEBUG [0m Deleting event 78
03:05:31.502 gohan.sync INFO [0m Locked gohan/cluster/lock/state/v2.0/nat_ip_pools/75733e12-47f7-49ea-9939-2819df6c8253 with index 421
03:05:31.507 gohan.db.sql INFO [0m Executing SQL query in transaction 'a4d359b3-62d6-4ea5-8dfc-73dbf162b9e7': 'DELETE FROM `events` WHERE id = 78'
[36m03:05:31.507 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:05:31.523 gohan.server.sync DEBUG [0m Processing event 79 - create
03:05:31.523 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/subnets/e1353d56-b05a-43a9-b924-383ab0d64d7b
[36m03:05:31.531 gohan.server.sync DEBUG [0m Deleting event 79
03:05:31.533 gohan.db.sql INFO [0m Executing SQL query in transaction '4a856b2c-21fa-4038-812e-efe91b2a8271': 'DELETE FROM `events` WHERE id = 79'
[36m03:05:31.534 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:05:31.550 gohan.server.sync DEBUG [0m Processing event 80 - create
03:05:31.550 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/ports/bbaac433-1023-4660-88f0-ccd8c2c26c89
[36m03:05:31.562 gohan.server.sync DEBUG [0m Deleting event 80
03:05:31.564 gohan.db.sql INFO [0m Executing SQL query in transaction '3b943e18-f8e0-42b7-bcef-0447a9a4276f': 'DELETE FROM `events` WHERE id = 80'
[36m03:05:31.565 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
03:05:31.563 gohan.db.sql INFO [0m Executing SQL query in transaction 'bd6da4c0-204c-48dd-bcce-5bee0999937c': 'UPDATE `nat_ip_pools` SET `name` = sample-nat-ip-pool, `description` = , `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `ip_ranges` = [{"end":"100.64.0.254","start":"100.64.0.10"}], `ip_allocation_state` = gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB/8=, `ha_router_id` = 3a3d7a43-d749-44e8-90bc-de7b37d1d258, `common_function_pool_id` = cca32fd7-2430-4acc-87e9-a7b527e9918d, `id` = 75733e12-47f7-49ea-9939-2819df6c8253, `state_version` = 2, `monitoring_version` = 0, `state_error` = , `state` = {"error":"","state":{"worker_state":"READ_COMPLETE"}}, `state_monitoring` = {}, `marked_for_deletion` = 0 WHERE id = 75733e12-47f7-49ea-9939-2819df6c8253'
[36m03:05:31.582 gohan.server DEBUG [0m State event update received: set /state/v2.0/ports/bbaac433-1023-4660-88f0-ccd8c2c26c89 map[version:1 error: state:map[worker_state:READ_COMPLETE]]
03:05:31.583 gohan.server.sync INFO [0m StateUpdate for set /state/v2.0/ports/bbaac433-1023-4660-88f0-ccd8c2c26c89 map[error: state:map[worker_state:READ_COMPLETE] version:1] started
[36m03:05:31.654 gohan.server.sync DEBUG [0m Processing event 81 - create
03:05:31.654 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/ports/327f59b7-df38-4d8f-97db-d320defcab76
[36m03:05:31.663 gohan.server.sync DEBUG [0m Deleting event 81
03:05:31.664 gohan.db.sql INFO [0m Executing SQL query in transaction '014179ef-bd4a-4447-8047-5d45f3a05451': 'DELETE FROM `events` WHERE id = 81'
[36m03:05:31.664 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
03:05:31.667 gohan.sync INFO [0m Locked gohan/cluster/lock/state/v2.0/ports/bbaac433-1023-4660-88f0-ccd8c2c26c89 with index 432
03:05:31.684 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/state/v2.0/nat_ip_pools/75733e12-47f7-49ea-9939-2819df6c8253 with index 421
[36m03:05:31.691 gohan.server.sync DEBUG [0m Processing event 82 - create
03:05:31.691 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/ese_logical_ports/b04853c4-6ebf-441f-9093-ea4b844c4bc7
03:05:31.702 gohan.sync INFO [0m Path gohan/cluster/lock/state/v2.0/nat_ip_pools/75733e12-47f7-49ea-9939-2819df6c8253 already unlocked or not locked
[36m03:05:31.702 gohan.server.sync DEBUG [0m Deleting event 82
03:05:31.703 gohan.db.sql INFO [0m Executing SQL query in transaction '0c538179-ed99-42cf-b681-2240baf67dea': 'DELETE FROM `events` WHERE id = 82'
[36m03:05:31.704 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:05:31.716 gohan.server.sync DEBUG [0m Processing event 83 - create
03:05:31.716 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/ports/a778c668-6ccb-4d46-9ec3-956693262d63
[36m03:05:31.721 gohan.server.sync DEBUG [0m Deleting event 83
03:05:31.723 gohan.db.sql INFO [0m Executing SQL query in transaction 'cf307c30-a2b2-4c51-9f8e-f4dceda8963a': 'DELETE FROM `events` WHERE id = 83'
[36m03:05:31.724 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
03:05:31.725 gohan.db.sql INFO [0m Executing SQL query in transaction 'ff2e7232-9fb1-4feb-9a1c-34113653b1e9': 'UPDATE `ports` SET `attached` = false, `id` = bbaac433-1023-4660-88f0-ccd8c2c26c89, `tags` = {}, `ese_logical_port_id` = <nil>, `device_id` = e1353d56-b05a-43a9-b924-383ab0d64d7b, `name` = dhcp-server-port, `managed_by_service` = false, `device_owner` = network:dhcp, `binding:vif_type` = vrouter, `mac_address` = 00:00:5e:00:01:00, `fake_delete` = false, `fixed_ips` = [{"ip_address":"169.254.0.2","subnet_id":"e1353d56-b05a-43a9-b924-383ab0d64d7b"}], `network_id` = f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `allowed_address_pairs` = [], `description` = DHCP Server Port, `segmentation_id` = <nil>, `admin_state_up` = true, `status` = ACTIVE, `segmentation_type` = <nil>, `state_version` = 1, `monitoring_version` = 0, `state_error` = , `state` = {"error":"","state":{"worker_state":"READ_COMPLETE"}}, `state_monitoring` = {}, `marked_for_deletion` = 0 WHERE id = bbaac433-1023-4660-88f0-ccd8c2c26c89'
03:05:31.727 gohan.extension.port.post_state_update_in_transaction INFO [0m Config version: 1, State version: 1, Monitoring version: 0
[36m03:05:31.743 gohan.server.sync DEBUG [0m Processing event 84 - create
03:05:31.743 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/ese_logical_ports/9c601c38-a854-459d-aec2-433873b3a4e6
[36m03:05:31.744 gohan.server.sync DEBUG [0m Deleting event 84
03:05:31.748 gohan.db.sql INFO [0m Executing SQL query in transaction '636a0386-c97e-4c0f-9c19-f045b2df0e7a': 'DELETE FROM `events` WHERE id = 84'
[36m03:05:31.748 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
03:05:31.764 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/state/v2.0/ports/bbaac433-1023-4660-88f0-ccd8c2c26c89 with index 432
[36m03:05:31.772 gohan.server.sync DEBUG [0m Processing event 85 - create
03:05:31.772 gohan.server.sync INFO [0m Setting config with version 1 to /config//v2.0/common_function_gateways/5c241c51-2003-407a-a239-689fabd19022
03:05:31.783 gohan.sync INFO [0m Path gohan/cluster/lock/state/v2.0/ports/bbaac433-1023-4660-88f0-ccd8c2c26c89 already unlocked or not locked
[36m03:05:31.783 gohan.server.sync DEBUG [0m Deleting event 85
03:05:31.785 gohan.db.sql INFO [0m Executing SQL query in transaction '4d8a7c08-d453-47bc-a5fa-8d5954aa50de': 'DELETE FROM `events` WHERE id = 85'
[36m03:05:31.786 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
[36m03:05:34.067 gohan.server DEBUG [0m State event update received: set /state/v2.0/networks/f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 map[error: state:map[worker_state:CREATE_COMPLETED heat_outputs:[{"output_value": "[]", "description": "The name of the virtual network.", "output_key": "route_targets"}, {"output_value": "default-domain:admin:f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57", "description": "The FQ name of the virtual network.", "output_key": "fq_name"}, {"output_value": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57", "description": "A unique id for the virtual network.", "output_key": "id"}, {"output_value": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57", "description": "The name of the virtual network.", "output_key": "name"}] state_monitoring:{"network": "ACTIVE"}] version:1]
03:05:34.068 gohan.server.sync INFO [0m StateUpdate for set /state/v2.0/networks/f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 map[error: state:map[heat_outputs:[{"output_value": "[]", "description": "The name of the virtual network.", "output_key": "route_targets"}, {"output_value": "default-domain:admin:f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57", "description": "The FQ name of the virtual network.", "output_key": "fq_name"}, {"output_value": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57", "description": "A unique id for the virtual network.", "output_key": "id"}, {"output_value": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57", "description": "The name of the virtual network.", "output_key": "name"}] state_monitoring:{"network": "ACTIVE"} worker_state:CREATE_COMPLETED] version:1] started
03:05:34.076 gohan.sync INFO [0m Locked gohan/cluster/lock/state/v2.0/networks/f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 with index 508
03:05:34.137 gohan.db.sql INFO [0m Executing SQL query in transaction '3503406d-48cd-4b40-8f6b-79d0b0b63a52': 'UPDATE `networks` SET `subnets` = [], `tags` = {}, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `description` = , `shared` = false, `admin_state_up` = true, `id` = f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57, `name` = common_function_gw_access_5c241c51-2003-407a-a239-689fabd19022, `plane` = data, `status` = PENDING_CREATE, `state_version` = 1, `monitoring_version` = 0, `state_error` = , `state` = {"error":"","state":{"heat_outputs":"[{\"output_value\": \"[]\", \"description\": \"The name of the virtual network.\", \"output_key\": \"route_targets\"}, {\"output_value\": \"default-domain:admin:f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57\", \"description\": \"The FQ name of the virtual network.\", \"output_key\": \"fq_name\"}, {\"output_value\": \"f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57\", \"description\": \"A unique id for the virtual network.\", \"output_key\": \"id\"}, {\"output_value\": \"f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57\", \"description\": \"The name of the virtual network.\", \"output_key\": \"name\"}]","state_monitoring":"{\"network\": \"ACTIVE\"}","worker_state":"CREATE_COMPLETED"}}, `state_monitoring` = {}, `marked_for_deletion` = 0 WHERE id = f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57'
03:05:34.140 gohan.extension.network.post_state_update_in_transaction INFO [0m Config version: 1, State version: 1, Monitoring version: 0
03:05:34.140 gohan.extension.network.post_state_update_in_transaction INFO [0m Reading monitoring data from worker state: {"network": "ACTIVE"}
03:05:34.143 gohan.db.sql INFO [0m Executing SQL query in transaction '3503406d-48cd-4b40-8f6b-79d0b0b63a52': 'UPDATE `networks` SET `id` = f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57, `name` = common_function_gw_access_5c241c51-2003-407a-a239-689fabd19022, `plane` = data, `status` = ACTIVE, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `description` = , `shared` = false, `admin_state_up` = true, `subnets` = [], `tags` = {} WHERE id = f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57'
03:05:34.146 gohan.extension.network.post_state_update_in_transaction INFO [0m Starting billing resource: {"config_version":1,"id":"0613a7ba-47ff-4655-9488-54ed8912443a","info":{},"resource_id":"f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57","resource_type":"network","tenant_id":"0b576f6f4cbf414f829cd12f008bf08f","unique_resource_id":"f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57"} at 1494471934
03:05:34.147 gohan.db.sql INFO [0m Executing SQL query in transaction '3503406d-48cd-4b40-8f6b-79d0b0b63a52': 'UPDATE `billing_resources` SET `resource_type` = network, `resource_id` = f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57, `config_version` = 1, `started` = 1.494471934e+09, `parent_billing_id` = <nil>, `ended` = <nil>, `id` = 0613a7ba-47ff-4655-9488-54ed8912443a, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `info` = {}, `unique_resource_id` = f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 WHERE id = 0613a7ba-47ff-4655-9488-54ed8912443a'
[36m03:05:34.147 gohan.server.sync DEBUG [0m Skipping event logging for schema: billing_resource
03:05:34.163 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/state/v2.0/networks/f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 with index 508
Endpoint for service monitoring not found.
[31m03:05:34.165 gohan.extension.network.post_state_update ERROR [0m No monitoring endpoint found for monitoring
03:05:34.175 gohan.sync INFO [0m Path gohan/cluster/lock/state/v2.0/networks/f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 already unlocked or not locked
[36m03:05:34.400 gohan.server DEBUG [0m Monitoring event update received: set /monitoring/v2.0/er_physical_interfaces/96c3629b-9bfb-4d54-adc1-750d024c2858 map[interface:UP version:1]
03:05:34.400 gohan.server.sync INFO [0m MonitoringUpdate for set /monitoring/v2.0/er_physical_interfaces/96c3629b-9bfb-4d54-adc1-750d024c2858 map[interface:UP version:1] started
03:05:34.404 gohan.sync INFO [0m Locked gohan/cluster/lock/monitoring/v2.0/er_physical_interfaces/96c3629b-9bfb-4d54-adc1-750d024c2858 with index 517
03:05:34.450 gohan.db.sql INFO [0m Executing SQL query in transaction 'fedaac56-4be5-4baf-a08d-08df75da8767': 'UPDATE `er_physical_interfaces` SET `name` = ae0, `description` = , `device_id` = 769b5e3b-3320-41ec-9be0-4567b50f1aab, `connected_ese_port_id` = 5b2dee2e-7420-4cd4-b270-5081eb9eb371, `status` = ACTIVE, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `id` = 96c3629b-9bfb-4d54-adc1-750d024c2858, `state_version` = 1, `monitoring_version` = 1, `state_error` = , `state` = {"error":"","state":{"state_monitoring":"{\"interface\": \"ACTIVE\"}","worker_state":"CREATE_COMPLETED"}}, `state_monitoring` = {"interface":"UP"}, `marked_for_deletion` = 0 WHERE id = 96c3629b-9bfb-4d54-adc1-750d024c2858'
03:05:34.452 gohan.extension.er_physical_interface.post_monitoring_update_in_transaction INFO [0m Config version: 1, State version: 1, Monitoring version: 1
03:05:34.452 gohan.extension.er_physical_interface.post_monitoring_update_in_transaction INFO [0m Reading monitoring data from worker state: {"interface": "ACTIVE"}
03:05:34.452 gohan.extension.er_physical_interface.post_monitoring_update_in_transaction INFO [0m Overriding monitoring data with data from monitoring backend: {"interface":"UP"}
03:05:34.469 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/monitoring/v2.0/er_physical_interfaces/96c3629b-9bfb-4d54-adc1-750d024c2858 with index 517
03:05:34.469 gohan.server.sync INFO [0m MonitoringUpdate for set /monitoring/v2.0/er_physical_interfaces/96c3629b-9bfb-4d54-adc1-750d024c2858 completed
03:05:34.479 gohan.sync INFO [0m Path gohan/cluster/lock/monitoring/v2.0/er_physical_interfaces/96c3629b-9bfb-4d54-adc1-750d024c2858 already unlocked or not locked
[36m03:05:34.583 gohan.server DEBUG [0m Monitoring event update received: set /monitoring/v2.0/networks/f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 map[network:UP version:1]
03:05:34.583 gohan.server.sync INFO [0m MonitoringUpdate for set /monitoring/v2.0/networks/f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 map[network:UP version:1] started
03:05:34.596 gohan.sync INFO [0m Locked gohan/cluster/lock/monitoring/v2.0/networks/f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 with index 521
03:05:34.643 gohan.db.sql INFO [0m Executing SQL query in transaction '6b304062-bf6a-4601-a214-2e2267799ae5': 'UPDATE `networks` SET `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `description` = , `shared` = false, `admin_state_up` = true, `id` = f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57, `name` = common_function_gw_access_5c241c51-2003-407a-a239-689fabd19022, `plane` = data, `status` = ACTIVE, `subnets` = [], `tags` = {}, `state_version` = 1, `monitoring_version` = 1, `state_error` = , `state` = {"error":"","state":{"heat_outputs":"[{\"output_value\": \"[]\", \"description\": \"The name of the virtual network.\", \"output_key\": \"route_targets\"}, {\"output_value\": \"default-domain:admin:f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57\", \"description\": \"The FQ name of the virtual network.\", \"output_key\": \"fq_name\"}, {\"output_value\": \"f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57\", \"description\": \"A unique id for the virtual network.\", \"output_key\": \"id\"}, {\"output_value\": \"f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57\", \"description\": \"The name of the virtual network.\", \"output_key\": \"name\"}]","state_monitoring":"{\"network\": \"ACTIVE\"}","worker_state":"CREATE_COMPLETED"}}, `state_monitoring` = {"network":"UP"}, `marked_for_deletion` = 0 WHERE id = f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57'
03:05:34.646 gohan.extension.network.post_monitoring_update_in_transaction INFO [0m Config version: 1, State version: 1, Monitoring version: 1
03:05:34.646 gohan.extension.network.post_monitoring_update_in_transaction INFO [0m Reading monitoring data from worker state: {"network": "ACTIVE"}
03:05:34.646 gohan.extension.network.post_monitoring_update_in_transaction INFO [0m Overriding monitoring data with data from monitoring backend: {"network":"UP"}
03:05:34.655 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/monitoring/v2.0/networks/f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 with index 521
03:05:34.656 gohan.server.sync INFO [0m MonitoringUpdate for set /monitoring/v2.0/networks/f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 completed
03:05:34.670 gohan.sync INFO [0m Path gohan/cluster/lock/monitoring/v2.0/networks/f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 already unlocked or not locked
[36m03:05:36.230 gohan.server DEBUG [0m State event update received: set /state/v2.0/subnets/e1353d56-b05a-43a9-b924-383ab0d64d7b map[error: state:map[heat_outputs:[{"output_value": "169.254.0.0/17", "description": "IP prefix of local subnet.", "output_key": "ip_prefix"}, {"output_value": "e1353d56-b05a-43a9-b924-383ab0d64d7b", "description": "The name of the local subnet.", "output_key": "name"}, {"output_value": "0.0.0.0", "description": "Default gateway of local subnet.", "output_key": "default_gateway"}, {"output_value": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57", "description": "A unique id for the network.", "output_key": "network_id"}, {"output_value": "aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa", "description": "IPAM this local subnet uses.", "output_key": "ipam"}, {"output_value": "9e61b626-a866-4ba5-b1c7-01935fdac3f4", "description": "A unique id for the local subnet.", "output_key": "id"}] worker_state:CREATE_COMPLETED] version:1]
03:05:36.230 gohan.server.sync INFO [0m StateUpdate for set /state/v2.0/subnets/e1353d56-b05a-43a9-b924-383ab0d64d7b map[error: state:map[heat_outputs:[{"output_value": "169.254.0.0/17", "description": "IP prefix of local subnet.", "output_key": "ip_prefix"}, {"output_value": "e1353d56-b05a-43a9-b924-383ab0d64d7b", "description": "The name of the local subnet.", "output_key": "name"}, {"output_value": "0.0.0.0", "description": "Default gateway of local subnet.", "output_key": "default_gateway"}, {"output_value": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57", "description": "A unique id for the network.", "output_key": "network_id"}, {"output_value": "aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa", "description": "IPAM this local subnet uses.", "output_key": "ipam"}, {"output_value": "9e61b626-a866-4ba5-b1c7-01935fdac3f4", "description": "A unique id for the local subnet.", "output_key": "id"}] worker_state:CREATE_COMPLETED] version:1] started
03:05:36.236 gohan.sync INFO [0m Locked gohan/cluster/lock/state/v2.0/subnets/e1353d56-b05a-43a9-b924-383ab0d64d7b with index 528
03:05:36.341 gohan.db.sql INFO [0m Executing SQL query in transaction '575f9b92-66e0-4680-9812-82b339776846': 'UPDATE `subnets` SET `host_routes` = [], `tags` = {}, `ntp_servers` = [], `status` = PENDING_CREATE, `dhcp_server_address` = 169.254.0.2, `gateway_ip` = <nil>, `cidr` = 169.254.0.0/17, `ipv6_ra_mode` = <nil>, `allocation_pools` = [{"end":"169.254.127.254","start":"169.254.0.2"}], `dns_nameservers` = [], `id` = e1353d56-b05a-43a9-b924-383ab0d64d7b, `name` = common_function_gw_access_subnet_5c241c51-2003-407a-a239-689fabd19022, `enable_dhcp` = true, `description` = , `ipv6_address_mode` = <nil>, `network_id` = f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `ip_version` = 4, `state_version` = 1, `monitoring_version` = 0, `state_error` = , `state` = {"error":"","state":{"heat_outputs":"[{\"output_value\": \"169.254.0.0/17\", \"description\": \"IP prefix of local subnet.\", \"output_key\": \"ip_prefix\"}, {\"output_value\": \"e1353d56-b05a-43a9-b924-383ab0d64d7b\", \"description\": \"The name of the local subnet.\", \"output_key\": \"name\"}, {\"output_value\": \"0.0.0.0\", \"description\": \"Default gateway of local subnet.\", \"output_key\": \"default_gateway\"}, {\"output_value\": \"f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57\", \"description\": \"A unique id for the network.\", \"output_key\": \"network_id\"}, {\"output_value\": \"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa\", \"description\": \"IPAM this local subnet uses.\", \"output_key\": \"ipam\"}, {\"output_value\": \"9e61b626-a866-4ba5-b1c7-01935fdac3f4\", \"description\": \"A unique id for the local subnet.\", \"output_key\": \"id\"}]","worker_state":"CREATE_COMPLETED"}}, `state_monitoring` = {}, `marked_for_deletion` = 0 WHERE id = e1353d56-b05a-43a9-b924-383ab0d64d7b'
03:05:36.344 gohan.extension.subnet.post_state_update_in_transaction INFO [0m Config version: 1, State version: 1, Monitoring version: 0
03:05:36.345 gohan.db.sql INFO [0m Executing SQL query in transaction '575f9b92-66e0-4680-9812-82b339776846': 'UPDATE `subnets` SET `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `ip_version` = 4, `tags` = {}, `ntp_servers` = [], `status` = ACTIVE, `dhcp_server_address` = 169.254.0.2, `gateway_ip` = <nil>, `host_routes` = [], `cidr` = 169.254.0.0/17, `ipv6_ra_mode` = <nil>, `allocation_pools` = [{"end":"169.254.127.254","start":"169.254.0.2"}], `dns_nameservers` = [], `id` = e1353d56-b05a-43a9-b924-383ab0d64d7b, `name` = common_function_gw_access_subnet_5c241c51-2003-407a-a239-689fabd19022, `enable_dhcp` = true, `description` = , `ipv6_address_mode` = <nil>, `network_id` = f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 WHERE id = e1353d56-b05a-43a9-b924-383ab0d64d7b'
03:05:36.366 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/state/v2.0/subnets/e1353d56-b05a-43a9-b924-383ab0d64d7b with index 528
03:05:36.373 gohan.sync INFO [0m Path gohan/cluster/lock/state/v2.0/subnets/e1353d56-b05a-43a9-b924-383ab0d64d7b already unlocked or not locked
[36m03:05:40.356 gohan.server DEBUG [0m State event update received: set /state/v2.0/ports/327f59b7-df38-4d8f-97db-d320defcab76 map[error: state:map[heat_outputs:[{"output_value": "bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb", "description": "Virtual network.", "output_key": "virtual_network"}, {"output_value": "default-domain:admin:327f59b7-df38-4d8f-97db-d320defcab76", "description": "Fully Qualified Name of the VMI", "output_key": "fq_name"}, {"output_value": "327f59b7-df38-4d8f-97db-d320defcab76", "description": "A unique id for the virtual machine interface.", "output_key": "id"}, {"output_value": "null", "description": "Virtual machine allowed address pairs.", "output_key": "allowed_address_pairs"}, {"output_value": "xx:xx:xx:xx:xx:xx", "description": "Virtual machine interface mac address.", "output_key": "mac_address"}] state_monitoring:{} worker_state:CREATE_COMPLETED] version:1]
03:05:40.356 gohan.server.sync INFO [0m StateUpdate for set /state/v2.0/ports/327f59b7-df38-4d8f-97db-d320defcab76 map[error: state:map[state_monitoring:{} worker_state:CREATE_COMPLETED heat_outputs:[{"output_value": "bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb", "description": "Virtual network.", "output_key": "virtual_network"}, {"output_value": "default-domain:admin:327f59b7-df38-4d8f-97db-d320defcab76", "description": "Fully Qualified Name of the VMI", "output_key": "fq_name"}, {"output_value": "327f59b7-df38-4d8f-97db-d320defcab76", "description": "A unique id for the virtual machine interface.", "output_key": "id"}, {"output_value": "null", "description": "Virtual machine allowed address pairs.", "output_key": "allowed_address_pairs"}, {"output_value": "xx:xx:xx:xx:xx:xx", "description": "Virtual machine interface mac address.", "output_key": "mac_address"}]] version:1] started
03:05:40.440 gohan.sync INFO [0m Locked gohan/cluster/lock/state/v2.0/ports/327f59b7-df38-4d8f-97db-d320defcab76 with index 571
03:05:40.608 gohan.db.sql INFO [0m Executing SQL query in transaction '5657109d-0ae9-4234-b8d7-6b40cc0f25aa': 'UPDATE `ports` SET `name` = common_function_gw_5c241c51-2003-407a-a239-689fabd19022_primary_port:976156ef-05b4-47f4-9497-a36531563a08, `managed_by_service` = true, `ese_logical_port_id` = b04853c4-6ebf-441f-9093-ea4b844c4bc7, `device_id` = 5c241c51-2003-407a-a239-689fabd19022, `device_owner` = network:common_function_gateway, `binding:vif_type` = vrouter, `network_id` = f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `allowed_address_pairs` = [], `description` = , `segmentation_id` = 1025, `mac_address` = fa:16:3e:e5:f6:39, `fake_delete` = false, `fixed_ips` = [{"ip_address":"169.254.0.3","subnet_id":"e1353d56-b05a-43a9-b924-383ab0d64d7b"}], `segmentation_type` = vlan, `admin_state_up` = true, `status` = PENDING_CREATE, `tags` = {}, `attached` = false, `id` = 327f59b7-df38-4d8f-97db-d320defcab76, `state_version` = 1, `monitoring_version` = 0, `state_error` = , `state` = {"error":"","state":{"heat_outputs":"[{\"output_value\": \"bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb\", \"description\": \"Virtual network.\", \"output_key\": \"virtual_network\"}, {\"output_value\": \"default-domain:admin:327f59b7-df38-4d8f-97db-d320defcab76\", \"description\": \"Fully Qualified Name of the VMI\", \"output_key\": \"fq_name\"}, {\"output_value\": \"327f59b7-df38-4d8f-97db-d320defcab76\", \"description\": \"A unique id for the virtual machine interface.\", \"output_key\": \"id\"}, {\"output_value\": \"null\", \"description\": \"Virtual machine allowed address pairs.\", \"output_key\": \"allowed_address_pairs\"}, {\"output_value\": \"xx:xx:xx:xx:xx:xx\", \"description\": \"Virtual machine interface mac address.\", \"output_key\": \"mac_address\"}]","state_monitoring":"{}","worker_state":"CREATE_COMPLETED"}}, `state_monitoring` = {}, `marked_for_deletion` = 0 WHERE id = 327f59b7-df38-4d8f-97db-d320defcab76'
03:05:40.610 gohan.extension.port.post_state_update_in_transaction INFO [0m Config version: 1, State version: 1, Monitoring version: 0
03:05:40.610 gohan.extension.port.post_state_update_in_transaction INFO [0m Reading monitoring data from worker state: {}
03:05:40.636 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/state/v2.0/ports/327f59b7-df38-4d8f-97db-d320defcab76 with index 571
03:05:40.647 gohan.sync INFO [0m Path gohan/cluster/lock/state/v2.0/ports/327f59b7-df38-4d8f-97db-d320defcab76 already unlocked or not locked
[36m03:05:40.834 gohan.server DEBUG [0m State event update received: set /state/v2.0/ports/a778c668-6ccb-4d46-9ec3-956693262d63 map[error: state:map[heat_outputs:[{"output_value": "bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb", "description": "Virtual network.", "output_key": "virtual_network"}, {"output_value": "default-domain:admin:a778c668-6ccb-4d46-9ec3-956693262d63", "description": "Fully Qualified Name of the VMI", "output_key": "fq_name"}, {"output_value": "a778c668-6ccb-4d46-9ec3-956693262d63", "description": "A unique id for the virtual machine interface.", "output_key": "id"}, {"output_value": "null", "description": "Virtual machine allowed address pairs.", "output_key": "allowed_address_pairs"}, {"output_value": "xx:xx:xx:xx:xx:xx", "description": "Virtual machine interface mac address.", "output_key": "mac_address"}] state_monitoring:{} worker_state:CREATE_COMPLETED] version:1]
03:05:40.834 gohan.server.sync INFO [0m StateUpdate for set /state/v2.0/ports/a778c668-6ccb-4d46-9ec3-956693262d63 map[error: state:map[heat_outputs:[{"output_value": "bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb", "description": "Virtual network.", "output_key": "virtual_network"}, {"output_value": "default-domain:admin:a778c668-6ccb-4d46-9ec3-956693262d63", "description": "Fully Qualified Name of the VMI", "output_key": "fq_name"}, {"output_value": "a778c668-6ccb-4d46-9ec3-956693262d63", "description": "A unique id for the virtual machine interface.", "output_key": "id"}, {"output_value": "null", "description": "Virtual machine allowed address pairs.", "output_key": "allowed_address_pairs"}, {"output_value": "xx:xx:xx:xx:xx:xx", "description": "Virtual machine interface mac address.", "output_key": "mac_address"}] state_monitoring:{} worker_state:CREATE_COMPLETED] version:1] started
03:05:40.853 gohan.sync INFO [0m Locked gohan/cluster/lock/state/v2.0/ports/a778c668-6ccb-4d46-9ec3-956693262d63 with index 598
03:05:40.926 gohan.db.sql INFO [0m Executing SQL query in transaction '7a9fbf9b-9b55-48e3-ba38-9dd52e8160b7': 'UPDATE `ports` SET `segmentation_id` = 1025, `mac_address` = fa:16:3e:0c:b0:eb, `fake_delete` = false, `fixed_ips` = [{"ip_address":"169.254.0.4","subnet_id":"e1353d56-b05a-43a9-b924-383ab0d64d7b"}], `network_id` = f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `allowed_address_pairs` = [], `description` = , `admin_state_up` = true, `status` = PENDING_CREATE, `segmentation_type` = vlan, `attached` = false, `id` = a778c668-6ccb-4d46-9ec3-956693262d63, `tags` = {}, `ese_logical_port_id` = 9c601c38-a854-459d-aec2-433873b3a4e6, `device_id` = 5c241c51-2003-407a-a239-689fabd19022, `name` = common_function_gw_5c241c51-2003-407a-a239-689fabd19022_secondary_port:5b2dee2e-7420-4cd4-b270-5081eb9eb371, `managed_by_service` = true, `device_owner` = network:common_function_gateway, `binding:vif_type` = vrouter, `state_version` = 1, `monitoring_version` = 0, `state_error` = , `state` = {"error":"","state":{"heat_outputs":"[{\"output_value\": \"bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb\", \"description\": \"Virtual network.\", \"output_key\": \"virtual_network\"}, {\"output_value\": \"default-domain:admin:a778c668-6ccb-4d46-9ec3-956693262d63\", \"description\": \"Fully Qualified Name of the VMI\", \"output_key\": \"fq_name\"}, {\"output_value\": \"a778c668-6ccb-4d46-9ec3-956693262d63\", \"description\": \"A unique id for the virtual machine interface.\", \"output_key\": \"id\"}, {\"output_value\": \"null\", \"description\": \"Virtual machine allowed address pairs.\", \"output_key\": \"allowed_address_pairs\"}, {\"output_value\": \"xx:xx:xx:xx:xx:xx\", \"description\": \"Virtual machine interface mac address.\", \"output_key\": \"mac_address\"}]","state_monitoring":"{}","worker_state":"CREATE_COMPLETED"}}, `state_monitoring` = {}, `marked_for_deletion` = 0 WHERE id = a778c668-6ccb-4d46-9ec3-956693262d63'
03:05:40.927 gohan.extension.port.post_state_update_in_transaction INFO [0m Config version: 1, State version: 1, Monitoring version: 0
03:05:40.927 gohan.extension.port.post_state_update_in_transaction INFO [0m Reading monitoring data from worker state: {}
03:05:40.948 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/state/v2.0/ports/a778c668-6ccb-4d46-9ec3-956693262d63 with index 598
03:05:40.960 gohan.sync INFO [0m Path gohan/cluster/lock/state/v2.0/ports/a778c668-6ccb-4d46-9ec3-956693262d63 already unlocked or not locked
[36m03:05:43.242 gohan.server DEBUG [0m State event update received: set /state/v2.0/ese_logical_ports/b04853c4-6ebf-441f-9093-ea4b844c4bc7 map[error: state:map[heat_outputs:[{"output_value": "cccccccc-cccc-cccc-cccc-cccccccccccc", "description": "A unique id for the logical interface", "output_key": "id"}, {"output_value": null, "output_error": "'ContrailLogicalInterface' object has no attribute 'li_uuid'", "description": "The name of the logical interface.", "output_key": "name"}] state_monitoring:{"logical_port": "ACTIVE"} worker_state:CREATE_COMPLETED] version:1]
03:05:43.242 gohan.server.sync INFO [0m StateUpdate for set /state/v2.0/ese_logical_ports/b04853c4-6ebf-441f-9093-ea4b844c4bc7 map[error: state:map[heat_outputs:[{"output_value": "cccccccc-cccc-cccc-cccc-cccccccccccc", "description": "A unique id for the logical interface", "output_key": "id"}, {"output_value": null, "output_error": "'ContrailLogicalInterface' object has no attribute 'li_uuid'", "description": "The name of the logical interface.", "output_key": "name"}] state_monitoring:{"logical_port": "ACTIVE"} worker_state:CREATE_COMPLETED] version:1] started
03:05:43.259 gohan.sync INFO [0m Locked gohan/cluster/lock/state/v2.0/ese_logical_ports/b04853c4-6ebf-441f-9093-ea4b844c4bc7 with index 621
03:05:43.338 gohan.db.sql INFO [0m Executing SQL query in transaction '4d6b1a63-518a-4131-958d-51d63e788b5a': 'UPDATE `ese_logical_ports` SET `description` = ESE Logical port for Port 327f59b7-df38-4d8f-97db-d320defcab76, `connected_resource` = common_function_gateway, `gw_interface_id` = <nil>, `common_function_gateway_id` = 5c241c51-2003-407a-a239-689fabd19022, `id` = b04853c4-6ebf-441f-9093-ea4b844c4bc7, `vlan_id` = 1025, `port_ids` = ["327f59b7-df38-4d8f-97db-d320defcab76"], `type` = L2, `tags` = {}, `status` = PENDING_CREATE, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `name` = xe-0/0/3.1025, `ese_physical_port_id` = 976156ef-05b4-47f4-9497-a36531563a08, `network_id` = f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57, ese_physical_port_id = 976156ef-05b4-47f4-9497-a36531563a08, `state_version` = 1, `monitoring_version` = 0, `state_error` = , `state` = {"error":"","state":{"heat_outputs":"[{\"output_value\": \"cccccccc-cccc-cccc-cccc-cccccccccccc\", \"description\": \"A unique id for the logical interface\", \"output_key\": \"id\"}, {\"output_value\": null, \"output_error\": \"'ContrailLogicalInterface' object has no attribute 'li_uuid'\", \"description\": \"The name of the logical interface.\", \"output_key\": \"name\"}]","state_monitoring":"{\"logical_port\": \"ACTIVE\"}","worker_state":"CREATE_COMPLETED"}}, `state_monitoring` = {}, `marked_for_deletion` = 0 WHERE id = b04853c4-6ebf-441f-9093-ea4b844c4bc7'
03:05:43.340 gohan.extension.ese_logical_port.post_state_update_in_transaction INFO [0m Config version: 1, State version: 1, Monitoring version: 0
03:05:43.340 gohan.extension.ese_logical_port.post_state_update_in_transaction INFO [0m Reading monitoring data from worker state: {"logical_port": "ACTIVE"}
03:05:43.341 gohan.db.sql INFO [0m Executing SQL query in transaction '4d6b1a63-518a-4131-958d-51d63e788b5a': 'UPDATE `ese_logical_ports` SET `gw_interface_id` = <nil>, `common_function_gateway_id` = 5c241c51-2003-407a-a239-689fabd19022, `description` = ESE Logical port for Port 327f59b7-df38-4d8f-97db-d320defcab76, `connected_resource` = common_function_gateway, `id` = b04853c4-6ebf-441f-9093-ea4b844c4bc7, `vlan_id` = 1025, `tags` = {}, `status` = ACTIVE, `port_ids` = ["327f59b7-df38-4d8f-97db-d320defcab76"], `type` = L2, `ese_physical_port_id` = 976156ef-05b4-47f4-9497-a36531563a08, `network_id` = f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `name` = xe-0/0/3.1025, ese_physical_port_id = 976156ef-05b4-47f4-9497-a36531563a08 WHERE id = b04853c4-6ebf-441f-9093-ea4b844c4bc7'
03:05:43.343 gohan.db.sql INFO [0m Executing SQL query in transaction '4d6b1a63-518a-4131-958d-51d63e788b5a': 'UPDATE `ports` SET `device_owner` = network:common_function_gateway, `binding:vif_type` = vrouter, `description` = , `segmentation_id` = 1025, `mac_address` = fa:16:3e:e5:f6:39, `fake_delete` = false, `fixed_ips` = [{"ip_address":"169.254.0.3","subnet_id":"e1353d56-b05a-43a9-b924-383ab0d64d7b"}], `network_id` = f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `allowed_address_pairs` = [], `admin_state_up` = true, `status` = PENDING_CREATE, `segmentation_type` = vlan, `attached` = true, `id` = 327f59b7-df38-4d8f-97db-d320defcab76, `tags` = {}, `ese_logical_port_id` = b04853c4-6ebf-441f-9093-ea4b844c4bc7, `device_id` = 5c241c51-2003-407a-a239-689fabd19022, `name` = common_function_gw_5c241c51-2003-407a-a239-689fabd19022_primary_port:976156ef-05b4-47f4-9497-a36531563a08, `managed_by_service` = true, `config_version` = `config_version` + 1 WHERE id = 327f59b7-df38-4d8f-97db-d320defcab76'
03:05:43.344 gohan.db.sql INFO [0m Executing SQL query in transaction '4d6b1a63-518a-4131-958d-51d63e788b5a': 'INSERT INTO `events` (`path`,`timestamp`,`type`,`marked_for_deletion`,`body`,`version`) VALUES (/v2.0/ports/327f59b7-df38-4d8f-97db-d320defcab76,1494471943,update,false,"{\"admin_state_up\":true,\"allowed_address_pairs\":[],\"attached\":true,\"binding:vif_type\":\"vrouter\",\"description\":\"\",\"device_id\":\"5c241c51-2003-407a-a239-689fabd19022\",\"device_owner\":\"network:common_function_gateway\",\"ese_logical_port_id\":\"b04853c4-6ebf-441f-9093-ea4b844c4bc7\",\"fake_delete\":false,\"fixed_ips\":[{\"ip_address\":\"169.254.0.3\",\"subnet_id\":\"e1353d56-b05a-43a9-b924-383ab0d64d7b\"}],\"id\":\"327f59b7-df38-4d8f-97db-d320defcab76\",\"mac_address\":\"fa:16:3e:e5:f6:39\",\"managed_by_service\":true,\"name\":\"common_function_gw_5c241c51-2003-407a-a239-689fabd19022_primary_port:976156ef-05b4-47f4-9497-a36531563a08\",\"network_id\":\"f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57\",\"segmentation_id\":1025,\"segmentation_type\":\"vlan\",\"status\":\"PENDING_CREATE\",\"tags\":{},\"tenant_id\":\"0b576f6f4cbf414f829cd12f008bf08f\"}",2)'
[36m03:05:43.361 gohan.server.sync DEBUG [0m Processing event 86 - update
03:05:43.361 gohan.server.sync INFO [0m Setting config with version 2 to /config//v2.0/ports/327f59b7-df38-4d8f-97db-d320defcab76
03:05:43.367 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/state/v2.0/ese_logical_ports/b04853c4-6ebf-441f-9093-ea4b844c4bc7 with index 621
[36m03:05:43.368 gohan.server.sync DEBUG [0m Deleting event 86
03:05:43.371 gohan.db.sql INFO [0m Executing SQL query in transaction 'de65c8b0-b2f4-4745-a874-3eae157a5880': 'DELETE FROM `events` WHERE id = 86'
[36m03:05:43.372 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
03:05:43.375 gohan.sync INFO [0m Path gohan/cluster/lock/state/v2.0/ese_logical_ports/b04853c4-6ebf-441f-9093-ea4b844c4bc7 already unlocked or not locked
[36m03:05:43.587 gohan.server DEBUG [0m State event update received: set /state/v2.0/ese_logical_ports/9c601c38-a854-459d-aec2-433873b3a4e6 map[error: state:map[worker_state:CREATE_COMPLETED heat_outputs:[{"output_value": "cccccccc-cccc-cccc-cccc-cccccccccccc", "description": "A unique id for the logical interface", "output_key": "id"}, {"output_value": null, "output_error": "'ContrailLogicalInterface' object has no attribute 'li_uuid'", "description": "The name of the logical interface.", "output_key": "name"}] state_monitoring:{"logical_port": "ACTIVE"}] version:1]
03:05:43.587 gohan.server.sync INFO [0m StateUpdate for set /state/v2.0/ese_logical_ports/9c601c38-a854-459d-aec2-433873b3a4e6 map[error: state:map[state_monitoring:{"logical_port": "ACTIVE"} worker_state:CREATE_COMPLETED heat_outputs:[{"output_value": "cccccccc-cccc-cccc-cccc-cccccccccccc", "description": "A unique id for the logical interface", "output_key": "id"}, {"output_value": null, "output_error": "'ContrailLogicalInterface' object has no attribute 'li_uuid'", "description": "The name of the logical interface.", "output_key": "name"}]] version:1] started
03:05:43.596 gohan.sync INFO [0m Locked gohan/cluster/lock/state/v2.0/ese_logical_ports/9c601c38-a854-459d-aec2-433873b3a4e6 with index 653
03:05:43.653 gohan.db.sql INFO [0m Executing SQL query in transaction '58ef10c3-ac45-4342-91b3-711fe6d10ee5': 'UPDATE `ese_logical_ports` SET `port_ids` = ["a778c668-6ccb-4d46-9ec3-956693262d63"], `type` = L2, `tags` = {}, `status` = PENDING_CREATE, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `name` = xe-0/0/4.1025, `ese_physical_port_id` = 5b2dee2e-7420-4cd4-b270-5081eb9eb371, `network_id` = f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57, `description` = ESE Logical port for Port a778c668-6ccb-4d46-9ec3-956693262d63, `connected_resource` = common_function_gateway, `gw_interface_id` = <nil>, `common_function_gateway_id` = 5c241c51-2003-407a-a239-689fabd19022, `id` = 9c601c38-a854-459d-aec2-433873b3a4e6, `vlan_id` = 1025, ese_physical_port_id = 5b2dee2e-7420-4cd4-b270-5081eb9eb371, `state_version` = 1, `monitoring_version` = 0, `state_error` = , `state` = {"error":"","state":{"heat_outputs":"[{\"output_value\": \"cccccccc-cccc-cccc-cccc-cccccccccccc\", \"description\": \"A unique id for the logical interface\", \"output_key\": \"id\"}, {\"output_value\": null, \"output_error\": \"'ContrailLogicalInterface' object has no attribute 'li_uuid'\", \"description\": \"The name of the logical interface.\", \"output_key\": \"name\"}]","state_monitoring":"{\"logical_port\": \"ACTIVE\"}","worker_state":"CREATE_COMPLETED"}}, `state_monitoring` = {}, `marked_for_deletion` = 0 WHERE id = 9c601c38-a854-459d-aec2-433873b3a4e6'
03:05:43.655 gohan.extension.ese_logical_port.post_state_update_in_transaction INFO [0m Config version: 1, State version: 1, Monitoring version: 0
03:05:43.655 gohan.extension.ese_logical_port.post_state_update_in_transaction INFO [0m Reading monitoring data from worker state: {"logical_port": "ACTIVE"}
03:05:43.657 gohan.db.sql INFO [0m Executing SQL query in transaction '58ef10c3-ac45-4342-91b3-711fe6d10ee5': 'UPDATE `ese_logical_ports` SET `vlan_id` = 1025, `id` = 9c601c38-a854-459d-aec2-433873b3a4e6, `type` = L2, `tags` = {}, `status` = ACTIVE, `port_ids` = ["a778c668-6ccb-4d46-9ec3-956693262d63"], `name` = xe-0/0/4.1025, `ese_physical_port_id` = 5b2dee2e-7420-4cd4-b270-5081eb9eb371, `network_id` = f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `connected_resource` = common_function_gateway, `gw_interface_id` = <nil>, `common_function_gateway_id` = 5c241c51-2003-407a-a239-689fabd19022, `description` = ESE Logical port for Port a778c668-6ccb-4d46-9ec3-956693262d63, ese_physical_port_id = 5b2dee2e-7420-4cd4-b270-5081eb9eb371 WHERE id = 9c601c38-a854-459d-aec2-433873b3a4e6'
03:05:43.660 gohan.db.sql INFO [0m Executing SQL query in transaction '58ef10c3-ac45-4342-91b3-711fe6d10ee5': 'UPDATE `ports` SET `device_id` = 5c241c51-2003-407a-a239-689fabd19022, `name` = common_function_gw_5c241c51-2003-407a-a239-689fabd19022_secondary_port:5b2dee2e-7420-4cd4-b270-5081eb9eb371, `managed_by_service` = true, `ese_logical_port_id` = 9c601c38-a854-459d-aec2-433873b3a4e6, `binding:vif_type` = vrouter, `device_owner` = network:common_function_gateway, `fixed_ips` = [{"ip_address":"169.254.0.4","subnet_id":"e1353d56-b05a-43a9-b924-383ab0d64d7b"}], `network_id` = f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `allowed_address_pairs` = [], `description` = , `segmentation_id` = 1025, `mac_address` = fa:16:3e:0c:b0:eb, `fake_delete` = false, `status` = PENDING_CREATE, `segmentation_type` = vlan, `admin_state_up` = true, `id` = a778c668-6ccb-4d46-9ec3-956693262d63, `tags` = {}, `attached` = true, `config_version` = `config_version` + 1 WHERE id = a778c668-6ccb-4d46-9ec3-956693262d63'
03:05:43.661 gohan.db.sql INFO [0m Executing SQL query in transaction '58ef10c3-ac45-4342-91b3-711fe6d10ee5': 'INSERT INTO `events` (`body`,`version`,`path`,`timestamp`,`type`,`marked_for_deletion`) VALUES ("{\"admin_state_up\":true,\"allowed_address_pairs\":[],\"attached\":true,\"binding:vif_type\":\"vrouter\",\"description\":\"\",\"device_id\":\"5c241c51-2003-407a-a239-689fabd19022\",\"device_owner\":\"network:common_function_gateway\",\"ese_logical_port_id\":\"9c601c38-a854-459d-aec2-433873b3a4e6\",\"fake_delete\":false,\"fixed_ips\":[{\"ip_address\":\"169.254.0.4\",\"subnet_id\":\"e1353d56-b05a-43a9-b924-383ab0d64d7b\"}],\"id\":\"a778c668-6ccb-4d46-9ec3-956693262d63\",\"mac_address\":\"fa:16:3e:0c:b0:eb\",\"managed_by_service\":true,\"name\":\"common_function_gw_5c241c51-2003-407a-a239-689fabd19022_secondary_port:5b2dee2e-7420-4cd4-b270-5081eb9eb371\",\"network_id\":\"f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57\",\"segmentation_id\":1025,\"segmentation_type\":\"vlan\",\"status\":\"PENDING_CREATE\",\"tags\":{},\"tenant_id\":\"0b576f6f4cbf414f829cd12f008bf08f\"}",2,/v2.0/ports/a778c668-6ccb-4d46-9ec3-956693262d63,1494471943,update,false)'
03:05:43.673 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/state/v2.0/ese_logical_ports/9c601c38-a854-459d-aec2-433873b3a4e6 with index 653
[36m03:05:43.675 gohan.server.sync DEBUG [0m Processing event 87 - update
03:05:43.675 gohan.server.sync INFO [0m Setting config with version 2 to /config//v2.0/ports/a778c668-6ccb-4d46-9ec3-956693262d63
03:05:43.683 gohan.sync INFO [0m Path gohan/cluster/lock/state/v2.0/ese_logical_ports/9c601c38-a854-459d-aec2-433873b3a4e6 already unlocked or not locked
[36m03:05:43.684 gohan.server.sync DEBUG [0m Deleting event 87
03:05:43.685 gohan.db.sql INFO [0m Executing SQL query in transaction '01e47e87-eb14-4e07-846b-2dc1ec465ff4': 'DELETE FROM `events` WHERE id = 87'
[36m03:05:43.685 gohan.server.sync DEBUG [0m Skipping event logging for schema: event
03:05:47.882 gohan.server.middleware INFO [0m Started GET /v2.0/ports for client 172.17.0.19:40682 data: {}
[36m03:05:47.883 gohan.server.middleware DEBUG [0m Request headers: map[Accept:[application/json] Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[gzip] User-Agent:[gophercloud/1.0.0] Connection:[close] Content-Length:[2]]
[36m03:05:47.883 gohan.server.middleware DEBUG [0m Request body: {}
[36m03:05:47.961 gohan.server.resources DEBUG [0m List port query: map[] started
[36m03:05:47.965 gohan.server.resources DEBUG [0m List port query: map[] completed
[36m03:05:47.966 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] X-Total-Count:[3] Content-Length:[2920]]
[36m03:05:47.966 gohan.server.middleware DEBUG [0m Response body: {
  "ports": [
    {
      "admin_state_up": true,
      "allowed_address_pairs": [],
      "attached": true,
      "binding:vif_type": "vrouter",
      "description": "",
      "device_id": "5c241c51-2003-407a-a239-689fabd19022",
      "device_owner": "network:common_function_gateway",
      "ese_logical_port_id": "b04853c4-6ebf-441f-9093-ea4b844c4bc7",
      "fake_delete": false,
      "fixed_ips": [
        {
          "ip_address": "169.254.0.3",
          "subnet_id": "e1353d56-b05a-43a9-b924-383ab0d64d7b"
        }
      ],
      "id": "327f59b7-df38-4d8f-97db-d320defcab76",
      "mac_address": "fa:16:3e:e5:f6:39",
      "managed_by_service": true,
      "name": "common_function_gw_5c241c51-2003-407a-a239-689fabd19022_primary_port:976156ef-05b4-47f4-9497-a36531563a08",
      "network_id": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57",
      "segmentation_id": 1025,
      "segmentation_type": "vlan",
      "status": "PENDING_CREATE",
      "tags": {},
      "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
    },
    {
      "admin_state_up": true,
      "allowed_address_pairs": [],
      "attached": true,
      "binding:vif_type": "vrouter",
      "description": "",
      "device_id": "5c241c51-2003-407a-a239-689fabd19022",
      "device_owner": "network:common_function_gateway",
      "ese_logical_port_id": "9c601c38-a854-459d-aec2-433873b3a4e6",
      "fake_delete": false,
      "fixed_ips": [
        {
          "ip_address": "169.254.0.4",
          "subnet_id": "e1353d56-b05a-43a9-b924-383ab0d64d7b"
        }
      ],
      "id": "a778c668-6ccb-4d46-9ec3-956693262d63",
      "mac_address": "fa:16:3e:0c:b0:eb",
      "managed_by_service": true,
      "name": "common_function_gw_5c241c51-2003-407a-a239-689fabd19022_secondary_port:5b2dee2e-7420-4cd4-b270-5081eb9eb371",
      "network_id": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57",
      "segmentation_id": 1025,
      "segmentation_type": "vlan",
      "status": "PENDING_CREATE",
      "tags": {},
      "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
    },
    {
      "admin_state_up": true,
      "allowed_address_pairs": [],
      "attached": false,
      "binding:vif_type": "vrouter",
      "description": "DHCP Server Port",
      "device_id": "e1353d56-b05a-43a9-b924-383ab0d64d7b",
      "device_owner": "network:dhcp",
      "ese_logical_port_id": null,
      "fake_delete": false,
      "fixed_ips": [
        {
          "ip_address": "169.254.0.2",
          "subnet_id": "e1353d56-b05a-43a9-b924-383ab0d64d7b"
        }
      ],
      "id": "bbaac433-1023-4660-88f0-ccd8c2c26c89",
      "mac_address": "00:00:5e:00:01:00",
      "managed_by_service": false,
      "name": "dhcp-server-port",
      "network_id": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57",
      "segmentation_id": null,
      "segmentation_type": null,
      "status": "ACTIVE",
      "tags": {},
      "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
    }
  ]
}
03:05:47.966 gohan.server.middleware INFO [0m Completed 200 OK in 83.450553ms
03:05:52.391 gohan.server.middleware INFO [0m Started GET /v2.0/common_function_gateways/5c241c51-2003-407a-a239-689fabd19022 for client 172.17.0.19:40718 data: 
[36m03:05:52.391 gohan.server.middleware DEBUG [0m Request headers: map[Accept-Encoding:[identity] Content-Length:[0] Content-Type:[application/json] X-Auth-Token:[***]]
[36m03:05:52.391 gohan.server.middleware DEBUG [0m Request body: 
[36m03:05:52.476 gohan.server.resources DEBUG [0m Show common_function_gateway 5c241c51-2003-407a-a239-689fabd19022 started
[36m03:05:52.480 gohan.server.resources DEBUG [0m Show common_function_gateway 5c241c51-2003-407a-a239-689fabd19022 completed: map[common_function_gateway:map[id:5c241c51-2003-407a-a239-689fabd19022 logical_tunnel_unit_user:1025 common_functions:[map[common_function_id:18c64ec9-78c2-43ac-ae0d-48fa9b6c0858] map[common_function_id:c1be08ee-7cf2-4c84-8fe7-7e891d17bc71]] status:PENDING_CREATE logical_tunnel_unit_service:11025 name:T0011CF000 vlan_id:1025 vrf_name:vrf_gw_sample-ha-router-downlink_1025 nat_ip:100.64.0.10 subnet_id:e1353d56-b05a-43a9-b924-383ab0d64d7b secondary_logical_interface_name:ae0.1025 tenant_id:0b576f6f4cbf414f829cd12f008bf08f common_function_pool_id:cca32fd7-2430-4acc-87e9-a7b527e9918d primary_logical_interface_name:ae0.1025 downlink_interface_id:372ed357-e622-41fb-a613-076d332838e2 network_id:f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 description:]]
[36m03:05:52.480 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[975]]
[36m03:05:52.480 gohan.server.middleware DEBUG [0m Response body: {
  "common_function_gateway": {
    "common_function_pool_id": "cca32fd7-2430-4acc-87e9-a7b527e9918d",
    "common_functions": [
      {
        "common_function_id": "18c64ec9-78c2-43ac-ae0d-48fa9b6c0858"
      },
      {
        "common_function_id": "c1be08ee-7cf2-4c84-8fe7-7e891d17bc71"
      }
    ],
    "description": "",
    "downlink_interface_id": "372ed357-e622-41fb-a613-076d332838e2",
    "id": "5c241c51-2003-407a-a239-689fabd19022",
    "logical_tunnel_unit_service": "11025",
    "logical_tunnel_unit_user": "1025",
    "name": "T0011CF000",
    "nat_ip": "100.64.0.10",
    "network_id": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57",
    "primary_logical_interface_name": "ae0.1025",
    "secondary_logical_interface_name": "ae0.1025",
    "status": "PENDING_CREATE",
    "subnet_id": "e1353d56-b05a-43a9-b924-383ab0d64d7b",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
    "vlan_id": "1025",
    "vrf_name": "vrf_gw_sample-ha-router-downlink_1025"
  }
}
03:05:52.480 gohan.server.middleware INFO [0m Completed 200 OK in 89.552398ms
03:05:53.492 gohan.server.middleware INFO [0m Started GET /v2.0/common_function_gateways/5c241c51-2003-407a-a239-689fabd19022 for client 172.17.0.19:40724 data: 
[36m03:05:53.492 gohan.server.middleware DEBUG [0m Request headers: map[Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[identity] Content-Length:[0]]
[36m03:05:53.492 gohan.server.middleware DEBUG [0m Request body: 
[36m03:05:53.583 gohan.server.resources DEBUG [0m Show common_function_gateway 5c241c51-2003-407a-a239-689fabd19022 started
[36m03:05:53.587 gohan.server.resources DEBUG [0m Show common_function_gateway 5c241c51-2003-407a-a239-689fabd19022 completed: map[common_function_gateway:map[logical_tunnel_unit_user:1025 logical_tunnel_unit_service:11025 vrf_name:vrf_gw_sample-ha-router-downlink_1025 name:T0011CF000 nat_ip:100.64.0.10 network_id:f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 common_functions:[map[common_function_id:18c64ec9-78c2-43ac-ae0d-48fa9b6c0858] map[common_function_id:c1be08ee-7cf2-4c84-8fe7-7e891d17bc71]] primary_logical_interface_name:ae0.1025 id:5c241c51-2003-407a-a239-689fabd19022 downlink_interface_id:372ed357-e622-41fb-a613-076d332838e2 status:PENDING_CREATE tenant_id:0b576f6f4cbf414f829cd12f008bf08f common_function_pool_id:cca32fd7-2430-4acc-87e9-a7b527e9918d subnet_id:e1353d56-b05a-43a9-b924-383ab0d64d7b description: secondary_logical_interface_name:ae0.1025 vlan_id:1025]]
[36m03:05:53.587 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[975]]
[36m03:05:53.587 gohan.server.middleware DEBUG [0m Response body: {
  "common_function_gateway": {
    "common_function_pool_id": "cca32fd7-2430-4acc-87e9-a7b527e9918d",
    "common_functions": [
      {
        "common_function_id": "18c64ec9-78c2-43ac-ae0d-48fa9b6c0858"
      },
      {
        "common_function_id": "c1be08ee-7cf2-4c84-8fe7-7e891d17bc71"
      }
    ],
    "description": "",
    "downlink_interface_id": "372ed357-e622-41fb-a613-076d332838e2",
    "id": "5c241c51-2003-407a-a239-689fabd19022",
    "logical_tunnel_unit_service": "11025",
    "logical_tunnel_unit_user": "1025",
    "name": "T0011CF000",
    "nat_ip": "100.64.0.10",
    "network_id": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57",
    "primary_logical_interface_name": "ae0.1025",
    "secondary_logical_interface_name": "ae0.1025",
    "status": "PENDING_CREATE",
    "subnet_id": "e1353d56-b05a-43a9-b924-383ab0d64d7b",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
    "vlan_id": "1025",
    "vrf_name": "vrf_gw_sample-ha-router-downlink_1025"
  }
}
03:05:53.587 gohan.server.middleware INFO [0m Completed 200 OK in 95.412446ms
03:05:54.599 gohan.server.middleware INFO [0m Started GET /v2.0/common_function_gateways/5c241c51-2003-407a-a239-689fabd19022 for client 172.17.0.19:40730 data: 
[36m03:05:54.599 gohan.server.middleware DEBUG [0m Request headers: map[Content-Length:[0] Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[identity]]
[36m03:05:54.599 gohan.server.middleware DEBUG [0m Request body: 
[36m03:05:54.680 gohan.server.resources DEBUG [0m Show common_function_gateway 5c241c51-2003-407a-a239-689fabd19022 started
[36m03:05:54.683 gohan.server.resources DEBUG [0m Show common_function_gateway 5c241c51-2003-407a-a239-689fabd19022 completed: map[common_function_gateway:map[id:5c241c51-2003-407a-a239-689fabd19022 logical_tunnel_unit_user:1025 logical_tunnel_unit_service:11025 tenant_id:0b576f6f4cbf414f829cd12f008bf08f description: primary_logical_interface_name:ae0.1025 status:PENDING_CREATE secondary_logical_interface_name:ae0.1025 vrf_name:vrf_gw_sample-ha-router-downlink_1025 nat_ip:100.64.0.10 downlink_interface_id:372ed357-e622-41fb-a613-076d332838e2 name:T0011CF000 common_function_pool_id:cca32fd7-2430-4acc-87e9-a7b527e9918d subnet_id:e1353d56-b05a-43a9-b924-383ab0d64d7b network_id:f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 common_functions:[map[common_function_id:18c64ec9-78c2-43ac-ae0d-48fa9b6c0858] map[common_function_id:c1be08ee-7cf2-4c84-8fe7-7e891d17bc71]] vlan_id:1025]]
[36m03:05:54.683 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[975]]
[36m03:05:54.684 gohan.server.middleware DEBUG [0m Response body: {
  "common_function_gateway": {
    "common_function_pool_id": "cca32fd7-2430-4acc-87e9-a7b527e9918d",
    "common_functions": [
      {
        "common_function_id": "18c64ec9-78c2-43ac-ae0d-48fa9b6c0858"
      },
      {
        "common_function_id": "c1be08ee-7cf2-4c84-8fe7-7e891d17bc71"
      }
    ],
    "description": "",
    "downlink_interface_id": "372ed357-e622-41fb-a613-076d332838e2",
    "id": "5c241c51-2003-407a-a239-689fabd19022",
    "logical_tunnel_unit_service": "11025",
    "logical_tunnel_unit_user": "1025",
    "name": "T0011CF000",
    "nat_ip": "100.64.0.10",
    "network_id": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57",
    "primary_logical_interface_name": "ae0.1025",
    "secondary_logical_interface_name": "ae0.1025",
    "status": "PENDING_CREATE",
    "subnet_id": "e1353d56-b05a-43a9-b924-383ab0d64d7b",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
    "vlan_id": "1025",
    "vrf_name": "vrf_gw_sample-ha-router-downlink_1025"
  }
}
03:05:54.684 gohan.server.middleware INFO [0m Completed 200 OK in 85.02402ms
03:05:55.694 gohan.server.middleware INFO [0m Started GET /v2.0/common_function_gateways/5c241c51-2003-407a-a239-689fabd19022 for client 172.17.0.19:40736 data: 
[36m03:05:55.695 gohan.server.middleware DEBUG [0m Request headers: map[Content-Length:[0] Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[identity]]
[36m03:05:55.695 gohan.server.middleware DEBUG [0m Request body: 
[36m03:05:55.775 gohan.server.resources DEBUG [0m Show common_function_gateway 5c241c51-2003-407a-a239-689fabd19022 started
[36m03:05:55.779 gohan.server.resources DEBUG [0m Show common_function_gateway 5c241c51-2003-407a-a239-689fabd19022 completed: map[common_function_gateway:map[id:5c241c51-2003-407a-a239-689fabd19022 logical_tunnel_unit_service:11025 common_functions:[map[common_function_id:18c64ec9-78c2-43ac-ae0d-48fa9b6c0858] map[common_function_id:c1be08ee-7cf2-4c84-8fe7-7e891d17bc71]] primary_logical_interface_name:ae0.1025 subnet_id:e1353d56-b05a-43a9-b924-383ab0d64d7b network_id:f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 vrf_name:vrf_gw_sample-ha-router-downlink_1025 downlink_interface_id:372ed357-e622-41fb-a613-076d332838e2 secondary_logical_interface_name:ae0.1025 logical_tunnel_unit_user:1025 tenant_id:0b576f6f4cbf414f829cd12f008bf08f name:T0011CF000 common_function_pool_id:cca32fd7-2430-4acc-87e9-a7b527e9918d status:PENDING_CREATE nat_ip:100.64.0.10 description: vlan_id:1025]]
[36m03:05:55.779 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[975]]
[36m03:05:55.779 gohan.server.middleware DEBUG [0m Response body: {
  "common_function_gateway": {
    "common_function_pool_id": "cca32fd7-2430-4acc-87e9-a7b527e9918d",
    "common_functions": [
      {
        "common_function_id": "18c64ec9-78c2-43ac-ae0d-48fa9b6c0858"
      },
      {
        "common_function_id": "c1be08ee-7cf2-4c84-8fe7-7e891d17bc71"
      }
    ],
    "description": "",
    "downlink_interface_id": "372ed357-e622-41fb-a613-076d332838e2",
    "id": "5c241c51-2003-407a-a239-689fabd19022",
    "logical_tunnel_unit_service": "11025",
    "logical_tunnel_unit_user": "1025",
    "name": "T0011CF000",
    "nat_ip": "100.64.0.10",
    "network_id": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57",
    "primary_logical_interface_name": "ae0.1025",
    "secondary_logical_interface_name": "ae0.1025",
    "status": "PENDING_CREATE",
    "subnet_id": "e1353d56-b05a-43a9-b924-383ab0d64d7b",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
    "vlan_id": "1025",
    "vrf_name": "vrf_gw_sample-ha-router-downlink_1025"
  }
}
03:05:55.779 gohan.server.middleware INFO [0m Completed 200 OK in 85.013382ms
[36m03:05:56.654 gohan.server DEBUG [0m State event update received: set /state/v2.0/common_function_gateways/5c241c51-2003-407a-a239-689fabd19022 map[error: state:map[heat_outputs:[] state_monitoring:{"secondary_41": "backup", "primary_42": "master", "primary_41": "master", "secondary_42": "backup"} worker_state:CREATE_COMPLETED] version:1]
03:05:56.655 gohan.server.sync INFO [0m StateUpdate for set /state/v2.0/common_function_gateways/5c241c51-2003-407a-a239-689fabd19022 map[error: state:map[heat_outputs:[] state_monitoring:{"secondary_41": "backup", "primary_42": "master", "primary_41": "master", "secondary_42": "backup"} worker_state:CREATE_COMPLETED] version:1] started
03:05:56.667 gohan.sync INFO [0m Locked gohan/cluster/lock/state/v2.0/common_function_gateways/5c241c51-2003-407a-a239-689fabd19022 with index 707
03:05:56.794 gohan.server.middleware INFO [0m Started GET /v2.0/common_function_gateways/5c241c51-2003-407a-a239-689fabd19022 for client 172.17.0.19:40782 data: 
[36m03:05:56.794 gohan.server.middleware DEBUG [0m Request headers: map[Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[identity] Content-Length:[0]]
[36m03:05:56.794 gohan.server.middleware DEBUG [0m Request body: 
03:05:56.807 gohan.db.sql INFO [0m Executing SQL query in transaction '91773b5e-788a-4337-abd4-2cb6e06106af': 'UPDATE `common_function_gateways` SET `vlan_id` = 1025, `id` = 5c241c51-2003-407a-a239-689fabd19022, `logical_tunnel_unit_user` = 1025, `common_function_pool_id` = cca32fd7-2430-4acc-87e9-a7b527e9918d, `primary_logical_interface_name` = ae0.1025, `vrf_name` = vrf_gw_sample-ha-router-downlink_1025, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `nat_ip` = 100.64.0.10, `downlink_interface_id` = 372ed357-e622-41fb-a613-076d332838e2, `subnet_id` = e1353d56-b05a-43a9-b924-383ab0d64d7b, `status` = PENDING_CREATE, `network_id` = f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57, `logical_tunnel_unit_service` = 11025, `common_functions` = [{"common_function_id":"18c64ec9-78c2-43ac-ae0d-48fa9b6c0858"},{"common_function_id":"c1be08ee-7cf2-4c84-8fe7-7e891d17bc71"}], `description` = , `name` = T0011CF000, `secondary_logical_interface_name` = ae0.1025, `state_version` = 1, `monitoring_version` = 0, `state_error` = , `state` = {"error":"","state":{"heat_outputs":"[]","state_monitoring":"{\"secondary_41\": \"backup\", \"primary_42\": \"master\", \"primary_41\": \"master\", \"secondary_42\": \"backup\"}","worker_state":"CREATE_COMPLETED"}}, `state_monitoring` = {}, `marked_for_deletion` = 0 WHERE id = 5c241c51-2003-407a-a239-689fabd19022'
03:05:56.809 gohan.extension.common_function_gateway.post_state_update_in_transaction INFO [0m Config version: 1, State version: 1, Monitoring version: 0
03:05:56.809 gohan.extension.common_function_gateway.post_state_update_in_transaction INFO [0m Reading monitoring data from worker state: {"secondary_41": "backup", "primary_42": "master", "primary_41": "master", "secondary_42": "backup"}
03:05:56.812 gohan.db.sql INFO [0m Executing SQL query in transaction '91773b5e-788a-4337-abd4-2cb6e06106af': 'UPDATE `common_function_gateways` SET `secondary_logical_interface_name` = ae0.1025, `name` = T0011CF000, `vlan_id` = 1025, `logical_tunnel_unit_user` = 1025, `common_function_pool_id` = cca32fd7-2430-4acc-87e9-a7b527e9918d, `primary_logical_interface_name` = ae0.1025, `id` = 5c241c51-2003-407a-a239-689fabd19022, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `nat_ip` = 100.64.0.10, `downlink_interface_id` = 372ed357-e622-41fb-a613-076d332838e2, `subnet_id` = e1353d56-b05a-43a9-b924-383ab0d64d7b, `status` = ACTIVE, `network_id` = f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57, `logical_tunnel_unit_service` = 11025, `vrf_name` = vrf_gw_sample-ha-router-downlink_1025, `description` = , `common_functions` = [{"common_function_id":"18c64ec9-78c2-43ac-ae0d-48fa9b6c0858"},{"common_function_id":"c1be08ee-7cf2-4c84-8fe7-7e891d17bc71"}] WHERE id = 5c241c51-2003-407a-a239-689fabd19022'
03:05:56.823 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/state/v2.0/common_function_gateways/5c241c51-2003-407a-a239-689fabd19022 with index 707
03:05:56.833 gohan.sync INFO [0m Path gohan/cluster/lock/state/v2.0/common_function_gateways/5c241c51-2003-407a-a239-689fabd19022 already unlocked or not locked
[36m03:05:56.899 gohan.server.resources DEBUG [0m Show common_function_gateway 5c241c51-2003-407a-a239-689fabd19022 started
[36m03:05:56.905 gohan.server.resources DEBUG [0m Show common_function_gateway 5c241c51-2003-407a-a239-689fabd19022 completed: map[common_function_gateway:map[nat_ip:100.64.0.10 status:ACTIVE common_functions:[map[common_function_id:18c64ec9-78c2-43ac-ae0d-48fa9b6c0858] map[common_function_id:c1be08ee-7cf2-4c84-8fe7-7e891d17bc71]] vlan_id:1025 primary_logical_interface_name:ae0.1025 network_id:f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 name:T0011CF000 logical_tunnel_unit_user:1025 downlink_interface_id:372ed357-e622-41fb-a613-076d332838e2 tenant_id:0b576f6f4cbf414f829cd12f008bf08f subnet_id:e1353d56-b05a-43a9-b924-383ab0d64d7b description: secondary_logical_interface_name:ae0.1025 id:5c241c51-2003-407a-a239-689fabd19022 common_function_pool_id:cca32fd7-2430-4acc-87e9-a7b527e9918d logical_tunnel_unit_service:11025 vrf_name:vrf_gw_sample-ha-router-downlink_1025]]
[36m03:05:56.905 gohan.server.middleware DEBUG [0m Response headers: map[Content-Length:[967] Content-Type:[application/json]]
[36m03:05:56.906 gohan.server.middleware DEBUG [0m Response body: {
  "common_function_gateway": {
    "common_function_pool_id": "cca32fd7-2430-4acc-87e9-a7b527e9918d",
    "common_functions": [
      {
        "common_function_id": "18c64ec9-78c2-43ac-ae0d-48fa9b6c0858"
      },
      {
        "common_function_id": "c1be08ee-7cf2-4c84-8fe7-7e891d17bc71"
      }
    ],
    "description": "",
    "downlink_interface_id": "372ed357-e622-41fb-a613-076d332838e2",
    "id": "5c241c51-2003-407a-a239-689fabd19022",
    "logical_tunnel_unit_service": "11025",
    "logical_tunnel_unit_user": "1025",
    "name": "T0011CF000",
    "nat_ip": "100.64.0.10",
    "network_id": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57",
    "primary_logical_interface_name": "ae0.1025",
    "secondary_logical_interface_name": "ae0.1025",
    "status": "ACTIVE",
    "subnet_id": "e1353d56-b05a-43a9-b924-383ab0d64d7b",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
    "vlan_id": "1025",
    "vrf_name": "vrf_gw_sample-ha-router-downlink_1025"
  }
}
03:05:56.906 gohan.server.middleware INFO [0m Completed 200 OK in 111.399776ms
03:06:00.002 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
03:06:00.011 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
[36m03:06:01.448 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] started
[36m03:06:01.489 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] completed
[36m03:06:01.495 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] started
03:06:01.498 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
[36m03:06:01.499 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] completed
03:06:01.507 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
[36m03:06:07.014 gohan.server DEBUG [0m State event update received: set /state/v2.0/ports/327f59b7-df38-4d8f-97db-d320defcab76 map[error: state:map[heat_outputs:[{"output_value": "bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb", "description": "Virtual network.", "output_key": "virtual_network"}, {"output_value": "default-domain:admin:327f59b7-df38-4d8f-97db-d320defcab76", "description": "Fully Qualified Name of the VMI", "output_key": "fq_name"}, {"output_value": "327f59b7-df38-4d8f-97db-d320defcab76", "description": "A unique id for the virtual machine interface.", "output_key": "id"}, {"output_value": "null", "description": "Virtual machine allowed address pairs.", "output_key": "allowed_address_pairs"}, {"output_value": "xx:xx:xx:xx:xx:xx", "description": "Virtual machine interface mac address.", "output_key": "mac_address"}] state_monitoring:{"vmi": "ACTIVE"} worker_state:CREATE_COMPLETED] version:2]
03:06:07.014 gohan.server.sync INFO [0m StateUpdate for set /state/v2.0/ports/327f59b7-df38-4d8f-97db-d320defcab76 map[error: state:map[heat_outputs:[{"output_value": "bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb", "description": "Virtual network.", "output_key": "virtual_network"}, {"output_value": "default-domain:admin:327f59b7-df38-4d8f-97db-d320defcab76", "description": "Fully Qualified Name of the VMI", "output_key": "fq_name"}, {"output_value": "327f59b7-df38-4d8f-97db-d320defcab76", "description": "A unique id for the virtual machine interface.", "output_key": "id"}, {"output_value": "null", "description": "Virtual machine allowed address pairs.", "output_key": "allowed_address_pairs"}, {"output_value": "xx:xx:xx:xx:xx:xx", "description": "Virtual machine interface mac address.", "output_key": "mac_address"}] state_monitoring:{"vmi": "ACTIVE"} worker_state:CREATE_COMPLETED] version:2] started
03:06:07.026 gohan.sync INFO [0m Locked gohan/cluster/lock/state/v2.0/ports/327f59b7-df38-4d8f-97db-d320defcab76 with index 759
[36m03:06:07.044 gohan.server DEBUG [0m State event update received: set /state/v2.0/ports/a778c668-6ccb-4d46-9ec3-956693262d63 map[error: state:map[heat_outputs:[{"output_value": "bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb", "description": "Virtual network.", "output_key": "virtual_network"}, {"output_value": "default-domain:admin:a778c668-6ccb-4d46-9ec3-956693262d63", "description": "Fully Qualified Name of the VMI", "output_key": "fq_name"}, {"output_value": "a778c668-6ccb-4d46-9ec3-956693262d63", "description": "A unique id for the virtual machine interface.", "output_key": "id"}, {"output_value": "null", "description": "Virtual machine allowed address pairs.", "output_key": "allowed_address_pairs"}, {"output_value": "xx:xx:xx:xx:xx:xx", "description": "Virtual machine interface mac address.", "output_key": "mac_address"}] state_monitoring:{"vmi": "ACTIVE"} worker_state:CREATE_COMPLETED] version:2]
03:06:07.044 gohan.server.sync INFO [0m StateUpdate for set /state/v2.0/ports/a778c668-6ccb-4d46-9ec3-956693262d63 map[version:2 error: state:map[heat_outputs:[{"output_value": "bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb", "description": "Virtual network.", "output_key": "virtual_network"}, {"output_value": "default-domain:admin:a778c668-6ccb-4d46-9ec3-956693262d63", "description": "Fully Qualified Name of the VMI", "output_key": "fq_name"}, {"output_value": "a778c668-6ccb-4d46-9ec3-956693262d63", "description": "A unique id for the virtual machine interface.", "output_key": "id"}, {"output_value": "null", "description": "Virtual machine allowed address pairs.", "output_key": "allowed_address_pairs"}, {"output_value": "xx:xx:xx:xx:xx:xx", "description": "Virtual machine interface mac address.", "output_key": "mac_address"}] state_monitoring:{"vmi": "ACTIVE"} worker_state:CREATE_COMPLETED]] started
03:06:07.052 gohan.sync INFO [0m Locked gohan/cluster/lock/state/v2.0/ports/a778c668-6ccb-4d46-9ec3-956693262d63 with index 766
03:06:07.117 gohan.db.sql INFO [0m Executing SQL query in transaction '8f1686a9-3392-4ed5-a71e-8d3cbd3aac51': 'UPDATE `ports` SET `id` = 327f59b7-df38-4d8f-97db-d320defcab76, `tags` = {}, `attached` = true, `device_id` = 5c241c51-2003-407a-a239-689fabd19022, `name` = common_function_gw_5c241c51-2003-407a-a239-689fabd19022_primary_port:976156ef-05b4-47f4-9497-a36531563a08, `managed_by_service` = true, `ese_logical_port_id` = b04853c4-6ebf-441f-9093-ea4b844c4bc7, `binding:vif_type` = vrouter, `device_owner` = network:common_function_gateway, `fixed_ips` = [{"ip_address":"169.254.0.3","subnet_id":"e1353d56-b05a-43a9-b924-383ab0d64d7b"}], `network_id` = f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `allowed_address_pairs` = [], `description` = , `segmentation_id` = 1025, `mac_address` = fa:16:3e:e5:f6:39, `fake_delete` = false, `status` = PENDING_CREATE, `segmentation_type` = vlan, `admin_state_up` = true, `state_version` = 2, `monitoring_version` = 0, `state_error` = , `state` = {"error":"","state":{"heat_outputs":"[{\"output_value\": \"bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb\", \"description\": \"Virtual network.\", \"output_key\": \"virtual_network\"}, {\"output_value\": \"default-domain:admin:327f59b7-df38-4d8f-97db-d320defcab76\", \"description\": \"Fully Qualified Name of the VMI\", \"output_key\": \"fq_name\"}, {\"output_value\": \"327f59b7-df38-4d8f-97db-d320defcab76\", \"description\": \"A unique id for the virtual machine interface.\", \"output_key\": \"id\"}, {\"output_value\": \"null\", \"description\": \"Virtual machine allowed address pairs.\", \"output_key\": \"allowed_address_pairs\"}, {\"output_value\": \"xx:xx:xx:xx:xx:xx\", \"description\": \"Virtual machine interface mac address.\", \"output_key\": \"mac_address\"}]","state_monitoring":"{\"vmi\": \"ACTIVE\"}","worker_state":"CREATE_COMPLETED"}}, `state_monitoring` = {}, `marked_for_deletion` = 0 WHERE id = 327f59b7-df38-4d8f-97db-d320defcab76'
03:06:07.118 gohan.extension.port.post_state_update_in_transaction INFO [0m Config version: 2, State version: 2, Monitoring version: 0
03:06:07.118 gohan.extension.port.post_state_update_in_transaction INFO [0m Reading monitoring data from worker state: {"vmi": "ACTIVE"}
03:06:07.121 gohan.db.sql INFO [0m Executing SQL query in transaction '8f1686a9-3392-4ed5-a71e-8d3cbd3aac51': 'UPDATE `ports` SET `device_owner` = network:common_function_gateway, `binding:vif_type` = vrouter, `fake_delete` = false, `fixed_ips` = [{"ip_address":"169.254.0.3","subnet_id":"e1353d56-b05a-43a9-b924-383ab0d64d7b"}], `network_id` = f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `allowed_address_pairs` = [], `description` = , `segmentation_id` = 1025, `mac_address` = fa:16:3e:e5:f6:39, `admin_state_up` = true, `status` = ACTIVE, `segmentation_type` = vlan, `attached` = true, `id` = 327f59b7-df38-4d8f-97db-d320defcab76, `tags` = {}, `ese_logical_port_id` = b04853c4-6ebf-441f-9093-ea4b844c4bc7, `device_id` = 5c241c51-2003-407a-a239-689fabd19022, `name` = common_function_gw_5c241c51-2003-407a-a239-689fabd19022_primary_port:976156ef-05b4-47f4-9497-a36531563a08, `managed_by_service` = true WHERE id = 327f59b7-df38-4d8f-97db-d320defcab76'
03:06:07.136 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/state/v2.0/ports/327f59b7-df38-4d8f-97db-d320defcab76 with index 759
Endpoint for service monitoring not found.
[31m03:06:07.137 gohan.extension.port.post_state_update ERROR [0m No monitoring endpoint found for monitoring
03:06:07.142 gohan.db.sql INFO [0m Executing SQL query in transaction '20c723d8-0f6e-47c4-a846-a8cfdfff68a3': 'UPDATE `ports` SET `attached` = true, `id` = a778c668-6ccb-4d46-9ec3-956693262d63, `tags` = {}, `managed_by_service` = true, `ese_logical_port_id` = 9c601c38-a854-459d-aec2-433873b3a4e6, `device_id` = 5c241c51-2003-407a-a239-689fabd19022, `name` = common_function_gw_5c241c51-2003-407a-a239-689fabd19022_secondary_port:5b2dee2e-7420-4cd4-b270-5081eb9eb371, `device_owner` = network:common_function_gateway, `binding:vif_type` = vrouter, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `allowed_address_pairs` = [], `description` = , `segmentation_id` = 1025, `mac_address` = fa:16:3e:0c:b0:eb, `fake_delete` = false, `fixed_ips` = [{"ip_address":"169.254.0.4","subnet_id":"e1353d56-b05a-43a9-b924-383ab0d64d7b"}], `network_id` = f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57, `admin_state_up` = true, `status` = PENDING_CREATE, `segmentation_type` = vlan, `state_version` = 2, `monitoring_version` = 0, `state_error` = , `state` = {"error":"","state":{"heat_outputs":"[{\"output_value\": \"bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb\", \"description\": \"Virtual network.\", \"output_key\": \"virtual_network\"}, {\"output_value\": \"default-domain:admin:a778c668-6ccb-4d46-9ec3-956693262d63\", \"description\": \"Fully Qualified Name of the VMI\", \"output_key\": \"fq_name\"}, {\"output_value\": \"a778c668-6ccb-4d46-9ec3-956693262d63\", \"description\": \"A unique id for the virtual machine interface.\", \"output_key\": \"id\"}, {\"output_value\": \"null\", \"description\": \"Virtual machine allowed address pairs.\", \"output_key\": \"allowed_address_pairs\"}, {\"output_value\": \"xx:xx:xx:xx:xx:xx\", \"description\": \"Virtual machine interface mac address.\", \"output_key\": \"mac_address\"}]","state_monitoring":"{\"vmi\": \"ACTIVE\"}","worker_state":"CREATE_COMPLETED"}}, `state_monitoring` = {}, `marked_for_deletion` = 0 WHERE id = a778c668-6ccb-4d46-9ec3-956693262d63'
03:06:07.144 gohan.sync INFO [0m Path gohan/cluster/lock/state/v2.0/ports/327f59b7-df38-4d8f-97db-d320defcab76 already unlocked or not locked
03:06:07.145 gohan.extension.port.post_state_update_in_transaction INFO [0m Config version: 2, State version: 2, Monitoring version: 0
03:06:07.145 gohan.extension.port.post_state_update_in_transaction INFO [0m Reading monitoring data from worker state: {"vmi": "ACTIVE"}
03:06:07.149 gohan.db.sql INFO [0m Executing SQL query in transaction '20c723d8-0f6e-47c4-a846-a8cfdfff68a3': 'UPDATE `ports` SET `fixed_ips` = [{"ip_address":"169.254.0.4","subnet_id":"e1353d56-b05a-43a9-b924-383ab0d64d7b"}], `network_id` = f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `allowed_address_pairs` = [], `description` = , `segmentation_id` = 1025, `mac_address` = fa:16:3e:0c:b0:eb, `fake_delete` = false, `status` = ACTIVE, `segmentation_type` = vlan, `admin_state_up` = true, `id` = a778c668-6ccb-4d46-9ec3-956693262d63, `tags` = {}, `attached` = true, `device_id` = 5c241c51-2003-407a-a239-689fabd19022, `name` = common_function_gw_5c241c51-2003-407a-a239-689fabd19022_secondary_port:5b2dee2e-7420-4cd4-b270-5081eb9eb371, `managed_by_service` = true, `ese_logical_port_id` = 9c601c38-a854-459d-aec2-433873b3a4e6, `binding:vif_type` = vrouter, `device_owner` = network:common_function_gateway WHERE id = a778c668-6ccb-4d46-9ec3-956693262d63'
03:06:07.173 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/state/v2.0/ports/a778c668-6ccb-4d46-9ec3-956693262d63 with index 766
Endpoint for service monitoring not found.
[31m03:06:07.174 gohan.extension.port.post_state_update ERROR [0m No monitoring endpoint found for monitoring
03:06:07.180 gohan.sync INFO [0m Path gohan/cluster/lock/state/v2.0/ports/a778c668-6ccb-4d46-9ec3-956693262d63 already unlocked or not locked
[36m03:06:09.620 gohan.server DEBUG [0m Monitoring event update received: set /monitoring/v2.0/ports/327f59b7-df38-4d8f-97db-d320defcab76 map[vmi:UP version:2]
03:06:09.620 gohan.server.sync INFO [0m MonitoringUpdate for set /monitoring/v2.0/ports/327f59b7-df38-4d8f-97db-d320defcab76 map[vmi:UP version:2] started
[36m03:06:09.638 gohan.server DEBUG [0m Monitoring event update received: set /monitoring/v2.0/ports/a778c668-6ccb-4d46-9ec3-956693262d63 map[vmi:UP version:2]
03:06:09.638 gohan.server.sync INFO [0m MonitoringUpdate for set /monitoring/v2.0/ports/a778c668-6ccb-4d46-9ec3-956693262d63 map[vmi:UP version:2] started
03:06:09.639 gohan.sync INFO [0m Locked gohan/cluster/lock/monitoring/v2.0/ports/327f59b7-df38-4d8f-97db-d320defcab76 with index 780
03:06:09.654 gohan.sync INFO [0m Locked gohan/cluster/lock/monitoring/v2.0/ports/a778c668-6ccb-4d46-9ec3-956693262d63 with index 782
03:06:09.691 gohan.db.sql INFO [0m Executing SQL query in transaction 'c3c03a9e-955d-48f7-a8ef-a3a550b1857c': 'UPDATE `ports` SET `attached` = true, `id` = 327f59b7-df38-4d8f-97db-d320defcab76, `tags` = {}, `ese_logical_port_id` = b04853c4-6ebf-441f-9093-ea4b844c4bc7, `device_id` = 5c241c51-2003-407a-a239-689fabd19022, `name` = common_function_gw_5c241c51-2003-407a-a239-689fabd19022_primary_port:976156ef-05b4-47f4-9497-a36531563a08, `managed_by_service` = true, `device_owner` = network:common_function_gateway, `binding:vif_type` = vrouter, `description` = , `segmentation_id` = 1025, `mac_address` = fa:16:3e:e5:f6:39, `fake_delete` = false, `fixed_ips` = [{"ip_address":"169.254.0.3","subnet_id":"e1353d56-b05a-43a9-b924-383ab0d64d7b"}], `network_id` = f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `allowed_address_pairs` = [], `admin_state_up` = true, `status` = ACTIVE, `segmentation_type` = vlan, `state_version` = 2, `monitoring_version` = 2, `state_error` = , `state` = {"error":"","state":{"heat_outputs":"[{\"output_value\": \"bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb\", \"description\": \"Virtual network.\", \"output_key\": \"virtual_network\"}, {\"output_value\": \"default-domain:admin:327f59b7-df38-4d8f-97db-d320defcab76\", \"description\": \"Fully Qualified Name of the VMI\", \"output_key\": \"fq_name\"}, {\"output_value\": \"327f59b7-df38-4d8f-97db-d320defcab76\", \"description\": \"A unique id for the virtual machine interface.\", \"output_key\": \"id\"}, {\"output_value\": \"null\", \"description\": \"Virtual machine allowed address pairs.\", \"output_key\": \"allowed_address_pairs\"}, {\"output_value\": \"xx:xx:xx:xx:xx:xx\", \"description\": \"Virtual machine interface mac address.\", \"output_key\": \"mac_address\"}]","state_monitoring":"{\"vmi\": \"ACTIVE\"}","worker_state":"CREATE_COMPLETED"}}, `state_monitoring` = {"vmi":"UP"}, `marked_for_deletion` = 0 WHERE id = 327f59b7-df38-4d8f-97db-d320defcab76'
03:06:09.692 gohan.extension.port.post_monitoring_update_in_transaction INFO [0m Config version: 2, State version: 2, Monitoring version: 2
03:06:09.692 gohan.extension.port.post_monitoring_update_in_transaction INFO [0m Reading monitoring data from worker state: {"vmi": "ACTIVE"}
03:06:09.693 gohan.extension.port.post_monitoring_update_in_transaction INFO [0m Overriding monitoring data with data from monitoring backend: {"vmi":"UP"}
03:06:09.714 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/monitoring/v2.0/ports/327f59b7-df38-4d8f-97db-d320defcab76 with index 780
03:06:09.714 gohan.server.sync INFO [0m MonitoringUpdate for set /monitoring/v2.0/ports/327f59b7-df38-4d8f-97db-d320defcab76 completed
03:06:09.724 gohan.sync INFO [0m Path gohan/cluster/lock/monitoring/v2.0/ports/327f59b7-df38-4d8f-97db-d320defcab76 already unlocked or not locked
03:06:09.728 gohan.db.sql INFO [0m Executing SQL query in transaction '09f01740-9621-405b-9f04-5f93fe85a738': 'UPDATE `ports` SET `attached` = true, `id` = a778c668-6ccb-4d46-9ec3-956693262d63, `tags` = {}, `managed_by_service` = true, `ese_logical_port_id` = 9c601c38-a854-459d-aec2-433873b3a4e6, `device_id` = 5c241c51-2003-407a-a239-689fabd19022, `name` = common_function_gw_5c241c51-2003-407a-a239-689fabd19022_secondary_port:5b2dee2e-7420-4cd4-b270-5081eb9eb371, `device_owner` = network:common_function_gateway, `binding:vif_type` = vrouter, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `allowed_address_pairs` = [], `description` = , `segmentation_id` = 1025, `mac_address` = fa:16:3e:0c:b0:eb, `fake_delete` = false, `fixed_ips` = [{"ip_address":"169.254.0.4","subnet_id":"e1353d56-b05a-43a9-b924-383ab0d64d7b"}], `network_id` = f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57, `admin_state_up` = true, `status` = ACTIVE, `segmentation_type` = vlan, `state_version` = 2, `monitoring_version` = 2, `state_error` = , `state` = {"error":"","state":{"heat_outputs":"[{\"output_value\": \"bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb\", \"description\": \"Virtual network.\", \"output_key\": \"virtual_network\"}, {\"output_value\": \"default-domain:admin:a778c668-6ccb-4d46-9ec3-956693262d63\", \"description\": \"Fully Qualified Name of the VMI\", \"output_key\": \"fq_name\"}, {\"output_value\": \"a778c668-6ccb-4d46-9ec3-956693262d63\", \"description\": \"A unique id for the virtual machine interface.\", \"output_key\": \"id\"}, {\"output_value\": \"null\", \"description\": \"Virtual machine allowed address pairs.\", \"output_key\": \"allowed_address_pairs\"}, {\"output_value\": \"xx:xx:xx:xx:xx:xx\", \"description\": \"Virtual machine interface mac address.\", \"output_key\": \"mac_address\"}]","state_monitoring":"{\"vmi\": \"ACTIVE\"}","worker_state":"CREATE_COMPLETED"}}, `state_monitoring` = {"vmi":"UP"}, `marked_for_deletion` = 0 WHERE id = a778c668-6ccb-4d46-9ec3-956693262d63'
03:06:09.731 gohan.extension.port.post_monitoring_update_in_transaction INFO [0m Config version: 2, State version: 2, Monitoring version: 2
03:06:09.731 gohan.extension.port.post_monitoring_update_in_transaction INFO [0m Reading monitoring data from worker state: {"vmi": "ACTIVE"}
03:06:09.731 gohan.extension.port.post_monitoring_update_in_transaction INFO [0m Overriding monitoring data with data from monitoring backend: {"vmi":"UP"}
03:06:09.770 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/monitoring/v2.0/ports/a778c668-6ccb-4d46-9ec3-956693262d63 with index 782
03:06:09.770 gohan.server.sync INFO [0m MonitoringUpdate for set /monitoring/v2.0/ports/a778c668-6ccb-4d46-9ec3-956693262d63 completed
03:06:09.777 gohan.sync INFO [0m Path gohan/cluster/lock/monitoring/v2.0/ports/a778c668-6ccb-4d46-9ec3-956693262d63 already unlocked or not locked
[36m03:06:14.372 gohan.server DEBUG [0m Monitoring event update received: set /monitoring/v2.0/ese_logical_ports/b04853c4-6ebf-441f-9093-ea4b844c4bc7 map[logical_port:UP version:1]
03:06:14.373 gohan.server.sync INFO [0m MonitoringUpdate for set /monitoring/v2.0/ese_logical_ports/b04853c4-6ebf-441f-9093-ea4b844c4bc7 map[version:1 logical_port:UP] started
03:06:14.377 gohan.sync INFO [0m Locked gohan/cluster/lock/monitoring/v2.0/ese_logical_ports/b04853c4-6ebf-441f-9093-ea4b844c4bc7 with index 789
[36m03:06:14.379 gohan.server DEBUG [0m Monitoring event update received: set /monitoring/v2.0/ese_logical_ports/9c601c38-a854-459d-aec2-433873b3a4e6 map[version:1 logical_port:UP]
03:06:14.380 gohan.server.sync INFO [0m MonitoringUpdate for set /monitoring/v2.0/ese_logical_ports/9c601c38-a854-459d-aec2-433873b3a4e6 map[logical_port:UP version:1] started
03:06:14.386 gohan.sync INFO [0m Locked gohan/cluster/lock/monitoring/v2.0/ese_logical_ports/9c601c38-a854-459d-aec2-433873b3a4e6 with index 791
03:06:14.438 gohan.db.sql INFO [0m Executing SQL query in transaction 'f4cc7d00-c763-465f-a9f8-8c9b8b5f4f9b': 'UPDATE `ese_logical_ports` SET `name` = xe-0/0/3.1025, `ese_physical_port_id` = 976156ef-05b4-47f4-9497-a36531563a08, `network_id` = f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `connected_resource` = common_function_gateway, `gw_interface_id` = <nil>, `common_function_gateway_id` = 5c241c51-2003-407a-a239-689fabd19022, `description` = ESE Logical port for Port 327f59b7-df38-4d8f-97db-d320defcab76, `vlan_id` = 1025, `id` = b04853c4-6ebf-441f-9093-ea4b844c4bc7, `type` = L2, `tags` = {}, `status` = ACTIVE, `port_ids` = ["327f59b7-df38-4d8f-97db-d320defcab76"], ese_physical_port_id = 976156ef-05b4-47f4-9497-a36531563a08, `state_version` = 1, `monitoring_version` = 1, `state_error` = , `state` = {"error":"","state":{"heat_outputs":"[{\"output_value\": \"cccccccc-cccc-cccc-cccc-cccccccccccc\", \"description\": \"A unique id for the logical interface\", \"output_key\": \"id\"}, {\"output_value\": null, \"output_error\": \"'ContrailLogicalInterface' object has no attribute 'li_uuid'\", \"description\": \"The name of the logical interface.\", \"output_key\": \"name\"}]","state_monitoring":"{\"logical_port\": \"ACTIVE\"}","worker_state":"CREATE_COMPLETED"}}, `state_monitoring` = {"logical_port":"UP"}, `marked_for_deletion` = 0 WHERE id = b04853c4-6ebf-441f-9093-ea4b844c4bc7'
03:06:14.440 gohan.extension.ese_logical_port.post_monitoring_update_in_transaction INFO [0m Config version: 1, State version: 1, Monitoring version: 1
03:06:14.440 gohan.extension.ese_logical_port.post_monitoring_update_in_transaction INFO [0m Reading monitoring data from worker state: {"logical_port": "ACTIVE"}
03:06:14.440 gohan.extension.ese_logical_port.post_monitoring_update_in_transaction INFO [0m Overriding monitoring data with data from monitoring backend: {"logical_port":"UP"}
03:06:14.449 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/monitoring/v2.0/ese_logical_ports/b04853c4-6ebf-441f-9093-ea4b844c4bc7 with index 789
03:06:14.450 gohan.server.sync INFO [0m MonitoringUpdate for set /monitoring/v2.0/ese_logical_ports/b04853c4-6ebf-441f-9093-ea4b844c4bc7 completed
03:06:14.461 gohan.sync INFO [0m Path gohan/cluster/lock/monitoring/v2.0/ese_logical_ports/b04853c4-6ebf-441f-9093-ea4b844c4bc7 already unlocked or not locked
03:06:14.467 gohan.db.sql INFO [0m Executing SQL query in transaction 'ad3c850d-c34e-4578-a4b8-0747a1da634d': 'UPDATE `ese_logical_ports` SET `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `name` = xe-0/0/4.1025, `ese_physical_port_id` = 5b2dee2e-7420-4cd4-b270-5081eb9eb371, `network_id` = f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57, `description` = ESE Logical port for Port a778c668-6ccb-4d46-9ec3-956693262d63, `connected_resource` = common_function_gateway, `gw_interface_id` = <nil>, `common_function_gateway_id` = 5c241c51-2003-407a-a239-689fabd19022, `id` = 9c601c38-a854-459d-aec2-433873b3a4e6, `vlan_id` = 1025, `port_ids` = ["a778c668-6ccb-4d46-9ec3-956693262d63"], `type` = L2, `tags` = {}, `status` = ACTIVE, ese_physical_port_id = 5b2dee2e-7420-4cd4-b270-5081eb9eb371, `state_version` = 1, `monitoring_version` = 1, `state_error` = , `state` = {"error":"","state":{"heat_outputs":"[{\"output_value\": \"cccccccc-cccc-cccc-cccc-cccccccccccc\", \"description\": \"A unique id for the logical interface\", \"output_key\": \"id\"}, {\"output_value\": null, \"output_error\": \"'ContrailLogicalInterface' object has no attribute 'li_uuid'\", \"description\": \"The name of the logical interface.\", \"output_key\": \"name\"}]","state_monitoring":"{\"logical_port\": \"ACTIVE\"}","worker_state":"CREATE_COMPLETED"}}, `state_monitoring` = {"logical_port":"UP"}, `marked_for_deletion` = 0 WHERE id = 9c601c38-a854-459d-aec2-433873b3a4e6'
03:06:14.469 gohan.extension.ese_logical_port.post_monitoring_update_in_transaction INFO [0m Config version: 1, State version: 1, Monitoring version: 1
03:06:14.469 gohan.extension.ese_logical_port.post_monitoring_update_in_transaction INFO [0m Reading monitoring data from worker state: {"logical_port": "ACTIVE"}
03:06:14.469 gohan.extension.ese_logical_port.post_monitoring_update_in_transaction INFO [0m Overriding monitoring data with data from monitoring backend: {"logical_port":"UP"}
03:06:14.482 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/monitoring/v2.0/ese_logical_ports/9c601c38-a854-459d-aec2-433873b3a4e6 with index 791
03:06:14.483 gohan.server.sync INFO [0m MonitoringUpdate for set /monitoring/v2.0/ese_logical_ports/9c601c38-a854-459d-aec2-433873b3a4e6 completed
03:06:14.494 gohan.sync INFO [0m Path gohan/cluster/lock/monitoring/v2.0/ese_logical_ports/9c601c38-a854-459d-aec2-433873b3a4e6 already unlocked or not locked
03:06:17.280 gohan.server.middleware INFO [0m Started GET /v2.0/common_function_gateways/5c241c51-2003-407a-a239-689fabd19022 for client 172.17.0.19:40872 data: 
[36m03:06:17.280 gohan.server.middleware DEBUG [0m Request headers: map[User-Agent:[gophercloud/1.0.0] Connection:[close] Accept:[application/json] X-Auth-Token:[***] Accept-Encoding:[gzip]]
[36m03:06:17.280 gohan.server.middleware DEBUG [0m Request body: 
[36m03:06:17.377 gohan.server.resources DEBUG [0m Show common_function_gateway 5c241c51-2003-407a-a239-689fabd19022 started
[36m03:06:17.380 gohan.server.resources DEBUG [0m Show common_function_gateway 5c241c51-2003-407a-a239-689fabd19022 completed: map[common_function_gateway:map[status:ACTIVE secondary_logical_interface_name:ae0.1025 logical_tunnel_unit_user:1025 network_id:f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 name:T0011CF000 vlan_id:1025 id:5c241c51-2003-407a-a239-689fabd19022 common_function_pool_id:cca32fd7-2430-4acc-87e9-a7b527e9918d downlink_interface_id:372ed357-e622-41fb-a613-076d332838e2 logical_tunnel_unit_service:11025 tenant_id:0b576f6f4cbf414f829cd12f008bf08f nat_ip:100.64.0.10 description: primary_logical_interface_name:ae0.1025 common_functions:[map[common_function_id:18c64ec9-78c2-43ac-ae0d-48fa9b6c0858] map[common_function_id:c1be08ee-7cf2-4c84-8fe7-7e891d17bc71]] vrf_name:vrf_gw_sample-ha-router-downlink_1025 subnet_id:e1353d56-b05a-43a9-b924-383ab0d64d7b]]
[36m03:06:17.381 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[967]]
[36m03:06:17.381 gohan.server.middleware DEBUG [0m Response body: {
  "common_function_gateway": {
    "common_function_pool_id": "cca32fd7-2430-4acc-87e9-a7b527e9918d",
    "common_functions": [
      {
        "common_function_id": "18c64ec9-78c2-43ac-ae0d-48fa9b6c0858"
      },
      {
        "common_function_id": "c1be08ee-7cf2-4c84-8fe7-7e891d17bc71"
      }
    ],
    "description": "",
    "downlink_interface_id": "372ed357-e622-41fb-a613-076d332838e2",
    "id": "5c241c51-2003-407a-a239-689fabd19022",
    "logical_tunnel_unit_service": "11025",
    "logical_tunnel_unit_user": "1025",
    "name": "T0011CF000",
    "nat_ip": "100.64.0.10",
    "network_id": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57",
    "primary_logical_interface_name": "ae0.1025",
    "secondary_logical_interface_name": "ae0.1025",
    "status": "ACTIVE",
    "subnet_id": "e1353d56-b05a-43a9-b924-383ab0d64d7b",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
    "vlan_id": "1025",
    "vrf_name": "vrf_gw_sample-ha-router-downlink_1025"
  }
}
03:06:17.381 gohan.server.middleware INFO [0m Completed 200 OK in 101.315891ms
03:06:17.383 gohan.server.middleware INFO [0m Started GET /v2.0/common_function_gateways/5c241c51-2003-407a-a239-689fabd19022 for client 172.17.0.19:40878 data: {}
[36m03:06:17.383 gohan.server.middleware DEBUG [0m Request headers: map[Content-Length:[2] Accept:[application/json] Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[gzip] User-Agent:[gophercloud/1.0.0] Connection:[close]]
[36m03:06:17.383 gohan.server.middleware DEBUG [0m Request body: {}
[36m03:06:17.468 gohan.server.resources DEBUG [0m Show common_function_gateway 5c241c51-2003-407a-a239-689fabd19022 started
[36m03:06:17.471 gohan.server.resources DEBUG [0m Show common_function_gateway 5c241c51-2003-407a-a239-689fabd19022 completed: map[common_function_gateway:map[network_id:f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 secondary_logical_interface_name:ae0.1025 nat_ip:100.64.0.10 status:ACTIVE tenant_id:0b576f6f4cbf414f829cd12f008bf08f vlan_id:1025 primary_logical_interface_name:ae0.1025 logical_tunnel_unit_service:11025 vrf_name:vrf_gw_sample-ha-router-downlink_1025 subnet_id:e1353d56-b05a-43a9-b924-383ab0d64d7b description: common_functions:[map[common_function_id:18c64ec9-78c2-43ac-ae0d-48fa9b6c0858] map[common_function_id:c1be08ee-7cf2-4c84-8fe7-7e891d17bc71]] name:T0011CF000 id:5c241c51-2003-407a-a239-689fabd19022 common_function_pool_id:cca32fd7-2430-4acc-87e9-a7b527e9918d logical_tunnel_unit_user:1025 downlink_interface_id:372ed357-e622-41fb-a613-076d332838e2]]
[36m03:06:17.472 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[967]]
[36m03:06:17.472 gohan.server.middleware DEBUG [0m Response body: {
  "common_function_gateway": {
    "common_function_pool_id": "cca32fd7-2430-4acc-87e9-a7b527e9918d",
    "common_functions": [
      {
        "common_function_id": "18c64ec9-78c2-43ac-ae0d-48fa9b6c0858"
      },
      {
        "common_function_id": "c1be08ee-7cf2-4c84-8fe7-7e891d17bc71"
      }
    ],
    "description": "",
    "downlink_interface_id": "372ed357-e622-41fb-a613-076d332838e2",
    "id": "5c241c51-2003-407a-a239-689fabd19022",
    "logical_tunnel_unit_service": "11025",
    "logical_tunnel_unit_user": "1025",
    "name": "T0011CF000",
    "nat_ip": "100.64.0.10",
    "network_id": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57",
    "primary_logical_interface_name": "ae0.1025",
    "secondary_logical_interface_name": "ae0.1025",
    "status": "ACTIVE",
    "subnet_id": "e1353d56-b05a-43a9-b924-383ab0d64d7b",
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
    "vlan_id": "1025",
    "vrf_name": "vrf_gw_sample-ha-router-downlink_1025"
  }
}
03:06:17.472 gohan.server.middleware INFO [0m Completed 200 OK in 88.89105ms
03:06:19.997 gohan.server.middleware INFO [0m Started GET /v2.0/networks for client 172.17.0.19:40902 data: {}
[36m03:06:19.997 gohan.server.middleware DEBUG [0m Request headers: map[X-Auth-Token:[***] Accept-Encoding:[gzip] User-Agent:[gophercloud/1.0.0] Connection:[close] Content-Length:[2] Accept:[application/json] Content-Type:[application/json]]
[36m03:06:19.997 gohan.server.middleware DEBUG [0m Request body: {}
[36m03:06:20.068 gohan.server.resources DEBUG [0m List network query: map[] started
[36m03:06:20.119 gohan.server.resources DEBUG [0m List subnet query: map[] started
[36m03:06:20.121 gohan.server.resources DEBUG [0m List subnet query: map[] completed
[36m03:06:20.121 gohan.server.resources DEBUG [0m List network query: map[] completed
[36m03:06:20.122 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] X-Total-Count:[1] Content-Length:[441]]
[36m03:06:20.122 gohan.server.middleware DEBUG [0m Response body: {
  "networks": [
    {
      "admin_state_up": true,
      "description": "",
      "id": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57",
      "name": "common_function_gw_access_5c241c51-2003-407a-a239-689fabd19022",
      "plane": "data",
      "shared": false,
      "status": "ACTIVE",
      "subnets": [
        "e1353d56-b05a-43a9-b924-383ab0d64d7b"
      ],
      "tags": {},
      "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
    }
  ]
}
03:06:20.122 gohan.server.middleware INFO [0m Completed 200 OK in 124.476979ms
03:06:20.463 gohan.server.middleware INFO [0m Started GET /v2.0/networks/f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 for client 172.17.0.19:40912 data: 
[36m03:06:20.463 gohan.server.middleware DEBUG [0m Request headers: map[User-Agent:[gophercloud/1.0.0] Connection:[close] Accept:[application/json] X-Auth-Token:[***] Accept-Encoding:[gzip]]
[36m03:06:20.464 gohan.server.middleware DEBUG [0m Request body: 
[36m03:06:20.534 gohan.server.resources DEBUG [0m Show network f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 started
[36m03:06:20.585 gohan.server.resources DEBUG [0m List subnet query: map[network_id:[f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57]] started
[36m03:06:20.586 gohan.server.resources DEBUG [0m List subnet query: map[network_id:[f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57]] completed
[36m03:06:20.587 gohan.server.resources DEBUG [0m Show network f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 completed: map[network:map[tags:map[] tenant_id:0b576f6f4cbf414f829cd12f008bf08f description: admin_state_up:true plane:data status:ACTIVE subnets:[e1353d56-b05a-43a9-b924-383ab0d64d7b] id:f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 name:common_function_gw_access_5c241c51-2003-407a-a239-689fabd19022 shared:false]]
[36m03:06:20.587 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[404]]
[36m03:06:20.587 gohan.server.middleware DEBUG [0m Response body: {
  "network": {
    "admin_state_up": true,
    "description": "",
    "id": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57",
    "name": "common_function_gw_access_5c241c51-2003-407a-a239-689fabd19022",
    "plane": "data",
    "shared": false,
    "status": "ACTIVE",
    "subnets": [
      "e1353d56-b05a-43a9-b924-383ab0d64d7b"
    ],
    "tags": {},
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:06:20.587 gohan.server.middleware INFO [0m Completed 200 OK in 124.131692ms
03:06:20.589 gohan.server.middleware INFO [0m Started GET /v2.0/networks/f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 for client 172.17.0.19:40920 data: {}
[36m03:06:20.589 gohan.server.middleware DEBUG [0m Request headers: map[Connection:[close] Content-Length:[2] Accept:[application/json] Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[gzip] User-Agent:[gophercloud/1.0.0]]
[36m03:06:20.589 gohan.server.middleware DEBUG [0m Request body: {}
[36m03:06:20.659 gohan.server.resources DEBUG [0m Show network f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 started
[36m03:06:20.710 gohan.server.resources DEBUG [0m List subnet query: map[network_id:[f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57]] started
[36m03:06:20.712 gohan.server.resources DEBUG [0m List subnet query: map[network_id:[f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57]] completed
[36m03:06:20.713 gohan.server.resources DEBUG [0m Show network f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 completed: map[network:map[tenant_id:0b576f6f4cbf414f829cd12f008bf08f subnets:[e1353d56-b05a-43a9-b924-383ab0d64d7b] tags:map[] status:ACTIVE description: shared:false admin_state_up:true id:f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 name:common_function_gw_access_5c241c51-2003-407a-a239-689fabd19022 plane:data]]
[36m03:06:20.713 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[404]]
[36m03:06:20.713 gohan.server.middleware DEBUG [0m Response body: {
  "network": {
    "admin_state_up": true,
    "description": "",
    "id": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57",
    "name": "common_function_gw_access_5c241c51-2003-407a-a239-689fabd19022",
    "plane": "data",
    "shared": false,
    "status": "ACTIVE",
    "subnets": [
      "e1353d56-b05a-43a9-b924-383ab0d64d7b"
    ],
    "tags": {},
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:06:20.713 gohan.server.middleware INFO [0m Completed 200 OK in 124.437698ms
03:06:23.090 gohan.server.middleware INFO [0m Started GET /v2.0/networks/f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 for client 172.17.0.19:40944 data: 
[36m03:06:23.090 gohan.server.middleware DEBUG [0m Request headers: map[Accept:[application/json] X-Auth-Token:[***] Accept-Encoding:[gzip] User-Agent:[gophercloud/1.0.0] Connection:[close]]
[36m03:06:23.090 gohan.server.middleware DEBUG [0m Request body: 
[36m03:06:23.156 gohan.server.resources DEBUG [0m Show network f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 started
[36m03:06:23.205 gohan.server.resources DEBUG [0m List subnet query: map[network_id:[f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57]] started
[36m03:06:23.207 gohan.server.resources DEBUG [0m List subnet query: map[network_id:[f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57]] completed
[36m03:06:23.208 gohan.server.resources DEBUG [0m Show network f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 completed: map[network:map[tags:map[] admin_state_up:true name:common_function_gw_access_5c241c51-2003-407a-a239-689fabd19022 plane:data status:ACTIVE shared:false subnets:[e1353d56-b05a-43a9-b924-383ab0d64d7b] id:f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 tenant_id:0b576f6f4cbf414f829cd12f008bf08f description:]]
[36m03:06:23.208 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[404]]
[36m03:06:23.208 gohan.server.middleware DEBUG [0m Response body: {
  "network": {
    "admin_state_up": true,
    "description": "",
    "id": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57",
    "name": "common_function_gw_access_5c241c51-2003-407a-a239-689fabd19022",
    "plane": "data",
    "shared": false,
    "status": "ACTIVE",
    "subnets": [
      "e1353d56-b05a-43a9-b924-383ab0d64d7b"
    ],
    "tags": {},
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:06:23.208 gohan.server.middleware INFO [0m Completed 200 OK in 117.752579ms
03:06:23.209 gohan.server.middleware INFO [0m Started GET /v2.0/networks/f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 for client 172.17.0.19:40952 data: {}
[36m03:06:23.209 gohan.server.middleware DEBUG [0m Request headers: map[Accept-Encoding:[gzip] User-Agent:[gophercloud/1.0.0] Connection:[close] Content-Length:[2] Accept:[application/json] Content-Type:[application/json] X-Auth-Token:[***]]
[36m03:06:23.209 gohan.server.middleware DEBUG [0m Request body: {}
[36m03:06:23.272 gohan.server.resources DEBUG [0m Show network f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 started
[36m03:06:23.322 gohan.server.resources DEBUG [0m List subnet query: map[network_id:[f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57]] started
[36m03:06:23.324 gohan.server.resources DEBUG [0m List subnet query: map[network_id:[f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57]] completed
[36m03:06:23.325 gohan.server.resources DEBUG [0m Show network f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 completed: map[network:map[status:ACTIVE subnets:[e1353d56-b05a-43a9-b924-383ab0d64d7b] description: admin_state_up:true name:common_function_gw_access_5c241c51-2003-407a-a239-689fabd19022 plane:data shared:false id:f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 tenant_id:0b576f6f4cbf414f829cd12f008bf08f tags:map[]]]
[36m03:06:23.325 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[404]]
[36m03:06:23.325 gohan.server.middleware DEBUG [0m Response body: {
  "network": {
    "admin_state_up": true,
    "description": "",
    "id": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57",
    "name": "common_function_gw_access_5c241c51-2003-407a-a239-689fabd19022",
    "plane": "data",
    "shared": false,
    "status": "ACTIVE",
    "subnets": [
      "e1353d56-b05a-43a9-b924-383ab0d64d7b"
    ],
    "tags": {},
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:06:23.325 gohan.server.middleware INFO [0m Completed 200 OK in 115.919322ms
03:06:23.665 gohan.server.middleware INFO [0m Started GET /v2.0/subnets/e1353d56-b05a-43a9-b924-383ab0d64d7b for client 172.17.0.19:40962 data: 
[36m03:06:23.665 gohan.server.middleware DEBUG [0m Request headers: map[User-Agent:[gophercloud/1.0.0] Connection:[close] Accept:[application/json] X-Auth-Token:[***] Accept-Encoding:[gzip]]
[36m03:06:23.665 gohan.server.middleware DEBUG [0m Request body: 
[36m03:06:23.732 gohan.server.resources DEBUG [0m Show subnet e1353d56-b05a-43a9-b924-383ab0d64d7b started
[36m03:06:23.734 gohan.server.resources DEBUG [0m Show subnet e1353d56-b05a-43a9-b924-383ab0d64d7b completed: map[subnet:map[tenant_id:0b576f6f4cbf414f829cd12f008bf08f host_routes:[] allocation_pools:[map[end:169.254.127.254 start:169.254.0.2]] id:e1353d56-b05a-43a9-b924-383ab0d64d7b description: ntp_servers:[] status:ACTIVE gateway_ip:<nil> dns_nameservers:[] enable_dhcp:true ipv6_address_mode:<nil> network_id:f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 name:common_function_gw_access_subnet_5c241c51-2003-407a-a239-689fabd19022 dhcp_server_address:169.254.0.2 tags:map[] ipv6_ra_mode:<nil> ip_version:4 cidr:169.254.0.0/17]]
[36m03:06:23.734 gohan.server.middleware DEBUG [0m Response headers: map[Content-Length:[715] Content-Type:[application/json]]
[36m03:06:23.734 gohan.server.middleware DEBUG [0m Response body: {
  "subnet": {
    "allocation_pools": [
      {
        "end": "169.254.127.254",
        "start": "169.254.0.2"
      }
    ],
    "cidr": "169.254.0.0/17",
    "description": "",
    "dhcp_server_address": "169.254.0.2",
    "dns_nameservers": [],
    "enable_dhcp": true,
    "gateway_ip": null,
    "host_routes": [],
    "id": "e1353d56-b05a-43a9-b924-383ab0d64d7b",
    "ip_version": 4,
    "ipv6_address_mode": null,
    "ipv6_ra_mode": null,
    "name": "common_function_gw_access_subnet_5c241c51-2003-407a-a239-689fabd19022",
    "network_id": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57",
    "ntp_servers": [],
    "status": "ACTIVE",
    "tags": {},
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:06:23.735 gohan.server.middleware INFO [0m Completed 200 OK in 69.499795ms
03:06:23.736 gohan.server.middleware INFO [0m Started GET /v2.0/subnets/e1353d56-b05a-43a9-b924-383ab0d64d7b for client 172.17.0.19:40970 data: {}
[36m03:06:23.736 gohan.server.middleware DEBUG [0m Request headers: map[Content-Length:[2] Accept:[application/json] Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[gzip] User-Agent:[gophercloud/1.0.0] Connection:[close]]
[36m03:06:23.736 gohan.server.middleware DEBUG [0m Request body: {}
[36m03:06:23.799 gohan.server.resources DEBUG [0m Show subnet e1353d56-b05a-43a9-b924-383ab0d64d7b started
[36m03:06:23.802 gohan.server.resources DEBUG [0m Show subnet e1353d56-b05a-43a9-b924-383ab0d64d7b completed: map[subnet:map[tenant_id:0b576f6f4cbf414f829cd12f008bf08f host_routes:[] id:e1353d56-b05a-43a9-b924-383ab0d64d7b network_id:f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 description: ip_version:4 status:ACTIVE dhcp_server_address:169.254.0.2 gateway_ip:<nil> enable_dhcp:true tags:map[] allocation_pools:[map[end:169.254.127.254 start:169.254.0.2]] dns_nameservers:[] ipv6_address_mode:<nil> name:common_function_gw_access_subnet_5c241c51-2003-407a-a239-689fabd19022 ntp_servers:[] ipv6_ra_mode:<nil> cidr:169.254.0.0/17]]
[36m03:06:23.802 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[715]]
[36m03:06:23.802 gohan.server.middleware DEBUG [0m Response body: {
  "subnet": {
    "allocation_pools": [
      {
        "end": "169.254.127.254",
        "start": "169.254.0.2"
      }
    ],
    "cidr": "169.254.0.0/17",
    "description": "",
    "dhcp_server_address": "169.254.0.2",
    "dns_nameservers": [],
    "enable_dhcp": true,
    "gateway_ip": null,
    "host_routes": [],
    "id": "e1353d56-b05a-43a9-b924-383ab0d64d7b",
    "ip_version": 4,
    "ipv6_address_mode": null,
    "ipv6_ra_mode": null,
    "name": "common_function_gw_access_subnet_5c241c51-2003-407a-a239-689fabd19022",
    "network_id": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57",
    "ntp_servers": [],
    "status": "ACTIVE",
    "tags": {},
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:06:23.802 gohan.server.middleware INFO [0m Completed 200 OK in 66.665181ms
03:06:24.150 gohan.server.middleware INFO [0m Started GET /v2.0/ports for client 172.17.0.19:40978 data: {}
[36m03:06:24.150 gohan.server.middleware DEBUG [0m Request headers: map[Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[gzip] User-Agent:[gophercloud/1.0.0] Connection:[close] Content-Length:[2] Accept:[application/json]]
[36m03:06:24.150 gohan.server.middleware DEBUG [0m Request body: {}
[36m03:06:24.216 gohan.server.resources DEBUG [0m List port query: map[] started
[36m03:06:24.221 gohan.server.resources DEBUG [0m List port query: map[] completed
[36m03:06:24.222 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] X-Total-Count:[3] Content-Length:[2904]]
[36m03:06:24.222 gohan.server.middleware DEBUG [0m Response body: {
  "ports": [
    {
      "admin_state_up": true,
      "allowed_address_pairs": [],
      "attached": true,
      "binding:vif_type": "vrouter",
      "description": "",
      "device_id": "5c241c51-2003-407a-a239-689fabd19022",
      "device_owner": "network:common_function_gateway",
      "ese_logical_port_id": "b04853c4-6ebf-441f-9093-ea4b844c4bc7",
      "fake_delete": false,
      "fixed_ips": [
        {
          "ip_address": "169.254.0.3",
          "subnet_id": "e1353d56-b05a-43a9-b924-383ab0d64d7b"
        }
      ],
      "id": "327f59b7-df38-4d8f-97db-d320defcab76",
      "mac_address": "fa:16:3e:e5:f6:39",
      "managed_by_service": true,
      "name": "common_function_gw_5c241c51-2003-407a-a239-689fabd19022_primary_port:976156ef-05b4-47f4-9497-a36531563a08",
      "network_id": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57",
      "segmentation_id": 1025,
      "segmentation_type": "vlan",
      "status": "ACTIVE",
      "tags": {},
      "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
    },
    {
      "admin_state_up": true,
      "allowed_address_pairs": [],
      "attached": true,
      "binding:vif_type": "vrouter",
      "description": "",
      "device_id": "5c241c51-2003-407a-a239-689fabd19022",
      "device_owner": "network:common_function_gateway",
      "ese_logical_port_id": "9c601c38-a854-459d-aec2-433873b3a4e6",
      "fake_delete": false,
      "fixed_ips": [
        {
          "ip_address": "169.254.0.4",
          "subnet_id": "e1353d56-b05a-43a9-b924-383ab0d64d7b"
        }
      ],
      "id": "a778c668-6ccb-4d46-9ec3-956693262d63",
      "mac_address": "fa:16:3e:0c:b0:eb",
      "managed_by_service": true,
      "name": "common_function_gw_5c241c51-2003-407a-a239-689fabd19022_secondary_port:5b2dee2e-7420-4cd4-b270-5081eb9eb371",
      "network_id": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57",
      "segmentation_id": 1025,
      "segmentation_type": "vlan",
      "status": "ACTIVE",
      "tags": {},
      "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
    },
    {
      "admin_state_up": true,
      "allowed_address_pairs": [],
      "attached": false,
      "binding:vif_type": "vrouter",
      "description": "DHCP Server Port",
      "device_id": "e1353d56-b05a-43a9-b924-383ab0d64d7b",
      "device_owner": "network:dhcp",
      "ese_logical_port_id": null,
      "fake_delete": false,
      "fixed_ips": [
        {
          "ip_address": "169.254.0.2",
          "subnet_id": "e1353d56-b05a-43a9-b924-383ab0d64d7b"
        }
      ],
      "id": "bbaac433-1023-4660-88f0-ccd8c2c26c89",
      "mac_address": "00:00:5e:00:01:00",
      "managed_by_service": false,
      "name": "dhcp-server-port",
      "network_id": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57",
      "segmentation_id": null,
      "segmentation_type": null,
      "status": "ACTIVE",
      "tags": {},
      "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
    }
  ]
}
03:06:24.222 gohan.server.middleware INFO [0m Completed 200 OK in 72.135547ms
03:06:24.560 gohan.server.middleware INFO [0m Started GET /v2.0/ports/bbaac433-1023-4660-88f0-ccd8c2c26c89 for client 172.17.0.19:40986 data: 
[36m03:06:24.561 gohan.server.middleware DEBUG [0m Request headers: map[Connection:[close] Accept:[application/json] X-Auth-Token:[***] Accept-Encoding:[gzip] User-Agent:[gophercloud/1.0.0]]
[36m03:06:24.561 gohan.server.middleware DEBUG [0m Request body: 
[36m03:06:24.625 gohan.server.resources DEBUG [0m Show port bbaac433-1023-4660-88f0-ccd8c2c26c89 started
[36m03:06:24.628 gohan.server.resources DEBUG [0m Show port bbaac433-1023-4660-88f0-ccd8c2c26c89 completed: map[port:map[id:bbaac433-1023-4660-88f0-ccd8c2c26c89 ese_logical_port_id:<nil> managed_by_service:false device_owner:network:dhcp description:DHCP Server Port segmentation_type:<nil> attached:false device_id:e1353d56-b05a-43a9-b924-383ab0d64d7b segmentation_id:<nil> fixed_ips:[map[ip_address:169.254.0.2 subnet_id:e1353d56-b05a-43a9-b924-383ab0d64d7b]] tags:map[] fake_delete:false network_id:f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 admin_state_up:true name:dhcp-server-port binding:vif_type:vrouter allowed_address_pairs:[] mac_address:00:00:5e:00:01:00 tenant_id:0b576f6f4cbf414f829cd12f008bf08f status:ACTIVE]]
[36m03:06:24.629 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[833]]
[36m03:06:24.629 gohan.server.middleware DEBUG [0m Response body: {
  "port": {
    "admin_state_up": true,
    "allowed_address_pairs": [],
    "attached": false,
    "binding:vif_type": "vrouter",
    "description": "DHCP Server Port",
    "device_id": "e1353d56-b05a-43a9-b924-383ab0d64d7b",
    "device_owner": "network:dhcp",
    "ese_logical_port_id": null,
    "fake_delete": false,
    "fixed_ips": [
      {
        "ip_address": "169.254.0.2",
        "subnet_id": "e1353d56-b05a-43a9-b924-383ab0d64d7b"
      }
    ],
    "id": "bbaac433-1023-4660-88f0-ccd8c2c26c89",
    "mac_address": "00:00:5e:00:01:00",
    "managed_by_service": false,
    "name": "dhcp-server-port",
    "network_id": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57",
    "segmentation_id": null,
    "segmentation_type": null,
    "status": "ACTIVE",
    "tags": {},
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:06:24.629 gohan.server.middleware INFO [0m Completed 200 OK in 68.345813ms
03:06:24.630 gohan.server.middleware INFO [0m Started GET /v2.0/ports/bbaac433-1023-4660-88f0-ccd8c2c26c89 for client 172.17.0.19:40992 data: {}
[36m03:06:24.630 gohan.server.middleware DEBUG [0m Request headers: map[Connection:[close] Content-Length:[2] Accept:[application/json] Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[gzip] User-Agent:[gophercloud/1.0.0]]
[36m03:06:24.630 gohan.server.middleware DEBUG [0m Request body: {}
[36m03:06:24.697 gohan.server.resources DEBUG [0m Show port bbaac433-1023-4660-88f0-ccd8c2c26c89 started
[36m03:06:24.700 gohan.server.resources DEBUG [0m Show port bbaac433-1023-4660-88f0-ccd8c2c26c89 completed: map[port:map[mac_address:00:00:5e:00:01:00 fake_delete:false attached:false name:dhcp-server-port fixed_ips:[map[ip_address:169.254.0.2 subnet_id:e1353d56-b05a-43a9-b924-383ab0d64d7b]] description:DHCP Server Port segmentation_id:<nil> admin_state_up:true tags:map[] managed_by_service:false device_owner:network:dhcp tenant_id:0b576f6f4cbf414f829cd12f008bf08f status:ACTIVE id:bbaac433-1023-4660-88f0-ccd8c2c26c89 device_id:e1353d56-b05a-43a9-b924-383ab0d64d7b ese_logical_port_id:<nil> binding:vif_type:vrouter network_id:f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 segmentation_type:<nil> allowed_address_pairs:[]]]
[36m03:06:24.700 gohan.server.middleware DEBUG [0m Response headers: map[Content-Length:[833] Content-Type:[application/json]]
[36m03:06:24.700 gohan.server.middleware DEBUG [0m Response body: {
  "port": {
    "admin_state_up": true,
    "allowed_address_pairs": [],
    "attached": false,
    "binding:vif_type": "vrouter",
    "description": "DHCP Server Port",
    "device_id": "e1353d56-b05a-43a9-b924-383ab0d64d7b",
    "device_owner": "network:dhcp",
    "ese_logical_port_id": null,
    "fake_delete": false,
    "fixed_ips": [
      {
        "ip_address": "169.254.0.2",
        "subnet_id": "e1353d56-b05a-43a9-b924-383ab0d64d7b"
      }
    ],
    "id": "bbaac433-1023-4660-88f0-ccd8c2c26c89",
    "mac_address": "00:00:5e:00:01:00",
    "managed_by_service": false,
    "name": "dhcp-server-port",
    "network_id": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57",
    "segmentation_id": null,
    "segmentation_type": null,
    "status": "ACTIVE",
    "tags": {},
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:06:24.700 gohan.server.middleware INFO [0m Completed 200 OK in 70.291728ms
03:06:26.839 gohan.server.middleware INFO [0m Started GET /v2.0/ese_logical_ports for client 172.17.0.19:41014 data: {}
[36m03:06:26.839 gohan.server.middleware DEBUG [0m Request headers: map[Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[gzip] User-Agent:[gophercloud/1.0.0] Connection:[close] Content-Length:[2] Accept:[application/json]]
[36m03:06:26.839 gohan.server.middleware DEBUG [0m Request body: {}
[36m03:06:26.904 gohan.server.resources DEBUG [0m List ese_logical_port query: map[] started
[36m03:06:26.905 gohan.server.resources DEBUG [0m List ese_logical_port query: map[] completed
[36m03:06:26.907 gohan.server.middleware DEBUG [0m Response headers: map[Content-Length:[1415] Content-Type:[application/json] X-Total-Count:[2]]
[36m03:06:26.907 gohan.server.middleware DEBUG [0m Response body: {
  "ese_logical_ports": [
    {
      "common_function_gateway_id": "5c241c51-2003-407a-a239-689fabd19022",
      "connected_resource": "common_function_gateway",
      "description": "ESE Logical port for Port a778c668-6ccb-4d46-9ec3-956693262d63",
      "ese_physical_port_id": "5b2dee2e-7420-4cd4-b270-5081eb9eb371",
      "gw_interface_id": null,
      "id": "9c601c38-a854-459d-aec2-433873b3a4e6",
      "name": "xe-0/0/4.1025",
      "network_id": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57",
      "port_ids": [
        "a778c668-6ccb-4d46-9ec3-956693262d63"
      ],
      "status": "ACTIVE",
      "tags": {},
      "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
      "type": "L2",
      "vlan_id": 1025
    },
    {
      "common_function_gateway_id": "5c241c51-2003-407a-a239-689fabd19022",
      "connected_resource": "common_function_gateway",
      "description": "ESE Logical port for Port 327f59b7-df38-4d8f-97db-d320defcab76",
      "ese_physical_port_id": "976156ef-05b4-47f4-9497-a36531563a08",
      "gw_interface_id": null,
      "id": "b04853c4-6ebf-441f-9093-ea4b844c4bc7",
      "name": "xe-0/0/3.1025",
      "network_id": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57",
      "port_ids": [
        "327f59b7-df38-4d8f-97db-d320defcab76"
      ],
      "status": "ACTIVE",
      "tags": {},
      "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
      "type": "L2",
      "vlan_id": 1025
    }
  ]
}
03:06:26.907 gohan.server.middleware INFO [0m Completed 200 OK in 68.655717ms
03:06:27.295 gohan.server.middleware INFO [0m Started GET /v2.0/ese_logical_ports/9c601c38-a854-459d-aec2-433873b3a4e6 for client 172.17.0.19:41026 data: 
[36m03:06:27.295 gohan.server.middleware DEBUG [0m Request headers: map[X-Auth-Token:[***] Accept-Encoding:[gzip] User-Agent:[gophercloud/1.0.0] Connection:[close] Accept:[application/json]]
[36m03:06:27.296 gohan.server.middleware DEBUG [0m Request body: 
[36m03:06:27.374 gohan.server.resources DEBUG [0m Show ese_logical_port 9c601c38-a854-459d-aec2-433873b3a4e6 started
[36m03:06:27.377 gohan.server.resources DEBUG [0m Show ese_logical_port 9c601c38-a854-459d-aec2-433873b3a4e6 completed: map[ese_logical_port:map[name:xe-0/0/4.1025 network_id:f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 connected_resource:common_function_gateway common_function_gateway_id:5c241c51-2003-407a-a239-689fabd19022 vlan_id:1025 id:9c601c38-a854-459d-aec2-433873b3a4e6 type:L2 tags:map[] status:ACTIVE tenant_id:0b576f6f4cbf414f829cd12f008bf08f ese_physical_port_id:5b2dee2e-7420-4cd4-b270-5081eb9eb371 description:ESE Logical port for Port a778c668-6ccb-4d46-9ec3-956693262d63 gw_interface_id:<nil> port_ids:[a778c668-6ccb-4d46-9ec3-956693262d63]]]
[36m03:06:27.377 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[678]]
[36m03:06:27.377 gohan.server.middleware DEBUG [0m Response body: {
  "ese_logical_port": {
    "common_function_gateway_id": "5c241c51-2003-407a-a239-689fabd19022",
    "connected_resource": "common_function_gateway",
    "description": "ESE Logical port for Port a778c668-6ccb-4d46-9ec3-956693262d63",
    "ese_physical_port_id": "5b2dee2e-7420-4cd4-b270-5081eb9eb371",
    "gw_interface_id": null,
    "id": "9c601c38-a854-459d-aec2-433873b3a4e6",
    "name": "xe-0/0/4.1025",
    "network_id": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57",
    "port_ids": [
      "a778c668-6ccb-4d46-9ec3-956693262d63"
    ],
    "status": "ACTIVE",
    "tags": {},
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
    "type": "L2",
    "vlan_id": 1025
  }
}
03:06:27.377 gohan.server.middleware INFO [0m Completed 200 OK in 81.627977ms
03:06:27.378 gohan.server.middleware INFO [0m Started GET /v2.0/ese_logical_ports/9c601c38-a854-459d-aec2-433873b3a4e6 for client 172.17.0.19:41032 data: {}
[36m03:06:27.378 gohan.server.middleware DEBUG [0m Request headers: map[X-Auth-Token:[***] Accept-Encoding:[gzip] User-Agent:[gophercloud/1.0.0] Connection:[close] Content-Length:[2] Accept:[application/json] Content-Type:[application/json]]
[36m03:06:27.378 gohan.server.middleware DEBUG [0m Request body: {}
[36m03:06:27.446 gohan.server.resources DEBUG [0m Show ese_logical_port 9c601c38-a854-459d-aec2-433873b3a4e6 started
[36m03:06:27.449 gohan.server.resources DEBUG [0m Show ese_logical_port 9c601c38-a854-459d-aec2-433873b3a4e6 completed: map[ese_logical_port:map[gw_interface_id:<nil> common_function_gateway_id:5c241c51-2003-407a-a239-689fabd19022 description:ESE Logical port for Port a778c668-6ccb-4d46-9ec3-956693262d63 vlan_id:1025 tags:map[] ese_physical_port_id:5b2dee2e-7420-4cd4-b270-5081eb9eb371 tenant_id:0b576f6f4cbf414f829cd12f008bf08f id:9c601c38-a854-459d-aec2-433873b3a4e6 status:ACTIVE type:L2 network_id:f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 connected_resource:common_function_gateway port_ids:[a778c668-6ccb-4d46-9ec3-956693262d63] name:xe-0/0/4.1025]]
[36m03:06:27.449 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[678]]
[36m03:06:27.449 gohan.server.middleware DEBUG [0m Response body: {
  "ese_logical_port": {
    "common_function_gateway_id": "5c241c51-2003-407a-a239-689fabd19022",
    "connected_resource": "common_function_gateway",
    "description": "ESE Logical port for Port a778c668-6ccb-4d46-9ec3-956693262d63",
    "ese_physical_port_id": "5b2dee2e-7420-4cd4-b270-5081eb9eb371",
    "gw_interface_id": null,
    "id": "9c601c38-a854-459d-aec2-433873b3a4e6",
    "name": "xe-0/0/4.1025",
    "network_id": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57",
    "port_ids": [
      "a778c668-6ccb-4d46-9ec3-956693262d63"
    ],
    "status": "ACTIVE",
    "tags": {},
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
    "type": "L2",
    "vlan_id": 1025
  }
}
03:06:27.449 gohan.server.middleware INFO [0m Completed 200 OK in 71.074589ms
03:06:29.621 gohan.server.middleware INFO [0m Started GET /v2.0/ports/a778c668-6ccb-4d46-9ec3-956693262d63 for client 172.17.0.19:41056 data: 
[36m03:06:29.621 gohan.server.middleware DEBUG [0m Request headers: map[X-Auth-Token:[***] Accept-Encoding:[gzip] User-Agent:[gophercloud/1.0.0] Connection:[close] Accept:[application/json]]
[36m03:06:29.621 gohan.server.middleware DEBUG [0m Request body: 
[36m03:06:29.688 gohan.server.resources DEBUG [0m Show port a778c668-6ccb-4d46-9ec3-956693262d63 started
[36m03:06:29.692 gohan.server.resources DEBUG [0m Show port a778c668-6ccb-4d46-9ec3-956693262d63 completed: map[port:map[description: fixed_ips:[map[ip_address:169.254.0.4 subnet_id:e1353d56-b05a-43a9-b924-383ab0d64d7b]] network_id:f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 tenant_id:0b576f6f4cbf414f829cd12f008bf08f status:ACTIVE segmentation_type:vlan attached:true id:a778c668-6ccb-4d46-9ec3-956693262d63 tags:map[] name:common_function_gw_5c241c51-2003-407a-a239-689fabd19022_secondary_port:5b2dee2e-7420-4cd4-b270-5081eb9eb371 managed_by_service:true allowed_address_pairs:[] device_owner:network:common_function_gateway binding:vif_type:vrouter segmentation_id:1025 mac_address:fa:16:3e:0c:b0:eb fake_delete:false admin_state_up:true ese_logical_port_id:9c601c38-a854-459d-aec2-433873b3a4e6 device_id:5c241c51-2003-407a-a239-689fabd19022]]
[36m03:06:29.693 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[961]]
[36m03:06:29.693 gohan.server.middleware DEBUG [0m Response body: {
  "port": {
    "admin_state_up": true,
    "allowed_address_pairs": [],
    "attached": true,
    "binding:vif_type": "vrouter",
    "description": "",
    "device_id": "5c241c51-2003-407a-a239-689fabd19022",
    "device_owner": "network:common_function_gateway",
    "ese_logical_port_id": "9c601c38-a854-459d-aec2-433873b3a4e6",
    "fake_delete": false,
    "fixed_ips": [
      {
        "ip_address": "169.254.0.4",
        "subnet_id": "e1353d56-b05a-43a9-b924-383ab0d64d7b"
      }
    ],
    "id": "a778c668-6ccb-4d46-9ec3-956693262d63",
    "mac_address": "fa:16:3e:0c:b0:eb",
    "managed_by_service": true,
    "name": "common_function_gw_5c241c51-2003-407a-a239-689fabd19022_secondary_port:5b2dee2e-7420-4cd4-b270-5081eb9eb371",
    "network_id": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57",
    "segmentation_id": 1025,
    "segmentation_type": "vlan",
    "status": "ACTIVE",
    "tags": {},
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:06:29.693 gohan.server.middleware INFO [0m Completed 200 OK in 71.702479ms
03:06:29.694 gohan.server.middleware INFO [0m Started GET /v2.0/ports/a778c668-6ccb-4d46-9ec3-956693262d63 for client 172.17.0.19:41062 data: {}
[36m03:06:29.694 gohan.server.middleware DEBUG [0m Request headers: map[User-Agent:[gophercloud/1.0.0] Connection:[close] Content-Length:[2] Accept:[application/json] Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[gzip]]
[36m03:06:29.694 gohan.server.middleware DEBUG [0m Request body: {}
[36m03:06:29.757 gohan.server.resources DEBUG [0m Show port a778c668-6ccb-4d46-9ec3-956693262d63 started
[36m03:06:29.760 gohan.server.resources DEBUG [0m Show port a778c668-6ccb-4d46-9ec3-956693262d63 completed: map[port:map[description: fake_delete:false segmentation_type:vlan attached:true tenant_id:0b576f6f4cbf414f829cd12f008bf08f allowed_address_pairs:[] id:a778c668-6ccb-4d46-9ec3-956693262d63 mac_address:fa:16:3e:0c:b0:eb admin_state_up:true tags:map[] ese_logical_port_id:9c601c38-a854-459d-aec2-433873b3a4e6 device_id:5c241c51-2003-407a-a239-689fabd19022 name:common_function_gw_5c241c51-2003-407a-a239-689fabd19022_secondary_port:5b2dee2e-7420-4cd4-b270-5081eb9eb371 fixed_ips:[map[ip_address:169.254.0.4 subnet_id:e1353d56-b05a-43a9-b924-383ab0d64d7b]] network_id:f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 managed_by_service:true device_owner:network:common_function_gateway binding:vif_type:vrouter segmentation_id:1025 status:ACTIVE]]
[36m03:06:29.760 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[961]]
[36m03:06:29.760 gohan.server.middleware DEBUG [0m Response body: {
  "port": {
    "admin_state_up": true,
    "allowed_address_pairs": [],
    "attached": true,
    "binding:vif_type": "vrouter",
    "description": "",
    "device_id": "5c241c51-2003-407a-a239-689fabd19022",
    "device_owner": "network:common_function_gateway",
    "ese_logical_port_id": "9c601c38-a854-459d-aec2-433873b3a4e6",
    "fake_delete": false,
    "fixed_ips": [
      {
        "ip_address": "169.254.0.4",
        "subnet_id": "e1353d56-b05a-43a9-b924-383ab0d64d7b"
      }
    ],
    "id": "a778c668-6ccb-4d46-9ec3-956693262d63",
    "mac_address": "fa:16:3e:0c:b0:eb",
    "managed_by_service": true,
    "name": "common_function_gw_5c241c51-2003-407a-a239-689fabd19022_secondary_port:5b2dee2e-7420-4cd4-b270-5081eb9eb371",
    "network_id": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57",
    "segmentation_id": 1025,
    "segmentation_type": "vlan",
    "status": "ACTIVE",
    "tags": {},
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:06:29.760 gohan.server.middleware INFO [0m Completed 200 OK in 66.354356ms
03:06:30.001 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
03:06:30.008 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
[36m03:06:30.122 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] started
[36m03:06:30.127 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] completed
03:06:30.133 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
[36m03:06:30.161 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] started
[36m03:06:30.163 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] completed
03:06:30.164 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
03:06:32.050 gohan.server.middleware INFO [0m Started GET /v2.0/ese_logical_ports/b04853c4-6ebf-441f-9093-ea4b844c4bc7 for client 172.17.0.19:41092 data: 
[36m03:06:32.050 gohan.server.middleware DEBUG [0m Request headers: map[X-Auth-Token:[***] Accept-Encoding:[gzip] User-Agent:[gophercloud/1.0.0] Connection:[close] Accept:[application/json]]
[36m03:06:32.050 gohan.server.middleware DEBUG [0m Request body: 
[36m03:06:32.113 gohan.server.resources DEBUG [0m Show ese_logical_port b04853c4-6ebf-441f-9093-ea4b844c4bc7 started
[36m03:06:32.115 gohan.server.resources DEBUG [0m Show ese_logical_port b04853c4-6ebf-441f-9093-ea4b844c4bc7 completed: map[ese_logical_port:map[tags:map[] status:ACTIVE name:xe-0/0/3.1025 description:ESE Logical port for Port 327f59b7-df38-4d8f-97db-d320defcab76 gw_interface_id:<nil> id:b04853c4-6ebf-441f-9093-ea4b844c4bc7 tenant_id:0b576f6f4cbf414f829cd12f008bf08f common_function_gateway_id:5c241c51-2003-407a-a239-689fabd19022 port_ids:[327f59b7-df38-4d8f-97db-d320defcab76] type:L2 ese_physical_port_id:976156ef-05b4-47f4-9497-a36531563a08 vlan_id:1025 connected_resource:common_function_gateway network_id:f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57]]
[36m03:06:32.115 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[678]]
[36m03:06:32.115 gohan.server.middleware DEBUG [0m Response body: {
  "ese_logical_port": {
    "common_function_gateway_id": "5c241c51-2003-407a-a239-689fabd19022",
    "connected_resource": "common_function_gateway",
    "description": "ESE Logical port for Port 327f59b7-df38-4d8f-97db-d320defcab76",
    "ese_physical_port_id": "976156ef-05b4-47f4-9497-a36531563a08",
    "gw_interface_id": null,
    "id": "b04853c4-6ebf-441f-9093-ea4b844c4bc7",
    "name": "xe-0/0/3.1025",
    "network_id": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57",
    "port_ids": [
      "327f59b7-df38-4d8f-97db-d320defcab76"
    ],
    "status": "ACTIVE",
    "tags": {},
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
    "type": "L2",
    "vlan_id": 1025
  }
}
03:06:32.115 gohan.server.middleware INFO [0m Completed 200 OK in 65.276378ms
03:06:32.117 gohan.server.middleware INFO [0m Started GET /v2.0/ese_logical_ports/b04853c4-6ebf-441f-9093-ea4b844c4bc7 for client 172.17.0.19:41098 data: {}
[36m03:06:32.117 gohan.server.middleware DEBUG [0m Request headers: map[Connection:[close] Content-Length:[2] Accept:[application/json] Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[gzip] User-Agent:[gophercloud/1.0.0]]
[36m03:06:32.117 gohan.server.middleware DEBUG [0m Request body: {}
[36m03:06:32.181 gohan.server.resources DEBUG [0m Show ese_logical_port b04853c4-6ebf-441f-9093-ea4b844c4bc7 started
[36m03:06:32.183 gohan.server.resources DEBUG [0m Show ese_logical_port b04853c4-6ebf-441f-9093-ea4b844c4bc7 completed: map[ese_logical_port:map[status:ACTIVE description:ESE Logical port for Port 327f59b7-df38-4d8f-97db-d320defcab76 vlan_id:1025 port_ids:[327f59b7-df38-4d8f-97db-d320defcab76] type:L2 network_id:f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 gw_interface_id:<nil> common_function_gateway_id:5c241c51-2003-407a-a239-689fabd19022 tags:map[] name:xe-0/0/3.1025 id:b04853c4-6ebf-441f-9093-ea4b844c4bc7 tenant_id:0b576f6f4cbf414f829cd12f008bf08f connected_resource:common_function_gateway ese_physical_port_id:976156ef-05b4-47f4-9497-a36531563a08]]
[36m03:06:32.183 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[678]]
[36m03:06:32.184 gohan.server.middleware DEBUG [0m Response body: {
  "ese_logical_port": {
    "common_function_gateway_id": "5c241c51-2003-407a-a239-689fabd19022",
    "connected_resource": "common_function_gateway",
    "description": "ESE Logical port for Port 327f59b7-df38-4d8f-97db-d320defcab76",
    "ese_physical_port_id": "976156ef-05b4-47f4-9497-a36531563a08",
    "gw_interface_id": null,
    "id": "b04853c4-6ebf-441f-9093-ea4b844c4bc7",
    "name": "xe-0/0/3.1025",
    "network_id": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57",
    "port_ids": [
      "327f59b7-df38-4d8f-97db-d320defcab76"
    ],
    "status": "ACTIVE",
    "tags": {},
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
    "type": "L2",
    "vlan_id": 1025
  }
}
03:06:32.184 gohan.server.middleware INFO [0m Completed 200 OK in 67.135168ms
03:06:34.322 gohan.server.middleware INFO [0m Started GET /v2.0/ports/327f59b7-df38-4d8f-97db-d320defcab76 for client 172.17.0.19:41120 data: 
[36m03:06:34.322 gohan.server.middleware DEBUG [0m Request headers: map[Accept:[application/json] X-Auth-Token:[***] Accept-Encoding:[gzip] User-Agent:[gophercloud/1.0.0] Connection:[close]]
[36m03:06:34.322 gohan.server.middleware DEBUG [0m Request body: 
[36m03:06:34.388 gohan.server.resources DEBUG [0m Show port 327f59b7-df38-4d8f-97db-d320defcab76 started
[36m03:06:34.393 gohan.server.resources DEBUG [0m Show port 327f59b7-df38-4d8f-97db-d320defcab76 completed: map[port:map[mac_address:fa:16:3e:e5:f6:39 allowed_address_pairs:[] description: attached:true tags:map[] device_id:5c241c51-2003-407a-a239-689fabd19022 fixed_ips:[map[ip_address:169.254.0.3 subnet_id:e1353d56-b05a-43a9-b924-383ab0d64d7b]] id:327f59b7-df38-4d8f-97db-d320defcab76 binding:vif_type:vrouter segmentation_id:1025 fake_delete:false network_id:f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 managed_by_service:true name:common_function_gw_5c241c51-2003-407a-a239-689fabd19022_primary_port:976156ef-05b4-47f4-9497-a36531563a08 device_owner:network:common_function_gateway tenant_id:0b576f6f4cbf414f829cd12f008bf08f admin_state_up:true status:ACTIVE segmentation_type:vlan ese_logical_port_id:b04853c4-6ebf-441f-9093-ea4b844c4bc7]]
[36m03:06:34.393 gohan.server.middleware DEBUG [0m Response headers: map[Content-Length:[959] Content-Type:[application/json]]
[36m03:06:34.393 gohan.server.middleware DEBUG [0m Response body: {
  "port": {
    "admin_state_up": true,
    "allowed_address_pairs": [],
    "attached": true,
    "binding:vif_type": "vrouter",
    "description": "",
    "device_id": "5c241c51-2003-407a-a239-689fabd19022",
    "device_owner": "network:common_function_gateway",
    "ese_logical_port_id": "b04853c4-6ebf-441f-9093-ea4b844c4bc7",
    "fake_delete": false,
    "fixed_ips": [
      {
        "ip_address": "169.254.0.3",
        "subnet_id": "e1353d56-b05a-43a9-b924-383ab0d64d7b"
      }
    ],
    "id": "327f59b7-df38-4d8f-97db-d320defcab76",
    "mac_address": "fa:16:3e:e5:f6:39",
    "managed_by_service": true,
    "name": "common_function_gw_5c241c51-2003-407a-a239-689fabd19022_primary_port:976156ef-05b4-47f4-9497-a36531563a08",
    "network_id": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57",
    "segmentation_id": 1025,
    "segmentation_type": "vlan",
    "status": "ACTIVE",
    "tags": {},
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:06:34.393 gohan.server.middleware INFO [0m Completed 200 OK in 70.856652ms
03:06:34.394 gohan.server.middleware INFO [0m Started GET /v2.0/ports/327f59b7-df38-4d8f-97db-d320defcab76 for client 172.17.0.19:41126 data: {}
[36m03:06:34.394 gohan.server.middleware DEBUG [0m Request headers: map[X-Auth-Token:[***] Accept-Encoding:[gzip] User-Agent:[gophercloud/1.0.0] Connection:[close] Content-Length:[2] Accept:[application/json] Content-Type:[application/json]]
[36m03:06:34.394 gohan.server.middleware DEBUG [0m Request body: {}
[36m03:06:34.459 gohan.server.resources DEBUG [0m Show port 327f59b7-df38-4d8f-97db-d320defcab76 started
[36m03:06:34.463 gohan.server.resources DEBUG [0m Show port 327f59b7-df38-4d8f-97db-d320defcab76 completed: map[port:map[admin_state_up:true device_owner:network:common_function_gateway tenant_id:0b576f6f4cbf414f829cd12f008bf08f allowed_address_pairs:[] segmentation_id:1025 fixed_ips:[map[ip_address:169.254.0.3 subnet_id:e1353d56-b05a-43a9-b924-383ab0d64d7b]] device_id:5c241c51-2003-407a-a239-689fabd19022 managed_by_service:true name:common_function_gw_5c241c51-2003-407a-a239-689fabd19022_primary_port:976156ef-05b4-47f4-9497-a36531563a08 description: mac_address:fa:16:3e:e5:f6:39 fake_delete:false network_id:f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57 status:ACTIVE attached:true ese_logical_port_id:b04853c4-6ebf-441f-9093-ea4b844c4bc7 segmentation_type:vlan binding:vif_type:vrouter id:327f59b7-df38-4d8f-97db-d320defcab76 tags:map[]]]
[36m03:06:34.463 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] Content-Length:[959]]
[36m03:06:34.463 gohan.server.middleware DEBUG [0m Response body: {
  "port": {
    "admin_state_up": true,
    "allowed_address_pairs": [],
    "attached": true,
    "binding:vif_type": "vrouter",
    "description": "",
    "device_id": "5c241c51-2003-407a-a239-689fabd19022",
    "device_owner": "network:common_function_gateway",
    "ese_logical_port_id": "b04853c4-6ebf-441f-9093-ea4b844c4bc7",
    "fake_delete": false,
    "fixed_ips": [
      {
        "ip_address": "169.254.0.3",
        "subnet_id": "e1353d56-b05a-43a9-b924-383ab0d64d7b"
      }
    ],
    "id": "327f59b7-df38-4d8f-97db-d320defcab76",
    "mac_address": "fa:16:3e:e5:f6:39",
    "managed_by_service": true,
    "name": "common_function_gw_5c241c51-2003-407a-a239-689fabd19022_primary_port:976156ef-05b4-47f4-9497-a36531563a08",
    "network_id": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57",
    "segmentation_id": 1025,
    "segmentation_type": "vlan",
    "status": "ACTIVE",
    "tags": {},
    "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
  }
}
03:06:34.463 gohan.server.middleware INFO [0m Completed 200 OK in 69.101164ms
03:06:36.631 gohan.server.middleware INFO [0m Started GET /v1.0/resource_mappings for client 172.17.0.19:41148 data: {}
[36m03:06:36.632 gohan.server.middleware DEBUG [0m Request headers: map[Connection:[close] Content-Length:[2] Accept:[application/json] Content-Type:[application/json] X-Auth-Token:[***] Accept-Encoding:[gzip] User-Agent:[gophercloud/1.0.0]]
[36m03:06:36.632 gohan.server.middleware DEBUG [0m Request body: {}
[36m03:06:36.695 gohan.server.resources DEBUG [0m List resource_mapping query: map[] started
[36m03:06:36.697 gohan.server.resources DEBUG [0m List resource_mapping query: map[] completed
[36m03:06:36.697 gohan.server.middleware DEBUG [0m Response headers: map[Content-Type:[application/json] X-Total-Count:[3] Content-Length:[1070]]
[36m03:06:36.697 gohan.server.middleware DEBUG [0m Response body: {
  "resource_mappings": [
    {
      "created": 1494471943,
      "deleted": null,
      "id": "4863701c-dbb4-41bf-888f-bd4ff0a10c36",
      "mapped_id": "10.161.0.34-xe-0/0/3.1025",
      "relation": "baremetal",
      "resource_id": "327f59b7-df38-4d8f-97db-d320defcab76",
      "resource_type": "port",
      "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
    },
    {
      "created": 1494471934,
      "deleted": null,
      "id": "829e1b5e-5078-4d92-bca3-4f138d289842",
      "mapped_id": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57",
      "relation": "instance",
      "resource_id": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57",
      "resource_type": "network",
      "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
    },
    {
      "created": 1494471943,
      "deleted": null,
      "id": "e68344d7-c627-4a92-94e8-a09366b9762c",
      "mapped_id": "10.161.0.34-xe-0/0/4.1025",
      "relation": "baremetal",
      "resource_id": "a778c668-6ccb-4d46-9ec3-956693262d63",
      "resource_type": "port",
      "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f"
    }
  ]
}
03:06:36.697 gohan.server.middleware INFO [0m Completed 200 OK in 65.705121ms
03:06:37.043 gohan.server.middleware INFO [0m Started GET /v2.0/billing_resources for client 172.17.0.19:41158 data: {}
[36m03:06:37.043 gohan.server.middleware DEBUG [0m Request headers: map[Accept-Encoding:[gzip] User-Agent:[gophercloud/1.0.0] Connection:[close] Content-Length:[2] Accept:[application/json] Content-Type:[application/json] X-Auth-Token:[***]]
[36m03:06:37.043 gohan.server.middleware DEBUG [0m Request body: {}
[36m03:06:37.116 gohan.server.resources DEBUG [0m List billing_resource query: map[] started
[36m03:06:37.118 gohan.server.resources DEBUG [0m List billing_resource query: map[] completed
[36m03:06:37.118 gohan.server.middleware DEBUG [0m Response headers: map[X-Total-Count:[1] Content-Length:[441] Content-Type:[application/json]]
[36m03:06:37.119 gohan.server.middleware DEBUG [0m Response body: {
  "billing_resources": [
    {
      "config_version": 1,
      "ended": null,
      "id": "0613a7ba-47ff-4655-9488-54ed8912443a",
      "info": {},
      "parent_billing_id": null,
      "resource_id": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57",
      "resource_type": "network",
      "started": 1494471934,
      "tenant_id": "0b576f6f4cbf414f829cd12f008bf08f",
      "unique_resource_id": "f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57"
    }
  ]
}
03:06:37.119 gohan.server.middleware INFO [0m Completed 200 OK in 76.042203ms
[36m03:06:59.666 gohan.server DEBUG [0m Monitoring event update received: set /monitoring/v2.0/common_function_gateways/5c241c51-2003-407a-a239-689fabd19022 map[primary_41:MASTER primary_42:MASTER secondary_41:BACKUP secondary_42:BACKUP version:1]
03:06:59.666 gohan.server.sync INFO [0m MonitoringUpdate for set /monitoring/v2.0/common_function_gateways/5c241c51-2003-407a-a239-689fabd19022 map[primary_42:MASTER secondary_41:BACKUP secondary_42:BACKUP version:1 primary_41:MASTER] started
03:06:59.674 gohan.sync INFO [0m Locked gohan/cluster/lock/monitoring/v2.0/common_function_gateways/5c241c51-2003-407a-a239-689fabd19022 with index 814
03:06:59.727 gohan.db.sql INFO [0m Executing SQL query in transaction 'a576a719-9b5e-41c8-b6bf-4bf18103cbd9': 'UPDATE `common_function_gateways` SET `nat_ip` = 100.64.0.10, `downlink_interface_id` = 372ed357-e622-41fb-a613-076d332838e2, `subnet_id` = e1353d56-b05a-43a9-b924-383ab0d64d7b, `status` = ACTIVE, `network_id` = f2de53ae-bc76-46f2-b2ae-a7eefa9d6e57, `logical_tunnel_unit_service` = 11025, `vrf_name` = vrf_gw_sample-ha-router-downlink_1025, `tenant_id` = 0b576f6f4cbf414f829cd12f008bf08f, `description` = , `common_functions` = [{"common_function_id":"18c64ec9-78c2-43ac-ae0d-48fa9b6c0858"},{"common_function_id":"c1be08ee-7cf2-4c84-8fe7-7e891d17bc71"}], `secondary_logical_interface_name` = ae0.1025, `name` = T0011CF000, `vlan_id` = 1025, `common_function_pool_id` = cca32fd7-2430-4acc-87e9-a7b527e9918d, `primary_logical_interface_name` = ae0.1025, `id` = 5c241c51-2003-407a-a239-689fabd19022, `logical_tunnel_unit_user` = 1025, `state_version` = 1, `monitoring_version` = 1, `state_error` = , `state` = {"error":"","state":{"heat_outputs":"[]","state_monitoring":"{\"secondary_41\": \"backup\", \"primary_42\": \"master\", \"primary_41\": \"master\", \"secondary_42\": \"backup\"}","worker_state":"CREATE_COMPLETED"}}, `state_monitoring` = {"primary_41":"MASTER","primary_42":"MASTER","secondary_41":"BACKUP","secondary_42":"BACKUP"}, `marked_for_deletion` = 0 WHERE id = 5c241c51-2003-407a-a239-689fabd19022'
03:06:59.729 gohan.extension.common_function_gateway.post_monitoring_update_in_transaction INFO [0m Config version: 1, State version: 1, Monitoring version: 1
03:06:59.729 gohan.extension.common_function_gateway.post_monitoring_update_in_transaction INFO [0m Reading monitoring data from worker state: {"secondary_41": "backup", "primary_42": "master", "primary_41": "master", "secondary_42": "backup"}
03:06:59.729 gohan.extension.common_function_gateway.post_monitoring_update_in_transaction INFO [0m Overriding monitoring data with data from monitoring backend: {"primary_41":"MASTER","primary_42":"MASTER","secondary_41":"BACKUP","secondary_42":"BACKUP"}
03:06:59.745 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/monitoring/v2.0/common_function_gateways/5c241c51-2003-407a-a239-689fabd19022 with index 814
03:06:59.745 gohan.server.sync INFO [0m MonitoringUpdate for set /monitoring/v2.0/common_function_gateways/5c241c51-2003-407a-a239-689fabd19022 completed
03:06:59.751 gohan.sync INFO [0m Path gohan/cluster/lock/monitoring/v2.0/common_function_gateways/5c241c51-2003-407a-a239-689fabd19022 already unlocked or not locked
03:07:00.002 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
03:07:00.009 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
[36m03:07:00.146 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] started
[36m03:07:00.150 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] completed
03:07:00.153 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
[36m03:07:00.173 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] started
[36m03:07:00.175 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] completed
03:07:00.177 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
03:07:30.002 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
03:07:30.081 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
[36m03:07:30.148 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] started
[36m03:07:30.150 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] completed
03:07:30.152 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
[36m03:07:30.220 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] started
[36m03:07:30.222 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] completed
03:07:30.223 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
03:08:00.002 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
03:08:00.014 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
[36m03:08:00.137 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] started
[36m03:08:00.142 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] completed
03:08:00.143 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
[36m03:08:00.159 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] started
[36m03:08:00.161 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] completed
03:08:00.162 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
03:08:30.002 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
03:08:30.015 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
[36m03:08:30.137 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] started
[36m03:08:30.139 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] completed
03:08:30.147 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
[36m03:08:30.164 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] started
[36m03:08:30.166 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] completed
03:08:30.168 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
03:09:00.002 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
03:09:00.011 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
[36m03:09:00.123 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] started
[36m03:09:00.126 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] completed
03:09:00.127 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
[36m03:09:00.145 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] started
[36m03:09:00.146 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] completed
03:09:00.149 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
03:09:30.002 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
03:09:30.014 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
[36m03:09:30.135 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] started
[36m03:09:30.138 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] completed
03:09:30.140 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
[36m03:09:30.151 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] started
[36m03:09:30.153 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] completed
03:09:30.155 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
03:10:00.004 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
03:10:00.013 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
03:10:00.013 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/cron_delete_tenant with index 0
[36m03:10:00.156 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] started
03:10:00.159 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/cron_delete_tenant with index 0
[36m03:10:00.160 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] completed
03:10:00.165 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
[36m03:10:00.186 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] started
[36m03:10:00.188 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] completed
03:10:00.191 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
03:10:30.002 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
03:10:30.009 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
[36m03:10:30.152 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] started
[36m03:10:30.154 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] completed
03:10:30.156 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
[36m03:10:30.181 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] started
[36m03:10:30.183 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] completed
03:10:30.186 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
03:11:00.002 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
03:11:00.010 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
[36m03:11:00.142 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] started
[36m03:11:00.146 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] completed
03:11:00.148 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
[36m03:11:00.170 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] started
[36m03:11:00.172 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] completed
03:11:00.174 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
03:11:30.002 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
03:11:30.009 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
[36m03:11:30.138 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] started
[36m03:11:30.140 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] completed
03:11:30.141 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
[36m03:11:30.163 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] started
[36m03:11:30.166 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] completed
03:11:30.168 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
03:12:00.002 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
03:12:00.009 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
[36m03:12:00.139 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] started
[36m03:12:00.146 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] completed
03:12:00.149 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
[36m03:12:00.165 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] started
[36m03:12:00.167 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] completed
03:12:00.169 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
03:12:30.002 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
03:12:30.014 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
[36m03:12:30.152 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] started
[36m03:12:30.154 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] completed
03:12:30.156 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
[36m03:12:30.177 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] started
[36m03:12:30.179 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] completed
03:12:30.181 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
03:13:00.002 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
03:13:00.011 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
[36m03:13:00.140 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] started
[36m03:13:00.147 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] completed
03:13:00.150 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
[36m03:13:00.170 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] started
[36m03:13:00.172 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] completed
03:13:00.174 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
03:13:30.002 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
03:13:30.014 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
[36m03:13:30.145 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] started
[36m03:13:30.147 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] completed
03:13:30.149 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
[36m03:13:30.169 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] started
[36m03:13:30.171 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] completed
03:13:30.172 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
03:14:00.002 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
03:14:00.013 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
[36m03:14:00.130 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] started
[36m03:14:00.132 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] completed
03:14:00.135 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
[36m03:14:00.150 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] started
[36m03:14:00.152 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] completed
03:14:00.154 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
03:14:30.002 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
03:14:30.015 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
[36m03:14:30.147 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] started
[36m03:14:30.150 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] completed
03:14:30.152 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
[36m03:14:30.173 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] started
[36m03:14:30.175 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] completed
03:14:30.178 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
03:15:00.002 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
03:15:00.011 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
[36m03:15:00.142 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] started
[36m03:15:00.145 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] completed
03:15:00.148 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
[36m03:15:00.165 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] started
[36m03:15:00.167 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] completed
03:15:00.168 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
03:15:30.002 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
03:15:30.012 gohan.sync INFO [0m Locked gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
[36m03:15:30.154 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] started
[36m03:15:30.157 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[DELETING]] completed
03:15:30.165 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_delete_cron with index 0
[36m03:15:30.185 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] started
[36m03:15:30.187 gohan.server.resources DEBUG [0m List tenant_connection query: map[progress:[REQUESTING]] completed
03:15:30.188 gohan.sync INFO [0m Unlocked path gohan/cluster/lock/cron:/tenant_connection_create_cron with index 0
