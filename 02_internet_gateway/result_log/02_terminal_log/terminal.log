root@client:/tools/rest-api-for-esi# python gohan-api-internet-gateways.py 
### Create Ese Device ###
name:[QFX-NW02], id:[3fb53223-b614-46b6-92e8-25c3bcbed214]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
04:52:25.947639  04:52:26.154203  0.206564        POST     201    PENDING_CREATE
04:52:26.155084  04:52:26.260172  0.105088         GET     200    PENDING_CREATE
04:52:27.261524  04:52:27.405217  0.143693         GET     200    PENDING_CREATE
04:52:28.406572  04:52:28.500869  0.094297         GET     200    PENDING_CREATE
04:52:29.502113  04:52:29.602833  0.100720         GET     200    PENDING_CREATE
04:52:30.603750  04:52:30.717050  0.113300         GET     200    PENDING_CREATE
04:52:31.718293  04:52:31.876708  0.158415         GET     200    PENDING_CREATE
04:52:32.877775  04:52:32.987723  0.109948         GET     200    PENDING_CREATE
04:52:33.989062  04:52:34.137651  0.148589         GET     200    PENDING_CREATE
04:52:35.139061  04:52:35.292580  0.153519         GET     200    PENDING_CREATE
04:52:36.293957  04:52:36.453669  0.159712         GET     200    PENDING_CREATE
04:52:37.454933  04:52:37.569179  0.114246         GET     200    PENDING_CREATE
04:52:38.569898  04:52:38.665770  0.095872         GET     200    PENDING_CREATE
04:52:39.667145  04:52:39.763494  0.096349         GET     200    PENDING_CREATE
04:52:40.764557  04:52:40.845718  0.081161         GET     200    PENDING_CREATE
04:52:41.847184  04:52:41.921344  0.074160         GET     200    PENDING_CREATE
04:52:42.922616  04:52:43.009868  0.087252         GET     200    PENDING_CREATE
04:52:44.011119  04:52:44.106016  0.094897         GET     200    PENDING_CREATE
04:52:45.107291  04:52:45.209812  0.102521         GET     200    PENDING_CREATE
04:52:46.211068  04:52:46.316386  0.105318         GET     200    PENDING_CREATE
04:52:47.317784  04:52:47.422134  0.104350         GET     200    PENDING_CREATE
04:52:48.423374  04:52:48.523176  0.099802         GET     200    PENDING_CREATE
04:52:49.524414  04:52:50.050330  0.525916         GET     200    PENDING_CREATE
04:52:51.051627  04:52:51.155794  0.104167         GET     200    PENDING_CREATE
04:52:52.156513  04:52:52.258557  0.102044         GET     200    PENDING_CREATE
04:52:53.259811  04:52:53.331282  0.071471         GET     200    PENDING_CREATE
04:52:54.332164  04:52:54.417433  0.085269         GET     200    PENDING_CREATE
04:52:55.418514  04:52:55.505823  0.087309         GET     200    PENDING_CREATE
04:52:56.507117  04:52:56.578327  0.071210         GET     200    PENDING_CREATE
04:52:57.579680  04:52:57.650327  0.070647         GET     200    PENDING_CREATE
04:52:58.651671  04:52:58.728108  0.076437         GET     200    PENDING_CREATE
04:52:59.729480  04:52:59.798387  0.068907         GET     200    PENDING_CREATE
04:53:00.800017  04:53:00.870504  0.070487         GET     200    PENDING_CREATE
04:53:01.871659  04:53:01.944057  0.072398         GET     200    PENDING_CREATE
04:53:02.944553  04:53:03.013485  0.068932         GET     200    PENDING_CREATE
04:53:04.014747  04:53:04.102209  0.087462         GET     200    PENDING_CREATE
04:53:05.103476  04:53:05.179570  0.076094         GET     200    PENDING_CREATE
04:53:06.180535  04:53:06.253420  0.072885         GET     200    PENDING_CREATE
04:53:07.254693  04:53:07.324611  0.069918         GET     200    PENDING_CREATE
04:53:08.325870  04:53:08.395589  0.069719         GET     200    PENDING_CREATE
04:53:09.396864  04:53:09.465779  0.068915         GET     200    PENDING_CREATE
04:53:10.467049  04:53:10.536760  0.069711         GET     200    PENDING_CREATE
04:53:11.537417  04:53:11.610352  0.072935         GET     200    PENDING_CREATE
04:53:12.611468  04:53:12.682860  0.071392         GET     200    PENDING_CREATE
04:53:13.684128  04:53:13.758705  0.074577         GET     200    PENDING_CREATE
04:53:14.759037  04:53:14.827884  0.068847         GET     200    PENDING_CREATE
04:53:15.829145  04:53:15.899928  0.070783         GET     200    PENDING_CREATE
04:53:16.901036  04:53:16.970957  0.069921         GET     200    PENDING_CREATE
04:53:17.972226  04:53:18.042252  0.070026         GET     200    PENDING_CREATE
04:53:19.043680  04:53:19.115408  0.071728         GET     200    PENDING_CREATE
04:53:20.116701  04:53:20.198655  0.081954         GET     200    PENDING_CREATE
04:53:21.199620  04:53:21.267347  0.067727         GET     200    PENDING_CREATE
04:53:22.268823  04:53:22.358388  0.089565         GET     200    PENDING_CREATE
04:53:23.358914  04:53:23.430728  0.071814         GET     200    PENDING_CREATE
04:53:24.432040  04:53:24.510774  0.078734         GET     200    PENDING_CREATE
04:53:25.512103  04:53:25.584268  0.072165         GET     200    PENDING_CREATE
04:53:26.585620  04:53:26.671684  0.086064         GET     200    PENDING_CREATE
04:53:27.672952  04:53:27.752019  0.079067         GET     200    PENDING_CREATE
04:53:28.753292  04:53:28.832947  0.079655         GET     200    PENDING_CREATE
04:53:29.833411  04:53:29.911485  0.078074         GET     200    PENDING_CREATE
04:53:30.912840  04:53:30.983936  0.071096         GET     200    PENDING_CREATE
04:53:31.984633  04:53:32.056670  0.072037         GET     200    PENDING_CREATE
04:53:33.057993  04:53:33.133685  0.075692         GET     200    PENDING_CREATE
04:53:34.134961  04:53:34.205834  0.070873         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 68.258195

[localhost] local: gohan client ese_device show --output-format json 3fb53223-b614-46b6-92e8-25c3bcbed214
{
    "ese_device": {
        "description": "",
        "existing": "existing",
        "flavor": null,
        "hostname": "QFX-NW02",
        "id": "3fb53223-b614-46b6-92e8-25c3bcbed214",
        "location": null,
        "management_ip_address": "10.161.0.34",
        "name": "QFX-NW02",
        "operational_state": "UP",
        "orchestration_state": "CREATE_COMPLETE",
        "password": "password",
        "public_ip_address": "10.161.0.34",
        "status": "ACTIVE",
        "tags": {},
        "tenant_id": "06d6b792b31c40daa546fb0f4e35980d",
        "tor_agent_names": null,
        "tsn_names": null,
        "type": "tor",
        "username": "esi"
    }
}

##########################################
### checking heat-stack (ese_devices) ####
##########################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/ese_devices/3fb53223-b614-46b6-92e8-25c3bcbed214
[localhost] local: heat stack-show ese_device_3fb53223-b614-46b6-92e8-25c3bcbed214
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                    |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                       |
| creation_time         | 2018-04-04T04:52:27Z                                                                                                                                                                     |
| description           | ESE Device (existing) template                                                                                                                                                           |
| disable_rollback      | True                                                                                                                                                                                     |
| id                    | 0425b942-24c5-44ad-aa4e-1497b4561282                                                                                                                                                     |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/06d6b792b31c40daa546fb0f4e35980d/stacks/ese_device_3fb53223-b614-46b6-92e8-25c3bcbed214/0425b942-24c5-44ad-aa4e-1497b4561282 |
| notification_topics   | []                                                                                                                                                                                       |
| outputs               | [                                                                                                                                                                                        |
|                       |   {                                                                                                                                                                                      |
|                       |     "output_value": "bd8bbbcc-b175-4ea2-bfce-9821677d4da4",                                                                                                                              |
|                       |     "description": "Monitoring Target ID",                                                                                                                                               |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                                 |
|                       |   },                                                                                                                                                                                     |
|                       |   {                                                                                                                                                                                      |
|                       |     "output_value": [                                                                                                                                                                    |
|                       |       "default-global-system-config",                                                                                                                                                    |
|                       |       "NWSDP-JNPR-02"                                                                                                                                                                    |
|                       |     ],                                                                                                                                                                                   |
|                       |     "description": "The FQ name of the physical router.",                                                                                                                                |
|                       |     "output_key": "fq_name"                                                                                                                                                              |
|                       |   },                                                                                                                                                                                     |
|                       |   {                                                                                                                                                                                      |
|                       |     "output_value": "7e5c78fa-71c0-427e-947f-586b1fc3c470",                                                                                                                              |
|                       |     "description": "A unique id for the physical router.",                                                                                                                               |
|                       |     "output_key": "id"                                                                                                                                                                   |
|                       |   },                                                                                                                                                                                     |
|                       |   {                                                                                                                                                                                      |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/bd8bbbcc-b175-4ea2-bfce-9821677d4da4",                                                     |
|                       |     "description": "Monitoring Process Link",                                                                                                                                            |
|                       |     "output_key": "monitoring_link"                                                                                                                                                      |
|                       |   },                                                                                                                                                                                     |
|                       |   {                                                                                                                                                                                      |
|                       |     "output_value": "NWSDP-JNPR-02",                                                                                                                                                     |
|                       |     "description": "The name of the physical router.",                                                                                                                                   |
|                       |     "output_key": "name"                                                                                                                                                                 |
|                       |   }                                                                                                                                                                                      |
|                       | ]                                                                                                                                                                                        |
| parameters            | {                                                                                                                                                                                        |
|                       |   "device_ip": "10.161.0.34",                                                                                                                                                            |
|                       |   "OS::stack_id": "0425b942-24c5-44ad-aa4e-1497b4561282",                                                                                                                                |
|                       |   "OS::stack_name": "ese_device_3fb53223-b614-46b6-92e8-25c3bcbed214",                                                                                                                   |
|                       |   "tenant_id": "06d6b792b31c40daa546fb0f4e35980d",                                                                                                                                       |
|                       |   "hostname": "QFX-NW02",                                                                                                                                                                |
|                       |   "version": "1",                                                                                                                                                                        |
|                       |   "gohan_id": "3fb53223-b614-46b6-92e8-25c3bcbed214",                                                                                                                                    |
|                       |   "name": "QFX-NW02"                                                                                                                                                                     |
|                       | }                                                                                                                                                                                        |
| parent                | None                                                                                                                                                                                     |
| stack_name            | ese_device_3fb53223-b614-46b6-92e8-25c3bcbed214                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                    |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                          |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                      |
| stack_user_project_id | 06d6b792b31c40daa546fb0f4e35980d                                                                                                                                                         |
| template_description  | ESE Device (existing) template                                                                                                                                                           |
| timeout_mins          | 6                                                                                                                                                                                        |
| updated_time          | None                                                                                                                                                                                     |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show ese_device_3fb53223-b614-46b6-92e8-25c3bcbed214
description: 'ESE Device (existing) template

  '
heat_template_version: '2013-05-23'
outputs:
  fq_name:
    description: The FQ name of the physical router.
    value:
      get_attr: [physical_router, fq_name]
  id:
    description: A unique id for the physical router.
    value: {get_resource: physical_router}
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [device_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: device_monitor}
  name:
    description: The name of the physical router.
    value:
      get_attr: [physical_router, name]
parameters:
  device_ip: {description: Device IP Address., label: Device IP Address, type: string}
  gohan_id: {description: UUID of the ESE Device, label: Gohan resource ID, type: string}
  hostname: {description: Name of host (vrouter) to create router on, label: Hostname,
    type: string}
  name: {description: Name of the physical router that will be created., label: Physical
      Router Name, type: string}
  tenant_id: {label: Tenant ID, type: string}
  version: {label: Config version, type: number}
resources:
  device_monitor:
    depends_on: physical_router
    properties:
      field_name: switch
      properties:
        community_name: ESE_NODE_COMMUNITY
        device_ip: {get_param: device_ip}
      resource_id: {get_param: gohan_id}
      resource_type: ese_devices
      syncer_properties:
        etcd:
          status: {key: switch}
      tenant_id: {get_param: tenant_id}
      type: snmp_device
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget
  physical_router:
    properties:
      fq_name:
      - default-global-system-config
      - {get_param: hostname}
      resource_type: physical_router
    type: OS::Contrail::ExistingResource

### Create Ese Physical Port ###
name:[xe-0/0/3], id:[887fecdd-956b-47fa-a348-8940c53a5bf9]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
04:53:37.318904  04:53:37.496402  0.177498        POST     201    PENDING_CREATE
04:53:37.497187  04:53:37.597065  0.099878         GET     200    PENDING_CREATE
04:53:38.598473  04:53:38.668698  0.070225         GET     200    PENDING_CREATE
04:53:39.670060  04:53:39.743402  0.073342         GET     200    PENDING_CREATE
04:53:40.744536  04:53:40.824540  0.080004         GET     200    PENDING_CREATE
04:53:41.825921  04:53:41.897420  0.071499         GET     200    PENDING_CREATE
04:53:42.898761  04:53:42.978302  0.079541         GET     200    PENDING_CREATE
04:53:43.978634  04:53:44.061612  0.082978         GET     200    PENDING_CREATE
04:53:45.062912  04:53:45.152646  0.089734         GET     200    PENDING_CREATE
04:53:46.153996  04:53:46.235897  0.081901         GET     200    PENDING_CREATE
04:53:47.237178  04:53:47.307806  0.070628         GET     200    PENDING_CREATE
04:53:48.309105  04:53:48.391053  0.081948         GET     200    PENDING_CREATE
04:53:49.392385  04:53:49.475964  0.083579         GET     200    PENDING_CREATE
04:53:50.477286  04:53:50.547969  0.070683         GET     200    PENDING_CREATE
04:53:51.548492  04:53:51.621770  0.073278         GET     200    PENDING_CREATE
04:53:52.623085  04:53:52.705189  0.082104         GET     200    PENDING_CREATE
04:53:53.706519  04:53:53.778162  0.071643         GET     200    PENDING_CREATE
04:53:54.779461  04:53:54.866652  0.087191         GET     200    PENDING_CREATE
04:53:55.867964  04:53:55.938889  0.070925         GET     200    PENDING_CREATE
04:53:56.940191  04:53:57.011339  0.071148         GET     200    PENDING_CREATE
04:53:58.012612  04:53:58.083689  0.071077         GET     200    PENDING_CREATE
04:53:59.084967  04:53:59.163438  0.078471         GET     200    PENDING_CREATE
04:54:00.164713  04:54:00.234336  0.069623         GET     200    PENDING_CREATE
04:54:01.235601  04:54:01.303806  0.068205         GET     200    PENDING_CREATE
04:54:02.305087  04:54:02.377305  0.072218         GET     200    PENDING_CREATE
04:54:03.378583  04:54:03.453017  0.074434         GET     200    PENDING_CREATE
04:54:04.454301  04:54:04.524243  0.069942         GET     200    PENDING_CREATE
04:54:05.525584  04:54:05.595958  0.070374         GET     200    PENDING_CREATE
04:54:06.597254  04:54:06.750522  0.153268         GET     200    PENDING_CREATE
04:54:07.751806  04:54:07.821080  0.069274         GET     200    PENDING_CREATE
04:54:08.821435  04:54:08.893725  0.072290         GET     200    PENDING_CREATE
04:54:09.895034  04:54:09.978935  0.083901         GET     200    PENDING_CREATE
04:54:10.980321  04:54:11.048516  0.068195         GET     200    PENDING_CREATE
04:54:12.049824  04:54:12.130010  0.080186         GET     200    PENDING_CREATE
04:54:13.131346  04:54:13.203185  0.071839         GET     200    PENDING_CREATE
04:54:14.204474  04:54:14.273858  0.069384         GET     200    PENDING_CREATE
04:54:15.275569  04:54:15.346505  0.070936         GET     200    PENDING_CREATE
04:54:16.347874  04:54:16.428536  0.080662         GET     200    PENDING_CREATE
04:54:17.429947  04:54:17.502509  0.072562         GET     200    PENDING_CREATE
04:54:18.503858  04:54:18.577070  0.073212         GET     200    PENDING_CREATE
04:54:19.578345  04:54:19.651788  0.073443         GET     200    PENDING_CREATE
04:54:20.652746  04:54:20.723573  0.070827         GET     200    PENDING_CREATE
04:54:21.724559  04:54:21.816274  0.091715         GET     200    PENDING_CREATE
04:54:22.817700  04:54:22.899513  0.081813         GET     200    PENDING_CREATE
04:54:23.900796  04:54:23.982090  0.081294         GET     200    PENDING_CREATE
04:54:24.983375  04:54:25.055452  0.072077         GET     200    PENDING_CREATE
04:54:26.056718  04:54:26.125456  0.068738         GET     200    PENDING_CREATE
04:54:27.126424  04:54:27.194959  0.068535         GET     200    PENDING_CREATE
04:54:28.196210  04:54:28.265824  0.069614         GET     200    PENDING_CREATE
04:54:29.267097  04:54:29.335587  0.068490         GET     200    PENDING_CREATE
04:54:30.336882  04:54:30.413873  0.076991         GET     200    PENDING_CREATE
04:54:31.415140  04:54:31.485459  0.070319         GET     200    PENDING_CREATE
04:54:32.486116  04:54:32.558775  0.072659         GET     200    PENDING_CREATE
04:54:33.560067  04:54:33.632034  0.071967         GET     200    PENDING_CREATE
04:54:34.632532  04:54:34.700048  0.067516         GET     200    PENDING_CREATE
04:54:35.701362  04:54:35.772363  0.071001         GET     200    PENDING_CREATE
04:54:36.773708  04:54:36.851844  0.078136         GET     200    PENDING_CREATE
04:54:37.852297  04:54:37.922845  0.070548         GET     200    PENDING_CREATE
04:54:38.924184  04:54:39.016799  0.092615         GET     200    PENDING_CREATE
04:54:40.017901  04:54:40.084801  0.066900         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 62.765897

[localhost] local: gohan client ese_physical_port show --output-format json 887fecdd-956b-47fa-a348-8940c53a5bf9
{
    "ese_physical_port": {
        "connected_port_id": "",
        "connected_port_owner": "mx_downlink",
        "description": "",
        "ese_device_id": "3fb53223-b614-46b6-92e8-25c3bcbed214",
        "existing": "new",
        "id": "887fecdd-956b-47fa-a348-8940c53a5bf9",
        "name": "xe-0/0/3",
        "operational_state": "UP",
        "orchestration_state": "CREATE_COMPLETE",
        "status": "ACTIVE",
        "tags": {},
        "tenant_id": "06d6b792b31c40daa546fb0f4e35980d"
    }
}

#################################################
### checking heat-stack (ese_physical_ports) ####
#################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/ese_physical_ports/887fecdd-956b-47fa-a348-8940c53a5bf9
[localhost] local: heat stack-show ese_physical_port_887fecdd-956b-47fa-a348-8940c53a5bf9
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                           |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                              |
| creation_time         | 2018-04-04T04:53:38Z                                                                                                                                                                            |
| description           | Physical port template                                                                                                                                                                          |
| disable_rollback      | True                                                                                                                                                                                            |
| id                    | 8d93fc7d-322a-45ae-a2c6-702204b00b19                                                                                                                                                            |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/06d6b792b31c40daa546fb0f4e35980d/stacks/ese_physical_port_887fecdd-956b-47fa-a348-8940c53a5bf9/8d93fc7d-322a-45ae-a2c6-702204b00b19 |
| notification_topics   | []                                                                                                                                                                                              |
| outputs               | [                                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                             |
|                       |     "output_value": "f6c72cbd-294e-4894-87b5-c98c67554265",                                                                                                                                     |
|                       |     "description": "Monitoring Target ID",                                                                                                                                                      |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                                        |
|                       |   },                                                                                                                                                                                            |
|                       |   {                                                                                                                                                                                             |
|                       |     "output_value": "06bfe521-07f0-4931-9f8c-318c3ad8114e",                                                                                                                                     |
|                       |     "description": "A unique id for the physical interface",                                                                                                                                    |
|                       |     "output_key": "id"                                                                                                                                                                          |
|                       |   },                                                                                                                                                                                            |
|                       |   {                                                                                                                                                                                             |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/f6c72cbd-294e-4894-87b5-c98c67554265",                                                            |
|                       |     "description": "Monitoring Process Link",                                                                                                                                                   |
|                       |     "output_key": "monitoring_link"                                                                                                                                                             |
|                       |   },                                                                                                                                                                                            |
|                       |   {                                                                                                                                                                                             |
|                       |     "output_value": "xe-0/0/38",                                                                                                                                                                |
|                       |     "description": "The name of the physical interface.",                                                                                                                                       |
|                       |     "output_key": "name"                                                                                                                                                                        |
|                       |   }                                                                                                                                                                                             |
|                       | ]                                                                                                                                                                                               |
| parameters            | {                                                                                                                                                                                               |
|                       |   "physical_port_name": "xe-0/0/3",                                                                                                                                                             |
|                       |   "OS::stack_id": "8d93fc7d-322a-45ae-a2c6-702204b00b19",                                                                                                                                       |
|                       |   "OS::stack_name": "ese_physical_port_887fecdd-956b-47fa-a348-8940c53a5bf9",                                                                                                                   |
|                       |   "tenant_id": "06d6b792b31c40daa546fb0f4e35980d",                                                                                                                                              |
|                       |   "device_ip": "10.161.0.34",                                                                                                                                                                   |
|                       |   "physical_device": "7e5c78fa-71c0-427e-947f-586b1fc3c470",                                                                                                                                    |
|                       |   "version": "1",                                                                                                                                                                               |
|                       |   "gohan_id": "887fecdd-956b-47fa-a348-8940c53a5bf9"                                                                                                                                            |
|                       | }                                                                                                                                                                                               |
| parent                | None                                                                                                                                                                                            |
| stack_name            | ese_physical_port_887fecdd-956b-47fa-a348-8940c53a5bf9                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                           |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                                 |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                             |
| stack_user_project_id | 06d6b792b31c40daa546fb0f4e35980d                                                                                                                                                                |
| template_description  | Physical port template                                                                                                                                                                          |
| timeout_mins          | 6                                                                                                                                                                                               |
| updated_time          | None                                                                                                                                                                                            |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show ese_physical_port_887fecdd-956b-47fa-a348-8940c53a5bf9
description: 'Physical port template

  '
heat_template_version: '2013-05-23'
outputs:
  id:
    description: A unique id for the physical interface
    value: {get_resource: physical_interface}
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [interface_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: interface_monitor}
  name:
    description: The name of the physical interface.
    value:
      get_attr: [physical_interface, name]
parameters:
  device_ip: {description: Device IP Address., label: Device IP Address, type: string}
  gohan_id: {description: UUID of the ESE Physical Port, label: Gohan resource ID,
    type: string}
  physical_device: {description: Id of the physical device on which physical port
      will be created., label: Physical Device Id, type: string}
  physical_port_name: {description: Name of the physical port., label: Physical Interface
      Name, type: string}
  tenant_id: {label: Tenant ID, type: string}
  version: {label: Config version, type: number}
resources:
  interface_monitor:
    depends_on: physical_interface
    properties:
      field_name: port
      properties:
        community_name: ESE_NODE_COMMUNITY
        device_ip: {get_param: device_ip}
        if_name: {get_param: physical_port_name}
      resource_id: {get_param: gohan_id}
      resource_type: ese_physical_ports
      syncer_properties:
        etcd:
          status: {key: port}
      tenant_id: {get_param: tenant_id}
      type: snmp_ports_status
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget
  physical_interface:
    properties:
      name: {get_param: physical_port_name}
      physical_router: {get_param: physical_device}
    type: OS::Contrail::PhysicalInterface

### Create Ese Physical Port ###
name:[xe-0/0/4], id:[6b29894f-8694-4865-92c1-2e78360e65a6]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
04:54:42.993414  04:54:43.146670  0.153256        POST     201    PENDING_CREATE
04:54:43.146919  04:54:43.249193  0.102274         GET     200    PENDING_CREATE
04:54:44.250481  04:54:44.321031  0.070550         GET     200    PENDING_CREATE
04:54:45.322291  04:54:45.391353  0.069062         GET     200    PENDING_CREATE
04:54:46.392506  04:54:46.490692  0.098186         GET     200    PENDING_CREATE
04:54:47.491019  04:54:47.569017  0.077998         GET     200    PENDING_CREATE
04:54:48.570287  04:54:48.644388  0.074101         GET     200    PENDING_CREATE
04:54:49.645778  04:54:49.717843  0.072065         GET     200    PENDING_CREATE
04:54:50.718683  04:54:50.794647  0.075964         GET     200    PENDING_CREATE
04:54:51.795929  04:54:51.871120  0.075191         GET     200    PENDING_CREATE
04:54:52.871530  04:54:52.942184  0.070654         GET     200    PENDING_CREATE
04:54:53.942979  04:54:54.016774  0.073795         GET     200    PENDING_CREATE
04:54:55.018132  04:54:55.093784  0.075652         GET     200    PENDING_CREATE
04:54:56.095060  04:54:56.169133  0.074073         GET     200    PENDING_CREATE
04:54:57.170391  04:54:57.243467  0.073076         GET     200    PENDING_CREATE
04:54:58.243791  04:54:58.334286  0.090495         GET     200    PENDING_CREATE
04:54:59.335305  04:54:59.408734  0.073429         GET     200    PENDING_CREATE
04:55:00.409999  04:55:00.485199  0.075200         GET     200    PENDING_CREATE
04:55:01.486496  04:55:01.558621  0.072125         GET     200    PENDING_CREATE
04:55:02.559364  04:55:02.641657  0.082293         GET     200    PENDING_CREATE
04:55:03.642618  04:55:03.717034  0.074416         GET     200    PENDING_CREATE
04:55:04.717489  04:55:04.788844  0.071355         GET     200    PENDING_CREATE
04:55:05.789370  04:55:05.859338  0.069968         GET     200    PENDING_CREATE
04:55:06.860596  04:55:06.930990  0.070394         GET     200    PENDING_CREATE
04:55:07.932254  04:55:08.003321  0.071067         GET     200    PENDING_CREATE
04:55:09.004510  04:55:09.086612  0.082102         GET     200    PENDING_CREATE
04:55:10.087879  04:55:10.175576  0.087697         GET     200    PENDING_CREATE
04:55:11.176299  04:55:11.246054  0.069755         GET     200    PENDING_CREATE
04:55:12.247313  04:55:12.321344  0.074031         GET     200    PENDING_CREATE
04:55:13.322639  04:55:13.394636  0.071997         GET     200    PENDING_CREATE
04:55:14.395900  04:55:14.466911  0.071011         GET     200    PENDING_CREATE
04:55:15.468206  04:55:15.542531  0.074325         GET     200    PENDING_CREATE
04:55:16.543752  04:55:16.618568  0.074816         GET     200    PENDING_CREATE
04:55:17.620205  04:55:17.689767  0.069562         GET     200    PENDING_CREATE
04:55:18.691119  04:55:18.764006  0.072887         GET     200    PENDING_CREATE
04:55:19.764523  04:55:19.838735  0.074212         GET     200    PENDING_CREATE
04:55:20.839264  04:55:20.923842  0.084578         GET     200    PENDING_CREATE
04:55:21.924834  04:55:22.003903  0.079069         GET     200    PENDING_CREATE
04:55:23.004563  04:55:23.079579  0.075016         GET     200    PENDING_CREATE
04:55:24.080917  04:55:24.165808  0.084891         GET     200    PENDING_CREATE
04:55:25.167179  04:55:25.240219  0.073040         GET     200    PENDING_CREATE
04:55:26.240676  04:55:26.310036  0.069360         GET     200    PENDING_CREATE
04:55:27.311303  04:55:27.380267  0.068964         GET     200    PENDING_CREATE
04:55:28.381040  04:55:28.452016  0.070976         GET     200    PENDING_CREATE
04:55:29.452959  04:55:29.653511  0.200552         GET     200    PENDING_CREATE
04:55:30.655521  04:55:30.727667  0.072146         GET     200    PENDING_CREATE
04:55:31.728533  04:55:31.797823  0.069290         GET     200    PENDING_CREATE
04:55:32.799195  04:55:32.869564  0.070369         GET     200    PENDING_CREATE
04:55:33.870944  04:55:33.946813  0.075869         GET     200    PENDING_CREATE
04:55:34.948178  04:55:35.025716  0.077538         GET     200    PENDING_CREATE
04:55:36.027128  04:55:36.115512  0.088384         GET     200    PENDING_CREATE
04:55:37.116016  04:55:37.184895  0.068879         GET     200    PENDING_CREATE
04:55:38.186264  04:55:38.262091  0.075827         GET     200    PENDING_CREATE
04:55:39.263590  04:55:39.448999  0.185409         GET     200    PENDING_CREATE
04:55:40.450281  04:55:40.521117  0.070836         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 57.527703

[localhost] local: gohan client ese_physical_port show --output-format json 6b29894f-8694-4865-92c1-2e78360e65a6
{
    "ese_physical_port": {
        "connected_port_id": "",
        "connected_port_owner": "mx_downlink",
        "description": "",
        "ese_device_id": "3fb53223-b614-46b6-92e8-25c3bcbed214",
        "existing": "new",
        "id": "6b29894f-8694-4865-92c1-2e78360e65a6",
        "name": "xe-0/0/4",
        "operational_state": "UP",
        "orchestration_state": "CREATE_COMPLETE",
        "status": "ACTIVE",
        "tags": {},
        "tenant_id": "06d6b792b31c40daa546fb0f4e35980d"
    }
}

#################################################
### checking heat-stack (ese_physical_ports) ####
#################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/ese_physical_ports/6b29894f-8694-4865-92c1-2e78360e65a6
[localhost] local: heat stack-show ese_physical_port_6b29894f-8694-4865-92c1-2e78360e65a6
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                           |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                              |
| creation_time         | 2018-04-04T04:54:43Z                                                                                                                                                                            |
| description           | Physical port template                                                                                                                                                                          |
| disable_rollback      | True                                                                                                                                                                                            |
| id                    | ab9cc949-a71e-4ed4-bc75-0b4b847edec2                                                                                                                                                            |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/06d6b792b31c40daa546fb0f4e35980d/stacks/ese_physical_port_6b29894f-8694-4865-92c1-2e78360e65a6/ab9cc949-a71e-4ed4-bc75-0b4b847edec2 |
| notification_topics   | []                                                                                                                                                                                              |
| outputs               | [                                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                             |
|                       |     "output_value": "02761d5d-f2ae-4806-bff6-df5851f514ed",                                                                                                                                     |
|                       |     "description": "Monitoring Target ID",                                                                                                                                                      |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                                        |
|                       |   },                                                                                                                                                                                            |
|                       |   {                                                                                                                                                                                             |
|                       |     "output_value": "06bfe521-07f0-4931-9f8c-318c3ad8114e",                                                                                                                                     |
|                       |     "description": "A unique id for the physical interface",                                                                                                                                    |
|                       |     "output_key": "id"                                                                                                                                                                          |
|                       |   },                                                                                                                                                                                            |
|                       |   {                                                                                                                                                                                             |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/02761d5d-f2ae-4806-bff6-df5851f514ed",                                                            |
|                       |     "description": "Monitoring Process Link",                                                                                                                                                   |
|                       |     "output_key": "monitoring_link"                                                                                                                                                             |
|                       |   },                                                                                                                                                                                            |
|                       |   {                                                                                                                                                                                             |
|                       |     "output_value": "xe-0/0/38",                                                                                                                                                                |
|                       |     "description": "The name of the physical interface.",                                                                                                                                       |
|                       |     "output_key": "name"                                                                                                                                                                        |
|                       |   }                                                                                                                                                                                             |
|                       | ]                                                                                                                                                                                               |
| parameters            | {                                                                                                                                                                                               |
|                       |   "physical_port_name": "xe-0/0/4",                                                                                                                                                             |
|                       |   "OS::stack_id": "ab9cc949-a71e-4ed4-bc75-0b4b847edec2",                                                                                                                                       |
|                       |   "OS::stack_name": "ese_physical_port_6b29894f-8694-4865-92c1-2e78360e65a6",                                                                                                                   |
|                       |   "tenant_id": "06d6b792b31c40daa546fb0f4e35980d",                                                                                                                                              |
|                       |   "device_ip": "10.161.0.34",                                                                                                                                                                   |
|                       |   "physical_device": "7e5c78fa-71c0-427e-947f-586b1fc3c470",                                                                                                                                    |
|                       |   "version": "1",                                                                                                                                                                               |
|                       |   "gohan_id": "6b29894f-8694-4865-92c1-2e78360e65a6"                                                                                                                                            |
|                       | }                                                                                                                                                                                               |
| parent                | None                                                                                                                                                                                            |
| stack_name            | ese_physical_port_6b29894f-8694-4865-92c1-2e78360e65a6                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                           |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                                 |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                             |
| stack_user_project_id | 06d6b792b31c40daa546fb0f4e35980d                                                                                                                                                                |
| template_description  | Physical port template                                                                                                                                                                          |
| timeout_mins          | 6                                                                                                                                                                                               |
| updated_time          | None                                                                                                                                                                                            |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show ese_physical_port_6b29894f-8694-4865-92c1-2e78360e65a6
description: 'Physical port template

  '
heat_template_version: '2013-05-23'
outputs:
  id:
    description: A unique id for the physical interface
    value: {get_resource: physical_interface}
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [interface_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: interface_monitor}
  name:
    description: The name of the physical interface.
    value:
      get_attr: [physical_interface, name]
parameters:
  device_ip: {description: Device IP Address., label: Device IP Address, type: string}
  gohan_id: {description: UUID of the ESE Physical Port, label: Gohan resource ID,
    type: string}
  physical_device: {description: Id of the physical device on which physical port
      will be created., label: Physical Device Id, type: string}
  physical_port_name: {description: Name of the physical port., label: Physical Interface
      Name, type: string}
  tenant_id: {label: Tenant ID, type: string}
  version: {label: Config version, type: number}
resources:
  interface_monitor:
    depends_on: physical_interface
    properties:
      field_name: port
      properties:
        community_name: ESE_NODE_COMMUNITY
        device_ip: {get_param: device_ip}
        if_name: {get_param: physical_port_name}
      resource_id: {get_param: gohan_id}
      resource_type: ese_physical_ports
      syncer_properties:
        etcd:
          status: {key: port}
      tenant_id: {get_param: tenant_id}
      type: snmp_ports_status
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget
  physical_interface:
    properties:
      name: {get_param: physical_port_name}
      physical_router: {get_param: physical_device}
    type: OS::Contrail::PhysicalInterface

### Create Edge Router ###
name:[vMX-router-02], id:[cbe0fe23-8461-4a71-a7cc-a3a1d8c1fd78]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
04:55:43.325213  04:55:43.467321  0.142108        POST     201    PENDING_CREATE
04:55:43.467557  04:55:43.597229  0.129672         GET     200    PENDING_CREATE
04:55:44.598955  04:55:44.680725  0.081770         GET     200    PENDING_CREATE
04:55:45.682789  04:55:45.770537  0.087748         GET     200    PENDING_CREATE
04:55:46.771806  04:55:46.839610  0.067804         GET     200    PENDING_CREATE
04:55:47.840878  04:55:47.908992  0.068114         GET     200    PENDING_CREATE
04:55:48.910270  04:55:48.987139  0.076869         GET     200    PENDING_CREATE
04:55:49.988384  04:55:50.058367  0.069983         GET     200    PENDING_CREATE
04:55:51.059444  04:55:51.138466  0.079022         GET     200    PENDING_CREATE
04:55:52.139760  04:55:52.219152  0.079392         GET     200    PENDING_CREATE
04:55:53.220505  04:55:53.299285  0.078780         GET     200    PENDING_CREATE
04:55:54.300637  04:55:54.369738  0.069101         GET     200    PENDING_CREATE
04:55:55.371128  04:55:55.459992  0.088864         GET     200    PENDING_CREATE
04:55:56.460860  04:55:56.546880  0.086020         GET     200    PENDING_CREATE
04:55:57.548179  04:55:57.621348  0.073169         GET     200    PENDING_CREATE
04:55:58.622064  04:55:58.705595  0.083531         GET     200    PENDING_CREATE
04:55:59.706946  04:55:59.776518  0.069572         GET     200    PENDING_CREATE
04:56:00.778421  04:56:00.846704  0.068283         GET     200    PENDING_CREATE
04:56:01.848348  04:56:01.917195  0.068847         GET     200    PENDING_CREATE
04:56:02.918532  04:56:02.987484  0.068952         GET     200    PENDING_CREATE
04:56:03.990135  04:56:04.063425  0.073290         GET     200    PENDING_CREATE
04:56:05.064466  04:56:05.170164  0.105698         GET     200    PENDING_CREATE
04:56:06.171536  04:56:06.250462  0.078926         GET     200    PENDING_CREATE
04:56:07.251534  04:56:07.327987  0.076453         GET     200    PENDING_CREATE
04:56:08.329379  04:56:08.409867  0.080488         GET     200    PENDING_CREATE
04:56:09.411303  04:56:09.512705  0.101402         GET     200    PENDING_CREATE
04:56:10.514140  04:56:10.594360  0.080220         GET     200    PENDING_CREATE
04:56:11.595441  04:56:11.671182  0.075741         GET     200    PENDING_CREATE
04:56:12.671824  04:56:12.754927  0.083103         GET     200    PENDING_CREATE
04:56:13.756259  04:56:13.835614  0.079355         GET     200    PENDING_CREATE
04:56:14.836944  04:56:14.906393  0.069449         GET     200    PENDING_CREATE
04:56:15.907652  04:56:15.977214  0.069562         GET     200    PENDING_CREATE
04:56:16.978501  04:56:17.060407  0.081906         GET     200    PENDING_CREATE
04:56:18.061724  04:56:18.132037  0.070313         GET     200    PENDING_CREATE
04:56:19.133396  04:56:19.203381  0.069985         GET     200    PENDING_CREATE
04:56:20.204905  04:56:20.274028  0.069123         GET     200    PENDING_CREATE
04:56:21.274658  04:56:21.342802  0.068144         GET     200    PENDING_CREATE
04:56:22.344143  04:56:22.413003  0.068860         GET     200    PENDING_CREATE
04:56:23.414358  04:56:23.505694  0.091336         GET     200    PENDING_CREATE
04:56:24.507100  04:56:24.579109  0.072009         GET     200    PENDING_CREATE
04:56:25.580477  04:56:25.651117  0.070640         GET     200    PENDING_CREATE
04:56:26.652340  04:56:26.719016  0.066676         GET     200    PENDING_CREATE
04:56:27.720345  04:56:27.790297  0.069952         GET     200    PENDING_CREATE
04:56:28.791900  04:56:28.861547  0.069647         GET     200    PENDING_CREATE
04:56:29.862219  04:56:29.930857  0.068638         GET     200    PENDING_CREATE
04:56:30.932935  04:56:31.001465  0.068530         GET     200    PENDING_CREATE
04:56:32.003020  04:56:32.071186  0.068166         GET     200    PENDING_CREATE
04:56:33.072830  04:56:33.157855  0.085025         GET     200    PENDING_CREATE
04:56:34.159263  04:56:34.227804  0.068541         GET     200    PENDING_CREATE
04:56:35.229215  04:56:35.311550  0.082335         GET     200    PENDING_CREATE
04:56:36.313005  04:56:36.394548  0.081543         GET     200    PENDING_CREATE
04:56:37.396029  04:56:37.475836  0.079807         GET     200    PENDING_CREATE
04:56:38.477290  04:56:38.558616  0.081326         GET     200    PENDING_CREATE
04:56:39.559137  04:56:39.626606  0.067469         GET     200    PENDING_CREATE
04:56:40.628523  04:56:40.700001  0.071478         GET     200    PENDING_CREATE
04:56:41.700848  04:56:41.771065  0.070217         GET     200    PENDING_CREATE
04:56:42.772833  04:56:42.840567  0.067734         GET     200    PENDING_CREATE
04:56:43.841311  04:56:43.920073  0.078762         GET     200    PENDING_CREATE
04:56:44.920599  04:56:45.006471  0.085872         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 61.681258

[localhost] local: gohan client edge_router show --output-format json cbe0fe23-8461-4a71-a7cc-a3a1d8c1fd78
{
    "edge_router": {
        "autonomous_system": "65101",
        "description": "MX80 #2",
        "id": "cbe0fe23-8461-4a71-a7cc-a3a1d8c1fd78",
        "ip": "10.79.5.185",
        "login": "esi",
        "name": "vMX-router-02",
        "operational_state": "UP",
        "orchestration_state": "CREATE_COMPLETE",
        "password": "esiesi0000",
        "ssh_port": 830,
        "status": "ACTIVE",
        "tenant_id": "06d6b792b31c40daa546fb0f4e35980d"
    }
}

###########################################
### checking heat-stack (edge_routers) ####
###########################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/edge_routers/cbe0fe23-8461-4a71-a7cc-a3a1d8c1fd78
[localhost] local: heat stack-show edge_router_cbe0fe23-8461-4a71-a7cc-a3a1d8c1fd78
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                     |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                        |
| creation_time         | 2018-04-04T04:55:44Z                                                                                                                                                                      |
| description           | Physical port template                                                                                                                                                                    |
| disable_rollback      | True                                                                                                                                                                                      |
| id                    | 21d3a7cd-246e-4dfc-9922-795d8dbaf969                                                                                                                                                      |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/06d6b792b31c40daa546fb0f4e35980d/stacks/edge_router_cbe0fe23-8461-4a71-a7cc-a3a1d8c1fd78/21d3a7cd-246e-4dfc-9922-795d8dbaf969 |
| notification_topics   | []                                                                                                                                                                                        |
| outputs               | [                                                                                                                                                                                         |
|                       |   {                                                                                                                                                                                       |
|                       |     "output_value": "9363d0ec-e347-482c-8d0d-da1d8e11ad73",                                                                                                                               |
|                       |     "description": "Monitoring Target ID",                                                                                                                                                |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                                  |
|                       |   },                                                                                                                                                                                      |
|                       |   {                                                                                                                                                                                       |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/9363d0ec-e347-482c-8d0d-da1d8e11ad73",                                                      |
|                       |     "description": "Monitoring Process Link",                                                                                                                                             |
|                       |     "output_key": "monitoring_link"                                                                                                                                                       |
|                       |   }                                                                                                                                                                                       |
|                       | ]                                                                                                                                                                                         |
| parameters            | {                                                                                                                                                                                         |
|                       |   "OS::stack_id": "21d3a7cd-246e-4dfc-9922-795d8dbaf969",                                                                                                                                 |
|                       |   "OS::stack_name": "edge_router_cbe0fe23-8461-4a71-a7cc-a3a1d8c1fd78",                                                                                                                   |
|                       |   "tenant_id": "06d6b792b31c40daa546fb0f4e35980d",                                                                                                                                        |
|                       |   "device_ip": "10.79.5.185",                                                                                                                                                             |
|                       |   "version": "1",                                                                                                                                                                         |
|                       |   "gohan_id": "cbe0fe23-8461-4a71-a7cc-a3a1d8c1fd78"                                                                                                                                      |
|                       | }                                                                                                                                                                                         |
| parent                | None                                                                                                                                                                                      |
| stack_name            | edge_router_cbe0fe23-8461-4a71-a7cc-a3a1d8c1fd78                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                     |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                           |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                       |
| stack_user_project_id | 06d6b792b31c40daa546fb0f4e35980d                                                                                                                                                          |
| template_description  | Physical port template                                                                                                                                                                    |
| timeout_mins          | 3                                                                                                                                                                                         |
| updated_time          | None                                                                                                                                                                                      |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show edge_router_cbe0fe23-8461-4a71-a7cc-a3a1d8c1fd78
description: 'Physical port template

  '
heat_template_version: '2013-05-23'
outputs:
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [device_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: device_monitor}
parameters:
  device_ip: {description: Device IP Address, label: Device IP Address, type: string}
  gohan_id: {description: UUID of the Edge Router, label: Gohan resource ID, type: string}
  tenant_id: {label: Tenant ID, type: string}
  version: {label: Config version, type: number}
resources:
  device_monitor:
    properties:
      field_name: router
      properties:
        community_name: EDGE_ROUTER_COMMUNITY
        device_ip: {get_param: device_ip}
      resource_id: {get_param: gohan_id}
      resource_type: edge_routers
      syncer_properties:
        etcd:
          status: {key: router}
      tenant_id: {get_param: tenant_id}
      type: snmp_device
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget

### Create Edge Router ###
name:[vMX-router-01], id:[ca43aedb-bc30-4355-a931-7bb1d9040659]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
04:56:47.659598  04:56:47.805931  0.146333        POST     201    PENDING_CREATE
04:56:47.807411  04:56:48.333042  0.525631         GET     200    PENDING_CREATE
04:56:49.334341  04:56:49.411050  0.076709         GET     200    PENDING_CREATE
04:56:50.411427  04:56:50.514114  0.102687         GET     200    PENDING_CREATE
04:56:51.515389  04:56:51.586683  0.071294         GET     200    PENDING_CREATE
04:56:52.587940  04:56:52.657961  0.070021         GET     200    PENDING_CREATE
04:56:53.659225  04:56:53.735196  0.075971         GET     200    PENDING_CREATE
04:56:54.736003  04:56:54.805125  0.069122         GET     200    PENDING_CREATE
04:56:55.806486  04:56:55.877526  0.071040         GET     200    PENDING_CREATE
04:56:56.878549  04:56:56.951731  0.073182         GET     200    PENDING_CREATE
04:56:57.953077  04:56:58.026160  0.073083         GET     200    PENDING_CREATE
04:56:59.027502  04:56:59.099485  0.071983         GET     200    PENDING_CREATE
04:57:00.100583  04:57:00.167544  0.066961         GET     200    PENDING_CREATE
04:57:01.168886  04:57:01.239407  0.070521         GET     200    PENDING_CREATE
04:57:02.240734  04:57:02.308234  0.067500         GET     200    PENDING_CREATE
04:57:03.309715  04:57:03.378936  0.069221         GET     200    PENDING_CREATE
04:57:04.379451  04:57:04.451435  0.071984         GET     200    PENDING_CREATE
04:57:05.452458  04:57:05.534757  0.082299         GET     200    PENDING_CREATE
04:57:06.536017  04:57:06.616642  0.080625         GET     200    PENDING_CREATE
04:57:07.617854  04:57:07.688916  0.071062         GET     200    PENDING_CREATE
04:57:08.690222  04:57:08.761794  0.071572         GET     200    PENDING_CREATE
04:57:09.763058  04:57:09.832265  0.069207         GET     200    PENDING_CREATE
04:57:10.832683  04:57:10.901184  0.068501         GET     200    PENDING_CREATE
04:57:11.902467  04:57:11.972049  0.069582         GET     200    PENDING_CREATE
04:57:12.973336  04:57:13.040716  0.067380         GET     200    PENDING_CREATE
04:57:14.041008  04:57:14.114631  0.073623         GET     200    PENDING_CREATE
04:57:15.115904  04:57:15.184303  0.068399         GET     200    PENDING_CREATE
04:57:16.185271  04:57:16.251269  0.065998         GET     200    PENDING_CREATE
04:57:17.252528  04:57:17.321170  0.068642         GET     200    PENDING_CREATE
04:57:18.322504  04:57:18.390951  0.068447         GET     200    PENDING_CREATE
04:57:19.392290  04:57:19.460050  0.067760         GET     200    PENDING_CREATE
04:57:20.460597  04:57:20.528750  0.068153         GET     200    PENDING_CREATE
04:57:21.530041  04:57:21.608474  0.078433         GET     200    PENDING_CREATE
04:57:22.609736  04:57:22.679666  0.069930         GET     200    PENDING_CREATE
04:57:23.680533  04:57:23.749887  0.069354         GET     200    PENDING_CREATE
04:57:24.751145  04:57:24.822976  0.071831         GET     200    PENDING_CREATE
04:57:25.823463  04:57:25.907638  0.084175         GET     200    PENDING_CREATE
04:57:26.908976  04:57:26.983110  0.074134         GET     200    PENDING_CREATE
04:57:27.984381  04:57:28.053963  0.069582         GET     200    PENDING_CREATE
04:57:29.055222  04:57:29.123615  0.068393         GET     200    PENDING_CREATE
04:57:30.124499  04:57:30.487638  0.363139         GET     200    PENDING_CREATE
04:57:31.488925  04:57:31.567906  0.078981         GET     200    PENDING_CREATE
04:57:32.568920  04:57:32.649867  0.080947         GET     200    PENDING_CREATE
04:57:33.650550  04:57:33.721389  0.070839         GET     200    PENDING_CREATE
04:57:34.722689  04:57:34.803008  0.080319         GET     200    PENDING_CREATE
04:57:35.803973  04:57:35.873607  0.069634         GET     200    PENDING_CREATE
04:57:36.874059  04:57:36.959271  0.085212         GET     200    PENDING_CREATE
04:57:37.959615  04:57:38.029515  0.069900         GET     200    PENDING_CREATE
04:57:39.030852  04:57:39.109141  0.078289         GET     200    PENDING_CREATE
04:57:40.110503  04:57:40.181898  0.071395         GET     200    PENDING_CREATE
04:57:41.183199  04:57:41.266054  0.082855         GET     200    PENDING_CREATE
04:57:42.267409  04:57:42.345985  0.078576         GET     200    PENDING_CREATE
04:57:43.347327  04:57:43.429694  0.082367         GET     200    PENDING_CREATE
04:57:44.431033  04:57:44.512642  0.081609         GET     200    PENDING_CREATE
04:57:45.514072  04:57:45.585048  0.070976         GET     200    PENDING_CREATE
04:57:46.586367  04:57:46.671233  0.084866         GET     200    PENDING_CREATE
04:57:47.672207  04:57:47.757101  0.084894         GET     200    PENDING_CREATE
04:57:48.758442  04:57:48.828333  0.069891         GET     200    PENDING_CREATE
04:57:49.829644  04:57:49.912569  0.082925         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 62.252971

[localhost] local: gohan client edge_router show --output-format json ca43aedb-bc30-4355-a931-7bb1d9040659
{
    "edge_router": {
        "autonomous_system": "65101",
        "description": "MX80 #1",
        "id": "ca43aedb-bc30-4355-a931-7bb1d9040659",
        "ip": "10.79.5.184",
        "login": "esi",
        "name": "vMX-router-01",
        "operational_state": "UP",
        "orchestration_state": "CREATE_COMPLETE",
        "password": "esiesi0000",
        "ssh_port": 830,
        "status": "ACTIVE",
        "tenant_id": "06d6b792b31c40daa546fb0f4e35980d"
    }
}

###########################################
### checking heat-stack (edge_routers) ####
###########################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/edge_routers/ca43aedb-bc30-4355-a931-7bb1d9040659
[localhost] local: heat stack-show edge_router_ca43aedb-bc30-4355-a931-7bb1d9040659
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                     |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                        |
| creation_time         | 2018-04-04T04:56:48Z                                                                                                                                                                      |
| description           | Physical port template                                                                                                                                                                    |
| disable_rollback      | True                                                                                                                                                                                      |
| id                    | 326adad0-04d6-4332-90fd-617990b9edf0                                                                                                                                                      |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/06d6b792b31c40daa546fb0f4e35980d/stacks/edge_router_ca43aedb-bc30-4355-a931-7bb1d9040659/326adad0-04d6-4332-90fd-617990b9edf0 |
| notification_topics   | []                                                                                                                                                                                        |
| outputs               | [                                                                                                                                                                                         |
|                       |   {                                                                                                                                                                                       |
|                       |     "output_value": "538cfead-67e3-4e5b-87a4-ad8f32b14366",                                                                                                                               |
|                       |     "description": "Monitoring Target ID",                                                                                                                                                |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                                  |
|                       |   },                                                                                                                                                                                      |
|                       |   {                                                                                                                                                                                       |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/538cfead-67e3-4e5b-87a4-ad8f32b14366",                                                      |
|                       |     "description": "Monitoring Process Link",                                                                                                                                             |
|                       |     "output_key": "monitoring_link"                                                                                                                                                       |
|                       |   }                                                                                                                                                                                       |
|                       | ]                                                                                                                                                                                         |
| parameters            | {                                                                                                                                                                                         |
|                       |   "OS::stack_id": "326adad0-04d6-4332-90fd-617990b9edf0",                                                                                                                                 |
|                       |   "OS::stack_name": "edge_router_ca43aedb-bc30-4355-a931-7bb1d9040659",                                                                                                                   |
|                       |   "tenant_id": "06d6b792b31c40daa546fb0f4e35980d",                                                                                                                                        |
|                       |   "device_ip": "10.79.5.184",                                                                                                                                                             |
|                       |   "version": "1",                                                                                                                                                                         |
|                       |   "gohan_id": "ca43aedb-bc30-4355-a931-7bb1d9040659"                                                                                                                                      |
|                       | }                                                                                                                                                                                         |
| parent                | None                                                                                                                                                                                      |
| stack_name            | edge_router_ca43aedb-bc30-4355-a931-7bb1d9040659                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                     |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                           |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                       |
| stack_user_project_id | 06d6b792b31c40daa546fb0f4e35980d                                                                                                                                                          |
| template_description  | Physical port template                                                                                                                                                                    |
| timeout_mins          | 3                                                                                                                                                                                         |
| updated_time          | None                                                                                                                                                                                      |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show edge_router_ca43aedb-bc30-4355-a931-7bb1d9040659
description: 'Physical port template

  '
heat_template_version: '2013-05-23'
outputs:
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [device_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: device_monitor}
parameters:
  device_ip: {description: Device IP Address, label: Device IP Address, type: string}
  gohan_id: {description: UUID of the Edge Router, label: Gohan resource ID, type: string}
  tenant_id: {label: Tenant ID, type: string}
  version: {label: Config version, type: number}
resources:
  device_monitor:
    properties:
      field_name: router
      properties:
        community_name: EDGE_ROUTER_COMMUNITY
        device_ip: {get_param: device_ip}
      resource_id: {get_param: gohan_id}
      resource_type: edge_routers
      syncer_properties:
        etcd:
          status: {key: router}
      tenant_id: {get_param: tenant_id}
      type: snmp_device
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget

### Create Ha Router ###
name:[sample-ha-router], id:[add04ae7-e48a-4583-a726-bed5f3b748c4]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
04:57:52.543699  04:57:52.726221  0.182522        POST     201    PENDING_CREATE
04:57:52.727178  04:57:52.806032  0.078854         GET     200    PENDING_CREATE
04:57:53.807316  04:57:53.875739  0.068423         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 1.33204

[localhost] local: gohan client ha_router show --output-format json add04ae7-e48a-4583-a726-bed5f3b748c4
{
    "ha_router": {
        "available_gateways": 500,
        "description": "sample_ha_router",
        "id": "add04ae7-e48a-4583-a726-bed5f3b748c4",
        "maximum_gateways": 500,
        "name": "sample-ha-router",
        "primary_router_id": "cbe0fe23-8461-4a71-a7cc-a3a1d8c1fd78",
        "secondary_router_id": "ca43aedb-bc30-4355-a931-7bb1d9040659",
        "status": "ACTIVE",
        "tenant_id": "06d6b792b31c40daa546fb0f4e35980d"
    }
}

### Create Er Physical Interface ###
name:[ae0], id:[53712736-354c-4374-be82-6f07bea9d1bd]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
04:57:54.519551  04:57:54.723544  0.203993        POST     201    PENDING_CREATE
04:57:54.724869  04:57:54.821661  0.096792         GET     200    PENDING_CREATE
04:57:55.823014  04:57:55.891934  0.068920         GET     200    PENDING_CREATE
04:57:56.892503  04:57:56.972337  0.079834         GET     200    PENDING_CREATE
04:57:57.973700  04:57:58.042440  0.068740         GET     200    PENDING_CREATE
04:57:59.043743  04:57:59.114416  0.070673         GET     200    PENDING_CREATE
04:58:00.115726  04:58:00.468917  0.353191         GET     200    PENDING_CREATE
04:58:01.470257  04:58:01.538077  0.067820         GET     200    PENDING_CREATE
04:58:02.539352  04:58:02.617349  0.077997         GET     200    PENDING_CREATE
04:58:03.618645  04:58:03.710538  0.091893         GET     200    PENDING_CREATE
04:58:04.711924  04:58:04.813185  0.101261         GET     200    PENDING_CREATE
04:58:05.814540  04:58:05.883866  0.069326         GET     200    PENDING_CREATE
04:58:06.884560  04:58:06.958238  0.073678         GET     200    PENDING_CREATE
04:58:07.959514  04:58:08.028397  0.068883         GET     200    PENDING_CREATE
04:58:09.029965  04:58:09.102743  0.072778         GET     200    PENDING_CREATE
04:58:10.104001  04:58:10.173011  0.069010         GET     200    PENDING_CREATE
04:58:11.174287  04:58:11.243647  0.069360         GET     200    PENDING_CREATE
04:58:12.244909  04:58:12.314288  0.069379         GET     200    PENDING_CREATE
04:58:13.315568  04:58:13.387547  0.071979         GET     200    PENDING_CREATE
04:58:14.388841  04:58:14.462216  0.073375         GET     200    PENDING_CREATE
04:58:15.463428  04:58:15.535708  0.072280         GET     200    PENDING_CREATE
04:58:16.536970  04:58:16.606122  0.069152         GET     200    PENDING_CREATE
04:58:17.607173  04:58:17.688976  0.081803         GET     200    PENDING_CREATE
04:58:18.690622  04:58:18.764171  0.073549         GET     200    PENDING_CREATE
04:58:19.765754  04:58:19.839820  0.074066         GET     200    PENDING_CREATE
04:58:20.841182  04:58:20.909994  0.068812         GET     200    PENDING_CREATE
04:58:21.911343  04:58:21.980852  0.069509         GET     200    PENDING_CREATE
04:58:22.981806  04:58:23.055746  0.073940         GET     200    PENDING_CREATE
04:58:24.056556  04:58:24.128058  0.071502         GET     200    PENDING_CREATE
04:58:25.129385  04:58:25.198199  0.068814         GET     200    PENDING_CREATE
04:58:26.198670  04:58:26.269523  0.070853         GET     200    PENDING_CREATE
04:58:27.270333  04:58:27.341859  0.071526         GET     200    PENDING_CREATE
04:58:28.343133  04:58:28.413657  0.070524         GET     200    PENDING_CREATE
04:58:29.414990  04:58:29.501034  0.086044         GET     200    PENDING_CREATE
04:58:30.501517  04:58:30.573176  0.071659         GET     200    PENDING_CREATE
04:58:31.573841  04:58:31.653603  0.079762         GET     200    PENDING_CREATE
04:58:32.654889  04:58:32.728898  0.074009         GET     200    PENDING_CREATE
04:58:33.729373  04:58:33.810189  0.080816         GET     200    PENDING_CREATE
04:58:34.811615  04:58:34.893320  0.081705         GET     200    PENDING_CREATE
04:58:35.894748  04:58:35.973516  0.078768         GET     200    PENDING_CREATE
04:58:36.975145  04:58:37.045341  0.070196         GET     200    PENDING_CREATE
04:58:38.046779  04:58:38.192705  0.145926         GET     200    PENDING_CREATE
04:58:39.194029  04:58:39.265108  0.071079         GET     200    PENDING_CREATE
04:58:40.265647  04:58:40.333974  0.068327         GET     200    PENDING_CREATE
04:58:41.335288  04:58:41.404809  0.069521         GET     200    PENDING_CREATE
04:58:42.406113  04:58:42.472788  0.066675         GET     200    PENDING_CREATE
04:58:43.474145  04:58:43.598534  0.124389         GET     200    PENDING_CREATE
04:58:44.599851  04:58:44.667275  0.067424         GET     200    PENDING_CREATE
04:58:45.668601  04:58:45.751718  0.083117         GET     200    PENDING_CREATE
04:58:46.752992  04:58:46.834302  0.081310         GET     200    PENDING_CREATE
04:58:47.834832  04:58:47.919197  0.084365         GET     200    PENDING_CREATE
04:58:48.920612  04:58:49.002340  0.081728         GET     200    PENDING_CREATE
04:58:50.003581  04:58:50.091099  0.087518         GET     200    PENDING_CREATE
04:58:51.092374  04:58:51.169386  0.077012         GET     200    PENDING_CREATE
04:58:52.170687  04:58:52.254743  0.084056         GET     200    PENDING_CREATE
04:58:53.256049  04:58:53.327155  0.071106         GET     200    PENDING_CREATE
04:58:54.328476  04:58:54.408403  0.079927         GET     200    PENDING_CREATE
04:58:55.409864  04:58:55.495934  0.086070         GET     200    PENDING_CREATE
04:58:56.496727  04:58:56.569171  0.072444         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 62.04962

[localhost] local: gohan client er_physical_interface show --output-format json 53712736-354c-4374-be82-6f07bea9d1bd
{
    "er_physical_interface": {
        "connected_ese_port_id": "887fecdd-956b-47fa-a348-8940c53a5bf9",
        "description": "",
        "device_id": "cbe0fe23-8461-4a71-a7cc-a3a1d8c1fd78",
        "id": "53712736-354c-4374-be82-6f07bea9d1bd",
        "name": "ae0",
        "operational_state": "UP",
        "orchestration_state": "CREATE_COMPLETE",
        "status": "ACTIVE",
        "tenant_id": "06d6b792b31c40daa546fb0f4e35980d"
    }
}

#####################################################
### checking heat-stack (er_physical_interfaces) ####
#####################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/er_physical_interfaces/53712736-354c-4374-be82-6f07bea9d1bd
[localhost] local: heat stack-show er_physical_interface_53712736-354c-4374-be82-6f07bea9d1bd
+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                               |
+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                                  |
| creation_time         | 2018-04-04T04:57:55Z                                                                                                                                                                                |
| description           | Physical port template                                                                                                                                                                              |
| disable_rollback      | True                                                                                                                                                                                                |
| id                    | e0413e79-cb55-484a-822d-f360397a320d                                                                                                                                                                |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/06d6b792b31c40daa546fb0f4e35980d/stacks/er_physical_interface_53712736-354c-4374-be82-6f07bea9d1bd/e0413e79-cb55-484a-822d-f360397a320d |
| notification_topics   | []                                                                                                                                                                                                  |
| outputs               | [                                                                                                                                                                                                   |
|                       |   {                                                                                                                                                                                                 |
|                       |     "output_value": "c38b03bf-0c61-44ff-9dec-599c9951df58",                                                                                                                                         |
|                       |     "description": "Monitoring Target ID",                                                                                                                                                          |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                                            |
|                       |   },                                                                                                                                                                                                |
|                       |   {                                                                                                                                                                                                 |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/c38b03bf-0c61-44ff-9dec-599c9951df58",                                                                |
|                       |     "description": "Monitoring Process Link",                                                                                                                                                       |
|                       |     "output_key": "monitoring_link"                                                                                                                                                                 |
|                       |   }                                                                                                                                                                                                 |
|                       | ]                                                                                                                                                                                                   |
| parameters            | {                                                                                                                                                                                                   |
|                       |   "OS::stack_id": "e0413e79-cb55-484a-822d-f360397a320d",                                                                                                                                           |
|                       |   "OS::stack_name": "er_physical_interface_53712736-354c-4374-be82-6f07bea9d1bd",                                                                                                                   |
|                       |   "tenant_id": "06d6b792b31c40daa546fb0f4e35980d",                                                                                                                                                  |
|                       |   "device_ip": "10.79.5.185",                                                                                                                                                                       |
|                       |   "if_name": "ae0",                                                                                                                                                                                 |
|                       |   "version": "1",                                                                                                                                                                                   |
|                       |   "gohan_id": "53712736-354c-4374-be82-6f07bea9d1bd"                                                                                                                                                |
|                       | }                                                                                                                                                                                                   |
| parent                | None                                                                                                                                                                                                |
| stack_name            | er_physical_interface_53712736-354c-4374-be82-6f07bea9d1bd                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                               |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                                     |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                                 |
| stack_user_project_id | 06d6b792b31c40daa546fb0f4e35980d                                                                                                                                                                    |
| template_description  | Physical port template                                                                                                                                                                              |
| timeout_mins          | 3                                                                                                                                                                                                   |
| updated_time          | None                                                                                                                                                                                                |
+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show er_physical_interface_53712736-354c-4374-be82-6f07bea9d1bd
description: 'Physical port template

  '
heat_template_version: '2013-05-23'
outputs:
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [interface_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: interface_monitor}
parameters:
  device_ip: {description: Device IP Address, label: Device IP Address, type: string}
  gohan_id: {description: UUID of the ER Physical Interface, label: Gohan resource
      ID, type: string}
  if_name: {description: Name of the ER Physical Interface, label: Interface Name,
    type: string}
  tenant_id: {label: Tenant ID, type: string}
  version: {label: Config version, type: number}
resources:
  interface_monitor:
    properties:
      field_name: interface
      properties:
        community_name: EDGE_ROUTER_COMMUNITY
        device_ip: {get_param: device_ip}
        if_name: {get_param: if_name}
      resource_id: {get_param: gohan_id}
      resource_type: er_physical_interfaces
      syncer_properties:
        etcd:
          status: {key: interface}
      tenant_id: {get_param: tenant_id}
      type: snmp_ports_status
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget

### Create Er Physical Interface ###
name:[ae0], id:[d108a472-81ab-43a0-8c49-e0d1a46e6128]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
04:58:59.328322  04:58:59.512232  0.183910        POST     201    PENDING_CREATE
04:58:59.512990  04:58:59.594822  0.081832         GET     200    PENDING_CREATE
04:59:00.596068  04:59:00.663892  0.067824         GET     200    PENDING_CREATE
04:59:01.664504  04:59:01.744950  0.080446         GET     200    PENDING_CREATE
04:59:02.746256  04:59:02.828429  0.082173         GET     200    PENDING_CREATE
04:59:03.830460  04:59:03.907575  0.077115         GET     200    PENDING_CREATE
04:59:04.908868  04:59:04.980166  0.071298         GET     200    PENDING_CREATE
04:59:05.981058  04:59:06.049784  0.068726         GET     200    PENDING_CREATE
04:59:07.051076  04:59:07.121236  0.070160         GET     200    PENDING_CREATE
04:59:08.122516  04:59:08.194793  0.072277         GET     200    PENDING_CREATE
04:59:09.195634  04:59:09.266804  0.071170         GET     200    PENDING_CREATE
04:59:10.268105  04:59:10.337491  0.069386         GET     200    PENDING_CREATE
04:59:11.338783  04:59:11.406411  0.067628         GET     200    PENDING_CREATE
04:59:12.407727  04:59:12.475767  0.068040         GET     200    PENDING_CREATE
04:59:13.477068  04:59:13.554967  0.077899         GET     200    PENDING_CREATE
04:59:14.556267  04:59:14.634415  0.078148         GET     200    PENDING_CREATE
04:59:15.635716  04:59:15.706665  0.070949         GET     200    PENDING_CREATE
04:59:16.707964  04:59:16.783720  0.075756         GET     200    PENDING_CREATE
04:59:17.784999  04:59:17.867152  0.082153         GET     200    PENDING_CREATE
04:59:18.868510  04:59:18.950243  0.081733         GET     200    PENDING_CREATE
04:59:19.951561  04:59:20.021965  0.070404         GET     200    PENDING_CREATE
04:59:21.023229  04:59:21.090917  0.067688         GET     200    PENDING_CREATE
04:59:22.091685  04:59:22.251123  0.159438         GET     200    PENDING_CREATE
04:59:23.252387  04:59:23.321388  0.069001         GET     200    PENDING_CREATE
04:59:24.322693  04:59:24.393506  0.070813         GET     200    PENDING_CREATE
04:59:25.394764  04:59:25.464032  0.069268         GET     200    PENDING_CREATE
04:59:26.465286  04:59:26.553338  0.088052         GET     200    PENDING_CREATE
04:59:27.554633  04:59:27.637996  0.083363         GET     200    PENDING_CREATE
04:59:28.639086  04:59:28.713369  0.074283         GET     200    PENDING_CREATE
04:59:29.714653  04:59:29.785234  0.070581         GET     200    PENDING_CREATE
04:59:30.786493  04:59:30.855046  0.068553         GET     200    PENDING_CREATE
04:59:31.856308  04:59:31.927663  0.071355         GET     200    PENDING_CREATE
04:59:32.928946  04:59:32.999612  0.070666         GET     200    PENDING_CREATE
04:59:34.000527  04:59:34.076792  0.076265         GET     200    PENDING_CREATE
04:59:35.078086  04:59:35.153675  0.075589         GET     200    PENDING_CREATE
04:59:36.154946  04:59:36.233448  0.078502         GET     200    PENDING_CREATE
04:59:37.234733  04:59:37.302577  0.067844         GET     200    PENDING_CREATE
04:59:38.303869  04:59:38.372797  0.068928         GET     200    PENDING_CREATE
04:59:39.374095  04:59:39.451944  0.077849         GET     200    PENDING_CREATE
04:59:40.453204  04:59:40.523272  0.070068         GET     200    PENDING_CREATE
04:59:41.524234  04:59:41.590322  0.066088         GET     200    PENDING_CREATE
04:59:42.592156  04:59:42.665918  0.073762         GET     200    PENDING_CREATE
04:59:43.666877  04:59:43.740369  0.073492         GET     200    PENDING_CREATE
04:59:44.741675  04:59:44.811177  0.069502         GET     200    PENDING_CREATE
04:59:45.812480  04:59:45.885099  0.072619         GET     200    PENDING_CREATE
04:59:46.885463  04:59:46.956532  0.071069         GET     200    PENDING_CREATE
04:59:47.957797  04:59:48.029223  0.071426         GET     200    PENDING_CREATE
04:59:49.030470  04:59:49.111557  0.081087         GET     200    PENDING_CREATE
04:59:50.112030  04:59:50.186561  0.074531         GET     200    PENDING_CREATE
04:59:51.187844  04:59:51.257595  0.069751         GET     200    PENDING_CREATE
04:59:52.258885  04:59:52.333742  0.074857         GET     200    PENDING_CREATE
04:59:53.335064  04:59:53.410090  0.075026         GET     200    PENDING_CREATE
04:59:54.411365  04:59:54.483877  0.072512         GET     200    PENDING_CREATE
04:59:55.485168  04:59:55.569436  0.084268         GET     200    PENDING_CREATE
04:59:56.570752  04:59:56.643737  0.072985         GET     200    PENDING_CREATE
04:59:57.645024  04:59:57.715950  0.070926         GET     200    PENDING_CREATE
04:59:58.716649  04:59:58.784303  0.067654         GET     200    PENDING_CREATE
04:59:59.785743  04:59:59.873721  0.087978         GET     200    PENDING_CREATE
05:00:00.875937  05:00:01.198214  0.322277         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 61.869892

[localhost] local: gohan client er_physical_interface show --output-format json d108a472-81ab-43a0-8c49-e0d1a46e6128
{
    "er_physical_interface": {
        "connected_ese_port_id": "6b29894f-8694-4865-92c1-2e78360e65a6",
        "description": "",
        "device_id": "ca43aedb-bc30-4355-a931-7bb1d9040659",
        "id": "d108a472-81ab-43a0-8c49-e0d1a46e6128",
        "name": "ae0",
        "operational_state": "UP",
        "orchestration_state": "CREATE_COMPLETE",
        "status": "ACTIVE",
        "tenant_id": "06d6b792b31c40daa546fb0f4e35980d"
    }
}

#####################################################
### checking heat-stack (er_physical_interfaces) ####
#####################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/er_physical_interfaces/d108a472-81ab-43a0-8c49-e0d1a46e6128
[localhost] local: heat stack-show er_physical_interface_d108a472-81ab-43a0-8c49-e0d1a46e6128
+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                               |
+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                                  |
| creation_time         | 2018-04-04T04:59:00Z                                                                                                                                                                                |
| description           | Physical port template                                                                                                                                                                              |
| disable_rollback      | True                                                                                                                                                                                                |
| id                    | 064f7e2d-23d1-40db-b23b-b37780d04980                                                                                                                                                                |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/06d6b792b31c40daa546fb0f4e35980d/stacks/er_physical_interface_d108a472-81ab-43a0-8c49-e0d1a46e6128/064f7e2d-23d1-40db-b23b-b37780d04980 |
| notification_topics   | []                                                                                                                                                                                                  |
| outputs               | [                                                                                                                                                                                                   |
|                       |   {                                                                                                                                                                                                 |
|                       |     "output_value": "79b7fc42-ebaf-4c34-adeb-20b43803a4fc",                                                                                                                                         |
|                       |     "description": "Monitoring Target ID",                                                                                                                                                          |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                                            |
|                       |   },                                                                                                                                                                                                |
|                       |   {                                                                                                                                                                                                 |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/79b7fc42-ebaf-4c34-adeb-20b43803a4fc",                                                                |
|                       |     "description": "Monitoring Process Link",                                                                                                                                                       |
|                       |     "output_key": "monitoring_link"                                                                                                                                                                 |
|                       |   }                                                                                                                                                                                                 |
|                       | ]                                                                                                                                                                                                   |
| parameters            | {                                                                                                                                                                                                   |
|                       |   "OS::stack_id": "064f7e2d-23d1-40db-b23b-b37780d04980",                                                                                                                                           |
|                       |   "OS::stack_name": "er_physical_interface_d108a472-81ab-43a0-8c49-e0d1a46e6128",                                                                                                                   |
|                       |   "tenant_id": "06d6b792b31c40daa546fb0f4e35980d",                                                                                                                                                  |
|                       |   "device_ip": "10.79.5.184",                                                                                                                                                                       |
|                       |   "if_name": "ae0",                                                                                                                                                                                 |
|                       |   "version": "1",                                                                                                                                                                                   |
|                       |   "gohan_id": "d108a472-81ab-43a0-8c49-e0d1a46e6128"                                                                                                                                                |
|                       | }                                                                                                                                                                                                   |
| parent                | None                                                                                                                                                                                                |
| stack_name            | er_physical_interface_d108a472-81ab-43a0-8c49-e0d1a46e6128                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                               |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                                     |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                                 |
| stack_user_project_id | 06d6b792b31c40daa546fb0f4e35980d                                                                                                                                                                    |
| template_description  | Physical port template                                                                                                                                                                              |
| timeout_mins          | 3                                                                                                                                                                                                   |
| updated_time          | None                                                                                                                                                                                                |
+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show er_physical_interface_d108a472-81ab-43a0-8c49-e0d1a46e6128
description: 'Physical port template

  '
heat_template_version: '2013-05-23'
outputs:
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [interface_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: interface_monitor}
parameters:
  device_ip: {description: Device IP Address, label: Device IP Address, type: string}
  gohan_id: {description: UUID of the ER Physical Interface, label: Gohan resource
      ID, type: string}
  if_name: {description: Name of the ER Physical Interface, label: Interface Name,
    type: string}
  tenant_id: {label: Tenant ID, type: string}
  version: {label: Config version, type: number}
resources:
  interface_monitor:
    properties:
      field_name: interface
      properties:
        community_name: EDGE_ROUTER_COMMUNITY
        device_ip: {get_param: device_ip}
        if_name: {get_param: if_name}
      resource_id: {get_param: gohan_id}
      resource_type: er_physical_interfaces
      syncer_properties:
        etcd:
          status: {key: interface}
      tenant_id: {get_param: tenant_id}
      type: snmp_ports_status
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget

### Create Ha Interface ###
name:[sample-ha-router-downlink], id:[2595e193-84a8-49dc-aa2e-7a68c60ea11e]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
05:00:04.006560  05:00:04.588934  0.582374        POST     201    PENDING_CREATE
05:00:04.593984  05:00:04.675967  0.081983         GET     200    PENDING_CREATE
05:00:05.677401  05:00:05.752292  0.074891         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 1.745732

[localhost] local: gohan client ha_interface show --output-format json 2595e193-84a8-49dc-aa2e-7a68c60ea11e
{
    "ha_interface": {
        "admin_state_up": true,
        "available_be_bandwidth": 500,
        "available_ga_bandwidth": 500,
        "description": "",
        "gateway_instances_count": 0,
        "ha_router_id": "add04ae7-e48a-4583-a726-bed5f3b748c4",
        "id": "2595e193-84a8-49dc-aa2e-7a68c60ea11e",
        "link_type": "downlink",
        "maximum_be_bandwidth": 500,
        "maximum_ga_bandwidth": 500,
        "name": "sample-ha-router-downlink",
        "primary_interface_id": "53712736-354c-4374-be82-6f07bea9d1bd",
        "restricted_vlans": "0-1024,4094",
        "secondary_interface_id": "d108a472-81ab-43a0-8c49-e0d1a46e6128",
        "status": "ACTIVE",
        "tenant_id": "06d6b792b31c40daa546fb0f4e35980d",
        "vlan_ids_available": 3069,
        "vlan_pool_state": "//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAM="
    }
}

### Create Internet Service ###
name:[sample-internet-service], id:[986a140f-81da-4e5c-afc3-26f463a85786]
-----------------------------------------------------------------
http_request     http_response    response_time   method   code
-----------------------------------------------------------------
05:00:16.331542  05:00:16.452762  0.121220        POST     201
05:00:16.453393  05:00:16.562530  0.109137         GET     200
-----------------------------------------------------------------
Turn Around Time : 0.230988

[localhost] local: gohan client internet_service show --output-format json 986a140f-81da-4e5c-afc3-26f463a85786
{
    "internet_service": {
        "be_forwarding_class": "FC-INET-BE",
        "default_static_routes_per_gateway": 32,
        "description": "",
        "downlink_interfaces": [
            "2595e193-84a8-49dc-aa2e-7a68c60ea11e"
        ],
        "ga_forwarding_class": "FC-INET-GA",
        "id": "986a140f-81da-4e5c-afc3-26f463a85786",
        "inet_in_filter": "INET_IN",
        "inet_out_filter": "INET_OUT",
        "minimal_submask_length": 26,
        "name": "sample-internet-service",
        "neighbour_prefix": "BGP-VIRTUAL-ROUTER-PEERS",
        "primary_ibgp_config_group": "InetGW2-RI-IBGP",
        "primary_vrrp_config_group": "InetGW1-VRRP",
        "secondary_ibgp_config_group": "InetGW1-RI-IBGP",
        "secondary_vrrp_config_group": "InetGW2-VRRP",
        "tenant_id": "06d6b792b31c40daa546fb0f4e35980d",
        "uplink_import_policy": "INSTANCE-MASTER_IN",
        "vrf_config": "",
        "vrf_export_policy": "INSTANCE-USER_OUT",
        "vrf_import_policy": "INSTANCE-USER_IN",
        "zone": "jp1-zone1"
    }
}

### Create Internet Qos Option ###
name:[10Mbps-Guaranteed], id:[0e6b35d9-d74d-4d3a-922a-d79b9df9b78c]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
05:00:27.172411  05:00:27.337221  0.164810        POST     201    PENDING_CREATE
05:00:27.338173  05:00:27.420733  0.082560         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 0.248322

[localhost] local: gohan client qos_option show --output-format json 0e6b35d9-d74d-4d3a-922a-d79b9df9b78c
{
    "qos_option": {
        "aws_service_id": null,
        "azure_service_id": null,
        "bandwidth": "10",
        "charge_type": null,
        "description": "",
        "gcp_service_id": null,
        "ha_router_id": "add04ae7-e48a-4583-a726-bed5f3b748c4",
        "id": "0e6b35d9-d74d-4d3a-922a-d79b9df9b78c",
        "incoming_policer_config": "action { loss-priority high then discard; } single-rate { color-blind; committed-information-rate 10m; committed-burst-size 187500000; excess-burst-size 187500000; }",
        "incoming_policer_name": "10M-GA-UP-INET",
        "interdc_service_id": null,
        "internet_service_id": "986a140f-81da-4e5c-afc3-26f463a85786",
        "name": "10Mbps-Guaranteed",
        "orchestration_state": "SYNC_COMPLETE",
        "outgoing_policer_config": "if-exceeding { bandwidth-limit 10m; burst-size-limit 187500000; } then discard;",
        "outgoing_policer_name": "10M-GA-DOWN-INET",
        "qos_type": "guarantee",
        "service_type": "internet",
        "status": "ACTIVE",
        "tenant_id": "06d6b792b31c40daa546fb0f4e35980d",
        "vpn_service_id": null
    }
}

### Create Public Ip Pool ###
name:[public_ip_pool], id:[c8072205-8aec-4fb5-9437-03900c14127a]
-----------------------------------------------------------------
http_request     http_response    response_time   method   code
-----------------------------------------------------------------
05:00:28.007116  05:00:28.181327  0.174211        POST     201
05:00:28.182699  05:00:28.262972  0.080273         GET     200
-----------------------------------------------------------------
Turn Around Time : 0.255856

[localhost] local: gohan client public_ip_pool show --output-format json c8072205-8aec-4fb5-9437-03900c14127a
{
    "public_ip_pool": {
        "addresses_available": 512,
        "ha_router_id": "add04ae7-e48a-4583-a726-bed5f3b748c4",
        "id": "c8072205-8aec-4fb5-9437-03900c14127a",
        "internet_service_id": "986a140f-81da-4e5c-afc3-26f463a85786",
        "ip_version": 4,
        "pool_state": "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==",
        "submask_length": 23,
        "subnet_ip": "203.0.112.0",
        "tenant_id": "06d6b792b31c40daa546fb0f4e35980d"
    }
}

### Create Internet Gateway ###
name:[sample-internet-gateway], id:[f6e8c695-c4c1-4a93-9b7e-1663aee6dec9]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
05:00:28.840656  05:00:29.121487  0.280831        POST     201    PENDING_CREATE
05:00:29.122509  05:00:29.228173  0.105664         GET     200    PENDING_CREATE
05:00:30.228489  05:00:30.303375  0.074886         GET     200    PENDING_CREATE
05:00:31.304644  05:00:31.394376  0.089732         GET     200    PENDING_CREATE
05:00:32.396318  05:00:32.523504  0.127186         GET     200    PENDING_CREATE
05:00:33.524796  05:00:33.599489  0.074693         GET     200    PENDING_CREATE
05:00:34.600782  05:00:34.672731  0.071949         GET     200    PENDING_CREATE
05:00:35.673469  05:00:35.744981  0.071512         GET     200    PENDING_CREATE
05:00:36.746220  05:00:36.822321  0.076101         GET     200    PENDING_CREATE
05:00:37.823615  05:00:37.905047  0.081432         GET     200    PENDING_CREATE
05:00:38.905624  05:00:39.026871  0.121247         GET     200    PENDING_CREATE
05:00:40.028339  05:00:40.104241  0.075902         GET     200    PENDING_CREATE
05:00:41.104530  05:00:41.186882  0.082352         GET     200    PENDING_CREATE
05:00:42.188211  05:00:42.265174  0.076963         GET     200    PENDING_CREATE
05:00:43.266434  05:00:43.336553  0.070119         GET     200    PENDING_CREATE
05:00:44.336984  05:00:44.409349  0.072365         GET     200    PENDING_CREATE
05:00:45.410598  05:00:45.491734  0.081136         GET     200    PENDING_CREATE
05:00:46.492573  05:00:46.571209  0.078636         GET     200    PENDING_CREATE
05:00:47.572498  05:00:47.644884  0.072386         GET     200    PENDING_CREATE
05:00:48.646216  05:00:48.719736  0.073520         GET     200    PENDING_CREATE
05:00:49.720509  05:00:49.823832  0.103323         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 20.983176

[localhost] local: gohan client internet_gateway show --output-format json f6e8c695-c4c1-4a93-9b7e-1663aee6dec9
{
    "internet_gateway": {
        "associated_uplink_id": null,
        "description": "Sample Internet-gateway",
        "downlink_interface_id": "2595e193-84a8-49dc-aa2e-7a68c60ea11e",
        "id": "f6e8c695-c4c1-4a93-9b7e-1663aee6dec9",
        "internet_service_id": "986a140f-81da-4e5c-afc3-26f463a85786",
        "maximum_static_routes": 32,
        "name": "sample-internet-gateway",
        "orchestration_state": "CREATE_COMPLETE",
        "primary_logical_interface_name": "ae0.1025",
        "qos_option_id": "0e6b35d9-d74d-4d3a-922a-d79b9df9b78c",
        "secondary_logical_interface_name": "ae0.1025",
        "status": "ACTIVE",
        "tenant_id": "06d6b792b31c40daa546fb0f4e35980d",
        "vlan_id": "1025",
        "vrf_name": "vrf_gw_sample-ha-router-downlink_1025"
    }
}

[localhost] local: gohan client resource_mapping list --output-format json
Command not found

[localhost] local: gohan client billing_resource list --output-format json
{
    "billing_resources": [
        {
            "config_version": 1,
            "ended": null,
            "id": "5a97fcc0-7d6f-4acd-bb87-75697ae19f94",
            "info": {
                "internet_service": "sample-internet-service"
            },
            "parent_billing_id": null,
            "resource_id": "f6e8c695-c4c1-4a93-9b7e-1663aee6dec9",
            "resource_type": "internet_gateway",
            "started": 1.522818049e+09,
            "tenant_id": "06d6b792b31c40daa546fb0f4e35980d",
            "unique_resource_id": "f6e8c695-c4c1-4a93-9b7e-1663aee6dec9"
        },
        {
            "config_version": 1,
            "ended": null,
            "id": "d20cde36-cd9c-4a8a-a10c-e62fe4f087e4",
            "info": {
                "bandwidth": "10",
                "qos_type": "guarantee"
            },
            "parent_billing_id": "5a97fcc0-7d6f-4acd-bb87-75697ae19f94",
            "resource_id": "0e6b35d9-d74d-4d3a-922a-d79b9df9b78c",
            "resource_type": "qos_option",
            "started": 1.522818049e+09,
            "tenant_id": "06d6b792b31c40daa546fb0f4e35980d",
            "unique_resource_id": null
        }
    ]
}

################################################
### checking heat-stack (internet_gateways) ####
################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/internet_gateways/f6e8c695-c4c1-4a93-9b7e-1663aee6dec9
[localhost] local: heat stack-show internet_gateway_f6e8c695-c4c1-4a93-9b7e-1663aee6dec9
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                          |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                             |
| creation_time         | 2018-04-04T05:00:29Z                                                                                                                                                                           |
| description           | Internet GW Instance                                                                                                                                                                           |
| disable_rollback      | True                                                                                                                                                                                           |
| id                    | cc36f14a-4224-4cd7-bf49-c8014783a399                                                                                                                                                           |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/06d6b792b31c40daa546fb0f4e35980d/stacks/internet_gateway_f6e8c695-c4c1-4a93-9b7e-1663aee6dec9/cc36f14a-4224-4cd7-bf49-c8014783a399 |
| notification_topics   | []                                                                                                                                                                                             |
| outputs               | [                                                                                                                                                                                              |
|                       |   {                                                                                                                                                                                            |
|                       |     "output_value": "ca354a39-f48c-4698-9cdd-9e106e2a5bf4",                                                                                                                                    |
|                       |     "description": "Monitoring Target ID",                                                                                                                                                     |
|                       |     "output_key": "primary_monitoring_target_id"                                                                                                                                               |
|                       |   },                                                                                                                                                                                           |
|                       |   {                                                                                                                                                                                            |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/e4609dae-5c88-494a-bdb5-19187026ccfc",                                                           |
|                       |     "description": "Monitoring Process Link",                                                                                                                                                  |
|                       |     "output_key": "secondary_monitoring_link"                                                                                                                                                  |
|                       |   },                                                                                                                                                                                           |
|                       |   {                                                                                                                                                                                            |
|                       |     "output_value": "e4609dae-5c88-494a-bdb5-19187026ccfc",                                                                                                                                    |
|                       |     "description": "Monitoring Target ID",                                                                                                                                                     |
|                       |     "output_key": "secondary_monitoring_target_id"                                                                                                                                             |
|                       |   },                                                                                                                                                                                           |
|                       |   {                                                                                                                                                                                            |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/ca354a39-f48c-4698-9cdd-9e106e2a5bf4",                                                           |
|                       |     "description": "Monitoring Process Link",                                                                                                                                                  |
|                       |     "output_key": "primary_monitoring_link"                                                                                                                                                    |
|                       |   }                                                                                                                                                                                            |
|                       | ]                                                                                                                                                                                              |
| parameters            | {                                                                                                                                                                                              |
|                       |   "vrf_export_policy": "INSTANCE-USER_OUT",                                                                                                                                                    |
|                       |   "secondary_device_physical_interface": "ae0",                                                                                                                                                |
|                       |   "counter_name_out": "vrf_gw_sample-ha-router-downlink_1025_OUT",                                                                                                                             |
|                       |   "primary_device_username": "esi",                                                                                                                                                            |
|                       |   "primary_device_logical_interface": "ae0.1025",                                                                                                                                              |
|                       |   "primary_device_password": "******",                                                                                                                                                         |
|                       |   "gohan_id": "f6e8c695-c4c1-4a93-9b7e-1663aee6dec9",                                                                                                                                          |
|                       |   "vrf_import_policy": "INSTANCE-USER_IN",                                                                                                                                                     |
|                       |   "prefix_list_name": "vrf_gw_sample-ha-router-downlink_1025_prefix",                                                                                                                          |
|                       |   "output_filter_name": "FILTER_10M-GA-DOWN-INET",                                                                                                                                             |
|                       |   "secondary_vrrp_config_group": "InetGW2-VRRP",                                                                                                                                               |
|                       |   "primary_device_ip": "10.79.5.185",                                                                                                                                                          |
|                       |   "version": "1",                                                                                                                                                                              |
|                       |   "inet_in_filter": "INET_IN",                                                                                                                                                                 |
|                       |   "secondary_device_username": "esi",                                                                                                                                                          |
|                       |   "secondary_device_logical_interface": "ae0.1025",                                                                                                                                            |
|                       |   "counter_name_in": "vrf_gw_sample-ha-router-downlink_1025_IN",                                                                                                                               |
|                       |   "OS::stack_name": "internet_gateway_f6e8c695-c4c1-4a93-9b7e-1663aee6dec9",                                                                                                                   |
|                       |   "inet_out_filter": "INET_OUT",                                                                                                                                                               |
|                       |   "vlan": "1025",                                                                                                                                                                              |
|                       |   "primary_device_physical_interface": "ae0",                                                                                                                                                  |
|                       |   "uplink_import_policy": "INSTANCE-MASTER_IN",                                                                                                                                                |
|                       |   "input_filter_name": "FILTER_10M-GA-UP-INET",                                                                                                                                                |
|                       |   "filter_term_name": "vrf_gw_sample-ha-router-downlink_1025_filter",                                                                                                                          |
|                       |   "OS::stack_id": "cc36f14a-4224-4cd7-bf49-c8014783a399",                                                                                                                                      |
|                       |   "tenant_id": "06d6b792b31c40daa546fb0f4e35980d",                                                                                                                                             |
|                       |   "secondary_device_port": "830",                                                                                                                                                              |
|                       |   "secondary_device_password": "******",                                                                                                                                                       |
|                       |   "vrf_name": "vrf_gw_sample-ha-router-downlink_1025",                                                                                                                                         |
|                       |   "primary_vrrp_config_group": "InetGW1-VRRP",                                                                                                                                                 |
|                       |   "primary_device_port": "830",                                                                                                                                                                |
|                       |   "secondary_device_ip": "10.79.5.184"                                                                                                                                                         |
|                       | }                                                                                                                                                                                              |
| parent                | None                                                                                                                                                                                           |
| stack_name            | internet_gateway_f6e8c695-c4c1-4a93-9b7e-1663aee6dec9                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                          |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                                |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                            |
| stack_user_project_id | 06d6b792b31c40daa546fb0f4e35980d                                                                                                                                                               |
| template_description  | Internet GW Instance                                                                                                                                                                           |
| timeout_mins          | 60                                                                                                                                                                                             |
| updated_time          | None                                                                                                                                                                                           |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show internet_gateway_f6e8c695-c4c1-4a93-9b7e-1663aee6dec9
description: 'Internet GW Instance

  '
heat_template_version: '2013-05-23'
outputs:
  primary_monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [primary_igs_metric_monitor, link]
  primary_monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: primary_igs_metric_monitor}
  secondary_monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [secondary_igs_metric_monitor, link]
  secondary_monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: secondary_igs_metric_monitor}
parameters:
  counter_name_in: {label: Input counter name, type: string}
  counter_name_out: {label: Output counter name, type: string}
  filter_term_name: {label: Filter term name, type: string}
  gohan_id: {description: UUID of the GW Interface, label: Gohan resource ID, type: string}
  inet_in_filter: {label: Internet Input Filter, type: string}
  inet_out_filter: {label: Internet Output Filter, type: string}
  input_filter_name: {description: Policer name to use as input policer, label: Input
      policer name, type: string}
  output_filter_name: {description: Policer name to use as output policer, label: Output
      policer name, type: string}
  prefix_list_name: {label: Prefix list name, type: string}
  primary_device_ip: {description: Ip address that will be used to establish ssh connection
      to the Primary Device., label: Ip address of the device., type: string}
  primary_device_logical_interface: {description: Name of the created logical interface
      on the Primary device, label: Logical Interface name, type: string}
  primary_device_password: {description: Password of the user which will be used to
      log onto the Primary Device., hidden: true, label: Users password., type: string}
  primary_device_physical_interface: {description: Physical port on the Primary device
      on which the logical port will be configured, label: Underlying physical interface,
    type: string}
  primary_device_port: {description: Port that will be used to establish ssh connection
      to the Primary Device., label: Port of the ssh connection., type: number}
  primary_device_username: {description: Name of the user which will be used to log
      onto the Primary Device., label: User name to log on to device., type: string}
  primary_vrrp_config_group: {description: Name for apply group to use for interface
      for VRRP, label: Apply group name, type: string}
  secondary_device_ip: {description: Ip address that will be used to establish ssh
      connection to the Secondary Device., label: Ip address of the device., type: string}
  secondary_device_logical_interface: {description: Name of the created logical interface
      on the Secondary device, label: Logical Interface name, type: string}
  secondary_device_password: {description: Password of the user which will be used
      to log onto the Secondary Device., hidden: true, label: Users password., type: string}
  secondary_device_physical_interface: {description: Physical port on the Secondary
      device on which the logical port will be configured, label: Underlying physical
      interface, type: string}
  secondary_device_port: {description: Port that will be used to establish ssh connection
      to the Secondary Device., label: Port of the ssh connection., type: number}
  secondary_device_username: {description: Name of the user which will be used to
      log onto the Secondary Device., label: User name to log on to device., type: string}
  secondary_vrrp_config_group: {description: Name for apply group to use for interface
      for VRRP, label: Apply group name, type: string}
  tenant_id: {label: Tenant ID, type: string}
  uplink_import_policy: {description: Uplink Import Policy for IGS, label: Uplink
      Import Policy, type: string}
  version: {label: Config version, type: number}
  vlan: {description: vlan tag used by logical interface, label: VLAN ID, type: string}
  vrf_export_policy: {description: Export Policy for IGS, label: Export Policy, type: string}
  vrf_import_policy: {description: Import Policy for IGS, label: Import Policy, type: string}
  vrf_name: {description: Name for VRF used by logical interface, label: VRF name,
    type: string}
resources:
  netconf_configure_primary:
    properties:
      configs:
      - config:
          str_replace:
            params:
              $APPLY_GROUP: {get_param: primary_vrrp_config_group}
              $INPUT_FILTER: {get_param: input_filter_name}
              $OUTPUT_FILTER: {get_param: output_filter_name}
              $VLAN: {get_param: vlan}
            template: "apply-groups $APPLY_GROUP\nvlan-id $VLAN;\ndescription inet_gw;\n\
              family inet {\n    filter {\n        input $INPUT_FILTER;\n        output\
              \ $OUTPUT_FILTER;\n    }\n}\n"
        path:
        - {config_type: tag, tag: interfaces, xml_type: tag}
        - config_type: name
          name: {get_param: primary_device_physical_interface}
          tag: interface
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: vlan}
          tag: unit
          xml_type: named_tag
      - config:
          str_replace:
            params:
              $EXPORT_POLICY: {get_param: vrf_export_policy}
              $IMPORT_POLICY: {get_param: vrf_import_policy}
              $LIF: {get_param: primary_device_logical_interface}
            template: 'instance-type virtual-router;

              interface $LIF;

              routing-options instance-import $IMPORT_POLICY;

              routing-options instance-export $EXPORT_POLICY;

              '
        path:
        - {config_type: tag, tag: routing-instances, xml_type: tag}
        - config_type: name
          name: {get_param: vrf_name}
          tag: instance
          xml_type: named_tag
      - config:
          str_replace:
            params:
              $VRF_NAME: {get_param: vrf_name}
            template: 'from instance $VRF_NAME;

              then accept;

              '
        path:
        - {config_type: tag, tag: policy-options, xml_type: tag}
        - config_type: named_tag
          name: {get_param: uplink_import_policy}
          tag: policy-statement
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: vrf_name}
          tag: term
          xml_type: named_tag
      - config: ''
        path:
        - {config_type: tag, tag: policy-options, xml_type: tag}
        - config_type: named_tag
          name: {get_param: prefix_list_name}
          tag: prefix-list
          xml_type: named_tag
      - additional_commands:
          str_replace:
            params:
              $INET_IN: {get_param: inet_in_filter}
              $TERM_NAME: {get_param: filter_term_name}
            template: 'insert firewall family inet filter $INET_IN term $TERM_NAME
              before term all-accept

              '
        config:
          str_replace:
            params:
              $PREFIX_LIST_NAME: {get_param: prefix_list_name}
              $VRF_NAME: {get_param: vrf_name}
            template: "from {\n   destination-prefix-list {\n        $PREFIX_LIST_NAME;\n\
              \   }\n}\nthen {\n     count $VRF_NAME_IN;\n     accept;\n}\n"
        path:
        - {config_type: tag, tag: firewall, xml_type: tag}
        - {config_type: tag, tag: family, xml_type: tag}
        - {config_type: tag, tag: inet, xml_type: tag}
        - config_type: named_tag
          name: {get_param: inet_in_filter}
          tag: filter
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: filter_term_name}
          tag: term
          xml_type: named_tag
      - additional_commands:
          str_replace:
            params:
              $INET_OUT: {get_param: inet_out_filter}
              $TERM_NAME: {get_param: filter_term_name}
            template: 'insert firewall family inet filter $INET_OUT term $TERM_NAME
              before term all-accept

              '
        config:
          str_replace:
            params:
              $PREFIX_LIST_NAME: {get_param: prefix_list_name}
              $VRF_NAME: {get_param: vrf_name}
            template: "from {\n   source-prefix-list {\n        $PREFIX_LIST_NAME;\n\
              \   }\n}\nthen {\n     count $VRF_NAME_OUT;\n     accept;\n}\n"
        path:
        - {config_type: tag, tag: firewall, xml_type: tag}
        - {config_type: tag, tag: family, xml_type: tag}
        - {config_type: tag, tag: inet, xml_type: tag}
        - config_type: named_tag
          name: {get_param: inet_out_filter}
          tag: filter
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: filter_term_name}
          tag: term
          xml_type: named_tag
      device_ip: {get_param: primary_device_ip}
      lock_timeout: 3000
      on_update: merge
      password: {get_param: primary_device_password}
      port: {get_param: primary_device_port}
      username: {get_param: primary_device_username}
    type: OS::Contrail::NetconfNamedConfigs
  netconf_configure_secondary:
    depends_on: netconf_configure_primary
    properties:
      configs:
      - config:
          str_replace:
            params:
              $APPLY_GROUP: {get_param: secondary_vrrp_config_group}
              $INPUT_FILTER: {get_param: input_filter_name}
              $OUTPUT_FILTER: {get_param: output_filter_name}
              $VLAN: {get_param: vlan}
            template: "apply-groups $APPLY_GROUP\nvlan-id $VLAN;\ndescription inet_gw;\n\
              family inet {\n    filter {\n        input $INPUT_FILTER;\n        output\
              \ $OUTPUT_FILTER;\n    }\n}\n"
        path:
        - {config_type: tag, tag: interfaces, xml_type: tag}
        - config_type: name
          name: {get_param: secondary_device_physical_interface}
          tag: interface
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: vlan}
          tag: unit
          xml_type: named_tag
      - config:
          str_replace:
            params:
              $EXPORT_POLICY: {get_param: vrf_export_policy}
              $IMPORT_POLICY: {get_param: vrf_import_policy}
              $LIF: {get_param: secondary_device_logical_interface}
            template: 'instance-type virtual-router;

              interface $LIF;

              routing-options instance-import $IMPORT_POLICY;

              routing-options instance-export $EXPORT_POLICY;

              '
        path:
        - {config_type: tag, tag: routing-instances, xml_type: tag}
        - config_type: name
          name: {get_param: vrf_name}
          tag: instance
          xml_type: named_tag
      - config:
          str_replace:
            params:
              $VRF_NAME: {get_param: vrf_name}
            template: 'from instance $VRF_NAME;

              then accept;

              '
        path:
        - {config_type: tag, tag: policy-options, xml_type: tag}
        - config_type: named_tag
          name: {get_param: uplink_import_policy}
          tag: policy-statement
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: vrf_name}
          tag: term
          xml_type: named_tag
      - config: ''
        path:
        - {config_type: tag, tag: policy-options, xml_type: tag}
        - config_type: named_tag
          name: {get_param: prefix_list_name}
          tag: prefix-list
          xml_type: named_tag
      - additional_commands:
          str_replace:
            params:
              $INET_IN: {get_param: inet_in_filter}
              $TERM_NAME: {get_param: filter_term_name}
            template: 'insert firewall family inet filter $INET_IN term $TERM_NAME
              before term all-accept

              '
        config:
          str_replace:
            params:
              $PREFIX_LIST_NAME: {get_param: prefix_list_name}
              $VRF_NAME: {get_param: vrf_name}
            template: "from {\n   destination-prefix-list {\n        $PREFIX_LIST_NAME;\n\
              \   }\n}\nthen {\n     count $VRF_NAME_IN;\n     accept;\n}\n"
        path:
        - {config_type: tag, tag: firewall, xml_type: tag}
        - {config_type: tag, tag: family, xml_type: tag}
        - {config_type: tag, tag: inet, xml_type: tag}
        - config_type: named_tag
          name: {get_param: inet_in_filter}
          tag: filter
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: filter_term_name}
          tag: term
          xml_type: named_tag
      - additional_commands:
          str_replace:
            params:
              $INET_OUT: {get_param: inet_out_filter}
              $TERM_NAME: {get_param: filter_term_name}
            template: 'insert firewall family inet filter $INET_OUT term $TERM_NAME
              before term all-accept

              '
        config:
          str_replace:
            params:
              $PREFIX_LIST_NAME: {get_param: prefix_list_name}
              $VRF_NAME: {get_param: vrf_name}
            template: "from {\n   source-prefix-list {\n        $PREFIX_LIST_NAME;\n\
              \   }\n}\nthen {\n     count $VRF_NAME_OUT;\n     accept;\n}\n"
        path:
        - {config_type: tag, tag: firewall, xml_type: tag}
        - {config_type: tag, tag: family, xml_type: tag}
        - {config_type: tag, tag: inet, xml_type: tag}
        - config_type: named_tag
          name: {get_param: inet_out_filter}
          tag: filter
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: filter_term_name}
          tag: term
          xml_type: named_tag
      device_ip: {get_param: secondary_device_ip}
      lock_timeout: 3000
      on_update: merge
      password: {get_param: secondary_device_password}
      port: {get_param: secondary_device_port}
      username: {get_param: secondary_device_username}
    type: OS::Contrail::NetconfNamedConfigs
  primary_igs_metric_monitor:
    depends_on: netconf_configure_secondary
    properties:
      field_name: primary_counter
      properties:
        counter_name_in: {get_param: counter_name_in}
        counter_name_out: {get_param: counter_name_out}
        host: {get_param: primary_device_ip}
        login: {get_param: primary_device_username}
        password: {get_param: primary_device_password}
        port: {get_param: primary_device_port}
        primary_device_ip: {get_param: primary_device_ip}
        secondary_device_ip: {get_param: secondary_device_ip}
      resource_id: {get_param: gohan_id}
      resource_type: internet_gateways
      syncer_properties:
        tsdb:
          traffic.in:
            metric: traffic.bytes
            tags:
              device_index: primary
              direction: in
              resource_id: {get_param: gohan_id}
          traffic.out:
            metric: traffic.bytes
            tags:
              device_index: primary
              direction: out
              resource_id: {get_param: gohan_id}
      tenant_id: {get_param: tenant_id}
      type: igs_counter
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget
  secondary_igs_metric_monitor:
    depends_on: netconf_configure_secondary
    properties:
      field_name: secondary_counter
      properties:
        counter_name_in: {get_param: counter_name_in}
        counter_name_out: {get_param: counter_name_out}
        host: {get_param: secondary_device_ip}
        login: {get_param: secondary_device_username}
        password: {get_param: secondary_device_password}
        port: {get_param: secondary_device_port}
        primary_device_ip: {get_param: primary_device_ip}
        secondary_device_ip: {get_param: secondary_device_ip}
      resource_id: {get_param: gohan_id}
      resource_type: internet_gateways
      syncer_properties:
        tsdb:
          traffic.in:
            metric: traffic.bytes
            tags:
              device_index: secondary
              direction: in
              resource_id: {get_param: gohan_id}
          traffic.out:
            metric: traffic.bytes
            tags:
              device_index: secondary
              direction: out
              resource_id: {get_param: gohan_id}
      tenant_id: {get_param: tenant_id}
      type: igs_counter
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget

### Create Public Ip ###
name:[sample-public_ip], id:[d5622781-f06a-4fad-b800-b577a05ad8b2]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
05:01:03.473531  05:01:03.699329  0.225798        POST     201    PENDING_CREATE
05:01:03.699567  05:01:03.825261  0.125694         GET     200    PENDING_CREATE
05:01:04.826507  05:01:04.902427  0.075920         GET     200    PENDING_CREATE
05:01:05.903459  05:01:05.975697  0.072238         GET     200    PENDING_CREATE
05:01:06.976505  05:01:07.045130  0.068625         GET     200    PENDING_CREATE
05:01:08.045566  05:01:08.138285  0.092719         GET     200    PENDING_CREATE
05:01:09.140085  05:01:09.213707  0.073622         GET     200    PENDING_CREATE
05:01:10.214966  05:01:10.284524  0.069558         GET     200    PENDING_CREATE
05:01:11.285798  05:01:11.363675  0.077877         GET     200    PENDING_CREATE
05:01:12.364984  05:01:12.437085  0.072101         GET     200    PENDING_CREATE
05:01:13.438665  05:01:13.509515  0.070850         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 10.035984

[localhost] local: gohan client public_ip show --output-format json d5622781-f06a-4fad-b800-b577a05ad8b2
{
    "public_ip": {
        "cidr": "203.0.112.0",
        "description": "Sample Public-Ip",
        "id": "d5622781-f06a-4fad-b800-b577a05ad8b2",
        "internet_gw_id": "f6e8c695-c4c1-4a93-9b7e-1663aee6dec9",
        "ip_pool_id": "c8072205-8aec-4fb5-9437-03900c14127a",
        "name": "sample-public_ip",
        "orchestration_state": "CREATE_COMPLETE",
        "status": "ACTIVE",
        "submask_length": 28,
        "suspended_public_ip_id": null,
        "tenant_id": "06d6b792b31c40daa546fb0f4e35980d"
    }
}

[localhost] local: gohan client resource_mapping list --output-format json
Command not found

[localhost] local: gohan client billing_resource list --output-format json
{
    "billing_resources": [
        {
            "config_version": 1,
            "ended": null,
            "id": "5a97fcc0-7d6f-4acd-bb87-75697ae19f94",
            "info": {
                "internet_service": "sample-internet-service"
            },
            "parent_billing_id": null,
            "resource_id": "f6e8c695-c4c1-4a93-9b7e-1663aee6dec9",
            "resource_type": "internet_gateway",
            "started": 1.522818049e+09,
            "tenant_id": "06d6b792b31c40daa546fb0f4e35980d",
            "unique_resource_id": "f6e8c695-c4c1-4a93-9b7e-1663aee6dec9"
        },
        {
            "config_version": 1,
            "ended": null,
            "id": "6a72cbe8-17c7-444e-a9c8-685b4d47ff97",
            "info": {
                "cidr": "203.0.112.0",
                "submask_length": 28
            },
            "parent_billing_id": null,
            "resource_id": "d5622781-f06a-4fad-b800-b577a05ad8b2",
            "resource_type": "public_ip",
            "started": 1.522818073e+09,
            "tenant_id": "06d6b792b31c40daa546fb0f4e35980d",
            "unique_resource_id": "d5622781-f06a-4fad-b800-b577a05ad8b2"
        },
        {
            "config_version": 1,
            "ended": null,
            "id": "d20cde36-cd9c-4a8a-a10c-e62fe4f087e4",
            "info": {
                "bandwidth": "10",
                "qos_type": "guarantee"
            },
            "parent_billing_id": "5a97fcc0-7d6f-4acd-bb87-75697ae19f94",
            "resource_id": "0e6b35d9-d74d-4d3a-922a-d79b9df9b78c",
            "resource_type": "qos_option",
            "started": 1.522818049e+09,
            "tenant_id": "06d6b792b31c40daa546fb0f4e35980d",
            "unique_resource_id": null
        }
    ]
}

#########################################
### checking heat-stack (public_ips) ####
#########################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/public_ips/d5622781-f06a-4fad-b800-b577a05ad8b2
[localhost] local: heat stack-show public_ip_d5622781-f06a-4fad-b800-b577a05ad8b2
+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                   |
+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                      |
| creation_time         | 2018-04-04T05:01:04Z                                                                                                                                                                    |
| description           | QoS Option                                                                                                                                                                              |
| disable_rollback      | True                                                                                                                                                                                    |
| id                    | 96d6707c-565e-4175-9690-40dfd081cf0e                                                                                                                                                    |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/06d6b792b31c40daa546fb0f4e35980d/stacks/public_ip_d5622781-f06a-4fad-b800-b577a05ad8b2/96d6707c-565e-4175-9690-40dfd081cf0e |
| notification_topics   | []                                                                                                                                                                                      |
| outputs               | []                                                                                                                                                                                      |
| parameters            | {                                                                                                                                                                                       |
|                       |   "primary_device_ip": "10.79.5.185",                                                                                                                                                   |
|                       |   "OS::stack_id": "96d6707c-565e-4175-9690-40dfd081cf0e",                                                                                                                               |
|                       |   "OS::stack_name": "public_ip_d5622781-f06a-4fad-b800-b577a05ad8b2",                                                                                                                   |
|                       |   "secondary_device_port": "830",                                                                                                                                                       |
|                       |   "secondary_device_password": "******",                                                                                                                                                |
|                       |   "ip_mask": "28",                                                                                                                                                                      |
|                       |   "primary_device_password": "******",                                                                                                                                                  |
|                       |   "ip_cidr": "203.0.112.0",                                                                                                                                                             |
|                       |   "primary_device_username": "esi",                                                                                                                                                     |
|                       |   "secondary_device_username": "esi",                                                                                                                                                   |
|                       |   "primary_device_port": "830",                                                                                                                                                         |
|                       |   "secondary_device_ip": "10.79.5.184",                                                                                                                                                 |
|                       |   "prefix_list_name": "vrf_gw_sample-ha-router-downlink_1025_prefix"                                                                                                                    |
|                       | }                                                                                                                                                                                       |
| parent                | None                                                                                                                                                                                    |
| stack_name            | public_ip_d5622781-f06a-4fad-b800-b577a05ad8b2                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                   |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                         |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                     |
| stack_user_project_id | 06d6b792b31c40daa546fb0f4e35980d                                                                                                                                                        |
| template_description  | QoS Option                                                                                                                                                                              |
| timeout_mins          | 60                                                                                                                                                                                      |
| updated_time          | None                                                                                                                                                                                    |
+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show public_ip_d5622781-f06a-4fad-b800-b577a05ad8b2
description: 'QoS Option

  '
heat_template_version: '2013-05-23'
parameters:
  ip_cidr: {label: Public IP CIDR, type: string}
  ip_mask: {label: Public IP CIDR, type: string}
  prefix_list_name: {label: Prefix List name., type: string}
  primary_device_ip: {description: Ip address that will be used to establish ssh connection
      to the Primary Device., label: Ip address of the device., type: string}
  primary_device_password: {description: Password of the user which will be used to
      log onto the Primary Device., hidden: true, label: Users password., type: string}
  primary_device_port: {description: Port that will be used to establish ssh connection
      to the Primary Device., label: Port of the ssh connection., type: number}
  primary_device_username: {description: Name of the user which will be used to log
      onto the Primary Device., label: User name to log on to device., type: string}
  secondary_device_ip: {description: Ip address that will be used to establish ssh
      connection to the Secondary Device., label: Ip address of the device., type: string}
  secondary_device_password: {description: Password of the user which will be used
      to log onto the Secondary Device., hidden: true, label: Users password., type: string}
  secondary_device_port: {description: Port that will be used to establish ssh connection
      to the Secondary Device., label: Port of the ssh connection., type: number}
  secondary_device_username: {description: Name of the user which will be used to
      log onto the Secondary Device., label: User name to log on to device., type: string}
resources:
  netconf_configure_primary:
    properties:
      configs:
      - config: ''
        path:
        - {config_type: tag, tag: policy-options, xml_type: tag}
        - config_type: named_tag
          name: {get_param: prefix_list_name}
          tag: prefix-list
          xml_type: named_tag
        - config_type: name
          name:
            str_replace:
              params:
                $CIDR: {get_param: ip_cidr}
                $MASK: {get_param: ip_mask}
              template: '$CIDR/$MASK

                '
          tag: prefix-list-item
          xml_type: named_tag
      device_ip: {get_param: primary_device_ip}
      lock_timeout: 3000
      password: {get_param: primary_device_password}
      port: {get_param: primary_device_port}
      username: {get_param: primary_device_username}
    type: OS::Contrail::NetconfNamedConfigs
  netconf_configure_secondary:
    depends_on: netconf_configure_primary
    properties:
      configs:
      - config: ''
        path:
        - {config_type: tag, tag: policy-options, xml_type: tag}
        - config_type: named_tag
          name: {get_param: prefix_list_name}
          tag: prefix-list
          xml_type: named_tag
        - config_type: name
          name:
            str_replace:
              params:
                $CIDR: {get_param: ip_cidr}
                $MASK: {get_param: ip_mask}
              template: '$CIDR/$MASK

                '
          tag: prefix-list-item
          xml_type: named_tag
      device_ip: {get_param: secondary_device_ip}
      lock_timeout: 3000
      password: {get_param: secondary_device_password}
      port: {get_param: secondary_device_port}
      username: {get_param: secondary_device_username}
    type: OS::Contrail::NetconfNamedConfigs

### Create Network ###
name:[sample-network], id:[6e557507-1c2a-49b1-ba90-5f616a1f1f3e]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
05:01:27.319907  05:01:27.458205  0.138298        POST     201    PENDING_CREATE
05:01:27.458967  05:01:27.578063  0.119096         GET     200    PENDING_CREATE
05:01:28.579408  05:01:28.680912  0.101504         GET     200    PENDING_CREATE
05:01:29.686974  05:01:29.802690  0.115716         GET     200    PENDING_CREATE
05:01:30.803941  05:01:30.909031  0.105090         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 3.589124

[localhost] local: gohan client network show --output-format json 6e557507-1c2a-49b1-ba90-5f616a1f1f3e
{
    "network": {
        "admin_state_up": true,
        "description": "Sample Network",
        "id": "6e557507-1c2a-49b1-ba90-5f616a1f1f3e",
        "name": "sample-network",
        "orchestration_state": "CREATE_COMPLETE",
        "plane": "data",
        "shared": false,
        "status": "ACTIVE",
        "subnets": [],
        "tags": {},
        "tenant_id": "06d6b792b31c40daa546fb0f4e35980d"
    }
}

[localhost] local: gohan client resource_mapping list --output-format json
Command not found

[localhost] local: gohan client billing_resource list --output-format json
{
    "billing_resources": [
        {
            "config_version": 1,
            "ended": null,
            "id": "5a97fcc0-7d6f-4acd-bb87-75697ae19f94",
            "info": {
                "internet_service": "sample-internet-service"
            },
            "parent_billing_id": null,
            "resource_id": "f6e8c695-c4c1-4a93-9b7e-1663aee6dec9",
            "resource_type": "internet_gateway",
            "started": 1.522818049e+09,
            "tenant_id": "06d6b792b31c40daa546fb0f4e35980d",
            "unique_resource_id": "f6e8c695-c4c1-4a93-9b7e-1663aee6dec9"
        },
        {
            "config_version": 1,
            "ended": null,
            "id": "6a72cbe8-17c7-444e-a9c8-685b4d47ff97",
            "info": {
                "cidr": "203.0.112.0",
                "submask_length": 28
            },
            "parent_billing_id": null,
            "resource_id": "d5622781-f06a-4fad-b800-b577a05ad8b2",
            "resource_type": "public_ip",
            "started": 1.522818073e+09,
            "tenant_id": "06d6b792b31c40daa546fb0f4e35980d",
            "unique_resource_id": "d5622781-f06a-4fad-b800-b577a05ad8b2"
        },
        {
            "config_version": 1,
            "ended": null,
            "id": "d20cde36-cd9c-4a8a-a10c-e62fe4f087e4",
            "info": {
                "bandwidth": "10",
                "qos_type": "guarantee"
            },
            "parent_billing_id": "5a97fcc0-7d6f-4acd-bb87-75697ae19f94",
            "resource_id": "0e6b35d9-d74d-4d3a-922a-d79b9df9b78c",
            "resource_type": "qos_option",
            "started": 1.522818049e+09,
            "tenant_id": "06d6b792b31c40daa546fb0f4e35980d",
            "unique_resource_id": null
        },
        {
            "config_version": 1,
            "ended": null,
            "id": "fc6dc454-4214-4573-9fbd-e2b5311a7d57",
            "info": {},
            "parent_billing_id": null,
            "resource_id": "6e557507-1c2a-49b1-ba90-5f616a1f1f3e",
            "resource_type": "network",
            "started": 1.52281809e+09,
            "tenant_id": "06d6b792b31c40daa546fb0f4e35980d",
            "unique_resource_id": "6e557507-1c2a-49b1-ba90-5f616a1f1f3e"
        }
    ]
}

#######################################
### checking heat-stack (networks) ####
#######################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/networks/6e557507-1c2a-49b1-ba90-5f616a1f1f3e
[localhost] local: heat stack-show network_6e557507-1c2a-49b1-ba90-5f616a1f1f3e
+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                 |
+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                    |
| creation_time         | 2018-04-04T05:01:28Z                                                                                                                                                                  |
| description           | Network template                                                                                                                                                                      |
| disable_rollback      | True                                                                                                                                                                                  |
| id                    | 388cc672-0672-49f2-aeed-a7cd9764860a                                                                                                                                                  |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/06d6b792b31c40daa546fb0f4e35980d/stacks/network_6e557507-1c2a-49b1-ba90-5f616a1f1f3e/388cc672-0672-49f2-aeed-a7cd9764860a |
| notification_topics   | []                                                                                                                                                                                    |
| outputs               | [                                                                                                                                                                                     |
|                       |   {                                                                                                                                                                                   |
|                       |     "output_value": [],                                                                                                                                                               |
|                       |     "description": "The name of the virtual network.",                                                                                                                                |
|                       |     "output_key": "route_targets"                                                                                                                                                     |
|                       |   },                                                                                                                                                                                  |
|                       |   {                                                                                                                                                                                   |
|                       |     "output_value": "default-domain:usertenant:6e557507-1c2a-49b1-ba90-5f616a1f1f3e",                                                                                                 |
|                       |     "description": "The FQ name of the virtual network.",                                                                                                                             |
|                       |     "output_key": "fq_name"                                                                                                                                                           |
|                       |   },                                                                                                                                                                                  |
|                       |   {                                                                                                                                                                                   |
|                       |     "output_value": "6e557507-1c2a-49b1-ba90-5f616a1f1f3e",                                                                                                                           |
|                       |     "description": "A unique id for the virtual network.",                                                                                                                            |
|                       |     "output_key": "id"                                                                                                                                                                |
|                       |   },                                                                                                                                                                                  |
|                       |   {                                                                                                                                                                                   |
|                       |     "output_value": "6e557507-1c2a-49b1-ba90-5f616a1f1f3e",                                                                                                                           |
|                       |     "description": "The name of the virtual network.",                                                                                                                                |
|                       |     "output_key": "name"                                                                                                                                                              |
|                       |   }                                                                                                                                                                                   |
|                       | ]                                                                                                                                                                                     |
| parameters            | {                                                                                                                                                                                     |
|                       |   "forwarding_mode": "l2_l3",                                                                                                                                                         |
|                       |   "allow_transit": "False",                                                                                                                                                           |
|                       |   "name": "6e557507-1c2a-49b1-ba90-5f616a1f1f3e",                                                                                                                                     |
|                       |   "OS::stack_name": "network_6e557507-1c2a-49b1-ba90-5f616a1f1f3e",                                                                                                                   |
|                       |   "admin_state_up": "True",                                                                                                                                                           |
|                       |   "OS::stack_id": "388cc672-0672-49f2-aeed-a7cd9764860a",                                                                                                                             |
|                       |   "external": "True",                                                                                                                                                                 |
|                       |   "shared": "False",                                                                                                                                                                  |
|                       |   "route_targets": "",                                                                                                                                                                |
|                       |   "uuid": "6e557507-1c2a-49b1-ba90-5f616a1f1f3e"                                                                                                                                      |
|                       | }                                                                                                                                                                                     |
| parent                | None                                                                                                                                                                                  |
| stack_name            | network_6e557507-1c2a-49b1-ba90-5f616a1f1f3e                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                 |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                       |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                   |
| stack_user_project_id | 06d6b792b31c40daa546fb0f4e35980d                                                                                                                                                      |
| template_description  | Network template                                                                                                                                                                      |
| timeout_mins          | 3                                                                                                                                                                                     |
| updated_time          | None                                                                                                                                                                                  |
+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show network_6e557507-1c2a-49b1-ba90-5f616a1f1f3e
description: 'Network template

  '
heat_template_version: '2013-05-23'
outputs:
  fq_name:
    description: The FQ name of the virtual network.
    value:
      get_attr: [network, fq_name]
  id:
    description: A unique id for the virtual network.
    value: {get_resource: network}
  name:
    description: The name of the virtual network.
    value:
      get_attr: [network, name]
  route_targets:
    description: The name of the virtual network.
    value:
      get_attr: [network, route_targets]
parameters:
  admin_state_up: {default: true, label: Admin state up, type: boolean}
  allow_transit: {default: false, label: Allow Transit, type: boolean}
  external: {default: true, label: External Network, type: boolean}
  forwarding_mode: {default: l2_l3, description: Forwarding Mode., label: Forwarding
      Mode, type: string}
  name: {description: Name of the virtual network that will be created., label: Virtual
      Network Name, type: string}
  route_targets:
    default: []
    label: Route Targets list
    type: comma_delimited_list
  shared: {default: false, label: Shared Network, type: boolean}
  uuid: {default: '', description: UUID of the virtual network that will be created.,
    label: Virtual Network UUID, type: string}
resources:
  network:
    properties:
      admin_state_up: {get_param: admin_state_up}
      forwarding_mode: {get_param: forwarding_mode}
      name: {get_param: name}
      route_targets: {get_param: route_targets}
      shared: {get_param: shared}
      uuid: {get_param: uuid}
    type: OS::Contrail::VirtualNetwork

### Create Subnet ###
name:[sample-subnet], id:[67877f2d-0547-4cea-a6ce-2e3b937aa31b]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
05:01:44.707386  05:01:44.916363  0.208977        POST     201    PENDING_CREATE
05:01:44.916787  05:01:45.064398  0.147611         GET     200    PENDING_CREATE
05:01:46.065324  05:01:46.137987  0.072663         GET     200    PENDING_CREATE
05:01:47.139254  05:01:47.218547  0.079293         GET     200    PENDING_CREATE
05:01:48.219782  05:01:48.292425  0.072643         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 3.585039

[localhost] local: gohan client subnet show --output-format json 67877f2d-0547-4cea-a6ce-2e3b937aa31b
{
    "subnet": {
        "allocation_pools": [
            {
                "end": "172.16.101.254",
                "start": "172.16.101.2"
            }
        ],
        "cidr": "172.16.101.0/24",
        "description": "Sample Subnet",
        "dhcp_server_address": "172.16.101.2",
        "dns_nameservers": [],
        "enable_dhcp": true,
        "gateway_ip": "172.16.101.1",
        "host_routes": [],
        "id": "67877f2d-0547-4cea-a6ce-2e3b937aa31b",
        "ip_version": 4,
        "ipv6_address_mode": null,
        "ipv6_ra_mode": null,
        "name": "sample-subnet",
        "network_id": "6e557507-1c2a-49b1-ba90-5f616a1f1f3e",
        "ntp_servers": [],
        "orchestration_state": "CREATE_COMPLETE",
        "status": "ACTIVE",
        "tags": {},
        "tenant_id": "06d6b792b31c40daa546fb0f4e35980d"
    }
}

[localhost] local: gohan client port list --output-format json
[localhost] local: gohan client port show --output-format json 9dc6550a-f4a0-4be0-9e52-f780501926a8
{
    "port": {
        "admin_state_up": true,
        "allowed_address_pairs": [],
        "attached": false,
        "binding:vif_type": "vrouter",
        "description": "DHCP Server Port",
        "device_id": "67877f2d-0547-4cea-a6ce-2e3b937aa31b",
        "device_owner": "network:dhcp",
        "ese_logical_port_id": null,
        "fake_delete": false,
        "fixed_ips": [
            {
                "ip_address": "172.16.101.2",
                "subnet_id": "67877f2d-0547-4cea-a6ce-2e3b937aa31b"
            }
        ],
        "id": "9dc6550a-f4a0-4be0-9e52-f780501926a8",
        "mac_address": "00:00:5e:00:01:00",
        "managed_by_service": false,
        "name": "dhcp-server-port",
        "network_id": "6e557507-1c2a-49b1-ba90-5f616a1f1f3e",
        "operational_state": "",
        "orchestration_state": "SYNC_COMPLETE",
        "security_groups": [],
        "segmentation_id": null,
        "segmentation_type": null,
        "status": "ACTIVE",
        "tags": {},
        "tenant_id": "06d6b792b31c40daa546fb0f4e35980d"
    }
}

######################################
### checking heat-stack (subnets) ####
######################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/subnets/67877f2d-0547-4cea-a6ce-2e3b937aa31b
[localhost] local: heat stack-show subnet_67877f2d-0547-4cea-a6ce-2e3b937aa31b
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                |
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                   |
| creation_time         | 2018-04-04T05:01:45Z                                                                                                                                                                 |
| description           | Subnet template                                                                                                                                                                      |
| disable_rollback      | True                                                                                                                                                                                 |
| id                    | 91e83bc9-05fd-4ff8-ab4a-de3af107c6cc                                                                                                                                                 |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/06d6b792b31c40daa546fb0f4e35980d/stacks/subnet_67877f2d-0547-4cea-a6ce-2e3b937aa31b/91e83bc9-05fd-4ff8-ab4a-de3af107c6cc |
| notification_topics   | []                                                                                                                                                                                   |
| outputs               | [                                                                                                                                                                                    |
|                       |   {                                                                                                                                                                                  |
|                       |     "output_value": "172.16.101.0/24",                                                                                                                                               |
|                       |     "description": "IP prefix of local subnet.",                                                                                                                                     |
|                       |     "output_key": "ip_prefix"                                                                                                                                                        |
|                       |   },                                                                                                                                                                                 |
|                       |   {                                                                                                                                                                                  |
|                       |     "output_value": "67877f2d-0547-4cea-a6ce-2e3b937aa31b",                                                                                                                          |
|                       |     "description": "The name of the local subnet.",                                                                                                                                  |
|                       |     "output_key": "name"                                                                                                                                                             |
|                       |   },                                                                                                                                                                                 |
|                       |   {                                                                                                                                                                                  |
|                       |     "output_value": "172.16.101.1",                                                                                                                                                  |
|                       |     "description": "Default gateway of local subnet.",                                                                                                                               |
|                       |     "output_key": "default_gateway"                                                                                                                                                  |
|                       |   },                                                                                                                                                                                 |
|                       |   {                                                                                                                                                                                  |
|                       |     "output_value": "6e557507-1c2a-49b1-ba90-5f616a1f1f3e",                                                                                                                          |
|                       |     "description": "A unique id for the network.",                                                                                                                                   |
|                       |     "output_key": "network_id"                                                                                                                                                       |
|                       |   },                                                                                                                                                                                 |
|                       |   {                                                                                                                                                                                  |
|                       |     "output_value": "5a79909b-2bf3-4e26-8a9c-0bf6bb175457",                                                                                                                          |
|                       |     "description": "IPAM this local subnet uses.",                                                                                                                                   |
|                       |     "output_key": "ipam"                                                                                                                                                             |
|                       |   },                                                                                                                                                                                 |
|                       |   {                                                                                                                                                                                  |
|                       |     "output_value": "4cc11376-ba13-4cc8-b7a6-f886f4a031d1",                                                                                                                          |
|                       |     "description": "A unique id for the local subnet.",                                                                                                                              |
|                       |     "output_key": "id"                                                                                                                                                               |
|                       |   }                                                                                                                                                                                  |
|                       | ]                                                                                                                                                                                    |
| parameters            | {                                                                                                                                                                                    |
|                       |   "OS::stack_name": "subnet_67877f2d-0547-4cea-a6ce-2e3b937aa31b",                                                                                                                   |
|                       |   "enable_dhcp": "True",                                                                                                                                                             |
|                       |   "network_id": "6e557507-1c2a-49b1-ba90-5f616a1f1f3e",                                                                                                                              |
|                       |   "ipam": "default-domain:default-project:default-network-ipam",                                                                                                                     |
|                       |   "dns_nameservers": "",                                                                                                                                                             |
|                       |   "dhcp_server_address": "172.16.101.2",                                                                                                                                             |
|                       |   "OS::stack_id": "91e83bc9-05fd-4ff8-ab4a-de3af107c6cc",                                                                                                                            |
|                       |   "ntp_servers": "",                                                                                                                                                                 |
|                       |   "allocation_pools": "[{u'start': u'172.16.101.2', u'end': u'172.16.101.254'}]",                                                                                                    |
|                       |   "gateway_ip": "172.16.101.1",                                                                                                                                                      |
|                       |   "host_routes": "[]",                                                                                                                                                               |
|                       |   "cidr": "172.16.101.0/24",                                                                                                                                                         |
|                       |   "name": "67877f2d-0547-4cea-a6ce-2e3b937aa31b"                                                                                                                                     |
|                       | }                                                                                                                                                                                    |
| parent                | None                                                                                                                                                                                 |
| stack_name            | subnet_67877f2d-0547-4cea-a6ce-2e3b937aa31b                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                      |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                  |
| stack_user_project_id | 06d6b792b31c40daa546fb0f4e35980d                                                                                                                                                     |
| template_description  | Subnet template                                                                                                                                                                      |
| timeout_mins          | 3                                                                                                                                                                                    |
| updated_time          | None                                                                                                                                                                                 |
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show subnet_67877f2d-0547-4cea-a6ce-2e3b937aa31b
description: 'Subnet template

  '
heat_template_version: '2013-05-23'
outputs:
  default_gateway:
    description: Default gateway of local subnet.
    value:
      get_attr: [subnet, default_gateway]
  id:
    description: A unique id for the local subnet.
    value: {get_resource: subnet}
  ip_prefix:
    description: IP prefix of local subnet.
    value:
      get_attr: [subnet, ip_prefix]
  ipam:
    description: IPAM this local subnet uses.
    value:
      get_attr: [subnet, ipam]
  name:
    description: The name of the local subnet.
    value:
      get_attr: [subnet, name]
  network_id:
    description: A unique id for the network.
    value:
      get_attr: [subnet, network_id]
parameters:
  allocation_pools:
    default: []
    description: Allocation Pools
    label: Allocation Pools
    type: string
  cidr: {description: IP prefix of the local subnet that will be created., label: Local
      Subnet IP prefix, type: string}
  dhcp_server_address: {default: 0.0.0.0, description: DHCP Server address, label: DHCP
      Server address, type: string}
  dns_nameservers:
    default: []
    description: DNS Nameservers List
    label: DNS Nameservers List
    type: comma_delimited_list
  enable_dhcp: {default: true, description: Enable DHCP, label: Enable DHCP, type: boolean}
  gateway_ip: {default: 0.0.0.0, description: Default gateway for the local subnet
      that will be created., label: Default Gateway, type: string}
  host_routes:
    default: []
    description: Host Routes
    label: Host Routes
    type: json
  ipam: {default: '', description: IPAM for the local subnet that will be created.,
    label: IP Address Management, type: string}
  name: {description: Name of the local subnet that will be created., label: Local
      Subnet Name, type: string}
  network_id: {description: ID of the network for which subnet will be created., label: Network
      ID, type: string}
  ntp_servers:
    default: []
    description: NTP Nameservers List
    label: NTP Nameservers List
    type: comma_delimited_list
resources:
  subnet:
    properties:
      allocation_pools: {get_param: allocation_pools}
      default_gateway: {get_param: gateway_ip}
      dns_nameservers: {get_param: dns_nameservers}
      dns_server_address: {get_param: dhcp_server_address}
      enable_dhcp: {get_param: enable_dhcp}
      gateway_is_vrouter: false
      host_routes: {get_param: host_routes}
      ip_prefix: {get_param: cidr}
      ipam: {get_param: ipam}
      name: {get_param: name}
      network_id: {get_param: network_id}
      ntp_servers: {get_param: ntp_servers}
    type: OS::Contrail::VnSubnet

### Create Gw Interface ###
name:[sample-gw-interface], id:[ce8831fd-d30c-41e3-95de-feaee0b95405]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
05:02:02.038318  05:02:03.360744  1.322426        POST     201    PENDING_CREATE
05:02:03.361058  05:02:03.466177  0.105119         GET     200    PENDING_CREATE
05:02:04.467425  05:02:04.540644  0.073219         GET     200    PENDING_CREATE
05:02:05.541604  05:02:05.627478  0.085874         GET     200    PENDING_CREATE
05:02:06.628529  05:02:06.714332  0.085803         GET     200    PENDING_CREATE
05:02:07.715590  05:02:07.789288  0.073698         GET     200    PENDING_CREATE
05:02:08.790626  05:02:08.876263  0.085637         GET     200    PENDING_CREATE
05:02:09.877588  05:02:09.955054  0.077466         GET     200    PENDING_CREATE
05:02:10.956323  05:02:11.036892  0.080569         GET     200    PENDING_CREATE
05:02:12.038096  05:02:12.111551  0.073455         GET     200    PENDING_CREATE
05:02:13.112521  05:02:13.184885  0.072364         GET     200    PENDING_CREATE
05:02:14.186236  05:02:14.260089  0.073853         GET     200    PENDING_CREATE
05:02:15.260820  05:02:15.336052  0.075232         GET     200    PENDING_CREATE
05:02:16.337337  05:02:16.416823  0.079486         GET     200    PENDING_CREATE
05:02:17.418185  05:02:17.494118  0.075933         GET     200    PENDING_CREATE
05:02:18.495672  05:02:18.570909  0.075237         GET     200    PENDING_CREATE
05:02:19.572266  05:02:19.643887  0.071621         GET     200    PENDING_CREATE
05:02:20.645121  05:02:20.721567  0.076446         GET     200    PENDING_CREATE
05:02:21.722807  05:02:21.795852  0.073045         GET     200    PENDING_CREATE
05:02:22.796550  05:02:22.892513  0.095963         GET     200    PENDING_CREATE
05:02:23.893922  05:02:23.976050  0.082128         GET     200    PENDING_CREATE
05:02:24.976527  05:02:25.052403  0.075876         GET     200    PENDING_CREATE
05:02:26.053131  05:02:26.151118  0.097987         GET     200    PENDING_CREATE
05:02:27.152386  05:02:27.229828  0.077442         GET     200    PENDING_CREATE
05:02:28.231158  05:02:28.370241  0.139083         GET     200    PENDING_CREATE
05:02:29.371515  05:02:30.349383  0.977868         GET     200    PENDING_CREATE
05:02:31.349947  05:02:31.427883  0.077936         GET     200    PENDING_CREATE
05:02:32.428528  05:02:32.512077  0.083549         GET     200    PENDING_CREATE
05:02:33.512510  05:02:33.610394  0.097884         GET     200    PENDING_CREATE
05:02:34.612210  05:02:34.725321  0.113111         GET     200    PENDING_CREATE
05:02:35.727375  05:02:35.819522  0.092147         GET     200    PENDING_CREATE
05:02:36.820547  05:02:36.896045  0.075498         GET     200    PENDING_CREATE
05:02:37.896503  05:02:37.975153  0.078650         GET     200    PENDING_CREATE
05:02:38.976418  05:02:39.076898  0.100480         GET     200    PENDING_CREATE
05:02:40.078152  05:02:40.169170  0.091018         GET     200    PENDING_CREATE
05:02:41.170436  05:02:41.244866  0.074430         GET     200    PENDING_CREATE
05:02:42.246132  05:02:42.320545  0.074413         GET     200    PENDING_CREATE
05:02:43.320937  05:02:43.396765  0.075828         GET     200    PENDING_CREATE
05:02:44.397682  05:02:44.474181  0.076499         GET     200    PENDING_CREATE
05:02:45.475403  05:02:45.557846  0.082443         GET     200    PENDING_CREATE
05:02:46.559123  05:02:46.632689  0.073566         GET     200    PENDING_CREATE
05:02:47.633947  05:02:47.707986  0.074039         GET     200    PENDING_CREATE
05:02:48.708866  05:02:48.787465  0.078599         GET     200    PENDING_CREATE
05:02:49.788247  05:02:49.870287  0.082040         GET     200    PENDING_CREATE
05:02:50.870847  05:02:50.953934  0.083087         GET     200    PENDING_CREATE
05:02:51.955250  05:02:52.032598  0.077348         GET     200    PENDING_CREATE
05:02:53.033094  05:02:53.105000  0.071906         GET     200    PENDING_CREATE
05:02:54.106292  05:02:54.180756  0.074464         GET     200    PENDING_CREATE
05:02:55.181947  05:02:55.255588  0.073641         GET     200    PENDING_CREATE
05:02:56.256458  05:02:56.326861  0.070403         GET     200    PENDING_CREATE
05:02:57.328317  05:02:57.402823  0.074506         GET     200    PENDING_CREATE
05:02:58.403666  05:02:58.477370  0.073704         GET     200    PENDING_CREATE
05:02:59.478702  05:02:59.553198  0.074496         GET     200    PENDING_CREATE
05:03:00.554172  05:03:00.629968  0.075796         GET     200    PENDING_CREATE
05:03:01.631009  05:03:01.705421  0.074412         GET     200    PENDING_CREATE
05:03:02.706774  05:03:02.780707  0.073933         GET     200    PENDING_CREATE
05:03:03.782053  05:03:04.013939  0.231886         GET     200    PENDING_CREATE
05:03:05.015319  05:03:05.091411  0.076092         GET     200    PENDING_CREATE
05:03:06.092556  05:03:06.183514  0.090958         GET     200    PENDING_CREATE
05:03:07.184561  05:03:07.270097  0.085536         GET     200    PENDING_CREATE
05:03:08.271409  05:03:08.345331  0.073922         GET     200    PENDING_CREATE
05:03:09.346618  05:03:09.423579  0.076961         GET     200    PENDING_CREATE
05:03:10.424861  05:03:10.501093  0.076232         GET     200    PENDING_CREATE
05:03:11.502357  05:03:11.578261  0.075904         GET     200    PENDING_CREATE
05:03:12.579537  05:03:12.656033  0.076496         GET     200    PENDING_CREATE
05:03:13.657319  05:03:13.732086  0.074767         GET     200    PENDING_CREATE
05:03:14.733360  05:03:14.806802  0.073442         GET     200    PENDING_CREATE
05:03:15.808067  05:03:15.882200  0.074133         GET     200    PENDING_CREATE
05:03:16.883488  05:03:16.956907  0.073419         GET     200    PENDING_CREATE
05:03:17.958233  05:03:18.034130  0.075897         GET     200    PENDING_CREATE
05:03:19.035481  05:03:19.118433  0.082952         GET     200    PENDING_CREATE
05:03:20.119753  05:03:20.191159  0.071406         GET     200    PENDING_CREATE
05:03:21.192418  05:03:21.267273  0.074855         GET     200    PENDING_CREATE
05:03:22.267905  05:03:22.347749  0.079844         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 80.309431

[localhost] local: gohan client gw_interface show --output-format json ce8831fd-d30c-41e3-95de-feaee0b95405
{
    "gw_interface": {
        "aws_gw_id": null,
        "azure_gw_id": null,
        "description": "Sample Gw-interface",
        "gcp_gw_id": null,
        "gw_vipv4": "172.16.101.151",
        "gw_vipv6": null,
        "id": "ce8831fd-d30c-41e3-95de-feaee0b95405",
        "interdc_gw_id": null,
        "internet_gw_id": "f6e8c695-c4c1-4a93-9b7e-1663aee6dec9",
        "name": "sample-gw-interface",
        "netmask": 24,
        "network_id": "6e557507-1c2a-49b1-ba90-5f616a1f1f3e",
        "operational_state": "UP",
        "orchestration_state": "CREATE_COMPLETE",
        "primary_ipv4": "172.16.101.152",
        "primary_ipv6": null,
        "public_ip_id": null,
        "secondary_ipv4": "172.16.101.153",
        "secondary_ipv6": null,
        "service_type": "internet",
        "status": "ACTIVE",
        "tenant_id": "06d6b792b31c40daa546fb0f4e35980d",
        "vpn_gw_id": null,
        "vrid": 20
    }
}

############################################
### checking heat-stack (gw_interfaces) ####
############################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/gw_interfaces/ce8831fd-d30c-41e3-95de-feaee0b95405
[localhost] local: heat stack-show gw_interface_ce8831fd-d30c-41e3-95de-feaee0b95405
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                      |
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                         |
| creation_time         | 2018-04-04T05:02:04Z                                                                                                                                                                       |
| description           | Inet Address                                                                                                                                                                               |
| disable_rollback      | True                                                                                                                                                                                       |
| id                    | 705f6aad-011f-4af8-800f-fc4f5417d052                                                                                                                                                       |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/06d6b792b31c40daa546fb0f4e35980d/stacks/gw_interface_ce8831fd-d30c-41e3-95de-feaee0b95405/705f6aad-011f-4af8-800f-fc4f5417d052 |
| notification_topics   | []                                                                                                                                                                                         |
| outputs               | [                                                                                                                                                                                          |
|                       |   {                                                                                                                                                                                        |
|                       |     "output_value": "921a9234-0ae4-44f5-89b0-2f68dcaaae5b",                                                                                                                                |
|                       |     "description": "Monitoring Target ID",                                                                                                                                                 |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                                   |
|                       |   },                                                                                                                                                                                       |
|                       |   {                                                                                                                                                                                        |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/921a9234-0ae4-44f5-89b0-2f68dcaaae5b",                                                       |
|                       |     "description": "Monitoring Process Link",                                                                                                                                              |
|                       |     "output_key": "monitoring_link"                                                                                                                                                        |
|                       |   }                                                                                                                                                                                        |
|                       | ]                                                                                                                                                                                          |
| parameters            | {                                                                                                                                                                                          |
|                       |   "secondary_device_physical_interface": "ae0",                                                                                                                                            |
|                       |   "secondary_ibgp_config_group": "InetGW1-RI-IBGP",                                                                                                                                        |
|                       |   "primary_device_password": "******",                                                                                                                                                     |
|                       |   "secondary_device_gw_ip": "172.16.101.153",                                                                                                                                              |
|                       |   "gohan_id": "ce8831fd-d30c-41e3-95de-feaee0b95405",                                                                                                                                      |
|                       |   "bgp_group_name": "inet-gw-group",                                                                                                                                                       |
|                       |   "OS::stack_name": "gw_interface_ce8831fd-d30c-41e3-95de-feaee0b95405",                                                                                                                   |
|                       |   "gw_vip": "172.16.101.151",                                                                                                                                                              |
|                       |   "primary_device_ip": "10.79.5.185",                                                                                                                                                      |
|                       |   "version": "1",                                                                                                                                                                          |
|                       |   "secondary_device_username": "esi",                                                                                                                                                      |
|                       |   "secondary_logical_interface_name": "ae0.1025",                                                                                                                                          |
|                       |   "primary_logical_interface_name": "ae0.1025",                                                                                                                                            |
|                       |   "vlan": "1025",                                                                                                                                                                          |
|                       |   "primary_device_gw_ip": "172.16.101.152",                                                                                                                                                |
|                       |   "netmask": "24",                                                                                                                                                                         |
|                       |   "primary_device_physical_interface": "ae0",                                                                                                                                              |
|                       |   "vrrp_group": "20",                                                                                                                                                                      |
|                       |   "primary_device_priority": "105",                                                                                                                                                        |
|                       |   "OS::stack_id": "705f6aad-011f-4af8-800f-fc4f5417d052",                                                                                                                                  |
|                       |   "tenant_id": "06d6b792b31c40daa546fb0f4e35980d",                                                                                                                                         |
|                       |   "secondary_device_port": "830",                                                                                                                                                          |
|                       |   "secondary_device_password": "******",                                                                                                                                                   |
|                       |   "vrf_name": "vrf_gw_sample-ha-router-downlink_1025",                                                                                                                                     |
|                       |   "primary_device_username": "esi",                                                                                                                                                        |
|                       |   "secondary_device_priority": "100",                                                                                                                                                      |
|                       |   "primary_ibgp_config_group": "InetGW2-RI-IBGP",                                                                                                                                          |
|                       |   "primary_device_port": "830",                                                                                                                                                            |
|                       |   "secondary_device_ip": "10.79.5.184"                                                                                                                                                     |
|                       | }                                                                                                                                                                                          |
| parent                | None                                                                                                                                                                                       |
| stack_name            | gw_interface_ce8831fd-d30c-41e3-95de-feaee0b95405                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                      |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                            |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                        |
| stack_user_project_id | 06d6b792b31c40daa546fb0f4e35980d                                                                                                                                                           |
| template_description  | Inet Address                                                                                                                                                                               |
| timeout_mins          | 60                                                                                                                                                                                         |
| updated_time          | None                                                                                                                                                                                       |
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show gw_interface_ce8831fd-d30c-41e3-95de-feaee0b95405
description: 'Inet Address

  '
heat_template_version: '2013-05-23'
outputs:
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [vrrp_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: vrrp_monitor}
parameters:
  bgp_group_name: {label: Name of BGP Group on VRF, type: string}
  gohan_id: {description: UUID of the GW Interface, label: Gohan resource ID, type: string}
  gw_vip: {description: Virtual IP configured on VRRP, label: Inet Address CIDR, type: string}
  netmask: {description: Netmask for gw_ip, label: Netmask, type: number}
  primary_device_gw_ip: {description: IP on primary device, label: Inet Address CIDR,
    type: string}
  primary_device_ip: {description: Ip address that will be used to establish ssh connection
      to the Primary Device., label: Ip address of the device., type: string}
  primary_device_password: {description: Password of the user which will be used to
      log onto the Primary Device., hidden: true, label: Users password., type: string}
  primary_device_physical_interface: {description: MX physical port on which logical
      interface will be created, label: Underlying physical interface, type: string}
  primary_device_port: {description: Port that will be used to establish ssh connection
      to the Primary Device., label: Port of the ssh connection., type: number}
  primary_device_priority: {label: Primary device priority, type: string}
  primary_device_username: {description: Name of the user which will be used to log
      onto the Primary Device., label: User name to log on to device., type: string}
  primary_ibgp_config_group: {description: Name for apply group to use for downlink
      interface, label: Apply group name, type: string}
  primary_logical_interface_name: {description: MX logical port, label: Underlying
      logical interface, type: string}
  secondary_device_gw_ip: {description: IP on secondary device, label: Inet Address
      CIDR, type: string}
  secondary_device_ip: {description: Ip address that will be used to establish ssh
      connection to the Secondary Device., label: Ip address of the device., type: string}
  secondary_device_password: {description: Password of the user which will be used
      to log onto the Secondary Device., hidden: true, label: Users password., type: string}
  secondary_device_physical_interface: {description: MX physical port on which logical
      interface will be created, label: Underlying physical interface, type: string}
  secondary_device_port: {description: Port that will be used to establish ssh connection
      to the Secondary Device., label: Port of the ssh connection., type: number}
  secondary_device_priority: {label: Secondary device priority, type: string}
  secondary_device_username: {description: Name of the user which will be used to
      log onto the Secondary Device., label: User name to log on to device., type: string}
  secondary_ibgp_config_group: {description: Name for apply group to use for downlink
      interface, label: Apply group name, type: string}
  secondary_logical_interface_name: {description: MX logical port, label: Underlying
      logical interface, type: string}
  tenant_id: {label: Tenant ID, type: string}
  version: {label: Config version, type: number}
  vlan: {description: Vlan tag for mx logical interface, label: Vlan Tag, type: string}
  vrf_name: {label: VRF, type: string}
  vrrp_group: {label: VRRP Group, type: string}
resources:
  netconf_configure_primary:
    properties:
      configs:
      - config:
          str_replace:
            params:
              $PRIORITY: {get_param: primary_device_priority}
              $VIP: {get_param: gw_vip}
              $VRRP_GROUP: {get_param: vrrp_group}
            template: "vrrp-group $VRRP_GROUP {\n    virtual-address $VIP;\n    priority\
              \ $PRIORITY;\n}\n"
        path:
        - {config_type: tag, tag: interfaces, xml_type: tag}
        - config_type: name
          name: {get_param: primary_device_physical_interface}
          tag: interface
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: vlan}
          tag: unit
          xml_type: named_tag
        - {config_type: tag, tag: family, xml_type: tag}
        - {config_type: tag, tag: inet, xml_type: tag}
        - config_type: named_tag
          name:
            str_replace:
              params:
                $DEVICE_IP: {get_param: primary_device_gw_ip}
                $NETMASK: {get_param: netmask}
              template: '$DEVICE_IP/$NETMASK

                '
          tag: address
          xml_type: named_tag
      - config:
          str_replace:
            params:
              $APPLY_GROUP: {get_param: primary_ibgp_config_group}
              $DEVICE_GW_IP: {get_param: primary_device_gw_ip}
              $NEIGHBOR_GW_IP: {get_param: secondary_device_gw_ip}
            template: 'apply-groups $APPLY_GROUP

              local-address $DEVICE_GW_IP;

              neighbor $NEIGHBOR_GW_IP;

              '
        path:
        - {config_type: tag, tag: routing-instances, xml_type: tag}
        - config_type: name
          name: {get_param: vrf_name}
          tag: instance
          xml_type: named_tag
        - {config_type: tag, tag: protocols, xml_type: tag}
        - {config_type: tag, tag: bgp, xml_type: tag}
        - config_type: named_tag
          name: {get_param: bgp_group_name}
          tag: group
          xml_type: named_tag
      device_ip: {get_param: primary_device_ip}
      lock_timeout: 3000
      password: {get_param: primary_device_password}
      port: {get_param: primary_device_port}
      username: {get_param: primary_device_username}
    type: OS::Contrail::NetconfNamedConfigs
  netconf_configure_secondary:
    depends_on: netconf_configure_primary
    properties:
      configs:
      - config:
          str_replace:
            params:
              $PRIORITY: {get_param: secondary_device_priority}
              $VIP: {get_param: gw_vip}
              $VRRP_GROUP: {get_param: vrrp_group}
            template: "vrrp-group $VRRP_GROUP {\n    virtual-address $VIP;\n    priority\
              \ $PRIORITY;\n}\n"
        path:
        - {config_type: tag, tag: interfaces, xml_type: tag}
        - config_type: name
          name: {get_param: secondary_device_physical_interface}
          tag: interface
          xml_type: named_tag
        - config_type: named_tag
          name: {get_param: vlan}
          tag: unit
          xml_type: named_tag
        - {config_type: tag, tag: family, xml_type: tag}
        - {config_type: tag, tag: inet, xml_type: tag}
        - config_type: named_tag
          name:
            str_replace:
              params:
                $DEVICE_IP: {get_param: secondary_device_gw_ip}
                $NETMASK: {get_param: netmask}
              template: '$DEVICE_IP/$NETMASK

                '
          tag: address
          xml_type: named_tag
      - config:
          str_replace:
            params:
              $APPLY_GROUP: {get_param: secondary_ibgp_config_group}
              $DEVICE_GW_IP: {get_param: secondary_device_gw_ip}
              $NEIGHBOR_GW_IP: {get_param: primary_device_gw_ip}
            template: 'apply-groups $APPLY_GROUP

              local-address $DEVICE_GW_IP;

              neighbor $NEIGHBOR_GW_IP;

              '
        path:
        - {config_type: tag, tag: routing-instances, xml_type: tag}
        - config_type: name
          name: {get_param: vrf_name}
          tag: instance
          xml_type: named_tag
        - {config_type: tag, tag: protocols, xml_type: tag}
        - {config_type: tag, tag: bgp, xml_type: tag}
        - config_type: named_tag
          name: {get_param: bgp_group_name}
          tag: group
          xml_type: named_tag
      device_ip: {get_param: secondary_device_ip}
      lock_timeout: 3000
      password: {get_param: secondary_device_password}
      port: {get_param: secondary_device_port}
      username: {get_param: secondary_device_username}
    type: OS::Contrail::NetconfNamedConfigs
  vrrp_monitor:
    depends_on: netconf_configure_secondary
    properties:
      field_name: status
      properties:
        primary:
          host: {get_param: primary_device_ip}
          interface: {get_param: primary_logical_interface_name}
          login: {get_param: primary_device_username}
          password: {get_param: primary_device_password}
          port: {get_param: primary_device_port}
        secondary:
          host: {get_param: secondary_device_ip}
          interface: {get_param: secondary_logical_interface_name}
          login: {get_param: secondary_device_username}
          password: {get_param: secondary_device_password}
          port: {get_param: secondary_device_port}
        vrid:
        - {get_param: vrrp_group}
      resource_id: {get_param: gohan_id}
      resource_type: gw_interfaces
      syncer_properties:
        etcd:
          hold_options:
            positive_status: {primary: MASTER, secondary: BACKUP}
            time_seconds: 360
          status: {key: status}
      tenant_id: {get_param: tenant_id}
      type: vrrp_pool
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget

[localhost] local: gohan client ese_logical_port list --output-format json
[localhost] local: gohan client ese_logical_port show --output-format json 02112bb1-389c-4ff8-9354-94ab43459892
{
    "ese_logical_port": {
        "common_function_gateway_id": null,
        "connected_resource": "gw_interface",
        "description": "ESE Logical port for Port f3867a99-de18-4512-8e94-f9aaa7b05c3a",
        "ese_physical_port_id": "887fecdd-956b-47fa-a348-8940c53a5bf9",
        "gw_interface_id": "ce8831fd-d30c-41e3-95de-feaee0b95405",
        "id": "02112bb1-389c-4ff8-9354-94ab43459892",
        "name": "xe-0/0/3.1025",
        "network_id": "6e557507-1c2a-49b1-ba90-5f616a1f1f3e",
        "operational_state": "UP",
        "orchestration_state": "CREATE_COMPLETE",
        "port_ids": [
            "f3867a99-de18-4512-8e94-f9aaa7b05c3a"
        ],
        "status": "ACTIVE",
        "tags": {},
        "tenant_id": "06d6b792b31c40daa546fb0f4e35980d",
        "type": "L2",
        "vlan_id": 1025
    }
}

################################################
### checking heat-stack (ese_logical_ports) ####
################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/ese_logical_ports/02112bb1-389c-4ff8-9354-94ab43459892
[localhost] local: heat stack-show ese_logical_port_02112bb1-389c-4ff8-9354-94ab43459892
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                          |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                             |
| creation_time         | 2018-04-04T05:02:30Z                                                                                                                                                                           |
| description           | Logical port template                                                                                                                                                                          |
| disable_rollback      | True                                                                                                                                                                                           |
| id                    | ae16fce6-6a2d-4150-9124-b5f724501a5c                                                                                                                                                           |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/06d6b792b31c40daa546fb0f4e35980d/stacks/ese_logical_port_02112bb1-389c-4ff8-9354-94ab43459892/ae16fce6-6a2d-4150-9124-b5f724501a5c |
| notification_topics   | []                                                                                                                                                                                             |
| outputs               | [                                                                                                                                                                                              |
|                       |   {                                                                                                                                                                                            |
|                       |     "output_value": "501b16b0-8059-4263-9e40-06aabfa1d72f",                                                                                                                                    |
|                       |     "description": "Monitoring Target ID",                                                                                                                                                     |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                                       |
|                       |   },                                                                                                                                                                                           |
|                       |   {                                                                                                                                                                                            |
|                       |     "output_value": "46b0cd68-d0fb-4d72-9def-830164f9e215",                                                                                                                                    |
|                       |     "description": "A unique id for the logical interface",                                                                                                                                    |
|                       |     "output_key": "id"                                                                                                                                                                         |
|                       |   },                                                                                                                                                                                           |
|                       |   {                                                                                                                                                                                            |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/501b16b0-8059-4263-9e40-06aabfa1d72f",                                                           |
|                       |     "description": "Monitoring Process Link",                                                                                                                                                  |
|                       |     "output_key": "monitoring_link"                                                                                                                                                            |
|                       |   },                                                                                                                                                                                           |
|                       |   {                                                                                                                                                                                            |
|                       |     "output_value": "xe-0/0/38.0",                                                                                                                                                             |
|                       |     "description": "The name of the logical interface.",                                                                                                                                       |
|                       |     "output_key": "name"                                                                                                                                                                       |
|                       |   }                                                                                                                                                                                            |
|                       | ]                                                                                                                                                                                              |
| parameters            | {                                                                                                                                                                                              |
|                       |   "logical_port_type": "L2",                                                                                                                                                                   |
|                       |   "logical_port_vlan_id": "1025",                                                                                                                                                              |
|                       |   "OS::stack_name": "ese_logical_port_02112bb1-389c-4ff8-9354-94ab43459892",                                                                                                                   |
|                       |   "virtual_machine_interface_ids": "f68d0924-ef20-4c1b-ac45-0e6b879af5e7",                                                                                                                     |
|                       |   "device_ip": "10.161.0.34",                                                                                                                                                                  |
|                       |   "OS::stack_id": "ae16fce6-6a2d-4150-9124-b5f724501a5c",                                                                                                                                      |
|                       |   "version": "1",                                                                                                                                                                              |
|                       |   "tenant_id": "06d6b792b31c40daa546fb0f4e35980d",                                                                                                                                             |
|                       |   "logical_port_name": "xe-0/0/3.1025",                                                                                                                                                        |
|                       |   "gohan_id": "02112bb1-389c-4ff8-9354-94ab43459892",                                                                                                                                          |
|                       |   "physical_port_id": "06bfe521-07f0-4931-9f8c-318c3ad8114e"                                                                                                                                   |
|                       | }                                                                                                                                                                                              |
| parent                | None                                                                                                                                                                                           |
| stack_name            | ese_logical_port_02112bb1-389c-4ff8-9354-94ab43459892                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                          |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                                |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                            |
| stack_user_project_id | 06d6b792b31c40daa546fb0f4e35980d                                                                                                                                                               |
| template_description  | Logical port template                                                                                                                                                                          |
| timeout_mins          | 6                                                                                                                                                                                              |
| updated_time          | None                                                                                                                                                                                           |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show ese_logical_port_02112bb1-389c-4ff8-9354-94ab43459892
description: 'Logical port template

  '
heat_template_version: '2013-05-23'
outputs:
  id:
    description: A unique id for the logical interface
    value: {get_resource: logical_interface}
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [interface_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: interface_monitor}
  name:
    description: The name of the logical interface.
    value:
      get_attr: [logical_interface, name]
parameters:
  device_ip: {description: Device IP Address., label: Device IP Address, type: string}
  gohan_id: {description: UUID of the ESE Physical Port, label: Gohan resource ID,
    type: string}
  logical_port_name: {description: Name of the logical port., label: Logical Port
      Name, type: string}
  logical_port_type: {description: Type of the logical port., label: Logical Port
      Type, type: string}
  logical_port_vlan_id: {default: 0, description: VLAN id to use for logical port
      creation., label: VLAN id for Logical Port, type: number}
  physical_port_id: {description: A unique id for the Physical Interface., label: Physical
      Interface ID, type: string}
  tenant_id: {label: Tenant ID, type: string}
  version: {label: Config version, type: number}
  virtual_machine_interface_ids: {description: Virtual Machine Interface ID., label: Virtual
      Machine Interface ID, type: comma_delimited_list}
resources:
  interface_monitor:
    depends_on: logical_interface
    properties:
      field_name: logical_port
      properties:
        community_name: ESE_NODE_COMMUNITY
        device_ip: {get_param: device_ip}
        if_name: {get_param: logical_port_name}
      resource_id: {get_param: gohan_id}
      resource_type: ese_logical_ports
      syncer_properties:
        etcd:
          status: {key: logical_port}
        tsdb:
          traffic.in:
            metric: traffic.bytes
            tags:
            - direction: in
              port_id: f3867a99-de18-4512-8e94-f9aaa7b05c3a
              resource_id: {get_param: gohan_id}
          traffic.out:
            metric: traffic.bytes
            tags:
            - direction: out
              port_id: f3867a99-de18-4512-8e94-f9aaa7b05c3a
              resource_id: {get_param: gohan_id}
      tenant_id: {get_param: tenant_id}
      type: snmp_ports
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget
  logical_interface:
    properties:
      name: {get_param: logical_port_name}
      physical_interface: {get_param: physical_port_id}
      type: {get_param: logical_port_type}
      virtual_machine_interfaces: {get_param: virtual_machine_interface_ids}
      vlan: {get_param: logical_port_vlan_id}
    type: OS::Contrail::LogicalInterface

[localhost] local: gohan client port show --output-format json f3867a99-de18-4512-8e94-f9aaa7b05c3a
{
    "port": {
        "admin_state_up": true,
        "allowed_address_pairs": [],
        "attached": true,
        "binding:vif_type": "vrouter",
        "description": "",
        "device_id": "ce8831fd-d30c-41e3-95de-feaee0b95405",
        "device_owner": "network:gw_interface",
        "ese_logical_port_id": "02112bb1-389c-4ff8-9354-94ab43459892",
        "fake_delete": false,
        "fixed_ips": [
            {
                "ip_address": "172.16.101.151",
                "subnet_id": "67877f2d-0547-4cea-a6ce-2e3b937aa31b"
            },
            {
                "ip_address": "172.16.101.152",
                "subnet_id": "67877f2d-0547-4cea-a6ce-2e3b937aa31b"
            }
        ],
        "id": "f3867a99-de18-4512-8e94-f9aaa7b05c3a",
        "mac_address": "fa:16:3e:c5:2b:92",
        "managed_by_service": true,
        "name": "Port for : 887fecdd-956b-47fa-a348-8940c53a5bf9",
        "network_id": "6e557507-1c2a-49b1-ba90-5f616a1f1f3e",
        "operational_state": "UP",
        "orchestration_state": "UPDATE_COMPLETE",
        "security_groups": [],
        "segmentation_id": 1025,
        "segmentation_type": "vlan",
        "status": "ACTIVE",
        "tags": {},
        "tenant_id": "06d6b792b31c40daa546fb0f4e35980d"
    }
}

########################################################
### checking heat-stack (ports) for UPDATE_COMPLETE ####
########################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/ports/f3867a99-de18-4512-8e94-f9aaa7b05c3a
[localhost] local: heat stack-show port_f3867a99-de18-4512-8e94-f9aaa7b05c3a
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                              |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                 |
| creation_time         | 2018-04-04T05:02:24Z                                                                                                                                                               |
| description           | Virtual Machine Interface Template                                                                                                                                                 |
| disable_rollback      | True                                                                                                                                                                               |
| id                    | 9cc7e3c0-98e2-4f1f-9fb0-0ad8c7e6abb6                                                                                                                                               |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/06d6b792b31c40daa546fb0f4e35980d/stacks/port_f3867a99-de18-4512-8e94-f9aaa7b05c3a/9cc7e3c0-98e2-4f1f-9fb0-0ad8c7e6abb6 |
| notification_topics   | []                                                                                                                                                                                 |
| outputs               | [                                                                                                                                                                                  |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": "default-domain:admin:f68d0924-ef20-4c1b-ac45-0e6b879af5e7",                                                                                                   |
|                       |     "description": "Fully Qualified Name of the VMI",                                                                                                                              |
|                       |     "output_key": "fq_name"                                                                                                                                                        |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": {                                                                                                                                                              |
|                       |       "allowed_address_pair": []                                                                                                                                                   |
|                       |     },                                                                                                                                                                             |
|                       |     "description": "Virtual machine allowed address pairs.",                                                                                                                       |
|                       |     "output_key": "allowed_address_pairs"                                                                                                                                          |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": "1b86504e-571f-4d8f-a3c5-a960a747e093",                                                                                                                        |
|                       |     "description": "Monitoring Target ID",                                                                                                                                         |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                           |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": [                                                                                                                                                              |
|                       |       "fa:16:3e:f7:60:7f"                                                                                                                                                          |
|                       |     ],                                                                                                                                                                             |
|                       |     "description": "Virtual machine interface mac address.",                                                                                                                       |
|                       |     "output_key": "mac_address"                                                                                                                                                    |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": [                                                                                                                                                              |
|                       |       [                                                                                                                                                                            |
|                       |         "default-domain",                                                                                                                                                          |
|                       |         "admin",                                                                                                                                                                   |
|                       |         "b62eefe0-0872-478d-adfe-1a606320f0e7"                                                                                                                                     |
|                       |       ]                                                                                                                                                                            |
|                       |     ],                                                                                                                                                                             |
|                       |     "description": "Virtual network.",                                                                                                                                             |
|                       |     "output_key": "virtual_network"                                                                                                                                                |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": "f68d0924-ef20-4c1b-ac45-0e6b879af5e7",                                                                                                                        |
|                       |     "description": "A unique id for the virtual machine interface.",                                                                                                               |
|                       |     "output_key": "id"                                                                                                                                                             |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/1b86504e-571f-4d8f-a3c5-a960a747e093",                                               |
|                       |     "description": "Monitoring Process Link",                                                                                                                                      |
|                       |     "output_key": "monitoring_link"                                                                                                                                                |
|                       |   }                                                                                                                                                                                |
|                       | ]                                                                                                                                                                                  |
| parameters            | {                                                                                                                                                                                  |
|                       |   "virtual_machine": "ce8831fd-d30c-41e3-95de-feaee0b95405",                                                                                                                       |
|                       |   "uuid": "f3867a99-de18-4512-8e94-f9aaa7b05c3a",                                                                                                                                  |
|                       |   "OS::stack_name": "port_f3867a99-de18-4512-8e94-f9aaa7b05c3a",                                                                                                                   |
|                       |   "admin_state_up": "True",                                                                                                                                                        |
|                       |   "tenant_id": "06d6b792b31c40daa546fb0f4e35980d",                                                                                                                                 |
|                       |   "virtual_machine_interface_allowed_address_pairs": "null",                                                                                                                       |
|                       |   "virtual_machine_interface_mac_address": "fa:16:3e:c5:2b:92",                                                                                                                    |
|                       |   "OS::stack_id": "9cc7e3c0-98e2-4f1f-9fb0-0ad8c7e6abb6",                                                                                                                          |
|                       |   "device_owner": "network:gw_interface",                                                                                                                                          |
|                       |   "version": "2",                                                                                                                                                                  |
|                       |   "virtual_network": "6e557507-1c2a-49b1-ba90-5f616a1f1f3e",                                                                                                                       |
|                       |   "security_groups": "[]",                                                                                                                                                         |
|                       |   "name": "f3867a99-de18-4512-8e94-f9aaa7b05c3a"                                                                                                                                   |
|                       | }                                                                                                                                                                                  |
| parent                | None                                                                                                                                                                               |
| stack_name            | port_f3867a99-de18-4512-8e94-f9aaa7b05c3a                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                              |
| stack_status          | UPDATE_COMPLETE                                                                                                                                                                    |
| stack_status_reason   | Stack successfully updated                                                                                                                                                         |
| stack_user_project_id | 06d6b792b31c40daa546fb0f4e35980d                                                                                                                                                   |
| template_description  | Virtual Machine Interface Template                                                                                                                                                 |
| timeout_mins          | 13                                                                                                                                                                                 |
| updated_time          | 2018-04-04T05:02:36Z                                                                                                                                                               |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show port_f3867a99-de18-4512-8e94-f9aaa7b05c3a
description: 'Virtual Machine Interface Template

  '
heat_template_version: '2013-05-23'
outputs:
  allowed_address_pairs:
    description: Virtual machine allowed address pairs.
    value:
      get_attr: [virtual_machine_interface, virtual_machine_interface_allowed_address_pairs]
  fq_name:
    description: Fully Qualified Name of the VMI
    value:
      get_attr: [virtual_machine_interface, fq_name]
  id:
    description: A unique id for the virtual machine interface.
    value: {get_resource: virtual_machine_interface}
  mac_address:
    description: Virtual machine interface mac address.
    value:
      get_attr: [virtual_machine_interface, virtual_machine_interface_mac_addresses]
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [vmi_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: vmi_monitor}
  virtual_network:
    description: Virtual network.
    value:
      get_attr: [virtual_machine_interface, virtual_networks]
parameters:
  admin_state_up: {default: true, label: Admin state up, type: boolean}
  device_owner: {default: '', label: Device Owner, type: string}
  name: {description: A unique id for the Physical Interface., label: Physical Interface
      ID, type: string}
  security_groups:
    default: []
    description: The IDs of security groups applied to the port.
    label: Security Groups List
    type: json
  tenant_id: {label: Tenant ID, type: string}
  uuid: {description: A unique id for the Virtual Machine Interface., label: Backend
      Virtual Machine Interface UUID, type: string}
  version: {label: Config version, type: number}
  virtual_machine: {default: '', label: Virtual Machine., type: string}
  virtual_machine_interface_allowed_address_pairs: {label: Virtual machine interface
      allowed address pairs., type: json}
  virtual_machine_interface_mac_address: {default: 'fe:ff:ff:ff:ff:ff', label: Virtual
      machine interface mac address., type: string}
  virtual_network: {label: Virtual Network., type: string}
resources:
  instance_ip_0:
    properties:
      ip_address: 172.16.101.151
      name:
        str_replace:
          params:
            '%ip%': 172.16.101.151
            '%name%': {get_param: name}
            '%zone%': 67877f2d-0547-4cea-a6ce-2e3b937aa31b
          template: '%name%_%zone%_%ip%'
      network_id: {get_param: virtual_network}
      subnet_id: 4cc11376-ba13-4cc8-b7a6-f886f4a031d1
      virtual_machine_interfaces:
      - {get_resource: virtual_machine_interface}
    type: OS::Contrail::InstanceIp
  instance_ip_1:
    properties:
      ip_address: 172.16.101.152
      name:
        str_replace:
          params:
            '%ip%': 172.16.101.152
            '%name%': {get_param: name}
            '%zone%': 67877f2d-0547-4cea-a6ce-2e3b937aa31b
          template: '%name%_%zone%_%ip%'
      network_id: {get_param: virtual_network}
      subnet_id: 4cc11376-ba13-4cc8-b7a6-f886f4a031d1
      virtual_machine_interfaces:
      - {get_resource: virtual_machine_interface}
    type: OS::Contrail::InstanceIp
  virtual_machine_interface:
    properties:
      admin_state_up: {get_param: admin_state_up}
      device_owner: {get_param: device_owner}
      name: {get_param: name}
      security_groups: {get_param: security_groups}
      uuid: {get_param: uuid}
      virtual_machine: {get_param: virtual_machine}
      virtual_machine_interface_allowed_address_pairs: {get_param: virtual_machine_interface_allowed_address_pairs}
      virtual_machine_interface_mac_addresses:
      - {get_param: virtual_machine_interface_mac_address}
      virtual_networks:
      - {get_param: virtual_network}
    type: OS::Contrail::VirtualMachineInterface
  vmi_monitor:
    depends_on: virtual_machine_interface
    properties:
      field_name: vmi
      properties:
        fq_name:
          get_attr: [virtual_machine_interface, fq_name]
      resource_id: {get_param: uuid}
      resource_type: ports
      syncer_properties:
        etcd:
          status: {key: vmi}
        tsdb:
          traffic.in:
            metric: traffic.contrail_bytes
            tags:
              direction: in
              resource_id: {get_param: uuid}
          traffic.out:
            metric: traffic.contrail_bytes
            tags:
              direction: out
              resource_id: {get_param: uuid}
      tenant_id: {get_param: tenant_id}
      type: virtual_machine_interface
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget

[localhost] local: gohan client ese_logical_port show --output-format json aabc9b64-ec2c-4894-a6a8-ee0ea429c066
{
    "ese_logical_port": {
        "common_function_gateway_id": null,
        "connected_resource": "gw_interface",
        "description": "ESE Logical port for Port ce965922-538a-4335-9644-7a98dce9fb47",
        "ese_physical_port_id": "6b29894f-8694-4865-92c1-2e78360e65a6",
        "gw_interface_id": "ce8831fd-d30c-41e3-95de-feaee0b95405",
        "id": "aabc9b64-ec2c-4894-a6a8-ee0ea429c066",
        "name": "xe-0/0/4.1025",
        "network_id": "6e557507-1c2a-49b1-ba90-5f616a1f1f3e",
        "operational_state": "UP",
        "orchestration_state": "CREATE_COMPLETE",
        "port_ids": [
            "ce965922-538a-4335-9644-7a98dce9fb47"
        ],
        "status": "ACTIVE",
        "tags": {},
        "tenant_id": "06d6b792b31c40daa546fb0f4e35980d",
        "type": "L2",
        "vlan_id": 1025
    }
}

################################################
### checking heat-stack (ese_logical_ports) ####
################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/ese_logical_ports/aabc9b64-ec2c-4894-a6a8-ee0ea429c066
[localhost] local: heat stack-show ese_logical_port_aabc9b64-ec2c-4894-a6a8-ee0ea429c066
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                          |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                             |
| creation_time         | 2018-04-04T05:02:29Z                                                                                                                                                                           |
| description           | Logical port template                                                                                                                                                                          |
| disable_rollback      | True                                                                                                                                                                                           |
| id                    | f9724c37-8a23-4de7-8ba7-dfec14787e72                                                                                                                                                           |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/06d6b792b31c40daa546fb0f4e35980d/stacks/ese_logical_port_aabc9b64-ec2c-4894-a6a8-ee0ea429c066/f9724c37-8a23-4de7-8ba7-dfec14787e72 |
| notification_topics   | []                                                                                                                                                                                             |
| outputs               | [                                                                                                                                                                                              |
|                       |   {                                                                                                                                                                                            |
|                       |     "output_value": "81ea42e1-779e-4c1e-8f19-82d6019ee14c",                                                                                                                                    |
|                       |     "description": "Monitoring Target ID",                                                                                                                                                     |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                                       |
|                       |   },                                                                                                                                                                                           |
|                       |   {                                                                                                                                                                                            |
|                       |     "output_value": "46b0cd68-d0fb-4d72-9def-830164f9e215",                                                                                                                                    |
|                       |     "description": "A unique id for the logical interface",                                                                                                                                    |
|                       |     "output_key": "id"                                                                                                                                                                         |
|                       |   },                                                                                                                                                                                           |
|                       |   {                                                                                                                                                                                            |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/81ea42e1-779e-4c1e-8f19-82d6019ee14c",                                                           |
|                       |     "description": "Monitoring Process Link",                                                                                                                                                  |
|                       |     "output_key": "monitoring_link"                                                                                                                                                            |
|                       |   },                                                                                                                                                                                           |
|                       |   {                                                                                                                                                                                            |
|                       |     "output_value": "xe-0/0/38.0",                                                                                                                                                             |
|                       |     "description": "The name of the logical interface.",                                                                                                                                       |
|                       |     "output_key": "name"                                                                                                                                                                       |
|                       |   }                                                                                                                                                                                            |
|                       | ]                                                                                                                                                                                              |
| parameters            | {                                                                                                                                                                                              |
|                       |   "logical_port_type": "L2",                                                                                                                                                                   |
|                       |   "logical_port_vlan_id": "1025",                                                                                                                                                              |
|                       |   "OS::stack_name": "ese_logical_port_aabc9b64-ec2c-4894-a6a8-ee0ea429c066",                                                                                                                   |
|                       |   "virtual_machine_interface_ids": "f68d0924-ef20-4c1b-ac45-0e6b879af5e7",                                                                                                                     |
|                       |   "device_ip": "10.161.0.34",                                                                                                                                                                  |
|                       |   "OS::stack_id": "f9724c37-8a23-4de7-8ba7-dfec14787e72",                                                                                                                                      |
|                       |   "version": "1",                                                                                                                                                                              |
|                       |   "tenant_id": "06d6b792b31c40daa546fb0f4e35980d",                                                                                                                                             |
|                       |   "logical_port_name": "xe-0/0/4.1025",                                                                                                                                                        |
|                       |   "gohan_id": "aabc9b64-ec2c-4894-a6a8-ee0ea429c066",                                                                                                                                          |
|                       |   "physical_port_id": "06bfe521-07f0-4931-9f8c-318c3ad8114e"                                                                                                                                   |
|                       | }                                                                                                                                                                                              |
| parent                | None                                                                                                                                                                                           |
| stack_name            | ese_logical_port_aabc9b64-ec2c-4894-a6a8-ee0ea429c066                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                          |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                                |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                            |
| stack_user_project_id | 06d6b792b31c40daa546fb0f4e35980d                                                                                                                                                               |
| template_description  | Logical port template                                                                                                                                                                          |
| timeout_mins          | 6                                                                                                                                                                                              |
| updated_time          | None                                                                                                                                                                                           |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show ese_logical_port_aabc9b64-ec2c-4894-a6a8-ee0ea429c066
description: 'Logical port template

  '
heat_template_version: '2013-05-23'
outputs:
  id:
    description: A unique id for the logical interface
    value: {get_resource: logical_interface}
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [interface_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: interface_monitor}
  name:
    description: The name of the logical interface.
    value:
      get_attr: [logical_interface, name]
parameters:
  device_ip: {description: Device IP Address., label: Device IP Address, type: string}
  gohan_id: {description: UUID of the ESE Physical Port, label: Gohan resource ID,
    type: string}
  logical_port_name: {description: Name of the logical port., label: Logical Port
      Name, type: string}
  logical_port_type: {description: Type of the logical port., label: Logical Port
      Type, type: string}
  logical_port_vlan_id: {default: 0, description: VLAN id to use for logical port
      creation., label: VLAN id for Logical Port, type: number}
  physical_port_id: {description: A unique id for the Physical Interface., label: Physical
      Interface ID, type: string}
  tenant_id: {label: Tenant ID, type: string}
  version: {label: Config version, type: number}
  virtual_machine_interface_ids: {description: Virtual Machine Interface ID., label: Virtual
      Machine Interface ID, type: comma_delimited_list}
resources:
  interface_monitor:
    depends_on: logical_interface
    properties:
      field_name: logical_port
      properties:
        community_name: ESE_NODE_COMMUNITY
        device_ip: {get_param: device_ip}
        if_name: {get_param: logical_port_name}
      resource_id: {get_param: gohan_id}
      resource_type: ese_logical_ports
      syncer_properties:
        etcd:
          status: {key: logical_port}
        tsdb:
          traffic.in:
            metric: traffic.bytes
            tags:
            - direction: in
              port_id: ce965922-538a-4335-9644-7a98dce9fb47
              resource_id: {get_param: gohan_id}
          traffic.out:
            metric: traffic.bytes
            tags:
            - direction: out
              port_id: ce965922-538a-4335-9644-7a98dce9fb47
              resource_id: {get_param: gohan_id}
      tenant_id: {get_param: tenant_id}
      type: snmp_ports
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget
  logical_interface:
    properties:
      name: {get_param: logical_port_name}
      physical_interface: {get_param: physical_port_id}
      type: {get_param: logical_port_type}
      virtual_machine_interfaces: {get_param: virtual_machine_interface_ids}
      vlan: {get_param: logical_port_vlan_id}
    type: OS::Contrail::LogicalInterface

[localhost] local: gohan client port show --output-format json ce965922-538a-4335-9644-7a98dce9fb47
{
    "port": {
        "admin_state_up": true,
        "allowed_address_pairs": [],
        "attached": true,
        "binding:vif_type": "vrouter",
        "description": "",
        "device_id": "ce8831fd-d30c-41e3-95de-feaee0b95405",
        "device_owner": "network:gw_interface",
        "ese_logical_port_id": "aabc9b64-ec2c-4894-a6a8-ee0ea429c066",
        "fake_delete": false,
        "fixed_ips": [
            {
                "ip_address": "172.16.101.153",
                "subnet_id": "67877f2d-0547-4cea-a6ce-2e3b937aa31b"
            }
        ],
        "id": "ce965922-538a-4335-9644-7a98dce9fb47",
        "mac_address": "fa:16:3e:41:7c:23",
        "managed_by_service": true,
        "name": "Port for : 6b29894f-8694-4865-92c1-2e78360e65a6",
        "network_id": "6e557507-1c2a-49b1-ba90-5f616a1f1f3e",
        "operational_state": "FAIL",
        "orchestration_state": "UPDATE_COMPLETE",
        "security_groups": [],
        "segmentation_id": 1025,
        "segmentation_type": "vlan",
        "status": "MONITORING_UNAVAILABLE",
        "tags": {},
        "tenant_id": "06d6b792b31c40daa546fb0f4e35980d"
    }
}

########################################################
### checking heat-stack (ports) for UPDATE_COMPLETE ####
########################################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/ports/ce965922-538a-4335-9644-7a98dce9fb47
[localhost] local: heat stack-show port_ce965922-538a-4335-9644-7a98dce9fb47
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                              |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                 |
| creation_time         | 2018-04-04T05:02:24Z                                                                                                                                                               |
| description           | Virtual Machine Interface Template                                                                                                                                                 |
| disable_rollback      | True                                                                                                                                                                               |
| id                    | b58a09c0-f7ba-44d4-9ca9-5ec253107cd0                                                                                                                                               |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/06d6b792b31c40daa546fb0f4e35980d/stacks/port_ce965922-538a-4335-9644-7a98dce9fb47/b58a09c0-f7ba-44d4-9ca9-5ec253107cd0 |
| notification_topics   | []                                                                                                                                                                                 |
| outputs               | [                                                                                                                                                                                  |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": "default-domain:admin:f68d0924-ef20-4c1b-ac45-0e6b879af5e7",                                                                                                   |
|                       |     "description": "Fully Qualified Name of the VMI",                                                                                                                              |
|                       |     "output_key": "fq_name"                                                                                                                                                        |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": {                                                                                                                                                              |
|                       |       "allowed_address_pair": []                                                                                                                                                   |
|                       |     },                                                                                                                                                                             |
|                       |     "description": "Virtual machine allowed address pairs.",                                                                                                                       |
|                       |     "output_key": "allowed_address_pairs"                                                                                                                                          |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": "1650b87a-0a56-4ef0-a411-42a4c6efc185",                                                                                                                        |
|                       |     "description": "Monitoring Target ID",                                                                                                                                         |
|                       |     "output_key": "monitoring_target_id"                                                                                                                                           |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": [                                                                                                                                                              |
|                       |       "fa:16:3e:f7:60:7f"                                                                                                                                                          |
|                       |     ],                                                                                                                                                                             |
|                       |     "description": "Virtual machine interface mac address.",                                                                                                                       |
|                       |     "output_key": "mac_address"                                                                                                                                                    |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": [                                                                                                                                                              |
|                       |       [                                                                                                                                                                            |
|                       |         "default-domain",                                                                                                                                                          |
|                       |         "admin",                                                                                                                                                                   |
|                       |         "b62eefe0-0872-478d-adfe-1a606320f0e7"                                                                                                                                     |
|                       |       ]                                                                                                                                                                            |
|                       |     ],                                                                                                                                                                             |
|                       |     "description": "Virtual network.",                                                                                                                                             |
|                       |     "output_key": "virtual_network"                                                                                                                                                |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": "f68d0924-ef20-4c1b-ac45-0e6b879af5e7",                                                                                                                        |
|                       |     "description": "A unique id for the virtual machine interface.",                                                                                                               |
|                       |     "output_key": "id"                                                                                                                                                             |
|                       |   },                                                                                                                                                                               |
|                       |   {                                                                                                                                                                                |
|                       |     "output_value": "http://collector-agents-se.monitoringrefactordocker_default:7070/targets/1650b87a-0a56-4ef0-a411-42a4c6efc185",                                               |
|                       |     "description": "Monitoring Process Link",                                                                                                                                      |
|                       |     "output_key": "monitoring_link"                                                                                                                                                |
|                       |   }                                                                                                                                                                                |
|                       | ]                                                                                                                                                                                  |
| parameters            | {                                                                                                                                                                                  |
|                       |   "virtual_machine": "ce8831fd-d30c-41e3-95de-feaee0b95405",                                                                                                                       |
|                       |   "uuid": "ce965922-538a-4335-9644-7a98dce9fb47",                                                                                                                                  |
|                       |   "OS::stack_name": "port_ce965922-538a-4335-9644-7a98dce9fb47",                                                                                                                   |
|                       |   "admin_state_up": "True",                                                                                                                                                        |
|                       |   "tenant_id": "06d6b792b31c40daa546fb0f4e35980d",                                                                                                                                 |
|                       |   "virtual_machine_interface_allowed_address_pairs": "null",                                                                                                                       |
|                       |   "virtual_machine_interface_mac_address": "fa:16:3e:41:7c:23",                                                                                                                    |
|                       |   "OS::stack_id": "b58a09c0-f7ba-44d4-9ca9-5ec253107cd0",                                                                                                                          |
|                       |   "device_owner": "network:gw_interface",                                                                                                                                          |
|                       |   "version": "2",                                                                                                                                                                  |
|                       |   "virtual_network": "6e557507-1c2a-49b1-ba90-5f616a1f1f3e",                                                                                                                       |
|                       |   "security_groups": "[]",                                                                                                                                                         |
|                       |   "name": "ce965922-538a-4335-9644-7a98dce9fb47"                                                                                                                                   |
|                       | }                                                                                                                                                                                  |
| parent                | None                                                                                                                                                                               |
| stack_name            | port_ce965922-538a-4335-9644-7a98dce9fb47                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                              |
| stack_status          | UPDATE_COMPLETE                                                                                                                                                                    |
| stack_status_reason   | Stack successfully updated                                                                                                                                                         |
| stack_user_project_id | 06d6b792b31c40daa546fb0f4e35980d                                                                                                                                                   |
| template_description  | Virtual Machine Interface Template                                                                                                                                                 |
| timeout_mins          | 13                                                                                                                                                                                 |
| updated_time          | 2018-04-04T05:02:35Z                                                                                                                                                               |
+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show port_ce965922-538a-4335-9644-7a98dce9fb47
description: 'Virtual Machine Interface Template

  '
heat_template_version: '2013-05-23'
outputs:
  allowed_address_pairs:
    description: Virtual machine allowed address pairs.
    value:
      get_attr: [virtual_machine_interface, virtual_machine_interface_allowed_address_pairs]
  fq_name:
    description: Fully Qualified Name of the VMI
    value:
      get_attr: [virtual_machine_interface, fq_name]
  id:
    description: A unique id for the virtual machine interface.
    value: {get_resource: virtual_machine_interface}
  mac_address:
    description: Virtual machine interface mac address.
    value:
      get_attr: [virtual_machine_interface, virtual_machine_interface_mac_addresses]
  monitoring_link:
    description: Monitoring Process Link
    value:
      get_attr: [vmi_monitor, link]
  monitoring_target_id:
    description: Monitoring Target ID
    value: {get_resource: vmi_monitor}
  virtual_network:
    description: Virtual network.
    value:
      get_attr: [virtual_machine_interface, virtual_networks]
parameters:
  admin_state_up: {default: true, label: Admin state up, type: boolean}
  device_owner: {default: '', label: Device Owner, type: string}
  name: {description: A unique id for the Physical Interface., label: Physical Interface
      ID, type: string}
  security_groups:
    default: []
    description: The IDs of security groups applied to the port.
    label: Security Groups List
    type: json
  tenant_id: {label: Tenant ID, type: string}
  uuid: {description: A unique id for the Virtual Machine Interface., label: Backend
      Virtual Machine Interface UUID, type: string}
  version: {label: Config version, type: number}
  virtual_machine: {default: '', label: Virtual Machine., type: string}
  virtual_machine_interface_allowed_address_pairs: {label: Virtual machine interface
      allowed address pairs., type: json}
  virtual_machine_interface_mac_address: {default: 'fe:ff:ff:ff:ff:ff', label: Virtual
      machine interface mac address., type: string}
  virtual_network: {label: Virtual Network., type: string}
resources:
  instance_ip_0:
    properties:
      ip_address: 172.16.101.153
      name:
        str_replace:
          params:
            '%ip%': 172.16.101.153
            '%name%': {get_param: name}
            '%zone%': 67877f2d-0547-4cea-a6ce-2e3b937aa31b
          template: '%name%_%zone%_%ip%'
      network_id: {get_param: virtual_network}
      subnet_id: 4cc11376-ba13-4cc8-b7a6-f886f4a031d1
      virtual_machine_interfaces:
      - {get_resource: virtual_machine_interface}
    type: OS::Contrail::InstanceIp
  virtual_machine_interface:
    properties:
      admin_state_up: {get_param: admin_state_up}
      device_owner: {get_param: device_owner}
      name: {get_param: name}
      security_groups: {get_param: security_groups}
      uuid: {get_param: uuid}
      virtual_machine: {get_param: virtual_machine}
      virtual_machine_interface_allowed_address_pairs: {get_param: virtual_machine_interface_allowed_address_pairs}
      virtual_machine_interface_mac_addresses:
      - {get_param: virtual_machine_interface_mac_address}
      virtual_networks:
      - {get_param: virtual_network}
    type: OS::Contrail::VirtualMachineInterface
  vmi_monitor:
    depends_on: virtual_machine_interface
    properties:
      field_name: vmi
      properties:
        fq_name:
          get_attr: [virtual_machine_interface, fq_name]
      resource_id: {get_param: uuid}
      resource_type: ports
      syncer_properties:
        etcd:
          status: {key: vmi}
        tsdb:
          traffic.in:
            metric: traffic.contrail_bytes
            tags:
              direction: in
              resource_id: {get_param: uuid}
          traffic.out:
            metric: traffic.contrail_bytes
            tags:
              direction: out
              resource_id: {get_param: uuid}
      tenant_id: {get_param: tenant_id}
      type: virtual_machine_interface
      version: {get_param: version}
    type: ESI::Monitoring::MonitoringTarget

[localhost] local: gohan client resource_mapping list --output-format json
Command not found

[localhost] local: gohan client billing_resource list --output-format json
{
    "billing_resources": [
        {
            "config_version": 1,
            "ended": null,
            "id": "5a97fcc0-7d6f-4acd-bb87-75697ae19f94",
            "info": {
                "internet_service": "sample-internet-service"
            },
            "parent_billing_id": null,
            "resource_id": "f6e8c695-c4c1-4a93-9b7e-1663aee6dec9",
            "resource_type": "internet_gateway",
            "started": 1.522818049e+09,
            "tenant_id": "06d6b792b31c40daa546fb0f4e35980d",
            "unique_resource_id": "f6e8c695-c4c1-4a93-9b7e-1663aee6dec9"
        },
        {
            "config_version": 1,
            "ended": null,
            "id": "6a72cbe8-17c7-444e-a9c8-685b4d47ff97",
            "info": {
                "cidr": "203.0.112.0",
                "submask_length": 28
            },
            "parent_billing_id": null,
            "resource_id": "d5622781-f06a-4fad-b800-b577a05ad8b2",
            "resource_type": "public_ip",
            "started": 1.522818073e+09,
            "tenant_id": "06d6b792b31c40daa546fb0f4e35980d",
            "unique_resource_id": "d5622781-f06a-4fad-b800-b577a05ad8b2"
        },
        {
            "config_version": 1,
            "ended": null,
            "id": "d20cde36-cd9c-4a8a-a10c-e62fe4f087e4",
            "info": {
                "bandwidth": "10",
                "qos_type": "guarantee"
            },
            "parent_billing_id": "5a97fcc0-7d6f-4acd-bb87-75697ae19f94",
            "resource_id": "0e6b35d9-d74d-4d3a-922a-d79b9df9b78c",
            "resource_type": "qos_option",
            "started": 1.522818049e+09,
            "tenant_id": "06d6b792b31c40daa546fb0f4e35980d",
            "unique_resource_id": null
        },
        {
            "config_version": 1,
            "ended": null,
            "id": "fc6dc454-4214-4573-9fbd-e2b5311a7d57",
            "info": {},
            "parent_billing_id": null,
            "resource_id": "6e557507-1c2a-49b1-ba90-5f616a1f1f3e",
            "resource_type": "network",
            "started": 1.52281809e+09,
            "tenant_id": "06d6b792b31c40daa546fb0f4e35980d",
            "unique_resource_id": "6e557507-1c2a-49b1-ba90-5f616a1f1f3e"
        }
    ]
}

### Create Static Route ###
name:[sample-static-route], id:[d0aa20b1-9302-4b43-a3c1-9edce0811af8]
--------------------------------------------------------------------------------
http_request     http_response    response_time   method   code   status
--------------------------------------------------------------------------------
05:04:07.477678  05:04:07.648036  0.170358        POST     201    PENDING_CREATE
05:04:07.649797  05:04:07.734895  0.085098         GET     200    PENDING_CREATE
05:04:08.736119  05:04:08.827932  0.091813         GET     200    PENDING_CREATE
05:04:09.828528  05:04:09.903934  0.075406         GET     200    PENDING_CREATE
05:04:10.904619  05:04:10.980165  0.075546         GET     200    PENDING_CREATE
05:04:11.981724  05:04:12.055316  0.073592         GET     200    PENDING_CREATE
05:04:13.056637  05:04:13.129269  0.072632         GET     200    PENDING_CREATE
05:04:14.130624  05:04:14.201454  0.070830         GET     200    PENDING_CREATE
05:04:15.203335  05:04:15.273468  0.070133         GET     200    PENDING_CREATE
05:04:16.274973  05:04:16.351511  0.076538         GET     200    PENDING_CREATE
05:04:17.352858  05:04:17.427095  0.074237         GET     200    PENDING_CREATE
05:04:18.428481  05:04:18.502838  0.074357         GET     200    PENDING_CREATE
05:04:19.503853  05:04:19.573158  0.069305         GET     200    PENDING_CREATE
05:04:20.574127  05:04:20.645553  0.071426         GET     200    PENDING_CREATE
05:04:21.646818  05:04:21.716133  0.069315         GET     200    PENDING_CREATE
05:04:22.717397  05:04:22.803876  0.086479         GET     200    PENDING_CREATE
05:04:23.804529  05:04:23.873354  0.068825         GET     200    PENDING_CREATE
05:04:24.874595  05:04:24.943856  0.069261         GET     200    PENDING_CREATE
05:04:25.944556  05:04:26.015141  0.070585         GET     200    ACTIVE
--------------------------------------------------------------------------------
Turn Around Time : 18.537463

[localhost] local: gohan client static_route show --output-format json d0aa20b1-9302-4b43-a3c1-9edce0811af8
{
    "static_route": {
        "aws_gw_id": null,
        "azure_gw_id": null,
        "description": "Sample Static-route",
        "destination": "203.0.112.0/28",
        "gcp_gw_id": null,
        "id": "d0aa20b1-9302-4b43-a3c1-9edce0811af8",
        "interdc_gw_id": null,
        "internet_gw_id": "f6e8c695-c4c1-4a93-9b7e-1663aee6dec9",
        "name": "sample-static-route",
        "nexthop": "172.16.101.1",
        "orchestration_state": "CREATE_COMPLETE",
        "public_ip_id": "d5622781-f06a-4fad-b800-b577a05ad8b2",
        "service_type": "internet",
        "status": "ACTIVE",
        "tenant_id": "06d6b792b31c40daa546fb0f4e35980d",
        "vpn_gw_id": null
    }
}

############################################
### checking heat-stack (static_routes) ####
############################################
[localhost] local: etcdctl -o "json" --peers "http://etcd-server:2379" get /esi-worker/heat_stacks/v2.0/static_routes/d0aa20b1-9302-4b43-a3c1-9edce0811af8
[localhost] local: heat stack-show static_route_d0aa20b1-9302-4b43-a3c1-9edce0811af8
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Property              | Value                                                                                                                                                                                      |
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| capabilities          | []                                                                                                                                                                                         |
| creation_time         | 2018-04-04T05:04:08Z                                                                                                                                                                       |
| description           | Internet Gateway Static Route                                                                                                                                                              |
| disable_rollback      | True                                                                                                                                                                                       |
| id                    | 23ab509a-cba3-49eb-b11f-ce88e6d262a6                                                                                                                                                       |
| links                 | http://heat-server.monitoringrefactordocker_default:8004/v1/06d6b792b31c40daa546fb0f4e35980d/stacks/static_route_d0aa20b1-9302-4b43-a3c1-9edce0811af8/23ab509a-cba3-49eb-b11f-ce88e6d262a6 |
| notification_topics   | []                                                                                                                                                                                         |
| outputs               | []                                                                                                                                                                                         |
| parameters            | {                                                                                                                                                                                          |
|                       |   "primary_device_ip": "10.79.5.185",                                                                                                                                                      |
|                       |   "OS::stack_id": "23ab509a-cba3-49eb-b11f-ce88e6d262a6",                                                                                                                                  |
|                       |   "OS::stack_name": "static_route_d0aa20b1-9302-4b43-a3c1-9edce0811af8",                                                                                                                   |
|                       |   "route": "203.0.112.0/28",                                                                                                                                                               |
|                       |   "secondary_device_port": "830",                                                                                                                                                          |
|                       |   "secondary_device_password": "******",                                                                                                                                                   |
|                       |   "primary_device_password": "******",                                                                                                                                                     |
|                       |   "next_hop": "172.16.101.1",                                                                                                                                                              |
|                       |   "vrf_name": "vrf_gw_sample-ha-router-downlink_1025",                                                                                                                                     |
|                       |   "primary_device_username": "esi",                                                                                                                                                        |
|                       |   "primary_device_port": "830",                                                                                                                                                            |
|                       |   "secondary_device_ip": "10.79.5.184",                                                                                                                                                    |
|                       |   "secondary_device_username": "esi"                                                                                                                                                       |
|                       | }                                                                                                                                                                                          |
| parent                | None                                                                                                                                                                                       |
| stack_name            | static_route_d0aa20b1-9302-4b43-a3c1-9edce0811af8                                                                                                                                          |
| stack_owner           | admin                                                                                                                                                                                      |
| stack_status          | CREATE_COMPLETE                                                                                                                                                                            |
| stack_status_reason   | Stack CREATE completed successfully                                                                                                                                                        |
| stack_user_project_id | 06d6b792b31c40daa546fb0f4e35980d                                                                                                                                                           |
| template_description  | Internet Gateway Static Route                                                                                                                                                              |
| timeout_mins          | 60                                                                                                                                                                                         |
| updated_time          | None                                                                                                                                                                                       |
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

[localhost] local: heat template-show static_route_d0aa20b1-9302-4b43-a3c1-9edce0811af8
description: 'Internet Gateway Static Route

  '
heat_template_version: '2013-05-23'
parameters:
  next_hop: {description: Next hop for the static route, label: Next hop, type: string}
  primary_device_ip: {description: Ip address that will be used to establish ssh connection
      to the Primary Device., label: Ip address of the device., type: string}
  primary_device_password: {description: Password of the user which will be used to
      log onto the Primary Device., hidden: true, label: Users password., type: string}
  primary_device_port: {description: Port that will be used to establish ssh connection
      to the Primary Device., label: Port of the ssh connection., type: number}
  primary_device_username: {description: Name of the user which will be used to log
      onto the Primary Device., label: User name to log on to device., type: string}
  route: {description: Static Route definition, label: Route, type: string}
  secondary_device_ip: {description: Ip address that will be used to establish ssh
      connection to the Secondary Device., label: Ip address of the device., type: string}
  secondary_device_password: {description: Password of the user which will be used
      to log onto the Secondary Device., hidden: true, label: Users password., type: string}
  secondary_device_port: {description: Port that will be used to establish ssh connection
      to the Secondary Device., label: Port of the ssh connection., type: number}
  secondary_device_username: {description: Name of the user which will be used to
      log onto the Secondary Device., label: User name to log on to device., type: string}
  vrf_name: {description: Name of VRF to add this static route, label: VRF, type: string}
resources:
  netconf_configure_primary:
    properties:
      configs:
      - config:
          str_replace:
            params:
              $NEXT_HOP: {get_param: next_hop}
            template: 'next-hop $NEXT_HOP;

              '
        path:
        - {config_type: tag, tag: routing-instances, xml_type: tag}
        - config_type: name
          name: {get_param: vrf_name}
          tag: instance
          xml_type: named_tag
        - {config_type: tag, tag: routing-options, xml_type: tag}
        - {config_type: tag, tag: static, xml_type: tag}
        - config_type: named_tag
          name: {get_param: route}
          tag: route
          xml_type: named_tag
      device_ip: {get_param: primary_device_ip}
      lock_timeout: 3000
      password: {get_param: primary_device_password}
      port: {get_param: primary_device_port}
      username: {get_param: primary_device_username}
    type: OS::Contrail::NetconfNamedConfigs
  netconf_configure_secondary:
    depends_on: netconf_configure_primary
    properties:
      configs:
      - config:
          str_replace:
            params:
              $NEXT_HOP: {get_param: next_hop}
            template: 'next-hop $NEXT_HOP;

              '
        path:
        - {config_type: tag, tag: routing-instances, xml_type: tag}
        - config_type: name
          name: {get_param: vrf_name}
          tag: instance
          xml_type: named_tag
        - {config_type: tag, tag: routing-options, xml_type: tag}
        - {config_type: tag, tag: static, xml_type: tag}
        - config_type: named_tag
          name: {get_param: route}
          tag: route
          xml_type: named_tag
      device_ip: {get_param: secondary_device_ip}
      lock_timeout: 3000
      password: {get_param: secondary_device_password}
      port: {get_param: secondary_device_port}
      username: {get_param: secondary_device_username}
    type: OS::Contrail::NetconfNamedConfigs

root@client:/tools/rest-api-for-esi# 
root@client:/tools/rest-api-for-esi# 
root@client:/tools/rest-api-for-esi# 
root@client:/tools/rest-api-for-esi# 
root@client:/tools/rest-api-for-esi# heat stack-list
+--------------------------------------+------------------------------------------------------------+-----------------+----------------------+
| id                                   | stack_name                                                 | stack_status    | creation_time        |
+--------------------------------------+------------------------------------------------------------+-----------------+----------------------+
| 0425b942-24c5-44ad-aa4e-1497b4561282 | ese_device_3fb53223-b614-46b6-92e8-25c3bcbed214            | CREATE_COMPLETE | 2018-04-04T04:52:27Z |
| 8d93fc7d-322a-45ae-a2c6-702204b00b19 | ese_physical_port_887fecdd-956b-47fa-a348-8940c53a5bf9     | CREATE_COMPLETE | 2018-04-04T04:53:38Z |
| ab9cc949-a71e-4ed4-bc75-0b4b847edec2 | ese_physical_port_6b29894f-8694-4865-92c1-2e78360e65a6     | CREATE_COMPLETE | 2018-04-04T04:54:43Z |
| 21d3a7cd-246e-4dfc-9922-795d8dbaf969 | edge_router_cbe0fe23-8461-4a71-a7cc-a3a1d8c1fd78           | CREATE_COMPLETE | 2018-04-04T04:55:44Z |
| 326adad0-04d6-4332-90fd-617990b9edf0 | edge_router_ca43aedb-bc30-4355-a931-7bb1d9040659           | CREATE_COMPLETE | 2018-04-04T04:56:48Z |
| e0413e79-cb55-484a-822d-f360397a320d | er_physical_interface_53712736-354c-4374-be82-6f07bea9d1bd | CREATE_COMPLETE | 2018-04-04T04:57:55Z |
| 064f7e2d-23d1-40db-b23b-b37780d04980 | er_physical_interface_d108a472-81ab-43a0-8c49-e0d1a46e6128 | CREATE_COMPLETE | 2018-04-04T04:59:00Z |
| cc36f14a-4224-4cd7-bf49-c8014783a399 | internet_gateway_f6e8c695-c4c1-4a93-9b7e-1663aee6dec9      | CREATE_COMPLETE | 2018-04-04T05:00:29Z |
| 96d6707c-565e-4175-9690-40dfd081cf0e | public_ip_d5622781-f06a-4fad-b800-b577a05ad8b2             | CREATE_COMPLETE | 2018-04-04T05:01:04Z |
| 388cc672-0672-49f2-aeed-a7cd9764860a | network_6e557507-1c2a-49b1-ba90-5f616a1f1f3e               | CREATE_COMPLETE | 2018-04-04T05:01:28Z |
| 91e83bc9-05fd-4ff8-ab4a-de3af107c6cc | subnet_67877f2d-0547-4cea-a6ce-2e3b937aa31b                | CREATE_COMPLETE | 2018-04-04T05:01:45Z |
| 705f6aad-011f-4af8-800f-fc4f5417d052 | gw_interface_ce8831fd-d30c-41e3-95de-feaee0b95405          | CREATE_COMPLETE | 2018-04-04T05:02:04Z |
| 9cc7e3c0-98e2-4f1f-9fb0-0ad8c7e6abb6 | port_f3867a99-de18-4512-8e94-f9aaa7b05c3a                  | UPDATE_COMPLETE | 2018-04-04T05:02:24Z |
| b58a09c0-f7ba-44d4-9ca9-5ec253107cd0 | port_ce965922-538a-4335-9644-7a98dce9fb47                  | UPDATE_COMPLETE | 2018-04-04T05:02:24Z |
| f9724c37-8a23-4de7-8ba7-dfec14787e72 | ese_logical_port_aabc9b64-ec2c-4894-a6a8-ee0ea429c066      | CREATE_COMPLETE | 2018-04-04T05:02:29Z |
| ae16fce6-6a2d-4150-9124-b5f724501a5c | ese_logical_port_02112bb1-389c-4ff8-9354-94ab43459892      | CREATE_COMPLETE | 2018-04-04T05:02:30Z |
| 23ab509a-cba3-49eb-b11f-ce88e6d262a6 | static_route_d0aa20b1-9302-4b43-a3c1-9edce0811af8          | CREATE_COMPLETE | 2018-04-04T05:04:08Z |
+--------------------------------------+------------------------------------------------------------+-----------------+----------------------+
root@client:/tools/rest-api-for-esi# 
root@client:/tools/rest-api-for-esi# 
root@client:/tools/rest-api-for-esi# 
root@client:/tools/rest-api-for-esi# neutron port-list
+--------------------------------------+-------------------------------------------------+-------------------+---------------------------------------------------------------------------------------+
| id                                   | name                                            | mac_address       | fixed_ips                                                                             |
+--------------------------------------+-------------------------------------------------+-------------------+---------------------------------------------------------------------------------------+
| 9dc6550a-f4a0-4be0-9e52-f780501926a8 | dhcp-server-port                                | 00:00:5e:00:01:00 | {"subnet_id": "67877f2d-0547-4cea-a6ce-2e3b937aa31b", "ip_address": "172.16.101.2"}   |
| ce965922-538a-4335-9644-7a98dce9fb47 | Port for : 6b29894f-8694-4865-92c1-2e78360e65a6 | fa:16:3e:41:7c:23 | {"subnet_id": "67877f2d-0547-4cea-a6ce-2e3b937aa31b", "ip_address": "172.16.101.153"} |
| f3867a99-de18-4512-8e94-f9aaa7b05c3a | Port for : 887fecdd-956b-47fa-a348-8940c53a5bf9 | fa:16:3e:c5:2b:92 | {"subnet_id": "67877f2d-0547-4cea-a6ce-2e3b937aa31b", "ip_address": "172.16.101.151"} |
|                                      |                                                 |                   | {"subnet_id": "67877f2d-0547-4cea-a6ce-2e3b937aa31b", "ip_address": "172.16.101.152"} |
+--------------------------------------+-------------------------------------------------+-------------------+---------------------------------------------------------------------------------------+
root@client:/tools/rest-api-for-esi# neutron port-show 9dc6550a-f4a0-4be0-9e52-f780501926a8 
+-----------------------+-------------------------------------------------------------------------------------+
| Field                 | Value                                                                               |
+-----------------------+-------------------------------------------------------------------------------------+
| admin_state_up        | True                                                                                |
| allowed_address_pairs |                                                                                     |
| attached              | False                                                                               |
| binding:vif_type      | vrouter                                                                             |
| description           | DHCP Server Port                                                                    |
| device_id             | 67877f2d-0547-4cea-a6ce-2e3b937aa31b                                                |
| device_owner          | network:dhcp                                                                        |
| ese_logical_port_id   |                                                                                     |
| fake_delete           | False                                                                               |
| fixed_ips             | {"subnet_id": "67877f2d-0547-4cea-a6ce-2e3b937aa31b", "ip_address": "172.16.101.2"} |
| id                    | 9dc6550a-f4a0-4be0-9e52-f780501926a8                                                |
| mac_address           | 00:00:5e:00:01:00                                                                   |
| managed_by_service    | False                                                                               |
| name                  | dhcp-server-port                                                                    |
| network_id            | 6e557507-1c2a-49b1-ba90-5f616a1f1f3e                                                |
| operational_state     |                                                                                     |
| orchestration_state   | SYNC_COMPLETE                                                                       |
| security_groups       |                                                                                     |
| segmentation_id       |                                                                                     |
| segmentation_type     |                                                                                     |
| status                | ACTIVE                                                                              |
| tags                  | {}                                                                                  |
| tenant_id             | 06d6b792b31c40daa546fb0f4e35980d                                                    |
+-----------------------+-------------------------------------------------------------------------------------+
root@client:/tools/rest-api-for-esi# neutron port-show ce965922-538a-4335-9644-7a98dce9fb47
+-----------------------+---------------------------------------------------------------------------------------+
| Field                 | Value                                                                                 |
+-----------------------+---------------------------------------------------------------------------------------+
| admin_state_up        | True                                                                                  |
| allowed_address_pairs |                                                                                       |
| attached              | True                                                                                  |
| binding:vif_type      | vrouter                                                                               |
| description           |                                                                                       |
| device_id             | ce8831fd-d30c-41e3-95de-feaee0b95405                                                  |
| device_owner          | network:gw_interface                                                                  |
| ese_logical_port_id   | aabc9b64-ec2c-4894-a6a8-ee0ea429c066                                                  |
| fake_delete           | False                                                                                 |
| fixed_ips             | {"subnet_id": "67877f2d-0547-4cea-a6ce-2e3b937aa31b", "ip_address": "172.16.101.153"} |
| id                    | ce965922-538a-4335-9644-7a98dce9fb47                                                  |
| mac_address           | fa:16:3e:41:7c:23                                                                     |
| managed_by_service    | True                                                                                  |
| name                  | Port for : 6b29894f-8694-4865-92c1-2e78360e65a6                                       |
| network_id            | 6e557507-1c2a-49b1-ba90-5f616a1f1f3e                                                  |
| operational_state     | FAIL                                                                                  |
| orchestration_state   | UPDATE_COMPLETE                                                                       |
| security_groups       |                                                                                       |
| segmentation_id       | 1025                                                                                  |
| segmentation_type     | vlan                                                                                  |
| status                | MONITORING_UNAVAILABLE                                                                |
| tags                  | {}                                                                                    |
| tenant_id             | 06d6b792b31c40daa546fb0f4e35980d                                                      |
+-----------------------+---------------------------------------------------------------------------------------+
root@client:/tools/rest-api-for-esi# neutron port-show f3867a99-de18-4512-8e94-f9aaa7b05c3a
+-----------------------+---------------------------------------------------------------------------------------+
| Field                 | Value                                                                                 |
+-----------------------+---------------------------------------------------------------------------------------+
| admin_state_up        | True                                                                                  |
| allowed_address_pairs |                                                                                       |
| attached              | True                                                                                  |
| binding:vif_type      | vrouter                                                                               |
| description           |                                                                                       |
| device_id             | ce8831fd-d30c-41e3-95de-feaee0b95405                                                  |
| device_owner          | network:gw_interface                                                                  |
| ese_logical_port_id   | 02112bb1-389c-4ff8-9354-94ab43459892                                                  |
| fake_delete           | False                                                                                 |
| fixed_ips             | {"subnet_id": "67877f2d-0547-4cea-a6ce-2e3b937aa31b", "ip_address": "172.16.101.151"} |
|                       | {"subnet_id": "67877f2d-0547-4cea-a6ce-2e3b937aa31b", "ip_address": "172.16.101.152"} |
| id                    | f3867a99-de18-4512-8e94-f9aaa7b05c3a                                                  |
| mac_address           | fa:16:3e:c5:2b:92                                                                     |
| managed_by_service    | True                                                                                  |
| name                  | Port for : 887fecdd-956b-47fa-a348-8940c53a5bf9                                       |
| network_id            | 6e557507-1c2a-49b1-ba90-5f616a1f1f3e                                                  |
| operational_state     | UP                                                                                    |
| orchestration_state   | UPDATE_COMPLETE                                                                       |
| security_groups       |                                                                                       |
| segmentation_id       | 1025                                                                                  |
| segmentation_type     | vlan                                                                                  |
| status                | ACTIVE                                                                                |
| tags                  | {}                                                                                    |
| tenant_id             | 06d6b792b31c40daa546fb0f4e35980d                                                      |
+-----------------------+---------------------------------------------------------------------------------------+
