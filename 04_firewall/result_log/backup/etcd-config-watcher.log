2019-04-02 03:01:14,974:DEBUG:New etcd client created for etcd-server:2379/v2
2019-04-02 03:01:14,975:DEBUG:Starting new HTTP connection (1): etcd-server:2379
2019-04-02 03:01:14,978:DEBUG:http://etcd-server:2379 "GET /v2/machines HTTP/1.1" 200 23
2019-04-02 03:01:14,979:DEBUG:Retrieved list of machines: [u'http://etcd-server:2379']
2019-04-02 03:01:14,979:DEBUG:Machines cache initialised to []
2019-04-02 03:01:14,980:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:14,980:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:14,981:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:34,971:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:01:34,972:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:01:34,973:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:01:34,973:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:01:34,973:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:34,974:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:34,974:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:01:34,976:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,215:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/network],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "network", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  Network template\n\nparameters:\n  uuid:\n    type: string\n    label: Virtual Network UUID\n    description: UUID of the virtual network that will be created.\n    default: \"\"\n  name:\n    type: string\n    label: Virtual Network Name\n    description: Name of the virtual network that will be created.\n  forwarding_mode:\n    type: string\n    label: Forwarding Mode\n    description: Forwarding Mode.\n    default: 'l2_l3'\n  route_targets:\n    type: comma_delimited_list\n    label: Route Targets list\n    default: []\n  shared:\n    type: boolean\n    label: Shared Network\n    default: false\n  external:\n    type: boolean\n    label: External Network\n    default: true\n  allow_transit:\n    type: boolean\n    label: Allow Transit\n    default: false\n  admin_state_up:\n    type: boolean\n    label: Admin state up\n    default: true\n\nresources:\n  network:\n    type: OS::Contrail::VirtualNetwork\n    properties:\n      uuid: { get_param: uuid }\n      name: { get_param: name }\n      forwarding_mode: { get_param: forwarding_mode }\n      route_targets: { get_param: route_targets }\n      shared: { get_param: shared }\n      admin_state_up: { get_param: admin_state_up }\n\noutputs:\n  id:\n    description: A unique id for the virtual network.\n    value: { get_resource: network }\n  name:\n    description: The name of the virtual network.\n    value: { get_attr: [network, name] }\n  fq_name:\n    description: The FQ name of the virtual network.\n    value: { get_attr: [network, fq_name] }\n  route_targets:\n    description: The name of the virtual network.\n    value: { get_attr: [network, route_targets] }\n", 
        "parameter_mappings": {
            "uuid": "Pid", 
            "heat_timeout": "C3", 
            "name": "Pid", 
            "admin_state_up": "Padmin_state_up"
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,216:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,216:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,217:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,225:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/subnet],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "subnet", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  Subnet template\n\nparameters:\n  name:\n    type: string\n    label: Local Subnet Name\n    description: Name of the local subnet that will be created.\n  network_id:\n    type: string\n    label: Network ID\n    description: ID of the network for which subnet will be created.\n  cidr:\n    type: string\n    label: Local Subnet IP prefix\n    description: IP prefix of the local subnet that will be created.\n  gateway_ip:\n    default: \"0.0.0.0\"\n    type: string\n    label: Default Gateway\n    description: Default gateway for the local subnet that will be created.\n  ipam:\n    type: string\n    label: IP Address Management\n    description: IPAM for the local subnet that will be created.\n    default: ''\n  enable_dhcp:\n    type: boolean\n    label: Enable DHCP\n    description: Enable DHCP\n    default: true\n  dhcp_server_address:\n    type: string\n    label: DHCP Server address\n    description: DHCP Server address\n    default: \"0.0.0.0\"\n  allocation_pools:\n    type: string\n    label: Allocation Pools\n    description: Allocation Pools\n    default: []\n  dns_nameservers:\n    type: comma_delimited_list\n    label: DNS Nameservers List\n    description: DNS Nameservers List\n    default: []\n  ntp_servers:\n    type: comma_delimited_list\n    label: NTP Nameservers List\n    description: NTP Nameservers List\n    default: []\n  host_routes:\n    type: json\n    label: Host Routes\n    description: Host Routes\n    default: []\n\nresources:\n  subnet:\n    type: OS::Contrail::VnSubnet\n    properties:\n      name: { get_param: name }\n      network_id: { get_param: network_id }\n      ip_prefix: { get_param: cidr }\n      default_gateway: { get_param: gateway_ip }\n      ipam: { get_param: ipam }\n      enable_dhcp: { get_param: enable_dhcp }\n      dns_server_address: { get_param: dhcp_server_address }\n      dns_nameservers: { get_param: dns_nameservers }\n      ntp_servers: { get_param: ntp_servers }\n      host_routes: { get_param: host_routes }\n      allocation_pools: { get_param: allocation_pools }\n      gateway_is_vrouter: false\n\noutputs:\n  id:\n    description: A unique id for the local subnet.\n    value: { get_resource: subnet }\n  name:\n    description: The name of the local subnet.\n    value: { get_attr: [subnet, name] }\n  network_id:\n    description: A unique id for the network.\n    value: { get_attr: [subnet, network_id] }\n  ip_prefix:\n    description: IP prefix of local subnet.\n    value: { get_attr: [subnet, ip_prefix] }\n  default_gateway:\n    description: Default gateway of local subnet.\n    value: { get_attr: [subnet, default_gateway] }\n  ipam:\n    description: IPAM this local subnet uses.\n    value: { get_attr: [subnet, ipam] }\n", 
        "parameter_mappings": {
            "name": "Pid", 
            "enable_dhcp": "Penable_dhcp", 
            "network_id": "Mnetwork:network_id:id", 
            "ipam": "Cdefault-domain:default-project:default-network-ipam", 
            "dns_nameservers": "Pdns_nameservers", 
            "heat_timeout": "C3", 
            "dhcp_server_address": "Pdhcp_server_address", 
            "ntp_servers": "Pntp_servers", 
            "allocation_pools": "Pallocation_pools", 
            "gateway_ip": "Pgateway_ip", 
            "host_routes": "Phost_routes", 
            "cidr": "Pcidr"
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,226:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,227:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,228:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,241:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/port],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "port", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  Virtual Machine Interface Template\n\nparameters:\n  uuid:\n    type: string\n    label: Backend Virtual Machine Interface UUID\n    description: A unique id for the Virtual Machine Interface.\n  name:\n    type: string\n    label: Physical Interface ID\n    description: A unique id for the Physical Interface.\n  security_groups:\n    type: json\n    default: []\n    label: Security Groups List\n    description: The IDs of security groups applied to the port.\n  virtual_machine_interface_allowed_address_pairs:\n    type: json\n    label: Virtual machine interface allowed address pairs.\n  virtual_machine_interface_mac_address:\n    type: string\n    default: \"fe:ff:ff:ff:ff:ff\"\n    label: Virtual machine interface mac address.\n  virtual_network:\n    type: string\n    label: Virtual Network.\n  virtual_machine:\n    type: string\n    label: Virtual Machine.\n    default: \"\"\n  device_owner:\n    type: string\n    label: Device Owner\n    default: \"\"\n  admin_state_up:\n    type: boolean\n    label: Admin state up\n    default: true\n  tenant_id:\n    type: string\n    label: Tenant ID\n  version:\n    type: number\n    label: Config version\n\nresources:\n  virtual_machine_interface:\n    type: OS::Contrail::VirtualMachineInterface\n    properties:\n      uuid: { get_param: uuid }\n      name: { get_param: name }\n      virtual_machine_interface_allowed_address_pairs: { get_param: virtual_machine_interface_allowed_address_pairs }\n      virtual_machine_interface_mac_addresses: [ { get_param: virtual_machine_interface_mac_address } ]\n      virtual_networks: [ { get_param: virtual_network } ]\n      virtual_machine: { get_param: virtual_machine }\n      device_owner: { get_param: device_owner }\n      admin_state_up: { get_param: admin_state_up }\n      security_groups: { get_param: security_groups }\n\n{% for fixed_ip in jinja_fixed_ips %}\n{% set instance_ip_id = 'instance_ip_' + (loop.index0|string) %}\n  {{ instance_ip_id }}:\n    type: OS::Contrail::InstanceIp\n    properties:\n      name:\n        str_replace:\n          template: '%name%_%zone%_%ip%'\n          params:\n            \"%name%\": { get_param: name }\n            \"%zone%\": {{ fixed_ip.subnet_id }}\n            \"%ip%\": {{ fixed_ip.ip_address }}\n      ip_address: {{ fixed_ip.ip_address }}\n      subnet_id: {{ jinja_subnets[loop.index0] }}\n      network_id: { get_param: virtual_network }\n      virtual_machine_interfaces: [ { get_resource: virtual_machine_interface } ]\n{% endfor %}\n\n{% if jinja_device_owner and jinja_attached %}\n  vmi_monitor:\n    type: ESI::Monitoring::MonitoringTarget\n    properties:\n      type: virtual_machine_interface\n      resource_type: ports\n      resource_id: { get_param: uuid }\n      field_name: vmi\n      tenant_id: { get_param: tenant_id }\n      version: { get_param: version }\n      properties:\n        fq_name: { get_attr: [virtual_machine_interface, fq_name] }\n      syncer_properties:\n        etcd:\n          status:\n            key: vmi\n          hold_options:\n            positive_status:\n              - UP\n              - DOWN\n            time_seconds: 210\n        tsdb:\n          traffic.in:\n            metric: traffic.bps\n            tags:\n              resource_id: { get_param: uuid }\n              direction: in\n          traffic.out:\n            metric: traffic.bps\n            tags:\n              resource_id: { get_param: uuid }\n              direction: out\n    depends_on: virtual_machine_interface\n{% endif %}\n\noutputs:\n  id:\n    description: A unique id for the virtual machine interface.\n    value: { get_resource: virtual_machine_interface }\n  mac_address:\n    description: Virtual machine interface mac address.\n    value: { get_attr: [virtual_machine_interface, virtual_machine_interface_mac_addresses] }\n  allowed_address_pairs:\n    description: Virtual machine allowed address pairs.\n    value: { get_attr: [virtual_machine_interface, virtual_machine_interface_allowed_address_pairs] }\n  virtual_network:\n    description: Virtual network.\n    value: { get_attr: [virtual_machine_interface, virtual_networks] }\n  fq_name:\n    description: Fully Qualified Name of the VMI\n    value: { get_attr: [virtual_machine_interface, fq_name] }\n{% if jinja_device_owner and jinja_attached %}\n  monitoring_target_id:\n    description: Monitoring Target ID\n    value: { get_resource: vmi_monitor }\n  monitoring_link:\n    description: Monitoring Process Link\n    value: { get_attr: [vmi_monitor, link] }\n{% endif %}\n", 
        "parameter_mappings": {
            "jinja_attached": "Pattached", 
            "virtual_network": "Mnetwork:network_id:id", 
            "virtual_machine": "Pdevice_id", 
            "name": "Pid", 
            "admin_state_up": "Padmin_state_up", 
            "tenant_id": "Ptenant_id", 
            "heat_timeout": "C13", 
            "virtual_machine_interface_allowed_address_pairs": "Pallowed_address_pairs", 
            "virtual_machine_interface_mac_address": "Pmac_address", 
            "device_owner": "Pdevice_owner", 
            "version": "Vauto_filled", 
            "security_groups": "Psecurity_groups", 
            "jinja_force_dependency_gw_interface": {
                "else_mapping": {
                    "constant": null
                }, 
                "if_mapping": {
                    "equal": [
                        {
                            "field": "device_owner"
                        }, 
                        {
                            "constant": "network:gw_interface"
                        }
                    ]
                }, 
                "then_mapping": {
                    "field": "id", 
                    "path": [
                        {
                            "type": "gw_interface", 
                            "id": "device_id"
                        }
                    ]
                }
            }, 
            "jinja_fixed_ips": "Pfixed_ips", 
            "jinja_force_dependency_cfg": {
                "else_mapping": {
                    "constant": null
                }, 
                "if_mapping": {
                    "equal": [
                        {
                            "field": "device_owner"
                        }, 
                        {
                            "constant": "network:common_function_gateway"
                        }
                    ]
                }, 
                "then_mapping": {
                    "field": "id", 
                    "path": [
                        {
                            "type": "common_function_gateway", 
                            "id": "device_id"
                        }
                    ], 
                    "ignore_missing": true
                }
            }, 
            "jinja_device_owner": "Pdevice_owner", 
            "jinja_subnets": {
                "for_mapping": {
                    "path": [
                        {
                            "type": "subnet", 
                            "id": "subnet_id"
                        }
                    ], 
                    "output_key": "id"
                }, 
                "for_field": "fixed_ips"
            }, 
            "uuid": "Pid"
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,242:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,242:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,243:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,251:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/ese_physical_port_existing],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "ese_physical_port_existing", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  Physical port template\n\nparameters:\n  physical_device_hostname:\n    type: string\n    label: Physical Device Hostname\n    description: Hostname of the physical device on which physical port will be created.\n  physical_port_name:\n    type: string\n    label: Physical Interface Name\n    description: Name of the physical port.\n  gohan_id:\n    type: string\n    label: Gohan resource ID\n    description: UUID of the ESE Physical Port\n  device_ip:\n    type: string\n    label: Device IP Address\n    description: Device IP Address.\n  tenant_id:\n    type: string\n    label: Tenant ID\n  version:\n    type: number\n    label: Config version\n\nresources:\n  physical_interface:\n    type: OS::Contrail::ExistingResource\n    properties:\n      fq_name:\n        - \"default-global-system-config\"\n        - { get_param: physical_device_hostname }\n        - { get_param: physical_port_name }\n      resource_type: \"physical_interface\"\n\n  interface_monitor:\n    type: ESI::Monitoring::MonitoringTarget\n    properties:\n      type: snmp_ports_status\n      resource_type: ese_physical_ports\n      resource_id: { get_param: gohan_id }\n      tenant_id: { get_param: tenant_id }\n      version: { get_param: version }\n      field_name: port\n      properties:\n        device_ip: { get_param: device_ip }\n        if_name: { get_param: physical_port_name }\n        community_name: ESE_NODE_COMMUNITY\n      syncer_properties:\n        etcd:\n          status:\n            key: port\n    depends_on: physical_interface\n\noutputs:\n  id:\n    description: A unique id for the physical interface\n    value: { get_resource: physical_interface }\n  name:\n    description: The name of the physical interface.\n    value: { get_attr: [physical_interface, name] }\n  monitoring_target_id:\n    description: Monitoring Target ID\n    value: { get_resource: interface_monitor }\n  monitoring_link:\n    description: Monitoring Process Link\n    value: { get_attr: [interface_monitor, link] }\n", 
        "parameter_mappings": {
            "physical_port_name": "Pname", 
            "physical_device_hostname": "Fese_device+ese_device_id:hostname", 
            "tenant_id": "Ptenant_id", 
            "device_ip": "Fese_device+ese_device_id:management_ip_address", 
            "heat_timeout": "C6", 
            "version": "Vauto_filled", 
            "gohan_id": "Pid"
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,252:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,252:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,254:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,260:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/ese_physical_port_new],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "ese_physical_port_new", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  Physical port template\n\nparameters:\n  physical_device:\n    type: string\n    label: Physical Device Id\n    description: Id of the physical device on which physical port will be created.\n  physical_port_name:\n    type: string\n    label: Physical Interface Name\n    description: Name of the physical port.\n  gohan_id:\n    type: string\n    label: Gohan resource ID\n    description: UUID of the ESE Physical Port\n  device_ip:\n    type: string\n    label: Device IP Address\n    description: Device IP Address.\n  tenant_id:\n    type: string\n    label: Tenant ID\n  version:\n    type: number\n    label: Config version\n\nresources:\n  physical_interface:\n    type: OS::Contrail::PhysicalInterface\n    properties:\n      name: { get_param: physical_port_name }\n      physical_router: { get_param: physical_device }\n\n  interface_monitor:\n    type: ESI::Monitoring::MonitoringTarget\n    properties:\n      type: snmp_ports_status\n      resource_type: ese_physical_ports\n      resource_id: { get_param: gohan_id }\n      tenant_id: { get_param: tenant_id }\n      version: { get_param: version }\n      field_name: port\n      properties:\n        device_ip: { get_param: device_ip }\n        if_name: { get_param: physical_port_name }\n        community_name: ESE_NODE_COMMUNITY\n      syncer_properties:\n        etcd:\n          status:\n            key: port\n    depends_on: physical_interface\n\noutputs:\n  id:\n    description: A unique id for the physical interface\n    value: { get_resource: physical_interface }\n  name:\n    description: The name of the physical interface.\n    value: { get_attr: [physical_interface, name] }\n  monitoring_target_id:\n    description: Monitoring Target ID\n    value: { get_resource: interface_monitor }\n  monitoring_link:\n    description: Monitoring Process Link\n    value: { get_attr: [interface_monitor, link] }\n", 
        "parameter_mappings": {
            "physical_port_name": "Pname", 
            "tenant_id": "Ptenant_id", 
            "device_ip": "Fese_device+ese_device_id:management_ip_address", 
            "physical_device": "Mese_device:ese_device_id:id", 
            "heat_timeout": "C6", 
            "version": "Vauto_filled", 
            "gohan_id": "Pid"
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,261:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,261:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,263:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,274:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/ese_logical_port],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "ese_logical_port", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  Logical port template\n\nparameters:\n  physical_port_id:\n    type: string\n    label: Physical Interface ID\n    description: A unique id for the Physical Interface.\n  logical_port_name:\n    type: string\n    label: Logical Port Name\n    description: Name of the logical port.\n  logical_port_type:\n    type: string\n    label: Logical Port Type\n    description: Type of the logical port.\n  logical_port_vlan_id:\n    type: number\n    label: VLAN id for Logical Port\n    description: VLAN id to use for logical port creation.\n    default: 0\n  virtual_machine_interface_ids:\n    type: comma_delimited_list\n    label: Virtual Machine Interface ID\n    description: Virtual Machine Interface ID.\n  gohan_id:\n    type: string\n    label: Gohan resource ID\n    description: UUID of the ESE Physical Port\n  device_ip:\n    type: string\n    label: Device IP Address\n    description: Device IP Address.\n  tenant_id:\n    type: string\n    label: Tenant ID\n  version:\n    type: number\n    label: Config version\n\nresources:\n  logical_interface:\n    type: OS::Contrail::LogicalInterface\n    properties:\n      name: { get_param: logical_port_name }\n      physical_interface: { get_param: physical_port_id }\n      virtual_machine_interfaces: { get_param: virtual_machine_interface_ids }\n      type: { get_param: logical_port_type }\n      vlan: { get_param: logical_port_vlan_id }\n\n  interface_monitor:\n    type: ESI::Monitoring::MonitoringTarget\n    properties:\n      type: snmp_ports\n      resource_type: ese_logical_ports\n      resource_id: { get_param: gohan_id }\n      tenant_id: { get_param: tenant_id }\n      version: { get_param: version }\n      field_name: logical_port\n      properties:\n        device_ip: { get_param: device_ip }\n        if_name: { get_param: logical_port_name }\n        community_name: ESE_NODE_COMMUNITY\n      syncer_properties:\n        etcd:\n          status:\n            key: logical_port\n          hold_options:\n            positive_status:\n              - UP\n              - DOWN\n            time_seconds: 30\n        tsdb:\n          traffic.in:\n            metric: traffic.bytes\n            tags:\n              {% for port_id in jinja_port_ids %}\n              -  resource_id: { get_param: gohan_id }\n                 port_id: {{ port_id }}\n                 direction: in\n              {% endfor %}\n          traffic.out:\n            metric: traffic.bytes\n            tags:\n              {% for port_id in jinja_port_ids %}\n              -  resource_id: { get_param: gohan_id }\n                 port_id: {{ port_id }}\n                 direction: out\n              {% endfor %}\n    depends_on: logical_interface\n\noutputs:\n  id:\n    description: A unique id for the logical interface\n    value: { get_resource: logical_interface }\n  name:\n    description: The name of the logical interface.\n    value: { get_attr: [logical_interface, name] }\n  monitoring_target_id:\n    description: Monitoring Target ID\n    value: { get_resource: interface_monitor }\n  monitoring_link:\n    description: Monitoring Process Link\n    value: { get_attr: [interface_monitor, link] }\n", 
        "parameter_mappings": {
            "logical_port_type": "Ptype", 
            "logical_port_vlan_id": "Pvlan_id", 
            "tenant_id": "Ptenant_id", 
            "device_ip": "Fese_physical_port+ese_physical_port_id:ese_device+ese_device_id:management_ip_address", 
            "heat_timeout": "C6", 
            "jinja_port_ids": "Pport_ids", 
            "version": "Vauto_filled", 
            "virtual_machine_interface_ids": {
                "for_mapping": {
                    "path": [
                        {
                            "type": "port", 
                            "id": ""
                        }
                    ], 
                    "output_key": "id"
                }, 
                "for_field": "port_ids"
            }, 
            "logical_port_name": "Pname", 
            "gohan_id": "Pid", 
            "physical_port_id": "Mese_physical_port:ese_physical_port_id:id"
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,275:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,276:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,277:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,290:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/local_subnet],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "local_subnet", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  Local Subnet template\n\nparameters:\n  name:\n    type: string\n    label: Local Subnet Name\n    description: Name of the local subnet that will be created.\n  cidr:\n    type: string\n    label: Local Subnet IP prefix\n    description: IP prefix of the local subnet that will be created.\n  virtual_machine_interface_ids:\n    type: comma_delimited_list\n    label: Virtual Machine Interface IDs\n    description: Virtual Machine Interface IDs.\n    default: []\n\nresources:\n  subnet:\n    type: OS::Contrail::Subnet\n    properties:\n      name: { get_param: name }\n      ip_prefix: { get_param: cidr }\n      virtual_machine_interfaces: { get_param: virtual_machine_interface_ids }\n\noutputs:\n  id:\n    description: A unique id for the local subnet.\n    value: { get_resource: subnet }\n  name:\n    description: The name of the local subnet.\n    value: { get_attr: [subnet, name] }\n", 
        "parameter_mappings": {
            "cidr": "Pcidr", 
            "name": "Pid"
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,291:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,292:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,294:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,304:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/ese_device_existing],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "ese_device_existing", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  ESE Device (existing) template\n\nparameters:\n  name:\n    type: string\n    label: Physical Router Name\n    description: Name of the physical router that will be created.\n  hostname:\n    type: string\n    label: Hostname\n    description: Name of host (vrouter) to create router on\n  gohan_id:\n    type: string\n    label: Gohan resource ID\n    description: UUID of the ESE Device\n  device_ip:\n    type: string\n    label: Device IP Address\n    description: Device IP Address.\n  tenant_id:\n    type: string\n    label: Tenant ID\n  version:\n    type: number\n    label: Config version\n\nresources:\n  physical_router:\n    type: OS::Contrail::ExistingResource\n    properties:\n      fq_name:\n        - \"default-global-system-config\"\n        - { get_param: hostname }\n      resource_type: \"physical_router\"\n\n  device_monitor:\n    type: ESI::Monitoring::MonitoringTarget\n    properties:\n      type: snmp_device\n      resource_type: ese_devices\n      resource_id: { get_param: gohan_id }\n      tenant_id: { get_param: tenant_id }\n      version: { get_param: version }\n      field_name: switch\n      properties:\n        device_ip: { get_param: device_ip }\n        community_name: ESE_NODE_COMMUNITY\n      syncer_properties:\n        etcd:\n          status:\n            key: switch\n    depends_on: physical_router\n\noutputs:\n  id:\n    description: A unique id for the physical router.\n    value: { get_resource: physical_router }\n  name:\n    description: The name of the physical router.\n    value: { get_attr: [physical_router, name] }\n  fq_name:\n    description: The FQ name of the physical router.\n    value: { get_attr: [physical_router, fq_name] }\n  monitoring_target_id:\n    description: Monitoring Target ID\n    value: { get_resource: device_monitor }\n  monitoring_link:\n    description: Monitoring Process Link\n    value: { get_attr: [device_monitor, link] }\n", 
        "parameter_mappings": {
            "hostname": "Phostname", 
            "name": "Pname", 
            "tenant_id": "Ptenant_id", 
            "device_ip": "Pmanagement_ip_address", 
            "heat_timeout": "C6", 
            "version": "Vauto_filled", 
            "gohan_id": "Pid"
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,304:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,305:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,306:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,316:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/ese_device_new],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "ese_device_new", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  Physical router template\n\nparameters:\n  name:\n    type: string\n    label: Physical Router Name\n    description: Name of the physical router that will be created.\n  tor_agent_names:\n    type: comma_delimited_list\n    label: TOR Agent Names\n    description: List of virtual router names of TOR agents.\n    constraints:\n      - length: { min: 1 }\n        description: List must not be empty.\n    schema:\n      '*': { type: string }\n  tsn_names:\n    type: comma_delimited_list\n    label: TOR Service Node Names\n    description: List of virtual router names of TOR service nodes.\n    constraints:\n      - length: { min: 1 }\n        description: List must not be empty.\n    schema:\n      '*': { type: string }\n  management_ip:\n    type: string\n    label: Management IP Address\n    description: Management IP Address.\n  dataplane_ip:\n    type: string\n    label: Dataplane IP Address\n    description: Dataplane Address.\n  vendor_name:\n    type: string\n    default: \"\"\n    label: Vendor Name\n    description: Vendor name of the physical router.\n  product_name:\n    type: string\n    default: \"\"\n    label: Product Name\n    description: Product name of the physical router.\n  vnc_managed:\n    type: boolean\n    default: False\n    label: VNC managed\n    description: VNC managed.\n  username:\n    type: string\n    label: Username\n    description: Username used to login to the physical router.\n  password:\n    type: string\n    label: Password\n    description: Password used to login to the physical router.\n    hidden: true\n  gohan_id:\n    type: string\n    label: Gohan resource ID\n    description: UUID of the ESE Device\n  tenant_id:\n    type: string\n    label: Tenant ID\n  version:\n    type: number\n    label: Config version\n\nresources:\n  physical_router:\n    type: OS::Contrail::PhysicalRouter\n    properties:\n      name: { get_param: name }\n      virtual_routers:\n        'Fn::Split':\n          - ','\n          - 'Fn::Join':\n            - ','\n            - - 'Fn::Join': [',', get_param: tor_agent_names ]\n              - 'Fn::Join': [',', get_param: tsn_names ]\n      management_ip: { get_param: management_ip }\n      dataplane_ip: { get_param: dataplane_ip }\n      vendor_name: { get_param: vendor_name }\n      product_name: { get_param: product_name }\n      vnc_managed: { get_param: vnc_managed }\n      user_credentials:\n        username: { get_param: username }\n        password: { get_param: password }\n\n  device_monitor:\n    type: ESI::Monitoring::MonitoringTarget\n    properties:\n      type: snmp_device\n      resource_type: ese_devices\n      resource_id: { get_param: gohan_id }\n      tenant_id: { get_param: tenant_id }\n      version: { get_param: version }\n      field_name: switch\n      properties:\n        device_ip: { get_param: management_ip }\n        community_name: ESE_NODE_COMMUNITY\n      syncer_properties:\n        etcd:\n          status:\n            key: switch\n    depends_on: physical_router\n\noutputs:\n  id:\n    description: A unique id for the physical router.\n    value: { get_resource: physical_router }\n  name:\n    description: The name of the physical router.\n    value: { get_attr: [physical_router, name] }\n  fq_name:\n    description: The FQ name of the physical router.\n    value: { get_attr: [physical_router, fq_name] }\n  vendor_name:\n    description: The vendor name of the physical router.\n    value: { get_attr: [physical_router, vendor_name] }\n  product_name:\n    description: The product name of the physical router.\n    value: { get_attr: [physical_router, product_name] }\n  management_ip:\n    description: The managment IP of the physical router.\n    value: { get_attr: [physical_router, management_ip] }\n  dataplane_ip:\n    description: The dataplane IP of the physical router.\n    value: { get_attr: [physical_router, dataplane_ip] }\n  vnc_managed:\n    description: Physical rotuer vnc managed.\n    value: { get_attr: [physical_router, vnc_managed] }\n  virtual_routers:\n    description: List of virtual routers.\n    value: { get_attr: [physical_router, virtual_routers] }\n  physical_interfaces:\n    description: List of physical interfaces attached.\n    value: { get_attr: [physical_router, physical_interfaces] }\n  logical_interfaces:\n    description: List of logical interfaces attached.\n    value: { get_attr: [physical_router, logical_interfaces] }\n  monitoring_target_id:\n    description: Monitoring Target ID\n    value: { get_resource: device_monitor }\n  monitoring_link:\n    description: Monitoring Process Link\n    value: { get_attr: [device_monitor, link] }\n", 
        "parameter_mappings": {
            "username": "Pusername", 
            "vendor_name": "CJuniper", 
            "name": "Phostname", 
            "tenant_id": "Ptenant_id", 
            "management_ip": "Pmanagement_ip_address", 
            "dataplane_ip": "Ppublic_ip_address", 
            "tor_agent_names": "Ptor_agent_names", 
            "heat_timeout": "C6", 
            "tsn_names": "Ptsn_names", 
            "vnc_managed": "CFalse", 
            "version": "Vauto_filled", 
            "gohan_id": "Pid", 
            "password": "Ppassword", 
            "product_name": "Pname"
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,316:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,317:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,319:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,325:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/edge_router],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "edge_router", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  Physical port template\n\nparameters:\n  gohan_id:\n    type: string\n    label: Gohan resource ID\n    description: UUID of the Edge Router\n  device_ip:\n    type: string\n    label: Device IP Address\n    description: Device IP Address\n  tenant_id:\n    type: string\n    label: Tenant ID\n  version:\n    type: number\n    label: Config version\n\nresources:\n  device_monitor:\n    type: ESI::Monitoring::MonitoringTarget\n    properties:\n      type: snmp_device\n      resource_type: edge_routers\n      resource_id: { get_param: gohan_id }\n      tenant_id: { get_param: tenant_id }\n      version: { get_param: version }\n      field_name: router\n      properties:\n        device_ip: { get_param: device_ip }\n        community_name: EDGE_ROUTER_COMMUNITY\n      syncer_properties:\n        etcd:\n          status:\n            key: router\n\noutputs:\n  monitoring_target_id:\n    description: Monitoring Target ID\n    value: { get_resource: device_monitor}\n  monitoring_link:\n    description: Monitoring Process Link\n    value: { get_attr: [device_monitor, link]}\n", 
        "parameter_mappings": {
            "gohan_id": "Pid", 
            "heat_timeout": "C3", 
            "device_ip": "Pip", 
            "version": "Vauto_filled", 
            "tenant_id": "Ptenant_id"
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,326:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,326:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,328:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,336:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/er_physical_interface],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "er_physical_interface", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  Physical port template\n\nparameters:\n  if_name:\n    type: string\n    label: Interface Name\n    description: Name of the ER Physical Interface\n  gohan_id:\n    type: string\n    label: Gohan resource ID\n    description: UUID of the ER Physical Interface\n  device_ip:\n    type: string\n    label: Device IP Address\n    description: Device IP Address\n  tenant_id:\n    type: string\n    label: Tenant ID\n  version:\n    type: number\n    label: Config version\n\nresources:\n  interface_monitor:\n    type: ESI::Monitoring::MonitoringTarget\n    properties:\n      type: snmp_ports_status\n      resource_type: er_physical_interfaces\n      resource_id: { get_param: gohan_id }\n      tenant_id: { get_param: tenant_id }\n      version: { get_param: version }\n      field_name: interface\n      properties:\n        device_ip: { get_param: device_ip }\n        if_name: { get_param: if_name }\n        community_name: EDGE_ROUTER_COMMUNITY\n      syncer_properties:\n        etcd:\n          status:\n            key: interface\n\noutputs:\n  monitoring_target_id:\n    description: Monitoring Target ID\n    value: { get_resource: interface_monitor}\n  monitoring_link:\n    description: Monitoring Process Link\n    value: { get_attr: [interface_monitor, link]}\n", 
        "parameter_mappings": {
            "tenant_id": "Ptenant_id", 
            "device_ip": "Fedge_router+device_id:ip", 
            "if_name": "Pname", 
            "heat_timeout": "C3", 
            "version": "Vauto_filled", 
            "gohan_id": "Pid"
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,337:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,337:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,339:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,365:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/internet_gateway],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "internet_gateway", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  Internet GW Instance\n\nparameters:\n  primary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\n    label: Ip address of the device.\n    type: string\n  primary_device_port:\n    description: Port that will be used to establish ssh connection to the Primary Device.\n    label: Port of the ssh connection.\n    type: number\n  primary_device_username:\n    description: Name of the user which will be used to log onto the Primary Device.\n    label: User name to log on to device.\n    type: string\n  primary_device_password:\n    description: Password of the user which will be used to log onto the Primary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  secondary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\n    label: Ip address of the device.\n    type: string\n  secondary_device_port:\n    description: Port that will be used to establish ssh connection to the Secondary Device.\n    label: Port of the ssh connection.\n    type: number\n  secondary_device_username:\n    description: Name of the user which will be used to log onto the Secondary Device.\n    label: User name to log on to device.\n    type: string\n  secondary_device_password:\n    description: Password of the user which will be used to log onto the Secondary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  primary_device_physical_interface:\n    description: Physical port on the Primary device on which the logical port will be configured\n    label: Underlying physical interface\n    type: string\n  primary_device_logical_interface:\n    description: Name of the created logical interface on the Primary device\n    label: Logical Interface name\n    type: string\n  secondary_device_physical_interface:\n    description: Physical port on the Secondary device on which the logical port will be configured\n    label: Underlying physical interface\n    type: string\n  secondary_device_logical_interface:\n    description: Name of the created logical interface on the Secondary device\n    label: Logical Interface name\n    type: string\n  vlan:\n    description: vlan tag used by logical interface\n    label: VLAN ID\n    type: string\n  vrf_name:\n    description: Name for VRF used by logical interface\n    label: VRF name\n    type: string\n  vrf_import_policy:\n    description: Import Policy for IGS\n    label: Import Policy\n    type: string\n  vrf_export_policy:\n    description: Export Policy for IGS\n    label: Export Policy\n    type: string\n  uplink_import_policy:\n    description: Uplink Import Policy for IGS\n    label: Uplink Import Policy\n    type: string\n  input_filter_name:\n    description: Policer name to use as input policer\n    label: Input policer name\n    type: string\n  output_filter_name:\n    description: Policer name to use as output policer\n    label: Output policer name\n    type: string\n  primary_vrrp_config_group:\n    description: Name for apply group to use for interface for VRRP\n    label: Apply group name\n    type: string\n  secondary_vrrp_config_group:\n    description: Name for apply group to use for interface for VRRP\n    label: Apply group name\n    type: string\n  inet_in_filter:\n    label: Internet Input Filter\n    type: string\n  inet_out_filter:\n    label: Internet Output Filter\n    type: string\n  prefix_list_name:\n    label: Prefix list name\n    type: string\n  filter_term_name:\n    label: Filter term name\n    type: string\n  counter_name_in:\n    type: string\n    label: Input counter name\n  counter_name_out:\n    type: string\n    label: Output counter name\n  gohan_id:\n    type: string\n    label: Gohan resource ID\n    description: UUID of the GW Interface\n  tenant_id:\n    type: string\n    label: Tenant ID\n  version:\n    type: number\n    label: Config version\n\nresources:\n{% for device in [\"primary\", \"secondary\"] %}\n  netconf_configure_{{ device }}:\n    properties:\n      on_update: merge\n      lock_timeout: 3000\n      configs:\n      - config:\n          str_replace:\n            params:\n              $APPLY_GROUP:\n                get_param: {{ device }}_vrrp_config_group\n              $VLAN:\n                get_param: vlan\n              $INPUT_FILTER:\n                get_param: input_filter_name\n              $OUTPUT_FILTER:\n                get_param: output_filter_name\n            template: |\n              apply-groups $APPLY_GROUP\n              vlan-id $VLAN;\n              description inet_gw;\n              family inet {\n                  filter {\n                      input $INPUT_FILTER;\n                      output $OUTPUT_FILTER;\n                  }\n              }\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: interfaces\n          - config_type: name\n            xml_type: named_tag\n            tag: interface\n            name: { get_param: {{ device }}_device_physical_interface }\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: unit\n            name: { get_param: vlan }\n      - config:\n          str_replace:\n            params:\n              $LIF:\n                get_param: {{ device }}_device_logical_interface\n              $IMPORT_POLICY:\n                get_param: vrf_import_policy\n              $EXPORT_POLICY:\n                get_param: vrf_export_policy\n            template: |\n                instance-type virtual-router;\n                interface $LIF;\n                routing-options instance-import $IMPORT_POLICY;\n                routing-options instance-export $EXPORT_POLICY;{% if jinja_vrf_config %}\n                {{ jinja_vrf_config }}{% endif %}\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: routing-instances\n          - config_type: name\n            xml_type: named_tag\n            tag: instance\n            name: { get_param: vrf_name }\n      - config:\n          str_replace:\n            params:\n              $VRF_NAME:\n                get_param: vrf_name\n            template: |\n              from instance $VRF_NAME;\n              then accept;\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: policy-options\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: policy-statement\n            name: { get_param: uplink_import_policy }\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: term\n            name: { get_param: vrf_name }\n      - config: \"\"\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: policy-options\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: prefix-list\n            name: { get_param: prefix_list_name }\n      - config:\n          str_replace:\n            params:\n              $PREFIX_LIST_NAME:\n                get_param: prefix_list_name\n              $VRF_NAME:\n                get_param: vrf_name\n            template: |\n               from {\n                  destination-prefix-list {\n                       $PREFIX_LIST_NAME;\n                  }\n               }\n               then {\n                    count $VRF_NAME_IN;\n                    accept;\n               }\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: firewall\n          - config_type: tag\n            xml_type: tag\n            tag: family\n          - config_type: tag\n            xml_type: tag\n            tag: inet\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: filter\n            name: { get_param: inet_in_filter }\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: term\n            name: { get_param: filter_term_name }\n        additional_commands:\n          str_replace:\n            params:\n              $TERM_NAME:\n                get_param: filter_term_name\n              $INET_IN:\n                get_param: inet_in_filter\n            template: |\n              insert firewall family inet filter $INET_IN term $TERM_NAME before term all-accept\n      - config:\n          str_replace:\n            params:\n              $PREFIX_LIST_NAME:\n                get_param: prefix_list_name\n              $VRF_NAME:\n                get_param: vrf_name\n            template: |\n               from {\n                  source-prefix-list {\n                       $PREFIX_LIST_NAME;\n                  }\n               }\n               then {\n                    count $VRF_NAME_OUT;\n                    accept;\n               }\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: firewall\n          - config_type: tag\n            xml_type: tag\n            tag: family\n          - config_type: tag\n            xml_type: tag\n            tag: inet\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: filter\n            name: { get_param: inet_out_filter }\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: term\n            name: { get_param: filter_term_name }\n        additional_commands:\n          str_replace:\n            params:\n              $TERM_NAME:\n                get_param: filter_term_name\n              $INET_OUT:\n                get_param: inet_out_filter\n            template: |\n              insert firewall family inet filter $INET_OUT term $TERM_NAME before term all-accept\n      device_ip:\n        get_param: {{ device }}_device_ip\n      password:\n        get_param: {{ device }}_device_password\n      port:\n        get_param: {{ device }}_device_port\n      username:\n        get_param: {{ device }}_device_username\n    {% if device == \"secondary\" %}depends_on: netconf_configure_primary{% endif %}\n    type: OS::Contrail::NetconfNamedConfigs\n{% endfor %}\n\n{% for device in [\"primary\", \"secondary\"] %}\n  {{ device }}_igs_metric_monitor:\n    type: ESI::Monitoring::MonitoringTarget\n    properties:\n      type: igs_counter\n      resource_type: internet_gateways\n      resource_id: { get_param: gohan_id }\n      tenant_id: { get_param: tenant_id }\n      version: { get_param: version }\n      field_name: {{ device }}_counter\n      properties:\n        counter_name_in: { get_param: counter_name_in }\n        counter_name_out: { get_param: counter_name_out }\n        host: { get_param: {{ device }}_device_ip }\n        port: { get_param: {{ device }}_device_port }\n        login: { get_param: {{ device }}_device_username }\n        password: { get_param: {{ device }}_device_password }\n        primary_device_ip: { get_param: primary_device_ip }\n        secondary_device_ip: { get_param: secondary_device_ip }\n      syncer_properties:\n        tsdb:\n          traffic.in:\n            metric: traffic.bytes\n            tags:\n              device_index: {{ device }}\n              resource_id: { get_param: gohan_id }\n              direction: in\n          traffic.out:\n            metric: traffic.bytes\n            tags:\n              device_index: {{ device }}\n              resource_id: { get_param: gohan_id }\n              direction: out\n    depends_on: netconf_configure_secondary\n{% endfor %}\n\noutputs:\n{% for device in [\"primary\", \"secondary\"] %}\n  {{ device }}_monitoring_target_id:\n    description: Monitoring Target ID\n    value: { get_resource: {{ device }}_igs_metric_monitor}\n  {{ device }}_monitoring_link:\n    description: Monitoring Process Link\n    value: { get_attr: [{{ device }}_igs_metric_monitor, link]}\n{% endfor %}\n", 
        "parameter_mappings": {
            "vrf_export_policy": "Finternet_service+internet_service_id:vrf_export_policy", 
            "secondary_device_physical_interface": "Fha_interface+downlink_interface_id:er_physical_interface+secondary_interface_id:name", 
            "counter_name_out": "APvrf_name&C_OUT", 
            "primary_device_logical_interface": "Pprimary_logical_interface_name", 
            "primary_device_password": "Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password", 
            "gohan_id": "Pid", 
            "vrf_import_policy": "Finternet_service+internet_service_id:vrf_import_policy", 
            "prefix_list_name": "APvrf_name&C_prefix", 
            "jinja_vrf_config": "Finternet_service+internet_service_id:vrf_config", 
            "output_filter_name": "ACFILTER_&Fqos_option+qos_option_id:outgoing_policer_name", 
            "secondary_vrrp_config_group": "Finternet_service+internet_service_id:secondary_vrrp_config_group", 
            "primary_device_ip": "Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip", 
            "version": "Vauto_filled", 
            "inet_in_filter": "Finternet_service+internet_service_id:inet_in_filter", 
            "primary_device_username": "Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login", 
            "secondary_device_logical_interface": "Psecondary_logical_interface_name", 
            "counter_name_in": "APvrf_name&C_IN", 
            "inet_out_filter": "Finternet_service+internet_service_id:inet_out_filter", 
            "vlan": "Pvlan_id", 
            "primary_device_physical_interface": "Fha_interface+downlink_interface_id:er_physical_interface+primary_interface_id:name", 
            "uplink_import_policy": "Finternet_service+internet_service_id:uplink_import_policy", 
            "input_filter_name": "ACFILTER_&Fqos_option+qos_option_id:incoming_policer_name", 
            "filter_term_name": "APvrf_name&C_filter", 
            "tenant_id": "Ptenant_id", 
            "secondary_device_port": "Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port", 
            "secondary_device_password": "Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password", 
            "heat_timeout": "C60", 
            "vrf_name": "Pvrf_name", 
            "primary_vrrp_config_group": "Finternet_service+internet_service_id:primary_vrrp_config_group", 
            "secondary_device_username": "Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login", 
            "primary_device_port": "Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port", 
            "secondary_device_ip": "Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip"
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,366:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,367:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,368:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,376:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/static_route_internet],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "static_route_internet", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  Internet Gateway Static Route\n\nparameters:\n  primary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\n    label: Ip address of the device.\n    type: string\n  primary_device_port:\n    description: Port that will be used to establish ssh connection to the Primary Device.\n    label: Port of the ssh connection.\n    type: number\n  primary_device_username:\n    description: Name of the user which will be used to log onto the Primary Device.\n    label: User name to log on to device.\n    type: string\n  primary_device_password:\n    description: Password of the user which will be used to log onto the Primary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  secondary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\n    label: Ip address of the device.\n    type: string\n  secondary_device_port:\n    description: Port that will be used to establish ssh connection to the Secondary Device.\n    label: Port of the ssh connection.\n    type: number\n  secondary_device_username:\n    description: Name of the user which will be used to log onto the Secondary Device.\n    label: User name to log on to device.\n    type: string\n  secondary_device_password:\n    description: Password of the user which will be used to log onto the Secondary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  vrf_name:\n    description: Name of VRF to add this static route\n    label: VRF\n    type: string\n  route:\n    description: Static Route definition\n    label: Route\n    type: string\n  next_hop:\n    description: Next hop for the static route\n    label: Next hop\n    type: string\n\nresources:\n{% for device in [\"primary\", \"secondary\"] %}\n  netconf_configure_{{ device }}:\n    properties:\n      lock_timeout: 3000\n      configs:\n      - config:\n          str_replace:\n            params:\n              $NEXT_HOP:\n                get_param: next_hop\n            template: |\n              next-hop $NEXT_HOP;\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: routing-instances\n          - config_type: name\n            xml_type: named_tag\n            tag: instance\n            name: { get_param: vrf_name }\n          - config_type: tag\n            xml_type: tag\n            tag: routing-options\n          - config_type: tag\n            xml_type: tag\n            tag: static\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: route\n            name: { get_param: route }\n      device_ip:\n        get_param: {{ device }}_device_ip\n      password:\n        get_param: {{ device }}_device_password\n      port:\n        get_param: {{ device }}_device_port\n      username:\n        get_param: {{ device }}_device_username\n    {% if device == \"secondary\" %}depends_on: netconf_configure_primary{% endif %}\n    type: OS::Contrail::NetconfNamedConfigs\n{% endfor %}\n", 
        "parameter_mappings": {
            "secondary_device_password": "Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password", 
            "jinja_dummy_dependency": {
                "field": "id", 
                "path": [
                    {
                        "type": "public_ip", 
                        "id": "public_ip_id"
                    }
                ], 
                "ignore_missing": true
            }, 
            "route": "Pdestination", 
            "primary_device_password": "Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password", 
            "secondary_device_port": "Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port", 
            "primary_device_ip": "Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip", 
            "heat_timeout": "C60", 
            "next_hop": "Pnexthop", 
            "vrf_name": "Finternet_gateway+internet_gw_id:vrf_name", 
            "primary_device_username": "Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login", 
            "primary_device_port": "Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port", 
            "secondary_device_ip": "Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip", 
            "secondary_device_username": "Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login"
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,376:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,376:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,378:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,394:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/gw_interface_internet],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "gw_interface_internet", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  Inet Address\n\nparameters:\n  primary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\n    label: Ip address of the device.\n    type: string\n  primary_device_port:\n    description: Port that will be used to establish ssh connection to the Primary Device.\n    label: Port of the ssh connection.\n    type: number\n  primary_device_username:\n    description: Name of the user which will be used to log onto the Primary Device.\n    label: User name to log on to device.\n    type: string\n  primary_device_password:\n    description: Password of the user which will be used to log onto the Primary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  secondary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\n    label: Ip address of the device.\n    type: string\n  secondary_device_port:\n    description: Port that will be used to establish ssh connection to the Secondary Device.\n    label: Port of the ssh connection.\n    type: number\n  secondary_device_username:\n    description: Name of the user which will be used to log onto the Secondary Device.\n    label: User name to log on to device.\n    type: string\n  secondary_device_password:\n    description: Password of the user which will be used to log onto the Secondary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  primary_device_physical_interface:\n    description: MX physical port on which logical interface will be created\n    label: Underlying physical interface\n    type: string\n  secondary_device_physical_interface:\n    description: MX physical port on which logical interface will be created\n    label: Underlying physical interface\n    type: string\n  vlan:\n    description: Vlan tag for mx logical interface\n    label: Vlan Tag\n    type: string\n  gw_vip:\n    description: Virtual IP configured on VRRP\n    label: Inet Address CIDR\n    type: string\n  primary_device_gw_ip:\n    description: IP on primary device\n    label: Inet Address CIDR\n    type: string\n  secondary_device_gw_ip:\n    description: IP on secondary device\n    label: Inet Address CIDR\n    type: string\n  netmask:\n    description: Netmask for gw_ip\n    label: Netmask\n    type: number\n  vrrp_group:\n    type: string\n    label: VRRP Group\n  primary_device_priority:\n    type: string\n    label: Primary device priority\n  secondary_device_priority:\n    type: string\n    label: Secondary device priority\n  vrf_name:\n    type: string\n    label: VRF\n  bgp_group_name:\n    type: string\n    label: Name of BGP Group on VRF\n  primary_ibgp_config_group:\n    description: Name for apply group to use for downlink interface\n    label: Apply group name\n    type: string\n  secondary_ibgp_config_group:\n    description: Name for apply group to use for downlink interface\n    label: Apply group name\n    type: string\n  primary_logical_interface_name:\n    description: MX logical port\n    label: Underlying logical interface\n    type: string\n  secondary_logical_interface_name:\n    description: MX logical port\n    label: Underlying logical interface\n    type: string\n  gohan_id:\n    type: string\n    label: Gohan resource ID\n    description: UUID of the GW Interface\n  tenant_id:\n    type: string\n    label: Tenant ID\n  version:\n    type: number\n    label: Config version\nresources:\n{% for device in [\"primary\", \"secondary\"] %}\n  netconf_configure_{{ device }}:\n    properties:\n      lock_timeout: 3000\n      configs:\n      - config:\n          str_replace:\n            params:\n              $VRRP_GROUP:\n                    get_param: vrrp_group\n              $PRIORITY:\n                    get_param: {{ device }}_device_priority\n              $VIP:\n                    get_param: gw_vip\n            template: |\n                vrrp-group $VRRP_GROUP {\n                    virtual-address $VIP;\n                    priority $PRIORITY;\n                }\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: interfaces\n          - config_type: name\n            xml_type: named_tag\n            tag: interface\n            name: { get_param: {{ device }}_device_physical_interface }\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: unit\n            name: { get_param: vlan }\n          - config_type: tag\n            xml_type: tag\n            tag: family\n          - config_type: tag\n            xml_type: tag\n            tag: inet\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: address\n            name:\n              str_replace:\n                params:\n                  $DEVICE_IP:\n                    get_param: {{ device }}_device_gw_ip\n                  $NETMASK:\n                    get_param: netmask\n                template: |\n                  $DEVICE_IP/$NETMASK\n      - config:\n          str_replace:\n            params:\n              $DEVICE_GW_IP:\n                    get_param: {{ device }}_device_gw_ip\n              $NEIGHBOR_GW_IP:\n                    get_param: {% if device == \"secondary\" %}primary{% else %}secondary{% endif %}_device_gw_ip\n              $APPLY_GROUP:\n                    get_param: {{ device }}_ibgp_config_group\n            template: |\n              apply-groups $APPLY_GROUP\n              local-address $DEVICE_GW_IP;\n              neighbor $NEIGHBOR_GW_IP;\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: routing-instances\n          - config_type: name\n            xml_type: named_tag\n            tag: instance\n            name: { get_param: vrf_name }\n          - config_type: tag\n            xml_type: tag\n            tag: protocols\n          - config_type: tag\n            xml_type: tag\n            tag: bgp\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: group\n            name: { get_param: bgp_group_name }\n      device_ip:\n        get_param: {{ device }}_device_ip\n      password:\n        get_param: {{ device }}_device_password\n      port:\n        get_param: {{ device }}_device_port\n      username:\n        get_param: {{ device }}_device_username\n    {% if device == \"secondary\" %}depends_on: netconf_configure_primary{% endif %}\n    type: OS::Contrail::NetconfNamedConfigs\n{% endfor %}\n\n  vrrp_monitor:\n    type: ESI::Monitoring::MonitoringTarget\n    properties:\n      type: vrrp_pool\n      resource_type: gw_interfaces\n      resource_id: { get_param: gohan_id }\n      tenant_id: { get_param: tenant_id }\n      version: { get_param: version }\n      field_name: status\n      properties:\n        vrid:\n          - { get_param: vrrp_group }\n        primary:\n          host: { get_param: primary_device_ip }\n          port: { get_param: primary_device_port }\n          login: { get_param: primary_device_username }\n          password: { get_param: primary_device_password }\n          interface: { get_param: primary_logical_interface_name }\n        secondary:\n          host: { get_param: secondary_device_ip }\n          port: { get_param: secondary_device_port }\n          login: { get_param: secondary_device_username }\n          password: { get_param: secondary_device_password }\n          interface: { get_param: secondary_logical_interface_name }\n      syncer_properties:\n        etcd:\n          status:\n            key: status\n          hold_options:\n            positive_status:\n              - primary: MASTER\n                secondary: BACKUP\n            time_seconds: 360\n    depends_on: netconf_configure_secondary\n\noutputs:\n  monitoring_target_id:\n    description: Monitoring Target ID\n    value: { get_resource: vrrp_monitor}\n  monitoring_link:\n    description: Monitoring Process Link\n    value: { get_attr: [vrrp_monitor, link]}\n", 
        "parameter_mappings": {
            "secondary_device_physical_interface": "Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:er_physical_interface+secondary_interface_id:name", 
            "secondary_ibgp_config_group": "Finternet_gateway+internet_gw_id:internet_service+internet_service_id:secondary_ibgp_config_group", 
            "primary_device_password": "Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password", 
            "secondary_device_gw_ip": "Psecondary_ipv4", 
            "gohan_id": "Pid", 
            "bgp_group_name": "Cinet-gw-group", 
            "gw_vip": "Pgw_vipv4", 
            "primary_device_ip": "Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip", 
            "version": "Vauto_filled", 
            "secondary_device_username": "Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login", 
            "secondary_logical_interface_name": "Finternet_gateway+internet_gw_id:secondary_logical_interface_name", 
            "primary_logical_interface_name": "Finternet_gateway+internet_gw_id:primary_logical_interface_name", 
            "jinja_dummy_dependency": {
                "field": "id", 
                "path": [
                    {
                        "type": "public_ip", 
                        "id": "public_ip_id"
                    }
                ], 
                "ignore_missing": true
            }, 
            "vlan": "Finternet_gateway+internet_gw_id:vlan_id", 
            "primary_device_physical_interface": "Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:er_physical_interface+primary_interface_id:name", 
            "netmask": "Pnetmask", 
            "primary_device_gw_ip": "Pprimary_ipv4", 
            "vrrp_group": "Pvrid", 
            "primary_device_priority": "C105", 
            "jinja_force_dependency": {
                "field": "id", 
                "path": [
                    {
                        "type": "network", 
                        "id": "network_id"
                    }
                ]
            }, 
            "tenant_id": "Ptenant_id", 
            "secondary_device_port": "Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port", 
            "secondary_device_password": "Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password", 
            "heat_timeout": "C60", 
            "vrf_name": "Finternet_gateway+internet_gw_id:vrf_name", 
            "primary_device_username": "Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login", 
            "secondary_device_priority": "C100", 
            "primary_ibgp_config_group": "Finternet_gateway+internet_gw_id:internet_service+internet_service_id:primary_ibgp_config_group", 
            "primary_device_port": "Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port", 
            "secondary_device_ip": "Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip"
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,394:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,395:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,396:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,409:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/qos_option_internet],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "qos_option_internet", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  QoS Option\n\nparameters:\n  primary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\n    label: Ip address of the device.\n    type: string\n  primary_device_port:\n    description: Port that will be used to establish ssh connection to the Primary Device.\n    label: Port of the ssh connection.\n    type: number\n  primary_device_username:\n    description: Name of the user which will be used to log onto the Primary Device.\n    label: User name to log on to device.\n    type: string\n  primary_device_password:\n    description: Password of the user which will be used to log onto the Primary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  secondary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\n    label: Ip address of the device.\n    type: string\n  secondary_device_port:\n    description: Port that will be used to establish ssh connection to the Secondary Device.\n    label: Port of the ssh connection.\n    type: number\n  secondary_device_username:\n    description: Name of the user which will be used to log onto the Secondary Device.\n    label: User name to log on to device.\n    type: string\n  secondary_device_password:\n    description: Password of the user which will be used to log onto the Secondary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  incoming_policer_name:\n    description: Name of created incoming policer\n    label: Incoming policer name\n    type: string\n  incoming_policer_config:\n    description: Configuration of incoming policer\n    label: Incoming policer config\n    type: string\n  outgoing_policer_name:\n    description: Name of created outgoing policer\n    label: Outgoing policer name\n    type: string\n  outgoing_policer_config:\n    description: Configuration of outgoing policer\n    label: Outgoing policer config\n    type: string\n  neighbour_prefix:\n    description: Name of prefix list used to specify traffic source/destination\n    label: Neighbour prefix\n    type: string\nresources:\n{% for device in [\"primary\", \"secondary\"] %}\n  netconf_configure_{{ device }}:\n    properties:\n      lock_timeout: 3000\n      configs:\n      - config:\n          { get_param: incoming_policer_config }\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: firewall\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: three-color-policer\n            name: { get_param: incoming_policer_name }\n      - config:\n          { get_param: outgoing_policer_config }\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: firewall\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: policer\n            name: { get_param: outgoing_policer_name }\n      - config:\n          str_replace:\n            params:\n              $PREFIX:\n                get_param: neighbour_prefix\n              $CLASS:\n                {% if jinja_type == \"besteffort\" %} {{ jinja_be_forwarding_class }} {% else %} {{ jinja_ga_forwarding_class }} {% endif %}\n              $POLICER_NAME:\n                get_param: incoming_policer_name\n            template: |\n               interface-specific;\n               term bgp-accept {\n                   from {\n                       source-prefix-list {\n                           $PREFIX;\n                       }\n                       protocol tcp;\n                       port bgp;\n                   }\n                   then accept;\n               }\n               term vrrp-accept {\n                   from {\n                       source-prefix-list {\n                           $PREFIX;\n                       }\n                       protocol vrrp;\n                   }\n                   then policer 10K-RE;\n                   then accept;\n               }\n               term qos {\n                   then {\n                       three-color-policer {\n                           {% if jinja_type == \"besteffort\" %}two-rate{% else %}single-rate{% endif %} $POLICER_NAME;\n                       }\n                       forwarding-class $CLASS;\n                       accept;\n                   }\n               }\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: firewall\n          - config_type: tag\n            xml_type: tag\n            tag: family\n          - config_type: tag\n            xml_type: tag\n            tag: inet\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: filter\n            name:\n              str_replace:\n                params:\n                  $NAME:\n                    get_param: incoming_policer_name\n                template: |\n                  FILTER_$NAME\n      - config:\n          str_replace:\n            params:\n              $PREFIX:\n                get_param: neighbour_prefix\n              $POLICER_NAME:\n                get_param: outgoing_policer_name\n            template: |\n               interface-specific;\n               term bgp-accept {\n                   from {\n                       destination-prefix-list {\n                           $PREFIX;\n                       }\n                       protocol tcp;\n                       port bgp;\n                   }\n                   then accept;\n               }\n               term vrrp-accept {\n                   from {\n                       protocol vrrp;\n                   }\n                   then accept;\n               }\n               term policer {\n                   then {\n                       policer $POLICER_NAME;\n                       accept;\n                   }\n               }\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: firewall\n          - config_type: tag\n            xml_type: tag\n            tag: family\n          - config_type: tag\n            xml_type: tag\n            tag: inet\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: filter\n            name:\n              str_replace:\n                params:\n                  $NAME:\n                    get_param: outgoing_policer_name\n                template: |\n                  FILTER_$NAME\n      device_ip:\n        get_param: {{ device }}_device_ip\n      password:\n        get_param: {{ device }}_device_password\n      port:\n        get_param: {{ device }}_device_port\n      username:\n        get_param: {{ device }}_device_username\n    {% if device == \"secondary\" %}depends_on: netconf_configure_primary{% endif %}\n    type: OS::Contrail::NetconfNamedConfigs\n{% endfor %}\n", 
        "parameter_mappings": {
            "secondary_device_password": "Fha_router+ha_router_id:edge_router+secondary_router_id:password", 
            "jinja_be_forwarding_class": "Finternet_service+internet_service_id:be_forwarding_class", 
            "primary_device_password": "Fha_router+ha_router_id:edge_router+primary_router_id:password", 
            "jinja_ga_forwarding_class": "Finternet_service+internet_service_id:ga_forwarding_class", 
            "incoming_policer_name": "Pincoming_policer_name", 
            "jinja_type": "Pqos_type", 
            "secondary_device_port": "Fha_router+ha_router_id:edge_router+secondary_router_id:ssh_port", 
            "primary_device_ip": "Fha_router+ha_router_id:edge_router+primary_router_id:ip", 
            "heat_timeout": "C60", 
            "outgoing_policer_config": "Poutgoing_policer_config", 
            "incoming_policer_config": "Pincoming_policer_config", 
            "outgoing_policer_name": "Poutgoing_policer_name", 
            "neighbour_prefix": "Finternet_service+internet_service_id:neighbour_prefix", 
            "secondary_device_username": "Fha_router+ha_router_id:edge_router+secondary_router_id:login", 
            "primary_device_port": "Fha_router+ha_router_id:edge_router+primary_router_id:ssh_port", 
            "secondary_device_ip": "Fha_router+ha_router_id:edge_router+secondary_router_id:ip", 
            "primary_device_username": "Fha_router+ha_router_id:edge_router+primary_router_id:login"
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,410:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,412:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,413:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,421:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/public_ip],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "public_ip", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  QoS Option\n\nparameters:\n  primary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\n    label: Ip address of the device.\n    type: string\n  primary_device_port:\n    description: Port that will be used to establish ssh connection to the Primary Device.\n    label: Port of the ssh connection.\n    type: number\n  primary_device_username:\n    description: Name of the user which will be used to log onto the Primary Device.\n    label: User name to log on to device.\n    type: string\n  primary_device_password:\n    description: Password of the user which will be used to log onto the Primary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  secondary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\n    label: Ip address of the device.\n    type: string\n  secondary_device_port:\n    description: Port that will be used to establish ssh connection to the Secondary Device.\n    label: Port of the ssh connection.\n    type: number\n  secondary_device_username:\n    description: Name of the user which will be used to log onto the Secondary Device.\n    label: User name to log on to device.\n    type: string\n  secondary_device_password:\n    description: Password of the user which will be used to log onto the Secondary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  prefix_list_name:\n    label: Prefix List name.\n    type: string\n  ip_cidr:\n    label: Public IP CIDR\n    type: string\n  ip_mask:\n    label: Public IP CIDR\n    type: string\nresources:\n{% for device in [\"primary\", \"secondary\"] %}\n  netconf_configure_{{ device }}:\n    properties:\n      lock_timeout: 3000\n      configs:\n      - config: \"\"\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: policy-options\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: prefix-list\n            name: { get_param: prefix_list_name }\n          - config_type: name\n            xml_type: named_tag\n            tag: prefix-list-item\n            name:\n              str_replace:\n                params:\n                  $CIDR:\n                    { get_param: ip_cidr }\n                  $MASK:\n                    { get_param: ip_mask }\n                template: |\n                  $CIDR/$MASK\n      device_ip:\n        get_param: {{ device }}_device_ip\n      password:\n        get_param: {{ device }}_device_password\n      port:\n        get_param: {{ device }}_device_port\n      username:\n        get_param: {{ device }}_device_username\n    {% if device == \"secondary\" %}depends_on: netconf_configure_primary{% endif %}\n    type: OS::Contrail::NetconfNamedConfigs\n{% endfor %}\n", 
        "parameter_mappings": {
            "secondary_device_password": "Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password", 
            "primary_device_password": "Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password", 
            "secondary_device_port": "Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port", 
            "primary_device_ip": "Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip", 
            "ip_mask": "Psubmask_length", 
            "heat_timeout": "C60", 
            "ip_cidr": "Pcidr", 
            "primary_device_username": "Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login", 
            "secondary_device_username": "Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login", 
            "primary_device_port": "Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port", 
            "secondary_device_ip": "Finternet_gateway+internet_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip", 
            "prefix_list_name": "AFinternet_gateway+internet_gw_id:vrf_name&C_prefix"
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,421:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,422:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,423:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,433:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/qos_option_vpn],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "qos_option_vpn", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  QoS Option\n\nparameters:\n  primary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\n    label: Ip address of the device.\n    type: string\n  primary_device_port:\n    description: Port that will be used to establish ssh connection to the Primary Device.\n    label: Port of the ssh connection.\n    type: number\n  primary_device_username:\n    description: Name of the user which will be used to log onto the Primary Device.\n    label: User name to log on to device.\n    type: string\n  primary_device_password:\n    description: Password of the user which will be used to log onto the Primary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  secondary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\n    label: Ip address of the device.\n    type: string\n  secondary_device_port:\n    description: Port that will be used to establish ssh connection to the Secondary Device.\n    label: Port of the ssh connection.\n    type: number\n  secondary_device_username:\n    description: Name of the user which will be used to log onto the Secondary Device.\n    label: User name to log on to device.\n    type: string\n  secondary_device_password:\n    description: Password of the user which will be used to log onto the Secondary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  incoming_policer_name:\n    description: Name of created incoming policer\n    label: Incoming policer name\n    type: string\n  incoming_policer_config:\n    description: Configuration of incoming policer\n    label: Incoming policer config\n    type: string\n  outgoing_policer_name:\n    description: Name of created outgoing policer\n    label: Outgoing policer name\n    type: string\n  outgoing_policer_config:\n    description: Configuration of outgoing policer\n    label: Outgoing policer config\n    type: string\n  neighbour_prefix:\n    description: Name of prefix list used to specify traffic source/destination\n    label: Neighbour prefix\n    type: string\nresources:\n{% for device in [\"primary\", \"secondary\"] %}\n  netconf_configure_{{ device }}:\n    properties:\n      lock_timeout: 3000\n      configs:\n      - config:\n          { get_param: incoming_policer_config }\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: firewall\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: three-color-policer\n            name: { get_param: incoming_policer_name }\n      - config:\n          { get_param: outgoing_policer_config }\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: firewall\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: policer\n            name: { get_param: outgoing_policer_name }\n      - config:\n          str_replace:\n            params:\n              $PREFIX:\n                get_param: neighbour_prefix\n              $CLASS:\n                {% if jinja_type == \"besteffort\" %} {{ jinja_be_forwarding_class }} {% else %} {{ jinja_ga_forwarding_class }} {% endif %}\n              $POLICER_NAME:\n                get_param: incoming_policer_name\n            template: |\n               interface-specific;\n               term bgp-accept {\n                   from {\n                       source-prefix-list {\n                           $PREFIX;\n                       }\n                       protocol tcp;\n                       port bgp;\n                   }\n                   then accept;\n               }\n               term vrrp-accept {\n                   from {\n                       source-prefix-list {\n                           $PREFIX;\n                       }\n                       protocol vrrp;\n                   }\n                   then policer 10K-RE;\n                   then accept;\n               }\n               term qos {\n                   then {\n                       three-color-policer {\n                           {% if jinja_type == \"besteffort\" %}two-rate{% else %}single-rate{% endif %} $POLICER_NAME;\n                       }\n                       forwarding-class $CLASS;\n                       accept;\n                   }\n               }\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: firewall\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: filter\n            name:\n              str_replace:\n                params:\n                  $NAME:\n                    get_param: incoming_policer_name\n                template: |\n                  FILTER_$NAME\n      - config:\n          str_replace:\n            params:\n              $PREFIX:\n                get_param: neighbour_prefix\n              $POLICER_NAME:\n                get_param: outgoing_policer_name\n            template: |\n               interface-specific;\n               term bgp-accept {\n                   from {\n                       destination-prefix-list {\n                           $PREFIX;\n                       }\n                       protocol tcp;\n                       port bgp;\n                   }\n                   then accept;\n               }\n               term vrrp-accept {\n                   from {\n                       protocol vrrp;\n                   }\n                   then accept;\n               }\n               term policer {\n                   then {\n                       policer $POLICER_NAME;\n                       accept;\n                   }\n               }\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: firewall\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: filter\n            name:\n              str_replace:\n                params:\n                  $NAME:\n                    get_param: outgoing_policer_name\n                template: |\n                  FILTER_$NAME\n      device_ip:\n        get_param: {{ device }}_device_ip\n      password:\n        get_param: {{ device }}_device_password\n      port:\n        get_param: {{ device }}_device_port\n      username:\n        get_param: {{ device }}_device_username\n    {% if device == \"secondary\" %}depends_on: netconf_configure_primary{% endif %}\n    type: OS::Contrail::NetconfNamedConfigs\n{% endfor %}\n", 
        "parameter_mappings": {
            "secondary_device_password": "Fha_router+ha_router_id:edge_router+secondary_router_id:password", 
            "jinja_be_forwarding_class": "Fvpn_service+vpn_service_id:be_forwarding_class", 
            "primary_device_password": "Fha_router+ha_router_id:edge_router+primary_router_id:password", 
            "jinja_ga_forwarding_class": "Fvpn_service+vpn_service_id:ga_forwarding_class", 
            "incoming_policer_name": "Pincoming_policer_name", 
            "jinja_type": "Pqos_type", 
            "secondary_device_port": "Fha_router+ha_router_id:edge_router+secondary_router_id:ssh_port", 
            "primary_device_ip": "Fha_router+ha_router_id:edge_router+primary_router_id:ip", 
            "heat_timeout": "C60", 
            "outgoing_policer_config": "Poutgoing_policer_config", 
            "incoming_policer_config": "Pincoming_policer_config", 
            "outgoing_policer_name": "Poutgoing_policer_name", 
            "neighbour_prefix": "Fvpn_service+vpn_service_id:neighbour_prefix", 
            "secondary_device_username": "Fha_router+ha_router_id:edge_router+secondary_router_id:login", 
            "primary_device_port": "Fha_router+ha_router_id:edge_router+primary_router_id:ssh_port", 
            "secondary_device_ip": "Fha_router+ha_router_id:edge_router+secondary_router_id:ip", 
            "primary_device_username": "Fha_router+ha_router_id:edge_router+primary_router_id:login"
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,433:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,434:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,435:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,443:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/vpn_gateway],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "vpn_gateway", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  VPN Gateway\n\nparameters:\n  primary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\n    label: Ip address of the device.\n    type: string\n  primary_device_port:\n    description: Port that will be used to establish ssh connection to the Primary Device.\n    label: Port of the ssh connection.\n    type: number\n  primary_device_username:\n    description: Name of the user which will be used to log onto the Primary Device.\n    label: User name to log on to device.\n    type: string\n  primary_device_password:\n    description: Password of the user which will be used to log onto the Primary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  primary_device_logical_downlink_interface:\n    description: Name of the created logical downlink interface on the Primary device\n    label: Logical Interface name\n    type: string\n  primary_device_physical_downlink_interface:\n    description: Physical port on the Primary device on which the logical downlink port will be configured\n    label: Underlying physical interface\n    type: string\n  primary_device_logical_uplink_interface:\n    description: Name of the created logical uplink interface on the Primary device\n    label: Logical Interface name\n    type: string\n  primary_device_physical_uplink_interface:\n    description: Physical port on the Primary device on which the logical uplink port will be configured\n    label: Underlying physical interface\n    type: string\n  secondary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\n    label: Ip address of the device.\n    type: string\n  secondary_device_port:\n    description: Port that will be used to establish ssh connection to the Secondary Device.\n    label: Port of the ssh connection.\n    type: number\n  secondary_device_username:\n    description: Name of the user which will be used to log onto the Secondary Device.\n    label: User name to log on to device.\n    type: string\n  secondary_device_password:\n    description: Password of the user which will be used to log onto the Secondary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  secondary_device_logical_downlink_interface:\n    description: Name of the created logical downlink interface on the Secondary device\n    label: Logical Interface name\n    type: string\n  secondary_device_physical_downlink_interface:\n    description: Physical port on the Secondary device on which the logical downlink port will be configured\n    label: Underlying physical interface\n    type: string\n  secondary_device_logical_uplink_interface:\n    description: Name of the created logical uplink interface on the Secondary device\n    label: Logical Interface name\n    type: string\n  secondary_device_physical_uplink_interface:\n    description: Physical port on the Secondary device on which the logical uplink port will be configured\n    label: Underlying physical interface\n    type: string\n  downlink_vlan:\n    description: vlan tag used by logical downlink interface\n    label: VLAN ID\n    type: string\n  uplink_vlan:\n    description: vlan tag used by logical uplink interface\n    label: VLAN ID\n    type: string\n  vrf_name:\n    description: Name for VRF used by logical interfaces\n    label: VRF name\n    type: string\n  input_filter_name:\n    description: Name for policer used for input\n    label: Input filter name\n    type: string\n  output_filter_name:\n    description: Name for policer used for output\n    label: Output filter name\n    type: string\n  primary_downlink_vrrp_config_group:\n    description: Name for apply group to use for downlink interface for VRRP\n    label: Apply group name\n    type: string\n  secondary_downlink_vrrp_config_group:\n    description: Name for apply group to use for downlink interface for VRRP\n    label: Apply group name\n    type: string\n\nresources:\n{% for device in [\"primary\", \"secondary\"] %}\n  netconf_configure_{{ device }}:\n    properties:\n      lock_timeout: 3000\n      on_update: merge\n      configs:\n      - config:\n          str_replace:\n            params:\n              $VLAN:\n                get_param: downlink_vlan\n              $INPUT_FILTER:\n                get_param: input_filter_name\n              $OUTPUT_FILTER:\n                get_param: output_filter_name\n              $APPLY_GROUP:\n                get_param: {{ device }}_downlink_vrrp_config_group\n            template: |\n              apply-groups $APPLY_GROUP\n              vlan-id $VLAN;\n              description vpn_gw;\n              family inet {\n                  filter {\n                      input $INPUT_FILTER;\n                      output $OUTPUT_FILTER;\n                  }\n              }\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: interfaces\n          - config_type: name\n            xml_type: named_tag\n            tag: interface\n            name: { get_param: {{ device }}_device_physical_downlink_interface }\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: unit\n            name: { get_param: downlink_vlan }\n      - config:\n          str_replace:\n            params:\n              $LIFD:\n                get_param: {{ device }}_device_logical_downlink_interface\n              $LIFU:\n                get_param: {{ device }}_device_logical_uplink_interface\n            template: |\n                instance-type virtual-router;\n                interface $LIFD;\n                interface $LIFU;\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: routing-instances\n          - config_type: name\n            xml_type: named_tag\n            tag: instance\n            name: { get_param: vrf_name }\n      - config:\n          str_replace:\n            params:\n              $VLAN:\n                get_param: uplink_vlan\n            template: |\n              vlan-id $VLAN;\n              description CloudGW_vpn;\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: interfaces\n          - config_type: name\n            xml_type: named_tag\n            tag: interface\n            name: { get_param: {{ device }}_device_physical_uplink_interface }\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: unit\n            name: { get_param: uplink_vlan }\n      device_ip:\n        get_param: {{ device }}_device_ip\n      password:\n        get_param: {{ device }}_device_password\n      port:\n        get_param: {{ device }}_device_port\n      username:\n        get_param: {{ device }}_device_username\n    {% if device == \"secondary\" %}depends_on: netconf_configure_primary{% endif %}\n    type: OS::Contrail::NetconfNamedConfigs\n{% endfor %}\n", 
        "parameter_mappings": {
            "primary_device_logical_uplink_interface": "Pprimary_logical_uplink_interface_name", 
            "primary_device_logical_downlink_interface": "Pprimary_logical_downlink_interface_name", 
            "primary_device_password": "Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password", 
            "output_filter_name": "ACFILTER_&Fqos_option+qos_option_id:outgoing_policer_name", 
            "primary_device_ip": "Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip", 
            "secondary_device_physical_downlink_interface": "Fha_interface+downlink_interface_id:er_physical_interface+secondary_interface_id:name", 
            "secondary_device_username": "Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login", 
            "primary_device_physical_uplink_interface": "Fha_interface+uplink_interface_id:er_physical_interface+primary_interface_id:name", 
            "secondary_device_logical_uplink_interface": "Psecondary_logical_uplink_interface_name", 
            "downlink_vlan": "Pdownlink_vlan_id", 
            "secondary_device_logical_downlink_interface": "Psecondary_logical_downlink_interface_name", 
            "input_filter_name": "ACFILTER_&Fqos_option+qos_option_id:incoming_policer_name", 
            "uplink_vlan": "Puplink_vlan_id", 
            "secondary_device_port": "Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port", 
            "primary_downlink_vrrp_config_group": "Fvpn_service+vpn_service_id:primary_downlink_vrrp_config_group", 
            "secondary_device_password": "Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password", 
            "heat_timeout": "C60", 
            "vrf_name": "Pvrf_name", 
            "primary_device_username": "Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login", 
            "primary_device_physical_downlink_interface": "Fha_interface+downlink_interface_id:er_physical_interface+primary_interface_id:name", 
            "secondary_downlink_vrrp_config_group": "Fvpn_service+vpn_service_id:secondary_downlink_vrrp_config_group", 
            "primary_device_port": "Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port", 
            "secondary_device_physical_uplink_interface": "Fha_interface+uplink_interface_id:er_physical_interface+secondary_interface_id:name", 
            "secondary_device_ip": "Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip"
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,443:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,444:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,445:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,453:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/gw_interface_vpn],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "gw_interface_vpn", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  Inet Address\n\nparameters:\n  primary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\n    label: Ip address of the device.\n    type: string\n  primary_device_port:\n    description: Port that will be used to establish ssh connection to the Primary Device.\n    label: Port of the ssh connection.\n    type: number\n  primary_device_username:\n    description: Name of the user which will be used to log onto the Primary Device.\n    label: User name to log on to device.\n    type: string\n  primary_device_password:\n    description: Password of the user which will be used to log onto the Primary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  secondary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\n    label: Ip address of the device.\n    type: string\n  secondary_device_port:\n    description: Port that will be used to establish ssh connection to the Secondary Device.\n    label: Port of the ssh connection.\n    type: number\n  secondary_device_username:\n    description: Name of the user which will be used to log onto the Secondary Device.\n    label: User name to log on to device.\n    type: string\n  secondary_device_password:\n    description: Password of the user which will be used to log onto the Secondary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  primary_device_physical_interface:\n    description: MX physical port on which logical interface will be created\n    label: Underlying physical interface\n    type: string\n  secondary_device_physical_interface:\n    description: MX physical port on which logical interface will be created\n    label: Underlying physical interface\n    type: string\n  downlink_vlan_id:\n    description: Vlan tag for mx logical downlink interface\n    label: Vlan Tag\n    type: string\n  gw_vip:\n    description: Virtual IP configured on VRRP\n    label: Inet Address CIDR\n    type: string\n  primary_device_gw_ip:\n    description: IP on primary device\n    label: Inet Address CIDR\n    type: string\n  secondary_device_gw_ip:\n    description: IP on secondary device\n    label: Inet Address CIDR\n    type: string\n  netmask:\n    description: Netmask for gw_ip\n    label: Netmask\n    type: number\n  vrrp_group:\n    type: string\n    label: VRRP Group\n  primary_device_priority:\n    type: string\n    label: Primary device priority\n  secondary_device_priority:\n    type: string\n    label: Secondary device priority\n  vrf_name:\n    type: string\n    label: VRF\n  bgp_group_name:\n    type: string\n    label: Name of BGP Group on VRF\n  local_as:\n    type: string\n    label: Local AS Number\n  primary_ibgp_config_group:\n    description: Name for apply group to use for downlink interface\n    label: Apply group name\n    type: string\n  secondary_ibgp_config_group:\n    description: Name for apply group to use for downlink interface\n    label: Apply group name\n    type: string\n  primary_logical_interface_name:\n    description: MX logical port\n    label: Underlying logical interface\n    type: string\n  secondary_logical_interface_name:\n    description: MX logical port\n    label: Underlying logical interface\n    type: string\n  gohan_id:\n    type: string\n    label: Gohan resource ID\n    description: UUID of the GW Interface\n  tenant_id:\n    type: string\n    label: Tenant ID\n  version:\n    type: number\n    label: Config version\nresources:\n{% for device in [\"primary\", \"secondary\"] %}\n  netconf_configure_{{ device }}:\n    properties:\n      lock_timeout: 3000\n      configs:\n      - config:\n          str_replace:\n            params:\n              $VRRP_GROUP:\n                    get_param: vrrp_group\n              $PRIORITY:\n                    get_param: {{ device }}_device_priority\n              $VIP:\n                    get_param: gw_vip\n            template: |\n                vrrp-group $VRRP_GROUP {\n                    virtual-address $VIP;\n                    priority $PRIORITY;\n                }\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: interfaces\n          - config_type: name\n            xml_type: named_tag\n            tag: interface\n            name: { get_param: {{ device }}_device_physical_interface }\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: unit\n            name: { get_param: downlink_vlan_id }\n          - config_type: tag\n            xml_type: tag\n            tag: family\n          - config_type: tag\n            xml_type: tag\n            tag: inet\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: address\n            name:\n              str_replace:\n                params:\n                  $DEVICE_IP:\n                    get_param: {{ device }}_device_gw_ip\n                  $NETMASK:\n                    get_param: netmask\n                template: |\n                  $DEVICE_IP/$NETMASK\n      - config:\n          str_replace:\n            params:\n              $DEVICE_GW_IP:\n                    get_param: {{ device }}_device_gw_ip\n              $NEIGHBOR_GW_IP:\n                    get_param: {% if device == \"secondary\" %}primary{% else %}secondary{% endif %}_device_gw_ip\n              $LOCAL_AS:\n                    get_param: local_as\n              $APPLY_GROUP:\n                    get_param: {{ device }}_ibgp_config_group\n            template: |\n              apply-groups $APPLY_GROUP;\n              local-address $DEVICE_GW_IP;\n              peer-as $LOCAL_AS;\n              neighbor $NEIGHBOR_GW_IP;\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: routing-instances\n          - config_type: name\n            xml_type: named_tag\n            tag: instance\n            name: { get_param: vrf_name }\n          - config_type: tag\n            xml_type: tag\n            tag: protocols\n          - config_type: tag\n            xml_type: tag\n            tag: bgp\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: group\n            name: { get_param: bgp_group_name }\n      device_ip:\n        get_param: {{ device }}_device_ip\n      password:\n        get_param: {{ device }}_device_password\n      port:\n        get_param: {{ device }}_device_port\n      username:\n        get_param: {{ device }}_device_username\n    {% if device == \"secondary\" %}depends_on: netconf_configure_primary{% endif %}\n    type: OS::Contrail::NetconfNamedConfigs\n{% endfor %}\n\n  vrrp_monitor:\n    type: ESI::Monitoring::MonitoringTarget\n    properties:\n      type: vrrp_pool\n      resource_type: gw_interfaces\n      resource_id: { get_param: gohan_id }\n      tenant_id: { get_param: tenant_id }\n      version: { get_param: version }\n      field_name: status\n      properties:\n        vrid:\n          - { get_param: vrrp_group }\n        primary:\n          host: { get_param: primary_device_ip }\n          port: { get_param: primary_device_port }\n          login: { get_param: primary_device_username }\n          password: { get_param: primary_device_password }\n          interface: { get_param: primary_logical_interface_name }\n        secondary:\n          host: { get_param: secondary_device_ip }\n          port: { get_param: secondary_device_port }\n          login: { get_param: secondary_device_username }\n          password: { get_param: secondary_device_password }\n          interface: { get_param: secondary_logical_interface_name }\n      syncer_properties:\n        etcd:\n          status:\n            key: status\n          hold_options:\n            positive_status:\n              - primary: MASTER\n                secondary: BACKUP\n            time_seconds: 360\n    depends_on: netconf_configure_secondary\n\noutputs:\n  monitoring_target_id:\n    description: Monitoring Target ID\n    value: { get_resource: vrrp_monitor}\n  monitoring_link:\n    description: Monitoring Process Link\n    value: { get_attr: [vrrp_monitor, link]}\n", 
        "parameter_mappings": {
            "secondary_device_physical_interface": "Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:er_physical_interface+secondary_interface_id:name", 
            "secondary_ibgp_config_group": "Fvpn_gateway+vpn_gw_id:vpn_service+vpn_service_id:secondary_ibgp_config_group", 
            "primary_device_password": "Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password", 
            "secondary_device_gw_ip": "Psecondary_ipv4", 
            "gohan_id": "Pid", 
            "bgp_group_name": "Cinet-gw-group", 
            "gw_vip": "Pgw_vipv4", 
            "primary_device_ip": "Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip", 
            "version": "Vauto_filled", 
            "secondary_device_username": "Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login", 
            "primary_device_username": "Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login", 
            "downlink_vlan_id": "Fvpn_gateway+vpn_gw_id:downlink_vlan_id", 
            "secondary_logical_interface_name": "Fvpn_gateway+vpn_gw_id:secondary_logical_downlink_interface_name", 
            "primary_logical_interface_name": "Fvpn_gateway+vpn_gw_id:primary_logical_downlink_interface_name", 
            "local_as": "Fvpn_gateway+vpn_gw_id:local_as_number", 
            "primary_device_physical_interface": "Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:er_physical_interface+primary_interface_id:name", 
            "netmask": "Pnetmask", 
            "primary_device_gw_ip": "Pprimary_ipv4", 
            "vrrp_group": "Pvrid", 
            "primary_device_priority": "C105", 
            "jinja_force_dependency": "Fvpn_gateway+vpn_gw_id:vpn_interface+connected_vpn_interface:id", 
            "tenant_id": "Ptenant_id", 
            "secondary_device_port": "Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port", 
            "secondary_device_password": "Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password", 
            "heat_timeout": "C60", 
            "vrf_name": "Fvpn_gateway+vpn_gw_id:vrf_name", 
            "jinja_force_dependency2": {
                "field": "id", 
                "path": [
                    {
                        "type": "network", 
                        "id": "network_id"
                    }
                ]
            }, 
            "secondary_device_priority": "C100", 
            "primary_ibgp_config_group": "Fvpn_gateway+vpn_gw_id:vpn_service+vpn_service_id:primary_ibgp_config_group", 
            "primary_device_port": "Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port", 
            "secondary_device_ip": "Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip"
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,454:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,454:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,456:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,463:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/static_route_vpn],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "static_route_vpn", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  VPN Gateway Static Route\n\nparameters:\n  primary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\n    label: Ip address of the device.\n    type: string\n  primary_device_port:\n    description: Port that will be used to establish ssh connection to the Primary Device.\n    label: Port of the ssh connection.\n    type: number\n  primary_device_username:\n    description: Name of the user which will be used to log onto the Primary Device.\n    label: User name to log on to device.\n    type: string\n  primary_device_password:\n    description: Password of the user which will be used to log onto the Primary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  secondary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\n    label: Ip address of the device.\n    type: string\n  secondary_device_port:\n    description: Port that will be used to establish ssh connection to the Secondary Device.\n    label: Port of the ssh connection.\n    type: number\n  secondary_device_username:\n    description: Name of the user which will be used to log onto the Secondary Device.\n    label: User name to log on to device.\n    type: string\n  secondary_device_password:\n    description: Password of the user which will be used to log onto the Secondary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  vrf_name:\n    description: Name of VRF to add this static route\n    label: VRF\n    type: string\n  route:\n    description: Static Route definition\n    label: Route\n    type: string\n  next_hop:\n    description: Next hop for the static route\n    label: Next hop\n    type: string\n\nresources:\n{% for device in [\"primary\", \"secondary\"] %}\n  netconf_configure_{{ device }}:\n    properties:\n      lock_timeout: 3000\n      configs:\n      - config:\n          str_replace:\n            params:\n              $NEXT_HOP:\n                get_param: next_hop\n            template: |\n              next-hop $NEXT_HOP;\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: routing-instances\n          - config_type: name\n            xml_type: named_tag\n            tag: instance\n            name: { get_param: vrf_name }\n          - config_type: tag\n            xml_type: tag\n            tag: routing-options\n          - config_type: tag\n            xml_type: tag\n            tag: static\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: route\n            name: { get_param: route }\n      device_ip:\n        get_param: {{ device }}_device_ip\n      password:\n        get_param: {{ device }}_device_password\n      port:\n        get_param: {{ device }}_device_port\n      username:\n        get_param: {{ device }}_device_username\n    {% if device == \"secondary\" %}depends_on: netconf_configure_primary{% endif %}\n    type: OS::Contrail::NetconfNamedConfigs\n{% endfor %}\n", 
        "parameter_mappings": {
            "secondary_device_password": "Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password", 
            "route": "Pdestination", 
            "primary_device_password": "Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password", 
            "secondary_device_port": "Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port", 
            "primary_device_ip": "Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip", 
            "heat_timeout": "C60", 
            "next_hop": "Pnexthop", 
            "vrf_name": "Fvpn_gateway+vpn_gw_id:vrf_name", 
            "primary_device_username": "Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login", 
            "primary_device_port": "Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port", 
            "secondary_device_ip": "Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip", 
            "secondary_device_username": "Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login"
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,463:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,464:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,465:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,472:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/vpn_interface],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "vpn_interface", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  Inet Address\n\nparameters:\n  primary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\n    label: Ip address of the device.\n    type: string\n  primary_device_port:\n    description: Port that will be used to establish ssh connection to the Primary Device.\n    label: Port of the ssh connection.\n    type: number\n  primary_device_username:\n    description: Name of the user which will be used to log onto the Primary Device.\n    label: User name to log on to device.\n    type: string\n  primary_device_password:\n    description: Password of the user which will be used to log onto the Primary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  secondary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\n    label: Ip address of the device.\n    type: string\n  secondary_device_port:\n    description: Port that will be used to establish ssh connection to the Secondary Device.\n    label: Port of the ssh connection.\n    type: number\n  secondary_device_username:\n    description: Name of the user which will be used to log onto the Secondary Device.\n    label: User name to log on to device.\n    type: string\n  secondary_device_password:\n    description: Password of the user which will be used to log onto the Secondary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  primary_device_physical_interface:\n    description: MX physical port on which logical interface will be created\n    label: Underlying physical interface\n    type: string\n  secondary_device_physical_interface:\n    description: MX physical port on which logical interface will be created\n    label: Underlying physical interface\n    type: string\n  primary_device_logical_interface:\n    description: Name of the created logical uplink interface on the Primary device\n    label: Logical Interface name\n    type: string\n  secondary_device_logical_interface:\n    description: Name of the created logical uplink interface on the Secondary device\n    label: Logical Interface name\n    type: string\n  vrf_name:\n    description: Name of VRF (routing-instance) in MX config\n    label: VRF Name\n    type: string\n  local_as:\n    type: number\n    label: Local AS Number\n  primary_ebgp_config_group:\n    description: Name of MX config group for eBGP config\n    label: eBGP config group\n    type: string\n  secondary_ebgp_config_group:\n    description: Name of MX config group for eBGP config\n    label: eBGP config group\n    type: string\n  uplink_vlan:\n    description: VLAN ID used on uplink interfaces (same for both primary and secondary device)\n    label: Uplink VLAN ID\n    type: string\n  primary_peer_ip:\n    description: IP address of primary router eBGP neighbour\n    label: Primary device BGP peer\n    type: string\n  secondary_peer_ip:\n    description: IP address of secondary router eBGP neighbour\n    label: Secondary device BGP peer\n    type: string\n  primary_router_id:\n    description: Primary router VRF router id\n    label: Primary router id\n    type: string\n  secondary_router_id:\n    description: Secondary router VRF router id\n    label: Secondary router id\n    type: string\n  remote_as:\n    description: eBGP remote autonomous system\n    label: Remote AS\n    type: string\n  md5:\n    description: eBGP authentication key\n    label: eBGP authentication key\n    type: string\n  bgp_group_name:\n    description: Name of eBGP group\n    label: eBGP group name\n    type: string\n  gohan_id:\n    type: string\n    label: Gohan resource ID\n    description: UUID of the VPN Interface\n  tenant_id:\n    type: string\n    label: Tenant ID\n  version:\n    type: number\n    label: Config version\n\nresources:\n{% set primary_ip_uplink_split = jinja_primary_uplink_ip.split('/') %}\n{% set secondary_ip_uplink_split = jinja_secondary_uplink_ip.split('/') %}\n{% for device in [\"primary\", \"secondary\"] %}\n  netconf_configure_{{ device }}:\n    properties:\n      lock_timeout: 3000\n      configs:\n      - config: \"\"\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: interfaces\n          - config_type: name\n            xml_type: named_tag\n            tag: interface\n            name: { get_param: {{ device }}_device_physical_interface }\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: unit\n            name: { get_param: uplink_vlan }\n          - config_type: tag\n            xml_type: tag\n            tag: family\n          - config_type: tag\n            xml_type: tag\n            tag: inet\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: address\n            name: {% if device == \"primary\" %} {{ jinja_primary_uplink_ip }} {% else %} {{ jinja_secondary_uplink_ip }} {% endif %}\n      - config:\n          str_replace:\n            params:\n              $NEIGHBOR_IP:\n                    get_param: {{ device }}_peer_ip\n              $REMOTE_AS:\n                    get_param: remote_as\n              $APPLY_GROUP:\n                    get_param: {{ device }}_ebgp_config_group\n              $KEY:\n                    get_param: md5\n            template: |\n              apply-groups $APPLY_GROUP;\n              local-address {% if device == \"primary\" %} {{ primary_ip_uplink_split[0] }} {% else %} {{ secondary_ip_uplink_split[0] }} {% endif %};\n              peer-as $REMOTE_AS;\n              neighbor $NEIGHBOR_IP authentication-key $KEY;\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: routing-instances\n          - config_type: name\n            xml_type: named_tag\n            tag: instance\n            name: { get_param: vrf_name }\n          - config_type: tag\n            xml_type: tag\n            tag: protocols\n          - config_type: tag\n            xml_type: tag\n            tag: bgp\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: group\n            name: { get_param: bgp_group_name }\n      - config:\n          str_replace:\n            params:\n              $ROUTER_ID:\n                    get_param: {{device}}_router_id\n              $LOCAL_AS:\n                    get_param: local_as\n            template: |\n              router-id $ROUTER_ID;\n              autonomous-system $LOCAL_AS;\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: routing-instances\n          - config_type: name\n            xml_type: named_tag\n            tag: instance\n            name: { get_param: vrf_name }\n          - config_type: tag\n            xml_type: tag\n            tag: routing-options\n      device_ip:\n        get_param: {{ device }}_device_ip\n      password:\n        get_param: {{ device }}_device_password\n      port:\n        get_param: {{ device }}_device_port\n      username:\n        get_param: {{ device }}_device_username\n    {% if device == \"secondary\" %}depends_on: netconf_configure_primary{% endif %}\n    type: OS::Contrail::NetconfNamedConfigs\n{% endfor %}\n\n  bgp_monitor:\n    type: ESI::Monitoring::MonitoringTarget\n    properties:\n      type: bgp_pool\n      resource_type: vpn_interfaces\n      resource_id: { get_param: gohan_id }\n      tenant_id: { get_param: tenant_id }\n      version: { get_param: version }\n      field_name: status\n      properties:\n        instance: { get_param: vrf_name }\n        primary:\n          host: { get_param: primary_device_ip }\n          port: { get_param: primary_device_port }\n          login: { get_param: primary_device_username }\n          password: { get_param: primary_device_password }\n          peer_address: { get_param: primary_peer_ip }\n        secondary:\n          host: { get_param: secondary_device_ip }\n          port: { get_param: secondary_device_port }\n          login: { get_param: secondary_device_username }\n          password: { get_param: secondary_device_password }\n          peer_address: { get_param: secondary_peer_ip }\n      syncer_properties:\n        etcd:\n          status:\n            key: status\n    depends_on: netconf_configure_secondary\n\n{% for device in [\"primary\", \"secondary\"] %}\n  {{ device }}_interface_metric_monitor:\n    type: ESI::Monitoring::MonitoringTarget\n    properties:\n      type: snmp_ports_metric\n      resource_type: vpn_interfaces\n      resource_id: { get_param: gohan_id }\n      tenant_id: { get_param: tenant_id }\n      version: { get_param: version }\n      field_name: {{ device }}_router\n      properties:\n        device_ip: { get_param: {{ device }}_device_ip }\n        if_name: { get_param: {{ device }}_device_logical_interface }\n        community_name: EDGE_ROUTER_COMMUNITY\n      syncer_properties:\n        tsdb:\n          traffic.in:\n            metric: traffic.bytes\n            tags:\n              device_index: {{ device }}\n              resource_id: { get_param: gohan_id }\n              direction: in\n          traffic.out:\n            metric: traffic.bytes\n            tags:\n              device_index: {{ device }}\n              resource_id: { get_param: gohan_id }\n              direction: out\n    depends_on: bgp_monitor\n{% endfor %}\n\noutputs:\n  monitoring_target_id:\n    description: Monitoring Target ID\n    value: { get_resource: bgp_monitor}\n  monitoring_link:\n    description: Monitoring Process Link\n    value: { get_attr: [bgp_monitor, link]}\n{% for device in [\"primary\", \"secondary\"] %}\n  {{ device }}_interface_monitoring_target_id:\n    description: Monitoring Target ID\n    value: { get_resource: {{ device }}_interface_metric_monitor}\n  {{ device }}_interface_monitoring_link:\n    description: Monitoring Process Link\n    value: { get_attr: [{{ device }}_interface_metric_monitor, link]}\n{% endfor %}\n", 
        "parameter_mappings": {
            "secondary_router_id": "Osecondary:bgp_router_id", 
            "secondary_device_physical_interface": "Fvpn_gateway+vpn_gw_id:ha_interface+uplink_interface_id:er_physical_interface+secondary_interface_id:name", 
            "primary_peer_ip": "Oprimary:bgp_peer_ip", 
            "primary_device_logical_interface": "Fvpn_gateway+vpn_gw_id:primary_logical_uplink_interface_name", 
            "primary_device_password": "Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password", 
            "gohan_id": "Pid", 
            "bgp_group_name": "CCloudGW1", 
            "remote_as": "Pbgp_remote_as", 
            "jinja_primary_uplink_ip": "Oprimary:ip_address", 
            "primary_device_ip": "Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip", 
            "secondary_ebgp_config_group": "Fvpn_gateway+vpn_gw_id:vpn_service+vpn_service_id:secondary_ebgp_config_group", 
            "version": "Vauto_filled", 
            "secondary_device_username": "Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login", 
            "secondary_device_logical_interface": "Fvpn_gateway+vpn_gw_id:secondary_logical_uplink_interface_name", 
            "local_as": "Fvpn_gateway+vpn_gw_id:local_as_number", 
            "primary_device_physical_interface": "Fvpn_gateway+vpn_gw_id:ha_interface+uplink_interface_id:er_physical_interface+primary_interface_id:name", 
            "uplink_vlan": "Fvpn_gateway+vpn_gw_id:uplink_vlan_id", 
            "md5": "Pbgp_md5", 
            "secondary_peer_ip": "Osecondary:bgp_peer_ip", 
            "primary_router_id": "Oprimary:bgp_router_id", 
            "primary_ebgp_config_group": "Fvpn_gateway+vpn_gw_id:vpn_service+vpn_service_id:primary_ebgp_config_group", 
            "tenant_id": "Ptenant_id", 
            "jinja_secondary_uplink_ip": "Osecondary:ip_address", 
            "secondary_device_port": "Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port", 
            "secondary_device_password": "Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password", 
            "heat_timeout": "C60", 
            "vrf_name": "Fvpn_gateway+vpn_gw_id:vrf_name", 
            "primary_device_username": "Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login", 
            "primary_device_port": "Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port", 
            "secondary_device_ip": "Fvpn_gateway+vpn_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip"
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,473:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,474:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,475:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,482:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/qos_option_aws],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "qos_option_aws", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  QoS Option\n\nparameters:\n  primary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\n    label: Ip address of the device.\n    type: string\n  primary_device_port:\n    description: Port that will be used to establish ssh connection to the Primary Device.\n    label: Port of the ssh connection.\n    type: number\n  primary_device_username:\n    description: Name of the user which will be used to log onto the Primary Device.\n    label: User name to log on to device.\n    type: string\n  primary_device_password:\n    description: Password of the user which will be used to log onto the Primary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  secondary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\n    label: Ip address of the device.\n    type: string\n  secondary_device_port:\n    description: Port that will be used to establish ssh connection to the Secondary Device.\n    label: Port of the ssh connection.\n    type: number\n  secondary_device_username:\n    description: Name of the user which will be used to log onto the Secondary Device.\n    label: User name to log on to device.\n    type: string\n  secondary_device_password:\n    description: Password of the user which will be used to log onto the Secondary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  incoming_policer_name:\n    description: Name of created incoming policer\n    label: Incoming policer name\n    type: string\n  incoming_policer_config:\n    description: Configuration of incoming policer\n    label: Incoming policer config\n    type: string\n  outgoing_policer_name:\n    description: Name of created outgoing policer\n    label: Outgoing policer name\n    type: string\n  outgoing_policer_config:\n    description: Configuration of outgoing policer\n    label: Outgoing policer config\n    type: string\n  neighbour_prefix:\n    description: Name of prefix list used to specify traffic source/destination\n    label: Neighbour prefix\n    type: string\nresources:\n{% set forewarding_class = be_forwarding_class if qos_type == \"besteffort\" else ga_forwarding_class %}\n{% for device in [\"primary\", \"secondary\"] %}\n  netconf_configure_{{ device }}:\n    type: OS::Contrail::NetconfNamedConfigs\n    {% if device == \"secondary\" %}depends_on: netconf_configure_primary{% endif %}\n    properties:\n      lock_timeout: 3000\n      device_ip:\n        get_param: {{ device }}_device_ip\n      password:\n        get_param: {{ device }}_device_password\n      port:\n        get_param: {{ device }}_device_port\n      username:\n        get_param: {{ device }}_device_username\n      configs:\n      - config:\n          { get_param: incoming_policer_config }\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: firewall\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: three-color-policer\n            name: { get_param: incoming_policer_name }\n      - config:\n          { get_param: outgoing_policer_config }\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: firewall\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: policer\n            name: { get_param: outgoing_policer_name }\n      - config:\n          str_replace:\n            params:\n              $PREFIX:\n                get_param: neighbour_prefix\n              $CLASS:\n                {% if jinja_type == \"besteffort\" %} {{ jinja_be_forwarding_class }} {% else %} {{ jinja_ga_forwarding_class }} {% endif %}\n              $POLICER_NAME:\n                get_param: incoming_policer_name\n            template: |\n               interface-specific;\n               term bgp-accept {\n                   from {\n                       source-prefix-list {\n                           $PREFIX;\n                       }\n                       protocol tcp;\n                       port bgp;\n                   }\n                   then accept;\n               }\n               term vrrp-accept {\n                   from {\n                       source-prefix-list {\n                           $PREFIX;\n                       }\n                       protocol vrrp;\n                   }\n                   then policer 10K-RE;\n                   then accept;\n               }\n               term qos {\n                   then {\n                       three-color-policer {\n                           {% if jinja_type == \"besteffort\" %}two-rate{% else %}single-rate{% endif %} $POLICER_NAME;\n                       }\n                       forwarding-class $CLASS;\n                       accept;\n                   }\n               }\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: firewall\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: filter\n            name:\n              str_replace:\n                params:\n                  $NAME:\n                    get_param: incoming_policer_name\n                template: |\n                  FILTER_$NAME\n      - config:\n          str_replace:\n            params:\n              $PREFIX:\n                get_param: neighbour_prefix\n              $POLICER_NAME:\n                get_param: outgoing_policer_name\n            template: |\n               interface-specific;\n               term bgp-accept {\n                   from {\n                       destination-prefix-list {\n                           $PREFIX;\n                       }\n                       protocol tcp;\n                       port bgp;\n                   }\n                   then accept;\n               }\n               term vrrp-accept {\n                   from {\n                       protocol vrrp;\n                   }\n                   then accept;\n               }\n               term policer {\n                   then {\n                       policer $POLICER_NAME;\n                       accept;\n                   }\n               }\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: firewall\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: filter\n            name:\n              str_replace:\n                params:\n                  $NAME:\n                    get_param: outgoing_policer_name\n                template: |\n                  FILTER_$NAME\n{% endfor %}\n", 
        "parameter_mappings": {
            "secondary_device_password": "Fha_router+ha_router_id:edge_router+secondary_router_id:password", 
            "jinja_be_forwarding_class": "Faws_service+aws_service_id:be_forwarding_class", 
            "primary_device_password": "Fha_router+ha_router_id:edge_router+primary_router_id:password", 
            "jinja_ga_forwarding_class": "Faws_service+aws_service_id:ga_forwarding_class", 
            "incoming_policer_name": "Pincoming_policer_name", 
            "jinja_type": "Pqos_type", 
            "secondary_device_port": "Fha_router+ha_router_id:edge_router+secondary_router_id:ssh_port", 
            "primary_device_ip": "Fha_router+ha_router_id:edge_router+primary_router_id:ip", 
            "heat_timeout": "C60", 
            "outgoing_policer_config": "Poutgoing_policer_config", 
            "incoming_policer_config": "Pincoming_policer_config", 
            "outgoing_policer_name": "Poutgoing_policer_name", 
            "neighbour_prefix": "Faws_service+aws_service_id:neighbour_prefix", 
            "secondary_device_username": "Fha_router+ha_router_id:edge_router+secondary_router_id:login", 
            "primary_device_port": "Fha_router+ha_router_id:edge_router+primary_router_id:ssh_port", 
            "secondary_device_ip": "Fha_router+ha_router_id:edge_router+secondary_router_id:ip", 
            "primary_device_username": "Fha_router+ha_router_id:edge_router+primary_router_id:login"
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,483:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,483:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,485:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,493:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/aws_gateway],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "aws_gateway", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  AWS Gateway\n\nparameters:\n  primary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\n    label: Ip address of the device.\n    type: string\n  primary_device_port:\n    description: Port that will be used to establish ssh connection to the Primary Device.\n    label: Port of the ssh connection.\n    type: number\n  primary_device_username:\n    description: Name of the user which will be used to log onto the Primary Device.\n    label: User name to log on to device.\n    type: string\n  primary_device_password:\n    description: Password of the user which will be used to log onto the Primary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  primary_device_logical_downlink_interface:\n    description: Name of the created logical downlink interface on the Primary device\n    label: Logical Interface name\n    type: string\n  primary_device_physical_downlink_interface:\n    description: Physical port on the Primary device on which the logical downlink port will be configured\n    label: Underlying physical interface\n    type: string\n  primary_device_logical_uplink_interface:\n    description: Name of the created logical uplink interface on the Primary device\n    label: Logical Interface name\n    type: string\n  primary_device_physical_uplink_interface:\n    description: Physical port on the Primary device on which the logical uplink port will be configured\n    label: Underlying physical interface\n    type: string\n  secondary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\n    label: Ip address of the device.\n    type: string\n  secondary_device_port:\n    description: Port that will be used to establish ssh connection to the Secondary Device.\n    label: Port of the ssh connection.\n    type: number\n  secondary_device_username:\n    description: Name of the user which will be used to log onto the Secondary Device.\n    label: User name to log on to device.\n    type: string\n  secondary_device_password:\n    description: Password of the user which will be used to log onto the Secondary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  secondary_device_logical_downlink_interface:\n    description: Name of the created logical downlink interface on the Secondary device\n    label: Logical Interface name\n    type: string\n  secondary_device_physical_downlink_interface:\n    description: Physical port on the Secondary device on which the logical downlink port will be configured\n    label: Underlying physical interface\n    type: string\n  secondary_device_logical_uplink_interface:\n    description: Name of the created logical uplink interface on the Secondary device\n    label: Logical Interface name\n    type: string\n  secondary_device_physical_uplink_interface:\n    description: Physical port on the Secondary device on which the logical uplink port will be configured\n    label: Underlying physical interface\n    type: string\n  downlink_vlan:\n    description: vlan tag used by logical downlink interface\n    label: VLAN ID\n    type: string\n  uplink_vlan:\n    description: vlan tag used by logical uplink interface\n    label: VLAN ID\n    type: string\n  vrf_name:\n    description: Name for VRF used by logical interfaces\n    label: VRF name\n    type: string\n  input_filter_name:\n    description: Name for policer used for input\n    label: Input filter name\n    type: string\n  output_filter_name:\n    description: Name for policer used for output\n    label: Output filter name\n    type: string\n  primary_downlink_vrrp_config_group:\n    description: Name for apply group to use for downlink interface for VRRP\n    label: Apply group name\n    type: string\n  secondary_downlink_vrrp_config_group:\n    description: Name for apply group to use for downlink interface for VRRP\n    label: Apply group name\n    type: string\n\nresources:\n{% for device in [\"primary\", \"secondary\"] %}\n  netconf_configure_{{ device }}:\n    type: OS::Contrail::NetconfNamedConfigs\n    {% if device == \"secondary\" %}depends_on: netconf_configure_primary{% endif %}\n    properties:\n      lock_timeout: 3000\n      device_ip:\n        get_param: {{ device }}_device_ip\n      password:\n        get_param: {{ device }}_device_password\n      port:\n        get_param: {{ device }}_device_port\n      username:\n        get_param: {{ device }}_device_username\n      on_update: merge\n      configs:\n      - config:\n          str_replace:\n            params:\n              $VLAN:\n                get_param: downlink_vlan\n              $INPUT_FILTER:\n                get_param: input_filter_name\n              $OUTPUT_FILTER:\n                get_param: output_filter_name\n              $APPLY_GROUP:\n                get_param: {{ device }}_downlink_vrrp_config_group\n            template: |\n              apply-groups $APPLY_GROUP;\n              vlan-id $VLAN;\n              description AWS_Downlink;\n              family inet {\n                  filter {\n                      input $INPUT_FILTER;\n                      output $OUTPUT_FILTER;\n                  }\n              }\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: interfaces\n          - config_type: name\n            xml_type: named_tag\n            tag: interface\n            name: { get_param: {{ device }}_device_physical_downlink_interface }\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: unit\n            name: { get_param: downlink_vlan }\n      - config:\n          str_replace:\n            params:\n              $LIFD:\n                get_param: {{ device }}_device_logical_downlink_interface\n              $LIFU:\n                get_param: {{ device }}_device_logical_uplink_interface\n            template: |\n                instance-type virtual-router;\n                interface $LIFD;\n                interface $LIFU;\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: routing-instances\n          - config_type: name\n            xml_type: named_tag\n            tag: instance\n            name: { get_param: vrf_name }\n      - config:\n          str_replace:\n            params:\n              $VLAN:\n                get_param: uplink_vlan\n            template: |\n              vlan-id $VLAN;\n              description AWS_Uplink;\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: interfaces\n          - config_type: name\n            xml_type: named_tag\n            tag: interface\n            name: { get_param: {{ device }}_device_physical_uplink_interface }\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: unit\n            name: { get_param: uplink_vlan }\n{% endfor %}\n", 
        "parameter_mappings": {
            "primary_device_logical_uplink_interface": "Pprimary_logical_uplink_interface_name", 
            "primary_device_logical_downlink_interface": "Pprimary_logical_downlink_interface_name", 
            "primary_device_password": "Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password", 
            "output_filter_name": "ACFILTER_&Fqos_option+qos_option_id:outgoing_policer_name", 
            "primary_device_ip": "Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip", 
            "secondary_device_physical_downlink_interface": "Fha_interface+downlink_interface_id:er_physical_interface+secondary_interface_id:name", 
            "secondary_device_username": "Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login", 
            "primary_device_physical_uplink_interface": "Fha_interface+uplink_interface_id:er_physical_interface+primary_interface_id:name", 
            "secondary_device_logical_uplink_interface": "Psecondary_logical_uplink_interface_name", 
            "downlink_vlan": "Pdownlink_vlan_id", 
            "secondary_device_logical_downlink_interface": "Psecondary_logical_downlink_interface_name", 
            "input_filter_name": "ACFILTER_&Fqos_option+qos_option_id:incoming_policer_name", 
            "uplink_vlan": "Puplink_vlan_id", 
            "secondary_device_port": "Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port", 
            "primary_downlink_vrrp_config_group": "Faws_service+aws_service_id:primary_downlink_vrrp_config_group", 
            "secondary_device_password": "Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password", 
            "heat_timeout": "C60", 
            "vrf_name": "Pvrf_name", 
            "primary_device_username": "Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login", 
            "primary_device_physical_downlink_interface": "Fha_interface+downlink_interface_id:er_physical_interface+primary_interface_id:name", 
            "secondary_downlink_vrrp_config_group": "Faws_service+aws_service_id:secondary_downlink_vrrp_config_group", 
            "primary_device_port": "Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port", 
            "secondary_device_physical_uplink_interface": "Fha_interface+uplink_interface_id:er_physical_interface+secondary_interface_id:name", 
            "secondary_device_ip": "Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip"
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,494:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,494:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,495:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,503:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/gw_interface_aws],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "gw_interface_aws", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  Inet Address\n\nparameters:\n  primary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\n    label: Ip address of the device.\n    type: string\n  primary_device_port:\n    description: Port that will be used to establish ssh connection to the Primary Device.\n    label: Port of the ssh connection.\n    type: number\n  primary_device_username:\n    description: Name of the user which will be used to log onto the Primary Device.\n    label: User name to log on to device.\n    type: string\n  primary_device_password:\n    description: Password of the user which will be used to log onto the Primary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  secondary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\n    label: Ip address of the device.\n    type: string\n  secondary_device_port:\n    description: Port that will be used to establish ssh connection to the Secondary Device.\n    label: Port of the ssh connection.\n    type: number\n  secondary_device_username:\n    description: Name of the user which will be used to log onto the Secondary Device.\n    label: User name to log on to device.\n    type: string\n  secondary_device_password:\n    description: Password of the user which will be used to log onto the Secondary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  primary_device_physical_interface:\n    description: MX physical port on which logical interface will be created\n    label: Underlying physical interface\n    type: string\n  secondary_device_physical_interface:\n    description: MX physical port on which logical interface will be created\n    label: Underlying physical interface\n    type: string\n  downlink_vlan_id:\n    description: Vlan tag for mx logical downlink interface\n    label: Vlan Tag\n    type: string\n  gw_vip:\n    description: Virtual IP configured on VRRP\n    label: Inet Address CIDR\n    type: string\n  primary_device_gw_ip:\n    description: IP on primary device\n    label: Inet Address CIDR\n    type: string\n  secondary_device_gw_ip:\n    description: IP on secondary device\n    label: Inet Address CIDR\n    type: string\n  netmask:\n    description: Netmask for gw_ip\n    label: Netmask\n    type: number\n  vrrp_group:\n    type: string\n    label: VRRP Group\n  primary_device_priority:\n    type: string\n    label: Primary device priority\n  secondary_device_priority:\n    type: string\n    label: Secondary device priority\n  vrf_name:\n    type: string\n    label: VRF\n  bgp_group_name:\n    type: string\n    label: Name of BGP Group on VRF\n  local_as:\n    type: string\n    label: Local AS Number\n  primary_ibgp_config_group:\n    description: Name for apply group to use for downlink interface\n    label: Apply group name\n    type: string\n  secondary_ibgp_config_group:\n    description: Name for apply group to use for downlink interface\n    label: Apply group name\n    type: string\n  primary_logical_interface_name:\n    description: MX logical port\n    label: Underlying logical interface\n    type: string\n  secondary_logical_interface_name:\n    description: MX logical port\n    label: Underlying logical interface\n    type: string\n  gohan_id:\n    type: string\n    label: Gohan resource ID\n    description: UUID of the GW Interface\n  tenant_id:\n    type: string\n    label: Tenant ID\n  version:\n    type: number\n    label: Config version\nresources:\n{% for device in [\"primary\", \"secondary\"] %}\n  netconf_configure_{{ device }}:\n    type: OS::Contrail::NetconfNamedConfigs\n    {% if device == \"secondary\" %}depends_on: netconf_configure_primary{% endif %}\n    properties:\n      lock_timeout: 3000\n      device_ip:\n        get_param: {{ device }}_device_ip\n      password:\n        get_param: {{ device }}_device_password\n      port:\n        get_param: {{ device }}_device_port\n      username:\n        get_param: {{ device }}_device_username\n      configs:\n      - config:\n          str_replace:\n            params:\n              $VRRP_GROUP:\n                    get_param: vrrp_group\n              $PRIORITY:\n                    get_param: {{ device }}_device_priority\n              $VIP:\n                    get_param: gw_vip\n            template: |\n                vrrp-group $VRRP_GROUP {\n                    virtual-address $VIP;\n                    priority $PRIORITY;\n                }\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: interfaces\n          - config_type: name\n            xml_type: named_tag\n            tag: interface\n            name: { get_param: {{ device }}_device_physical_interface }\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: unit\n            name: { get_param: downlink_vlan_id }\n          - config_type: tag\n            xml_type: tag\n            tag: family\n          - config_type: tag\n            xml_type: tag\n            tag: inet\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: address\n            name:\n              str_replace:\n                params:\n                  $DEVICE_IP:\n                    get_param: {{ device }}_device_gw_ip\n                  $NETMASK:\n                    get_param: netmask\n                template: |\n                  $DEVICE_IP/$NETMASK\n      - config:\n          str_replace:\n            params:\n              $DEVICE_GW_IP:\n                    get_param: {{ device }}_device_gw_ip\n              $NEIGHBOR_GW_IP:\n                    get_param: {% if device == \"secondary\" %}primary{% else %}secondary{% endif %}_device_gw_ip\n              $LOCAL_AS:\n                    get_param: local_as\n              $APPLY_GROUP:\n                    get_param: {{ device }}_ibgp_config_group\n            template: |\n              apply-groups $APPLY_GROUP;\n              local-address $DEVICE_GW_IP;\n              peer-as $LOCAL_AS;\n              neighbor $NEIGHBOR_GW_IP;\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: routing-instances\n          - config_type: name\n            xml_type: named_tag\n            tag: instance\n            name: { get_param: vrf_name }\n          - config_type: tag\n            xml_type: tag\n            tag: protocols\n          - config_type: tag\n            xml_type: tag\n            tag: bgp\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: group\n            name: { get_param: bgp_group_name }\n{% endfor %}\n\n  vrrp_monitor:\n    type: ESI::Monitoring::MonitoringTarget\n    properties:\n      type: vrrp_pool\n      resource_type: gw_interfaces\n      resource_id: { get_param: gohan_id }\n      tenant_id: { get_param: tenant_id }\n      version: { get_param: version }\n      field_name: status\n      properties:\n        vrid:\n          - { get_param: vrrp_group }\n        primary:\n          host: { get_param: primary_device_ip }\n          port: { get_param: primary_device_port }\n          login: { get_param: primary_device_username }\n          password: { get_param: primary_device_password }\n          interface: { get_param: primary_logical_interface_name }\n        secondary:\n          host: { get_param: secondary_device_ip }\n          port: { get_param: secondary_device_port }\n          login: { get_param: secondary_device_username }\n          password: { get_param: secondary_device_password }\n          interface: { get_param: secondary_logical_interface_name }\n      syncer_properties:\n        etcd:\n          status:\n            key: status\n          hold_options:\n            positive_status:\n              - primary: MASTER\n                secondary: BACKUP\n            time_seconds: 360\n    depends_on: netconf_configure_secondary\n\noutputs:\n  monitoring_target_id:\n    description: Monitoring Target ID\n    value: { get_resource: vrrp_monitor}\n  monitoring_link:\n    description: Monitoring Process Link\n    value: { get_attr: [vrrp_monitor, link]}\n", 
        "parameter_mappings": {
            "secondary_device_physical_interface": "Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:er_physical_interface+secondary_interface_id:name", 
            "secondary_ibgp_config_group": "Faws_gateway+aws_gw_id:aws_service+aws_service_id:secondary_ibgp_config_group", 
            "primary_device_password": "Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password", 
            "secondary_device_gw_ip": "Psecondary_ipv4", 
            "gohan_id": "Pid", 
            "bgp_group_name": "Cinet-gw-group", 
            "gw_vip": "Pgw_vipv4", 
            "primary_device_ip": "Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip", 
            "version": "Vauto_filled", 
            "secondary_device_username": "Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login", 
            "primary_device_username": "Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login", 
            "downlink_vlan_id": "Faws_gateway+aws_gw_id:downlink_vlan_id", 
            "secondary_logical_interface_name": "Faws_gateway+aws_gw_id:secondary_logical_downlink_interface_name", 
            "primary_logical_interface_name": "Faws_gateway+aws_gw_id:primary_logical_downlink_interface_name", 
            "local_as": "Faws_gateway+aws_gw_id:local_as_number", 
            "primary_device_physical_interface": "Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:er_physical_interface+primary_interface_id:name", 
            "netmask": "Pnetmask", 
            "primary_device_gw_ip": "Pprimary_ipv4", 
            "vrrp_group": "Pvrid", 
            "primary_device_priority": "C105", 
            "jinja_force_dependency": "Faws_gateway+aws_gw_id:aws_interface+connected_aws_interface:id", 
            "tenant_id": "Ptenant_id", 
            "secondary_device_port": "Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port", 
            "secondary_device_password": "Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password", 
            "heat_timeout": "C60", 
            "vrf_name": "Faws_gateway+aws_gw_id:vrf_name", 
            "jinja_force_dependency2": {
                "field": "id", 
                "path": [
                    {
                        "type": "network", 
                        "id": "network_id"
                    }
                ]
            }, 
            "secondary_device_priority": "C100", 
            "primary_ibgp_config_group": "Faws_gateway+aws_gw_id:aws_service+aws_service_id:primary_ibgp_config_group", 
            "primary_device_port": "Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port", 
            "secondary_device_ip": "Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip"
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,504:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,504:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,506:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,511:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/static_route_aws],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "static_route_aws", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  AWS Gateway Static Route\n\nparameters:\n  primary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\n    label: Ip address of the device.\n    type: string\n  primary_device_port:\n    description: Port that will be used to establish ssh connection to the Primary Device.\n    label: Port of the ssh connection.\n    type: number\n  primary_device_username:\n    description: Name of the user which will be used to log onto the Primary Device.\n    label: User name to log on to device.\n    type: string\n  primary_device_password:\n    description: Password of the user which will be used to log onto the Primary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  secondary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\n    label: Ip address of the device.\n    type: string\n  secondary_device_port:\n    description: Port that will be used to establish ssh connection to the Secondary Device.\n    label: Port of the ssh connection.\n    type: number\n  secondary_device_username:\n    description: Name of the user which will be used to log onto the Secondary Device.\n    label: User name to log on to device.\n    type: string\n  secondary_device_password:\n    description: Password of the user which will be used to log onto the Secondary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  vrf_name:\n    description: Name of VRF to add this static route\n    label: VRF\n    type: string\n  route:\n    description: Static Route definition\n    label: Route\n    type: string\n  next_hop:\n    description: Next hop for the static route\n    label: Next hop\n    type: string\n\nresources:\n{% for device in [\"primary\", \"secondary\"] %}\n  netconf_configure_{{ device }}:\n    type: OS::Contrail::NetconfNamedConfigs\n    {% if device == \"secondary\" %}depends_on: netconf_configure_primary{% endif %}\n    properties:\n      device_ip:\n        get_param: {{ device }}_device_ip\n      password:\n        get_param: {{ device }}_device_password\n      port:\n        get_param: {{ device }}_device_port\n      username:\n        get_param: {{ device }}_device_username\n      lock_timeout: 3000\n      configs:\n      - config:\n          str_replace:\n            params:\n              $NEXT_HOP:\n                get_param: next_hop\n            template: |\n              next-hop $NEXT_HOP;\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: routing-instances\n          - config_type: name\n            xml_type: named_tag\n            tag: instance\n            name: { get_param: vrf_name }\n          - config_type: tag\n            xml_type: tag\n            tag: routing-options\n          - config_type: tag\n            xml_type: tag\n            tag: static\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: route\n            name: { get_param: route }\n{% endfor %}\n", 
        "parameter_mappings": {
            "secondary_device_password": "Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password", 
            "route": "Pdestination", 
            "primary_device_password": "Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password", 
            "secondary_device_port": "Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port", 
            "primary_device_ip": "Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip", 
            "heat_timeout": "C60", 
            "next_hop": "Pnexthop", 
            "vrf_name": "Faws_gateway+aws_gw_id:vrf_name", 
            "primary_device_username": "Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login", 
            "primary_device_port": "Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port", 
            "secondary_device_ip": "Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip", 
            "secondary_device_username": "Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login"
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,512:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,512:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,513:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,522:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/aws_interface],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "aws_interface", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  Inet Address\n\nparameters:\n  primary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\n    label: Ip address of the device.\n    type: string\n  primary_device_port:\n    description: Port that will be used to establish ssh connection to the Primary Device.\n    label: Port of the ssh connection.\n    type: number\n  primary_device_username:\n    description: Name of the user which will be used to log onto the Primary Device.\n    label: User name to log on to device.\n    type: string\n  primary_device_password:\n    description: Password of the user which will be used to log onto the Primary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  secondary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\n    label: Ip address of the device.\n    type: string\n  secondary_device_port:\n    description: Port that will be used to establish ssh connection to the Secondary Device.\n    label: Port of the ssh connection.\n    type: number\n  secondary_device_username:\n    description: Name of the user which will be used to log onto the Secondary Device.\n    label: User name to log on to device.\n    type: string\n  secondary_device_password:\n    description: Password of the user which will be used to log onto the Secondary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  primary_device_physical_interface:\n    description: MX physical port on which logical interface will be created\n    label: Underlying physical interface\n    type: string\n  secondary_device_physical_interface:\n    description: MX physical port on which logical interface will be created\n    label: Underlying physical interface\n    type: string\n  primary_device_logical_interface:\n    description: Name of the created logical uplink interface on the Primary device\n    label: Logical Interface name\n    type: string\n  secondary_device_logical_interface:\n    description: Name of the created logical uplink interface on the Secondary device\n    label: Logical Interface name\n    type: string\n  vrf_name:\n    description: Name of VRF (routing-instance) in MX config\n    label: VRF Name\n    type: string\n  local_as:\n    type: number\n    label: Local AS Number\n  primary_ebgp_config_group:\n    description: Name of MX config group for eBGP config\n    label: eBGP config group\n    type: string\n  secondary_ebgp_config_group:\n    description: Name of MX config group for eBGP config\n    label: eBGP config group\n    type: string\n  uplink_vlan:\n    description: VLAN ID used on uplink interfaces (same for both primary and secondary device)\n    label: Uplink VLAN ID\n    type: string\n  primary_peer_ip:\n    description: IP address of primary router eBGP neighbour\n    label: Primary device BGP peer\n    type: string\n  secondary_peer_ip:\n    description: IP address of secondary router eBGP neighbour\n    label: Secondary device BGP peer\n    type: string\n  primary_router_id:\n    description: Primary router VRF router id\n    label: Primary router id\n    type: string\n  secondary_router_id:\n    description: Secondary router VRF router id\n    label: Secondary router id\n    type: string\n  remote_as:\n    description: eBGP remote autonomous system\n    label: Remote AS\n    type: string\n  md5:\n    description: eBGP authentication key\n    label: eBGP authentication key\n    type: string\n  bgp_group_name:\n    description: Name of eBGP group\n    label: eBGP group name\n    type: string\n  gohan_id:\n    type: string\n    label: Gohan resource ID\n    description: UUID of the AWS Interface\n  tenant_id:\n    type: string\n    label: Tenant ID\n  version:\n    type: number\n    label: Config version\n\nresources:\n{% set primary_ip_uplink_split = jinja_primary_uplink_ip.split('/') %}\n{% set secondary_ip_uplink_split = jinja_secondary_uplink_ip.split('/') %}\n{% for device in [\"primary\", \"secondary\"] %}\n  netconf_configure_{{ device }}:\n    type: OS::Contrail::NetconfNamedConfigs\n    {% if device == \"secondary\" %}depends_on: netconf_configure_primary{% endif %}\n    properties:\n      lock_timeout: 3000\n      device_ip:\n        get_param: {{ device }}_device_ip\n      password:\n        get_param: {{ device }}_device_password\n      port:\n        get_param: {{ device }}_device_port\n      username:\n        get_param: {{ device }}_device_username\n      configs:\n      - config: \"\"\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: interfaces\n          - config_type: name\n            xml_type: named_tag\n            tag: interface\n            name: { get_param: {{ device }}_device_physical_interface }\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: unit\n            name: { get_param: uplink_vlan }\n          - config_type: tag\n            xml_type: tag\n            tag: family\n          - config_type: tag\n            xml_type: tag\n            tag: inet\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: address\n            name: {% if device == \"primary\" %} {{ jinja_primary_uplink_ip }} {% else %} {{ jinja_secondary_uplink_ip }} {% endif %}\n      - config:\n          str_replace:\n            params:\n              $NEIGHBOR_IP:\n                    get_param: {{ device }}_peer_ip\n              $REMOTE_AS:\n                    get_param: remote_as\n              $APPLY_GROUP:\n                    get_param: {{ device }}_ebgp_config_group\n              $KEY:\n                    get_param: md5\n            template: |\n              apply-groups $APPLY_GROUP;\n              local-address {% if device == \"primary\" %} {{ primary_ip_uplink_split[0] }} {% else %} {{ secondary_ip_uplink_split[0] }} {% endif %};\n              peer-as $REMOTE_AS;\n              neighbor $NEIGHBOR_IP authentication-key $KEY;\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: routing-instances\n          - config_type: name\n            xml_type: named_tag\n            tag: instance\n            name: { get_param: vrf_name }\n          - config_type: tag\n            xml_type: tag\n            tag: protocols\n          - config_type: tag\n            xml_type: tag\n            tag: bgp\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: group\n            name: { get_param: bgp_group_name }\n      - config:\n          str_replace:\n            params:\n              $ROUTER_ID:\n                    get_param: {{device}}_router_id\n              $LOCAL_AS:\n                    get_param: local_as\n            template: |\n              router-id $ROUTER_ID;\n              autonomous-system $LOCAL_AS;\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: routing-instances\n          - config_type: name\n            xml_type: named_tag\n            tag: instance\n            name: { get_param: vrf_name }\n          - config_type: tag\n            xml_type: tag\n            tag: routing-options\n{% endfor %}\n\n  bgp_monitor:\n    type: ESI::Monitoring::MonitoringTarget\n    properties:\n      type: bgp_pool\n      resource_type: aws_interfaces\n      resource_id: { get_param: gohan_id }\n      tenant_id: { get_param: tenant_id }\n      version: { get_param: version }\n      field_name: status\n      properties:\n        instance: { get_param: vrf_name }\n        primary:\n          host: { get_param: primary_device_ip }\n          port: { get_param: primary_device_port }\n          login: { get_param: primary_device_username }\n          password: { get_param: primary_device_password }\n          peer_address: { get_param: primary_peer_ip }\n        secondary:\n          host: { get_param: secondary_device_ip }\n          port: { get_param: secondary_device_port }\n          login: { get_param: secondary_device_username }\n          password: { get_param: secondary_device_password }\n          peer_address: { get_param: secondary_peer_ip }\n      syncer_properties:\n        etcd:\n          status:\n            key: status\n    depends_on: netconf_configure_secondary\n\n{% for device in [\"primary\", \"secondary\"] %}\n  {{ device }}_interface_metric_monitor:\n    type: ESI::Monitoring::MonitoringTarget\n    properties:\n      type: snmp_ports_metric\n      resource_type: aws_interfaces\n      resource_id: { get_param: gohan_id }\n      tenant_id: { get_param: tenant_id }\n      version: { get_param: version }\n      field_name: {{ device }}_router\n      properties:\n        device_ip: { get_param: {{ device }}_device_ip }\n        if_name: { get_param: {{ device }}_device_logical_interface }\n        community_name: EDGE_ROUTER_COMMUNITY\n      syncer_properties:\n        tsdb:\n          traffic.in:\n            metric: traffic.bytes\n            tags:\n              device_index: {{ device }}\n              resource_id: { get_param: gohan_id }\n              direction: in\n          traffic.out:\n            metric: traffic.bytes\n            tags:\n              device_index: {{ device }}\n              resource_id: { get_param: gohan_id }\n              direction: out\n    depends_on: bgp_monitor\n{% endfor %}\n\noutputs:\n  monitoring_target_id:\n    description: Monitoring Target ID\n    value: { get_resource: bgp_monitor}\n  monitoring_link:\n    description: Monitoring Process Link\n    value: { get_attr: [bgp_monitor, link]}\n{% for device in [\"primary\", \"secondary\"] %}\n  {{ device }}_interface_monitoring_target_id:\n    description: Monitoring Target ID\n    value: { get_resource: {{ device }}_interface_metric_monitor}\n  {{ device }}_interface_monitoring_link:\n    description: Monitoring Process Link\n    value: { get_attr: [{{ device }}_interface_metric_monitor, link]}\n{% endfor %}\n", 
        "parameter_mappings": {
            "secondary_router_id": "Osecondary:bgp_router_id", 
            "secondary_device_physical_interface": "Faws_gateway+aws_gw_id:ha_interface+uplink_interface_id:er_physical_interface+secondary_interface_id:name", 
            "primary_peer_ip": "Oprimary:bgp_peer_ip", 
            "primary_device_logical_interface": "Faws_gateway+aws_gw_id:primary_logical_uplink_interface_name", 
            "primary_device_password": "Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password", 
            "gohan_id": "Pid", 
            "bgp_group_name": "CAWS-PE", 
            "remote_as": "Pbgp_remote_as", 
            "jinja_primary_uplink_ip": "Oprimary:ip_address", 
            "primary_device_ip": "Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip", 
            "secondary_ebgp_config_group": "Faws_gateway+aws_gw_id:aws_service+aws_service_id:secondary_ebgp_config_group", 
            "version": "Vauto_filled", 
            "secondary_device_username": "Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login", 
            "secondary_device_logical_interface": "Faws_gateway+aws_gw_id:secondary_logical_uplink_interface_name", 
            "local_as": "Faws_gateway+aws_gw_id:local_as_number", 
            "primary_device_physical_interface": "Faws_gateway+aws_gw_id:ha_interface+uplink_interface_id:er_physical_interface+primary_interface_id:name", 
            "uplink_vlan": "Faws_gateway+aws_gw_id:uplink_vlan_id", 
            "md5": "Pbgp_md5", 
            "secondary_peer_ip": "Osecondary:bgp_peer_ip", 
            "primary_router_id": "Oprimary:bgp_router_id", 
            "primary_ebgp_config_group": "Faws_gateway+aws_gw_id:aws_service+aws_service_id:primary_ebgp_config_group", 
            "tenant_id": "Ptenant_id", 
            "jinja_secondary_uplink_ip": "Osecondary:ip_address", 
            "secondary_device_port": "Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port", 
            "secondary_device_password": "Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password", 
            "heat_timeout": "C60", 
            "vrf_name": "Faws_gateway+aws_gw_id:vrf_name", 
            "primary_device_username": "Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login", 
            "primary_device_port": "Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port", 
            "secondary_device_ip": "Faws_gateway+aws_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip"
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,522:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,523:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,524:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,532:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/qos_option_azure],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "qos_option_azure", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  QoS Option\n\nparameters:\n  primary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\n    label: Ip address of the device.\n    type: string\n  primary_device_port:\n    description: Port that will be used to establish ssh connection to the Primary Device.\n    label: Port of the ssh connection.\n    type: number\n  primary_device_username:\n    description: Name of the user which will be used to log onto the Primary Device.\n    label: User name to log on to device.\n    type: string\n  primary_device_password:\n    description: Password of the user which will be used to log onto the Primary Device.\n    label: Users password.\n    type: string\n  secondary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\n    label: Ip address of the device.\n    type: string\n    hidden: true\n  secondary_device_port:\n    description: Port that will be used to establish ssh connection to the Secondary Device.\n    label: Port of the ssh connection.\n    type: number\n  secondary_device_username:\n    description: Name of the user which will be used to log onto the Secondary Device.\n    label: User name to log on to device.\n    type: string\n  secondary_device_password:\n    description: Password of the user which will be used to log onto the Secondary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  incoming_policer_name:\n    description: Name of created incoming policer\n    label: Incoming policer name\n    type: string\n  incoming_policer_config:\n    description: Configuration of incoming policer\n    label: Incoming policer config\n    type: string\n  outgoing_policer_name:\n    description: Name of created outgoing policer\n    label: Outgoing policer name\n    type: string\n  outgoing_policer_config:\n    description: Configuration of outgoing policer\n    label: Outgoing policer config\n    type: string\n  neighbour_prefix:\n    description: Name of prefix list used to specify traffic source/destination\n    label: Neighbour prefix\n    type: string\nresources:\n{% set forewarding_class = be_forwarding_class if qos_type == \"besteffort\" else ga_forwarding_class %}\n{% for device in [\"primary\", \"secondary\"] %}\n  netconf_configure_{{ device }}:\n    type: OS::Contrail::NetconfNamedConfigs\n    {% if device == \"secondary\" %}depends_on: netconf_configure_primary{% endif %}\n    properties:\n      lock_timeout: 3000\n      device_ip:\n        get_param: {{ device }}_device_ip\n      password:\n        get_param: {{ device }}_device_password\n      port:\n        get_param: {{ device }}_device_port\n      username:\n        get_param: {{ device }}_device_username\n      configs:\n      - config:\n          { get_param: incoming_policer_config }\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: firewall\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: three-color-policer\n            name: { get_param: incoming_policer_name }\n      - config:\n          { get_param: outgoing_policer_config }\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: firewall\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: policer\n            name: { get_param: outgoing_policer_name }\n      - config:\n          str_replace:\n            params:\n              $PREFIX:\n                get_param: neighbour_prefix\n              $CLASS:\n                {% if jinja_type == \"besteffort\" %} {{ jinja_be_forwarding_class }} {% else %} {{ jinja_ga_forwarding_class }} {% endif %}\n              $POLICER_NAME:\n                get_param: incoming_policer_name\n            template: |\n               interface-specific;\n               term bgp-accept {\n                   from {\n                       source-prefix-list {\n                           $PREFIX;\n                       }\n                       protocol tcp;\n                       port bgp;\n                   }\n                   then accept;\n               }\n               term vrrp-accept {\n                   from {\n                       source-prefix-list {\n                           $PREFIX;\n                       }\n                       protocol vrrp;\n                   }\n                   then policer 10K-RE;\n                   then accept;\n               }\n               term qos {\n                   then {\n                       three-color-policer {\n                           {% if jinja_type == \"besteffort\" %}two-rate{% else %}single-rate{% endif %} $POLICER_NAME;\n                       }\n                       forwarding-class $CLASS;\n                       accept;\n                   }\n               }\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: firewall\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: filter\n            name:\n              str_replace:\n                params:\n                  $NAME:\n                    get_param: incoming_policer_name\n                template: |\n                  FILTER_$NAME\n      - config:\n          str_replace:\n            params:\n              $PREFIX:\n                get_param: neighbour_prefix\n              $POLICER_NAME:\n                get_param: outgoing_policer_name\n            template: |\n               interface-specific;\n               term bgp-accept {\n                   from {\n                       destination-prefix-list {\n                           $PREFIX;\n                       }\n                       protocol tcp;\n                       port bgp;\n                   }\n                   then accept;\n               }\n               term vrrp-accept {\n                   from {\n                       protocol vrrp;\n                   }\n                   then accept;\n               }\n               term policer {\n                   then {\n                       policer $POLICER_NAME;\n                       accept;\n                   }\n               }\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: firewall\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: filter\n            name:\n              str_replace:\n                params:\n                  $NAME:\n                    get_param: outgoing_policer_name\n                template: |\n                  FILTER_$NAME\n{% endfor %}\n", 
        "parameter_mappings": {
            "secondary_device_password": "Fha_router+ha_router_id:edge_router+secondary_router_id:password", 
            "jinja_be_forwarding_class": "Fazure_service+azure_service_id:be_forwarding_class", 
            "primary_device_password": "Fha_router+ha_router_id:edge_router+primary_router_id:password", 
            "jinja_ga_forwarding_class": "Fazure_service+azure_service_id:ga_forwarding_class", 
            "incoming_policer_name": "Pincoming_policer_name", 
            "jinja_type": "Pqos_type", 
            "secondary_device_port": "Fha_router+ha_router_id:edge_router+secondary_router_id:ssh_port", 
            "primary_device_ip": "Fha_router+ha_router_id:edge_router+primary_router_id:ip", 
            "heat_timeout": "C60", 
            "outgoing_policer_config": "Poutgoing_policer_config", 
            "incoming_policer_config": "Pincoming_policer_config", 
            "outgoing_policer_name": "Poutgoing_policer_name", 
            "neighbour_prefix": "Fazure_service+azure_service_id:neighbour_prefix", 
            "secondary_device_username": "Fha_router+ha_router_id:edge_router+secondary_router_id:login", 
            "primary_device_port": "Fha_router+ha_router_id:edge_router+primary_router_id:ssh_port", 
            "secondary_device_ip": "Fha_router+ha_router_id:edge_router+secondary_router_id:ip", 
            "primary_device_username": "Fha_router+ha_router_id:edge_router+primary_router_id:login"
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,533:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,534:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,535:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,543:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/azure_gateway],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "azure_gateway", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  AZURE Gateway\n\nparameters:\n  primary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\n    label: Ip address of the device.\n    type: string\n  primary_device_port:\n    description: Port that will be used to establish ssh connection to the Primary Device.\n    label: Port of the ssh connection.\n    type: number\n  primary_device_username:\n    description: Name of the user which will be used to log onto the Primary Device.\n    label: User name to log on to device.\n    type: string\n  primary_device_password:\n    description: Password of the user which will be used to log onto the Primary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  primary_device_logical_downlink_interface:\n    description: Name of the created logical downlink interface on the Primary device\n    label: Logical Interface name\n    type: string\n  primary_device_physical_downlink_interface:\n    description: Physical port on the Primary device on which the logical downlink port will be configured\n    label: Underlying physical interface\n    type: string\n  primary_device_logical_uplink_interface:\n    description: Name of the created logical uplink interface on the Primary device\n    label: Logical Interface name\n    type: string\n  primary_device_physical_uplink_interface:\n    description: Physical port on the Primary device on which the logical uplink port will be configured\n    label: Underlying physical interface\n    type: string\n  secondary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\n    label: Ip address of the device.\n    type: string\n  secondary_device_port:\n    description: Port that will be used to establish ssh connection to the Secondary Device.\n    label: Port of the ssh connection.\n    type: number\n  secondary_device_username:\n    description: Name of the user which will be used to log onto the Secondary Device.\n    label: User name to log on to device.\n    type: string\n  secondary_device_password:\n    description: Password of the user which will be used to log onto the Secondary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  secondary_device_logical_downlink_interface:\n    description: Name of the created logical downlink interface on the Secondary device\n    label: Logical Interface name\n    type: string\n  secondary_device_physical_downlink_interface:\n    description: Physical port on the Secondary device on which the logical downlink port will be configured\n    label: Underlying physical interface\n    type: string\n  secondary_device_logical_uplink_interface:\n    description: Name of the created logical uplink interface on the Secondary device\n    label: Logical Interface name\n    type: string\n  secondary_device_physical_uplink_interface:\n    description: Physical port on the Secondary device on which the logical uplink port will be configured\n    label: Underlying physical interface\n    type: string\n  downlink_vlan:\n    description: vlan tag used by logical downlink interface\n    label: VLAN ID\n    type: string\n  uplink_vlan:\n    description: vlan tag used by logical uplink interface\n    label: VLAN ID\n    type: string\n  vrf_name:\n    description: Name for VRF used by logical interfaces\n    label: VRF name\n    type: string\n  input_filter_name:\n    description: Name for policer used for input\n    label: Input filter name\n    type: string\n  output_filter_name:\n    description: Name for policer used for output\n    label: Output filter name\n    type: string\n  primary_downlink_vrrp_config_group:\n    description: Name for apply group to use for downlink interface for VRRP\n    label: Apply group name\n    type: string\n  secondary_downlink_vrrp_config_group:\n    description: Name for apply group to use for downlink interface for VRRP\n    label: Apply group name\n    type: string\n\nresources:\n{% for device in [\"primary\", \"secondary\"] %}\n  netconf_configure_{{ device }}:\n    type: OS::Contrail::NetconfNamedConfigs\n    {% if device == \"secondary\" %}depends_on: netconf_configure_primary{% endif %}\n    properties:\n      lock_timeout: 3000\n      device_ip:\n        get_param: {{ device }}_device_ip\n      password:\n        get_param: {{ device }}_device_password\n      port:\n        get_param: {{ device }}_device_port\n      username:\n        get_param: {{ device }}_device_username\n      on_update: merge\n      configs:\n      - config:\n          str_replace:\n            params:\n              $VLAN:\n                get_param: downlink_vlan\n              $INPUT_FILTER:\n                get_param: input_filter_name\n              $OUTPUT_FILTER:\n                get_param: output_filter_name\n              $APPLY_GROUP:\n                get_param: {{ device }}_downlink_vrrp_config_group\n            template: |\n              apply-groups $APPLY_GROUP;\n              vlan-id $VLAN;\n              description AZURE_Downlink;\n              family inet {\n                  filter {\n                      input $INPUT_FILTER;\n                      output $OUTPUT_FILTER;\n                  }\n              }\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: interfaces\n          - config_type: name\n            xml_type: named_tag\n            tag: interface\n            name: { get_param: {{ device }}_device_physical_downlink_interface }\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: unit\n            name: { get_param: downlink_vlan }\n      - config:\n          str_replace:\n            params:\n              $LIFD:\n                get_param: {{ device }}_device_logical_downlink_interface\n              $LIFU:\n                get_param: {{ device }}_device_logical_uplink_interface\n            template: |\n                instance-type virtual-router;\n                interface $LIFD;\n                interface $LIFU;\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: routing-instances\n          - config_type: name\n            xml_type: named_tag\n            tag: instance\n            name: { get_param: vrf_name }\n      - config:\n          str_replace:\n            params:\n              $VLAN:\n                get_param: uplink_vlan\n            template: |\n              vlan-id $VLAN;\n              description AZURE_Uplink;\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: interfaces\n          - config_type: name\n            xml_type: named_tag\n            tag: interface\n            name: { get_param: {{ device }}_device_physical_uplink_interface }\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: unit\n            name: { get_param: uplink_vlan }\n{% endfor %}\n", 
        "parameter_mappings": {
            "primary_device_logical_uplink_interface": "Pprimary_logical_uplink_interface_name", 
            "primary_device_logical_downlink_interface": "Pprimary_logical_downlink_interface_name", 
            "primary_device_password": "Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password", 
            "output_filter_name": "ACFILTER_&Fqos_option+qos_option_id:outgoing_policer_name", 
            "primary_device_ip": "Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip", 
            "secondary_device_physical_downlink_interface": "Fha_interface+downlink_interface_id:er_physical_interface+secondary_interface_id:name", 
            "secondary_device_username": "Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login", 
            "primary_device_physical_uplink_interface": "Fha_interface+uplink_interface_id:er_physical_interface+primary_interface_id:name", 
            "secondary_device_logical_uplink_interface": "Psecondary_logical_uplink_interface_name", 
            "downlink_vlan": "Pdownlink_vlan_id", 
            "secondary_device_logical_downlink_interface": "Psecondary_logical_downlink_interface_name", 
            "input_filter_name": "ACFILTER_&Fqos_option+qos_option_id:incoming_policer_name", 
            "uplink_vlan": "Puplink_vlan_id", 
            "secondary_device_port": "Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port", 
            "primary_downlink_vrrp_config_group": "Fazure_service+azure_service_id:primary_downlink_vrrp_config_group", 
            "secondary_device_password": "Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password", 
            "heat_timeout": "C60", 
            "vrf_name": "Pvrf_name", 
            "primary_device_username": "Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login", 
            "primary_device_physical_downlink_interface": "Fha_interface+downlink_interface_id:er_physical_interface+primary_interface_id:name", 
            "secondary_downlink_vrrp_config_group": "Fazure_service+azure_service_id:secondary_downlink_vrrp_config_group", 
            "primary_device_port": "Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port", 
            "secondary_device_physical_uplink_interface": "Fha_interface+uplink_interface_id:er_physical_interface+secondary_interface_id:name", 
            "secondary_device_ip": "Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip"
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,544:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,544:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,545:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,552:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/gw_interface_azure],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "gw_interface_azure", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  Inet Address\n\nparameters:\n  primary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\n    label: Ip address of the device.\n    type: string\n  primary_device_port:\n    description: Port that will be used to establish ssh connection to the Primary Device.\n    label: Port of the ssh connection.\n    type: number\n  primary_device_username:\n    description: Name of the user which will be used to log onto the Primary Device.\n    label: User name to log on to device.\n    type: string\n  primary_device_password:\n    description: Password of the user which will be used to log onto the Primary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  secondary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\n    label: Ip address of the device.\n    type: string\n  secondary_device_port:\n    description: Port that will be used to establish ssh connection to the Secondary Device.\n    label: Port of the ssh connection.\n    type: number\n  secondary_device_username:\n    description: Name of the user which will be used to log onto the Secondary Device.\n    label: User name to log on to device.\n    type: string\n  secondary_device_password:\n    description: Password of the user which will be used to log onto the Secondary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  primary_device_physical_interface:\n    description: MX physical port on which logical interface will be created\n    label: Underlying physical interface\n    type: string\n  secondary_device_physical_interface:\n    description: MX physical port on which logical interface will be created\n    label: Underlying physical interface\n    type: string\n  downlink_vlan_id:\n    description: Vlan tag for mx logical downlink interface\n    label: Vlan Tag\n    type: string\n  gw_vip:\n    description: Virtual IP configured on VRRP\n    label: Inet Address CIDR\n    type: string\n  primary_device_gw_ip:\n    description: IP on primary device\n    label: Inet Address CIDR\n    type: string\n  secondary_device_gw_ip:\n    description: IP on secondary device\n    label: Inet Address CIDR\n    type: string\n  netmask:\n    description: Netmask for gw_ip\n    label: Netmask\n    type: number\n  vrrp_group:\n    type: string\n    label: VRRP Group\n  primary_device_priority:\n    type: string\n    label: Primary device priority\n  secondary_device_priority:\n    type: string\n    label: Secondary device priority\n  vrf_name:\n    type: string\n    label: VRF\n  bgp_group_name:\n    type: string\n    label: Name of BGP Group on VRF\n  local_as:\n    type: string\n    label: Local AS Number\n  primary_ibgp_config_group:\n    description: Name for apply group to use for downlink interface\n    label: Apply group name\n    type: string\n  secondary_ibgp_config_group:\n    description: Name for apply group to use for downlink interface\n    label: Apply group name\n    type: string\n  primary_logical_interface_name:\n    description: MX logical port\n    label: Underlying logical interface\n    type: string\n  secondary_logical_interface_name:\n    description: MX logical port\n    label: Underlying logical interface\n    type: string\n  gohan_id:\n    type: string\n    label: Gohan resource ID\n    description: UUID of the GW Interface\n  tenant_id:\n    type: string\n    label: Tenant ID\n  version:\n    type: number\n    label: Config version\nresources:\n{% for device in [\"primary\", \"secondary\"] %}\n  netconf_configure_{{ device }}:\n    type: OS::Contrail::NetconfNamedConfigs\n    {% if device == \"secondary\" %}depends_on: netconf_configure_primary{% endif %}\n    properties:\n      lock_timeout: 3000\n      device_ip:\n        get_param: {{ device }}_device_ip\n      password:\n        get_param: {{ device }}_device_password\n      port:\n        get_param: {{ device }}_device_port\n      username:\n        get_param: {{ device }}_device_username\n      configs:\n      - config:\n          str_replace:\n            params:\n              $VRRP_GROUP:\n                    get_param: vrrp_group\n              $PRIORITY:\n                    get_param: {{ device }}_device_priority\n              $VIP:\n                    get_param: gw_vip\n            template: |\n                vrrp-group $VRRP_GROUP {\n                    virtual-address $VIP;\n                    priority $PRIORITY;\n                }\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: interfaces\n          - config_type: name\n            xml_type: named_tag\n            tag: interface\n            name: { get_param: {{ device }}_device_physical_interface }\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: unit\n            name: { get_param: downlink_vlan_id }\n          - config_type: tag\n            xml_type: tag\n            tag: family\n          - config_type: tag\n            xml_type: tag\n            tag: inet\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: address\n            name:\n              str_replace:\n                params:\n                  $DEVICE_IP:\n                    get_param: {{ device }}_device_gw_ip\n                  $NETMASK:\n                    get_param: netmask\n                template: |\n                  $DEVICE_IP/$NETMASK\n      - config:\n          str_replace:\n            params:\n              $DEVICE_GW_IP:\n                    get_param: {{ device }}_device_gw_ip\n              $NEIGHBOR_GW_IP:\n                    get_param: {% if device == \"secondary\" %}primary{% else %}secondary{% endif %}_device_gw_ip\n              $LOCAL_AS:\n                    get_param: local_as\n              $APPLY_GROUP:\n                    get_param: {{ device }}_ibgp_config_group\n            template: |\n              apply-groups $APPLY_GROUP;\n              local-address $DEVICE_GW_IP;\n              peer-as $LOCAL_AS;\n              neighbor $NEIGHBOR_GW_IP;\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: routing-instances\n          - config_type: name\n            xml_type: named_tag\n            tag: instance\n            name: { get_param: vrf_name }\n          - config_type: tag\n            xml_type: tag\n            tag: protocols\n          - config_type: tag\n            xml_type: tag\n            tag: bgp\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: group\n            name: { get_param: bgp_group_name }\n{% endfor %}\n\n  vrrp_monitor:\n    type: ESI::Monitoring::MonitoringTarget\n    properties:\n      type: vrrp_pool\n      resource_type: gw_interfaces\n      resource_id: { get_param: gohan_id }\n      tenant_id: { get_param: tenant_id }\n      version: { get_param: version }\n      field_name: status\n      properties:\n        vrid:\n          - { get_param: vrrp_group }\n        primary:\n          host: { get_param: primary_device_ip }\n          port: { get_param: primary_device_port }\n          login: { get_param: primary_device_username }\n          password: { get_param: primary_device_password }\n          interface: { get_param: primary_logical_interface_name }\n        secondary:\n          host: { get_param: secondary_device_ip }\n          port: { get_param: secondary_device_port }\n          login: { get_param: secondary_device_username }\n          password: { get_param: secondary_device_password }\n          interface: { get_param: secondary_logical_interface_name }\n      syncer_properties:\n        etcd:\n          status:\n            key: status\n          hold_options:\n            positive_status:\n              - primary: MASTER\n                secondary: BACKUP\n            time_seconds: 360\n    depends_on: netconf_configure_secondary\n\noutputs:\n  monitoring_target_id:\n    description: Monitoring Target ID\n    value: { get_resource: vrrp_monitor}\n  monitoring_link:\n    description: Monitoring Process Link\n    value: { get_attr: [vrrp_monitor, link]}\n", 
        "parameter_mappings": {
            "secondary_device_physical_interface": "Fazure_gateway+azure_gw_id:ha_interface+downlink_interface_id:er_physical_interface+secondary_interface_id:name", 
            "secondary_ibgp_config_group": "Fazure_gateway+azure_gw_id:azure_service+azure_service_id:secondary_ibgp_config_group", 
            "primary_device_password": "Fazure_gateway+azure_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password", 
            "secondary_device_gw_ip": "Psecondary_ipv4", 
            "gohan_id": "Pid", 
            "bgp_group_name": "Cinet-gw-group", 
            "gw_vip": "Pgw_vipv4", 
            "primary_device_ip": "Fazure_gateway+azure_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip", 
            "version": "Vauto_filled", 
            "secondary_device_username": "Fazure_gateway+azure_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login", 
            "primary_device_username": "Fazure_gateway+azure_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login", 
            "downlink_vlan_id": "Fazure_gateway+azure_gw_id:downlink_vlan_id", 
            "secondary_logical_interface_name": "Fazure_gateway+azure_gw_id:secondary_logical_downlink_interface_name", 
            "primary_logical_interface_name": "Fazure_gateway+azure_gw_id:primary_logical_downlink_interface_name", 
            "local_as": "Fazure_gateway+azure_gw_id:local_as_number", 
            "primary_device_physical_interface": "Fazure_gateway+azure_gw_id:ha_interface+downlink_interface_id:er_physical_interface+primary_interface_id:name", 
            "netmask": "Pnetmask", 
            "primary_device_gw_ip": "Pprimary_ipv4", 
            "vrrp_group": "Pvrid", 
            "primary_device_priority": "C105", 
            "jinja_force_dependency": "Fazure_gateway+azure_gw_id:azure_interface+connected_azure_interface:id", 
            "tenant_id": "Ptenant_id", 
            "secondary_device_port": "Fazure_gateway+azure_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port", 
            "secondary_device_password": "Fazure_gateway+azure_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password", 
            "heat_timeout": "C60", 
            "vrf_name": "Fazure_gateway+azure_gw_id:vrf_name", 
            "jinja_force_dependency2": {
                "field": "id", 
                "path": [
                    {
                        "type": "network", 
                        "id": "network_id"
                    }
                ]
            }, 
            "secondary_device_priority": "C100", 
            "primary_ibgp_config_group": "Fazure_gateway+azure_gw_id:azure_service+azure_service_id:primary_ibgp_config_group", 
            "primary_device_port": "Fazure_gateway+azure_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port", 
            "secondary_device_ip": "Fazure_gateway+azure_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip"
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,553:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,553:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,555:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,563:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/static_route_azure],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "static_route_azure", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  AZURE Gateway Static Route\n\nparameters:\n  primary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\n    label: Ip address of the device.\n    type: string\n  primary_device_port:\n    description: Port that will be used to establish ssh connection to the Primary Device.\n    label: Port of the ssh connection.\n    type: number\n  primary_device_username:\n    description: Name of the user which will be used to log onto the Primary Device.\n    label: User name to log on to device.\n    type: string\n  primary_device_password:\n    description: Password of the user which will be used to log onto the Primary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  secondary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\n    label: Ip address of the device.\n    type: string\n  secondary_device_port:\n    description: Port that will be used to establish ssh connection to the Secondary Device.\n    label: Port of the ssh connection.\n    type: number\n  secondary_device_username:\n    description: Name of the user which will be used to log onto the Secondary Device.\n    label: User name to log on to device.\n    type: string\n  secondary_device_password:\n    description: Password of the user which will be used to log onto the Secondary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  vrf_name:\n    description: Name of VRF to add this static route\n    label: VRF\n    type: string\n  route:\n    description: Static Route definition\n    label: Route\n    type: string\n  next_hop:\n    description: Next hop for the static route\n    label: Next hop\n    type: string\n\nresources:\n{% for device in [\"primary\", \"secondary\"] %}\n  netconf_configure_{{ device }}:\n    type: OS::Contrail::NetconfNamedConfigs\n    {% if device == \"secondary\" %}depends_on: netconf_configure_primary{% endif %}\n    properties:\n      device_ip:\n        get_param: {{ device }}_device_ip\n      password:\n        get_param: {{ device }}_device_password\n      port:\n        get_param: {{ device }}_device_port\n      username:\n        get_param: {{ device }}_device_username\n      lock_timeout: 3000\n      configs:\n      - config:\n          str_replace:\n            params:\n              $NEXT_HOP:\n                get_param: next_hop\n            template: |\n              next-hop $NEXT_HOP;\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: routing-instances\n          - config_type: name\n            xml_type: named_tag\n            tag: instance\n            name: { get_param: vrf_name }\n          - config_type: tag\n            xml_type: tag\n            tag: routing-options\n          - config_type: tag\n            xml_type: tag\n            tag: static\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: route\n            name: { get_param: route }\n{% endfor %}\n", 
        "parameter_mappings": {
            "secondary_device_password": "Fazure_gateway+azure_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password", 
            "route": "Pdestination", 
            "primary_device_password": "Fazure_gateway+azure_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password", 
            "secondary_device_port": "Fazure_gateway+azure_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port", 
            "primary_device_ip": "Fazure_gateway+azure_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip", 
            "heat_timeout": "C60", 
            "next_hop": "Pnexthop", 
            "vrf_name": "Fazure_gateway+azure_gw_id:vrf_name", 
            "primary_device_username": "Fazure_gateway+azure_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login", 
            "primary_device_port": "Fazure_gateway+azure_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port", 
            "secondary_device_ip": "Fazure_gateway+azure_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip", 
            "secondary_device_username": "Fazure_gateway+azure_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login"
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,563:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,564:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,565:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,573:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/azure_interface],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "azure_interface", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  Inet Address\n\nparameters:\n  primary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\n    label: Ip address of the device.\n    type: string\n  primary_device_port:\n    description: Port that will be used to establish ssh connection to the Primary Device.\n    label: Port of the ssh connection.\n    type: number\n  primary_device_username:\n    description: Name of the user which will be used to log onto the Primary Device.\n    label: User name to log on to device.\n    type: string\n  primary_device_password:\n    description: Password of the user which will be used to log onto the Primary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  secondary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\n    label: Ip address of the device.\n    type: string\n  secondary_device_port:\n    description: Port that will be used to establish ssh connection to the Secondary Device.\n    label: Port of the ssh connection.\n    type: number\n  secondary_device_username:\n    description: Name of the user which will be used to log onto the Secondary Device.\n    label: User name to log on to device.\n    type: string\n  secondary_device_password:\n    description: Password of the user which will be used to log onto the Secondary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  primary_device_physical_interface:\n    description: MX physical port on which logical interface will be created\n    label: Underlying physical interface\n    type: string\n  secondary_device_physical_interface:\n    description: MX physical port on which logical interface will be created\n    label: Underlying physical interface\n    type: string\n  primary_device_logical_interface:\n    description: Name of the created logical uplink interface on the Primary device\n    label: Logical Interface name\n    type: string\n  secondary_device_logical_interface:\n    description: Name of the created logical uplink interface on the Secondary device\n    label: Logical Interface name\n    type: string\n  vrf_name:\n    description: Name of VRF (routing-instance) in MX config\n    label: VRF Name\n    type: string\n  local_as:\n    type: number\n    label: Local AS Number\n  primary_ebgp_config_group:\n    description: Name of MX config group for eBGP config\n    label: eBGP config group\n    type: string\n  secondary_ebgp_config_group:\n    description: Name of MX config group for eBGP config\n    label: eBGP config group\n    type: string\n  uplink_vlan:\n    description: VLAN ID used on uplink interfaces (same for both primary and secondary device)\n    label: Uplink VLAN ID\n    type: string\n  primary_peer_ip:\n    description: IP address of primary router eBGP neighbour\n    label: Primary device BGP peer\n    type: string\n  secondary_peer_ip:\n    description: IP address of secondary router eBGP neighbour\n    label: Secondary device BGP peer\n    type: string\n  primary_router_id:\n    description: Primary router VRF router id\n    label: Primary router id\n    type: string\n  secondary_router_id:\n    description: Secondary router VRF router id\n    label: Secondary router id\n    type: string\n  remote_as:\n    description: eBGP remote autonomous system\n    label: Remote AS\n    type: string\n  md5:\n    description: eBGP authentication key\n    label: eBGP authentication key\n    type: string\n  bgp_group_name:\n    description: Name of eBGP group\n    label: eBGP group name\n    type: string\n  gohan_id:\n    type: string\n    label: Gohan resource ID\n    description: UUID of the Azure Interface\n  tenant_id:\n    type: string\n    label: Tenant ID\n  version:\n    type: number\n    label: Config version\n\nresources:\n{% set primary_ip_uplink_split = jinja_primary_uplink_ip.split('/') %}\n{% set secondary_ip_uplink_split = jinja_secondary_uplink_ip.split('/') %}\n{% for device in [\"primary\", \"secondary\"] %}\n  netconf_configure_{{ device }}:\n    type: OS::Contrail::NetconfNamedConfigs\n    {% if device == \"secondary\" %}depends_on: netconf_configure_primary{% endif %}\n    properties:\n      lock_timeout: 3000\n      device_ip:\n        get_param: {{ device }}_device_ip\n      password:\n        get_param: {{ device }}_device_password\n      port:\n        get_param: {{ device }}_device_port\n      username:\n        get_param: {{ device }}_device_username\n      configs:\n      - config: \"\"\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: interfaces\n          - config_type: name\n            xml_type: named_tag\n            tag: interface\n            name: { get_param: {{ device }}_device_physical_interface }\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: unit\n            name: { get_param: uplink_vlan }\n          - config_type: tag\n            xml_type: tag\n            tag: family\n          - config_type: tag\n            xml_type: tag\n            tag: inet\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: address\n            name: {% if device == \"primary\" %} {{ jinja_primary_uplink_ip }} {% else %} {{ jinja_secondary_uplink_ip }} {% endif %}\n      - config:\n          str_replace:\n            params:\n              $NEIGHBOR_IP:\n                    get_param: {{ device }}_peer_ip\n              $REMOTE_AS:\n                    get_param: remote_as\n              $APPLY_GROUP:\n                    get_param: {{ device }}_ebgp_config_group\n              $KEY:\n                    get_param: md5\n            template: |\n              apply-groups $APPLY_GROUP;\n              local-address {% if device == \"primary\" %} {{ primary_ip_uplink_split[0] }} {% else %} {{ secondary_ip_uplink_split[0] }} {% endif %};\n              peer-as $REMOTE_AS;\n              neighbor $NEIGHBOR_IP authentication-key $KEY;\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: routing-instances\n          - config_type: name\n            xml_type: named_tag\n            tag: instance\n            name: { get_param: vrf_name }\n          - config_type: tag\n            xml_type: tag\n            tag: protocols\n          - config_type: tag\n            xml_type: tag\n            tag: bgp\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: group\n            name: { get_param: bgp_group_name }\n      - config:\n          str_replace:\n            params:\n              $ROUTER_ID:\n                    get_param: {{device}}_router_id\n              $LOCAL_AS:\n                    get_param: local_as\n            template: |\n              router-id $ROUTER_ID;\n              autonomous-system $LOCAL_AS;\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: routing-instances\n          - config_type: name\n            xml_type: named_tag\n            tag: instance\n            name: { get_param: vrf_name }\n          - config_type: tag\n            xml_type: tag\n            tag: routing-options\n{% endfor %}\n\n  bgp_monitor:\n    type: ESI::Monitoring::MonitoringTarget\n    properties:\n      type: bgp_pool\n      resource_type: azure_interfaces\n      resource_id: { get_param: gohan_id }\n      tenant_id: { get_param: tenant_id }\n      version: { get_param: version }\n      field_name: status\n      properties:\n        instance: { get_param: vrf_name }\n        primary:\n          host: { get_param: primary_device_ip }\n          port: { get_param: primary_device_port }\n          login: { get_param: primary_device_username }\n          password: { get_param: primary_device_password }\n          peer_address: { get_param: primary_peer_ip }\n        secondary:\n          host: { get_param: secondary_device_ip }\n          port: { get_param: secondary_device_port }\n          login: { get_param: secondary_device_username }\n          password: { get_param: secondary_device_password }\n          peer_address: { get_param: secondary_peer_ip }\n      syncer_properties:\n        etcd:\n          status:\n            key: status\n    depends_on: netconf_configure_secondary\n\n{% for device in [\"primary\", \"secondary\"] %}\n  {{ device }}_interface_metric_monitor:\n    type: ESI::Monitoring::MonitoringTarget\n    properties:\n      type: snmp_ports_metric\n      resource_type: azure_interfaces\n      resource_id: { get_param: gohan_id }\n      tenant_id: { get_param: tenant_id }\n      version: { get_param: version }\n      field_name: {{ device }}_router\n      properties:\n        device_ip: { get_param: {{ device }}_device_ip }\n        if_name: { get_param: {{ device }}_device_logical_interface }\n        community_name: EDGE_ROUTER_COMMUNITY\n      syncer_properties:\n        tsdb:\n          traffic.in:\n            metric: traffic.bytes\n            tags:\n              device_index: {{ device }}\n              resource_id: { get_param: gohan_id }\n              direction: in\n          traffic.out:\n            metric: traffic.bytes\n            tags:\n              device_index: {{ device }}\n              resource_id: { get_param: gohan_id }\n              direction: out\n    depends_on: bgp_monitor\n{% endfor %}\n\noutputs:\n  monitoring_target_id:\n    description: Monitoring Target ID\n    value: { get_resource: bgp_monitor}\n  monitoring_link:\n    description: Monitoring Process Link\n    value: { get_attr: [bgp_monitor, link]}\n{% for device in [\"primary\", \"secondary\"] %}\n  {{ device }}_interface_monitoring_target_id:\n    description: Monitoring Target ID\n    value: { get_resource: {{ device }}_interface_metric_monitor}\n  {{ device }}_interface_monitoring_link:\n    description: Monitoring Process Link\n    value: { get_attr: [{{ device }}_interface_metric_monitor, link]}\n{% endfor %}\n", 
        "parameter_mappings": {
            "secondary_router_id": "Osecondary:bgp_router_id", 
            "secondary_device_physical_interface": "Fazure_gateway+azure_gw_id:ha_interface+uplink_interface_id:er_physical_interface+secondary_interface_id:name", 
            "primary_peer_ip": "Oprimary:bgp_peer_ip", 
            "primary_device_logical_interface": "Fazure_gateway+azure_gw_id:primary_logical_uplink_interface_name", 
            "primary_device_password": "Fazure_gateway+azure_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password", 
            "gohan_id": "Pid", 
            "bgp_group_name": "CAZURE-PE", 
            "remote_as": "Pbgp_remote_as", 
            "jinja_primary_uplink_ip": "Oprimary:ip_address", 
            "primary_device_ip": "Fazure_gateway+azure_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip", 
            "secondary_ebgp_config_group": "Fazure_gateway+azure_gw_id:azure_service+azure_service_id:secondary_ebgp_config_group", 
            "version": "Vauto_filled", 
            "secondary_device_username": "Fazure_gateway+azure_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login", 
            "secondary_device_logical_interface": "Fazure_gateway+azure_gw_id:secondary_logical_uplink_interface_name", 
            "local_as": "Fazure_gateway+azure_gw_id:local_as_number", 
            "primary_device_physical_interface": "Fazure_gateway+azure_gw_id:ha_interface+uplink_interface_id:er_physical_interface+primary_interface_id:name", 
            "uplink_vlan": "Fazure_gateway+azure_gw_id:uplink_vlan_id", 
            "md5": "Pbgp_md5", 
            "secondary_peer_ip": "Osecondary:bgp_peer_ip", 
            "primary_router_id": "Oprimary:bgp_router_id", 
            "primary_ebgp_config_group": "Fazure_gateway+azure_gw_id:azure_service+azure_service_id:primary_ebgp_config_group", 
            "tenant_id": "Ptenant_id", 
            "jinja_secondary_uplink_ip": "Osecondary:ip_address", 
            "secondary_device_port": "Fazure_gateway+azure_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port", 
            "secondary_device_password": "Fazure_gateway+azure_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password", 
            "heat_timeout": "C60", 
            "vrf_name": "Fazure_gateway+azure_gw_id:vrf_name", 
            "primary_device_username": "Fazure_gateway+azure_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login", 
            "primary_device_port": "Fazure_gateway+azure_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port", 
            "secondary_device_ip": "Fazure_gateway+azure_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip"
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,574:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,574:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,575:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,581:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/qos_option_gcp],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "qos_option_gcp", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  QoS Option\n\nparameters:\n  primary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\n    label: Ip address of the device.\n    type: string\n  primary_device_port:\n    description: Port that will be used to establish ssh connection to the Primary Device.\n    label: Port of the ssh connection.\n    type: number\n  primary_device_username:\n    description: Name of the user which will be used to log onto the Primary Device.\n    label: User name to log on to device.\n    type: string\n  primary_device_password:\n    description: Password of the user which will be used to log onto the Primary Device.\n    label: Users password.\n    type: string\n  secondary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\n    label: Ip address of the device.\n    type: string\n    hidden: true\n  secondary_device_port:\n    description: Port that will be used to establish ssh connection to the Secondary Device.\n    label: Port of the ssh connection.\n    type: number\n  secondary_device_username:\n    description: Name of the user which will be used to log onto the Secondary Device.\n    label: User name to log on to device.\n    type: string\n  secondary_device_password:\n    description: Password of the user which will be used to log onto the Secondary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  incoming_policer_name:\n    description: Name of created incoming policer\n    label: Incoming policer name\n    type: string\n  incoming_policer_config:\n    description: Configuration of incoming policer\n    label: Incoming policer config\n    type: string\n  outgoing_policer_name:\n    description: Name of created outgoing policer\n    label: Outgoing policer name\n    type: string\n  outgoing_policer_config:\n    description: Configuration of outgoing policer\n    label: Outgoing policer config\n    type: string\n  neighbour_prefix:\n    description: Name of prefix list used to specify traffic source/destination\n    label: Neighbour prefix\n    type: string\nresources:\n{% set forewarding_class = be_forwarding_class if qos_type == \"besteffort\" else ga_forwarding_class %}\n{% for device in [\"primary\", \"secondary\"] %}\n  netconf_configure_{{ device }}:\n    type: OS::Contrail::NetconfNamedConfigs\n    {% if device == \"secondary\" %}depends_on: netconf_configure_primary{% endif %}\n    properties:\n      lock_timeout: 3000\n      device_ip:\n        get_param: {{ device }}_device_ip\n      password:\n        get_param: {{ device }}_device_password\n      port:\n        get_param: {{ device }}_device_port\n      username:\n        get_param: {{ device }}_device_username\n      configs:\n      - config:\n          { get_param: incoming_policer_config }\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: firewall\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: three-color-policer\n            name: { get_param: incoming_policer_name }\n      - config:\n          { get_param: outgoing_policer_config }\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: firewall\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: policer\n            name: { get_param: outgoing_policer_name }\n      - config:\n          str_replace:\n            params:\n              $PREFIX:\n                get_param: neighbour_prefix\n              $CLASS:\n                {% if jinja_type == \"besteffort\" %} {{ jinja_be_forwarding_class }} {% else %} {{ jinja_ga_forwarding_class }} {% endif %}\n              $POLICER_NAME:\n                get_param: incoming_policer_name\n            template: |\n               interface-specific;\n               term bgp-accept {\n                   from {\n                       source-prefix-list {\n                           $PREFIX;\n                       }\n                       protocol tcp;\n                       port bgp;\n                   }\n                   then accept;\n               }\n               term vrrp-accept {\n                   from {\n                       source-prefix-list {\n                           $PREFIX;\n                       }\n                       protocol vrrp;\n                   }\n                   then policer 10K-RE;\n                   then accept;\n               }\n               term qos {\n                   then {\n                       three-color-policer {\n                           {% if jinja_type == \"besteffort\" %}two-rate{% else %}single-rate{% endif %} $POLICER_NAME;\n                       }\n                       forwarding-class $CLASS;\n                       accept;\n                   }\n               }\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: firewall\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: filter\n            name:\n              str_replace:\n                params:\n                  $NAME:\n                    get_param: incoming_policer_name\n                template: |\n                  FILTER_$NAME\n      - config:\n          str_replace:\n            params:\n              $PREFIX:\n                get_param: neighbour_prefix\n              $POLICER_NAME:\n                get_param: outgoing_policer_name\n            template: |\n               interface-specific;\n               term bgp-accept {\n                   from {\n                       destination-prefix-list {\n                           $PREFIX;\n                       }\n                       protocol tcp;\n                       port bgp;\n                   }\n                   then accept;\n               }\n               term vrrp-accept {\n                   from {\n                       protocol vrrp;\n                   }\n                   then accept;\n               }\n               term policer {\n                   then {\n                       policer $POLICER_NAME;\n                       accept;\n                   }\n               }\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: firewall\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: filter\n            name:\n              str_replace:\n                params:\n                  $NAME:\n                    get_param: outgoing_policer_name\n                template: |\n                  FILTER_$NAME\n{% endfor %}\n", 
        "parameter_mappings": {
            "secondary_device_password": "Fha_router+ha_router_id:edge_router+secondary_router_id:password", 
            "jinja_be_forwarding_class": "Fgcp_service+gcp_service_id:be_forwarding_class", 
            "primary_device_password": "Fha_router+ha_router_id:edge_router+primary_router_id:password", 
            "jinja_ga_forwarding_class": "Fgcp_service+gcp_service_id:ga_forwarding_class", 
            "incoming_policer_name": "Pincoming_policer_name", 
            "jinja_type": "Pqos_type", 
            "secondary_device_port": "Fha_router+ha_router_id:edge_router+secondary_router_id:ssh_port", 
            "primary_device_ip": "Fha_router+ha_router_id:edge_router+primary_router_id:ip", 
            "heat_timeout": "C60", 
            "outgoing_policer_config": "Poutgoing_policer_config", 
            "incoming_policer_config": "Pincoming_policer_config", 
            "outgoing_policer_name": "Poutgoing_policer_name", 
            "neighbour_prefix": "Fgcp_service+gcp_service_id:neighbour_prefix", 
            "secondary_device_username": "Fha_router+ha_router_id:edge_router+secondary_router_id:login", 
            "primary_device_port": "Fha_router+ha_router_id:edge_router+primary_router_id:ssh_port", 
            "secondary_device_ip": "Fha_router+ha_router_id:edge_router+secondary_router_id:ip", 
            "primary_device_username": "Fha_router+ha_router_id:edge_router+primary_router_id:login"
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,582:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,582:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,583:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,591:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/gcp_gateway],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "gcp_gateway", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  GCP Gateway\n\nparameters:\n  primary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\n    label: Ip address of the device.\n    type: string\n  primary_device_port:\n    description: Port that will be used to establish ssh connection to the Primary Device.\n    label: Port of the ssh connection.\n    type: number\n  primary_device_username:\n    description: Name of the user which will be used to log onto the Primary Device.\n    label: User name to log on to device.\n    type: string\n  primary_device_password:\n    description: Password of the user which will be used to log onto the Primary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  primary_device_logical_downlink_interface:\n    description: Name of the created logical downlink interface on the Primary device\n    label: Logical Interface name\n    type: string\n  primary_device_physical_downlink_interface:\n    description: Physical port on the Primary device on which the logical downlink port will be configured\n    label: Underlying physical interface\n    type: string\n  primary_device_logical_uplink_interface:\n    description: Name of the created logical uplink interface on the Primary device\n    label: Logical Interface name\n    type: string\n  primary_device_physical_uplink_interface:\n    description: Physical port on the Primary device on which the logical uplink port will be configured\n    label: Underlying physical interface\n    type: string\n  secondary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\n    label: Ip address of the device.\n    type: string\n  secondary_device_port:\n    description: Port that will be used to establish ssh connection to the Secondary Device.\n    label: Port of the ssh connection.\n    type: number\n  secondary_device_username:\n    description: Name of the user which will be used to log onto the Secondary Device.\n    label: User name to log on to device.\n    type: string\n  secondary_device_password:\n    description: Password of the user which will be used to log onto the Secondary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  secondary_device_logical_downlink_interface:\n    description: Name of the created logical downlink interface on the Secondary device\n    label: Logical Interface name\n    type: string\n  secondary_device_physical_downlink_interface:\n    description: Physical port on the Secondary device on which the logical downlink port will be configured\n    label: Underlying physical interface\n    type: string\n  secondary_device_logical_uplink_interface:\n    description: Name of the created logical uplink interface on the Secondary device\n    label: Logical Interface name\n    type: string\n  secondary_device_physical_uplink_interface:\n    description: Physical port on the Secondary device on which the logical uplink port will be configured\n    label: Underlying physical interface\n    type: string\n  downlink_vlan:\n    description: vlan tag used by logical downlink interface\n    label: VLAN ID\n    type: string\n  uplink_vlan:\n    description: vlan tag used by logical uplink interface\n    label: VLAN ID\n    type: string\n  vrf_name:\n    description: Name for VRF used by logical interfaces\n    label: VRF name\n    type: string\n  input_filter_name:\n    description: Name for policer used for input\n    label: Input filter name\n    type: string\n  output_filter_name:\n    description: Name for policer used for output\n    label: Output filter name\n    type: string\n  primary_downlink_vrrp_config_group:\n    description: Name for apply group to use for downlink interface for VRRP\n    label: Apply group name\n    type: string\n  secondary_downlink_vrrp_config_group:\n    description: Name for apply group to use for downlink interface for VRRP\n    label: Apply group name\n    type: string\n\nresources:\n{% for device in [\"primary\", \"secondary\"] %}\n  netconf_configure_{{ device }}:\n    type: OS::Contrail::NetconfNamedConfigs\n    {% if device == \"secondary\" %}depends_on: netconf_configure_primary{% endif %}\n    properties:\n      lock_timeout: 3000\n      device_ip:\n        get_param: {{ device }}_device_ip\n      password:\n        get_param: {{ device }}_device_password\n      port:\n        get_param: {{ device }}_device_port\n      username:\n        get_param: {{ device }}_device_username\n      on_update: merge\n      configs:\n      - config:\n          str_replace:\n            params:\n              $VLAN:\n                get_param: downlink_vlan\n              $INPUT_FILTER:\n                get_param: input_filter_name\n              $OUTPUT_FILTER:\n                get_param: output_filter_name\n              $APPLY_GROUP:\n                get_param: {{ device }}_downlink_vrrp_config_group\n            template: |\n              apply-groups $APPLY_GROUP;\n              vlan-id $VLAN;\n              description GCP_Downlink;\n              family inet {\n                  filter {\n                      input $INPUT_FILTER;\n                      output $OUTPUT_FILTER;\n                  }\n              }\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: interfaces\n          - config_type: name\n            xml_type: named_tag\n            tag: interface\n            name: { get_param: {{ device }}_device_physical_downlink_interface }\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: unit\n            name: { get_param: downlink_vlan }\n      - config:\n          str_replace:\n            params:\n              $LIFD:\n                get_param: {{ device }}_device_logical_downlink_interface\n              $LIFU:\n                get_param: {{ device }}_device_logical_uplink_interface\n            template: |\n                instance-type virtual-router;\n                interface $LIFD;\n                interface $LIFU;\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: routing-instances\n          - config_type: name\n            xml_type: named_tag\n            tag: instance\n            name: { get_param: vrf_name }\n      - config:\n          str_replace:\n            params:\n              $VLAN:\n                get_param: uplink_vlan\n            template: |\n              vlan-id $VLAN;\n              description GCP_Uplink;\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: interfaces\n          - config_type: name\n            xml_type: named_tag\n            tag: interface\n            name: { get_param: {{ device }}_device_physical_uplink_interface }\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: unit\n            name: { get_param: uplink_vlan }\n{% endfor %}\n", 
        "parameter_mappings": {
            "primary_device_logical_uplink_interface": "Pprimary_logical_uplink_interface_name", 
            "primary_device_logical_downlink_interface": "Pprimary_logical_downlink_interface_name", 
            "primary_device_password": "Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password", 
            "output_filter_name": "ACFILTER_&Fqos_option+qos_option_id:outgoing_policer_name", 
            "primary_device_ip": "Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip", 
            "secondary_device_physical_downlink_interface": "Fha_interface+downlink_interface_id:er_physical_interface+secondary_interface_id:name", 
            "secondary_device_username": "Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login", 
            "primary_device_physical_uplink_interface": "Fha_interface+uplink_interface_id:er_physical_interface+primary_interface_id:name", 
            "secondary_device_logical_uplink_interface": "Psecondary_logical_uplink_interface_name", 
            "downlink_vlan": "Pdownlink_vlan_id", 
            "secondary_device_logical_downlink_interface": "Psecondary_logical_downlink_interface_name", 
            "input_filter_name": "ACFILTER_&Fqos_option+qos_option_id:incoming_policer_name", 
            "uplink_vlan": "Puplink_vlan_id", 
            "secondary_device_port": "Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port", 
            "primary_downlink_vrrp_config_group": "Fgcp_service+gcp_service_id:primary_downlink_vrrp_config_group", 
            "secondary_device_password": "Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password", 
            "heat_timeout": "C60", 
            "vrf_name": "Pvrf_name", 
            "primary_device_username": "Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login", 
            "primary_device_physical_downlink_interface": "Fha_interface+downlink_interface_id:er_physical_interface+primary_interface_id:name", 
            "secondary_downlink_vrrp_config_group": "Fgcp_service+gcp_service_id:secondary_downlink_vrrp_config_group", 
            "primary_device_port": "Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port", 
            "secondary_device_physical_uplink_interface": "Fha_interface+uplink_interface_id:er_physical_interface+secondary_interface_id:name", 
            "secondary_device_ip": "Fha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip"
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,592:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,592:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,594:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,603:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/gw_interface_gcp],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "gw_interface_gcp", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  Inet Address\n\nparameters:\n  primary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\n    label: Ip address of the device.\n    type: string\n  primary_device_port:\n    description: Port that will be used to establish ssh connection to the Primary Device.\n    label: Port of the ssh connection.\n    type: number\n  primary_device_username:\n    description: Name of the user which will be used to log onto the Primary Device.\n    label: User name to log on to device.\n    type: string\n  primary_device_password:\n    description: Password of the user which will be used to log onto the Primary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  secondary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\n    label: Ip address of the device.\n    type: string\n  secondary_device_port:\n    description: Port that will be used to establish ssh connection to the Secondary Device.\n    label: Port of the ssh connection.\n    type: number\n  secondary_device_username:\n    description: Name of the user which will be used to log onto the Secondary Device.\n    label: User name to log on to device.\n    type: string\n  secondary_device_password:\n    description: Password of the user which will be used to log onto the Secondary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  primary_device_physical_interface:\n    description: MX physical port on which logical interface will be created\n    label: Underlying physical interface\n    type: string\n  secondary_device_physical_interface:\n    description: MX physical port on which logical interface will be created\n    label: Underlying physical interface\n    type: string\n  downlink_vlan_id:\n    description: Vlan tag for mx logical downlink interface\n    label: Vlan Tag\n    type: string\n  gw_vip:\n    description: Virtual IP configured on VRRP\n    label: Inet Address CIDR\n    type: string\n  primary_device_gw_ip:\n    description: IP on primary device\n    label: Inet Address CIDR\n    type: string\n  secondary_device_gw_ip:\n    description: IP on secondary device\n    label: Inet Address CIDR\n    type: string\n  netmask:\n    description: Netmask for gw_ip\n    label: Netmask\n    type: number\n  vrrp_group:\n    type: string\n    label: VRRP Group\n  primary_device_priority:\n    type: string\n    label: Primary device priority\n  secondary_device_priority:\n    type: string\n    label: Secondary device priority\n  vrf_name:\n    type: string\n    label: VRF\n  bgp_group_name:\n    type: string\n    label: Name of BGP Group on VRF\n  local_as:\n    type: string\n    label: Local AS Number\n  primary_ibgp_config_group:\n    description: Name for apply group to use for downlink interface\n    label: Apply group name\n    type: string\n  secondary_ibgp_config_group:\n    description: Name for apply group to use for downlink interface\n    label: Apply group name\n    type: string\n  primary_logical_interface_name:\n    description: MX logical port\n    label: Underlying logical interface\n    type: string\n  secondary_logical_interface_name:\n    description: MX logical port\n    label: Underlying logical interface\n    type: string\n  gohan_id:\n    type: string\n    label: Gohan resource ID\n    description: UUID of the GW Interface\n  tenant_id:\n    type: string\n    label: Tenant ID\n  version:\n    type: number\n    label: Config version\nresources:\n{% for device in [\"primary\", \"secondary\"] %}\n  netconf_configure_{{ device }}:\n    type: OS::Contrail::NetconfNamedConfigs\n    {% if device == \"secondary\" %}depends_on: netconf_configure_primary{% endif %}\n    properties:\n      lock_timeout: 3000\n      device_ip:\n        get_param: {{ device }}_device_ip\n      password:\n        get_param: {{ device }}_device_password\n      port:\n        get_param: {{ device }}_device_port\n      username:\n        get_param: {{ device }}_device_username\n      configs:\n      - config:\n          str_replace:\n            params:\n              $VRRP_GROUP:\n                    get_param: vrrp_group\n              $PRIORITY:\n                    get_param: {{ device }}_device_priority\n              $VIP:\n                    get_param: gw_vip\n            template: |\n                vrrp-group $VRRP_GROUP {\n                    virtual-address $VIP;\n                    priority $PRIORITY;\n                }\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: interfaces\n          - config_type: name\n            xml_type: named_tag\n            tag: interface\n            name: { get_param: {{ device }}_device_physical_interface }\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: unit\n            name: { get_param: downlink_vlan_id }\n          - config_type: tag\n            xml_type: tag\n            tag: family\n          - config_type: tag\n            xml_type: tag\n            tag: inet\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: address\n            name:\n              str_replace:\n                params:\n                  $DEVICE_IP:\n                    get_param: {{ device }}_device_gw_ip\n                  $NETMASK:\n                    get_param: netmask\n                template: |\n                  $DEVICE_IP/$NETMASK\n      - config:\n          str_replace:\n            params:\n              $DEVICE_GW_IP:\n                    get_param: {{ device }}_device_gw_ip\n              $NEIGHBOR_GW_IP:\n                    get_param: {% if device == \"secondary\" %}primary{% else %}secondary{% endif %}_device_gw_ip\n              $LOCAL_AS:\n                    get_param: local_as\n              $APPLY_GROUP:\n                    get_param: {{ device }}_ibgp_config_group\n            template: |\n              apply-groups $APPLY_GROUP;\n              local-address $DEVICE_GW_IP;\n              peer-as $LOCAL_AS;\n              neighbor $NEIGHBOR_GW_IP;\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: routing-instances\n          - config_type: name\n            xml_type: named_tag\n            tag: instance\n            name: { get_param: vrf_name }\n          - config_type: tag\n            xml_type: tag\n            tag: protocols\n          - config_type: tag\n            xml_type: tag\n            tag: bgp\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: group\n            name: { get_param: bgp_group_name }\n{% endfor %}\n\n  vrrp_monitor:\n    type: ESI::Monitoring::MonitoringTarget\n    properties:\n      type: vrrp_pool\n      resource_type: gw_interfaces\n      resource_id: { get_param: gohan_id }\n      tenant_id: { get_param: tenant_id }\n      version: { get_param: version }\n      field_name: status\n      properties:\n        vrid:\n          - { get_param: vrrp_group }\n        primary:\n          host: { get_param: primary_device_ip }\n          port: { get_param: primary_device_port }\n          login: { get_param: primary_device_username }\n          password: { get_param: primary_device_password }\n          interface: { get_param: primary_logical_interface_name }\n        secondary:\n          host: { get_param: secondary_device_ip }\n          port: { get_param: secondary_device_port }\n          login: { get_param: secondary_device_username }\n          password: { get_param: secondary_device_password }\n          interface: { get_param: secondary_logical_interface_name }\n      syncer_properties:\n        etcd:\n          status:\n            key: status\n          hold_options:\n            positive_status:\n              - primary: MASTER\n                secondary: BACKUP\n            time_seconds: 360\n    depends_on: netconf_configure_secondary\n\noutputs:\n  monitoring_target_id:\n    description: Monitoring Target ID\n    value: { get_resource: vrrp_monitor}\n  monitoring_link:\n    description: Monitoring Process Link\n    value: { get_attr: [vrrp_monitor, link]}\n", 
        "parameter_mappings": {
            "secondary_device_physical_interface": "Fgcp_gateway+gcp_gw_id:ha_interface+downlink_interface_id:er_physical_interface+secondary_interface_id:name", 
            "secondary_ibgp_config_group": "Fgcp_gateway+gcp_gw_id:gcp_service+gcp_service_id:secondary_ibgp_config_group", 
            "primary_device_password": "Fgcp_gateway+gcp_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password", 
            "secondary_device_gw_ip": "Psecondary_ipv4", 
            "gohan_id": "Pid", 
            "bgp_group_name": "Cinet-gw-group", 
            "gw_vip": "Pgw_vipv4", 
            "primary_device_ip": "Fgcp_gateway+gcp_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip", 
            "version": "Vauto_filled", 
            "secondary_device_username": "Fgcp_gateway+gcp_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login", 
            "primary_device_username": "Fgcp_gateway+gcp_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login", 
            "downlink_vlan_id": "Fgcp_gateway+gcp_gw_id:downlink_vlan_id", 
            "secondary_logical_interface_name": "Fgcp_gateway+gcp_gw_id:secondary_logical_downlink_interface_name", 
            "primary_logical_interface_name": "Fgcp_gateway+gcp_gw_id:primary_logical_downlink_interface_name", 
            "local_as": "Fgcp_gateway+gcp_gw_id:local_as_number", 
            "primary_device_physical_interface": "Fgcp_gateway+gcp_gw_id:ha_interface+downlink_interface_id:er_physical_interface+primary_interface_id:name", 
            "netmask": "Pnetmask", 
            "primary_device_gw_ip": "Pprimary_ipv4", 
            "vrrp_group": "Pvrid", 
            "primary_device_priority": "C105", 
            "jinja_force_dependency": "Fgcp_gateway+gcp_gw_id:gcp_interface+connected_gcp_interface:id", 
            "tenant_id": "Ptenant_id", 
            "secondary_device_port": "Fgcp_gateway+gcp_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port", 
            "secondary_device_password": "Fgcp_gateway+gcp_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password", 
            "heat_timeout": "C60", 
            "vrf_name": "Fgcp_gateway+gcp_gw_id:vrf_name", 
            "jinja_force_dependency2": {
                "field": "id", 
                "path": [
                    {
                        "type": "network", 
                        "id": "network_id"
                    }
                ]
            }, 
            "secondary_device_priority": "C100", 
            "primary_ibgp_config_group": "Fgcp_gateway+gcp_gw_id:gcp_service+gcp_service_id:primary_ibgp_config_group", 
            "primary_device_port": "Fgcp_gateway+gcp_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port", 
            "secondary_device_ip": "Fgcp_gateway+gcp_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip"
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,603:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,604:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,605:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,613:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/static_route_gcp],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "static_route_gcp", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  GCP Gateway Static Route\n\nparameters:\n  primary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\n    label: Ip address of the device.\n    type: string\n  primary_device_port:\n    description: Port that will be used to establish ssh connection to the Primary Device.\n    label: Port of the ssh connection.\n    type: number\n  primary_device_username:\n    description: Name of the user which will be used to log onto the Primary Device.\n    label: User name to log on to device.\n    type: string\n  primary_device_password:\n    description: Password of the user which will be used to log onto the Primary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  secondary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\n    label: Ip address of the device.\n    type: string\n  secondary_device_port:\n    description: Port that will be used to establish ssh connection to the Secondary Device.\n    label: Port of the ssh connection.\n    type: number\n  secondary_device_username:\n    description: Name of the user which will be used to log onto the Secondary Device.\n    label: User name to log on to device.\n    type: string\n  secondary_device_password:\n    description: Password of the user which will be used to log onto the Secondary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  vrf_name:\n    description: Name of VRF to add this static route\n    label: VRF\n    type: string\n  route:\n    description: Static Route definition\n    label: Route\n    type: string\n  next_hop:\n    description: Next hop for the static route\n    label: Next hop\n    type: string\n\nresources:\n{% for device in [\"primary\", \"secondary\"] %}\n  netconf_configure_{{ device }}:\n    type: OS::Contrail::NetconfNamedConfigs\n    {% if device == \"secondary\" %}depends_on: netconf_configure_primary{% endif %}\n    properties:\n      device_ip:\n        get_param: {{ device }}_device_ip\n      password:\n        get_param: {{ device }}_device_password\n      port:\n        get_param: {{ device }}_device_port\n      username:\n        get_param: {{ device }}_device_username\n      lock_timeout: 3000\n      configs:\n      - config:\n          str_replace:\n            params:\n              $NEXT_HOP:\n                get_param: next_hop\n            template: |\n              next-hop $NEXT_HOP;\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: routing-instances\n          - config_type: name\n            xml_type: named_tag\n            tag: instance\n            name: { get_param: vrf_name }\n          - config_type: tag\n            xml_type: tag\n            tag: routing-options\n          - config_type: tag\n            xml_type: tag\n            tag: static\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: route\n            name: { get_param: route }\n{% endfor %}\n", 
        "parameter_mappings": {
            "secondary_device_password": "Fgcp_gateway+gcp_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password", 
            "route": "Pdestination", 
            "primary_device_password": "Fgcp_gateway+gcp_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password", 
            "secondary_device_port": "Fgcp_gateway+gcp_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port", 
            "primary_device_ip": "Fgcp_gateway+gcp_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip", 
            "heat_timeout": "C60", 
            "next_hop": "Pnexthop", 
            "vrf_name": "Fgcp_gateway+gcp_gw_id:vrf_name", 
            "primary_device_username": "Fgcp_gateway+gcp_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login", 
            "primary_device_port": "Fgcp_gateway+gcp_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port", 
            "secondary_device_ip": "Fgcp_gateway+gcp_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip", 
            "secondary_device_username": "Fgcp_gateway+gcp_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login"
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,613:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,614:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,615:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,623:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/gcp_interface],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "gcp_interface", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  Inet Address\n\nparameters:\n  primary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\n    label: Ip address of the device.\n    type: string\n  primary_device_port:\n    description: Port that will be used to establish ssh connection to the Primary Device.\n    label: Port of the ssh connection.\n    type: number\n  primary_device_username:\n    description: Name of the user which will be used to log onto the Primary Device.\n    label: User name to log on to device.\n    type: string\n  primary_device_password:\n    description: Password of the user which will be used to log onto the Primary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  secondary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\n    label: Ip address of the device.\n    type: string\n  secondary_device_port:\n    description: Port that will be used to establish ssh connection to the Secondary Device.\n    label: Port of the ssh connection.\n    type: number\n  secondary_device_username:\n    description: Name of the user which will be used to log onto the Secondary Device.\n    label: User name to log on to device.\n    type: string\n  secondary_device_password:\n    description: Password of the user which will be used to log onto the Secondary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  primary_device_physical_interface:\n    description: MX physical port on which logical interface will be created\n    label: Underlying physical interface\n    type: string\n  secondary_device_physical_interface:\n    description: MX physical port on which logical interface will be created\n    label: Underlying physical interface\n    type: string\n  primary_device_logical_interface:\n    description: Name of the created logical uplink interface on the Primary device\n    label: Logical Interface name\n    type: string\n  secondary_device_logical_interface:\n    description: Name of the created logical uplink interface on the Secondary device\n    label: Logical Interface name\n    type: string\n  vrf_name:\n    description: Name of VRF (routing-instance) in MX config\n    label: VRF Name\n    type: string\n  local_as:\n    type: number\n    label: Local AS Number\n  primary_ebgp_config_group:\n    description: Name of MX config group for eBGP config\n    label: eBGP config group\n    type: string\n  secondary_ebgp_config_group:\n    description: Name of MX config group for eBGP config\n    label: eBGP config group\n    type: string\n  uplink_vlan:\n    description: VLAN ID used on uplink interfaces (same for both primary and secondary device)\n    label: Uplink VLAN ID\n    type: string\n  primary_peer_ip:\n    description: IP address of primary router eBGP neighbour\n    label: Primary device BGP peer\n    type: string\n  secondary_peer_ip:\n    description: IP address of secondary router eBGP neighbour\n    label: Secondary device BGP peer\n    type: string\n  primary_router_id:\n    description: Primary router VRF router id\n    label: Primary router id\n    type: string\n  secondary_router_id:\n    description: Secondary router VRF router id\n    label: Secondary router id\n    type: string\n  remote_as:\n    description: eBGP remote autonomous system\n    label: Remote AS\n    type: string\n  bgp_group_name:\n    description: Name of eBGP group\n    label: eBGP group name\n    type: string\n  gohan_id:\n    type: string\n    label: Gohan resource ID\n    description: UUID of the AWS Interface\n  tenant_id:\n    type: string\n    label: Tenant ID\n  version:\n    type: number\n    label: Config version\n\nresources:\n{% set primary_ip_uplink_split = jinja_primary_uplink_ip.split('/') %}\n{% set secondary_ip_uplink_split = jinja_secondary_uplink_ip.split('/') %}\n{% for device in [\"primary\", \"secondary\"] %}\n  netconf_configure_{{ device }}:\n    type: OS::Contrail::NetconfNamedConfigs\n    {% if device == \"secondary\" %}depends_on: netconf_configure_primary{% endif %}\n    properties:\n      lock_timeout: 3000\n      device_ip:\n        get_param: {{ device }}_device_ip\n      password:\n        get_param: {{ device }}_device_password\n      port:\n        get_param: {{ device }}_device_port\n      username:\n        get_param: {{ device }}_device_username\n      configs:\n      - config: \"\"\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: interfaces\n          - config_type: name\n            xml_type: named_tag\n            tag: interface\n            name: { get_param: {{ device }}_device_physical_interface }\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: unit\n            name: { get_param: uplink_vlan }\n          - config_type: tag\n            xml_type: tag\n            tag: family\n          - config_type: tag\n            xml_type: tag\n            tag: inet\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: address\n            name: {% if device == \"primary\" %} {{ jinja_primary_uplink_ip }} {% else %} {{ jinja_secondary_uplink_ip }} {% endif %}\n      - config:\n          str_replace:\n            params:\n              $NEIGHBOR_IP:\n                    get_param: {{ device }}_peer_ip\n              $REMOTE_AS:\n                    get_param: remote_as\n              $APPLY_GROUP:\n                    get_param: {{ device }}_ebgp_config_group\n            template: |\n              apply-groups $APPLY_GROUP;\n              local-address {% if device == \"primary\" %} {{ primary_ip_uplink_split[0] }} {% else %} {{ secondary_ip_uplink_split[0] }} {% endif %};\n              peer-as $REMOTE_AS;\n              neighbor $NEIGHBOR_IP;\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: routing-instances\n          - config_type: name\n            xml_type: named_tag\n            tag: instance\n            name: { get_param: vrf_name }\n          - config_type: tag\n            xml_type: tag\n            tag: protocols\n          - config_type: tag\n            xml_type: tag\n            tag: bgp\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: group\n            name: { get_param: bgp_group_name }\n      - config:\n          str_replace:\n            params:\n              $ROUTER_ID:\n                    get_param: {{device}}_router_id\n              $LOCAL_AS:\n                    get_param: local_as\n            template: |\n              router-id $ROUTER_ID;\n              autonomous-system $LOCAL_AS;\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: routing-instances\n          - config_type: name\n            xml_type: named_tag\n            tag: instance\n            name: { get_param: vrf_name }\n          - config_type: tag\n            xml_type: tag\n            tag: routing-options\n{% endfor %}\n\n  bgp_monitor:\n    type: ESI::Monitoring::MonitoringTarget\n    properties:\n      type: bgp_pool\n      resource_type: gcp_interfaces\n      resource_id: { get_param: gohan_id }\n      tenant_id: { get_param: tenant_id }\n      version: { get_param: version }\n      field_name: status\n      properties:\n        instance: { get_param: vrf_name }\n        primary:\n          host: { get_param: primary_device_ip }\n          port: { get_param: primary_device_port }\n          login: { get_param: primary_device_username }\n          password: { get_param: primary_device_password }\n          peer_address: { get_param: primary_peer_ip }\n        secondary:\n          host: { get_param: secondary_device_ip }\n          port: { get_param: secondary_device_port }\n          login: { get_param: secondary_device_username }\n          password: { get_param: secondary_device_password }\n          peer_address: { get_param: secondary_peer_ip }\n      syncer_properties:\n        etcd:\n          status:\n            key: status\n    depends_on: netconf_configure_secondary\n\n{% for device in [\"primary\", \"secondary\"] %}\n  {{ device }}_interface_metric_monitor:\n    type: ESI::Monitoring::MonitoringTarget\n    properties:\n      type: snmp_ports_metric\n      resource_type: gcp_interfaces\n      resource_id: { get_param: gohan_id }\n      tenant_id: { get_param: tenant_id }\n      version: { get_param: version }\n      field_name: {{ device }}_router\n      properties:\n        device_ip: { get_param: {{ device }}_device_ip }\n        if_name: { get_param: {{ device }}_device_logical_interface }\n        community_name: EDGE_ROUTER_COMMUNITY\n      syncer_properties:\n        tsdb:\n          traffic.in:\n            metric: traffic.bytes\n            tags:\n              device_index: {{ device }}\n              resource_id: { get_param: gohan_id }\n              direction: in\n          traffic.out:\n            metric: traffic.bytes\n            tags:\n              device_index: {{ device }}\n              resource_id: { get_param: gohan_id }\n              direction: out\n    depends_on: bgp_monitor\n{% endfor %}\n\noutputs:\n  monitoring_target_id:\n    description: Monitoring Target ID\n    value: { get_resource: bgp_monitor}\n  monitoring_link:\n    description: Monitoring Process Link\n    value: { get_attr: [bgp_monitor, link]}\n{% for device in [\"primary\", \"secondary\"] %}\n  {{ device }}_interface_monitoring_target_id:\n    description: Monitoring Target ID\n    value: { get_resource: {{ device }}_interface_metric_monitor}\n  {{ device }}_interface_monitoring_link:\n    description: Monitoring Process Link\n    value: { get_attr: [{{ device }}_interface_metric_monitor, link]}\n{% endfor %}\n", 
        "parameter_mappings": {
            "secondary_router_id": "Osecondary:bgp_router_id", 
            "secondary_device_physical_interface": "Fgcp_gateway+gcp_gw_id:ha_interface+uplink_interface_id:er_physical_interface+secondary_interface_id:name", 
            "primary_peer_ip": "Oprimary:bgp_peer_ip", 
            "primary_device_logical_interface": "Fgcp_gateway+gcp_gw_id:primary_logical_uplink_interface_name", 
            "primary_device_password": "Fgcp_gateway+gcp_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:password", 
            "gohan_id": "Pid", 
            "bgp_group_name": "CGCP-PE", 
            "remote_as": "Pbgp_remote_as", 
            "jinja_primary_uplink_ip": "Oprimary:ip_address", 
            "primary_device_ip": "Fgcp_gateway+gcp_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ip", 
            "secondary_ebgp_config_group": "Fgcp_gateway+gcp_gw_id:gcp_service+gcp_service_id:secondary_ebgp_config_group", 
            "version": "Vauto_filled", 
            "secondary_device_username": "Fgcp_gateway+gcp_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:login", 
            "secondary_device_logical_interface": "Fgcp_gateway+gcp_gw_id:secondary_logical_uplink_interface_name", 
            "local_as": "Fgcp_gateway+gcp_gw_id:local_as_number", 
            "primary_device_physical_interface": "Fgcp_gateway+gcp_gw_id:ha_interface+uplink_interface_id:er_physical_interface+primary_interface_id:name", 
            "uplink_vlan": "Fgcp_gateway+gcp_gw_id:uplink_vlan_id", 
            "secondary_peer_ip": "Osecondary:bgp_peer_ip", 
            "primary_router_id": "Oprimary:bgp_router_id", 
            "primary_ebgp_config_group": "Fgcp_gateway+gcp_gw_id:gcp_service+gcp_service_id:primary_ebgp_config_group", 
            "tenant_id": "Ptenant_id", 
            "jinja_secondary_uplink_ip": "Osecondary:ip_address", 
            "secondary_device_port": "Fgcp_gateway+gcp_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ssh_port", 
            "secondary_device_password": "Fgcp_gateway+gcp_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:password", 
            "heat_timeout": "C60", 
            "vrf_name": "Fgcp_gateway+gcp_gw_id:vrf_name", 
            "primary_device_username": "Fgcp_gateway+gcp_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:login", 
            "primary_device_port": "Fgcp_gateway+gcp_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+primary_router_id:ssh_port", 
            "secondary_device_ip": "Fgcp_gateway+gcp_gw_id:ha_interface+downlink_interface_id:ha_router+ha_router_id:edge_router+secondary_router_id:ip"
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,624:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,624:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,625:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,635:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/common_function_gateway],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "common_function_gateway", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  Common Function Gateway\n\nparameters:\n  primary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\n    label: Ip address of the device.\n    type: string\n  primary_device_port:\n    description: Port that will be used to establish ssh connection to the Primary Device.\n    label: Port of the ssh connection.\n    type: number\n  primary_device_username:\n    description: Name of the user which will be used to log onto the Primary Device.\n    label: User name to log on to device.\n    type: string\n  primary_device_password:\n    description: Password of the user which will be used to log onto the Primary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  primary_device_logical_downlink_interface:\n    description: Name of the created logical downlink interface on the Primary device\n    label: Logical Interface name\n    type: string\n  primary_device_physical_downlink_interface:\n    description: Physical port on the Primary device on which the logical downlink port will be configured\n    label: Underlying physical interface\n    type: string\n  secondary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\n    label: Ip address of the device.\n    type: string\n  secondary_device_port:\n    description: Port that will be used to establish ssh connection to the Secondary Device.\n    label: Port of the ssh connection.\n    type: number\n  secondary_device_username:\n    description: Name of the user which will be used to log onto the Secondary Device.\n    label: User name to log on to device.\n    type: string\n  secondary_device_password:\n    description: Password of the user which will be used to log onto the Secondary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  secondary_device_logical_downlink_interface:\n    description: Name of the created logical downlink interface on the Secondary device\n    label: Logical Interface name\n    type: string\n  secondary_device_physical_downlink_interface:\n    description: Physical port on the Secondary device on which the logical downlink port will be configured\n    label: Underlying physical interface\n    type: string\n  gohan_id:\n    type: string\n    label: Gohan resource ID\n    description: UUID of the Common Function Gateway\n  tenant_id:\n    type: string\n    label: Tenant ID\n  version:\n    type: number\n    label: Config version\n\nresources:\n{% for device in [\"primary\", \"secondary\"] %}\n  netconf_configure_{{ device }}:\n    properties:\n      lock_timeout: 3000\n      configs:\n      - config: |\n          nat-rules {{ jinja_vrf_name }}-SNAPT;\n          nat-rules {{ jinja_vrf_name }}-DNAT;\n          interface-service service-interface {{ jinja_service_interface_name }}.{{ jinja_vlan_id }};\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: services\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: service-set\n            name: {{ jinja_vrf_name }}\n      - config: |\n          apply-groups {{ jinja_snapt_pool_group_name }};\n          address {{ jinja_nat_ip }}/32;\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: services\n          - config_type: tag\n            xml_type: tag\n            tag: nat\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: pool\n            name: {{ jinja_vrf_name }}-SNAPT-POOL\n      - config: |\n          apply-groups {{ jinja_snapt_group_name }};\n          term source then translated source-pool {{ jinja_vrf_name }}-SNAPT-POOL;\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: services\n          - config_type: tag\n            xml_type: tag\n            tag: nat\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: rule\n            name: {{ jinja_vrf_name }}-SNAPT\n      {% for service_number in jinja_common_service_numbers %}\n      - config: |\n          apply-groups {{ jinja_dnat_pool_group_name }}-{{ service_number }};\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: services\n          - config_type: tag\n            xml_type: tag\n            tag: nat\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: pool\n            name: {{ jinja_vrf_name }}-{{ jinja_dnat_pool_group_name }}-{{ service_number }}\n      {% endfor %}\n      - config: |\n          apply-groups {{ jinja_dnat_group_name }};\n          {% for service_number in jinja_common_service_numbers %}\n          term {{ service_number }} then translated destination-pool {{ jinja_vrf_name }}-{{ jinja_dnat_pool_group_name }}-{{ service_number }};\n          {% endfor %}\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: services\n          - config_type: tag\n            xml_type: tag\n            tag: nat\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: rule\n            name: {{ jinja_vrf_name }}-DNAT\n      - config: |\n          peer-unit {{ jinja_logical_tunnel_unit_service }};\n          family inet service input service-set {{ jinja_vrf_name }};\n          family inet service output service-set {{ jinja_vrf_name }};\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: interfaces\n          - config_type: name\n            xml_type: named_tag\n            tag: interface\n            name: {{ jinja_logical_tunnel_interface_name }}\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: unit\n            name: {{ jinja_logical_tunnel_unit_user }}\n      - config: |\n          peer-unit {{ jinja_logical_tunnel_unit_user }};\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: interfaces\n          - config_type: name\n            xml_type: named_tag\n            tag: interface\n            name: {{ jinja_logical_tunnel_interface_name }}\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: unit\n            name: {{ jinja_logical_tunnel_unit_service }}\n      - config: |\n          family inet;\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: interfaces\n          - config_type: name\n            xml_type: named_tag\n            tag: interface\n            name: {{ jinja_service_interface_name }}\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: unit\n            name: {{ jinja_vlan_id }}\n      - config: |\n          apply-groups {{ jinja_vrrp_group_name }};\n          description {{ jinja_vrf_name }};\n          vlan-id {{ jinja_vlan_id }};\n          family inet service input service-set {{ jinja_vrf_name }};\n          family inet service output service-set {{ jinja_vrf_name }};\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: interfaces\n          - config_type: name\n            xml_type: named_tag\n            tag: interface\n            name: { get_param: {{ device }}_device_physical_downlink_interface }\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: unit\n            name: {{ jinja_vlan_id }}\n      - config: \"\"\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: routing-instances\n          - config_type: name\n            xml_type: named_tag\n            tag: instance\n            name: {{ jinja_service_vrf_name }}\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: interface\n            name: {{ jinja_logical_tunnel_interface_name }}.{{ jinja_logical_tunnel_unit_service }}\n      - config:\n          next-hop {{ jinja_logical_tunnel_interface_name }}.{{ jinja_logical_tunnel_unit_service }};\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: routing-instances\n          - config_type: name\n            xml_type: named_tag\n            tag: instance\n            name: {{ jinja_service_vrf_name }}\n          - config_type: tag\n            xml_type: tag\n            tag: routing-options\n          - config_type: tag\n            xml_type: tag\n            tag: static\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: route\n            name: {{ jinja_nat_ip }}/32\n      - config:\n          str_replace:\n            params:\n              $DOWNLINK_INTERFACE:\n                get_param: {{ device }}_device_logical_downlink_interface\n            template: |\n              instance-type virtual-router;\n              interface {{ jinja_logical_tunnel_interface_name }}.{{ jinja_logical_tunnel_unit_user}};\n              interface {{ jinja_service_interface_name}}.{{ jinja_vlan_id }};\n              interface $DOWNLINK_INTERFACE;\n              routing-options static route 0.0.0.0/0 next-hop {{ jinja_logical_tunnel_interface_name }}.{{ jinja_logical_tunnel_unit_user }};\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: routing-instances\n          - config_type: name\n            xml_type: named_tag\n            tag: instance\n            name: {{ jinja_vrf_name }}\n      device_ip:\n        get_param: {{ device }}_device_ip\n      password:\n        get_param: {{ device }}_device_password\n      port:\n        get_param: {{ device }}_device_port\n      username:\n        get_param: {{ device }}_device_username\n    {% if device == \"secondary\" %}depends_on: netconf_configure_primary{% endif %}\n    type: OS::Contrail::NetconfNamedConfigs\n{% endfor %}\n\n  vrrp_monitor:\n    type: ESI::Monitoring::MonitoringTarget\n    properties:\n      type: vrrp_pool\n      resource_type: common_function_gateways\n      resource_id: { get_param: gohan_id }\n      tenant_id: { get_param: tenant_id }\n      version: { get_param: version }\n      field_name: status\n      properties:\n        vrid:\n        {% for vrid in jinja_vrids %}\n          - {{ vrid }}\n        {% endfor %}\n        primary:\n          host: { get_param: primary_device_ip }\n          port: { get_param: primary_device_port }\n          login: { get_param: primary_device_username }\n          password: { get_param: primary_device_password }\n          interface: { get_param: primary_device_logical_downlink_interface }\n        secondary:\n          host: { get_param: secondary_device_ip }\n          port: { get_param: secondary_device_port }\n          login: { get_param: secondary_device_username }\n          password: { get_param: secondary_device_password }\n          interface: { get_param: secondary_device_logical_downlink_interface }\n      syncer_properties:\n        etcd:\n          status:\n            key: status\n          hold_options:\n            positive_status:\n              - primary_vrid1: MASTER\n                secondary_vrid1: BACKUP\n                primary_vrid2: MASTER\n                secondary_vrid2: BACKUP\n            time_seconds: 360\n    depends_on: netconf_configure_secondary\n\noutputs:\n  monitoring_target_id:\n    description: Monitoring Target ID\n    value: { get_resource: vrrp_monitor}\n  monitoring_link:\n    description: Monitoring Process Link\n    value: { get_attr: [vrrp_monitor, link]}\n", 
        "parameter_mappings": {
            "jinja_vrids": {
                "for_mapping": {
                    "field": "vrid"
                }, 
                "for_field": {
                    "field": "vrrp_config", 
                    "path": [
                        "common_function_pool_id"
                    ]
                }
            }, 
            "primary_device_logical_downlink_interface": {
                "field": "primary_logical_interface_name"
            }, 
            "jinja_common_service_numbers": {
                "for_mapping": {
                    "field": "common_function_number", 
                    "path": [
                        {
                            "type": "common_function", 
                            "id": "common_function_id"
                        }
                    ]
                }, 
                "for_field": "common_functions"
            }, 
            "jinja_vlan_id": {
                "field": "vlan_id"
            }, 
            "primary_device_password": {
                "field": "password", 
                "path": [
                    "downlink_interface_id", 
                    "ha_router_id", 
                    "primary_router_id"
                ]
            }, 
            "gohan_id": {
                "field": "id"
            }, 
            "jinja_service_vrf_name": {
                "field": "service_vrf_name", 
                "path": [
                    "common_function_pool_id"
                ]
            }, 
            "jinja_dnat_group_name": {
                "field": "dnat_group_name", 
                "path": [
                    "common_function_pool_id"
                ]
            }, 
            "heat_timeout": "C60", 
            "primary_device_ip": {
                "field": "ip", 
                "path": [
                    "downlink_interface_id", 
                    "ha_router_id", 
                    "primary_router_id"
                ]
            }, 
            "jinja_logical_tunnel_unit_user": {
                "field": "logical_tunnel_unit_user"
            }, 
            "version": {
                "version": "auto_filled"
            }, 
            "secondary_device_logical_downlink_interface": {
                "field": "secondary_logical_interface_name"
            }, 
            "secondary_device_physical_downlink_interface": {
                "field": "name", 
                "path": [
                    "downlink_interface_id", 
                    "secondary_interface_id"
                ]
            }, 
            "secondary_device_username": {
                "field": "login", 
                "path": [
                    "downlink_interface_id", 
                    "ha_router_id", 
                    "secondary_router_id"
                ]
            }, 
            "jinja_dnat_pool_group_name": {
                "field": "dnat_pool_group_name", 
                "path": [
                    "common_function_pool_id"
                ]
            }, 
            "jinja_nat_ip": {
                "field": "nat_ip"
            }, 
            "jinja_dummy_dependency": {
                "field": "id", 
                "path": [
                    {
                        "type": "subnet", 
                        "id": "subnet_id"
                    }
                ], 
                "ignore_missing": true
            }, 
            "jinja_vrf_name": {
                "field": "vrf_name"
            }, 
            "jinja_vrrp_group_name": {
                "field": "vrrp_group_name", 
                "path": [
                    "common_function_pool_id"
                ]
            }, 
            "jinja_snapt_group_name": {
                "field": "snapt_group_name", 
                "path": [
                    "common_function_pool_id"
                ]
            }, 
            "jinja_logical_tunnel_interface_name": {
                "field": "logical_tunnel_interface_name", 
                "path": [
                    "common_function_pool_id"
                ]
            }, 
            "tenant_id": {
                "field": "tenant_id"
            }, 
            "secondary_device_port": {
                "field": "ssh_port", 
                "path": [
                    "downlink_interface_id", 
                    "ha_router_id", 
                    "secondary_router_id"
                ]
            }, 
            "jinja_logical_tunnel_unit_service": {
                "field": "logical_tunnel_unit_service"
            }, 
            "secondary_device_password": {
                "field": "password", 
                "path": [
                    "downlink_interface_id", 
                    "ha_router_id", 
                    "secondary_router_id"
                ]
            }, 
            "jinja_service_interface_name": {
                "field": "service_interface_name", 
                "path": [
                    "common_function_pool_id"
                ]
            }, 
            "primary_device_username": {
                "field": "login", 
                "path": [
                    "downlink_interface_id", 
                    "ha_router_id", 
                    "primary_router_id"
                ]
            }, 
            "primary_device_physical_downlink_interface": {
                "field": "name", 
                "path": [
                    "downlink_interface_id", 
                    "primary_interface_id"
                ]
            }, 
            "jinja_snapt_pool_group_name": {
                "field": "snapt_pool_group_name", 
                "path": [
                    "common_function_pool_id"
                ]
            }, 
            "primary_device_port": {
                "field": "ssh_port", 
                "path": [
                    "downlink_interface_id", 
                    "ha_router_id", 
                    "primary_router_id"
                ]
            }, 
            "secondary_device_ip": {
                "field": "ip", 
                "path": [
                    "downlink_interface_id", 
                    "ha_router_id", 
                    "secondary_router_id"
                ]
            }
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,636:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,636:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,637:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,645:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/common_function],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "common_function", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  Common Function\n\nparameters:\n  primary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\n    label: Ip address of the device.\n    type: string\n  primary_device_port:\n    description: Port that will be used to establish ssh connection to the Primary Device.\n    label: Port of the ssh connection.\n    type: number\n  primary_device_username:\n    description: Name of the user which will be used to log onto the Primary Device.\n    label: User name to log on to device.\n    type: string\n  primary_device_password:\n    description: Password of the user which will be used to log onto the Primary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  primary_vrrp_ip:\n    description: Local ip in VRRP group on primary device.\n    label: Primary VRRP ip.\n    type: string\n  secondary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\n    label: Ip address of the device.\n    type: string\n  secondary_device_port:\n    description: Port that will be used to establish ssh connection to the Secondary Device.\n    label: Port of the ssh connection.\n    type: number\n  secondary_device_username:\n    description: Name of the user which will be used to log onto the Secondary Device.\n    label: User name to log on to device.\n    type: string\n  secondary_device_password:\n    description: Password of the user which will be used to log onto the Secondary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  secondary_vrrp_ip:\n    description: Local ip in VRRP group on secondary device.\n    label: Secondary VRRP ip.\n    type: string\n  netmask:\n    description: Netmask used in link local network.\n    label: Link-local netmask.\n    type: string\n\nresources:\n{% for device in [\"primary\", \"secondary\"] %}\n  netconf_configure_{{ device }}:\n    properties:\n      lock_timeout: 3000\n      configs:\n      - config: \"\"\n        path:\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: groups\n            name: {{ jinja_vrrp_group_name }}\n          - config_type: tag\n            xml_type: tag\n            tag: interfaces\n          - config_type: name\n            xml_type: named_tag\n            tag: interface\n            name: <*>\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: unit\n            name: <*>\n          - config_type: tag\n            xml_type: tag\n            tag: family\n          - config_type: tag\n            xml_type: tag\n            tag: inet\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: address\n            name:\n              str_replace:\n                params:\n                  $VIP:\n                    get_param: {{ device }}_vrrp_ip\n                  $NETMASK:\n                    get_param: netmask\n                template: |\n                  $VIP/$NETMASK\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: vrrp-group\n            name: {{ jinja_vrid }}\n          - config_type: named_tag\n            xml_type: named_tag # FIXME: this is probably not true, as far as i can see we don't support that in plugin at all :(\n            tag: virtual-address\n            name: {{ jinja_link_local_ip_address }}\n      - config: |\n          from {\n            destination-address {\n              {{ jinja_link_local_ip_address }}/32;\n            }\n          }\n          then {\n            translated {\n              translation-type {\n                dnat-44;\n              }\n            }\n          }\n        path:\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: groups\n            name: {{ jinja_dnat_group_name }}\n          - config_type: tag\n            xml_type: tag\n            tag: services\n          - config_type: tag\n            xml_type: tag\n            tag: nat\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: rule\n            name: <*>\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: term\n            name: {{ jinja_service_number }}\n      - config: |\n          services {\n            nat {\n              pool <*> {\n                address {{ jinja_shared_ip_address }}/32;\n              }\n            }\n          }\n        path:\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: groups\n            name: {{ jinja_dnat_pool_group_name }}-{{ jinja_service_number }}\n      device_ip:\n        get_param: {{ device }}_device_ip\n      password:\n        get_param: {{ device }}_device_password\n      port:\n        get_param: {{ device }}_device_port\n      username:\n        get_param: {{ device }}_device_username\n    {% if device == \"secondary\" %}depends_on: netconf_configure_primary{% endif %}\n    type: OS::Contrail::NetconfNamedConfigs\n{% endfor %}\n", 
        "parameter_mappings": {
            "jinja_dnat_pool_group_name": {
                "field": "dnat_pool_group_name", 
                "path": [
                    "common_function_pool_id"
                ]
            }, 
            "primary_vrrp_ip": {
                "field": "primary_vrrp_ip"
            }, 
            "jinja_dnat_group_name": {
                "field": "dnat_group_name", 
                "path": [
                    "common_function_pool_id"
                ]
            }, 
            "secondary_vrrp_ip": {
                "field": "secondary_vrrp_ip"
            }, 
            "secondary_device_ip": {
                "field": "ip", 
                "path": [
                    "ha_router_id", 
                    "secondary_router_id"
                ]
            }, 
            "primary_device_port": {
                "field": "ssh_port", 
                "path": [
                    "ha_router_id", 
                    "primary_router_id"
                ]
            }, 
            "netmask": {
                "field": "link_local_netmask", 
                "path": [
                    "common_function_pool_id"
                ]
            }, 
            "jinja_shared_ip_address": {
                "field": "shared_ip_address"
            }, 
            "primary_device_ip": {
                "field": "ip", 
                "path": [
                    "ha_router_id", 
                    "primary_router_id"
                ]
            }, 
            "secondary_device_password": {
                "field": "password", 
                "path": [
                    "ha_router_id", 
                    "secondary_router_id"
                ]
            }, 
            "heat_timeout": "C60", 
            "primary_device_username": {
                "field": "login", 
                "path": [
                    "ha_router_id", 
                    "primary_router_id"
                ]
            }, 
            "primary_device_password": {
                "field": "password", 
                "path": [
                    "ha_router_id", 
                    "primary_router_id"
                ]
            }, 
            "jinja_service_number": {
                "field": "common_function_number"
            }, 
            "secondary_device_username": {
                "field": "login", 
                "path": [
                    "ha_router_id", 
                    "secondary_router_id"
                ]
            }, 
            "jinja_vrrp_group_name": {
                "field": "vrrp_group_name", 
                "path": [
                    "common_function_pool_id"
                ]
            }, 
            "secondary_device_port": {
                "field": "ssh_port", 
                "path": [
                    "ha_router_id", 
                    "secondary_router_id"
                ]
            }, 
            "jinja_vrid": {
                "field": "vrid"
            }, 
            "jinja_link_local_ip_address": {
                "field": "link_local_ip_address"
            }
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,645:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,646:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,647:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,654:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/qos_option_interdc],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "qos_option_interdc", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  QoS Option\n\nparameters:\n  primary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\n    label: Ip address of the device.\n    type: string\n  primary_device_port:\n    description: Port that will be used to establish ssh connection to the Primary Device.\n    label: Port of the ssh connection.\n    type: number\n  primary_device_username:\n    description: Name of the user which will be used to log onto the Primary Device.\n    label: User name to log on to device.\n    type: string\n  primary_device_password:\n    description: Password of the user which will be used to log onto the Primary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  secondary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\n    label: Ip address of the device.\n    type: string\n  secondary_device_port:\n    description: Port that will be used to establish ssh connection to the Secondary Device.\n    label: Port of the ssh connection.\n    type: number\n  secondary_device_username:\n    description: Name of the user which will be used to log onto the Secondary Device.\n    label: User name to log on to device.\n    type: string\n  secondary_device_password:\n    description: Password of the user which will be used to log onto the Secondary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  incoming_policer_name:\n    description: Name of created incoming policer\n    label: Incoming policer name\n    type: string\n  incoming_policer_config:\n    description: Configuration of incoming policer\n    label: Incoming policer config\n    type: string\n  outgoing_policer_name:\n    description: Name of created outgoing policer\n    label: Outgoing policer name\n    type: string\n  outgoing_policer_config:\n    description: Configuration of outgoing policer\n    label: Outgoing policer config\n    type: string\nresources:\n{% for device in [\"primary\", \"secondary\"] %}\n  netconf_configure_{{ device }}:\n    type: OS::Contrail::NetconfNamedConfigs\n    {% if device == \"secondary\" %}depends_on: netconf_configure_primary{% endif %}\n    properties:\n      lock_timeout: 3000\n      device_ip:\n        get_param: {{ device }}_device_ip\n      password:\n        get_param: {{ device }}_device_password\n      port:\n        get_param: {{ device }}_device_port\n      username:\n        get_param: {{ device }}_device_username\n      configs:\n      - config:\n          { get_param: incoming_policer_config }\n        path:\n        - config_type: tag\n          xml_type: tag\n          tag: firewall\n        - config_type: named_tag\n          xml_type: named_tag\n          tag: three-color-policer\n          name: { get_param: incoming_policer_name }\n      - config:\n          { get_param: outgoing_policer_config }\n        path:\n        - config_type: tag\n          xml_type: tag\n          tag: firewall\n        - config_type: named_tag\n          xml_type: named_tag\n          tag: policer\n          name: { get_param: outgoing_policer_name }\n      - config:\n          str_replace:\n            params:\n              $CLASS:\n              {% if jinja_type == \"besteffort\" %}\n                {{ jinja_be_forwarding_class }}\n              {% else %}\n                {{ jinja_ga_forwarding_class }}\n              {% endif %}\n              $POLICER_NAME:\n                get_param: incoming_policer_name\n            template: |\n              interface-specific;\n              term vrrp-accept {\n                from {\n                  protocol vrrp;\n                }\n                then policer 10K-RE;\n                then accept;\n              }\n              term qos {\n                then {\n                  three-color-policer {\n                    two-rate $POLICER_NAME;\n                  }\n                  forwarding-class $CLASS;\n                  accept;\n                }\n              }\n        path:\n        - config_type: tag\n          xml_type: tag\n          tag: firewall\n        - config_type: named_tag\n          xml_type: named_tag\n          tag: filter\n          name:\n            str_replace:\n              params:\n                $NAME:\n                  get_param: incoming_policer_name\n              template: |\n                FILTER_$NAME\n      - config:\n          str_replace:\n            params:\n              $POLICER_NAME:\n                get_param: outgoing_policer_name\n            template: |\n              interface-specific;\n              term vrrp-accept {\n                from {\n                  protocol vrrp;\n                }\n                then accept;\n              }\n              term policer {\n                then {\n                  policer $POLICER_NAME;\n                  accept;\n                }\n              }\n        path:\n        - config_type: tag\n          xml_type: tag\n          tag: firewall\n        - config_type: named_tag\n          xml_type: named_tag\n          tag: filter\n          name:\n            str_replace:\n              params:\n                $NAME:\n                  get_param: outgoing_policer_name\n              template: |\n                FILTER_$NAME\n{% endfor %}\n", 
        "parameter_mappings": {
            "secondary_device_password": {
                "field": "password", 
                "path": [
                    "ha_router_id", 
                    "secondary_router_id"
                ]
            }, 
            "jinja_be_forwarding_class": {
                "field": "be_forwarding_class", 
                "path": [
                    "interdc_service_id"
                ]
            }, 
            "primary_device_password": {
                "field": "password", 
                "path": [
                    "ha_router_id", 
                    "primary_router_id"
                ]
            }, 
            "jinja_ga_forwarding_class": {
                "field": "ga_forwarding_class", 
                "path": [
                    "interdc_service_id"
                ]
            }, 
            "incoming_policer_name": {
                "field": "incoming_policer_name"
            }, 
            "jinja_type": {
                "field": "qos_type"
            }, 
            "secondary_device_port": {
                "field": "ssh_port", 
                "path": [
                    "ha_router_id", 
                    "secondary_router_id"
                ]
            }, 
            "primary_device_ip": {
                "field": "ip", 
                "path": [
                    "ha_router_id", 
                    "primary_router_id"
                ]
            }, 
            "heat_timeout": {
                "constant": 60
            }, 
            "outgoing_policer_config": {
                "field": "outgoing_policer_config"
            }, 
            "incoming_policer_config": {
                "field": "incoming_policer_config"
            }, 
            "outgoing_policer_name": {
                "field": "outgoing_policer_name"
            }, 
            "secondary_device_username": {
                "field": "login", 
                "path": [
                    "ha_router_id", 
                    "secondary_router_id"
                ]
            }, 
            "primary_device_port": {
                "field": "ssh_port", 
                "path": [
                    "ha_router_id", 
                    "primary_router_id"
                ]
            }, 
            "secondary_device_ip": {
                "field": "ip", 
                "path": [
                    "ha_router_id", 
                    "secondary_router_id"
                ]
            }, 
            "primary_device_username": {
                "field": "login", 
                "path": [
                    "ha_router_id", 
                    "primary_router_id"
                ]
            }
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,655:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,655:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,656:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,664:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/interdc_gateway],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "interdc_gateway", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  Inter DC Gateway\n\nparameters:\n  primary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\n    label: Ip address of the device.\n    type: string\n  primary_device_port:\n    description: Port that will be used to establish ssh connection to the Primary Device.\n    label: Port of the ssh connection.\n    type: number\n  primary_device_username:\n    description: Name of the user which will be used to log onto the Primary Device.\n    label: User name to log on to device.\n    type: string\n  primary_device_password:\n    description: Password of the user which will be used to log onto the Primary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  primary_device_physical_downlink_interface:\n    description: Physical port on the Primary device on which the logical downlink port will be configured\n    label: Underlying physical interface\n    type: string\n  primary_device_logical_downlink_interface:\n    description: Name of the created logical downlink interface on the Primary device\n    label: Logical Interface name\n    type: string\n  primary_device_physical_uplink_interface:\n    description: Physical port on the Primary device on which the logical uplink port will be configured\n    label: Underlying physical interface\n    type: string\n  primary_device_logical_uplink_interface:\n    description: Name of the created logical uplink interface on the Primary device\n    label: Logical Interface name\n    type: string\n  secondary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\n    label: Ip address of the device.\n    type: string\n  secondary_device_port:\n    description: Port that will be used to establish ssh connection to the Secondary Device.\n    label: Port of the ssh connection.\n    type: number\n  secondary_device_username:\n    description: Name of the user which will be used to log onto the Secondary Device.\n    label: User name to log on to device.\n    type: string\n  secondary_device_password:\n    description: Password of the user which will be used to log onto the Secondary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  secondary_device_physical_downlink_interface:\n    description: Physical port on the Secondary device on which the logical downlink port will be configured\n    label: Underlying physical interface\n    type: string\n  secondary_device_logical_downlink_interface:\n    description: Name of the created logical downlink interface on the Secondary device\n    label: Logical Interface name\n    type: string\n  secondary_device_physical_uplink_interface:\n    description: Physical port on the Secondary device on which the logical uplink port will be configured\n    label: Underlying physical interface\n    type: string\n  secondary_device_logical_uplink_interface:\n    description: Name of the created logical uplink interface on the Secondary device\n    label: Logical Interface name\n    type: string\n  input_filter_name:\n    description: Name for policer used for input\n    label: Input filter name\n    type: string\n  output_filter_name:\n    description: Name for policer used for output\n    label: Output filter name\n    type: string\n  downlink_vlan:\n    description: vlan tag used by logical downlink interface\n    label: VLAN ID\n    type: string\n  uplink_vlan_id:\n    description: vlan tag used by logical uplink interface\n    label: VLAN ID\n    type: string\n  vrf_name:\n    description: Name for VRF used by logical interfaces\n    label: VRF name\n    type: string\n  primary_downlink_vrrp_config_group:\n    description: Name for apply group to use for downlink interface for VRRP\n    label: Apply group name\n    type: string\n  primary_uplink_vrrp_config_group:\n    description: Name for apply group to use for uplink interface for VRRP\n    label: Apply group name\n    type: string\n  secondary_downlink_vrrp_config_group:\n    description: Name for apply group to use for downlink interface for VRRP\n    label: Apply group name\n    type: string\n  secondary_uplink_vrrp_config_group:\n    description: Name for apply group to use for uplink interface for VRRP\n    label: Apply group name\n    type: string\n\nresources:\n{% for device in [\"primary\", \"secondary\"] %}\n  netconf_configure_{{ device }}:\n    type: OS::Contrail::NetconfNamedConfigs\n    {% if device == \"secondary\" %}depends_on: netconf_configure_primary{% endif %}\n    properties:\n      lock_timeout: 3000\n      on_update: merge\n      device_ip:\n        get_param: {{ device }}_device_ip\n      password:\n        get_param: {{ device }}_device_password\n      port:\n        get_param: {{ device }}_device_port\n      username:\n        get_param: {{ device }}_device_username\n      configs:\n      - config:\n          str_replace:\n            params:\n              $APPLY_GROUP:\n                get_param: {{ device }}_downlink_vrrp_config_group\n              $VLAN:\n                get_param: downlink_vlan\n              $INPUT_FILTER:\n                get_param: input_filter_name\n              $OUTPUT_FILTER:\n                get_param: output_filter_name\n            template: |\n              apply-groups $APPLY_GROUP;\n              description interdc_gw;\n              vlan-id $VLAN;\n              family inet {\n                filter {\n                  input FILTER_$INPUT_FILTER;\n                  output FILTER_$OUTPUT_FILTER;\n                }\n              }\n        path:\n        - config_type: tag\n          xml_type: tag\n          tag: interfaces\n        - config_type: name\n          xml_type: named_tag\n          tag: interface\n          name: { get_param: {{ device }}_device_physical_downlink_interface }\n        - config_type: named_tag\n          xml_type: named_tag\n          tag: unit\n          name: { get_param: downlink_vlan }\n      - config:\n          str_replace:\n            params:\n              $LIFD:\n                get_param: {{ device }}_device_logical_downlink_interface\n              $LIFU:\n                get_param: {{ device }}_device_logical_uplink_interface\n            template: |\n                instance-type virtual-router;\n                interface $LIFD;\n                interface $LIFU;\n        path:\n        - config_type: tag\n          xml_type: tag\n          tag: routing-instances\n        - config_type: name\n          xml_type: named_tag\n          tag: instance\n          name: { get_param: vrf_name }\n      - config:\n          str_replace:\n            params:\n              $APPLY_GROUP:\n                get_param: {{ device }}_uplink_vrrp_config_group\n              $VLAN:\n                get_param: uplink_vlan_id\n            template: |\n              apply-groups $APPLY_GROUP;\n              description DC10GVDX;\n              vlan-id $VLAN;\n        path:\n        - config_type: tag\n          xml_type: tag\n          tag: interfaces\n        - config_type: name\n          xml_type: named_tag\n          tag: interface\n          name: { get_param: {{ device }}_device_physical_uplink_interface }\n        - config_type: named_tag\n          xml_type: named_tag\n          tag: unit\n          name: { get_param: uplink_vlan_id }\n{% endfor %}\n", 
        "parameter_mappings": {
            "primary_device_logical_uplink_interface": {
                "field": "primary_logical_uplink_interface_name"
            }, 
            "primary_device_logical_downlink_interface": {
                "field": "primary_logical_downlink_interface_name"
            }, 
            "primary_device_password": {
                "field": "password", 
                "path": [
                    "downlink_interface_id", 
                    "ha_router_id", 
                    "primary_router_id"
                ]
            }, 
            "output_filter_name": {
                "field": "outgoing_policer_name", 
                "path": [
                    "qos_option_id"
                ]
            }, 
            "primary_device_ip": {
                "field": "ip", 
                "path": [
                    "downlink_interface_id", 
                    "ha_router_id", 
                    "primary_router_id"
                ]
            }, 
            "secondary_device_physical_downlink_interface": {
                "field": "name", 
                "path": [
                    "downlink_interface_id", 
                    "secondary_interface_id"
                ]
            }, 
            "secondary_device_username": {
                "field": "login", 
                "path": [
                    "downlink_interface_id", 
                    "ha_router_id", 
                    "secondary_router_id"
                ]
            }, 
            "primary_device_physical_uplink_interface": {
                "field": "name", 
                "path": [
                    "uplink_interface_id", 
                    "primary_interface_id"
                ]
            }, 
            "secondary_device_logical_uplink_interface": {
                "field": "secondary_logical_uplink_interface_name"
            }, 
            "downlink_vlan": {
                "field": "downlink_vlan_id"
            }, 
            "secondary_device_logical_downlink_interface": {
                "field": "secondary_logical_downlink_interface_name"
            }, 
            "input_filter_name": {
                "field": "incoming_policer_name", 
                "path": [
                    "qos_option_id"
                ]
            }, 
            "primary_device_port": {
                "field": "ssh_port", 
                "path": [
                    "downlink_interface_id", 
                    "ha_router_id", 
                    "primary_router_id"
                ]
            }, 
            "secondary_uplink_vrrp_config_group": {
                "field": "secondary_uplink_vrrp_config_group", 
                "path": [
                    "interdc_service_id"
                ]
            }, 
            "secondary_device_port": {
                "field": "ssh_port", 
                "path": [
                    "downlink_interface_id", 
                    "ha_router_id", 
                    "secondary_router_id"
                ]
            }, 
            "primary_downlink_vrrp_config_group": {
                "field": "primary_downlink_vrrp_config_group", 
                "path": [
                    "interdc_service_id"
                ]
            }, 
            "secondary_device_password": {
                "field": "password", 
                "path": [
                    "downlink_interface_id", 
                    "ha_router_id", 
                    "secondary_router_id"
                ]
            }, 
            "uplink_vlan_id": {
                "field": "uplink_vlan_id"
            }, 
            "heat_timeout": {
                "constant": 60
            }, 
            "vrf_name": {
                "field": "vrf_name"
            }, 
            "primary_device_username": {
                "field": "login", 
                "path": [
                    "downlink_interface_id", 
                    "ha_router_id", 
                    "primary_router_id"
                ]
            }, 
            "primary_device_physical_downlink_interface": {
                "field": "name", 
                "path": [
                    "downlink_interface_id", 
                    "primary_interface_id"
                ]
            }, 
            "secondary_downlink_vrrp_config_group": {
                "field": "secondary_downlink_vrrp_config_group", 
                "path": [
                    "interdc_service_id"
                ]
            }, 
            "primary_uplink_vrrp_config_group": {
                "field": "primary_uplink_vrrp_config_group", 
                "path": [
                    "interdc_service_id"
                ]
            }, 
            "secondary_device_physical_uplink_interface": {
                "field": "name", 
                "path": [
                    "uplink_interface_id", 
                    "secondary_interface_id"
                ]
            }, 
            "secondary_device_ip": {
                "field": "ip", 
                "path": [
                    "downlink_interface_id", 
                    "ha_router_id", 
                    "secondary_router_id"
                ]
            }
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,665:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,665:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,666:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,674:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/interdc_interface],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "interdc_interface", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  Interdc Interface\n\nparameters:\n  primary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\n    label: Ip address of the device.\n    type: string\n  primary_device_port:\n    description: Port that will be used to establish ssh connection to the Primary Device.\n    label: Port of the ssh connection.\n    type: number\n  primary_device_username:\n    description: Name of the user which will be used to log onto the Primary Device.\n    label: User name to log on to device.\n    type: string\n  primary_device_password:\n    description: Password of the user which will be used to log onto the Primary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  secondary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\n    label: Ip address of the device.\n    type: string\n  secondary_device_port:\n    description: Port that will be used to establish ssh connection to the Secondary Device.\n    label: Port of the ssh connection.\n    type: number\n  secondary_device_username:\n    description: Name of the user which will be used to log onto the Secondary Device.\n    label: User name to log on to device.\n    type: string\n  secondary_device_password:\n    description: Password of the user which will be used to log onto the Secondary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  primary_device_physical_interface:\n    description: MX physical port on which logical interface will be created\n    label: Underlying physical interface\n    type: string\n  primary_device_logical_interface:\n    description: Name of the created logical uplink interface on the Primary device\n    label: Logical Interface name\n    type: string\n  primary_device_downlink_physical_interface:\n    description: MX physical port on which logical downlink interface will be created\n    label: Underlying physical interface\n    type: string\n  secondary_device_physical_interface:\n    description: MX physical port on which logical interface will be created\n    label: Underlying physical interface\n    type: string\n  secondary_device_logical_interface:\n    description: Name of the created logical uplink interface on the Secondary device\n    label: Logical Interface name\n    type: string\n  secondary_device_downlink_physical_interface:\n    description: MX physical port on which downlink logical interface will be created\n    label: Underlying physical interface\n    type: string\n  primary_device_gw_ip:\n    description: IP on primary device\n    label: Inet Address CIDR\n    type: string\n  secondary_device_gw_ip:\n    description: IP on secondary device\n    label: Inet Address CIDR\n    type: string\n  primary_device_priority:\n    type: string\n    label: Primary device priority\n  secondary_device_priority:\n    type: string\n    label: Secondary device priority\n  vrf_name:\n    description: Name of VRF (routing-instance) in MX config\n    label: VRF Name\n    type: string\n  netmask:\n    description: Netmask for gw_ip\n    label: Netmask\n    type: number\n  uplink_vlan_id:\n    description: VLAN ID used on uplink interfaces (same for both primary and secondary device)\n    label: Uplink VLAN ID\n    type: string\n  downlink_vlan_id:\n    description: VLAN ID used on downlink interfaces (same for both primary and secondary device)\n    label: Downlink VLAN ID\n    type: string\n  gw_vip:\n    description: Virtual IP configured on VRRP\n    label: Inet Address CIDR\n    type: string\n  primary_device_gw_ip:\n    description: IP on primary device\n    label: Inet Address CIDR\n    type: string\n  secondary_device_gw_ip:\n    description: IP on secondary device\n    label: Inet Address CIDR\n    type: string\n  vrrp_group:\n    type: string\n    label: VRRP Group\n  primary_logical_interface_name:\n    description: MX logical port\n    label: Underlying logical interface\n    type: string\n  secondary_logical_interface_name:\n    description: MX logical port\n    label: Underlying logical interface\n    type: string\n  gohan_id:\n    type: string\n    label: Gohan resource ID\n    description: UUID of the InterDC Interface\n  tenant_id:\n    type: string\n    label: Tenant ID\n  version:\n    type: number\n    label: Config version\nresources:\n{% for device in [\"primary\", \"secondary\"] %}\n  netconf_configure_{{ device }}:\n    type: OS::Contrail::NetconfNamedConfigs\n    {% if device == \"secondary\" %}depends_on: netconf_configure_primary{% endif %}\n    properties:\n      lock_timeout: 3000\n      device_ip:\n        get_param: {{ device }}_device_ip\n      password:\n        get_param: {{ device }}_device_password\n      port:\n        get_param: {{ device }}_device_port\n      username:\n        get_param: {{ device }}_device_username\n      configs:\n      - config:\n          str_replace:\n            params:\n              $VRRP_GROUP:\n                get_param: vrrp_group\n              $VIP:\n                get_param: gw_vip\n              $PRIORITY:\n                get_param: {{ device }}_device_priority\n              $DOWNLINK_IF:\n                get_param: secondary_device_downlink_physical_interface\n              $DOWNLINK_VLAN_ID:\n                get_param: downlink_vlan_id\n            template: |\n              vrrp-group $VRRP_GROUP {\n                virtual-address $VIP;\n                priority $PRIORITY;\n                track {\n                  interface $DOWNLINK_IF.$DOWNLINK_VLAN_ID {\n                    priority-cost 10;\n                  }\n                }\n              }\n        path:\n        - config_type: tag\n          xml_type: tag\n          tag: interfaces\n        - config_type: name\n          xml_type: named_tag\n          tag: interface\n          name: { get_param: {{ device }}_device_physical_interface }\n        - config_type: named_tag\n          xml_type: named_tag\n          tag: unit\n          name: { get_param: uplink_vlan_id }\n        - config_type: tag\n          xml_type: tag\n          tag: family\n        - config_type: tag\n          xml_type: tag\n          tag: inet\n        - config_type: named_tag\n          xml_type: named_tag\n          tag: address\n          name:\n            str_replace:\n              params:\n                $DEVICE_IP:\n                  get_param: {{ device }}_device_gw_ip\n                $NETMASK:\n                  get_param: netmask\n              template: |\n                $DEVICE_IP/$NETMASK\n{% endfor %}\n\n  vrrp_monitor:\n    type: ESI::Monitoring::MonitoringTarget\n    properties:\n      type: vrrp_pool\n      resource_type: interdc_interfaces\n      resource_id: { get_param: gohan_id }\n      tenant_id: { get_param: tenant_id }\n      version: { get_param: version }\n      field_name: status\n      properties:\n        vrid:\n          - { get_param: vrrp_group }\n        primary:\n          host: { get_param: primary_device_ip }\n          port: { get_param: primary_device_port }\n          login: { get_param: primary_device_username }\n          password: { get_param: primary_device_password }\n          interface: { get_param: primary_logical_interface_name }\n        secondary:\n          host: { get_param: secondary_device_ip }\n          port: { get_param: secondary_device_port }\n          login: { get_param: secondary_device_username }\n          password: { get_param: secondary_device_password }\n          interface: { get_param: secondary_logical_interface_name }\n      syncer_properties:\n        etcd:\n          status:\n            key: status\n          hold_options:\n            positive_status:\n              - primary: MASTER\n                secondary: BACKUP\n            time_seconds: 360\n    depends_on: netconf_configure_secondary\n\n{% for device in [\"primary\", \"secondary\"] %}\n  {{ device }}_interface_metric_monitor:\n    type: ESI::Monitoring::MonitoringTarget\n    properties:\n      type: snmp_ports_metric\n      resource_type: interdc_interfaces\n      resource_id: { get_param: gohan_id }\n      tenant_id: { get_param: tenant_id }\n      version: { get_param: version }\n      field_name: {{ device }}_router\n      properties:\n        device_ip: { get_param: {{ device }}_device_ip }\n        if_name: { get_param: {{ device }}_device_logical_interface }\n        community_name: EDGE_ROUTER_COMMUNITY\n      syncer_properties:\n        tsdb:\n          traffic.in:\n            metric: traffic.bytes\n            tags:\n              device_index: {{ device }}\n              resource_id: { get_param: gohan_id }\n              direction: in\n          traffic.out:\n            metric: traffic.bytes\n            tags:\n              device_index: {{ device }}\n              resource_id: { get_param: gohan_id }\n              direction: out\n    depends_on: vrrp_monitor\n{% endfor %}\n\noutputs:\n  monitoring_target_id:\n    description: Monitoring Target ID\n    value: { get_resource: vrrp_monitor}\n  monitoring_link:\n    description: Monitoring Process Link\n    value: { get_attr: [vrrp_monitor, link]}\n{% for device in [\"primary\", \"secondary\"] %}\n  {{ device }}_interface_monitoring_target_id:\n    description: Monitoring Target ID\n    value: { get_resource: {{ device }}_interface_metric_monitor}\n  {{ device }}_interface_monitoring_link:\n    description: Monitoring Process Link\n    value: { get_attr: [{{ device }}_interface_metric_monitor, link]}\n{% endfor %}\n", 
        "parameter_mappings": {
            "secondary_device_physical_interface": {
                "field": "name", 
                "path": [
                    "interdc_gw_id", 
                    "uplink_interface_id", 
                    "secondary_interface_id"
                ]
            }, 
            "primary_device_logical_interface": {
                "field": "primary_logical_uplink_interface_name", 
                "path": [
                    "interdc_gw_id"
                ]
            }, 
            "primary_device_password": {
                "field": "password", 
                "path": [
                    "interdc_gw_id", 
                    "downlink_interface_id", 
                    "ha_router_id", 
                    "primary_router_id"
                ]
            }, 
            "secondary_device_gw_ip": {
                "field": "secondary_ipv4"
            }, 
            "gohan_id": {
                "field": "id"
            }, 
            "primary_device_downlink_physical_interface": {
                "field": "name", 
                "path": [
                    "interdc_gw_id", 
                    "downlink_interface_id", 
                    "primary_interface_id"
                ]
            }, 
            "gw_vip": {
                "field": "gw_vipv4"
            }, 
            "primary_device_ip": {
                "field": "ip", 
                "path": [
                    "interdc_gw_id", 
                    "downlink_interface_id", 
                    "ha_router_id", 
                    "primary_router_id"
                ]
            }, 
            "version": {
                "version": "auto_filled"
            }, 
            "secondary_device_username": {
                "field": "login", 
                "path": [
                    "interdc_gw_id", 
                    "downlink_interface_id", 
                    "ha_router_id", 
                    "secondary_router_id"
                ]
            }, 
            "downlink_vlan_id": {
                "field": "downlink_vlan_id", 
                "path": [
                    "interdc_gw_id"
                ]
            }, 
            "secondary_device_logical_interface": {
                "field": "secondary_logical_uplink_interface_name", 
                "path": [
                    "interdc_gw_id"
                ]
            }, 
            "secondary_logical_interface_name": {
                "field": "secondary_logical_uplink_interface_name", 
                "path": [
                    "interdc_gw_id"
                ]
            }, 
            "primary_logical_interface_name": {
                "field": "primary_logical_uplink_interface_name", 
                "path": [
                    "interdc_gw_id"
                ]
            }, 
            "primary_device_physical_interface": {
                "field": "name", 
                "path": [
                    "interdc_gw_id", 
                    "uplink_interface_id", 
                    "primary_interface_id"
                ]
            }, 
            "netmask": {
                "field": "netmask"
            }, 
            "secondary_device_downlink_physical_interface": {
                "field": "name", 
                "path": [
                    "interdc_gw_id", 
                    "downlink_interface_id", 
                    "secondary_interface_id"
                ]
            }, 
            "primary_device_gw_ip": {
                "field": "primary_ipv4"
            }, 
            "vrrp_group": {
                "field": "vrid"
            }, 
            "primary_device_priority": {
                "constant": 105
            }, 
            "tenant_id": {
                "field": "tenant_id"
            }, 
            "secondary_device_port": {
                "field": "ssh_port", 
                "path": [
                    "interdc_gw_id", 
                    "downlink_interface_id", 
                    "ha_router_id", 
                    "secondary_router_id"
                ]
            }, 
            "secondary_device_password": {
                "field": "password", 
                "path": [
                    "interdc_gw_id", 
                    "downlink_interface_id", 
                    "ha_router_id", 
                    "secondary_router_id"
                ]
            }, 
            "uplink_vlan_id": {
                "field": "uplink_vlan_id", 
                "path": [
                    "interdc_gw_id"
                ]
            }, 
            "heat_timeout": {
                "constant": 60
            }, 
            "vrf_name": {
                "field": "vrf_name", 
                "path": [
                    "interdc_gw_id"
                ]
            }, 
            "primary_device_username": {
                "field": "login", 
                "path": [
                    "interdc_gw_id", 
                    "downlink_interface_id", 
                    "ha_router_id", 
                    "primary_router_id"
                ]
            }, 
            "secondary_device_priority": {
                "constant": 100
            }, 
            "primary_device_port": {
                "field": "ssh_port", 
                "path": [
                    "interdc_gw_id", 
                    "downlink_interface_id", 
                    "ha_router_id", 
                    "primary_router_id"
                ]
            }, 
            "secondary_device_ip": {
                "field": "ip", 
                "path": [
                    "interdc_gw_id", 
                    "downlink_interface_id", 
                    "ha_router_id", 
                    "secondary_router_id"
                ]
            }
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,675:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,675:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,676:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,683:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/gw_interface_interdc],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "gw_interface_interdc", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  Gateway Interface Inter DC\n\nparameters:\n  primary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\n    label: Ip address of the device.\n    type: string\n  primary_device_port:\n    description: Port that will be used to establish ssh connection to the Primary Device.\n    label: Port of the ssh connection.\n    type: number\n  primary_device_username:\n    description: Name of the user which will be used to log onto the Primary Device.\n    label: User name to log on to device.\n    type: string\n  primary_device_password:\n    description: Password of the user which will be used to log onto the Primary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  primary_device_physical_downlink_interface:\n    description: MX physical port on which logical interface will be created\n    label: Underlying physical interface\n    type: string\n  primary_device_physical_uplink_interface:\n    description: MX physical port on which logical interface will be created\n    label: Underlying physical interface\n    type: string\n  secondary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\n    label: Ip address of the device.\n    type: string\n  secondary_device_port:\n    description: Port that will be used to establish ssh connection to the Secondary Device.\n    label: Port of the ssh connection.\n    type: number\n  secondary_device_username:\n    description: Name of the user which will be used to log onto the Secondary Device.\n    label: User name to log on to device.\n    type: string\n  secondary_device_password:\n    description: Password of the user which will be used to log onto the Secondary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  secondary_device_physical_downlink_interface:\n    description: MX physical port on which logical interface will be created\n    label: Underlying physical interface\n    type: string\n  secondary_device_physical_uplink_interface:\n    description: MX physical port on which logical interface will be created\n    label: Underlying physical interface\n    type: string\n  downlink_vlan_id:\n    description: Vlan tag for mx logical downlink interface\n    label: Vlan Tag\n    type: string\n  uplink_vlan_id:\n    description: Vlan tag for mx logical uplink interface\n    label: Vlan Tag\n    type: string\n  gw_vip:\n    description: Virtual IP configured on VRRP\n    label: Inet Address CIDR\n    type: string\n  primary_device_gw_ip:\n    description: IP on primary device\n    label: Inet Address CIDR\n    type: string\n  secondary_device_gw_ip:\n    description: IP on secondary device\n    label: Inet Address CIDR\n    type: string\n  netmask:\n    description: Netmask for gw_ip\n    label: Netmask\n    type: number\n  vrrp_group:\n    type: string\n    label: VRRP Group\n  primary_device_priority:\n    type: string\n    label: Primary device priority\n  secondary_device_priority:\n    type: string\n    label: Secondary device priority\n  vrf_name:\n    type: string\n    label: VRF\n  primary_logical_interface_name:\n    description: MX logical port\n    label: Underlying logical interface\n    type: string\n  secondary_logical_interface_name:\n    description: MX logical port\n    label: Underlying logical interface\n    type: string\n  gohan_id:\n    type: string\n    label: Gohan resource ID\n    description: UUID of the GW Interface\n  tenant_id:\n    type: string\n    label: Tenant ID\n  version:\n    type: number\n    label: Config version\nresources:\n{% for device in [\"primary\", \"secondary\"] %}\n  netconf_configure_{{ device }}:\n    type: OS::Contrail::NetconfNamedConfigs\n    {% if device == \"secondary\" %}depends_on: netconf_configure_primary{% endif %}\n    properties:\n      lock_timeout: 3000\n      device_ip:\n        get_param: {{ device }}_device_ip\n      password:\n        get_param: {{ device }}_device_password\n      port:\n        get_param: {{ device }}_device_port\n      username:\n        get_param: {{ device }}_device_username\n      configs:\n      - config:\n          str_replace:\n            params:\n              $VRRP_GROUP:\n                get_param: vrrp_group\n              $PRIORITY:\n                get_param: {{ device }}_device_priority\n              $VIP:\n                get_param: gw_vip\n              $UPLINK_IF:\n                get_param: {{device}}_device_physical_uplink_interface\n              $UPLINK_VLAN_ID:\n                get_param: uplink_vlan_id\n            template: |\n              vrrp-group $VRRP_GROUP {\n                virtual-address $VIP;\n                priority $PRIORITY;\n                track {\n                  interface $UPLINK_IF.$UPLINK_VLAN_ID {\n                    priority-cost 10;\n                  }\n                }\n              }\n        path:\n        - config_type: tag\n          xml_type: tag\n          tag: interfaces\n        - config_type: name\n          xml_type: named_tag\n          tag: interface\n          name: { get_param: {{ device }}_device_physical_downlink_interface }\n        - config_type: named_tag\n          xml_type: named_tag\n          tag: unit\n          name: { get_param: downlink_vlan_id }\n        - config_type: tag\n          xml_type: tag\n          tag: family\n        - config_type: tag\n          xml_type: tag\n          tag: inet\n        - config_type: named_tag\n          xml_type: named_tag\n          tag: address\n          name:\n            str_replace:\n              params:\n                $DEVICE_IP:\n                  get_param: {{ device }}_device_gw_ip\n                $NETMASK:\n                  get_param: netmask\n              template: |\n                $DEVICE_IP/$NETMASK\n{% endfor %}\n\n  vrrp_monitor:\n    type: ESI::Monitoring::MonitoringTarget\n    properties:\n      type: vrrp_pool\n      resource_type: gw_interfaces\n      resource_id: { get_param: gohan_id }\n      tenant_id: { get_param: tenant_id }\n      version: { get_param: version }\n      field_name: status\n      properties:\n        vrid:\n          - { get_param: vrrp_group }\n        primary:\n          host: { get_param: primary_device_ip }\n          port: { get_param: primary_device_port }\n          login: { get_param: primary_device_username }\n          password: { get_param: primary_device_password }\n          interface: { get_param: primary_logical_interface_name }\n        secondary:\n          host: { get_param: secondary_device_ip }\n          port: { get_param: secondary_device_port }\n          login: { get_param: secondary_device_username }\n          password: { get_param: secondary_device_password }\n          interface: { get_param: secondary_logical_interface_name }\n      syncer_properties:\n        etcd:\n          status:\n            key: status\n          hold_options:\n            positive_status:\n              - primary: MASTER\n                secondary: BACKUP\n            time_seconds: 360\n    depends_on: netconf_configure_secondary\n\noutputs:\n  monitoring_target_id:\n    description: Monitoring Target ID\n    value: { get_resource: vrrp_monitor}\n  monitoring_link:\n    description: Monitoring Process Link\n    value: { get_attr: [vrrp_monitor, link]}\n", 
        "parameter_mappings": {
            "primary_device_password": {
                "field": "password", 
                "path": [
                    "interdc_gw_id", 
                    "downlink_interface_id", 
                    "ha_router_id", 
                    "primary_router_id"
                ]
            }, 
            "secondary_device_gw_ip": {
                "field": "secondary_ipv4"
            }, 
            "gohan_id": {
                "field": "id"
            }, 
            "gw_vip": {
                "field": "gw_vipv4"
            }, 
            "primary_device_ip": {
                "field": "ip", 
                "path": [
                    "interdc_gw_id", 
                    "downlink_interface_id", 
                    "ha_router_id", 
                    "primary_router_id"
                ]
            }, 
            "version": {
                "version": "auto_filled"
            }, 
            "secondary_device_physical_downlink_interface": {
                "field": "name", 
                "path": [
                    "interdc_gw_id", 
                    "downlink_interface_id", 
                    "secondary_interface_id"
                ]
            }, 
            "secondary_device_username": {
                "field": "login", 
                "path": [
                    "interdc_gw_id", 
                    "downlink_interface_id", 
                    "ha_router_id", 
                    "secondary_router_id"
                ]
            }, 
            "downlink_vlan_id": {
                "field": "downlink_vlan_id", 
                "path": [
                    "interdc_gw_id"
                ]
            }, 
            "primary_device_physical_uplink_interface": {
                "field": "name", 
                "path": [
                    "interdc_gw_id", 
                    "uplink_interface_id", 
                    "primary_interface_id"
                ]
            }, 
            "secondary_logical_interface_name": {
                "field": "secondary_logical_downlink_interface_name", 
                "path": [
                    "interdc_gw_id"
                ]
            }, 
            "jinja_force_dependency1": {
                "field": "id", 
                "path": [
                    {
                        "type": "network", 
                        "id": "network_id"
                    }
                ]
            }, 
            "primary_logical_interface_name": {
                "field": "primary_logical_downlink_interface_name", 
                "path": [
                    "interdc_gw_id"
                ]
            }, 
            "primary_device_gw_ip": {
                "field": "primary_ipv4"
            }, 
            "netmask": {
                "field": "netmask"
            }, 
            "vrrp_group": {
                "field": "vrid"
            }, 
            "primary_device_priority": {
                "constant": 105
            }, 
            "tenant_id": {
                "field": "tenant_id"
            }, 
            "secondary_device_port": {
                "field": "ssh_port", 
                "path": [
                    "interdc_gw_id", 
                    "downlink_interface_id", 
                    "ha_router_id", 
                    "secondary_router_id"
                ]
            }, 
            "secondary_device_password": {
                "field": "password", 
                "path": [
                    "interdc_gw_id", 
                    "downlink_interface_id", 
                    "ha_router_id", 
                    "secondary_router_id"
                ]
            }, 
            "uplink_vlan_id": {
                "field": "uplink_vlan_id", 
                "path": [
                    "interdc_gw_id"
                ]
            }, 
            "heat_timeout": {
                "constant": 60
            }, 
            "vrf_name": {
                "field": "vrf_name", 
                "path": [
                    "interdc_gw_id"
                ]
            }, 
            "primary_device_username": {
                "field": "login", 
                "path": [
                    "interdc_gw_id", 
                    "downlink_interface_id", 
                    "ha_router_id", 
                    "primary_router_id"
                ]
            }, 
            "primary_device_physical_downlink_interface": {
                "field": "name", 
                "path": [
                    "interdc_gw_id", 
                    "downlink_interface_id", 
                    "primary_interface_id"
                ]
            }, 
            "secondary_device_priority": {
                "constant": 100
            }, 
            "primary_device_port": {
                "field": "ssh_port", 
                "path": [
                    "interdc_gw_id", 
                    "downlink_interface_id", 
                    "ha_router_id", 
                    "primary_router_id"
                ]
            }, 
            "secondary_device_physical_uplink_interface": {
                "field": "name", 
                "path": [
                    "interdc_gw_id", 
                    "uplink_interface_id", 
                    "secondary_interface_id"
                ]
            }, 
            "secondary_device_ip": {
                "field": "ip", 
                "path": [
                    "interdc_gw_id", 
                    "downlink_interface_id", 
                    "ha_router_id", 
                    "secondary_router_id"
                ]
            }
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,684:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,684:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,685:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,692:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/static_route_interdc],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "static_route_interdc", 
        "template_file": "heat_template_version: 2013-05-23\n\ndescription: >\n  Inter DC Gateway Static Route\n\nparameters:\n  primary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Primary Device.\n    label: Ip address of the device.\n    type: string\n  primary_device_port:\n    description: Port that will be used to establish ssh connection to the Primary Device.\n    label: Port of the ssh connection.\n    type: number\n  primary_device_username:\n    description: Name of the user which will be used to log onto the Primary Device.\n    label: User name to log on to device.\n    type: string\n  primary_device_password:\n    description: Password of the user which will be used to log onto the Primary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  secondary_device_ip:\n    description: Ip address that will be used to establish ssh connection to the Secondary Device.\n    label: Ip address of the device.\n    type: string\n  secondary_device_port:\n    description: Port that will be used to establish ssh connection to the Secondary Device.\n    label: Port of the ssh connection.\n    type: number\n  secondary_device_username:\n    description: Name of the user which will be used to log onto the Secondary Device.\n    label: User name to log on to device.\n    type: string\n  secondary_device_password:\n    description: Password of the user which will be used to log onto the Secondary Device.\n    label: Users password.\n    type: string\n    hidden: true\n  vrf_name:\n    description: Name of VRF to add this static route\n    label: VRF\n    type: string\n  route:\n    description: Static Route definition\n    label: Route\n    type: string\n  next_hop:\n    description: Next hop for the static route\n    label: Next hop\n    type: string\n\nresources:\n{% for device in [\"primary\", \"secondary\"] %}\n  netconf_configure_{{ device }}:\n    {% if device == \"secondary\" %}depends_on: netconf_configure_primary{% endif %}\n    type: OS::Contrail::NetconfNamedConfigs\n    properties:\n      lock_timeout: 3000\n      device_ip:\n        get_param: {{ device }}_device_ip\n      password:\n        get_param: {{ device }}_device_password\n      port:\n        get_param: {{ device }}_device_port\n      username:\n        get_param: {{ device }}_device_username\n      configs:\n      - config:\n          str_replace:\n            params:\n              $NEXT_HOP:\n                get_param: next_hop\n            template: |\n              next-hop $NEXT_HOP;\n        path:\n          - config_type: tag\n            xml_type: tag\n            tag: routing-instances\n          - config_type: name\n            xml_type: named_tag\n            tag: instance\n            name: { get_param: vrf_name }\n          - config_type: tag\n            xml_type: tag\n            tag: routing-options\n          - config_type: tag\n            xml_type: tag\n            tag: static\n          - config_type: named_tag\n            xml_type: named_tag\n            tag: route\n            name: { get_param: route }\n{% endfor %}\n", 
        "parameter_mappings": {
            "secondary_device_password": {
                "field": "password", 
                "path": [
                    "interdc_gw_id", 
                    "downlink_interface_id", 
                    "ha_router_id", 
                    "secondary_router_id"
                ]
            }, 
            "route": {
                "field": "destination"
            }, 
            "primary_device_password": {
                "field": "password", 
                "path": [
                    "interdc_gw_id", 
                    "downlink_interface_id", 
                    "ha_router_id", 
                    "primary_router_id"
                ]
            }, 
            "secondary_device_port": {
                "field": "ssh_port", 
                "path": [
                    "interdc_gw_id", 
                    "downlink_interface_id", 
                    "ha_router_id", 
                    "secondary_router_id"
                ]
            }, 
            "primary_device_ip": {
                "field": "ip", 
                "path": [
                    "interdc_gw_id", 
                    "downlink_interface_id", 
                    "ha_router_id", 
                    "primary_router_id"
                ]
            }, 
            "heat_timeout": {
                "constant": 60
            }, 
            "next_hop": {
                "field": "nexthop"
            }, 
            "vrf_name": {
                "field": "vrf_name", 
                "path": [
                    "interdc_gw_id"
                ]
            }, 
            "primary_device_username": {
                "field": "login", 
                "path": [
                    "interdc_gw_id", 
                    "downlink_interface_id", 
                    "ha_router_id", 
                    "primary_router_id"
                ]
            }, 
            "primary_device_port": {
                "field": "ssh_port", 
                "path": [
                    "interdc_gw_id", 
                    "downlink_interface_id", 
                    "ha_router_id", 
                    "primary_router_id"
                ]
            }, 
            "secondary_device_ip": {
                "field": "ip", 
                "path": [
                    "interdc_gw_id", 
                    "downlink_interface_id", 
                    "ha_router_id", 
                    "secondary_router_id"
                ]
            }, 
            "secondary_device_username": {
                "field": "login", 
                "path": [
                    "interdc_gw_id", 
                    "downlink_interface_id", 
                    "ha_router_id", 
                    "secondary_router_id"
                ]
            }
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,692:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,693:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,694:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,700:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/quotas/default],
 value=[{
    "body": {
        "load_balancer": 10000, 
        "public_ip": 10000, 
        "gcp_gateway": 10000, 
        "aws_gateway": 10000, 
        "hosting_logical_link": 10000, 
        "hosting_physical_link_plane_storage": 10000, 
        "firewall": 10000, 
        "tenant_id": "default", 
        "subnet": 10000, 
        "azure_gateway": 10000, 
        "port": 30000, 
        "internet_gateway": 10000, 
        "colocation_logical_link": 10000, 
        "vpn_gateway": 10000, 
        "interdc_gateway": 10000, 
        "id": "default", 
        "common_function_gateway": 10000, 
        "network": 10000
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,700:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,701:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,702:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,708:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/reserve_addresses/default],
 value=[{
    "body": {
        "subnets": [
            "169.254.0.0/16", 
            "100.64.0.0/10"
        ], 
        "id": "default", 
        "tenant_id": "default"
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,708:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,709:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,710:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,717:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/vnf_instance],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "vnf_instance", 
        "template_file": "heat_template_version: 2013-05-23\ndescription: VNF Instance\nparameters:\n  name:\n    default: \"\"\n    type: string\n  image:\n    type: string\n    constraints:\n    - custom_constraint: glance.image\n  flavor:\n    type: string\n    constraints:\n    - custom_constraint: nova.flavor\n  availability_zone:\n    type: string\n    default: \"\"\n  networks:\n    type: json\n  reboot:\n    type: string\n    default: \"\"\n  user_data:\n    type: string\n    default: \"\"\n  user_data_format:\n    type: string\n  config_drive:\n    type: boolean\n  gohan_id:\n    type: string\n    label: Gohan resource ID\n    description: UUID of the VNF Instance\n  tenant_id:\n    type: string\n    label: Tenant ID\n  version:\n    type: number\n    label: Config version\nresources:\n  server:\n    type: ESI::VNF::Instance\n    properties:\n      name: { get_param: name }\n      flavor: { get_param: flavor }\n      image: { get_param: image }\n      networks: { get_param: networks }\n      availability_zone: { get_param: availability_zone }\n      reboot: { get_param: reboot }\n      user_data: { get_param: user_data }\n      user_data_format: { get_param: user_data_format }\n      config_drive: { get_param: config_drive }\n  server_monitor:\n    type: ESI::Monitoring::MonitoringTarget\n    properties:\n      type: compute\n      resource_type: vnf_instances\n      resource_id: { get_param: gohan_id }\n      field_name: server\n      tenant_id: { get_param: tenant_id }\n      version: { get_param: version }\n      properties:\n        server_id: { get_resource: server }\n      syncer_properties:\n        etcd:\n          status:\n            key: server\n    depends_on: server\noutputs:\n  server_id:\n    description: A unique id for the nova server.\n    value: { get_resource: server }\n  monitoring_target_id:\n    description: Monitoring Target ID\n    value: { get_resource: server_monitor}\n  monitoring_link:\n    description: Monitoring Process Link\n    value: { get_attr: [server_monitor, link]}\n", 
        "parameter_mappings": {
            "user_data_format": "Puser_data_format", 
            "name": "Pname", 
            "availability_zone": "Pavailability_zone", 
            "tenant_id": "Ptenant_id", 
            "image": "Fvnf_template+vnf_template_id:image", 
            "reboot": "Preboot", 
            "user_data": "Puser_data", 
            "heat_timeout": "C30", 
            "version": "Vauto_filled", 
            "gohan_id": "Pid", 
            "flavor": "Fvnf_plan+vnf_plan_id:flavor", 
            "networks": "Pnetworks", 
            "config_drive": "Pconfig_drive"
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,717:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,718:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,719:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,726:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/firewall_config],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "firewall_config", 
        "template_file": "heat_template_version: 2013-05-23\ndescription: Vyatta Firewall Configuration\nparameters:\n  management_ip:\n    type: string\n  credentials:\n    type: json\n  default_gateway:\n    type: string\n    default: \"\"\n  user_username:\n    type: string\n  user_password:\n    type: string\n    default: \"\"\n    hidden: true\n  admin_username:\n    type: string\n  admin_password:\n    type: string\n    default: \"\"\n    hidden: true\n  other_username:\n    type: string\n    default: \"\"\n  other_password:\n    type: string\n    default: \"\"\n    hidden: true\n  networks:\n    type: json\n  gohan_id:\n    type: string\n    label: Gohan resource ID\n    description: UUID of the VNF Instance\n  tenant_id:\n    type: string\n    label: Tenant ID\n  version:\n    type: number\n    label: Config version\nresources:\n  server:\n    type: ESI::VNF::VyattaConfig\n    properties:\n      management_ip: { get_param: management_ip }\n      credentials: { get_param: credentials }\n      default_gateway: { get_param: default_gateway }\n      user_username: { get_param: user_username }\n      user_password: { get_param: user_password }\n      admin_username: { get_param: admin_username }\n      admin_password: { get_param: admin_password }\n      other_username: { get_param: other_username }\n      other_password: { get_param: other_password }\n      networks: { get_param: networks }\n  fw_device_monitor:\n    type: ESI::Monitoring::MonitoringTarget\n    properties:\n      type: snmp_device_fw\n      resource_type: firewalls\n      resource_id: { get_param: gohan_id }\n      field_name: firewall\n      tenant_id: { get_param: tenant_id }\n      version: { get_param: version }\n      properties:\n        device_ip: { get_param: management_ip }\n        community_name: FIREWALL_COMMUNITY\n      syncer_properties:\n        etcd:\n          status:\n            key: firewall\n        tsdb:\n          cpu.user:\n            metric: cpu.percents\n            tags:\n              resource_id: { get_param: gohan_id }\n              type: user\n          cpu.system:\n            metric: cpu.percents\n            tags:\n              resource_id: { get_param: gohan_id }\n              type: system\n          cpu.idle:\n            metric: cpu.percents\n            tags:\n              resource_id: { get_param: gohan_id }\n              type: idle\n          memory.total:\n            metric: memory.kbytes\n            tags:\n              resource_id: { get_param: gohan_id }\n              type: total\n          memory.available:\n            metric: memory.kbytes\n            tags:\n              resource_id: { get_param: gohan_id }\n              type: available\n          tcp.active:\n            metric: tcp.connections\n            tags:\n              resource_id: { get_param: gohan_id }\n              open: active\n          tcp.passive:\n            metric: tcp.connections\n            tags:\n              resource_id: { get_param: gohan_id }\n              open: passive\n    depends_on: server\noutputs:\n  monitoring_target_id:\n    description: Monitoring Target ID\n    value: { get_resource: fw_device_monitor}\n  monitoring_link:\n    description: Monitoring Process Link\n    value: { get_attr: [fw_device_monitor, link]}\n", 
        "parameter_mappings": {
            "default_gateway": {
                "field": "default_gateway"
            }, 
            "tenant_id": {
                "field": "tenant_id"
            }, 
            "user_password": {
                "field": "user_password"
            }, 
            "other_username": {
                "field": "other_username"
            }, 
            "management_ip": {
                "field": "management_ip", 
                "path": [
                    "vnf_instance_id"
                ]
            }, 
            "admin_username": {
                "field": "admin_username"
            }, 
            "user_username": {
                "field": "user_username"
            }, 
            "heat_timeout": {
                "constant": 13
            }, 
            "version": {
                "version": "auto_filled"
            }, 
            "other_password": {
                "field": "other_password"
            }, 
            "admin_password": {
                "field": "admin_password"
            }, 
            "credentials": {
                "field": "credentials", 
                "path": [
                    "vnf_instance_id", 
                    "vnf_template_id"
                ]
            }, 
            "gohan_id": {
                "field": "id"
            }, 
            "networks": {
                "field": "networks"
            }
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,726:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,727:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,728:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,733:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/firewall_interface],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "firewall_interface", 
        "template_file": "heat_template_version: 2013-05-23\ndescription: Vyatta Firewall Interface\nparameters:\n  management_ip:\n    type: string\n  gohan_id:\n    type: string\n    label: Gohan resource ID\n    description: UUID of the VNF Instance\n  tenant_id:\n    type: string\n    label: Tenant ID\n  version:\n    type: number\n    label: Config version\nresources:\n  fw_interface_monitor:\n    type: ESI::Monitoring::MonitoringTarget\n    properties:\n      type: snmp_ports\n      resource_type: firewall_interfaces\n      resource_id: { get_param: gohan_id }\n      field_name: interface\n      tenant_id: { get_param: tenant_id }\n      version: { get_param: version }\n      properties:\n        device_ip: { get_param: management_ip }\n        if_name: dp0s{{ jinja_slot_number + 3 }}\n        community_name: FIREWALL_COMMUNITY\n      syncer_properties:\n        etcd:\n          status:\n            key: interface\n        tsdb:\n          traffic.in:\n            metric: traffic.bytes\n            tags:\n              resource_id: { get_param: gohan_id }\n              direction: in\n          traffic.out:\n            metric: traffic.bytes\n            tags:\n              resource_id: { get_param: gohan_id }\n              direction: out\noutputs:\n  monitoring_target_id:\n    description: Monitoring Target ID\n    value: { get_resource: fw_interface_monitor}\n  monitoring_link:\n    description: Monitoring Process Link\n    value: { get_attr: [fw_interface_monitor, link]}\n", 
        "parameter_mappings": {
            "jinja_slot_number": {
                "field": "slot_number"
            }, 
            "tenant_id": {
                "field": "tenant_id"
            }, 
            "management_ip": {
                "field": "management_ip", 
                "path": [
                    "firewall_id", 
                    "vnf_instance_id"
                ]
            }, 
            "heat_timeout": {
                "constant": 3
            }, 
            "version": {
                "version": "auto_filled"
            }, 
            "gohan_id": {
                "field": "id"
            }
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,734:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,734:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,735:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,742:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/load_balancer_conf],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "load_balancer_conf", 
        "template_file": "heat_template_version: 2013-05-23\ndescription: Load Balancer Configuration\nparameters:\n  management_ip:\n    type: string\n  management_gateway:\n    type: string\n  admin_username:\n    type: string\n  admin_password:\n    type: string\n    hidden: true\n  user_username:\n    type: string\n  user_password:\n    type: string\n    hidden: true\n  other_username:\n    type: string\n  other_password:\n    type: string\n    hidden: true\n  server_id:\n    type: string\n  license_code:\n    type: string\n  model:\n    type: string\n  init_config:\n    type: string\n  networks:\n    type: string\n  internet_port:\n    type: string\n  default_gateway:\n    type: string\n    default: \"\"\n  credentials:\n    type: string\nresources:\n  netscaler_configuration:\n    type: ESI::VNF::NetscalerConfig\n    properties:\n      management_ip: { get_param: management_ip }\n      management_gateway: { get_param: management_gateway }\n      admin_username: { get_param: admin_username }\n      admin_password: { get_param: admin_password }\n      user_username: { get_param: user_username }\n      user_password: { get_param: user_password }\n      other_username: { get_param: other_username }\n      other_password: { get_param: other_password }\n      server_id: { get_param: server_id }\n      license_code: { get_param: license_code }\n      model: { get_param: model }\n      init_config: { get_param: init_config }\n      networks: { get_param: networks }\n      internet_port: { get_param: internet_port }\n      default_gateway: { get_param: default_gateway }\n      credentials: { get_param: credentials }\n", 
        "parameter_mappings": {
            "other_password": {
                "field": "other_password"
            }, 
            "other_username": {
                "field": "other_username"
            }, 
            "internet_port": {
                "field": "internet_port"
            }, 
            "default_gateway": {
                "field": "default_gateway"
            }, 
            "user_password": {
                "field": "user_password"
            }, 
            "license_code": {
                "field": "license_code", 
                "path": [
                    "load_balancer_plan_id"
                ]
            }, 
            "init_config": {
                "field": "init_config", 
                "path": [
                    "load_balancer_plan_id", 
                    "vnf_template_id"
                ]
            }, 
            "management_ip": {
                "field": "management_ip", 
                "path": [
                    "vnf_instance_id"
                ]
            }, 
            "admin_username": {
                "field": "admin_username"
            }, 
            "user_username": {
                "field": "user_username"
            }, 
            "heat_timeout": {
                "constant": 10
            }, 
            "management_gateway": {
                "field": "management_gateway"
            }, 
            "admin_password": {
                "field": "admin_password"
            }, 
            "credentials": {
                "field": "credentials", 
                "path": [
                    "load_balancer_plan_id", 
                    "vnf_template_id"
                ]
            }, 
            "model": {
                "field": "model", 
                "path": [
                    "load_balancer_plan_id"
                ]
            }, 
            "server_id": {
                "path": [
                    "vnf_instance_id"
                ], 
                "output_key": "server_id"
            }, 
            "networks": {
                "field": "networks"
            }
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,743:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,743:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,744:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,751:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/load_balancer_syslog_server],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "load_balancer_syslog_server", 
        "template_file": "heat_template_version: 2013-05-23\ndescription: Syslog server\nparameters:\n  name:\n    type: string\n  ip_address:\n    type: string\n  port_number:\n    type: number\n  log_level:\n    type: string\n  log_facility:\n    type: string\n  tcp_logging:\n    type: string\n  acl_logging:\n    type: string\n  appflow_logging:\n    type: string\n  date_format:\n    type: string\n  time_zone:\n    type: string\n  user_configurable_log_messages:\n    type: string\n  transport_type:\n    type: string\n  priority:\n    type: number\n  vserver_ip_address:\n    type: string\n  comment:\n    type: string\n  management_ip:\n    type: string\n  credentials:\n    type: string\n  init_config:\n    type: string\nresources:\n  load_balancer_syslog_server:\n    type: ESI::VNF::NetscalerSyslogServer\n    properties:\n      name: { get_param: name }\n      ip_address: { get_param: ip_address }\n      port_number: { get_param: port_number }\n      log_level: { get_param: log_level }\n      log_facility: { get_param: log_facility }\n      tcp_logging: { get_param: tcp_logging }\n      acl_logging: { get_param: acl_logging }\n      appflow_logging: { get_param: appflow_logging }\n      date_format: { get_param: date_format }\n      time_zone: { get_param: time_zone }\n      user_configurable_log_messages: { get_param: user_configurable_log_messages }\n      transport_type: { get_param: transport_type }\n      priority: { get_param: priority }\n      vserver_ip_address: { get_param: vserver_ip_address }\n      comment: { get_param: comment }\n      management_ip: { get_param: management_ip }\n      credentials: { get_param: credentials }\n      init_config: { get_param: init_config }\n", 
        "parameter_mappings": {
            "comment": {
                "field": "comment"
            }, 
            "date_format": {
                "field": "date_format"
            }, 
            "appflow_logging": {
                "field": "appflow_logging"
            }, 
            "name": {
                "field": "name"
            }, 
            "port_number": {
                "field": "port_number"
            }, 
            "tcp_logging": {
                "field": "tcp_logging"
            }, 
            "vserver_ip_address": {
                "field": "vserver_ip_address"
            }, 
            "log_level": {
                "field": "log_level"
            }, 
            "init_config": {
                "field": "init_config", 
                "path": [
                    "load_balancer_id", 
                    "load_balancer_plan_id", 
                    "vnf_template_id"
                ]
            }, 
            "acl_logging": {
                "field": "acl_logging"
            }, 
            "time_zone": {
                "field": "time_zone"
            }, 
            "priority": {
                "field": "priority"
            }, 
            "transport_type": {
                "field": "transport_type"
            }, 
            "heat_timeout": {
                "constant": 10
            }, 
            "management_ip": {
                "field": "management_ip", 
                "path": [
                    "load_balancer_id", 
                    "vnf_instance_id"
                ]
            }, 
            "log_facility": {
                "field": "log_facility"
            }, 
            "credentials": {
                "field": "credentials", 
                "path": [
                    "load_balancer_id", 
                    "load_balancer_plan_id", 
                    "vnf_template_id"
                ]
            }, 
            "ip_address": {
                "field": "ip_address"
            }, 
            "user_configurable_log_messages": {
                "field": "user_configurable_log_messages"
            }
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,751:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,752:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,753:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,759:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/load_balancer],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "load_balancer", 
        "template_file": "heat_template_version: 2013-05-23\ndescription: Load Balancer\nparameters:\n  management_ip:\n    type: string\n  gohan_id:\n    type: string\n    label: Gohan resource ID\n    description: UUID of the VNF Instance\n  tenant_id:\n    type: string\n    label: Tenant ID\n  version:\n    type: number\n    label: Config version\nresources:\n  lb_device_monitor:\n    type: ESI::Monitoring::MonitoringTarget\n    properties:\n      type: snmp_device_lb\n      resource_type: load_balancers\n      resource_id: { get_param: gohan_id }\n      field_name: load_balancer\n      tenant_id: { get_param: tenant_id }\n      version: { get_param: version }\n      properties:\n        device_ip: { get_param: management_ip }\n        community_name: LOAD_BALANCER_COMMUNITY\n      syncer_properties:\n        etcd:\n          status:\n            key: load_balancer\n        tsdb:\n          cpu.usage:\n            metric: cpu.percents\n            tags:\n              resource_id: { get_param: gohan_id }\n              type: usage\n          memory.usage:\n            metric: memory.percents\n            tags:\n              resource_id: { get_param: gohan_id }\n              type: usage\n          http.request:\n            metric: http.request.connections\n            tags:\n              resource_id: { get_param: gohan_id }\n          tcp.client:\n            metric: tcp.connections\n            tags:\n              resource_id: { get_param: gohan_id }\n              owner: client\n          tcp.server:\n            metric: tcp.connections\n            tags:\n              resource_id: { get_param: gohan_id }\n              owner: server\noutputs:\n  monitoring_target_id:\n    description: Monitoring Target ID\n    value: { get_resource: lb_device_monitor}\n  monitoring_link:\n    description: Monitoring Process Link\n    value: { get_attr: [lb_device_monitor, link]}\n", 
        "parameter_mappings": {
            "jinja_force_dependency": {
                "field": "id", 
                "path": [
                    "load_balancer_conf_id"
                ]
            }, 
            "tenant_id": {
                "field": "tenant_id"
            }, 
            "management_ip": {
                "field": "management_ip", 
                "path": [
                    "vnf_instance_id"
                ]
            }, 
            "heat_timeout": {
                "constant": 3
            }, 
            "version": {
                "version": "auto_filled"
            }, 
            "gohan_id": {
                "field": "id"
            }
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,759:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,760:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,760:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:36,767:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/heat_templates/load_balancer_interface],
 value=[{
    "body": {
        "handler": "heat_worker", 
        "watch": [], 
        "id": "load_balancer_interface", 
        "template_file": "heat_template_version: 2013-05-23\ndescription: Load Balancer Interface\nparameters:\n  management_ip:\n    type: string\n  gohan_id:\n    type: string\n    label: Gohan resource ID\n    description: UUID of the VNF Instance\n  tenant_id:\n    type: string\n    label: Tenant ID\n  version:\n    type: number\n    label: Config version\nresources:\n  lb_interface_monitor:\n    type: ESI::Monitoring::MonitoringTarget\n    properties:\n      type: snmp_ports\n      resource_type: load_balancer_interfaces\n      resource_id: { get_param: gohan_id }\n      field_name: interface\n      tenant_id: { get_param: tenant_id }\n      version: { get_param: version }\n      properties:\n        device_ip: { get_param: management_ip }\n        {% if jinja_slot_number == 0  %}\n        if_name: 0/1\n        {% else %}\n        if_name: 1/{{ jinja_slot_number }}\n        {% endif %}\n        community_name: LOAD_BALANCER_COMMUNITY\n      syncer_properties:\n        etcd:\n          status:\n            key: interface\n        tsdb:\n          traffic.in:\n            metric: traffic.bytes\n            tags:\n              resource_id: { get_param: gohan_id }\n              direction: in\n          traffic.out:\n            metric: traffic.bytes\n            tags:\n              resource_id: { get_param: gohan_id }\n              direction: out\noutputs:\n  monitoring_target_id:\n    description: Monitoring Target ID\n    value: { get_resource: lb_interface_monitor}\n  monitoring_link:\n    description: Monitoring Process Link\n    value: { get_attr: [lb_interface_monitor, link]}\n", 
        "parameter_mappings": {
            "jinja_slot_number": {
                "field": "slot_number"
            }, 
            "tenant_id": {
                "field": "tenant_id"
            }, 
            "management_ip": {
                "field": "management_ip", 
                "path": [
                    "load_balancer_id", 
                    "vnf_instance_id"
                ]
            }, 
            "heat_timeout": {
                "constant": 3
            }, 
            "version": {
                "version": "auto_filled"
            }, 
            "gohan_id": {
                "field": "id"
            }
        }
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:01:36,767:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:36,768:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:36,769:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:01:56,766:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:01:56,767:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:01:56,768:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:01:56,768:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:01:56,769:DEBUG:About to wait on key /config, index None
2019-04-02 03:01:56,769:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:01:56,769:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:01:56,771:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:02:16,791:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:02:16,791:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:02:16,792:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:02:16,792:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:02:16,793:DEBUG:About to wait on key /config, index None
2019-04-02 03:02:16,793:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:02:16,794:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:02:16,796:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:02:17,784:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/common/v1.0/tenants/d2a4608bbd28402196acdba7a1632daf],
 value=[{
    "body": {
        "status": "active", 
        "delete_retries": 0, 
        "end_time": "", 
        "id": "d2a4608bbd28402196acdba7a1632daf"
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:02:17,785:DEBUG:About to wait on key /config, index None
2019-04-02 03:02:17,785:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:02:17,787:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:02:17,792:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/networks/3ad67159-9f73-404a-94da-582bda1641fb],
 value=[{
    "body": {
        "status": "PENDING_CREATE", 
        "subnets": [], 
        "description": "dummy network for firewall", 
        "admin_state_up": true, 
        "tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "tags": {}, 
        "plane": "data", 
        "orchestration_state": "CREATE_IN_PROGRESS", 
        "shared": false, 
        "id": "3ad67159-9f73-404a-94da-582bda1641fb", 
        "name": "dummy-net"
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:02:17,793:DEBUG:About to wait on key /config, index None
2019-04-02 03:02:17,793:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:02:17,795:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:02:27,548:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/networks/690a259f-d2bb-4674-ba29-07b3619cc537],
 value=[{
    "body": {
        "status": "PENDING_CREATE", 
        "subnets": [], 
        "description": "adminpod network", 
        "admin_state_up": true, 
        "tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "tags": {}, 
        "plane": "data", 
        "orchestration_state": "CREATE_IN_PROGRESS", 
        "shared": false, 
        "id": "690a259f-d2bb-4674-ba29-07b3619cc537", 
        "name": "adminpod-net"
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:02:27,548:DEBUG:About to wait on key /config, index None
2019-04-02 03:02:27,549:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:02:27,551:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:02:35,617:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/networks/0422f224-5da3-4f01-8ba5-2ae68f241774],
 value=[{
    "body": {
        "status": "PENDING_CREATE", 
        "subnets": [], 
        "description": "firewall network", 
        "admin_state_up": true, 
        "tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "tags": {}, 
        "plane": "data", 
        "orchestration_state": "CREATE_IN_PROGRESS", 
        "shared": false, 
        "id": "0422f224-5da3-4f01-8ba5-2ae68f241774", 
        "name": "sample-fw-net"
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:02:35,617:DEBUG:About to wait on key /config, index None
2019-04-02 03:02:35,618:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:02:35,620:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:02:47,466:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/subnets/0479131c-e828-4721-abaa-a46265518b89],
 value=[{
    "body": {
        "status": "PENDING_CREATE", 
        "description": "dummy subnet for firewall", 
        "enable_dhcp": true, 
        "tags": {}, 
        "network_id": "3ad67159-9f73-404a-94da-582bda1641fb", 
        "tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "dns_nameservers": [
            "0.0.0.0"
        ], 
        "dhcp_server_address": "10.121.233.2", 
        "ntp_servers": [], 
        "allocation_pools": [
            {
                "start": "10.121.233.2", 
                "end": "10.121.233.254"
            }
        ], 
        "gateway_ip": "10.121.233.1", 
        "orchestration_state": "CREATE_IN_PROGRESS", 
        "ip_version": 4, 
        "host_routes": [], 
        "cidr": "10.121.233.0/24", 
        "id": "0479131c-e828-4721-abaa-a46265518b89", 
        "name": "dummy-subnet"
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:02:47,466:DEBUG:About to wait on key /config, index None
2019-04-02 03:02:47,467:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:02:47,468:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:02:47,477:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/ports/e7894df1-b287-4494-bfe4-d6f989a448d1],
 value=[{
    "body": {
        "status": "ACTIVE", 
        "description": "DHCP Server Port", 
        "allowed_address_pairs": [], 
        "admin_state_up": true, 
        "network_id": "3ad67159-9f73-404a-94da-582bda1641fb", 
        "tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "managed_by_service": false, 
        "attached": false, 
        "name": "dhcp-server-port", 
        "binding:vif_type": "vrouter", 
        "device_owner": "network:dhcp", 
        "tags": {}, 
        "fake_delete": false, 
        "orchestration_state": "NO_STATE", 
        "mac_address": "00:00:5e:00:01:00", 
        "host_routes": [], 
        "fixed_ips": [
            {
                "subnet_id": "0479131c-e828-4721-abaa-a46265518b89", 
                "ip_address": "10.121.233.2"
            }
        ], 
        "id": "e7894df1-b287-4494-bfe4-d6f989a448d1", 
        "security_groups": [], 
        "device_id": "0479131c-e828-4721-abaa-a46265518b89"
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:02:47,478:DEBUG:About to wait on key /config, index None
2019-04-02 03:02:47,479:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:02:47,480:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:02:54,749:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/subnets/35e00dad-ad5e-46a2-b71d-93b4e72800b1],
 value=[{
    "body": {
        "status": "PENDING_CREATE", 
        "description": "adminpod subnet", 
        "enable_dhcp": true, 
        "tags": {}, 
        "network_id": "690a259f-d2bb-4674-ba29-07b3619cc537", 
        "tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "dns_nameservers": [
            "0.0.0.0"
        ], 
        "dhcp_server_address": "100.64.194.2", 
        "ntp_servers": [], 
        "allocation_pools": [
            {
                "start": "100.64.194.2", 
                "end": "100.64.194.254"
            }
        ], 
        "gateway_ip": "100.64.194.1", 
        "orchestration_state": "CREATE_IN_PROGRESS", 
        "ip_version": 4, 
        "host_routes": [
            {
                "nexthop": "100.64.193.1", 
                "destination": "172.26.10.0/24"
            }
        ], 
        "cidr": "100.64.194.0/24", 
        "id": "35e00dad-ad5e-46a2-b71d-93b4e72800b1", 
        "name": "adminpod-subnet"
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:02:54,750:DEBUG:About to wait on key /config, index None
2019-04-02 03:02:54,751:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:02:54,753:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:02:54,762:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/ports/e32637af-1d9f-4f8a-b1b4-d296ced859e8],
 value=[{
    "body": {
        "status": "ACTIVE", 
        "description": "DHCP Server Port", 
        "allowed_address_pairs": [], 
        "admin_state_up": true, 
        "network_id": "690a259f-d2bb-4674-ba29-07b3619cc537", 
        "tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "managed_by_service": false, 
        "attached": false, 
        "name": "dhcp-server-port", 
        "binding:vif_type": "vrouter", 
        "device_owner": "network:dhcp", 
        "tags": {}, 
        "fake_delete": false, 
        "orchestration_state": "NO_STATE", 
        "mac_address": "00:00:5e:00:01:00", 
        "host_routes": [], 
        "fixed_ips": [
            {
                "subnet_id": "35e00dad-ad5e-46a2-b71d-93b4e72800b1", 
                "ip_address": "100.64.194.2"
            }
        ], 
        "id": "e32637af-1d9f-4f8a-b1b4-d296ced859e8", 
        "security_groups": [], 
        "device_id": "35e00dad-ad5e-46a2-b71d-93b4e72800b1"
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:02:54,763:DEBUG:About to wait on key /config, index None
2019-04-02 03:02:54,763:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:02:54,765:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:03:02,252:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/subnets/8effd73d-925d-4ec9-9cee-8cffc9aafef3],
 value=[{
    "body": {
        "status": "PENDING_CREATE", 
        "description": "firewall subnet", 
        "enable_dhcp": true, 
        "tags": {}, 
        "network_id": "0422f224-5da3-4f01-8ba5-2ae68f241774", 
        "tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "dns_nameservers": [
            "0.0.0.0"
        ], 
        "dhcp_server_address": "10.98.77.2", 
        "ntp_servers": [], 
        "allocation_pools": [
            {
                "start": "10.98.77.2", 
                "end": "10.98.77.254"
            }
        ], 
        "gateway_ip": "10.98.77.1", 
        "orchestration_state": "CREATE_IN_PROGRESS", 
        "ip_version": 4, 
        "host_routes": [], 
        "cidr": "10.98.77.0/24", 
        "id": "8effd73d-925d-4ec9-9cee-8cffc9aafef3", 
        "name": "sample-fw-subnet"
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:03:02,253:DEBUG:About to wait on key /config, index None
2019-04-02 03:03:02,254:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:03:02,255:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:03:02,266:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/ports/f9fbeb5c-6769-43be-9269-f1c1cbb1248a],
 value=[{
    "body": {
        "status": "ACTIVE", 
        "description": "DHCP Server Port", 
        "allowed_address_pairs": [], 
        "admin_state_up": true, 
        "network_id": "0422f224-5da3-4f01-8ba5-2ae68f241774", 
        "tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "managed_by_service": false, 
        "attached": false, 
        "name": "dhcp-server-port", 
        "binding:vif_type": "vrouter", 
        "device_owner": "network:dhcp", 
        "tags": {}, 
        "fake_delete": false, 
        "orchestration_state": "NO_STATE", 
        "mac_address": "00:00:5e:00:01:00", 
        "host_routes": [], 
        "fixed_ips": [
            {
                "subnet_id": "8effd73d-925d-4ec9-9cee-8cffc9aafef3", 
                "ip_address": "10.98.77.2"
            }
        ], 
        "id": "f9fbeb5c-6769-43be-9269-f1c1cbb1248a", 
        "security_groups": [], 
        "device_id": "8effd73d-925d-4ec9-9cee-8cffc9aafef3"
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:03:02,266:DEBUG:About to wait on key /config, index None
2019-04-02 03:03:02,267:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:03:02,268:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:03:14,626:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/vnf_templates/856d0c84-482e-483d-9fec-55a8ce177e11],
 value=[{
    "body": {
        "function": "firewall", 
        "management_networks": [
            "690a259f-d2bb-4674-ba29-07b3619cc537"
        ], 
        "vendor": "vyatta", 
        "description": "lab3-vyatta-3.5R6_20151204", 
        "tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "image": "vyatta-0108-2016", 
        "init_config": {}, 
        "version": "3.5R6", 
        "dummy_networks": [
            "3ad67159-9f73-404a-94da-582bda1641fb"
        ], 
        "user_data_template": "", 
        "security_group": "permit-any", 
        "credentials": {
            "username": "vfwadmin", 
            "password": "password"
        }, 
        "id": "856d0c84-482e-483d-9fec-55a8ce177e11", 
        "name": "vyatta-template-3.5R6"
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:03:14,627:DEBUG:About to wait on key /config, index None
2019-04-02 03:03:14,628:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:03:14,629:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:03:20,318:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/vnf_plans/e881b86c-4e61-4268-93a9-6b272a48cb6a],
 value=[{
    "body": {
        "function": "firewall", 
        "interface_limit": 3, 
        "vendor": "vyatta", 
        "description": "vyatta-2CPU-2IF", 
        "default_interface_number": 3, 
        "tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "flavor": "m1.large", 
        "id": "e881b86c-4e61-4268-93a9-6b272a48cb6a", 
        "name": "vyatta-2CPU-2IF"
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:03:20,318:DEBUG:About to wait on key /config, index None
2019-04-02 03:03:20,319:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:03:20,320:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:03:26,164:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/firewall_plans/3cf84f69-ae2e-47a1-a8f7-31286603d2f6],
 value=[{
    "body": {
        "vendor": "vyatta", 
        "description": "", 
        "vnf_plan_id": "e881b86c-4e61-4268-93a9-6b272a48cb6a", 
        "tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "vnf_template_id": "856d0c84-482e-483d-9fec-55a8ce177e11", 
        "enabled": true, 
        "version": "3.5R6S3-test", 
        "is_public": true, 
        "id": "3cf84f69-ae2e-47a1-a8f7-31286603d2f6", 
        "name": "Brocade_5600_vRouter_3.5R6S3_2CPU-8GB-2IF"
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:03:26,165:DEBUG:About to wait on key /config, index None
2019-04-02 03:03:26,166:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:03:26,167:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:03:32,600:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/ports/47c9831b-b346-4317-bc44-f942ecaee54c],
 value=[{
    "body": {
        "allowed_address_pairs": [], 
        "device_owner": "", 
        "fake_delete": true, 
        "fixed_ips": [
            {
                "subnet_id": "35e00dad-ad5e-46a2-b71d-93b4e72800b1", 
                "ip_address": "100.64.194.3"
            }
        ], 
        "id": "47c9831b-b346-4317-bc44-f942ecaee54c", 
        "security_groups": [], 
        "binding:vif_type": "vrouter", 
        "mac_address": "fa:16:3e:b6:b6:57", 
        "status": "PENDING_CREATE", 
        "description": "", 
        "tags": {}, 
        "segmentation_id": 0, 
        "device_id": "", 
        "name": "firewall-management-port", 
        "admin_state_up": true, 
        "network_id": "690a259f-d2bb-4674-ba29-07b3619cc537", 
        "tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "managed_by_service": false, 
        "attached": false, 
        "operational_state": "NO_STATE", 
        "orchestration_state": "CREATE_IN_PROGRESS", 
        "segmentation_type": "flat"
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:03:32,601:DEBUG:About to wait on key /config, index None
2019-04-02 03:03:32,601:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:03:32,603:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:03:32,617:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/ports/160234ca-2b72-4029-b3ff-8c83d82b9c5a],
 value=[{
    "body": {
        "allowed_address_pairs": [], 
        "device_owner": "", 
        "fake_delete": true, 
        "fixed_ips": [
            {
                "subnet_id": "0479131c-e828-4721-abaa-a46265518b89", 
                "ip_address": "10.121.233.3"
            }
        ], 
        "id": "160234ca-2b72-4029-b3ff-8c83d82b9c5a", 
        "security_groups": [], 
        "binding:vif_type": "vrouter", 
        "mac_address": "fa:16:3e:76:31:15", 
        "status": "PENDING_CREATE", 
        "description": "", 
        "tags": {}, 
        "segmentation_id": 0, 
        "device_id": "", 
        "name": "firewall-user-port", 
        "admin_state_up": false, 
        "network_id": "3ad67159-9f73-404a-94da-582bda1641fb", 
        "tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "managed_by_service": false, 
        "attached": false, 
        "operational_state": "NO_STATE", 
        "orchestration_state": "CREATE_IN_PROGRESS", 
        "segmentation_type": "flat"
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:03:32,618:DEBUG:About to wait on key /config, index None
2019-04-02 03:03:32,619:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:03:32,620:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:03:32,629:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/ports/47c97a61-e3e8-403a-b662-a117935c7a02],
 value=[{
    "body": {
        "allowed_address_pairs": [], 
        "device_owner": "", 
        "fake_delete": true, 
        "fixed_ips": [
            {
                "subnet_id": "0479131c-e828-4721-abaa-a46265518b89", 
                "ip_address": "10.121.233.4"
            }
        ], 
        "id": "47c97a61-e3e8-403a-b662-a117935c7a02", 
        "security_groups": [], 
        "binding:vif_type": "vrouter", 
        "mac_address": "fa:16:3e:85:92:30", 
        "status": "PENDING_CREATE", 
        "description": "", 
        "tags": {}, 
        "segmentation_id": 0, 
        "device_id": "", 
        "name": "firewall-user-port", 
        "admin_state_up": false, 
        "network_id": "3ad67159-9f73-404a-94da-582bda1641fb", 
        "tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "managed_by_service": false, 
        "attached": false, 
        "operational_state": "NO_STATE", 
        "orchestration_state": "CREATE_IN_PROGRESS", 
        "segmentation_type": "flat"
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:03:32,630:DEBUG:About to wait on key /config, index None
2019-04-02 03:03:32,631:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:03:32,632:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:03:32,646:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/vnf_instances/c10935ab-768a-4901-8953-11f9d3987949],
 value=[{
    "body": {
        "status": "PENDING_CREATE", 
        "user_data_format": "RAW", 
        "user_data_parameters": {}, 
        "name": "firewall-dbd98e9a-30ba-4b9b-a2a4-ef4ddb3d36cc", 
        "availability_zone": "nova", 
        "tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "vnf_template_id": "856d0c84-482e-483d-9fec-55a8ce177e11", 
        "vnf_plan_id": "e881b86c-4e61-4268-93a9-6b272a48cb6a", 
        "reboot": "", 
        "id": "c10935ab-768a-4901-8953-11f9d3987949", 
        "management_ip": "100.64.194.3", 
        "orchestration_state": "CREATE_IN_PROGRESS", 
        "owner_tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "user_data": "", 
        "operational_state": "NO_STATE", 
        "networks": [
            {
                "port": "47c9831b-b346-4317-bc44-f942ecaee54c"
            }, 
            {
                "port": "160234ca-2b72-4029-b3ff-8c83d82b9c5a"
            }, 
            {
                "port": "47c97a61-e3e8-403a-b662-a117935c7a02"
            }
        ], 
        "config_drive": false
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:03:32,648:DEBUG:About to wait on key /config, index None
2019-04-02 03:03:32,648:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:03:32,651:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:03:32,668:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/vnf_interfaces/a641f61c-cbc9-447c-b180-a7eaa4a683ad],
 value=[{
    "body": {
        "status": "PENDING_CREATE", 
        "type": "management", 
        "name": "interface-0", 
        "network_id": "690a259f-d2bb-4674-ba29-07b3619cc537", 
        "ip_address": "100.64.194.3", 
        "vnf_instance_id": "c10935ab-768a-4901-8953-11f9d3987949", 
        "tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "slot_number": 0, 
        "port_id": "47c9831b-b346-4317-bc44-f942ecaee54c", 
        "id": "a641f61c-cbc9-447c-b180-a7eaa4a683ad"
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:03:32,669:DEBUG:About to wait on key /config, index None
2019-04-02 03:03:32,669:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:03:32,670:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:03:32,692:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/vnf_interfaces/20e0aabb-d2db-4b0f-89f6-61f685f1af0d],
 value=[{
    "body": {
        "status": "PENDING_CREATE", 
        "type": "user", 
        "name": "interface-1", 
        "network_id": null, 
        "tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "vnf_instance_id": "c10935ab-768a-4901-8953-11f9d3987949", 
        "slot_number": 1, 
        "port_id": "160234ca-2b72-4029-b3ff-8c83d82b9c5a", 
        "id": "20e0aabb-d2db-4b0f-89f6-61f685f1af0d"
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:03:32,693:DEBUG:About to wait on key /config, index None
2019-04-02 03:03:32,693:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:03:32,694:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:03:32,702:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/vnf_interfaces/3c6c8dcb-16f5-4523-90d0-f06295670928],
 value=[{
    "body": {
        "status": "PENDING_CREATE", 
        "type": "user", 
        "name": "interface-2", 
        "network_id": null, 
        "tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "vnf_instance_id": "c10935ab-768a-4901-8953-11f9d3987949", 
        "slot_number": 2, 
        "port_id": "47c97a61-e3e8-403a-b662-a117935c7a02", 
        "id": "3c6c8dcb-16f5-4523-90d0-f06295670928"
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:03:32,703:DEBUG:About to wait on key /config, index None
2019-04-02 03:03:32,704:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:03:32,705:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:03:32,711:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/firewalls/dbd98e9a-30ba-4b9b-a2a4-ef4ddb3d36cc],
 value=[{
    "body": {
        "status": "PENDING_CREATE", 
        "other_username": "", 
        "description": "", 
        "user_username": "user-read", 
        "default_gateway": "192.168.1.1", 
        "tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "interfaces": [], 
        "availability_zone": "nova", 
        "admin_username": "user-admin", 
        "networks": [
            {
                "ifname": "dp0s4", 
                "type": "disable"
            }, 
            {
                "ifname": "dp0s5", 
                "type": "disable"
            }
        ], 
        "orchestration_state": "CREATE_IN_PROGRESS", 
        "user_password": "K6TXpoQ7Ek7N", 
        "other_password": "", 
        "admin_password": "UgMa576iZjDg", 
        "firewall_plan_id": "3cf84f69-ae2e-47a1-a8f7-31286603d2f6", 
        "vnf_instance_id": "c10935ab-768a-4901-8953-11f9d3987949", 
        "operational_state": "NO_STATE", 
        "id": "dbd98e9a-30ba-4b9b-a2a4-ef4ddb3d36cc", 
        "name": ""
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:03:32,712:DEBUG:About to wait on key /config, index None
2019-04-02 03:03:32,713:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:03:32,714:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:03:32,722:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/firewall_interfaces/1fbbd8eb-0e12-4178-96e8-7454faed5f82],
 value=[{
    "body": {
        "status": "PENDING_CREATE", 
        "name": "dp0s4", 
        "tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "vnf_interface_id": "20e0aabb-d2db-4b0f-89f6-61f685f1af0d", 
        "operational_state": "NO_STATE", 
        "firewall_id": "dbd98e9a-30ba-4b9b-a2a4-ef4ddb3d36cc", 
        "orchestration_state": "CREATE_IN_PROGRESS", 
        "slot_number": 1, 
        "type": "user", 
        "id": "1fbbd8eb-0e12-4178-96e8-7454faed5f82"
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:03:32,722:DEBUG:About to wait on key /config, index None
2019-04-02 03:03:32,723:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:03:32,724:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:03:32,732:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/firewall_interfaces/69718be2-0ae7-4601-bead-face902fe88e],
 value=[{
    "body": {
        "status": "PENDING_CREATE", 
        "name": "dp0s5", 
        "tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "vnf_interface_id": "3c6c8dcb-16f5-4523-90d0-f06295670928", 
        "operational_state": "NO_STATE", 
        "firewall_id": "dbd98e9a-30ba-4b9b-a2a4-ef4ddb3d36cc", 
        "orchestration_state": "CREATE_IN_PROGRESS", 
        "slot_number": 2, 
        "type": "user", 
        "id": "69718be2-0ae7-4601-bead-face902fe88e"
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:03:32,732:DEBUG:About to wait on key /config, index None
2019-04-02 03:03:32,733:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:03:32,734:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:03:32,744:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/firewall_interfaces/e262b311-b17e-442b-adb1-41e93117067d],
 value=[{
    "body": {
        "status": "PENDING_CREATE", 
        "type": "management", 
        "name": "dp0s3", 
        "network_id": "690a259f-d2bb-4674-ba29-07b3619cc537", 
        "tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "vnf_interface_id": "a641f61c-cbc9-447c-b180-a7eaa4a683ad", 
        "operational_state": "NO_STATE", 
        "firewall_id": "dbd98e9a-30ba-4b9b-a2a4-ef4ddb3d36cc", 
        "orchestration_state": "CREATE_IN_PROGRESS", 
        "slot_number": 0, 
        "ip_address": "100.64.194.3", 
        "id": "e262b311-b17e-442b-adb1-41e93117067d"
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:03:32,745:DEBUG:About to wait on key /config, index None
2019-04-02 03:03:32,745:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:03:32,746:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:03:43,002:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/ports/47c9831b-b346-4317-bc44-f942ecaee54c],
 value=[{
    "body": {
        "ese_logical_port_id": null, 
        "allowed_address_pairs": [], 
        "device_owner": "compute:nova", 
        "fake_delete": true, 
        "fixed_ips": [
            {
                "subnet_id": "35e00dad-ad5e-46a2-b71d-93b4e72800b1", 
                "ip_address": "100.64.194.3"
            }
        ], 
        "id": "47c9831b-b346-4317-bc44-f942ecaee54c", 
        "security_groups": [], 
        "binding:vif_type": "vrouter", 
        "mac_address": "fa:16:3e:b6:b6:57", 
        "status": "PENDING_UPDATE", 
        "description": "", 
        "tags": {}, 
        "segmentation_id": 0, 
        "device_id": "dab11f56-f0f2-4cac-bee6-6cec5038458c", 
        "name": "firewall-management-port", 
        "admin_state_up": true, 
        "network_id": "690a259f-d2bb-4674-ba29-07b3619cc537", 
        "tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "managed_by_service": false, 
        "attached": false, 
        "operational_state": "NO_STATE", 
        "orchestration_state": "UPDATE_IN_PROGRESS", 
        "segmentation_type": "flat"
    }, 
    "version": 2, 
    "marked_for_deletion": false
}]
2019-04-02 03:03:43,003:DEBUG:About to wait on key /config, index None
2019-04-02 03:03:43,004:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:03:43,005:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:03:55,052:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/ports/47c9831b-b346-4317-bc44-f942ecaee54c],
 value=[{
    "body": {
        "ese_logical_port_id": null, 
        "allowed_address_pairs": [], 
        "device_owner": "compute:nova", 
        "fake_delete": true, 
        "fixed_ips": [
            {
                "subnet_id": "35e00dad-ad5e-46a2-b71d-93b4e72800b1", 
                "ip_address": "100.64.194.3"
            }
        ], 
        "id": "47c9831b-b346-4317-bc44-f942ecaee54c", 
        "security_groups": [], 
        "binding:vif_type": "vrouter", 
        "mac_address": "fa:16:3e:b6:b6:57", 
        "status": "PENDING_UPDATE", 
        "description": "", 
        "tags": {}, 
        "segmentation_id": 0, 
        "device_id": "dab11f56-f0f2-4cac-bee6-6cec5038458c", 
        "name": "firewall-management-port", 
        "admin_state_up": true, 
        "network_id": "690a259f-d2bb-4674-ba29-07b3619cc537", 
        "tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "managed_by_service": false, 
        "attached": true, 
        "operational_state": "NO_STATE", 
        "orchestration_state": "UPDATE_IN_PROGRESS", 
        "segmentation_type": "flat"
    }, 
    "version": 3, 
    "marked_for_deletion": false
}]
2019-04-02 03:03:55,053:DEBUG:About to wait on key /config, index None
2019-04-02 03:03:55,054:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:03:55,055:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:04:15,049:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:04:15,050:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:04:15,050:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:04:15,051:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:04:15,051:DEBUG:About to wait on key /config, index None
2019-04-02 03:04:15,052:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:04:15,052:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:04:15,055:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:04:35,036:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:04:35,038:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:04:35,038:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:04:35,039:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:04:35,040:DEBUG:About to wait on key /config, index None
2019-04-02 03:04:35,040:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:04:35,041:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:04:35,043:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:04:55,054:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:04:55,057:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:04:55,057:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:04:55,058:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:04:55,058:DEBUG:About to wait on key /config, index None
2019-04-02 03:04:55,059:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:04:55,059:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:04:55,061:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:05:15,060:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:05:15,062:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:05:15,063:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:05:15,063:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:05:15,063:DEBUG:About to wait on key /config, index None
2019-04-02 03:05:15,064:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:05:15,064:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:05:15,066:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:05:35,060:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:05:35,063:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:05:35,063:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:05:35,063:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:05:35,064:DEBUG:About to wait on key /config, index None
2019-04-02 03:05:35,065:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:05:35,066:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:05:35,067:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:05:55,080:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:05:55,082:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:05:55,082:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:05:55,083:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:05:55,083:DEBUG:About to wait on key /config, index None
2019-04-02 03:05:55,084:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:05:55,084:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:05:55,086:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:06:15,077:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:06:15,080:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:06:15,080:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:06:15,081:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:06:15,081:DEBUG:About to wait on key /config, index None
2019-04-02 03:06:15,082:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:06:15,083:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:06:15,085:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:06:35,076:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:06:35,078:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:06:35,079:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:06:35,079:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:06:35,080:DEBUG:About to wait on key /config, index None
2019-04-02 03:06:35,080:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:06:35,081:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:06:35,083:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:06:55,103:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:06:55,105:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:06:55,106:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:06:55,106:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:06:55,107:DEBUG:About to wait on key /config, index None
2019-04-02 03:06:55,107:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:06:55,107:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:06:55,109:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:07:15,094:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:07:15,095:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:07:15,095:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:07:15,096:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:07:15,096:DEBUG:About to wait on key /config, index None
2019-04-02 03:07:15,097:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:07:15,097:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:07:15,099:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:07:35,095:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:07:35,098:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:07:35,098:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:07:35,098:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:07:35,099:DEBUG:About to wait on key /config, index None
2019-04-02 03:07:35,099:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:07:35,100:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:07:35,102:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:07:49,369:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/ports/160234ca-2b72-4029-b3ff-8c83d82b9c5a],
 value=[{
    "body": {
        "ese_logical_port_id": null, 
        "allowed_address_pairs": [], 
        "device_owner": "compute:nova", 
        "fake_delete": true, 
        "fixed_ips": [
            {
                "subnet_id": "0479131c-e828-4721-abaa-a46265518b89", 
                "ip_address": "10.121.233.3"
            }
        ], 
        "id": "160234ca-2b72-4029-b3ff-8c83d82b9c5a", 
        "security_groups": [], 
        "binding:vif_type": "vrouter", 
        "mac_address": "fa:16:3e:76:31:15", 
        "status": "PENDING_UPDATE", 
        "description": "", 
        "tags": {}, 
        "segmentation_id": 0, 
        "device_id": "dab11f56-f0f2-4cac-bee6-6cec5038458c", 
        "name": "firewall-user-port", 
        "admin_state_up": false, 
        "network_id": "3ad67159-9f73-404a-94da-582bda1641fb", 
        "tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "managed_by_service": false, 
        "attached": false, 
        "operational_state": "NO_STATE", 
        "orchestration_state": "UPDATE_IN_PROGRESS", 
        "segmentation_type": "flat"
    }, 
    "version": 2, 
    "marked_for_deletion": false
}]
2019-04-02 03:07:49,369:DEBUG:About to wait on key /config, index None
2019-04-02 03:07:49,370:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:07:49,372:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:08:01,059:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/ports/160234ca-2b72-4029-b3ff-8c83d82b9c5a],
 value=[{
    "body": {
        "ese_logical_port_id": null, 
        "allowed_address_pairs": [], 
        "device_owner": "compute:nova", 
        "fake_delete": true, 
        "fixed_ips": [
            {
                "subnet_id": "0479131c-e828-4721-abaa-a46265518b89", 
                "ip_address": "10.121.233.3"
            }
        ], 
        "id": "160234ca-2b72-4029-b3ff-8c83d82b9c5a", 
        "security_groups": [], 
        "binding:vif_type": "vrouter", 
        "mac_address": "fa:16:3e:76:31:15", 
        "status": "PENDING_UPDATE", 
        "description": "", 
        "tags": {}, 
        "segmentation_id": 0, 
        "device_id": "dab11f56-f0f2-4cac-bee6-6cec5038458c", 
        "name": "firewall-user-port", 
        "admin_state_up": false, 
        "network_id": "3ad67159-9f73-404a-94da-582bda1641fb", 
        "tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "managed_by_service": false, 
        "attached": true, 
        "operational_state": "NO_STATE", 
        "orchestration_state": "UPDATE_IN_PROGRESS", 
        "segmentation_type": "flat"
    }, 
    "version": 3, 
    "marked_for_deletion": false
}]
2019-04-02 03:08:01,059:DEBUG:About to wait on key /config, index None
2019-04-02 03:08:01,060:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:08:01,062:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:08:04,405:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/ports/47c97a61-e3e8-403a-b662-a117935c7a02],
 value=[{
    "body": {
        "ese_logical_port_id": null, 
        "allowed_address_pairs": [], 
        "device_owner": "compute:nova", 
        "fake_delete": true, 
        "fixed_ips": [
            {
                "subnet_id": "0479131c-e828-4721-abaa-a46265518b89", 
                "ip_address": "10.121.233.4"
            }
        ], 
        "id": "47c97a61-e3e8-403a-b662-a117935c7a02", 
        "security_groups": [], 
        "binding:vif_type": "vrouter", 
        "mac_address": "fa:16:3e:85:92:30", 
        "status": "PENDING_UPDATE", 
        "description": "", 
        "tags": {}, 
        "segmentation_id": 0, 
        "device_id": "dab11f56-f0f2-4cac-bee6-6cec5038458c", 
        "name": "firewall-user-port", 
        "admin_state_up": false, 
        "network_id": "3ad67159-9f73-404a-94da-582bda1641fb", 
        "tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "managed_by_service": false, 
        "attached": false, 
        "operational_state": "NO_STATE", 
        "orchestration_state": "UPDATE_IN_PROGRESS", 
        "segmentation_type": "flat"
    }, 
    "version": 2, 
    "marked_for_deletion": false
}]
2019-04-02 03:08:04,406:DEBUG:About to wait on key /config, index None
2019-04-02 03:08:04,406:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:08:04,408:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:08:16,509:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/ports/47c97a61-e3e8-403a-b662-a117935c7a02],
 value=[{
    "body": {
        "ese_logical_port_id": null, 
        "allowed_address_pairs": [], 
        "device_owner": "compute:nova", 
        "fake_delete": true, 
        "fixed_ips": [
            {
                "subnet_id": "0479131c-e828-4721-abaa-a46265518b89", 
                "ip_address": "10.121.233.4"
            }
        ], 
        "id": "47c97a61-e3e8-403a-b662-a117935c7a02", 
        "security_groups": [], 
        "binding:vif_type": "vrouter", 
        "mac_address": "fa:16:3e:85:92:30", 
        "status": "PENDING_UPDATE", 
        "description": "", 
        "tags": {}, 
        "segmentation_id": 0, 
        "device_id": "dab11f56-f0f2-4cac-bee6-6cec5038458c", 
        "name": "firewall-user-port", 
        "admin_state_up": false, 
        "network_id": "3ad67159-9f73-404a-94da-582bda1641fb", 
        "tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "managed_by_service": false, 
        "attached": true, 
        "operational_state": "NO_STATE", 
        "orchestration_state": "UPDATE_IN_PROGRESS", 
        "segmentation_type": "flat"
    }, 
    "version": 3, 
    "marked_for_deletion": false
}]
2019-04-02 03:08:16,510:DEBUG:About to wait on key /config, index None
2019-04-02 03:08:16,510:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:08:16,511:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:08:36,510:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:08:36,510:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:08:36,511:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:08:36,511:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:08:36,512:DEBUG:About to wait on key /config, index None
2019-04-02 03:08:36,512:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:08:36,513:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:08:36,515:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:08:56,512:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:08:56,514:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:08:56,515:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:08:56,516:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:08:56,516:DEBUG:About to wait on key /config, index None
2019-04-02 03:08:56,516:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:08:56,517:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:08:56,519:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:09:16,533:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:09:16,534:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:09:16,534:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:09:16,535:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:09:16,535:DEBUG:About to wait on key /config, index None
2019-04-02 03:09:16,535:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:09:16,536:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:09:16,538:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:09:36,530:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:09:36,533:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:09:36,533:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:09:36,534:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:09:36,534:DEBUG:About to wait on key /config, index None
2019-04-02 03:09:36,535:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:09:36,535:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:09:36,537:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:09:56,528:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:09:56,531:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:09:56,531:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:09:56,532:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:09:56,532:DEBUG:About to wait on key /config, index None
2019-04-02 03:09:56,533:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:09:56,533:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:09:56,535:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:10:16,547:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:10:16,550:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:10:16,550:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:10:16,551:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:10:16,551:DEBUG:About to wait on key /config, index None
2019-04-02 03:10:16,552:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:10:16,552:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:10:16,554:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:10:31,917:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/ports/3bf53c24-5937-4b84-b276-0babb300b79d],
 value=[{
    "body": {
        "allowed_address_pairs": [], 
        "device_owner": "", 
        "fake_delete": true, 
        "fixed_ips": [
            {
                "subnet_id": "8effd73d-925d-4ec9-9cee-8cffc9aafef3", 
                "ip_address": "10.98.77.3"
            }
        ], 
        "id": "3bf53c24-5937-4b84-b276-0babb300b79d", 
        "security_groups": [], 
        "binding:vif_type": "vrouter", 
        "mac_address": "fa:16:3e:ce:cb:b2", 
        "status": "PENDING_CREATE", 
        "description": "", 
        "tags": {}, 
        "segmentation_id": 0, 
        "device_id": "", 
        "name": "firewall-user-port", 
        "admin_state_up": true, 
        "network_id": "0422f224-5da3-4f01-8ba5-2ae68f241774", 
        "tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "managed_by_service": false, 
        "attached": false, 
        "operational_state": "NO_STATE", 
        "orchestration_state": "CREATE_IN_PROGRESS", 
        "segmentation_type": "flat"
    }, 
    "version": 1, 
    "marked_for_deletion": false
}]
2019-04-02 03:10:31,919:DEBUG:About to wait on key /config, index None
2019-04-02 03:10:31,920:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:10:31,923:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:10:31,932:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/vnf_interfaces/20e0aabb-d2db-4b0f-89f6-61f685f1af0d],
 value=[{
    "body": {
        "status": "PENDING_UPDATE", 
        "type": "user", 
        "description": null, 
        "network_id": "0422f224-5da3-4f01-8ba5-2ae68f241774", 
        "ip_address": "10.98.77.3", 
        "vnf_instance_id": "c10935ab-768a-4901-8953-11f9d3987949", 
        "tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "slot_number": 1, 
        "virtual_ip_address": null, 
        "virtual_ip_properties": null, 
        "port_id": "3bf53c24-5937-4b84-b276-0babb300b79d", 
        "id": "20e0aabb-d2db-4b0f-89f6-61f685f1af0d", 
        "name": "interface-1"
    }, 
    "version": 2, 
    "marked_for_deletion": false
}]
2019-04-02 03:10:31,933:DEBUG:About to wait on key /config, index None
2019-04-02 03:10:31,934:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:10:31,936:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:10:31,942:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/vnf_instances/c10935ab-768a-4901-8953-11f9d3987949],
 value=[{
    "body": {
        "status": "PENDING_UPDATE", 
        "user_data_format": "RAW", 
        "user_data_parameters": {}, 
        "description": null, 
        "availability_zone": "nova", 
        "tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "vnf_template_id": "856d0c84-482e-483d-9fec-55a8ce177e11", 
        "vnf_plan_id": "e881b86c-4e61-4268-93a9-6b272a48cb6a", 
        "networks": [
            {
                "port": "47c9831b-b346-4317-bc44-f942ecaee54c"
            }, 
            {
                "port": "3bf53c24-5937-4b84-b276-0babb300b79d"
            }, 
            {
                "port": "47c97a61-e3e8-403a-b662-a117935c7a02"
            }
        ], 
        "reboot": "", 
        "name": "firewall-dbd98e9a-30ba-4b9b-a2a4-ef4ddb3d36cc", 
        "management_ip": "100.64.194.3", 
        "orchestration_state": "UPDATE_IN_PROGRESS", 
        "owner_tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "user_data": "", 
        "operational_state": "INIT", 
        "id": "c10935ab-768a-4901-8953-11f9d3987949", 
        "config_drive": false
    }, 
    "version": 2, 
    "marked_for_deletion": false
}]
2019-04-02 03:10:31,943:DEBUG:About to wait on key /config, index None
2019-04-02 03:10:31,944:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:10:31,952:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:10:31,980:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/ports/160234ca-2b72-4029-b3ff-8c83d82b9c5a],
 value=[{
    "body": {
        "ese_logical_port_id": null, 
        "allowed_address_pairs": [], 
        "device_owner": "compute:nova", 
        "fake_delete": false, 
        "fixed_ips": [
            {
                "subnet_id": "0479131c-e828-4721-abaa-a46265518b89", 
                "ip_address": "10.121.233.3"
            }
        ], 
        "id": "160234ca-2b72-4029-b3ff-8c83d82b9c5a", 
        "security_groups": [], 
        "binding:vif_type": "vrouter", 
        "mac_address": "fa:16:3e:76:31:15", 
        "status": "PENDING_DELETE", 
        "description": "", 
        "tags": {}, 
        "segmentation_id": 0, 
        "device_id": "dab11f56-f0f2-4cac-bee6-6cec5038458c", 
        "name": "firewall-user-port", 
        "admin_state_up": false, 
        "network_id": "3ad67159-9f73-404a-94da-582bda1641fb", 
        "tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "managed_by_service": false, 
        "attached": true, 
        "operational_state": "INIT", 
        "orchestration_state": "DELETE_IN_PROGRESS", 
        "segmentation_type": "flat"
    }, 
    "version": 4, 
    "marked_for_deletion": true
}]
2019-04-02 03:10:31,981:DEBUG:About to wait on key /config, index None
2019-04-02 03:10:31,982:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:10:31,984:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:10:32,001:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/firewall_interfaces/1fbbd8eb-0e12-4178-96e8-7454faed5f82],
 value=[{
    "body": {
        "status": "PENDING_UPDATE", 
        "type": "user", 
        "description": null, 
        "network_id": "0422f224-5da3-4f01-8ba5-2ae68f241774", 
        "tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "vnf_interface_id": "20e0aabb-d2db-4b0f-89f6-61f685f1af0d", 
        "operational_state": "INIT", 
        "firewall_id": "dbd98e9a-30ba-4b9b-a2a4-ef4ddb3d36cc", 
        "orchestration_state": "UPDATE_IN_PROGRESS", 
        "slot_number": 1, 
        "virtual_ip_address": null, 
        "virtual_ip_properties": null, 
        "ip_address": "10.98.77.3", 
        "id": "1fbbd8eb-0e12-4178-96e8-7454faed5f82", 
        "name": "dp0s4"
    }, 
    "version": 2, 
    "marked_for_deletion": false
}]
2019-04-02 03:10:32,002:DEBUG:About to wait on key /config, index None
2019-04-02 03:10:32,003:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:10:32,004:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:10:32,029:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/firewalls/dbd98e9a-30ba-4b9b-a2a4-ef4ddb3d36cc],
 value=[{
    "body": {
        "status": "PENDING_UPDATE", 
        "other_username": "", 
        "description": "", 
        "user_username": "user-read", 
        "default_gateway": "192.168.1.1", 
        "tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "interfaces": [], 
        "availability_zone": "nova", 
        "admin_username": "user-admin", 
        "networks": [
            {
                "type": "static", 
                "cidr": "24", 
                "ip_address": "10.98.77.3", 
                "ifname": "dp0s4"
            }, 
            {
                "ifname": "dp0s5", 
                "type": "disable"
            }
        ], 
        "orchestration_state": "UPDATE_IN_PROGRESS", 
        "user_password": "K6TXpoQ7Ek7N", 
        "other_password": "", 
        "admin_password": "UgMa576iZjDg", 
        "firewall_plan_id": "3cf84f69-ae2e-47a1-a8f7-31286603d2f6", 
        "vnf_instance_id": "c10935ab-768a-4901-8953-11f9d3987949", 
        "operational_state": "INIT", 
        "id": "dbd98e9a-30ba-4b9b-a2a4-ef4ddb3d36cc", 
        "name": ""
    }, 
    "version": 2, 
    "marked_for_deletion": false
}]
2019-04-02 03:10:32,043:DEBUG:About to wait on key /config, index None
2019-04-02 03:10:32,054:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:10:32,067:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:10:36,585:DEBUG:
*** Consume stored data in etcd ***
 action=[delete], key=[/config/v2.0/ports/160234ca-2b72-4029-b3ff-8c83d82b9c5a],
 value=[]
2019-04-02 03:10:36,586:DEBUG:About to wait on key /config, index None
2019-04-02 03:10:36,587:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:10:36,588:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:10:40,981:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/ports/47c97a61-e3e8-403a-b662-a117935c7a02],
 value=[{
    "body": {
        "ese_logical_port_id": null, 
        "allowed_address_pairs": [], 
        "device_owner": "", 
        "fake_delete": true, 
        "fixed_ips": [
            {
                "subnet_id": "0479131c-e828-4721-abaa-a46265518b89", 
                "ip_address": "10.121.233.4"
            }
        ], 
        "id": "47c97a61-e3e8-403a-b662-a117935c7a02", 
        "security_groups": [], 
        "binding:vif_type": "vrouter", 
        "mac_address": "fa:16:3e:85:92:30", 
        "status": "PENDING_UPDATE", 
        "description": "", 
        "tags": {}, 
        "segmentation_id": 0, 
        "device_id": "", 
        "name": "firewall-user-port", 
        "admin_state_up": false, 
        "network_id": "3ad67159-9f73-404a-94da-582bda1641fb", 
        "tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "managed_by_service": false, 
        "attached": false, 
        "operational_state": "INIT", 
        "orchestration_state": "UPDATE_IN_PROGRESS", 
        "segmentation_type": "flat"
    }, 
    "version": 4, 
    "marked_for_deletion": false
}]
2019-04-02 03:10:40,982:DEBUG:About to wait on key /config, index None
2019-04-02 03:10:40,983:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:10:40,986:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:11:00,985:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:11:00,987:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:11:00,988:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:11:00,988:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:11:00,988:DEBUG:About to wait on key /config, index None
2019-04-02 03:11:00,989:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:11:00,989:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:11:00,991:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:11:21,012:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:11:21,013:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:11:21,013:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:11:21,014:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:11:21,014:DEBUG:About to wait on key /config, index None
2019-04-02 03:11:21,015:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:11:21,016:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:11:21,018:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:11:41,017:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:11:41,020:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:11:41,021:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:11:41,021:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:11:41,022:DEBUG:About to wait on key /config, index None
2019-04-02 03:11:41,022:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:11:41,023:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:11:41,025:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:11:53,367:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/ports/3bf53c24-5937-4b84-b276-0babb300b79d],
 value=[{
    "body": {
        "ese_logical_port_id": null, 
        "allowed_address_pairs": [], 
        "device_owner": "compute:nova", 
        "fake_delete": true, 
        "fixed_ips": [
            {
                "subnet_id": "8effd73d-925d-4ec9-9cee-8cffc9aafef3", 
                "ip_address": "10.98.77.3"
            }
        ], 
        "id": "3bf53c24-5937-4b84-b276-0babb300b79d", 
        "security_groups": [], 
        "binding:vif_type": "vrouter", 
        "mac_address": "fa:16:3e:ce:cb:b2", 
        "status": "PENDING_UPDATE", 
        "description": "", 
        "tags": {}, 
        "segmentation_id": 0, 
        "device_id": "dab11f56-f0f2-4cac-bee6-6cec5038458c", 
        "name": "firewall-user-port", 
        "admin_state_up": true, 
        "network_id": "0422f224-5da3-4f01-8ba5-2ae68f241774", 
        "tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "managed_by_service": false, 
        "attached": false, 
        "operational_state": "NO_STATE", 
        "orchestration_state": "UPDATE_IN_PROGRESS", 
        "segmentation_type": "flat"
    }, 
    "version": 2, 
    "marked_for_deletion": false
}]
2019-04-02 03:11:53,369:DEBUG:About to wait on key /config, index None
2019-04-02 03:11:53,370:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:11:53,371:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:12:04,384:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/ports/3bf53c24-5937-4b84-b276-0babb300b79d],
 value=[{
    "body": {
        "ese_logical_port_id": null, 
        "allowed_address_pairs": [], 
        "device_owner": "compute:nova", 
        "fake_delete": true, 
        "fixed_ips": [
            {
                "subnet_id": "8effd73d-925d-4ec9-9cee-8cffc9aafef3", 
                "ip_address": "10.98.77.3"
            }
        ], 
        "id": "3bf53c24-5937-4b84-b276-0babb300b79d", 
        "security_groups": [], 
        "binding:vif_type": "vrouter", 
        "mac_address": "fa:16:3e:ce:cb:b2", 
        "status": "PENDING_UPDATE", 
        "description": "", 
        "tags": {}, 
        "segmentation_id": 0, 
        "device_id": "dab11f56-f0f2-4cac-bee6-6cec5038458c", 
        "name": "firewall-user-port", 
        "admin_state_up": true, 
        "network_id": "0422f224-5da3-4f01-8ba5-2ae68f241774", 
        "tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "managed_by_service": false, 
        "attached": true, 
        "operational_state": "NO_STATE", 
        "orchestration_state": "UPDATE_IN_PROGRESS", 
        "segmentation_type": "flat"
    }, 
    "version": 3, 
    "marked_for_deletion": false
}]
2019-04-02 03:12:04,384:DEBUG:About to wait on key /config, index None
2019-04-02 03:12:04,385:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:12:04,386:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:12:06,320:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/ports/47c97a61-e3e8-403a-b662-a117935c7a02],
 value=[{
    "body": {
        "ese_logical_port_id": null, 
        "allowed_address_pairs": [], 
        "device_owner": "compute:nova", 
        "fake_delete": true, 
        "fixed_ips": [
            {
                "subnet_id": "0479131c-e828-4721-abaa-a46265518b89", 
                "ip_address": "10.121.233.4"
            }
        ], 
        "id": "47c97a61-e3e8-403a-b662-a117935c7a02", 
        "security_groups": [], 
        "binding:vif_type": "vrouter", 
        "mac_address": "fa:16:3e:85:92:30", 
        "status": "PENDING_UPDATE", 
        "description": "", 
        "tags": {}, 
        "segmentation_id": 0, 
        "device_id": "dab11f56-f0f2-4cac-bee6-6cec5038458c", 
        "name": "firewall-user-port", 
        "admin_state_up": false, 
        "network_id": "3ad67159-9f73-404a-94da-582bda1641fb", 
        "tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "managed_by_service": false, 
        "attached": false, 
        "operational_state": "INIT", 
        "orchestration_state": "UPDATE_IN_PROGRESS", 
        "segmentation_type": "flat"
    }, 
    "version": 5, 
    "marked_for_deletion": false
}]
2019-04-02 03:12:06,322:DEBUG:About to wait on key /config, index None
2019-04-02 03:12:06,323:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:12:06,325:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:12:17,729:DEBUG:
*** Consume stored data in etcd ***
 action=[set], key=[/config/v2.0/ports/47c97a61-e3e8-403a-b662-a117935c7a02],
 value=[{
    "body": {
        "ese_logical_port_id": null, 
        "allowed_address_pairs": [], 
        "device_owner": "compute:nova", 
        "fake_delete": true, 
        "fixed_ips": [
            {
                "subnet_id": "0479131c-e828-4721-abaa-a46265518b89", 
                "ip_address": "10.121.233.4"
            }
        ], 
        "id": "47c97a61-e3e8-403a-b662-a117935c7a02", 
        "security_groups": [], 
        "binding:vif_type": "vrouter", 
        "mac_address": "fa:16:3e:85:92:30", 
        "status": "PENDING_UPDATE", 
        "description": "", 
        "tags": {}, 
        "segmentation_id": 0, 
        "device_id": "dab11f56-f0f2-4cac-bee6-6cec5038458c", 
        "name": "firewall-user-port", 
        "admin_state_up": false, 
        "network_id": "3ad67159-9f73-404a-94da-582bda1641fb", 
        "tenant_id": "d2a4608bbd28402196acdba7a1632daf", 
        "managed_by_service": false, 
        "attached": true, 
        "operational_state": "INIT", 
        "orchestration_state": "UPDATE_IN_PROGRESS", 
        "segmentation_type": "flat"
    }, 
    "version": 6, 
    "marked_for_deletion": false
}]
2019-04-02 03:12:17,730:DEBUG:About to wait on key /config, index None
2019-04-02 03:12:17,730:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:12:17,731:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:12:37,731:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:12:37,734:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:12:37,734:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:12:37,734:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:12:37,735:DEBUG:About to wait on key /config, index None
2019-04-02 03:12:37,736:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:12:37,736:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:12:37,738:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:12:57,731:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:12:57,735:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:12:57,735:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:12:57,735:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:12:57,736:DEBUG:About to wait on key /config, index None
2019-04-02 03:12:57,736:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:12:57,737:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:12:57,738:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:13:17,751:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:13:17,754:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:13:17,754:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:13:17,755:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:13:17,755:DEBUG:About to wait on key /config, index None
2019-04-02 03:13:17,756:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:13:17,756:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:13:17,758:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:13:37,750:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:13:37,751:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:13:37,752:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:13:37,752:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:13:37,753:DEBUG:About to wait on key /config, index None
2019-04-02 03:13:37,753:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:13:37,754:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:13:37,756:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:13:57,746:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:13:57,749:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:13:57,749:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:13:57,750:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:13:57,750:DEBUG:About to wait on key /config, index None
2019-04-02 03:13:57,751:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:13:57,751:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:13:57,753:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:14:17,770:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:14:17,772:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:14:17,773:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:14:17,773:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:14:17,774:DEBUG:About to wait on key /config, index None
2019-04-02 03:14:17,774:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:14:17,775:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:14:17,776:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:14:37,774:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:14:37,774:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:14:37,775:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:14:37,775:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:14:37,776:DEBUG:About to wait on key /config, index None
2019-04-02 03:14:37,776:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:14:37,777:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:14:37,778:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:14:57,780:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:14:57,782:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:14:57,783:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:14:57,783:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:14:57,784:DEBUG:About to wait on key /config, index None
2019-04-02 03:14:57,784:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:14:57,785:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:14:57,787:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:15:17,808:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:15:17,811:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:15:17,811:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:15:17,812:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:15:17,813:DEBUG:About to wait on key /config, index None
2019-04-02 03:15:17,813:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:15:17,814:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:15:17,815:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:15:37,800:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:15:37,801:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:15:37,802:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:15:37,803:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:15:37,804:DEBUG:About to wait on key /config, index None
2019-04-02 03:15:37,805:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:15:37,806:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:15:37,808:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:15:57,789:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:15:57,792:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:15:57,792:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:15:57,793:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:15:57,794:DEBUG:About to wait on key /config, index None
2019-04-02 03:15:57,795:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:15:57,796:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:15:57,798:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:16:17,821:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:16:17,824:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:16:17,824:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:16:17,825:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:16:17,825:DEBUG:About to wait on key /config, index None
2019-04-02 03:16:17,826:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:16:17,826:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:16:17,828:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:16:37,822:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:16:37,826:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:16:37,827:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:16:37,828:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:16:37,829:DEBUG:About to wait on key /config, index None
2019-04-02 03:16:37,829:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:16:37,830:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:16:37,833:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:16:57,831:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:16:57,834:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:16:57,834:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:16:57,835:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:16:57,836:DEBUG:About to wait on key /config, index None
2019-04-02 03:16:57,836:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:16:57,837:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:16:57,839:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:17:17,850:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:17:17,851:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:17:17,852:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:17:17,852:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:17:17,852:DEBUG:About to wait on key /config, index None
2019-04-02 03:17:17,853:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:17:17,853:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:17:17,855:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:17:37,844:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:17:37,847:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:17:37,848:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:17:37,849:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:17:37,849:DEBUG:About to wait on key /config, index None
2019-04-02 03:17:37,850:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:17:37,851:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:17:37,854:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:17:57,837:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:17:57,838:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:17:57,839:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:17:57,839:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:17:57,840:DEBUG:About to wait on key /config, index None
2019-04-02 03:17:57,841:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:17:57,841:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:17:57,844:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:18:17,865:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:18:17,867:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:18:17,868:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:18:17,869:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:18:17,870:DEBUG:About to wait on key /config, index None
2019-04-02 03:18:17,870:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:18:17,871:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:18:17,873:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:18:37,866:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:18:37,867:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:18:37,868:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:18:37,868:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:18:37,869:DEBUG:About to wait on key /config, index None
2019-04-02 03:18:37,870:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:18:37,871:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:18:37,873:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
2019-04-02 03:18:57,869:ERROR:Request to server http://etcd-server:2379 failed: ReadTimeoutError("HTTPConnectionPool(host='etcd-server', port=2379): Read timed out.",)
2019-04-02 03:18:57,869:INFO:Reconnection allowed, looking for another server.
2019-04-02 03:18:57,870:DEBUG:Selection next machine in cache. Available machines: []
2019-04-02 03:18:57,870:ERROR:Machines cache is empty, no machines to try.
2019-04-02 03:18:57,871:DEBUG:About to wait on key /config, index None
2019-04-02 03:18:57,871:DEBUG:Issuing read for key /config with args {'recursive': True, 'timeout': None, 'wait': True}
2019-04-02 03:18:57,872:DEBUG:Resetting dropped connection: etcd-server
2019-04-02 03:18:57,874:DEBUG:http://etcd-server:2379 "GET /v2/keys/config?recursive=true&wait=true HTTP/1.1" 200 None
